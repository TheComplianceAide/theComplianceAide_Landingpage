(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8786],{71096:(e,t,n)=>{"use strict";n.d(t,{t:()=>E,E:()=>L});var i=n(31085),a=n(63341),r=n(72821),o=n(70323),l=n(61778),s=n(80532),d=n(33683),c=n(62313),u=n(40173),p=n(20501),h=n(3040),m=n(24221),g=n(14041);let x={x:-1e3,y:-1e3};function f(e){return"items"in e}function v(e){return"check"in e}function b(e){return"label"in e}function y(e){return"divider"in e}let w=e=>{let{initial:t,top:n,bottom:i}=e,a=Math.abs(n.x-t.x),r=Math.abs(n.y-t.y),o=Math.abs(i.y-t.y);return 0===a?{alpha:0,beta:0}:{alpha:Math.atan(r/a),beta:Math.atan(o/a)}},j=e=>{let{menuItems:t,position:n,isOpen:i,onClose:a}=e,r=(0,g.useRef)(null),o=(0,g.useRef)(new Map),[l,s]=(0,g.useState)([]),{itemsIndex:d,itemsHash:c,getItemFromKey:u}=function(e){let t=new Map,n=(e,t)=>{let n=null;for(let i of e){if(!(n=t[i]))throw console.log(e,i),Error("item not found");t=f(n)?n.items:[]}if(!n)throw console.log(e),Error("item not found");return n},i=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.forEach((e,a)=>{if(!b(e))return;let r=e.key;if(t.has(r))throw console.log(t.get(r)),Error("duplicated key=".concat(r));let o=[...n,a];t.set(r,o),f(e)&&i(e.items,o)})};i(e);let a=[...t.entries()].map(e=>{let[t,n]=e;return"".concat(t,":").concat(n.join("|"))}).join(",");return{itemsIndex:t,itemsHash:a,getItemFromKey:(e,i)=>n(t.get(e)||[],i)}}(t),p=(0,g.useCallback)(e=>{var n,i,a,c,p,h,m,g,x,v;let b=null===(n=e.target)||void 0===n?void 0:n.closest("[data-menu-item-key]"),y=null===(i=e.target)||void 0===i?void 0:i.closest("[data-menu-id]"),j=(null==y?void 0:y.getAttribute("data-menu-id"))||"",k=(null==b?void 0:b.getAttribute("data-menu-item-key"))||"";if(!j||!k)return;let C=o.current.get(j);if(!C)return;let{trigger:S,hideTimer:A}=C,z="".concat(j,":").concat(k),I=null===(a=d.get(k))||void 0===a?void 0:a.length,R=null!==(g=o.current.get(I&&(null===(c=l[I])||void 0===c?void 0:c.key)||""))&&void 0!==g?g:{},{element:E,key:L,hideTimer:_}=null!=R?R:{},M=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;R.hideTimer=setTimeout(()=>{s(e=>{let t=e.splice(0,I);return e.forEach(e=>{let{key:t}=e,n=o.current.get(t);n&&(n.hideTimer&&clearTimeout(n.hideTimer),o.current.delete(t))}),t})},e)};if(A&&(clearTimeout(A),C.hideTimer=void 0),k===L){C.trigger={x:e.clientX,y:e.clientY},_&&(clearTimeout(_),R.hideTimer=void 0);return}if(E&&S&&function(e){let{el:t,initial:n,currentCoords:i}=e;if(!t||t.offsetTop<0||t.offsetLeft<0||t.offsetLeft<n.x&&i.x>n.x||t.offsetLeft>n.x&&i.x<n.x)return!1;let a={x:0};t.offsetLeft<n.x&&(a.x+=t.offsetWidth);let r=w({initial:n,top:{y:t.offsetTop,x:t.offsetLeft+a.x},bottom:{y:t.offsetTop+t.offsetHeight,x:t.offsetLeft+a.x}}),o=Math.atan(Math.abs(n.y-i.y)/Math.abs(i.x-n.x));return i.y<n.y?o<r.alpha:o<r.beta}({el:E,initial:S,currentCoords:{x:e.clientX,y:e.clientY}})){_||M();return}if(r.current===z)return;if(r.current=z,!f(u(k,t))){I&&l[I]&&M(0);return}A&&(clearTimeout(A),C.hideTimer=void 0);let N=l.find(e=>{let{key:t}=e;return t===j});if(!N){console.error("menu not found",{openMenus:{...l},menuKey:j});return}let T=N.position,P={x:(null!==(x=null===(p=C.element)||void 0===p?void 0:p.offsetLeft)&&void 0!==x?x:T.x)+((null===(h=C.element)||void 0===h?void 0:h.offsetWidth)||0),y:b.offsetTop+(null!==(v=null===(m=C.element)||void 0===m?void 0:m.offsetTop)&&void 0!==v?v:T.y)};C.trigger={x:e.clientX,y:e.clientY},s(e=>{var t;let n=e.slice(0,I);return n.push({key:k,position:P,offset:{x:(null===(t=C.element)||void 0===t?void 0:t.offsetWidth)||b.offsetWidth,y:-1*b.offsetHeight}}),o.current.has(k)||o.current.set(k,{}),o.current.get(k).key=k,n})},[l,c]);return(0,g.useEffect)(()=>(window.addEventListener("mousemove",p),()=>{window.removeEventListener("mousemove",p)}),[p]),(0,g.useEffect)(()=>{!1===i?(s([]),o.current=new Map):s([{key:"_root",position:n,offset:{x:0,y:0}}]);let e=e=>{var t;i&&((null===(t=e.target)||void 0===t?void 0:t.closest("[data-menu-id]"))||a())};return window.addEventListener("mousedown",e),()=>{window.removeEventListener("mousedown",e)}},[i,a]),(0,g.useEffect)(()=>{s(e=>(e.length&&(e[0].position={x:n.x,y:n.y}),e))},[n.x,n.y]),{setMenuRef:e=>t=>{o.current.has(e)||o.current.set(e,{}),o.current.get(e).element=t},openMenus:l,getMenuItems:function(e){if("_root"===e)return t;let n=u(e,t);return f(n)?n.items:[]}}};var k=n(12784),C=n.n(k);let S=e=>{let{element:t,position:n,offset:i={x:0,y:0}}=e,[a,r]=(0,g.useState)({width:window.innerWidth,height:window.innerHeight}),[o,l]=(0,g.useState)({x:n.x,y:n.y}),s=(0,g.useCallback)(e=>{let{width:t,height:r}=a;if(n.x<0||n.y<0)return;let s={x:0,y:0};e.offsetWidth+n.x>t&&(s.x=-((e.offsetWidth+i.x)*1)),e.offsetHeight+n.y>r&&(s.y=-((e.offsetHeight+i.y)*1));let d={x:n.x+s.x,y:n.y+s.y};(d.x!==o.x||d.y!==o.y)&&l(d)},[n.x,n.y,i.x,i.y,o,a]);return(0,g.useEffect)(()=>{let e=C()(()=>{r({width:window.innerWidth,height:window.innerHeight})},150);return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),(0,g.useEffect)(()=>{t&&s(t)},[s,t]),{calculatePosition:s,position:o}},A=(0,g.forwardRef)((e,t)=>{let{isOpen:n,onClose:u,menuItems:h,position:x,parentOffset:w={x:0,y:0},id:j,activeElement:k,size:C="medium"}=e,A=(0,g.useRef)(null),{position:I,calculatePosition:E}=S({element:A.current,position:x,offset:w}),L=()=>{var e;let n=(null===(e=A.current)||void 0===e?void 0:e.parentNode)||null;"function"==typeof t?t(n):t&&(t.current=n)};(0,g.useEffect)(()=>{t&&L()},[t]);let _=h.map(e=>y(e)?"divider":e.key).join(",");(0,g.useEffect)(()=>{A.current&&E(A.current)},[_,x]);let M=(0,g.useMemo)(()=>h.filter(e=>b(e)),[h]),N=!!M.find(e=>v(e)),T=!!M.find(e=>e.icon);return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(a.W,{isOpen:n,onClose:u,closeOnBlur:!1,closeOnSelect:!0,children:(0,i.jsx)(r.c,{"data-menu-id":j,zIndex:"tooltip",rootProps:{style:{top:I.y,left:I.x}},ref:e=>{A.current=e,L(),e&&E(e)},fontSize:"small"===C?"sm":"large"===C?"lg":"md",children:h.map((e,t)=>y(e)?(0,i.jsx)(o.c,{color:"gray.300",my:"small"===C?1:"large"===C?3:2},"divider-".concat(t)):"title"in e?(0,i.jsx)(l.E,{color:"gray.500",ps:3,children:e.title},e.key):"element"in e?(0,i.jsx)(s.az,{children:e.element(u)},e.key):(0,i.jsx)(d.D,{py:"small"===C?1:"large"===C?3:2,cursor:"pointer",icon:(0,i.jsx)(z,{item:e,menuHasIcons:T,menuHasChecked:N}),background:k===e.key?"gray.100":void 0,closeOnSelect:!f(e),onClick:f(e)?void 0:e.onClick,isDisabled:e.disabled,color:e.color,"data-menu-item-key":e.key,children:(0,i.jsxs)(c.z,{width:"100%",pointerEvents:"none",children:[(0,i.jsx)(s.az,{flexGrow:2,children:e.label}),e.rightIcon&&(0,i.jsx)(s.az,{flexGrow:0,ps:2,children:(0,i.jsx)(R,{icon:e.rightIcon})}),f(e)&&(0,i.jsx)(s.az,{flexGrow:0,ps:2,children:(0,i.jsx)(m.g,{icon:p.vmR})})]})},e.key))})})})});A.displayName="ContextMenuInner";let z=e=>{let{item:t,menuHasIcons:n,menuHasChecked:a}=e;return(0,i.jsx)(c.z,{justifyContent:"center",children:(0,i.jsxs)(i.Fragment,{children:[a&&(0,i.jsx)(I,{item:t}),n&&(0,i.jsx)(R,{icon:t.icon})]})})},I=e=>{let{item:t}=e;return v(t)&&t.check?"multiple"===t.check?(0,i.jsx)(m.g,{icon:h.EZy,width:"1em"}):(0,i.jsx)(m.g,{icon:h.e68,width:"1em"}):(0,i.jsx)(s.az,{width:"1em"})},R=e=>{let{icon:t}=e;return t?"icon"in t?(0,i.jsx)(m.g,{icon:t,width:"1em"}):t:(0,i.jsx)(s.az,{width:"1em"})},E=e=>{let{onClose:t,isOpen:n,menuItems:a,position:r,size:o="medium"}=e,{setMenuRef:l,openMenus:s,getMenuItems:d}=j({isOpen:n,onClose:t,menuItems:a,position:r});return(0,i.jsx)(u.Z,{appendToParentPortal:!1,children:[...s,null].map((e,n)=>{var a,r;return null===e?(0,i.jsx)(A,{id:"placeholder",menuItems:[],position:x,isOpen:!1,onClose:t,size:o},"menu-".concat(n)):(0,i.jsx)(A,{id:e.key,activeElement:null!==(r=null===(a=s[n+1])||void 0===a?void 0:a.key)&&void 0!==r?r:void 0,menuItems:d(e.key),position:e.position,parentOffset:e.offset,isOpen:!0,onClose:t,ref:l(e.key),size:o},"menu-".concat(n))})})},L=()=>{let[e,t]=(0,g.useState)(x),[n,i]=(0,g.useState)(!1);return{onContextMenu:e=>{e.stopPropagation(),e.preventDefault(),t({x:e.clientX,y:e.clientY}),i(!0)},menuProps:{isOpen:n,position:e,onClose:()=>{i(!1),t(x)}}}}},18064:(e,t,n)=>{"use strict";n.d(t,{S:()=>d});var i=n(31085),a=n(25420),r=n(80532),o=n(61778),l=n(9104),s=n(95640);n(14041);let d=e=>{let{createdByName:t,createdByProfileImageUrl:n,createdByYou:d,timestampDescription:c}=e;return(0,i.jsxs)(a.s,{align:"center",children:[(0,i.jsx)(l.Vc,{size:"xs",fontSize:"xs",name:t,src:n,tooltipProps:{placement:"top"}}),(0,i.jsxs)(r.az,{marginInlineStart:2,marginInlineEnd:2,w:"100%",children:[(0,i.jsx)(o.E,{noOfLines:1,fontSize:"xs",w:"100%",wordBreak:"break-all",children:d?(0,i.jsx)(s.x6,{id:"WZTg05"}):(0,i.jsx)(s.x6,{id:"pS1F3d",values:{createdByName:t}})}),c&&(0,i.jsx)(o.E,{noOfLines:1,fontSize:"11px",color:"gray.400",children:c})]})]})}},91062:(e,t,n)=>{"use strict";n.d(t,{S:()=>o});var i=n(31085),a=n(46882),r=n(75669);n(14041);let o=e=>{let{children:t,...n}=e;return(0,i.jsx)(a.x,{templateColumns:{base:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(2, 1fr)",lg:"repeat(3, 1fr)",xl:"repeat(4, 1fr)","2xl":"repeat(5, 1fr)"},gap:6,...n,children:(0,i.jsx)(r.N,{children:t})})}},56480:(e,t,n)=>{"use strict";n.d(t,{SW:()=>i.S,Dg:()=>F,MD:()=>P,Zu:()=>O});var i=n(91062),a=n(31085),r=n(92712),o=n(31595),l=n(76003),s=n(25420),d=n(25676),c=n(18651),u=n(80532),p=n(61778),h=n(18201),m=n(9104),g=n(12327),x=n(14041),f=n(14979),v=n(44507),b=n(92667),y=n(75961),w=n(18064),j=n(78872),k=n(32202),C=n(55276),S=n(63341),A=n(18528),z=n(9021),I=n(40173),R=n(72821),E=n(81575),L=n(33683),_=n(20501),M=n(3040),N=n(24221),T=n(95640);let P=e=>{let{href:t,title:n,createdByName:i,createdByEmail:r,createdTime:o,isDuplicateEnabled:l,isRenameEnabled:s,isShareEnabled:d,isTrashed:c,isFavorited:h,isTrashAndRestoreEnabled:g,isRemoveFromChannelEnabled:x,onDuplicate:v,onFavorite:b,onUnfavorite:y,onTrash:w,onPermanentDelete:P,onRestore:O,onShareClick:D,onRename:F,onRemoveFromChannel:H}=e,{onCopy:W}=(0,j.i)("".concat(window.location.origin).concat(t)),B=(0,k.d)(),{isOpen:V,onOpen:G,onClose:U}=(0,C.j)();return(0,a.jsxs)(S.W,{isLazy:!0,closeOnSelect:!1,modifiers:[{name:"flip",enabled:!0,options:{fallbackPlacements:["bottom","bottom-start","bottom-end","right-start","left-start","right-end","left-end","top-start","top-end"]}}],children:[(0,a.jsx)(A.I,{"data-dashboard-doc-menu":!0,as:z.K,size:"xs",variant:"ghost",borderRadius:"full",onClick:G,icon:(0,a.jsx)(N.g,{fixedWidth:!0,icon:_.vHW}),color:"gray.400",_hover:{color:"gray.800",bg:"gray.200"},children:(0,a.jsx)(T.x6,{id:"7L01XJ"})}),V&&(0,a.jsx)(I.Z,{children:(0,a.jsxs)(R.c,{maxW:"sm",zIndex:"overlay",children:[(0,a.jsxs)(u.az,{px:4,py:0,wordBreak:"break-word",children:[(0,a.jsx)(p.E,{noOfLines:2,children:n}),(0,a.jsx)(p.E,{fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,a.jsx)(T.x6,{id:"MXSt4t",values:{0:(0,f.Yq)(o,"MMMM do, yyyy")}})}),r&&i&&(0,a.jsx)(m.Tz,{label:r,children:(0,a.jsx)(p.E,{display:"inline-block",fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,a.jsx)(T.x6,{id:"Wpe4mQ",values:{createdByName:i}})})})]}),(d||s||x)&&(0,a.jsx)(E.N,{}),x&&(0,a.jsx)(L.D,{onClick:H,icon:(0,a.jsx)(N.g,{fixedWidth:!0,icon:_.Dfk}),children:(0,a.jsx)(T.x6,{id:"bv+Frh"})}),d&&(0,a.jsx)(L.D,{onClick:D,icon:(0,a.jsx)(N.g,{fixedWidth:!0,icon:_.t5Z}),children:(0,a.jsx)(T.x6,{id:"iyga2M"})}),s&&(0,a.jsx)(L.D,{onClick:F,icon:(0,a.jsx)(N.g,{fixedWidth:!0,icon:_.tAZ}),children:(0,a.jsx)(T.x6,{id:"Cg4Iup"})}),(0,a.jsx)(E.N,{}),b?h?(0,a.jsx)(L.D,{icon:(0,a.jsx)(u.az,{color:"yellow.400",children:(0,a.jsx)(N.g,{fixedWidth:!0,icon:M.yy})}),onClick:y,children:(0,a.jsx)(T.x6,{id:"T/pF0Z"})}):(0,a.jsx)(L.D,{icon:(0,a.jsx)(N.g,{fixedWidth:!0,icon:_.yy}),onClick:b,children:(0,a.jsx)(T.x6,{id:"pBsoKL"})}):null,l&&!!v&&(0,a.jsx)(L.D,{icon:(0,a.jsx)(N.g,{fixedWidth:!0,icon:_.$3n}),onClick:v,children:(0,a.jsx)(T.x6,{id:"euc6Ns"})}),(0,a.jsx)(L.D,{icon:(0,a.jsx)(N.g,{fixedWidth:!0,icon:_.gnH}),onClick:()=>{W(),B({title:(0,a.jsx)(T.x6,{id:"h5GS+N"}),status:"success",duration:3e3,position:"top"})},children:(0,a.jsx)(T.x6,{id:"y1eoq1"})}),g&&(0,a.jsx)(E.N,{}),g?c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(L.D,{icon:(0,a.jsx)(N.g,{fixedWidth:!0,icon:M.ub2}),onClick:O,children:(0,a.jsx)(T.x6,{id:"yKu/3Y"})}),P&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(E.N,{}),(0,a.jsx)(L.D,{color:"red",icon:(0,a.jsx)(N.g,{fixedWidth:!0,icon:_.bnw}),onClick:P,children:(0,a.jsx)(T.x6,{id:"0Lbaux"})})]})]}):(0,a.jsx)(L.D,{color:"red",icon:(0,a.jsx)(N.g,{fixedWidth:!0,icon:_.yLS}),onClick:()=>{U(),null==w||w()},children:(0,a.jsx)(T.x6,{id:"1C/Yjq"})}):null]})})]})},O=e=>{let{isFavorited:t,onFavorite:n,onUnfavorite:i,disableInteractions:r=!1,...o}=e,[l,s]=(0,x.useState)(!1),d=(0,x.useCallback)(()=>{if(!n||!i){console.error("[FavoriteButton] onFavorite or onUnfavorite is not defined");return}t?(s(!1),i()):(s(!0),setTimeout(()=>{s(!1)},1e3),n())},[t,n,i]);return(0,a.jsx)(m.Tz,{label:t?(0,a.jsx)(T.x6,{id:"T/pF0Z"}):(0,a.jsx)(T.x6,{id:"pBsoKL"}),placement:"top",children:(0,a.jsx)(z.K,{...o,...r?{tabIndex:-1,pointerEvents:"none"}:{},zIndex:"1","data-favorite-button":!0,"aria-label":g.Ru._({id:"pBsoKL"}),className:"star-wrapper ".concat(l?"active":""),onClick:d,variant:"ghost",size:"xs",color:t?"yellow.400":"gray.400",_hover:{color:t?"yellow.500":"gray.400",bg:t?void 0:"blackAlpha.100"},bg:t?"yellow.50":"transparent",borderRadius:"full",icon:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(N.g,{icon:t?M.yy:_.yy}),(0,a.jsxs)(u.az,{fontSize:"2.5px",children:[(0,a.jsxs)("div",{className:"star",children:[(0,a.jsx)("div",{className:"tl"}),(0,a.jsx)("div",{className:"tr"}),(0,a.jsx)("div",{className:"bl"}),(0,a.jsx)("div",{className:"br"})]}),(0,a.jsx)("div",{className:"ring"}),(0,a.jsx)("div",{className:"circles"})]})]})})})},D=e=>{let{href:t,NextLink:n,target:i,children:o}=e;return n?(0,a.jsx)(n,{href:t,passHref:!0,target:i,legacyBehavior:!0,children:(0,a.jsx)(r.r,{outline:"none",children:o})}):(0,a.jsx)(r.r,{outline:"none",href:t,target:i,children:o})},F=x.forwardRef((e,t)=>{let{id:n,title:i,thumbnailImageUrl:x,NextLink:j,href:k,createdByYou:C=!1,createdByName:S,createdByEmail:A,createdTime:z,createdByProfileImageUrl:I,timestampDescription:R,editors:E,isDuplicateEnabled:L=!0,isRenameEnabled:_=!1,isShareEnabled:M=!1,isTrashAndRestoreEnabled:N=!0,isRemoveFromChannelEnabled:T=!1,isTrashed:F=!1,isFavorited:H=!1,onDuplicate:W,onFavorite:B,onUnfavorite:V,onTrash:G,onPermanentDelete:U,onRestore:K,onShareClick:q,onRename:J,onRemoveFromChannel:$,context:Y="grid",tags:Q=[],menuEnabled:X=!1,openInNewWindow:Z=!1,activity:ee,isOffline:et,...en}=e,ei=(0,b.En)(),ea=Z?"_blank":void 0,er=E&&E.length>0&&(0,a.jsx)(o.Z,{size:"xs",max:5,fontSize:"xs",children:E.map(e=>(0,a.jsx)(m.Vc,{shadow:"md",borderWidth:"1px",name:ei?g.Ru._({id:"bxVoEp",values:{0:e.user.displayName,1:(0,f.Gx)(e.lastEdited)}}):" ",src:e.user.profileImageUrl,tooltipProps:{placement:"top"}},"".concat(n,"-").concat(e.user.id)))});return(0,a.jsx)(r.Q,{overflow:"hidden",ref:t,"data-doc-grid-item-id":n,bg:"neutral.background.white",borderRadius:"5px",shadow:"md",as:l.E,_focusWithin:{shadow:"outline",_hover:{shadow:"outline"}},cursor:"pointer",_hover:{shadow:"lg",bgColor:"popover"===Y?"white":"gray.100"},transition:"box-shadow .2s ease",role:"group",className:"highlight-mask",...en,children:(0,a.jsxs)(s.s,{direction:"column",wordBreak:"break-word",alignContent:"space-between",height:"100%",children:[x&&(0,a.jsx)(D,{NextLink:j,href:k,target:ea,children:(0,a.jsx)(d.g,{ratio:40/21,bgColor:"gray.100",children:(0,a.jsxs)(s.s,{borderBottomWidth:"1px",borderBottomColor:"gray.100",children:[(0,a.jsx)(c._,{src:null==x?void 0:x.src,fallbackSrc:null==x?void 0:x.fallbackSrc,fit:"cover"}),!!er&&(0,a.jsx)(u.az,{position:"absolute",insetEnd:0,bottom:0,borderRadius:"full",p:3,zIndex:1,children:er})]})})}),(0,a.jsxs)(s.s,{p:3,position:"relative",direction:"column",justifyContent:"space-between",h:"100%",alignItems:"flex-start",children:[(0,a.jsx)(D,{NextLink:j,href:k,target:ea,children:(0,a.jsx)(p.E,{noOfLines:2,h:12,mb:2,children:(0,y.B)(i)})}),(0,a.jsxs)(s.s,{direction:"column",w:"100%",children:[Q&&Q.length>0&&j&&(0,a.jsx)(m.Op,{tags:Q,NextLink:j,overflowButtonLabel:g.Ru._({id:"K0UBDD"}),isDisabled:et}),(0,a.jsxs)(s.s,{mt:2,align:"flex-start",w:"100%",justify:"space-between",children:[ee&&ee,S&&(0,a.jsx)(w.S,{createdByYou:C,createdByName:S,createdByProfileImageUrl:I,timestampDescription:R}),(0,a.jsx)(h.h,{}),X&&(0,a.jsx)(P,{href:k,title:(0,y.B)(i),createdByName:S,createdByEmail:A,createdTime:z,isDuplicateEnabled:L,isRenameEnabled:_,isShareEnabled:M,isTrashAndRestoreEnabled:N,isRemoveFromChannelEnabled:T,isTrashed:F,isFavorited:H,onDuplicate:W,onFavorite:B,onUnfavorite:V,onTrash:G,onPermanentDelete:U,onRestore:K,onShareClick:q,onRename:J,onRemoveFromChannel:$})]})]})]}),!!B&&!!V&&(0,a.jsx)(u.az,{position:"absolute",top:3,insetEnd:3,zIndex:3,children:(0,a.jsx)(O,{isFavorited:H,onFavorite:B,onUnfavorite:V,opacity:H?1:(0,v.Xb)()?1:0,_groupHover:(0,v.Xb)()||et&&!H?void 0:{opacity:1},_focus:et?void 0:{opacity:1,shadow:"outline"},disableInteractions:et})})]})},n)});F.displayName="DocumentGridItem"},71144:(e,t,n)=>{"use strict";n.d(t,{p:()=>C});var i=n(83292),a=n(31085),r=n(15428),o=n(80532),l=n(18651),s=n(43421),d=n(2600),c=n(2219),u=n(61778),p=n(62313),h=n(80853),m=n(95640),g=n(14041);let x={src:"/_next/static/media/balloon.0f0058ec.png"},f={src:"/_next/static/media/cloud.bb46cfda.png"};function v(){let e=(0,i._)(["\n  0% { transform: translateY(0); }\n  50% { transform: translateY(-5%); }\n  100% { transform: translateY(0); }\n"]);return v=function(){return e},e}function b(){let e=(0,i._)(["\n  0% { transform: translateY(0%) translateX(0%); }\n  25% { transform: translateY(-7%) translateX(5%); }\n  50% { transform: translateY(-3%) translateX(-5%); }\n  75% { transform: translateY(5%) translateX(-3%); }\n  100% { transform: translateY(0%) translateX(0%); }\n"]);return b=function(){return e},e}let y=(0,r.i7)(v()),w=(0,r.i7)(b()),j=e=>{let{containerSize:t}=e;return(0,a.jsxs)(o.az,{position:"relative",overflow:"visible",w:t,h:t,isolation:"isolate",children:[(0,a.jsx)(l._,{position:"absolute",top:"22%",left:0,width:"50%",src:f.src,alt:"Upper cloud",animation:"".concat(w," 12s ease-in-out infinite"),pointerEvents:"none",zIndex:2}),(0,a.jsx)(l._,{position:"absolute",inset:0,margin:"auto",height:"80%",src:x.src,alt:"Balloon",animation:"".concat(y," 5s ease-in-out infinite"),pointerEvents:"none",zIndex:1}),(0,a.jsx)(l._,{position:"absolute",bottom:0,right:0,width:"80%",src:f.src,alt:"Lower cloud",animation:"".concat(w," 16s ease-in-out 1s infinite"),pointerEvents:"none",zIndex:0})]})},k={xs:{imageWidth:"100px",headingSize:"lg",textSize:"sm",buttonSize:"sm",spacing:2},sm:{imageWidth:"140px",headingSize:"lg",textSize:"sm",buttonSize:"sm",spacing:2},md:{imageWidth:"180px",headingSize:"2xl",textSize:"md",buttonSize:"md",spacing:4},lg:{imageWidth:"256px",headingSize:"4xl",textSize:"md",buttonSize:"md",spacing:6}},C=(0,g.memo)(e=>{let{children:t,title:n=(0,a.jsx)(m.x6,{id:"WkU8TI"}),description:i,size:r,primaryActionLabel:o,onPrimaryAction:l,secondaryActionLabel:g,onSecondaryAction:x,primaryButtonProps:f,secondaryButtonProps:v}=e,b=(0,s.A)({base:"md",lg:"lg"})||"lg",y=k[r||b];return(0,a.jsxs)(d.T,{spacing:y.spacing,children:[(0,a.jsx)(j,{containerSize:y.imageWidth}),(0,a.jsxs)(d.T,{spacing:2,children:[(0,a.jsx)(c.D,{variant:"brand",textAlign:"center",fontSize:y.headingSize,css:{textWrap:"balance"},children:n}),(0,a.jsx)(u.E,{fontSize:y.textSize,textAlign:"center",children:i})]}),t,(0,a.jsxs)(p.z,{wrap:"wrap",justifyContent:"center",children:[o&&(0,a.jsx)(h.$,{onClick:l,size:y.buttonSize,variant:g?"solid":"plain",...f,children:o}),g&&(0,a.jsx)(h.$,{onClick:x,size:y.buttonSize,...v,children:g})]})]})})},44913:(e,t,n)=>{"use strict";n.d(t,{X:()=>m});var i=n(31085),a=n(78872),r=n(32202),o=n(43421),l=n(80853),s=n(20671),d=n(35687),c=n(76166),u=n(35436),p=n(95640),h=n(14041);let m=e=>{let{url:t,placeholder:n,isDisabled:m=!1,variant:g="plain",customLabel:x,onClick:f,paddingLeft:v=4,...b}=e,[y,w]=(0,h.useState)(!1),{hasCopied:j,onCopy:k}=(0,a.i)(t),C=(0,h.useRef)(null),S=(0,r.d)(),A="link-copied-toast",z=(0,o.A)({base:!0,sm:!1},{fallback:"sm"});(0,h.useEffect)(()=>{C.current&&y&&(C.current.focus(),C.current.select())},[y]);let I=(0,h.useCallback)(()=>w(!0),[]),R=(0,h.useCallback)(()=>w(!1),[]),E=(0,h.useCallback)(()=>{k(),S.isActive(A)||S({id:A,title:(0,i.jsx)(p.x6,{id:"pQjjYo"}),status:"success",duration:5e3}),null==f||f()},[f,k,S]),L=x||(0,i.jsx)(p.x6,{id:"he3ygx"}),_=!!(z&&void 0!==x),M=(0,i.jsx)(l.$,{isDisabled:m,onClick:E,variant:g,w:"100%",..._?{}:{height:"2rem",margin:2},...m?{opacity:"1 !important",color:"gray.400",_hover:{opacity:"1"},_active:{boxShadow:"0 none"}}:{},children:j?(0,i.jsx)(p.x6,{id:"6V3Ea3"}):L}),N=(0,i.jsx)(s.p,{ref:C,type:"text",variant:"filled",paddingLeft:v,direction:"ltr",value:t,isReadOnly:!0,isDisabled:m,placeholder:n||void 0,onClick:I,onBlur:R,pointerEvents:m?"none":void 0,h:"3rem",...b});return _?(0,i.jsxs)(d.B,{w:"100%",children:[N,M]}):(0,i.jsxs)(c.M,{dir:"ltr",children:[N,(0,i.jsx)(u.t,{h:"3rem",zIndex:1,w:"unset",children:M})]})}},70635:(e,t,n)=>{"use strict";n.d(t,{N:()=>s});var i=n(31085),a=n(56824),r=n(25420),o=n(80853),l=n(80532);let s=e=>{let{badge:t,label:n,leftIcon:s,isSticky:d,onClick:c,isDisabled:u}=e,p=(0,a.dU)("gray.50","gray.800");return(0,i.jsx)(r.s,{mt:2,bg:p,mx:-2,mb:-2,position:d?"sticky":"static",bottom:d?-2:"auto",children:(0,i.jsxs)(o.$,{colorScheme:"gray",variant:"link",size:"sm",mx:"auto",leftIcon:s,onClick:c,isDisabled:u,w:"100%",py:3,children:[n,t&&(0,i.jsx)(l.az,{ms:2,children:t})]})})}},55576:(e,t,n)=>{"use strict";n.d(t,{_:()=>l});var i=n(31085),a=n(63633),r=n(14041),o=n(92667);let l=(0,r.forwardRef)((e,t)=>{let{initialHeight:n="1em",bottomSpacing:l=0,onChange:s,resizeOnMount:d=!0,...c}=e,u=(0,r.useRef)(null),p=null!=t?t:u,h=(0,r.useCallback)(()=>{"function"!=typeof p&&(null==p?void 0:p.current)&&(p.current.style.height=n,p.current.style.height="".concat(p.current.scrollHeight+l,"px"))},[n,p,l]),[m,g]=(0,r.useState)(!1);(0,o.Vg)(()=>{if(!m&&!d){g(!0);return}h()},[h,c.value,m,d],[c.value]);let x=(0,o.jm)(100);return(0,r.useEffect)(()=>{x&&h()},[x,h]),(0,i.jsx)(a.T,{h:n,minH:n,ref:p,resize:"none",overflow:"hidden",...c,onChange:e=>{h(),null==s||s(e)}})});l.displayName="ResizingTextarea"},62408:(e,t,n)=>{"use strict";n.d(t,{M:()=>S});var i=n(31085),a=n(18588),r=n(59742),o=n(97482),l=n(65446),s=n(18658),d=n(35687),c=n(80532),u=n(2219),p=n(61778),h=n(80853),m=n(62313),g=n(82680),x=n(9104),f=n(95640),v=n(14041),b=n(39286),y=n(64225),w=n(10458),j=n(82257),k=n(5933),C=n(17485);let S=e=>{let{link:t,confirmFunction:n,onClose:S}=e,A=(0,y.GV)(k.sX),z=(0,w.st)(),I=(0,v.useRef)(!1),R=(0,j.oR)()?"gamma.site":"gamma.app";return(0,v.useEffect)(()=>{I.current||(I.current=!0,null==z||z.track(w.VV.ABUSE_LINK_INTERCEPT_SHOWN,{docId:A,link:t}))},[z,A,t]),(0,i.jsxs)(a.aF,{isOpen:!0,trapFocus:!1,onClose:()=>S("cancel"),children:[(0,i.jsx)(r.m,{}),(0,i.jsxs)(o.$,{children:[(0,i.jsx)(l.s,{}),(0,i.jsx)(s.c,{alignItems:"center",textAlign:"center",children:(0,i.jsxs)(d.B,{mt:8,spacing:4,children:[(0,i.jsx)(c.az,{mx:"auto",children:(0,i.jsx)(x.uh,{w:"16"})}),(0,i.jsx)(u.D,{size:"lg",children:(0,i.jsx)(f.x6,{id:"7kvRf4",values:{GAMMA_PROPER_NOUN:b.On}})}),(0,i.jsx)(f.x6,{id:"EK1l1+",values:{gammaProperty:R},components:{0:(0,i.jsx)(p.E,{}),1:(0,i.jsx)("code",{})}}),(0,i.jsx)(p.E,{fontSize:"sm",py:1,borderRadius:"sm",color:"gray.700",fontFamily:"mono",bg:"blackAlpha.100",children:t}),(0,i.jsx)(d.B,{spacing:2,mt:2,children:(0,i.jsx)(h.$,{variant:"plain",onClick:()=>{n(t),null==z||z.track(w.VV.ABUSE_LINK_INTERCEPT_CONTINUE,{docId:A,link:t}),S("continue")},children:(0,i.jsx)(f.x6,{id:"xGVfLh"})})}),(0,i.jsx)(h.$,{onClick:()=>{null==z||z.track(w.VV.ABUSE_LINK_INTERCEPT_CANCEL,{docId:A,link:t}),S("cancel")},variant:"solid",children:(0,i.jsx)(f.x6,{id:"zx59ra"})}),(0,i.jsx)(m.z,{pt:2,flex:1,children:(0,i.jsx)(C._,{docId:A,buttonType:"button",onSubmitReport:()=>S("report")})})]})}),(0,i.jsx)(g.j,{})]})]})}},37132:(e,t,n)=>{"use strict";n.d(t,{UU:()=>s,bX:()=>d});var i=n(31085),a=n(14041),r=n(62408);let o=(0,a.createContext)({}),l=e=>{window.open(e,"_blank","noopener")},s=e=>{let{children:t}=e,[n,s]=(0,a.useState)(!1),[d,c]=(0,a.useState)(""),[u,p]=(0,a.useState)(()=>l),h=(0,a.useCallback)((e,t)=>{c(e),t&&p(()=>()=>t(e)),s(!0)},[]),m=(0,a.useCallback)(()=>{c(""),p(()=>l),s(!1)},[]),[g,x]=(0,a.useState)({showLinkInterstitial:h,hideLinkInterstitial:m});return(0,i.jsxs)(o.Provider,{value:g,children:[n&&(0,i.jsx)(r.M,{link:d,confirmFunction:u,onClose:m}),t]})},d=()=>(0,a.useContext)(o)},17485:(e,t,n)=>{"use strict";n.d(t,{_:()=>M});var i=n(31085),a=n(55276),r=n(9021),o=n(80853),l=n(32202),s=n(18588),d=n(59742),c=n(97482),u=n(34363),p=n(65446),h=n(18658),m=n(35687),g=n(61778),x=n(23398),f=n(77651),v=n(27559),b=n(63633),y=n(82680),w=n(74727),j=n(3040),k=n(24221),C=n(9104),S=n(95640),A=n(12327),z=n(14041),I=n(55640),R=n(86724),E=n(14691);let L={[I.tiT.DeceptiveOrMisleading]:{title:(0,i.jsx)(S.x6,{id:"Y5QK1F"})},[I.tiT.Explicit]:{title:(0,i.jsx)(S.x6,{id:"Zeb01n"})},[I.tiT.Other]:{title:(0,i.jsx)(S.x6,{id:"/IX/7x"})},[I.tiT.Spam]:{title:(0,i.jsx)(S.x6,{id:"Y5QK1F"})},[I.tiT.Inappropriate]:{title:(0,i.jsx)(S.x6,{id:"Zeb01n"})}},_=[I.tiT.DeceptiveOrMisleading,I.tiT.Explicit,I.tiT.Other],M=e=>{let{docId:t,buttonType:n,onSubmitReport:l,buttonProps:s}=e,[d]=(0,R.M)(E.E.abuseReports,[]),[c,u]=(0,z.useState)(d.includes(t||"")),{isOpen:p,onOpen:h,onClose:m}=(0,a.j)({id:"report-page-modal"}),g=(0,z.useCallback)(()=>{u(!0),m(),null==l||l()},[m,l]);return c||!t?null:(0,i.jsxs)(i.Fragment,{children:[p&&(0,i.jsx)(N,{docId:t,isOpen:!0,onClose:m,onSubmit:g}),"iconRight"===n?(0,i.jsx)(C.Tz,{label:(0,i.jsx)(S.x6,{id:"ch68HI"}),children:(0,i.jsx)(r.K,{"aria-label":A.Ru._({id:"ch68HI"}),borderInlineStartWidth:"0px",variant:"plain",size:"sm",borderInlineStartRadius:0,icon:(0,i.jsx)(k.g,{icon:j.tHS,size:"sm"}),onClick:h,...s})}):"button"===n?(0,i.jsx)(o.$,{marginX:"auto",colorScheme:"gray",color:"gray.500",size:"sm",variant:"ghost",leftIcon:(0,i.jsx)(k.g,{icon:j.tHS}),onClick:h,children:(0,i.jsx)(S.x6,{id:"ch68HI"})}):null]})},N=e=>{let{docId:t,isOpen:n,onClose:a,onSubmit:r}=e,[j,k]=(0,R.M)(E.E.abuseReports,[]),[M,N]=(0,z.useState)(),[T]=(0,I.pZI)(),[P,O]=(0,z.useState)(),D=(0,l.d)(),F=(0,z.useCallback)(()=>{M&&T({variables:{input:{docId:t,reason:M,description:P}}}).then(()=>{k([...j,t]),D({title:(0,i.jsx)(S.x6,{id:"7sBcV9"}),description:(0,i.jsx)(S.x6,{id:"m02YqD"}),status:"success",duration:5e3,isClosable:!0,position:"top"}),r()})},[M,T,t,P,k,j,D,r]);return(0,i.jsx)(C.L8,{isDark:!1,children:(0,i.jsxs)(s.aF,{isOpen:n,onClose:a,trapFocus:!1,children:[(0,i.jsx)(d.m,{}),(0,i.jsxs)(c.$,{children:[(0,i.jsx)(u.r,{children:(0,i.jsx)(S.x6,{id:"ch68HI"})}),(0,i.jsx)(p.s,{}),(0,i.jsx)(h.c,{children:(0,i.jsxs)(m.B,{spacing:0,children:[(0,i.jsx)(g.E,{mb:6,children:(0,i.jsx)(S.x6,{id:"oNyQYO"})}),(0,i.jsx)(x.z,{onChange:e=>{N(e)},value:M,children:(0,i.jsx)(m.B,{children:_.map(e=>{let t=L[e];return(0,i.jsx)(f.s,{value:e,children:null==t?void 0:t.title},e)})})}),(0,i.jsx)(v.S,{in:M===I.tiT.Other,children:(0,i.jsx)(b.T,{onChange:e=>{O(e.target.value)},maxLength:200,placeholder:A.Ru._({id:"1ULmtx"}),mt:4})})]})}),(0,i.jsx)(y.j,{children:(0,i.jsxs)(w.e,{children:[(0,i.jsx)(o.$,{colorScheme:"gray",onClick:a,variant:"ghost",children:(0,i.jsx)(S.x6,{id:"dEgA5A"})}),(0,i.jsx)(C.Tz,{label:(0,i.jsx)(S.x6,{id:"h7+4yF"}),isDisabled:!!M,shouldWrapChildren:!0,children:(0,i.jsx)(o.$,{onClick:F,variant:"hazardous",isDisabled:!M,children:(0,i.jsx)(S.x6,{id:"ovTgfk"})})})]})})]})]})})}},4876:(e,t,n)=>{"use strict";n.d(t,{i:()=>g});var i=n(46343),a=n.n(i),r=n(14041),o=n(35002),l=n(32849),s=n(64225),d=n(82257),c=n(5933),u=n(57882),p=n(22544),h=n(37132),m=n(56848);let g=(e,t)=>{let{showLinkInterstitial:n}=(0,h.bX)(),i=(0,s.GV)(c.sK),g=(0,s.GV)(c.RW),x=(0,s.GV)(c.IO,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return a()(...t)}),f=(0,l.tN)(i),v=(0,o.u)("knownGoodHostnames"),b=!!(0,u.ur)().user,y=(0,d.oR)(),w=(null==e?void 0:e.startsWith("/"))||(null==e?void 0:e.startsWith("#")),j=p.D1||f,k=p.D1||g||w,C=y?k:j,S=(0,r.useMemo)(()=>C?"trusted":(0,m.L)(e,x,v),[e,x,v,C]),A=(0,r.useMemo)(()=>C||b&&"unknown"===S?e:(0,m.F)(e,x,v),[C,e,b,S,x,v]);return{interceptLinkClick:(0,r.useCallback)(i=>{if(e&&"trusted"!==S)return b&&"unknown"===S?void 0:((i.preventDefault(),i.stopPropagation(),"untrusted"===S)?console.warn("[interceptLinkClick] Untrusted link clicked",e):null==n||n(e,t),!0)},[e,S,b,n,t]),linkUrlSafe:A,linkTrustLevel:S,linkInterceptEnabled:!1===C,isUntrusted:"untrusted"===S}}},66792:(e,t,n)=>{"use strict";n.d(t,{E:()=>r});var i=n(14041),a=n(4876);let r=e=>{let{interceptLinkClick:t,linkUrlSafe:n,linkInterceptEnabled:r}=(0,a.i)(e),o=(0,i.useCallback)(function(){let n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return i=>{if(e){if(!r){n||window.open(e,"_blank","noopener");return}t(i)||n||window.open(e,"_blank","noopener")}}},[e,t,r]);return(0,i.useMemo)(()=>({handleOpenNativeLinkWithInterstitial:o(!0),handleOpenLinkWithInterstitial:o(),linkUrlSafe:n}),[o,n])}},56848:(e,t,n)=>{"use strict";n.d(t,{F:()=>o,L:()=>r});var i=n(67963),a=n(73893);let r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(!e)return"unknown";try{let a=new URL(e),r=(0,i.removeWWWPrefix)(a.hostname);if(n.includes(r))return"trusted";let o=t.find(t=>t.url===e);if(!o)return"unknown";if(3===o.status)return"untrusted";if(2===o.status)return"unknown";if(1===o.status)return"trusted";o.status}catch(t){console.error("[getLinkTrustLevel] Error checking link",e,t)}return"unknown"},o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(!e)return"";let i=r(e,t,n);return"trusted"===i?e:"untrusted"===i?"".concat(a.$.FRONTEND_URL,"/[untrusted-url]"):"".concat(a.$.FRONTEND_URL,"/external-link?url=[").concat(encodeURIComponent(e),"]")}},86416:(e,t,n)=>{"use strict";n.d(t,{V:()=>p});var i=n(31085),a=n(80853),r=n(3040),o=n(24221),l=n(95640),s=n(64225),d=n(74240),c=n(14858),u=n(46568);let p=e=>{let{onClick:t,image:n,backFrom:p}=e,{toggleBuddyChatPanel:h,isBuddyChatPanelOpen:m}=(0,c.C)(),g=(0,s.jL)();return(0,d.l)(n)?(0,i.jsx)(a.$,{size:"sm",variant:"solid",leftIcon:(0,i.jsx)(o.g,{icon:r.p7g}),onClick:()=>{!m&&(h(),p&&g((0,u.Po)(p))),t()},children:(0,i.jsx)(l.x6,{id:"xWEvuo"})}):null}},5283:(e,t,n)=>{"use strict";n.d(t,{s:()=>u});var i=n(14041),a=n(65449),r=n(18405),o=n(68973),l=n(64225),s=n(30358),d=n(92667);let c={},u=e=>{let[t,n]=(0,i.useState)([]),[u,h]=(0,i.useState)("ready"),{generate:m}=(0,a.pt)("SuggestImageEdits",{onStart(){h("generating"),n([])},onContent(e){n(p(e))},onComplete(e){n(p(e)),h("done")},onError(e){console.error("Error generating suggestions",e),h("error")},timeout:2e4}),g=(0,l.GV)(o.H6),x=(0,r.xt)(g),f=(0,i.useCallback)(()=>{var t;let i=(0,s.gx)(),a=null==e?void 0:null===(t=e.src)||void 0===t?void 0:t.split(".").pop();if(!(null==e?void 0:e.src)||!i||!a){n([]);return}let r=c[e.src];if(r){n(r),h("done");return}let{promise:o}=m({variables:{imageUrl:e.src,originalPrompt:e.query,language:x.englishName},workspaceId:i});o.then(t=>{c[e.src]=p(t)}),o.catch(e=>{console.error("Error generating suggestions",e),n([]),h("error")})},[m,e,x]);return(0,d.Vg)(()=>{f()},[e.src,f],[e.src]),{suggestions:t,generateSuggestionsStatus:u}},p=e=>e.split("\n").filter(Boolean)},32900:(e,t,n)=>{"use strict";n.d(t,{j:()=>i});let i=new(n(36832)).b},74240:(e,t,n)=>{"use strict";n.d(t,{A:()=>c,l:()=>d});var i=n(14041),a=n(35002),r=n(64225),o=n(46568),l=n(88479),s=n(18253);let d=e=>(0,a.u)("aiImageEditing")&&(0,s.k)(e),c=()=>{let e=(0,r.jL)();(0,i.useEffect)(()=>()=>{e((0,o.CX)({chatId:(0,l.H)()}))},[e])}},14858:(e,t,n)=>{"use strict";n.d(t,{C:()=>e1});var i=n(31085),a=n(56824),r=n(25420),o=n(62313),l=n(2600),s=n(94259),d=n(95640),c=n(14041),u=n(99070),p=n(86984),h=n(65184),m=n(64225),g=n(22847),x=n(80532),f=n(35687),v=n(61778),b=n(73893),y=n(87064),w=n(71197),j=n(19717),k=n(10458),C=n(5933),S=n(57882),A=n(92667);let z={fontSize:"sm",borderRadius:"md",p:2};var I=n(43342),R=n(12327),E=n(15672),L=n(35789),_=n(3040),M=n(24221),N=n(77256),T=n(17539);let P=e=>{let{src:t,...n}=e;return(0,i.jsx)(T.Me,{src:t,borderRadius:"md",h:"6em",resizeParams:T.p7,...n})};var O=n(55746),D=n(59707);let F=[{key:"low-quality",label:(0,i.jsx)(d.x6,{id:"9cm/hp"})},{key:"too-different",label:(0,i.jsx)(d.x6,{id:"/wLn3u"})},{key:"too-similar",label:(0,i.jsx)(d.x6,{id:"Np7sCV"})},{key:"instructions",label:(0,i.jsx)(d.x6,{id:"Tq32Jp"})},{key:"other",label:(0,i.jsx)(d.x6,{id:"/IX/7x"})}],H="ImageChat",W=e=>{var t;let{messageId:n,imageUrl:a,toolInvocation:r,chatId:o}=e,[l,s]=(0,c.useState)(void 0),d=null===(t=r.result.images.find(e=>e.attrs.src===a))||void 0===t?void 0:t.attrs,u=(0,c.useCallback)((e,t,i)=>{(0,y.f2)({rating:e,agentType:H,feedback:t,tags:i,imageUrl:a,toolInvocation:r,image:d,chatId:o,messageId:n,interactionId:n})},[n,a,r,d,o]),p=(0,c.useCallback)(e=>{s(e),(0,y.Ri)({messageId:n,rating:e,agentType:H,imageUrl:a,toolInvocation:r,image:d,chatId:o,interactionId:n})},[n,a,r,d,o]);return d?(0,i.jsx)(x.az,{position:"relative",alignSelf:"flex-end",opacity:0,_groupHover:{opacity:1},transitionProperty:"opacity",transitionDuration:"normal",onClick:D.dG,children:(0,i.jsx)(O.f3,{trackFeedback:u,rating:l,setRating:p,RatingButtons:O.Ep,feedbackTags:F,size:"xs"})}):null};var B=n(46568);let V=(0,c.memo)(e=>{let{image:t,toolInvocation:n,onClick:a,ratingsEnabled:r,messageId:o,chatId:l,editor:s}=e,d=(0,m.GV)((0,B.X)({toolCallId:n.toolCallId,src:t.attrs.src})),c=t.attrs.src;return c?(0,i.jsxs)(x.az,{position:"relative",cursor:"pointer",onClick:a,h:"fit-content",role:"group",children:[(0,i.jsx)(P,{src:c,alt:t.attrs.query,filter:d?"brightness(0.8)":void 0,transitionProperty:"all",transitionDuration:"normal",_hover:{filter:"brightness(0.8)"},w:"100%",h:"auto",objectFit:"cover",onDragStart:()=>{s&&(0,N.fS)(s,{type:"image",attrs:t.attrs})}}),d&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(x.az,{position:"absolute",inset:"0",borderWidth:2,borderColor:"blue.500",borderRadius:"md",pointerEvents:"none"}),(0,i.jsx)(L.o,{position:"absolute",inset:"0",pointerEvents:"none",children:(0,i.jsx)(x.az,{borderRadius:"full",p:1,color:"white",children:(0,i.jsx)(M.g,{icon:_.e68})})})]}),r&&"success"===n.result.status&&(0,i.jsx)(x.az,{position:"absolute",bottom:1,insetEnd:1,children:(0,i.jsx)(W,{chatId:l,messageId:o,imageUrl:c,toolInvocation:n})})]}):null});V.displayName="ChatToolResultImage";let G=e=>{var t;let{onSelectImage:n,toolInvocation:a,ratingsEnabled:r,messageId:o,chatId:l,editor:s}=e;return"aborted"===a.result.status?null:"error"===a.result.status?(0,i.jsx)(x.az,{bg:"red.100",p:2,mt:2,borderRadius:"md",position:"relative",children:(0,i.jsx)(v.E,{fontSize:"xs",color:"red.600",fontWeight:"semibold",children:a.result.error})}):(0,i.jsx)(x.az,{mt:1,children:(0,i.jsx)(E.r,{columns:3,spacing:2,children:null===(t=a.result.images)||void 0===t?void 0:t.map(e=>(0,i.jsx)(V,{image:e,toolInvocation:a,onClick:()=>{n({toolCallId:a.toolCallId,image:e})},ratingsEnabled:r,messageId:o,chatId:l,editor:s},e.attrs.src))})})},U={generateImage:{present:()=>R.Ru._({id:"0YTg9V"}),past:()=>R.Ru._({id:"kuh/JT"})},editContent:{present:()=>R.Ru._({id:"lst4sw"}),past:()=>R.Ru._({id:"V3CaX7"})},removeBackground:{present:()=>R.Ru._({id:"RdqLb7"}),past:()=>R.Ru._({id:"gmS8TU"})},searchImage:{present:()=>R.Ru._({id:"r/Co7N"}),past:()=>R.Ru._({id:"AhoeWI"})},restyle:{present:()=>R.Ru._({id:"l+gESf"}),past:()=>R.Ru._({id:"XzQ0eF"})},vectorize:{present:()=>R.Ru._({id:"Q55bBQ"}),past:()=>R.Ru._({id:"c1cnyM"})},upscale:{present:()=>R.Ru._({id:"5oQX1R"}),past:()=>R.Ru._({id:"nstbgt"})},replaceBackground:{present:()=>R.Ru._({id:"Zb6gwf"}),past:()=>R.Ru._({id:"kqSOYt"})},animate:{present:()=>R.Ru._({id:"ixpQjd"}),past:()=>R.Ru._({id:"gtfeTa"})}},K=(0,c.memo)(e=>{let{toolInvocation:t,onSelectImage:n,ratingsEnabled:a,chatId:r,editor:l}=e,s="result"!==t.state;return(0,i.jsxs)(x.az,{children:[(0,i.jsx)(o.z,{justify:"space-between",align:"center",children:(0,i.jsxs)(o.z,{children:[s&&(0,i.jsx)(I.y,{size:"xs"}),(0,i.jsx)(v.E,{fontSize:"xs",color:"gray.600",fontWeight:"semibold",children:s&&"".concat(q(t.toolName,s),"...")})]})}),"result"===t.state&&(0,i.jsx)(G,{toolInvocation:t,onSelectImage:n,messageId:t.result.messageId,ratingsEnabled:a,chatId:r,editor:l})]})});K.displayName="ImageChatToolCall";let q=(e,t)=>{let n=U[e]||U.editContent;return t?n.present():n.past()},J=e=>{var t;let{message:n,onSelectImage:a,chatId:r,editor:o}=e;return(0,i.jsx)(l.T,{...z,alignSelf:"flex-start",width:"100%",position:"relative",align:"start",children:null===(t=n.parts)||void 0===t?void 0:t.map((e,t)=>"text"===e.type?(0,i.jsx)(v.E,{children:e.text},t):"tool-invocation"===e.type?(0,i.jsx)(K,{toolInvocation:e.toolInvocation,onSelectImage:a,ratingsEnabled:!0,chatId:r,editor:o},t):'Unknown part type "'.concat(e.type,'"'))})};var $=n(18651),Y=n(2219);let Q={src:"/_next/static/media/empty-state.1b05b2ca.png"},X=(0,c.memo)(()=>(0,i.jsx)(r.s,{direction:"column",height:"100%",justifyContent:"flex-end",children:(0,i.jsxs)(f.B,{spacing:6,alignItems:"center",p:4,borderRadius:"lg",textAlign:"center",children:[(0,i.jsx)($._,{src:Q.src,alt:"Empty state",maxW:"200px"}),(0,i.jsxs)(f.B,{spacing:1,children:[(0,i.jsx)(Y.D,{fontSize:"xl",fontWeight:"semibold",children:R.Ru._({id:"vscZYY"})}),(0,i.jsx)(v.E,{color:"gray.600",fontSize:"sm",children:R.Ru._({id:"VxbH2f"})})]})]})}));X.displayName="ChatEmptyState";var Z=n(27559),ee=n(80853),et=n(18201),en=n(62230),ei=n(20501),ea=n(33916),er=n(32849),eo=n(9021),el=n(9104),es=n(55576),ed=n(15355),ec=n(43087),eu=n(32900);let ep=(0,c.memo)(e=>{let{placeholder:t,isLoading:n,handleSubmit:a,handleStop:s}=e,[u,p]=(0,c.useState)(""),h=(0,c.useCallback)(e=>{p(e.target.value)},[p]),m=(0,c.useRef)(null),g=(0,c.useRef)(null),x=(0,ec.ez)("unlimited_credits");return(0,c.useEffect)(()=>{let e=eu.j.on("prefillMessage",e=>{var t;let{message:n}=e;p(n),null===(t=g.current)||void 0===t||t.focus()});return()=>{e()}},[]),(0,i.jsxs)(r.s,{w:"100%",as:"form",onSubmit:e=>{e.preventDefault(),a(u),p("")},ref:m,position:"relative",border:"1px solid",borderRadius:"md",borderColor:"gray.200",pt:1,outline:"1px solid",outlineColor:"transparent",transitionProperty:"all",transitionDuration:"normal",px:4,pb:1,pe:16,bg:"white",_focusWithin:{borderColor:"trueblue.500",shadow:"outline"},children:[(0,i.jsx)(es._,{id:"edit-textarea",name:"prompt-input",variant:"unstyled",value:u,onChange:h,ref:g,placeholder:t,onKeyDown:e=>{if("Enter"===e.key&&!e.shiftKey){var t;e.preventDefault(),null===(t=e.currentTarget.form)||void 0===t||t.requestSubmit()}},border:"none",outline:"none",shadow:"none",initialHeight:"36px",resizeOnMount:!1}),(0,i.jsxs)(o.z,{position:"absolute",bottom:"1.5",insetEnd:"2",zIndex:10,spacing:2,children:[(0,i.jsx)(I.y,{boxSize:8,position:"absolute",zIndex:10,pointerEvents:"none",color:"deepocean.950",opacity:n?1:0,transitionProperty:"common",transitionDuration:"normal"}),(0,i.jsx)(el.Tz,{placement:"top",label:n?(0,i.jsx)(l.T,{spacing:0,children:(0,i.jsx)(d.x6,{id:"ygCKqB"})}):(0,i.jsxs)(l.T,{spacing:0,children:[(0,i.jsx)(d.x6,{id:"4k2VbT"}),!x&&(0,i.jsx)(v.E,{color:"gray.400",children:(0,i.jsx)(ed.G,{type:"imageChat",ml:0})}),(0,i.jsx)(el.iM,{shortcut:"Enter"})]}),children:(0,i.jsx)(eo.K,{size:"sm",icon:n?(0,i.jsx)(M.g,{icon:_.APi}):(0,i.jsx)(M.g,{icon:_.fmP}),isDisabled:!u&&!n,"aria-label":R.Ru._({id:"hQRttt"}),onClick:()=>{if(n){s();return}a(u),p("")}})})]})]})});ep.displayName="ImageChatInput";var eh=n(63341),em=n(18528),eg=n(72821),ex=n(33683);let ef=e=>{let{suggestions:t,onSubmit:n}=e;return(0,i.jsxs)(r.s,{gap:2,flexWrap:"wrap",alignItems:"flex-start",children:[t.map((e,t)=>{var a;return(0,i.jsx)(ee.$,{leftIcon:(0,i.jsx)(M.g,{icon:_._$C}),onClick:()=>n(e.prompt),borderRadius:"full",variant:"ghost",bg:"blackAlpha.100",color:"blackAlpha.800",_hover:{bg:"blackAlpha.300"},colorScheme:"blackAlpha",size:"xs",isTruncated:!0,flexShrink:0,sx:{["@media (max-height: ".concat(700,"px)")]:{display:t>0?"none":"flex"}},children:(0,i.jsx)(v.E,{isTruncated:!0,children:null!==(a=e.quick_action)&&void 0!==a?a:e.prompt})},t)}),t.length>1&&(0,i.jsxs)(eh.W,{children:[(0,i.jsxs)(em.I,{as:ee.$,leftIcon:(0,i.jsx)(M.g,{icon:_._$C}),rightIcon:(0,i.jsx)(M.g,{icon:_.Jt$}),borderRadius:"full",variant:"ghost",bg:"blackAlpha.100",color:"blackAlpha.800",_hover:{bg:"blackAlpha.300"},colorScheme:"blackAlpha",size:"xs",sx:{["@media (max-height: ".concat(700,"px)")]:{display:"flex"},["@media (min-height: ".concat(701,"px)")]:{display:"none"}},children:[t.length-1," more..."]}),(0,i.jsx)(eg.c,{children:t.slice(1).map((e,t)=>{var a;return(0,i.jsx)(ex.D,{onClick:()=>n(e.prompt),icon:(0,i.jsx)(M.g,{icon:_._$C}),children:null!==(a=e.quick_action)&&void 0!==a?a:e.prompt},t)})})]})]})};var ev=n(5283),eb=n(65449),ey=n(18405),ew=n(68973),ej=n(11509),ek=n(2696),eC=n(95580),eS=n(19534);let eA=e=>{let[t,n]=(0,c.useState)([]),i=(0,c.useRef)({}),[a,r]=(0,c.useState)("ready"),{generate:o}=(0,eb.pt)("SuggestImageGenerates",{onStart(){r("generating"),n([])},onContent(e){n(ez(e))},onComplete(e){n(ez(e)),r("done")},onError(e){console.error("Error generating suggestions",e),r("error")},timeout:2e4}),l=(0,m.GV)(ew.H6),s=(0,ey.xt)(l),d=(0,ej.Sx)(e),u=(0,ek.lC)(e,!0),p=(0,c.useCallback)(e=>{let t=d?d():null;if(!t){n([]);return}let a=i.current[e];if(a){n(a),r("done");return}let l=(0,S.gx)();if(!l){n([]);return}let{promise:c}=o({variables:{cardHtml:t,language:s.englishName},workspaceId:l});c.then(t=>{i.current[e]=ez(t)})},[o,s,d]);return(0,A.Vg)(()=>{let t=(0,eC.IV)(e.state.selection.$from,eS.jg)[0];t&&p(t.node.attrs.id)},[p,e.state.selection],[u]),{suggestions:t,generateSuggestionsStatus:a}},ez=e=>e.split("\n").filter(Boolean),eI=e=>{let{status:t,messages:n,handleNewChat:a,manualSubmit:r,handleStop:s,editor:c}=e,u="submitted"===t||"streaming"===t,p=(0,er.ez)("unlimited_credits"),h=(0,m.GV)(B.hN),g=(0,m.GV)(B.W_);return(0,i.jsxs)(l.T,{direction:"column",align:"stretch",spacing:2,p:4,borderTop:"1px solid",borderColor:"trueblue.100",bg:"trueblue.50",children:[(0,i.jsxs)(o.z,{align:"flex-start",spacing:4,children:[g&&(0,i.jsx)(P,{src:g.src,alt:g.query,h:"auto",maxW:"5em",maxH:"5em",alignSelf:"start",shadow:"base"}),!u&&c&&(h?(0,i.jsx)(eR,{onSubmit:r,imageToEdit:h,editor:c}):(0,i.jsx)(eE,{editor:c,onSubmit:r}))]}),(0,i.jsx)(ep,{placeholder:h?R.Ru._({id:"XXCZ3T"}):R.Ru._({id:"1p/b90"}),isLoading:u,handleSubmit:r,handleStop:s}),(0,i.jsx)(Z.S,{in:n.length>0||!p,children:(0,i.jsxs)(o.z,{pt:2,children:[(0,i.jsx)(ee.$,{size:"sm",variant:"link",onClick:a,leftIcon:(0,i.jsx)(M.g,{icon:ei.V3T,size:"sm"}),children:(0,i.jsx)(d.x6,{id:"hIQkLb"})}),(0,i.jsx)(et.h,{}),(0,i.jsx)(ea.f,{modalId:"ai-credits-modal-message-list",variant:"ghost",justify:"flex-end",segmentEvent:k.VV.GAMMA_UPSELL_CALLOUT_AI_CREDITS_IMAGE_CHAT})]})})]})},eR=e=>{let{onSubmit:t,imageToEdit:n}=e,{suggestions:a,generateSuggestionsStatus:r}=(0,ev.s)(n),l=a.map(e=>({prompt:e}));return"generating"===r&&0===l.length?(0,i.jsxs)(o.z,{wrap:"wrap",children:[(0,i.jsx)(en.E,{size:"sm",w:"5em",h:"1.25em",borderRadius:"full"}),(0,i.jsx)(en.E,{size:"sm",w:"6em",h:"1.25em",borderRadius:"full"}),(0,i.jsx)(en.E,{size:"sm",w:"5em",h:"1.25em",borderRadius:"full"}),(0,i.jsx)(en.E,{size:"sm",w:"4em",h:"1.25em",borderRadius:"full"})]}):(0,i.jsx)(ef,{suggestions:l,onSubmit:t})},eE=e=>{let{editor:t,onSubmit:n}=e,{suggestions:a,generateSuggestionsStatus:r}=eA(t),l=a.map(e=>({prompt:e}));return"generating"===r&&0===l.length?(0,i.jsxs)(o.z,{wrap:"wrap",children:[(0,i.jsx)(en.E,{size:"sm",w:"5em",h:"1.25em",borderRadius:"full"}),(0,i.jsx)(en.E,{size:"sm",w:"6em",h:"1.25em",borderRadius:"full"}),(0,i.jsx)(en.E,{size:"sm",w:"5em",h:"1.25em",borderRadius:"full"}),(0,i.jsx)(en.E,{size:"sm",w:"4em",h:"1.25em",borderRadius:"full"})]}):(0,i.jsx)(ef,{suggestions:l,onSubmit:n})};var eL=n(7396);let e_=e=>{let{message:t,onSelectImage:n,previousMessage:a,chatId:r,editor:o}=e,s=(0,eL.xz)(t),d=a?(0,eL.xz)(a).flatMap(eL.Fh):[],c=s.filter(e=>{let t=(0,eL.Fh)(e);return!d.some(e=>t.some(t=>t.attrs.src===e.attrs.src))});return(0,i.jsxs)(l.T,{...z,bg:"periwinkle.100",maxW:"90%",alignSelf:"flex-end",borderBottomEndRadius:"0",align:"start",children:[c.map(e=>(0,i.jsx)(K,{toolInvocation:e,onSelectImage:n,ratingsEnabled:!1,chatId:r,editor:o},e.toolCallId)),(0,i.jsx)(v.E,{children:t.content})]})};var eM=n(13236),eN=n(81570),eT=n(42849),eP=n(77646),eO=n(90406),eD=n(59534),eF=n(96712);let eH=e=>{let t=(0,m.CU)(),n=(0,m.jL)();(0,c.useEffect)(()=>{if(!e)return;let t=()=>{let t=eW(e,null==e?void 0:e.state.selection);n((0,B.iU)(t))};return e.on("update",t),e.on("selectionUpdate",t),t(),()=>{e.off("update",t),e.off("selectionUpdate",t)}},[e,n,t])},eW=(e,t)=>{if(!e||!t||!(t instanceof eN.nh))return null;let n=(0,eD.A)({editor:e,selection:t});return(null==n?void 0:n.mediaType)!=="image"?null:{attrs:n.attrs,id:n.id,relativePosition:(0,eF.JO)(e.state,t.from)}},eB=(e,t,n)=>{let i=(0,eF.d_)(e.state,t);if(!i)throw Error("Could not get absolute position from relative position");(0,eD.v)({editor:e,pos:i,attrs:n})},eV=(e,t)=>{let n=e.view,i=e.state.selection,a=e.state.doc.resolve(i.from),r=(0,eM.eL)(a,eP.jg),{mostVisible:o,visibleCards:l}=(0,eP.lA)(e),s=l.some(e=>e.pos===(null==r?void 0:r.pos)),d=(0,eC.Bi)(e,"image");if(s&&d){e.chain().insertContentAndSelect({type:"image",attrs:t}).focus().run(),setTimeout(()=>{e.commands.scrollIntoView()},300);return}try{let i=(null==o?void 0:o.pos)?(0,eT.dg)(n.state.tr,o.pos):null,a=null==i?void 0:i.body;if(a){let t=a.pos+a.node.nodeSize-1;if(e.commands.setTextSelection(t),!(0,eC.Bi)(e,"image")){let t=a.pos+2;e.commands.setTextSelection(t)}if(!(0,eC.Bi)(e,"image"))return}e.chain().insertContentAndSelect({type:"image",attrs:t}).focus().run(),setTimeout(()=>{e.commands.scrollIntoView()},300)}catch(e){console.error("Error inserting SelectedImage",e)}},eG=e=>(e=(0,eO.Ez)(e),{tempUrl:(0,T.Ub)(e.src,T.p7,e.meta),showPlaceholder:!1,...e});var eU=n(60632),eK=n(34328),eq=n(88479),eJ=n(99742);let e$=e=>{let{userMessage:t,imageToEdit:n,messageId:i}=e;return n&&n.src?{message:{role:"user",content:t,parts:[{type:"tool-invocation",toolInvocation:{state:"result",toolName:"image_input",toolCallId:(0,eJ.Ak)(),args:{},result:{status:"success",images:[{attrs:n}],messageId:i}}}]},attachments:[{name:"image-to-edit",url:n.src}],availableTools:(0,eU.X)({imageToEdit:n})}:{message:{role:"user",content:t},attachments:void 0,availableTools:(0,eU.X)({imageToEdit:null})}};function eY(e){let{editor:t}=e,n=(0,m.jL)(),a=(0,m.CU)(),[r,o]=(0,c.useState)(!0);return((0,c.useEffect)(()=>{let e=eW(t,null==t?void 0:t.state.selection);n((0,B.iU)(e)),(0,B.g_)(a.getState())||n((0,B.Yr)((0,eq.H)())),o(!1)},[]),r)?null:(0,i.jsx)(eZ,{editor:t})}let eQ=(0,c.memo)(e=>{let{messages:t,status:n,handleNewChat:a,handleSelectedImageChange:o,manualSubmit:l,handleStop:s,chatId:u,editor:p,error:h}=e,m=(0,c.useRef)(null),g=t.length>0,b="submitted"===n;return((0,c.useEffect)(()=>{m.current&&(m.current.scrollTop=m.current.scrollHeight)},[t]),p)?(0,i.jsxs)(r.s,{direction:"column",height:"calc(100% - 48px)",children:[(0,i.jsxs)(x.az,{flex:"1",overflow:"auto",p:4,ref:m,children:[!g&&(0,i.jsx)(X,{}),(0,i.jsxs)(f.B,{spacing:2,flex:1,children:[t.map((e,n)=>{let a=t[n-1];return"user"===e.role?(0,i.jsx)(e_,{message:e,onSelectImage:o,previousMessage:a,chatId:u,editor:p},e.id):"assistant"===e.role?(0,i.jsx)(J,{message:e,isLoading:b,onSubmit:l,onSelectImage:o,chatId:u,editor:p},e.id):null}),b&&(0,i.jsx)(v.E,{fontSize:"xs",color:"gray.600",pt:2,px:2,children:(0,i.jsx)(d.x6,{id:"Ed99mE"})}),h&&(0,i.jsx)(v.E,{fontSize:"xs",color:"red.600",pt:2,px:2,children:String(h)})]})]}),(0,i.jsx)(eI,{status:n,messages:t,handleNewChat:a,manualSubmit:l,handleStop:s,editor:p})]}):null});eQ.displayName="BuddyChatInner";let eX=()=>({messageId:(0,eq.O)(),availableTools:void 0,imageToEdit:null,insertRelativePosition:null});function eZ(e){let{editor:t}=e,n=(0,m.CU)(),a=(0,m.jL)(),r=(0,m.GV)(B.yZ),o=(0,m.GV)(B.hN),l=(0,m.GV)(C.sX),s=(0,m.GV)(B.g_),d=(0,m.GV)(B.ze),u=(0,c.useRef)(null),p=(0,c.useRef)(eX()),{messages:h,append:x,status:f,error:v,setMessages:z,setInput:I,stop:R}=(0,g.Y_)({id:s,initialMessages:d,api:"".concat(b.$.API_HOST,"/ai/agent/message?agentName=ImageChat"),headers:{"Content-Type":"application/json"},experimental_prepareRequestBody:e=>{let{messages:t}=e,{messageId:n,availableTools:i}=p.current||{};return{id:s,messageId:n,availableTools:i,messages:t,workspaceId:(0,S.gx)(),context:{type:"doc",docId:l}}},maxSteps:2,onToolCall:async e=>{let{toolCall:n}=e;u.current=new AbortController;let{imageToEdit:i,messageId:r}=p.current,o={workspaceId:(0,S.gx)(),docId:l,imageToEdit:null!=i?i:null,interactionId:r,messageId:r,chatId:s,abortController:u.current};try{let e=eU.d[n.toolName];if(!e)throw Error("Invalid tool ".concat(n.toolName));let i=await e.execute(n.args,o);if("success"===i.status&&i.images.length>0){var d,c;(0,j.w)(null!==(c=e.creditCostType)&&void 0!==c?c:"imageChat",void 0,r);let o=i.images[0];N({toolCallId:n.toolCallId,image:o}),a((0,B.n9)({image:o,toolCallId:n.toolCallId})),(null===(d=p.current)||void 0===d?void 0:d.insertRelativePosition)&&eB(t,p.current.insertRelativePosition,o.attrs)}return u.current=null,{...i,messageId:p.current.messageId}}catch(e){if((0,eK.z)(e))return{status:"aborted",error:"user aborted the request",messageId:p.current.messageId};return{status:"error",error:e.message,messageId:p.current.messageId}}finally{u.current=null}},credentials:"include"}),E=(0,w.tO)(void 0,"imageChat",k.VV.GAMMA_UPSELL_CALLOUT_AI_CREDITS_IMAGE_CHAT),L=(0,c.useCallback)((e,t)=>{E()&&x(e,t)},[x,E]);(0,c.useEffect)(()=>{window.buddyDebug=()=>({messages:h,reducer:n.getState().BuddyChat})},[h,n]);let _=(0,c.useCallback)(()=>{R(),z([]),p.current=eX(),a((0,B.CX)({chatId:(0,eq.H)()})),a((0,B.iU)(r))},[a,r,z,R]),M=(0,c.useCallback)(e=>{let{image:t}=e;t.attrs.src&&(0,y.Sf)({imageUrl:t.attrs.src,interactionId:p.current.messageId,chatId:s,image:t.attrs})},[s]),N=(0,A.lW)(M,2e3),T=(0,A.lW)((0,c.useCallback)(e=>{a((0,B.jf)(e))},[a]),300);(0,c.useEffect)(()=>{T(h)},[h,T]);let P=(0,c.useCallback)(()=>{var e;R(),z(e=>e.map(eL.HC)),null===(e=u.current)||void 0===e||e.abort()},[z,R]),O=(0,c.useCallback)(e=>{N(e);let i=eG(e.image.attrs),r=(0,B.yZ)(n.getState());if(r)a((0,B.n9)(e)),eB(t,r.relativePosition,i);else{if(!t)return;eV(t,i)}},[a,t,n,N]),D=(0,c.useCallback)(e=>{var t;let i=null===(t=(0,B.yZ)(n.getState()))||void 0===t?void 0:t.relativePosition,a=(0,eq.O)(),{message:r,attachments:l,availableTools:s}=e$({userMessage:e,imageToEdit:o,messageId:a});p.current={messageId:a,availableTools:s,imageToEdit:o,insertRelativePosition:i||null},L(r,{experimental_attachments:l}),I("")},[n,o,L,I]);return(0,c.useEffect)(()=>{let e=eu.j.on("sendMessage",e=>{let{message:t}=e;D(t)});return()=>{e()}},[D]),(0,i.jsx)(eQ,{messages:h,error:v,status:f,handleNewChat:_,handleSelectedImageChange:O,manualSubmit:D,handleStop:P,chatId:s,editor:t})}let e0=e=>{let{closePanel:t,isOpen:n,editor:u}=e;eH(u);let g={bgColor:(0,a.dU)("white","gray.900"),textColor:(0,a.dU)("gray.900","white")},x=(0,m.jL)();return(0,c.useEffect)(()=>{n||x((0,B.Po)(null))},[n,x]),(0,i.jsx)(p.Z,{bgColor:g.bgColor,w:"100%",children:(0,i.jsxs)(r.s,{direction:"column",w:"100%",h:"100%",children:[(0,i.jsxs)(o.z,{position:"relative",py:2,px:4,children:[(0,i.jsx)(r.s,{flex:1,children:(0,i.jsx)(l.T,{align:"start",spacing:0,children:(0,i.jsx)(h.N,{children:(0,i.jsx)(d.x6,{id:"mw/rmM"})})})}),(0,i.jsx)(s.J,{onClick:t})]}),(0,i.jsx)(eY,{editor:u})]})})};e0.panelPosition="right",e0.panelName="image-chat",e0.canCollapse=!1,e0.minWidth=400;let e1=()=>{let{togglePanel:e,isPanelOpen:t}=(0,u.ww)(e0);return{toggleBuddyChatPanel:e,isBuddyChatPanelOpen:t}}},60632:(e,t,n)=>{"use strict";n.d(t,{d:()=>m,X:()=>g});var i=n(12327),a=n(35002),r=n(73893),o=n(19142);async function l(e,t){let n="".concat(r.$.API_HOST,"/media/images/edit");return await (0,o.P)(n,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),signal:null==t?void 0:t.signal},{parseResponse:async e=>await e.json(),maxDuration:12e4})}var s=n(57754),d=n(26917),c=n(952),u=n(23331),p=n(37049),h=n(34328);let m={generateImage:{creditCostType:"generateImage",execute:async function(e,t){let n=async(e,n)=>(0,s.hU)({interactionId:t.interactionId,prompt:e,model:n,workspaceId:t.workspaceId,count:1},t.abortController),i=(0,p.oP)();return{status:"success",images:(await Promise.all(e.prompts.map(e=>n(e,i)))).flat().map(e=>({attrs:e.attrs})),messageId:t.interactionId}}},searchImage:{execute:async function(e,t){let{query:n}=e;return{status:"success",images:(await (0,d.g)({provider:"web",query:n,count:6,abortController:t.abortController})).map(e=>({attrs:(0,c.TF)(e,n,"web")})).slice(0,6),messageId:t.interactionId}}},removeBackground:{checkEnabled:()=>!a.of.get("disableRemoveBackground"),creditCostType:"removeBackground",execute:async function(e,t){var n,i,a;let r=t.imageToEdit,o=null===(n=t.imageToEdit)||void 0===n?void 0:n.src;if(!o)throw Error("Cannot remove background, no image selected");let s=await l({operation:"remove-background",interactionId:t.interactionId,messageId:t.messageId,chatId:t.chatId,workspaceId:t.workspaceId,editParams:{},url:o,width:null==r?void 0:null===(i=r.meta)||void 0===i?void 0:i.width,height:null==r?void 0:null===(a=r.meta)||void 0===a?void 0:a.height},t.abortController);return{status:"success",images:[{attrs:{source:"image.custom",query:null==r?void 0:r.query,src:s.url,meta:null==r?void 0:r.meta}}],messageId:t.interactionId}}},editContent:{execute:async function(e,t){let n=t.imageToEdit,r=null==n?void 0:n.src;if(!r)throw Error("Cannot perform maskless image edit, no image selected");let o=a.of.get("masklessEditModel"),s=(await Promise.all(e.editPrompts.map(async e=>{try{var i,a;let s=await l({operation:"maskless",interactionId:t.interactionId,messageId:t.messageId,chatId:t.chatId,workspaceId:t.workspaceId,editParams:{editPrompt:e,model:o},url:r,width:null===(i=n.meta)||void 0===i?void 0:i.width,height:null===(a=n.meta)||void 0===a?void 0:a.height},t.abortController);return{attrs:{source:"image.custom",query:null==n?void 0:n.query,src:s.url,meta:null==n?void 0:n.meta}}}catch(e){if((0,h.z)(e))throw e;return console.error("Maskless edit error:",e),null}}))).filter(Boolean);return 0===s.length?{status:"error",messageId:t.interactionId,error:i.Ru._({id:"0A5PiD"})}:{status:"success",images:s,messageId:t.interactionId}}},vectorize:{checkEnabled:e=>(0,u.D)(e),execute:async function(e,t){var n,i;let a=t.imageToEdit,r=null==a?void 0:a.src;if(!r)throw Error("Cannot vectorize, no image selected");let o=await l({operation:"vectorize",url:r,width:null===(n=a.meta)||void 0===n?void 0:n.width,height:null===(i=a.meta)||void 0===i?void 0:i.height,workspaceId:t.workspaceId,interactionId:t.interactionId,chatId:t.chatId,messageId:t.messageId,editParams:{}},t.abortController);return{status:"success",images:[{attrs:{source:"image.custom",query:null==a?void 0:a.query,src:o.url,meta:null==a?void 0:a.meta}}],messageId:t.interactionId}}},upscale:{checkEnabled:e=>(0,u.D)(e),execute:async function(e,t){var n,i;let a=t.imageToEdit,r=null==a?void 0:a.src;if(!r)throw Error("Cannot upscale, no image selected");let o=await l({operation:"upscale",editParams:{},url:r,width:null===(n=a.meta)||void 0===n?void 0:n.width,height:null===(i=a.meta)||void 0===i?void 0:i.height,workspaceId:t.workspaceId,interactionId:t.interactionId,chatId:t.chatId,messageId:t.messageId},t.abortController);return{status:"success",images:[{attrs:{source:"image.custom",query:null==a?void 0:a.query,src:o.url,meta:null==a?void 0:a.meta}}],messageId:t.interactionId}}},replaceBackground:{execute:async function(e,t){var n,i;let a=t.imageToEdit,r=null==a?void 0:a.src;if(!r)throw Error("Cannot replace background, no image selected");let o=await l({operation:"replace-background",workspaceId:t.workspaceId,url:r,width:null===(n=a.meta)||void 0===n?void 0:n.width,height:null===(i=a.meta)||void 0===i?void 0:i.height,editParams:{backgroundDescription:e.newBackgroundDescription},interactionId:t.interactionId,chatId:t.chatId,messageId:t.messageId},t.abortController);return{status:"success",images:[{attrs:{source:"image.custom",query:null==a?void 0:a.query,src:o.url,meta:null==a?void 0:a.meta}}],messageId:t.interactionId}}},animate:{checkEnabled:e=>a.of.get("aiAnimate")&&(0,u.D)(e),creditCostType:"animateImage",execute:async function(e,t){var n,i,r,o;let s=t.imageToEdit,d=null==s?void 0:s.src;if(!d)throw Error("Cannot replace background, no image selected");let c=await l({operation:"animate",workspaceId:t.workspaceId,url:d,width:null===(n=s.meta)||void 0===n?void 0:n.width,height:null===(i=s.meta)||void 0===i?void 0:i.height,editParams:{prompt:e.prompt,model:a.of.get("animateImageModel"),aspectRatio:(null===(r=s.meta)||void 0===r?void 0:r.width)&&(null===(o=s.meta)||void 0===o?void 0:o.height)?s.meta.width>s.meta.height?"landscape":"portrait":"landscape"},interactionId:t.interactionId,chatId:t.chatId,messageId:t.messageId},t.abortController);return{status:"success",images:[{attrs:{source:"image.custom",query:null==s?void 0:s.query,src:c.url,meta:null==s?void 0:s.meta}}],messageId:t.interactionId}}},restyle:{execute:async function(e,t){return m.editContent.execute({editPrompts:[e.prompt]},t)}}},g=e=>e.imageToEdit?Object.keys(m).filter(t=>{let n=m[t];return!n.checkEnabled||n.checkEnabled(e.imageToEdit)}):["generateImage","searchImage"]},88479:(e,t,n)=>{"use strict";n.d(t,{H:()=>r,O:()=>a});var i=n(99742);let a=(0,i.d_)("abcdefghijklmnopqrstuvwxyz0123456789",8);function r(){return"chat-".concat((0,i.Ak)())}},89049:(e,t,n)=>{"use strict";n.d(t,{a:()=>i});class i{constructor({key:e,description:t,classifyExamples:n,classifyReply:i,checkEnabled:a}){this.key=e,this.description=t,this.classifyExamples=n,this.classifyReply=i,this.checkEnabled=a}}},53898:(e,t,n)=>{"use strict";n.d(t,{R:()=>i});let i=new(n(36832)).b},44347:(e,t,n)=>{"use strict";n.d(t,{m:()=>c});var i=n(46108),a=n.n(i),r=n(81570),o=n(32262),l=n(95580),s=n(19534),d=n(72477);class c{isApplied(e){let t=e.state.tr,n=null;try{n=this.transact(e,t,!1)}catch(e){return console.error("[isModificationActive] Could not transact modificatioon, returning false",e.message),!1}if(!n)return!1;let i=(0,d.oR)(e,this.rangeId);if(!i)return!1;try{let a=e.state.doc.slice(i.from,i.to),r=t.doc.slice(i.from,i.to),o=n.from===i.from&&n.to===i.to;return a.eq(r)&&o}catch(e){}return!1}getPreviewJson(e){let t=e.state.tr;this.transact(e,t);let n=this.getParentCardId(e,t),i=a()(t.doc.toJSON());return(0,d.sT)(i,n)}getParentCardId(e,t){let n=(0,d.oR)(e,this.rangeId);if(!n)return null;let i=t.doc.resolve(n.from),a=(0,l.IV)(i,s.jg)[0];return a&&a.node.attrs.id||null}apply(e){let t=e.state.tr;this.transact(e,t),console.debug("[ReplaceContentModification] Applying modification",{modification:this,range:(0,d.oR)(e,this.rangeId)}),e.view.dispatch(t);let n=this.getParentCardId(e,t);(0,o.OM)({editor:e,cardId:n})}transact(e,t){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],i=(0,d.oR)(e,this.rangeId);if(!i)return null;let{state:a}=e;t.replace(i.from,i.to,this.slice).setMeta("applyingAiModification",{rangeId:this.rangeId});let o=t.mapping.map(i.to),l={from:i.from,to:o};if(n){if(a.selection.empty)return t.setSelection(r.LN.near(t.doc.resolve(i.from))),l;if(a.selection instanceof r.nh)return t.setSelection(r.nh.create(t.doc,i.from)),l;let e=r.U3.between(t.doc.resolve(i.from),t.doc.resolve(o));t.setSelection(e)}return l}getContentForTracking(){return this.content}constructor(e,t){this.type="replace-content",this.description=t.description,this.rangeId=t.rangeId,this.content=t.content,this.slice=(0,d.ni)(e,t.content)}}},72477:(e,t,n)=>{"use strict";n.d(t,{ni:()=>l,nm:()=>s,oR:()=>d,sT:()=>o});var i=n(69e3),a=n(82883),r=n(65208);let o=(e,t)=>{if(!e.content||!e.content[0].content)return null;let n=e.content[0].content.find(e=>e.attrs&&e.attrs.id===t);return n?(e.content[0].content=[n],e):null},l=(e,t)=>{let n=null;if("html"===t.type)n=(0,r.S)(t.html,e.schema).slice;else if("json"===t.type){let a=i.FK.fromJSON(e.schema,t.json);n=new i.Ji(a,0,0)}else throw Error("Unsupported Modification content type ".concat(t.type));return n},s=(e,t,n)=>{var i,r;let o=a.G.getState(e.state);return o?(null==o?void 0:o.getExistingRangeId(e.state,n))||null||(null===(i=(r=e.commands).setInteractionRange)||void 0===i||i.call(r,t,n),t):t},d=(e,t)=>{let n=a.G.getState(e.state);return(null==n?void 0:n.getRange(e.state,t))||null}},24038:(e,t,n)=>{"use strict";n.d(t,{Fz:()=>x,dV:()=>f,z7:()=>b});var i=n(12327),a=n(89049),r=n(25465),o=n(57450),l=n(65449),s=n(33587),d=n(50877),c=n(32899),u=n(83603),p=n(44347),h=n(72477),m=n(46645),g=n(57624);let x=()=>i.Ru._({id:"HNDdbS"});class f extends a.a{async getResponseMessages(e){let{editor:t,context:n,rangeId:a,response:{raw:r,suggestion:o,message:l}}=e;if(!o)throw new u.tF("[SuggestContentTask] No html provided in prompt response",{chatMessage:l,inputMessage:n.message,resp:r,interactionId:n.interactionId});let d=await (0,s.eY)(o,{loadImages:!0});console.debug("[AIChat SuggestContentTask] modify suggestion",{transformedHtml:d,html:o});let c=new p.m(t,{description:i.Ru._({id:"nyQWMb"}),content:{type:"html",html:d},rangeId:a}),h={label:i.Ru._({id:"nyQWMb"}),modification:c,jsonContentPreview:c.getPreviewJson(t)},m=this.getOriginalModifyContentSuggestion(t,n,a);return{messages:[{from:"Designer",type:"suggestContent",resp:r,message:l||i.Ru._({id:"pMSbe+"}),suggestions:[h,m],interactionId:n.interactionId}],suggestionToApply:h}}async runPrompt(e){let t,{input:n,context:i,variables:a,trackFns:r,retries:s=2,history:p}=e;if(this.jsxPrompt&&c.of.get("aiChatJsx")){let{promise:e}=(0,l.i4)({variables:{html:a.html,message:a.message,outline:a.outline,history:p.map(e=>({role:e.role===d.VDI.Assistant?"assistant":"user",content:e.content||""}))},interactionId:i.interactionId,workspaceId:i.workspaceId,promptKey:this.jsxPrompt,opts:{timeout:c.of.get("aiRequestTimeouts").suggestContent}});t=await e}else t=await (0,o.U)(n,i.interactionId,{timeout:c.of.get("aiRequestTimeouts").suggestContent});if(!t)throw new u.tF("Couldn't get response from prompt",{resp:t,inputMessage:i.message,interactionId:i.interactionId});let h=this.parseResponse(t,a);if(h.shouldRetry){if(s<=0)throw new u.K$("Could not parse response properly after retries",{chatMessage:x(),inputMessage:i.message,resp:t,interactionId:i.interactionId});return r.trackRequestRetry({interactionId:i.interactionId,retriesRemaining:s,resp:t}),this.runPrompt({input:n,context:i,retries:s-1,trackFns:r,variables:a,history:p})}return{parsed:h,resp:t}}async run(e){let{editor:t,context:n,addMessage:i,history:a,trackFns:o,themeModificationController:l,provider:s}=e,{html:d,range:c}=this.determineTaskTarget(n.editorContext);o.trackInputContent({taskContext:n,inputContent:d});let u={message:n.message,html:d,outline:n.editorContext.outline},p=(0,h.nm)(t,n.interactionId,c),m=(0,g.K)(a||[]),x=this.prompt.prepare({variables:u,history:m,interactionId:n.interactionId,params:{provider:s}});console.debug("[AIChat SuggestContentTask] run",{html:u.html,input:x,suggestHistory:m,range:(0,h.oR)(t,p)});let f=await (0,r.wo)(x),{parsed:v,resp:b}=await this.runPrompt({input:f,history:m,context:n,variables:u,trackFns:o,retries:1}),{messages:y,suggestionToApply:w}=await this.getResponseMessages({editor:t,context:n,rangeId:p,response:v,themeModificationController:l});console.debug("[AIChat SuggestContentTask] completed",{suggestion:v.suggestion,resp:b,parsed:v,messages:y,suggestionToApply:w}),this.autoApplySuggestion({context:n,editor:t,suggestionToApply:w,resp:b,trackFns:o,themeModificationController:l}),y.forEach(e=>i(e)),o.trackRequestComplete({taskContext:n,outputMessage:v.message,outputContent:v.suggestion,resp:b})}determineTaskTarget(e){return this.getTaskTarget?this.getTaskTarget(e):e.defaultRange}getOriginalModifyContentSuggestion(e,t,n){let a=new p.m(e,{description:i.Ru._({id:"HxF6Fk"}),content:{type:"html",html:this.determineTaskTarget(t.editorContext).html},rangeId:n});return{label:i.Ru._({id:"HxF6Fk"}),modification:a,jsonContentPreview:a.getPreviewJson(e)}}autoApplySuggestion(e){let{context:t,editor:n,suggestionToApply:i,resp:a,trackFns:r,themeModificationController:o}=e;if(i){if(i.modification.isApplied(n,o))throw console.debug("[SuggestContentTask] suggestion does not change the content",i),new u.hY("Suggestion does not change content",{resp:a,interactionId:t.interactionId,chatMessage:x()});try{let{modification:e}=i;e.apply(n,o),r.trackSuggestionApplied({interactionId:t.interactionId,suggestionContent:e.getContentForTracking(),suggestionLabel:e.description,suggestionType:e.type,autoApplied:!0})}catch(e){throw new u.$v("Could not apply suggestion",{interactionId:t.interactionId})}}}constructor(e){super(e),this.prompt=e.prompt,this.jsxPrompt=e.jsxPrompt,this.parseResponse=e.parseResponse||b,this.getTaskTarget=e.getTaskTarget}}let v=RegExp("(.*?)```[A-Za-z]*\\n(.*?)\\n```(.*?)$","ims"),b=e=>{let t;let n=e.match(v),i=[];if(n)i=[n[1],n[3]],t=n[2];else{let n=e.split("```");if(0===n.length)throw Error("Could not extract code from response");if(1===n.length)return(0,m.t)(n[0])?{suggestion:void 0,raw:e,message:e,shouldRetry:!0}:{suggestion:void 0,raw:e,message:e.replaceAll(/(HTML|code)/gi,"content")};i=[n[0]],t=n[1].trim()}return{suggestion:t,message:i.map(e=>e.trim()).filter(e=>e.length>0).join("\n\n").replaceAll(/(HTML|code)/gi,"content").replaceAll(/(slide)/gi,"card"),raw:e}}},83190:(e,t,n)=>{"use strict";n.d(t,{i:()=>o,t:()=>l});var i=n(81768),a=n(50877),r=n(24038);let o=new i.F({systemPromptOperation:a.mc.ChangeContentLayoutSystem,userPromptOperation:a.mc.ChangeContentLayoutUser,variables:["html","message"],params:{temperature:.7,maxTokens:1e3}}),l=new r.dV({key:"CHANGE_LAYOUT",description:"Change the display of information to use a different layout (like timeline, bullets, boxes, columns, table) or rearrange elements within a layout",classifyExamples:["turn this into a table","make each bullet into a box","could you split this into columns?","make this a timeline","could you make this more visual?","visualize this as a timeline"],classifyReply:"Sure, I'll start reformatting this as a table...",getTaskTarget:e=>"selectionRange"!==e.selectedDefaultRange?e.defaultRange:0===e.selectionRange.html.trim().length?e.cardContent:e.blockRange,prompt:o})},46645:(e,t,n)=>{"use strict";n.d(t,{t:()=>i});let i=e=>Array.from(new DOMParser().parseFromString(e,"text/html").body.childNodes).some(e=>1===e.nodeType)},57624:(e,t,n)=>{"use strict";n.d(t,{K:()=>i});let i=e=>e.slice(-7).map(e=>"User"===e.from?{role:"user",content:e.message}:e.isClassification?{role:"assistant",content:e.message}:e.resp?{role:"assistant",content:e.resp}:null).filter(e=>!!(null==e?void 0:e.content))},91656:(e,t,n)=>{"use strict";n.d(t,{No:()=>C,YI:()=>z});var i=n(31085),a=n(32202),r=n(80532),o=n(35687),l=n(61778),s=n(62313),d=n(49547),c=n(22218),u=n(28478),p=n(63633),h=n(74727),m=n(80853),g=n(9021),x=n(20501),f=n(24221),v=n(9104),b=n(95640),y=n(12327),w=n(89897),j=n.n(w),k=n(14041);let C=e=>{let{isDark:t,feedbackTags:n=[],trackRating:g,trackFeedback:v}=e,[y,w]=(0,k.useState)(null),[C,I]=(0,k.useState)(!1),[R,E]=(0,k.useState)(""),[L,_]=(0,k.useState)(new Set),M=(0,k.useRef)(null),N=(0,a.d)(),T=(0,k.useCallback)(e=>{w(e),null==g||g(e),N({title:(0,i.jsx)(b.x6,{id:"2gZOCV"}),status:"success",position:"top",duration:1e3}),setTimeout(()=>{var e;null==M||null===(e=M.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},200)},[g,N]),P=(0,k.useCallback)(e=>{e||(null==v||v(y,j().sanitize(R),Array.from(L)),N({title:(0,i.jsx)(b.x6,{id:"+Rq0s/"}),status:"success",position:"top",duration:2e3,isClosable:!0})),I(!0)},[R,L,y,v,N]);return(0,i.jsx)(r.az,{p:4,borderRadius:"lg",border:"1px solid",borderColor:t?"whiteAlpha.100":"gray.200",position:"relative",children:C?(0,i.jsxs)(l.E,{color:t?"green.400":"green.600",textAlign:"center",children:[(0,i.jsx)(f.g,{icon:x.QRE})," ",(0,i.jsx)(b.x6,{id:"SOk0EB"})]}):(0,i.jsxs)(o.B,{spacing:4,children:[(0,i.jsxs)(o.B,{alignItems:"center",spacing:"1",children:[(0,i.jsx)(l.E,{fontSize:"sm",color:t?"whiteAlpha.800":"gray.500",children:(0,i.jsx)(b.x6,{id:"/djJcD"})}),y?(0,i.jsxs)(l.E,{textAlign:"center",color:t?"green.400":"green.600",children:[(0,i.jsx)(f.g,{icon:x.QRE})," ",(0,i.jsx)(b.x6,{id:"SOk0EB"})]}):(0,i.jsx)(l.E,{children:(0,i.jsx)(b.x6,{id:"cguR5Y"})})]}),(0,i.jsx)(s.z,{fontSize:"xl",width:"100%",children:S.map(e=>{let{key:n,ariaLabel:a,label:r,icon:o,color:l}=e,s=y===n;return(0,i.jsx)(A,{ariaLabel:a,label:r,icon:o,color:l,onClick:()=>T(n),isSelected:s,isDisabled:!1,isDark:t},n)})}),y&&"good"!==y&&n.length>0&&(0,i.jsxs)(d.MJ,{children:[(0,i.jsx)(c.l,{fontSize:"sm",color:t?"whiteAlpha.800":"gray.500",children:(0,i.jsx)(b.x6,{id:"467HY8"})}),(0,i.jsx)(u.B,{children:n.map(e=>{let{key:n,label:a}=e;return(0,i.jsx)(u.Q,{onClick:()=>{_(e=>{let t=new Set(e);return t.has(n)?t.delete(n):t.add(n),t})},children:(0,i.jsx)(z,{label:a,isDark:t,isSelected:L.has(n)})},n)})})]}),y&&(0,i.jsxs)(d.MJ,{textAlign:"center",children:[(0,i.jsx)(c.l,{fontSize:"sm",color:t?"whiteAlpha.800":"gray.500",children:"good"===y?(0,i.jsx)(b.x6,{id:"AmM8eQ"}):(0,i.jsx)(b.x6,{id:"PhJTrf"})}),(0,i.jsx)(p.T,{value:R,onChange:e=>{E(e.target.value)},placeholder:"",size:"sm",mb:"4"}),(0,i.jsxs)(h.e,{spacing:"4",ref:M,children:[(0,i.jsx)(m.$,{variant:"text",onClick:()=>{P(!0)},children:(0,i.jsx)(b.x6,{id:"6Uau97"})}),(0,i.jsx)(m.$,{variant:"solid",isDisabled:""===R&&0===L.size,onClick:()=>P(!1),minW:32,children:(0,i.jsx)(b.x6,{id:"hQRttt"})})]})]})]})})},S=[{key:"bad",label:(0,i.jsx)(b.x6,{id:"XSfVsn"}),ariaLabel:()=>y.Ru._({id:"XSfVsn"}),icon:x.wB1,color:"red"},{key:"meh",label:(0,i.jsx)(b.x6,{id:"0ASQJH"}),ariaLabel:()=>y.Ru._({id:"0ASQJH"}),icon:x.s_F,color:"yellow"},{key:"good",label:(0,i.jsx)(b.x6,{id:"9ZYnL5"}),ariaLabel:()=>y.Ru._({id:"9ZYnL5"}),icon:x.Qpm,color:"green"}],A=e=>{let{label:t,ariaLabel:n,icon:a,color:r,isSelected:o,onClick:s,isDisabled:d,isDark:c}=e,u=c?"".concat(r,".200"):"".concat(r,".100"),p=c?"".concat(r,".600"):"".concat(r,".500");return(0,i.jsx)(v.Tz,{label:t,placement:"top",children:(0,i.jsx)(g.K,{"aria-label":n(),boxShadow:"none",bg:o?u:c?"whiteAlpha.300":"gray.50",_disabled:{opacity:"".concat(o?1:.5),cursor:"not-allowed"},color:o?p:c?"whiteAlpha.800":"gray.500",_hover:{backgroundColor:"".concat(r,".100"),color:"".concat(r,".500")},flex:1,icon:(0,i.jsx)(l.E,{fontSize:"2xl",children:(0,i.jsx)(f.g,{icon:a})}),isDisabled:d,variant:"plain",onClick:s})})},z=e=>{let{label:t,isDark:n,isSelected:a}=e;return(0,i.jsx)(m.$,{variant:"plain",size:"sm",height:"6",boxShadow:"none",bgGradient:"none",bg:a?n?"purple.500":"purple.100":n?"gray.800":"gray.50",color:a?n?"white":"purple.700":n?"white":"gray.800",borderColor:n?"whiteAlpha.200":"blackAlpha.200",_hover:{color:void 0},cursor:"pointer",children:t})}},55746:(e,t,n)=>{"use strict";n.d(t,{Ep:()=>M,LW:()=>_,f3:()=>L});var i=n(31085),a=n(55276),r=n(32202),o=n(19098),l=n(64444),s=n(40173),d=n(93185),c=n(79967),u=n(35687),p=n(61778),h=n(28478),m=n(74727),g=n(80853),x=n(63552),f=n(9021),v=n(20501),b=n(24221),y=n(9104),w=n(95640),j=n(12327),k=n(89897),C=n.n(k),S=n(14041),A=n(55576),z=n(86186),I=n(91656);let R={bg:"red.100",_hover:{bg:"red.200"},borderColor:"red.600",color:"red.600"},E={bg:"green.100",_hover:{bg:"green.200"},borderColor:"green.600",color:"green.600"},L=e=>{let{rating:t,setRating:n,RatingButtons:x,trackFeedback:f,feedbackTags:v,size:b}=e,{isOpen:y,onOpen:k,onClose:z}=(0,a.j)(),R=(0,S.useCallback)(e=>{n(e),k()},[n,k]),[E,L]=(0,S.useState)(""),[_,M]=(0,S.useState)(new Set),N=(0,S.useCallback)(()=>{L(""),M(new Set),z()},[z]),T=(0,r.d)(),P=(0,S.useCallback)(()=>{null==f||f(t,C().sanitize(E),Array.from(_)),T({title:(0,i.jsx)(w.x6,{id:"+Rq0s/"}),status:"success",position:"top",duration:2e3,isClosable:!0}),N()},[E,_,t,f,T,N]);return(0,i.jsxs)(o.A,{isOpen:y,onOpen:k,onClose:N,placement:"top",closeOnBlur:!0,isLazy:!0,variant:"modal",children:[(0,i.jsx)(l.W,{children:(0,i.jsx)(x,{rating:t,setRating:R,size:b})}),(0,i.jsx)(s.Z,{children:(0,i.jsxs)(d.h,{borderRadius:"lg",borderWidth:"1px",borderColor:"gray.200",shadow:"xl",p:3,children:[(0,i.jsx)(c.q,{}),(0,i.jsxs)(u.B,{alignItems:"flex-end",children:[(0,i.jsx)(p.E,{alignSelf:"flex-start",fontSize:"sm",color:"gray.500",children:"good"===t?(0,i.jsx)(w.x6,{id:"uA8iBc"}):(0,i.jsx)(w.x6,{id:"tq89gP"})}),t&&"good"!==t&&v&&v.length>0&&(0,i.jsx)(h.B,{children:v.map(e=>{let{key:t,label:n}=e;return(0,i.jsx)(h.Q,{onClick:()=>{M(e=>{let n=new Set(e);return n.has(t)?n.delete(t):n.add(t),n})},children:(0,i.jsx)(I.YI,{label:n,isSelected:_.has(t)})},t)})}),(0,i.jsx)(A._,{initialHeight:"4em",value:E,onChange:e=>L(e.target.value),fontSize:"sm",placeholder:j.Ru._({id:"eYeGuP"}),p:1,px:2,borderRadius:"0"}),(0,i.jsxs)(m.e,{size:"sm",children:[(0,i.jsx)(g.$,{variant:"ghost",onClick:N,children:(0,i.jsx)(w.x6,{id:"6Uau97"})}),(0,i.jsx)(g.$,{variant:"solid",onClick:P,children:(0,i.jsx)(w.x6,{id:"1m41/U"})})]})]})]})})]})},_=(0,x.R)((e,t)=>{let{rating:n,setRating:a,size:r}=e,o=(0,z.wP)();return(0,i.jsxs)(m.e,{spacing:0,p:0,isAttached:!0,ref:t,size:r,children:[(0,i.jsx)(y.Tz,{label:(0,i.jsx)(w.x6,{id:"kR82DG"}),placement:"top",children:(0,i.jsx)(f.K,{...o,icon:(0,i.jsx)(b.g,{icon:v.lS9}),"aria-label":j.Ru._({id:"kqV4i0"}),..."poor"===n?R:{},onClick:()=>a("poor"),position:"relative",zIndex:"poor"===n?1:0})}),(0,i.jsx)(y.Tz,{label:(0,i.jsx)(w.x6,{id:"y1GvbS"}),placement:"top",children:(0,i.jsx)(f.K,{...o,icon:(0,i.jsx)(b.g,{icon:v.Wcv}),"aria-label":j.Ru._({id:"nnIO9F"}),position:"relative",insetStart:"-1px",..."good"===n?E:{},onClick:()=>a("good")})})]})});_.displayName="CardRatingButtons";let M=(0,x.R)((e,t)=>{let{rating:n,setRating:a,size:r="sm"}=e;return(0,i.jsxs)(m.e,{size:r,ref:t,children:[(0,i.jsx)(y.Tz,{label:(0,i.jsx)(w.x6,{id:"kR82DG"}),placement:"top",children:(0,i.jsx)(f.K,{"aria-label":"thumbs down",color:"poor"===n?"red.600":void 0,borderWidth:"1px",borderColor:"poor"===n?"red.600":"transparent",bg:"poor"===n?"red.100":void 0,_hover:{bg:"poor"===n?"red.200":"red.100"},icon:(0,i.jsx)(b.g,{icon:v.lS9}),onClick:e=>{e.stopPropagation(),a("poor")}})}),(0,i.jsx)(y.Tz,{label:(0,i.jsx)(w.x6,{id:"y1GvbS"}),placement:"top",children:(0,i.jsx)(f.K,{"aria-label":"thumbs up",color:"good"===n?"green.600":void 0,borderWidth:"1px",borderColor:"good"===n?"green.600":"transparent",bg:"good"===n?"green.100":void 0,_hover:{bg:"good"===n?"green.200":"green.100"},icon:(0,i.jsx)(b.g,{icon:v.Wcv}),onClick:e=>{e.stopPropagation(),a("good")}})})]})});M.displayName="ImageRatingButtons"},46418:(e,t,n)=>{"use strict";n.d(t,{F:()=>r});var i=n(50877),a=n(53547);class r extends a.U{getSystemChatMessage(e){return{role:i.VDI.System,content:o(this.systemPrompt,e)}}getUserChatMessage(e){return{role:i.VDI.User,content:o(this.userPrompt,e)}}constructor({variables:e,systemPrompt:t,userPrompt:n,params:i}){super({params:i}),this.variables=e,this.systemPrompt=t,this.userPrompt=n}}function o(e,t){let n=e;for(let e in t)n=n.replaceAll("{{".concat(e,"}}"),t[e]);return n}},70288:(e,t,n)=>{"use strict";let i;n.d(t,{O3:()=>d,TV:()=>s});var a=n(57754),r=n(26917),o=n(17539);class l{getKey(e){let{query:t,provider:n,options:i}=e;return"".concat(n,"__").concat(t,"__").concat(JSON.stringify(i))}markUsed(e){this.usedImages.add(e)}isUsed(e){return this.usedImages.has(e)}async findImage(e){let t,n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(e.loadImageId){let t=this.foundImages.get(e.loadImageId);if(t)return t}await this.loadImageResults(e);let i=this.getKey(e);return this.validImagePromises.has(i)?(t=this.validImagePromises.get(i).then(()=>this.findValidImage(e)),this.validImagePromises.set(i,t)):t=this.findValidImage(e),this.validImagePromises.set(i,t),t.then(t=>(t&&n&&this.markUsed(t.imageUrl),t&&e.loadImageId&&this.foundImages.set(e.loadImageId,t),t))}async findValidImage(e){let t=this.getKey(e);for(let e of this.results.get(t)){let{image:t}=e;if(!this.isUsed(t.imageUrl)&&(void 0===e.isValid&&(e.isValid=await (0,o.Ef)(t.imageUrl)),e.isValid))return e.image}return null}async loadImageResults(e){let{query:t,provider:n,options:i,count:a}=e,l=this.getKey({query:t,provider:n,options:i});if(this.results.has(l))return;if(this.requestPromises.has(l)){await this.requestPromises.get(l);return}this.debugRequests.push(l);let s=(0,r.g)({query:t,count:a,options:i,provider:n}).then(e=>e.filter(e=>(0,o.zk)(e.imageUrl))).then(e=>{let t=e.map(e=>({image:e,isValid:void 0}));return this.results.set(l,t),e});this.requestPromises.set(l,s),await s}async generateImage(e,t){let n="aiGenerated__".concat(t.prompt,"__").concat(e);if(this.debugRequests.push(n),this.generateImagePromises.has(e))return this.generateImagePromises.get(e);let i=(0,a.hU)(t);return this.generateImagePromises.set(e,i),i}debugInfo(){return{requests:this.debugRequests}}constructor(){this.usedImages=new Set,this.results=new Map,this.requestPromises=new Map,this.validImagePromises=new Map,this.debugRequests=[],this.generateImagePromises=new Map,this.foundImages=new Map}}let s=()=>(i||(i=new l),i),d=()=>{i=new l}},21450:(e,t,n)=>{"use strict";n.d(t,{Lm:()=>_,wJ:()=>T,tq:()=>W,ST:()=>N,gZ:()=>M});var i=n(13236),a=n(7292),r=n.n(a),o=n(39850),l=n.n(o),s=n(69e3),d=n(57754),c=n(18784),u=n(1771),p=n(57267),h=n(14661),m=n(32429),g=n(27649),x=n(65208),f=n(31948),v=n(79893),b=n(57983),y=n(26813),w=n(57882),j=n(63723),k=n(52207),C=n(92464),S=n.n(C);let A=e=>S()(e)(),z=(e,t)=>{let n=Math.floor(new(S())(t)()*e.length);return e[n]};var I=n(10028),R=n(33587);let E=["gridLayout","gallery","chart"],L=["imagesText","pyramid","funnel","staircase","circleStats","barStats","semiCircle","circle","cycle","flower","ring"],_=async(e,t)=>{var n,a,r;let o;let{cardIndex:s,imageOptions:d,docFormatKey:c,theme:u,loadImages:m}=t,f=null===(a=t.removeImagesFromLayouts)||void 0===a||a,v="GenerateDeckWithLayout"===t.promptKey?await (0,R.Xw)(e):await (0,R.eY)(e,{imageOptions:d,removeImagesFromLayouts:f,loadImages:!1}),b=(0,i._w)((0,p.C)()),{content:y,dom:j}=(0,x.S)(v,b),k=y.toJSON(),C=1===k.length&&"card"===k[0].type?(null===(n=k[0])||void 0===n?void 0:n.content)||[]:k,S=C.some(e=>"cardLayoutItem"===e.type),A=C.find(e=>"cardAccentLayoutItem"===e.type);if(S)(o=k[0]).attrs.layout&&!A&&(o.attrs.layout="blank"),o.attrs.id||(o.attrs.id=g.Yv.generate());else{let e=null===(r=j.firstElementChild)||void 0===r?void 0:r.getAttribute("image-layout"),n=e&&h.bI.includes(e)?e:void 0,i=j.textContent?l()(j.textContent).length:void 0;o=P(C,{...t,cardIndex:s,docFormatKey:c,theme:u,cardLayout:n,wordCount:i,usePlaceholderImages:(null==d?void 0:d.provider)==="placeholder",textOnlyLayouts:t.preserveLayouts||(null==d?void 0:d.provider)==="none"})}return d&&"aiGenerated"===d.provider&&M(o,b),m&&(null==d?void 0:d.provider)!=="placeholder"&&await N(o,b,{docId:"unknown",workspaceId:(0,w.gx)(),...t.context}),T(o),o},M=(e,t)=>{(0,k.L)(e,e=>{if("text"===e.type)return;let n=s.bP.fromJSON(t,{type:e.type,attrs:e.attrs}),i=(0,v.um)(n);if(!i||!i.loadImageParams)return;let{options:a}=i.loadImageParams;if(!a)return;let r=(0,d.pH)("model"in a?a.model:void 0),o=(0,f.Kr)(e),l=r.includes(o)?o:c.X,u={...i.loadImageParams,options:{...i.loadImageParams.options,aspectRatio:l}};e.attrs=(0,v.wH)(n,{loadImageParams:u})})},N=async(e,t,n)=>{let i=[];(0,k.L)(e,async e=>{if("text"===e.type)return;let a=t.nodeFromJSON({type:e.type,attrs:e.attrs}),r=(0,v.um)(a);if(!r)return;let{loadImageStatus:o,loadImageId:l,loadImageParams:s}=r;if("queued"!==o||!s||!l)return;let d=(0,I.ap)({loadImageId:l,loadImageParams:s,context:n}).then(t=>{e.attrs=(0,v.wH)(a,t)});i.push(d)}),await Promise.all(i)},T=e=>{var t,n,i,a;let r=e.content.find(e=>"cardAccentLayoutItem"===e.type);if(!r)return;let o=r.attrs.background;if(!o)return;let l=null==o?void 0:null===(n=o.image)||void 0===n?void 0:null===(t=n.meta)||void 0===t?void 0:t.average_color,s=l&&(0,j.$p)(l);"behind"===e.attrs.layout&&(s||.5>A(e.attrs.id))&&(null!==(a=(i=e.attrs).container)&&void 0!==a||(i.container={}),e.attrs.container.background={type:y.h.COLOR,color:{hex:"#000000"}});let d=e.content.find(e=>"cardLayoutItem"===e.type);if(!d)return;let c=(d.content||[]).filter(e=>"paragraph"!==e.type||e.content);try{o.mask={effect:0===c.length?"none":"faded"}}catch(e){console.error("[caught] [fixBehindBackgroundMask]",e,"with accentBackground:",o)}},P=(e,t)=>{var n,i;let a;let{cardIndex:o,docFormatKey:l,theme:s,cardLayout:d,cardDimensions:c,usePlaceholderImages:u}=t,p=g.Yv.generate(),h=e.filter(e=>{var t,n;return"image"===e.type&&((null===(t=e.attrs)||void 0===t?void 0:t.src)||(null===(n=e.attrs)||void 0===n?void 0:n.loadImageStatus)==="queued")})||[],x=t.textOnlyLayouts||t.wordCount&&t.wordCount>("social"===l?50:120)||e.some(t=>{var n;return E.includes(t.type)||"smartLayout"===t.type&&(null===(n=t.attrs)||void 0===n?void 0:n.variantKey)&&L.includes(t.attrs.variantKey)||"smartLayout"===t.type&&t.content&&t.content.length>4||e.length>6}),f=h[0];u?a={type:y.h.NONE}:f&&"blank"!==d?a={type:y.h.IMAGE,image:f.attrs,source:f.attrs.source}:s&&(a=W(s,p)),0===o&&("deck"===l||"document"===l)&&e.push({type:"contributors"}),e=e.flatMap(e=>B(e,p));let v={};"deck"===l?v=D({cardIndex:o,cardId:p,preventSideCardLayouts:x,cardLayout:d}):"document"===l?v=H({cardIndex:o,cardId:p,preventSideCardLayouts:x,cardLayout:d}):"webpage"===l?v=O({cardIndex:o,cardId:p,accentBackground:a,preventSideCardLayouts:x,cardLayout:d,theme:s}):"social"===l&&(v=F({cardIndex:o,cardId:p,preventSideCardLayouts:x,cardLayout:d}));let b={container:{},layout:d||"blank",id:p,...v},w="blank"!==b.layout&&a?{type:"cardAccentLayoutItem",attrs:{itemId:"accent",background:a,fitType:"fill"}}:null;if(w||(b.layout="blank"),"left"===b.layout||"right"===b.layout||"social"===l){let t=!1;e.forEach(e=>{if("smartLayout"===e.type&&e.attrs){let n=e.attrs;t=!0,n.options.orientation="vertical",n.options.twoSided=!1}}),t&&(null==w?void 0:null===(i=w.attrs.background)||void 0===i?void 0:i.source)==="accent.theme"&&(b.layoutTemplateColumns="left"===b.layout?"25% 75%":"75% 25%")}if("top"===b.layout&&c&&!x){let{aspectRatio:e}=m.xs[c];e&&e<1&&(b.layoutTemplateRows="var(--top-accent-height-lg) auto")}let j={type:"cardLayoutItem",attrs:{itemId:"body"},content:e};return!f||"blank"===b.layout&&(null===(n=f.attrs)||void 0===n?void 0:n.src)||r()(e,f),{type:"card",attrs:b,content:w?[w,j]:[j]}},O=e=>{let{cardIndex:t,cardId:n,accentBackground:i,preventSideCardLayouts:a,theme:r,cardLayout:o}=e,l={},s=r?(0,u.CD)(r):[];if(o)l.layout=o;else if(0===t)l.layout=z(["behind","right"],n);else if(.8>A(n)){if(l.layout=a?"blank":z(["left","right","behind","blank","blank"],n),a&&"blank"===l.layout&&s.length&&.25>A(n)){let e=(0,u.Ik)(z(s,n));l.container={background:{type:y.h.COLOR,color:{hex:e}}}}}else if(s.length){let e=(0,u.Ik)(z(s,n));l.cardSize="contained",l.background=z([i,{type:y.h.COLOR,color:{hex:e}}],n),l.layout="blank"}return l},D=e=>{let{cardIndex:t,cardId:n,preventSideCardLayouts:i,cardLayout:a}=e,r={};return a?r.layout=a:0!==t||i?i?r.layout="blank":r.layout=z(["left","left","right","right","top"],n):r.layout=z(["left","right"],n),r},F=e=>{let{cardId:t,preventSideCardLayouts:n,cardLayout:i}=e,a={};return i?a.layout=i:n?a.layout=z(["behind","blank"],t):a.layout="top",a},H=e=>{let{cardIndex:t,preventSideCardLayouts:n,cardId:i,cardLayout:a}=e,r={};return a?r.layout=a:0===t?(r.cardSize="full",r.layout="behind"):n?r.layout="blank":r.layout=z(["blank","blank","blank","right","left"],i),r},W=(e,t)=>{let n=z(e.config.accentBackgrounds||[],t);if(n)return{...n,source:"accent.theme"}},B=(e,t)=>{var n,i;if("smartLayout"!==e.type||!e.attrs||!e.content)return e;let a=e.attrs.variantKey;if("bullets"===a&&1===e.content.length&&(null===(n=e.content[0].content)||void 0===n?void 0:n.some(e=>"bullet"===e.type)))return e.content[0].content;if("numbers"===a){let n=null===(i=e.content)||void 0===i?void 0:i.map(e=>{var t;return null===(t=e.attrs)||void 0===t?void 0:t.label});(null==n?void 0:n.every(e=>e.endsWith("%")))&&(e.attrs.variantKey=z(["barStats","circleStats"],t))}return"circle"===a&&(e.attrs.variantKey=z(["circle","flower","ring","semiCircle"],t)),("iconsText"===a||"imagesText"===a||"circleStats"===a)&&(e.attrs.options.imagePosition=z(["top","left"],t),"left"===e.attrs.options.imagePosition&&e.content.length%2!=0&&(e.attrs.options.cellSize=b.BT)),"staircase"===a&&(e.attrs.horizontalAlign=z(["center",void 0],t)),e.content.length>4&&(e.attrs.options.orientation="vertical"),e}},60953:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});let i="ai-parsed-attrs"},10028:(e,t,n)=>{"use strict";n.d(t,{P5:()=>c,ap:()=>u,eG:()=>d});var i=n(87064),a=n(70288),r=n(90937),o=n(4977),l=n(952),s=n(12127);let d=e=>{let{query:t,provider:n,license:i,model:a,stylePreset:o,stylePrompt:l}=e;return t?("aiGenerated"!==n&&(t=t.split(", ")[0]),{loadImageParams:{provider:n,query:t,options:"aiGenerated"===n?{model:a,stylePreset:o,stylePrompt:l}:{license:i}},loadImageStatus:"queued",loadImageId:(0,s.z)(),source:r.j[n]}):{loadImageStatus:"error"}},c=e=>{let t;try{t=JSON.parse(e)}catch(t){return console.error("[Image] Error adding loadImageId to attrs: ".concat(t.message),t.stack),e}return t.loadImageStatus="queued",t.loadImageId=(0,s.z)(),JSON.stringify(t)},u=async e=>{let{loadImageId:t,loadImageParams:n,context:s,markUsed:d=!0}=e,{provider:c,query:u,options:p}=n,{interactionId:h,...m}=s;try{if("aiGenerated"===c){let e={...p,interactionId:h||(0,i.$F)(),steps:30,...m,prompt:u,count:1},n=await (0,a.TV)().generateImage(t,e);if(!n[0])return{loadImageStatus:"error"};return{...n[0].attrs,tempUrl:null,loadImageStatus:"done",uploadStatus:o.A.Queued}}{let e=await (0,a.TV)().findImage({query:u,provider:n.provider,options:n.options,loadImageId:t},d);if(!e)return{query:u,source:r.j[c],loadImageStatus:"error"};return{...(0,l.TF)(e,u,c),loadImageStatus:"done",uploadStatus:o.A.Queued}}}catch(e){return console.error("[AIStream] An error occurred while fetching image: ".concat(e.message),e.stack),{loadImageStatus:"error"}}}},76546:(e,t,n)=>{"use strict";n.d(t,{AU:()=>m,Gc:()=>h,Yp:()=>p,de:()=>g});var i=n(13236),a=n(21450),r=n(10028),o=n(5150),l=n(4977),s=n(77646),d=n(79893),c=n(57882);let u=async e=>{let{editor:t,chain:n,node:i,imageAttrs:a,pos:r}=e;n.updateAttributesAtPos(r,(0,d.wH)(i,{uploadStatus:l.A.Uploading}));let{tempUrl:s,src:c}=a;(0,o.j_)(c,t.storage.mediaUpload.orgId,{onUploadComplete:e=>{(0,d.Ki)(t,s,e)},onUploadFailed:e=>{(0,d.wt)(t,s,e,!0)}})},p=async e=>{let{cardId:t,editor:n}=e;console.debug("[AIStream uploadAIImages] for cardId: ",t);let a=n.chain(),r=(0,i.xe)(n.state.doc,e=>(0,s.jg)(e)&&e.attrs.id===t)[0];if(!r){console.error("[uploadAIImages] can not find card with id: ",t);return}let o=r.pos,c=o+r.node.nodeSize;n.state.doc.descendants((e,t)=>{if(t<o||t>c)return!0;let i=(0,d.um)(e);return!i||(i&&i.uploadStatus===l.A.Queued&&(console.debug("[AIStream processAIImages]: ".concat(e.type.name," node with AI queries at pos ").concat(t,":"),i),u({editor:n,chain:a,node:e,imageAttrs:i,pos:t})),!0)}),a.run()},h=async e=>{let{lastCompletedCardId:t,editor:n,theme:a}=e;if(!t)return;console.debug("[AIStream refetchLazyImages] for cardId: ",t);let r=(0,i.xe)(n.state.doc,e=>(0,s.jg)(e)&&e.attrs.id===t)[0];if(!r){console.error("[refetchLazyImages] can not find card with id: ",t);return}let o=r.pos+r.node.nodeSize;g(n,n.state.doc,a,0,o)},m=async e=>{let{editor:t,loadImageId:n,newAttrs:r,node:o,theme:l,cardId:s}=e,c=(0,i.xe)(t.state.doc,e=>{let t=(0,d.um)(e);return!!t&&t.loadImageId===n})[0];if(!c){console.error("[AIStream] could not find image in editor with loadImageId=".concat(n,"}"));return}let u="cardAccentLayoutItem"===o.type.name&&"error"===r.loadImageStatus?{...c.node.attrs,background:(0,a.tq)(l,s)}:(0,d.wH)(c.node,r),p=t.chain();p.updateAttributesAtPos(c.pos,u),p.noUndo&&p.noUndo(),p.run()},g=async(e,t,n,i,a)=>{t.descendants((t,o)=>{var l;if(i&&o<i||a&&o>a)return;let s=(0,d.um)(t);if(!s||"queued"!==s.loadImageStatus||!s.loadImageId||!s.loadImageParams)return;let{loadImageId:u,loadImageParams:p}=s,h=null===(l=(0,c.bs)(e.gammaOrgId))||void 0===l?void 0:l.id;(0,r.ap)({loadImageId:u,loadImageParams:p,context:{docId:e.gammaDocId,workspaceId:h}}).then(i=>{m({editor:e,newAttrs:i,loadImageId:u,node:t,theme:n})})})}},33587:(e,t,n)=>{"use strict";n.d(t,{Dr:()=>g,Xw:()=>c,eY:()=>d});var i=n(60953),a=n(10028),r=n(82064),o=n(88693),l=n(57882);let s="img[".concat(i.A,"], icon[").concat(i.A,"], div[data-image]"),d=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{e=e.replace(/<icon([^>]*?)\/?\s*>/gi,"<icon$1></icon>");let n=new DOMParser().parseFromString(e,"text/html");p(n),t.removeImagesFromLayouts&&(u(n),m(n));let s=(0,l.gx)(),d=(0,r.h)(n,"img[searches], img[query], icon[query]").map(async e=>{var n,r,o,l,d,c;if(e.getAttribute("bookmark"))return;let u=e.getAttribute("query")||e.getAttribute("searches")||"",p=null===(n=t.imageOptions)||void 0===n?void 0:n.generateStyle,h=null===(r=t.imageOptions)||void 0===r?void 0:r.stylePreset,m="icon"===e.tagName.toLowerCase()||"icon"===e.getAttribute("type"),g="web"==e.getAttribute("provider")?"web":"aiGenerated",x=(null===(o=t.imageOptions)||void 0===o?void 0:o.provider)=="auto"?g:null===(l=t.imageOptions)||void 0===l?void 0:l.provider,f=(0,a.eG)({query:u,provider:m?"fontawesome":x||"web",license:null===(d=t.imageOptions)||void 0===d?void 0:d.license,model:null===(c=t.imageOptions)||void 0===c?void 0:c.model,stylePrompt:p,stylePreset:h}),v=t.loadImages?await (0,a.ap)({loadImageId:f.loadImageId,loadImageParams:f.loadImageParams,context:{workspaceId:s}}):{};e.setAttribute(i.A,JSON.stringify({...f,...v}))});await Promise.all(d);let c=(0,o.a)().filter(e=>e.imageSlot);return(0,r.h)(n,c.map(e=>e.htmlTag).join(", ")).forEach(h),n.body.innerHTML}catch(t){return console.error("Error transforming AI HTML",t),e}},c=async e=>{try{let t=new DOMParser().parseFromString(e,"text/html");return(0,r.h)(t,s).map(e=>{let t=e.getAttribute("data-image")?"data-image":i.A,n=e.getAttribute(t);if(!n)throw Error("Expected all images to have parsed attributes");let r=(0,a.P5)(n);e.setAttribute(t,r)}),t.body.innerHTML}catch(t){return console.error("Error transforming AI HTML",t),e}},u=e=>{let t=(0,o.a)().filter(e=>"image"!==e.imageType);e.querySelectorAll(t.map(e=>e.htmlTag).join(", ")).forEach(e=>{e.querySelectorAll('img:not([type="icon"])').forEach(e=>{e.remove()})})},p=e=>{let t=e.getElementsByTagName("*");for(let e=0;e<t.length;e++){let n=t[e],i=n.style.textAlign;n.removeAttribute("style"),i&&(n.style.textAlign=i)}},h=e=>{(0,r.h)(e,"div > img:first-child, div > icon").forEach(e=>{let t=e.parentElement;if(!t)return;let n=JSON.parse(e.getAttribute(i.A)||"null");n&&t.setAttribute("data-image",JSON.stringify(n));let a=e.getAttribute("bookmark");a&&t.setAttribute("image-bookmark",a);let r=e.getAttribute("src");r&&t.setAttribute("data-image",JSON.stringify({src:r,source:"image.custom"})),e.remove()})},m=e=>{e.querySelectorAll("section").forEach(e=>{if(!e.querySelector("div.body"))return;let t=e.querySelector(":scope > img:not(.accent-image)");t&&t.classList.add("accent-image")})},g=e=>{try{let t=e.getAttribute(i.A);return JSON.parse(t||"")}catch(t){return console.error("[Image] Error parsing ".concat(i.A," attrs"),e,t),!1}}},71797:(e,t,n)=>{"use strict";n.d(t,{Q:()=>S});var i=n(31085),a=n(18588),r=n(59742),o=n(97482),l=n(34363),s=n(25420),d=n(65446),c=n(18658),u=n(61778),p=n(49547),h=n(22218),m=n(90290),g=n(69648),x=n(82680),f=n(74727),v=n(80853),b=n(9104),y=n(95640),w=n(14041),j=n(24460),k=n(18405),C=n(39286);let S=e=>{let{isAdminView:t=!1,isFullDoc:n,isSite:S,onClose:A,startTranslation:z}=e,[I]=(0,j.L)(),[R,E]=(0,w.useState)(I);return(0,i.jsx)(b.L8,{isDark:!1,children:(0,i.jsxs)(a.aF,{isOpen:!0,onClose:A,children:[(0,i.jsx)(r.m,{}),(0,i.jsxs)(o.$,{children:[(0,i.jsx)(l.r,{children:(0,i.jsx)(s.s,{alignItems:"center",mr:8,children:S?(0,i.jsx)(y.x6,{id:"56Urwv"}):n?(0,i.jsx)(y.x6,{id:"e2vVXR",values:{GAMMA_ARTIFACT_PROPER_NOUN:C.TP}}):(0,i.jsx)(y.x6,{id:"DLQ7Yc"})})}),(0,i.jsx)(d.s,{}),(0,i.jsxs)(c.c,{children:[(0,i.jsx)(u.E,{mb:4,children:S?(0,i.jsx)(y.x6,{id:"dZwNdR"}):n?(0,i.jsx)(y.x6,{id:"6YnROT",values:{GAMMA_ARTIFACT_PROPER_NOUN:C.TP}}):(0,i.jsx)(y.x6,{id:"WQFlqR"})}),(0,i.jsxs)(p.MJ,{children:[(0,i.jsx)(h.l,{children:(0,i.jsx)(u.E,{fontSize:"14px",children:(0,i.jsx)(y.x6,{id:"3LIgcv"})})}),(0,i.jsx)(j.j,{buttonProps:{variant:"plain",justifyContent:"flex-start",textAlign:"left",width:"100%"},locale:R,setLocale:e=>{E((0,k.xt)(e))}})]}),t&&(0,i.jsx)(s.s,{mt:4,children:(0,i.jsxs)(m.F,{status:"warning",children:[(0,i.jsx)(g._,{}),"You're using the translation feature as an admin in the PUBLIC_STATIC editor. Translations made here will not be persisted to the database and are intended for admin review process only."]})})]}),(0,i.jsx)(x.j,{children:(0,i.jsxs)(f.e,{children:[(0,i.jsx)(v.$,{variant:"ghost",colorScheme:"gray",onClick:A,color:t?{color:"orange.500"}:void 0,_hover:t?{bg:"orange.100"}:void 0,children:(0,i.jsx)(y.x6,{id:"dEgA5A"})}),(0,i.jsx)(v.$,{variant:"solid",bg:t?"orange.500":void 0,_hover:{bg:t?"orange.700":void 0},onClick:()=>z(R),children:(0,i.jsx)(y.x6,{id:"pi8x/S"})})]})})]})]})})}},33630:(e,t,n)=>{"use strict";n.d(t,{R:()=>i});let i=new(n(36832)).b},68228:(e,t,n)=>{"use strict";n.d(t,{R:()=>i});let i=new(n(36832)).b},96742:(e,t,n)=>{"use strict";n.d(t,{F:()=>b,s:()=>v});var i=n(12327),a=n(46108),r=n.n(a),o=n(99742),l=n(14041),s=n(24038),d=n(83190),c=n(57450),u=n(63587),p=n(87064),h=n(33587),m=n(32899),g=n(64225),x=n(65208),f=n(45214);let v="Translate this to Spanish please",b=e=>{let{editor:t}=e,n=(0,g.jL)();return(0,l.useCallback)(async e=>{let{doc:a,cardId:o,message:l}=e;if(!t)return;let s={};a.descendants(e=>{if("card"===e.type.name){let n=e.attrs.id;if(o!==n)return!1;let i=(0,u.K)(t,e.content);return s[n]={html:i,node:e},!1}return!0});let d=Object.values(s).map(e=>{let{node:t}=e;return{cardId:o,variant:{label:i.Ru._({id:"HxF6Fk"}),card:r()(t.toJSON()),id:"original"},autoselect:!0}});n((0,f.uw)(d)),Object.values(s).forEach(async e=>{let{node:i,html:a}=e,r=await y({editor:t,html:a,node:i,message:l});n((0,f.uw)([{cardId:o,variant:r,autoselect:!0}]))})},[n,t])},y=async e=>{let{html:t,node:n,message:a,editor:r}=e,l=(0,p.$F)(),u=d.i.prepare({variables:{html:t,message:a}}),g=await (0,c.U)(u,l,{timeout:m.of.get("aiRequestTimeouts").suggestContent}),{suggestion:f}=(0,s.z7)(g),{content:v}=(0,x.S)(await (0,h.eY)(f,{loadImages:!0}),r.schema),b={...n.toJSON(),content:v.toJSON()};return{id:(0,o.Ak)(5),label:i.Ru._({id:"nyQWMb"}),card:b}}},24460:(e,t,n)=>{"use strict";n.d(t,{L:()=>b,j:()=>y});var i=n(31085),a=n(63341),r=n(18528),o=n(80853),l=n(40173),s=n(72821),d=n(48310),c=n(33473),u=n(20501),p=n(3040),h=n(24221),m=n(12327),g=n(14041),x=n(18405),f=n(86724),v=n(14691);let b=()=>{let e=(0,g.useMemo)(()=>{var e;let t=navigator.language.toLowerCase(),n=t.split("-")[0],i=null!==(e=x.ZD.find(e=>e.key===t))&&void 0!==e?e:x.ZD.find(e=>e.key===n);return null==i?void 0:i.key},[]),[t,n]=(0,f.M)(v.E.generateLanguage,null!=e?e:"en");return[(0,g.useMemo)(()=>{var e;return null!==(e=x.ZD.find(e=>e.key===t))&&void 0!==e?e:x.ZD[0]},[t]),n]},y=(0,g.memo)(e=>{let{locale:t,setLocale:n,buttonProps:f}=e,[v,b]=(0,g.useState)([]);(0,g.useEffect)(()=>{b(e=>{if(x.ZD.find(e=>e.key===t.key))return e;let n=[...e];return n.find(e=>e.key===t.key)||n.push(t),n})},[t.key]);let y=(0,g.useMemo)(()=>[...v,...x.$b],[v]);return(0,i.jsxs)(a.W,{children:[(0,i.jsx)(r.I,{as:o.$,size:"sm",boxShadow:"sm",variant:"ghost",rightIcon:(0,i.jsx)(h.g,{size:"xs",icon:u.Jt$}),leftIcon:(0,i.jsx)(h.g,{size:"xs",icon:p.mh}),minW:"150px",...f,children:t.displayName}),(0,i.jsx)(l.Z,{children:(0,i.jsx)(s.c,{minWidth:"240px",maxH:"290px",overflowY:"auto",overflowX:"hidden",zIndex:"tooltip",children:(0,i.jsx)(d.i,{value:t.key,title:m.Ru._({id:"vXIe7J"}),type:"radio",onChange:e=>{n(e)},children:y.map(e=>(0,i.jsx)(c.k,{value:e.key,children:e.displayName},e.key))})})})]})});y.displayName="AILocalePicker"},18405:(e,t,n)=>{"use strict";n.d(t,{$b:()=>h,ZD:()=>l,xt:()=>c});var i=n(40074),a=n.n(i),r=n(42948),o=n(1892);let l=[{key:"en",englishName:"English (US)",displayName:"English (US)"},{key:"en-gb",englishName:"English (UK)",displayName:"English (UK)"},{key:"en-in",englishName:"English (India)",displayName:"English (India)"},{key:"es",englishName:"Spanish",displayName:"Espa\xf1ol"},{key:"es-es",englishName:"Spanish (Spain)",displayName:"Espa\xf1ol (Espa\xf1a)"},{key:"es-mx",englishName:"Spanish (Mexico)",displayName:"Espa\xf1ol (M\xe9xico)"},{key:"es-419",englishName:"Spanish (Latin America)",displayName:"Espa\xf1ol (Latinoam\xe9rica)"},{key:"ca",englishName:"Catalan",displayName:"Catal\xe0"},{key:"fr",englishName:"French",displayName:"Fran\xe7ais"},{key:"zh-cn",englishName:"Simplified Chinese",displayName:""},{key:"zh-tw",englishName:"Traditional Chinese",displayName:""},{key:"ko",englishName:"Korean",displayName:""},{key:"ja",englishName:"Japanese (/ style)",displayName:" (/)"},{key:"ja-da",englishName:"Japanese (/ style)",displayName:" (/)"},{key:"pt-br",englishName:"Portuguese (Brazil)",displayName:"Portugu\xeas (Brasil)"},{key:"pt-pt",englishName:"Portuguese (Portugal)",displayName:"Portugu\xeas (Portugal)"},{key:"de",englishName:"German",displayName:"Deutsch"},{key:"it",englishName:"Italian",displayName:"Italiano"},{key:"ru",englishName:"Russian",displayName:""},{key:"pl",englishName:"Polish",displayName:"Polski"},{key:"uk",englishName:"Ukrainian",displayName:""},{key:"ro",englishName:"Romanian",displayName:"Rom\xe2n"},{key:"hu",englishName:"Hungarian",displayName:"Magyar"},{key:"cs",englishName:"Czech",displayName:"etina"},{key:"el",englishName:"Greek",displayName:""},{key:"tr",englishName:"Turkish",displayName:"T\xfcrk\xe7e"},{key:"ar",englishName:"Arabic",displayName:""},{key:"ar-sa",englishName:"Arabic (Saudi Arabia)",displayName:" ()"},{key:"he",englishName:"Hebrew",displayName:""},{key:"fa",englishName:"Persian",displayName:""},{key:"nl",englishName:"Dutch",displayName:"Nederlands"},{key:"sv",englishName:"Swedish",displayName:"Svenska"},{key:"da",englishName:"Danish",displayName:"Dansk"},{key:"nb",englishName:"Norwegian",displayName:"Norsk"},{key:"fi",englishName:"Finnish",displayName:"Suomi"},{key:"id",englishName:"Indonesian",displayName:"Bahasa Indonesia"},{key:"vi",englishName:"Vietnamese",displayName:"Ting Vit"},{key:"hi",englishName:"Hindi",displayName:""},{key:"gu",englishName:"Gujarati",displayName:""},{key:"mr",englishName:"Marathi",displayName:""},{key:"te",englishName:"Telugu",displayName:""},{key:"bn",englishName:"Bengali",displayName:""},{key:"ta",englishName:"Tamil",displayName:""},{key:"ur",englishName:"Urdu",displayName:""},{key:"kn",englishName:"Kannada",displayName:""},{key:"ml",englishName:"Malayalam",displayName:""},{key:"th",englishName:"Thai",displayName:""},{key:"sr",englishName:"Serbian",displayName:""},{key:"hr",englishName:"Croatian",displayName:"Hrvatski"},{key:"sq",englishName:"Albanian",displayName:"Shqip"},{key:"bg",englishName:"Bulgarian",displayName:""},{key:"sl",englishName:"Slovenian",displayName:"Slovenina"},{key:"bs",englishName:"Bosnian",displayName:"Bosanski"},{key:"mk",englishName:"Macedonian",displayName:""},{key:"sw",englishName:"Swahili",displayName:"Kiswahili"},{key:"ha",englishName:"Hausa",displayName:"Hausa"},{key:"yo",englishName:"Yoruba",displayName:"Yor\xf9b\xe1"},{key:"tl",englishName:"Tagalog",displayName:"Tagalog"},{key:"ms",englishName:"Malay",displayName:"Bahasa Melayu"},{key:"kk",englishName:"Kazakh",displayName:" "},{key:"uz",englishName:"Uzbek",displayName:"O'zbek tili"},{key:"af",englishName:"Afrikaans",displayName:"Afrikaans"},{key:"lv",englishName:"Latvian",displayName:"Latvieu"},{key:"lt",englishName:"Lithuanian",displayName:"Lietuvi"},{key:"et",englishName:"Estonian",displayName:"Eesti"},{key:"is",englishName:"Icelandic",displayName:"\xcdslenska"},{key:"cy",englishName:"Welsh",displayName:"Cymraeg"}],s=e=>{let t=null==e?void 0:e.toLowerCase();return l.find(e=>e.key.toLowerCase()===t)||null},d=e=>{let t=s(e);if(t)return t;let n=r.tF[e],i=n&&s(n);if(i)return i;let[a]=e?e.toLowerCase().split("-"):[];return a&&s(a)||null},c=e=>{let t=d(e);if(t)return t;let n=p(e);return n?n:d((0,o.J)())||u},u={key:"en",englishName:"English (US)",displayName:"English (US)"},p=e=>{let t=(0,o.J)();try{let n=new Intl.DisplayNames([t],{type:"language",fallback:"none"}),i=new Intl.DisplayNames(["en"],{type:"language",fallback:"none"}).of(e),a=n.of(e);if(!i||!a)return null;return{key:e.toLowerCase(),englishName:i,displayName:a}}catch(e){return null}},h=a()(l,e=>e.displayName)},19893:(e,t,n)=>{"use strict";n.d(t,{jI:()=>S,h6:()=>C.h6,tr:()=>L});var i=n(31085),a=n(32202),r=n(2600),o=n(62313),l=n(2219),s=n(61778),d=n(35687),c=n(80853),u=n(3706),p=n(80532),h=n(95370),m=n(20501),g=n(3040),x=n(24221),f=n(95640),v=n(12327),b=n(90088),y=n(92447),w=n(60514),j=n(39286),k=n(57882),C=n(55278);let S=e=>{var t,n,p;let{accessLink:S,doc:z,refetchFn:I,...R}=e,E=(0,a.d)(),{refetch:L}=(0,k.ur)(),_=I||L,M=e=>{let{title:t,description:n}=w.m[e]||{title:(0,i.jsx)(f.x6,{id:"U7nnQt"}),description:e};E.isActive(e)||E({title:t,description:n,position:"top",id:e,status:"error",isClosable:!0,duration:null})},N=null!==(n=null==S?void 0:S.permission)&&void 0!==n?n:"view",T={manage:(0,i.jsx)(f.x6,{id:"C11Xkl",values:{GAMMA_ARTIFACT_PROPER_NOUN:j.TP}}),edit:(0,i.jsx)(f.x6,{id:"C11Xkl",values:{GAMMA_ARTIFACT_PROPER_NOUN:j.TP}}),comment:(0,i.jsx)(f.x6,{id:"gu6c+c",values:{GAMMA_ARTIFACT_PROPER_NOUN:j.TP}}),view:(0,i.jsx)(f.x6,{id:"LoR9yH",values:{GAMMA_ARTIFACT_PROPER_NOUN:j.TP}})}[N],P={manage:(0,i.jsx)(f.x6,{id:"MEeXaP"}),edit:(0,i.jsx)(f.x6,{id:"MEeXaP"}),comment:(0,i.jsx)(f.x6,{id:"dx3Kfr"}),view:(0,i.jsx)(f.x6,{id:"R2ZEYO"})}[N],O={manage:{icon:g.zLW,colorScheme:"cyan"},edit:{icon:g.zLW,colorScheme:"cyan"},comment:{icon:g.DN2,colorScheme:"yellow"},view:{icon:g.ao0,colorScheme:"green"}},D=null!==(p=null==z?void 0:null===(t=z.editors)||void 0===t?void 0:t.map(e=>e.user.displayName))&&void 0!==p?p:[],F=(()=>{switch(N){case"manage":case"edit":switch(D.length){case 0:return(0,i.jsx)(f.x6,{id:"bspMVx",values:{GAMMA_ARTIFACT_PROPER_NOUN:j.TP},components:{0:(0,i.jsx)("span",{role:"img","aria-label":v.Ru._({id:"JGFG6q"})}),1:(0,i.jsx)("strong",{})}});case 1:return(0,i.jsx)(f.x6,{id:"w49thS",values:{GAMMA_ARTIFACT_PROPER_NOUN:j.TP,0:D[0]},components:{0:(0,i.jsx)("span",{role:"img","aria-label":v.Ru._({id:"JGFG6q"})}),1:(0,i.jsx)("strong",{})}});case 2:return(0,i.jsx)(f.x6,{id:"Tz4Wi7",values:{0:D[0],1:D[1]},components:{0:(0,i.jsx)("span",{role:"img","aria-label":v.Ru._({id:"7Lrnj6"})}),1:(0,i.jsx)("strong",{}),2:(0,i.jsx)("strong",{})}});default:return(0,i.jsx)(f.x6,{id:"VhIJ/j",values:{0:D[0],1:D.length-1},components:{0:(0,i.jsx)("span",{role:"img","aria-label":v.Ru._({id:"7Lrnj6"})}),1:(0,i.jsx)("strong",{})}})}case"comment":return(0,i.jsx)(f.x6,{id:"vIOI7i",components:{0:(0,i.jsx)("span",{role:"img","aria-label":v.Ru._({id:"OoNfwA"})}),1:(0,i.jsx)("strong",{}),2:(0,i.jsx)("strong",{})}});default:return(0,i.jsx)(f.x6,{id:"k/HcwJ",values:{GAMMA_ARTIFACT_PROPER_NOUN:j.TP},components:{0:(0,i.jsx)("strong",{})}})}})(),H=async()=>{_&&(await _(),(0,C.Us)()),E.isActive("login-complete")||E({title:(0,i.jsx)(f.x6,{id:"yFvQAN"}),description:T,position:"top",id:"login-complete",status:"success",isClosable:!0,duration:5e3})};return(0,i.jsxs)(r.T,{align:"stretch",...R,children:[(0,i.jsxs)(o.z,{spacing:4,mr:6,children:[(0,i.jsx)(A,{icon:(0,i.jsx)(x.g,{icon:O[N].icon}),colorScheme:O[N].colorScheme}),(0,i.jsx)(l.D,{size:"sm",children:P})]}),(0,i.jsx)(s.E,{fontSize:"sm",children:F}),(0,i.jsxs)(d.B,{children:[(0,i.jsx)(c.$,{variant:"solid",leftIcon:(0,i.jsx)(x.g,{icon:h.FjH}),size:"md",onClick:()=>{(0,y.gG)({type:y.Xh.DOC_ACCESS_LINK,params:{docId:null==z?void 0:z.id,shareToken:S.token},errorCallback:M,doneCallback:H})},children:(0,i.jsx)(f.x6,{id:"oZyG4C"})}),(0,i.jsx)(c.$,{variant:"plain",as:u.N,target:"_blank",leftIcon:(0,i.jsx)(x.g,{icon:m.y_8}),href:"/signup",children:(0,i.jsx)(f.x6,{id:"yrlCvg"})}),(0,i.jsx)(s.E,{fontSize:"xs",color:"gray.600",children:(0,i.jsx)(f.x6,{id:"oXChp6",values:{GAMMA_PROPER_NOUN:j.On},components:{0:(0,i.jsx)(u.N,{href:b.er,isExternal:!0,fontWeight:"bold"}),1:(0,i.jsx)(u.N,{href:b.WO,isExternal:!0,fontWeight:"bold"})}})})]})]})},A=e=>{let{icon:t,colorScheme:n}=e;return(0,i.jsxs)(p.jl,{size:10,bg:"linear-gradient(to bottom, var(--chakra-colors-".concat(n,"-200), var(--chakra-colors-").concat(n,"-300))"),position:"relative",children:[(0,i.jsx)(p.az,{color:"".concat(n,".600"),display:"block",mt:"0.5",textAlign:"center",children:t}),(0,i.jsx)(p.jl,{size:5,position:"absolute",bottom:-1,right:-1,color:"".concat(n,".800"),bg:"".concat(n,".100"),boxShadow:"base",fontSize:"xs",children:(0,i.jsx)(x.g,{icon:g.QLR})})]})};var z=n(94259),I=n(14041),R=n(68335);let E=e=>{let{onClose:t,doc:n,...a}=e;return(0,i.jsxs)(p.az,{bg:"white",border:"0.5px solid var(--chakra-colors-gray-100)",borderRadius:"md",shadow:"md",maxWidth:"calc(".concat(R.HB,"px - 1rem)"),display:"column",p:4,position:"relative",children:[(0,i.jsx)(z.J,{size:"sm",onClick:t,position:"absolute",top:2,right:2}),(0,i.jsx)(S,{...a,doc:n,spacing:4})]})},L=(e,t)=>{let{isUserLoading:n,user:i,refetch:r}=(0,k.ur)(),o=(0,C.h6)(e,i),l=(0,a.d)(),s=(0,I.useRef)();(0,I.useEffect)(()=>{let a=t&&!i&&!n&&e&&o&&"view"!==o.permission;s.current&&l.close(s.current),a&&(s.current=l({position:"bottom-left",render:t=>{let{onClose:n}=t;return E({refetchFn:r,doc:e,accessLink:o,onClose:n})},isClosable:!0,duration:null}))},[r,i,n,o,l,e,t])}},92447:(e,t,n)=>{"use strict";n.d(t,{EB:()=>u,Xh:()=>c,gG:()=>h,lV:()=>s});var i=n(73893),a=n(74882),r=n(79430);let o=null,l=null;var s=function(e){return e.LOGIN_COMPLETE="loginComplete",e.LOGIN_FAILURE="loginFailure",e.SIGNUP_COMPLETE="signupComplete",e}({});let d=e=>{var t,n,i,r;let{event:o,errorCallback:l,redirectTo:s,doneCallback:d}=e,{data:c}=o;if("loginComplete"===c.type&&(0,a.v)({data:null==c?void 0:null===(t=c.payload)||void 0===t?void 0:t.data,redirectTo:s,doneCallback:d,shouldClientSideRedirect:!0,googleMethod:"POPUP"}),"signupComplete"===c.type&&(0,a.W)({data:null==c?void 0:null===(n=c.payload)||void 0===n?void 0:n.data,redirectTo:s,doneCallback:d,shouldClientSideRedirect:!0,googleMethod:"POPUP"}),"loginFailure"===c.type){let e=null==o?void 0:null===(r=o.data)||void 0===r?void 0:null===(i=r.payload)||void 0===i?void 0:i.code;if(!l){console.error("No error callback defined");return}if(!e){console.error("No code defined");return}l(e)}};var c=function(e){return e.ACCEPT_DOC_INVITATION="accept-doc-invitation",e.ACCEPT_WORKSPACE_INVITATION="accept-workspace-invitation",e.DOC_ACCESS_LINK="doc-access-link",e.JOIN_WITH_CODE="join-with-code",e.DEFAULT_LOGIN="login",e.SIGNUP="signup",e}({});let u={"accept-doc-invitation":"docInvitation","accept-workspace-invitation":"workspaceInvitation","doc-access-link":"docAccessLink","join-with-code":"joinLink",login:"signup",signup:"signup"},p=(e,t)=>{switch(e){case"join-with-code":{let{workspaceId:e,inviteCode:n,referredByUserId:a}=t,r=new URL("".concat(i.$.API_HOST||"https://gamma.app","/organizations/").concat(e,"/join/").concat(n));return a&&r.searchParams.set("referredByUserId",a),r.toString()}case"accept-doc-invitation":{let{docId:e,email:n,inviteCode:a}=t;return"".concat(i.$.API_HOST,"/invitations/docs/").concat(e,"/?inviteCode=").concat(a,"&email=").concat(n)}case"accept-workspace-invitation":{let{workspaceId:e,email:n,inviteCode:a}=t;return"".concat(i.$.API_HOST,"/invitations/workspaces/").concat(e,"?inviteCode=").concat(a,"&email=").concat(n)}case"doc-access-link":{let{docId:e,shareToken:n}=t;return"".concat(i.$.API_HOST,"/access-links/docs/").concat(e,"/?token=").concat(n)}case"signup":{let{inviteCode:e,referredByUserId:n,partnerStackClickId:a,partnerStackPartnerId:r}=t,o=new URL("".concat(i.$.API_HOST||"https://gamma.app","/signup"));return e&&o.searchParams.set("inviteCode",e),n&&o.searchParams.set("referredByUserId",n),a&&o.searchParams.set("partnerStackClickId",a),r&&o.searchParams.set("partnerStackPartnerId",r),o.toString()}default:return"".concat(i.$.API_HOST,"/login")}},h=e=>{let{type:t,params:n,errorCallback:i,redirectTo:a,doneCallback:s}=e,c=p(t,n),u="toolbar=no, menubar=no, width=600, height=700, top=100, left=100";null===o||o.closed?o=window.open(c,t,u):l!==c?null!==(o=window.open(c,t,u))&&o.focus():o.focus(),(0,r.EM)().addEventListener("message",e=>{d({event:e,errorCallback:i,redirectTo:a,doneCallback:s})}),l=c}},22791:(e,t,n)=>{"use strict";n.d(t,{v:()=>e_});var i=n(31085),a=n(18588),r=n(59742),o=n(97482),l=n(34363),s=n(35687),d=n(2219),c=n(27670),u=n(61778),p=n(70323),h=n(65446),m=n(18658),g=n(92515),x=n(57812),f=n(19727),v=n(80532),b=n(62313),y=n(71792),w=n(96502),j=n(82680),k=n(3040),C=n(24221),S=n(9104),A=n(95640),z=n(14041),I=n(33854),R=n(90290),E=n(80853),L=n(3706);let _=e=>{let{title:t=(0,i.jsx)(A.x6,{id:"uKp64B"}),description:n=(0,i.jsx)(A.x6,{id:"iUGE+t"}),buttonLabel:a=(0,i.jsx)(A.x6,{id:"u5hSeG"}),url:r}=e;return(0,i.jsx)(R.F,{bg:"purple.100",children:(0,i.jsxs)(b.z,{w:"100%",spacing:"4",children:[(0,i.jsxs)(s.B,{alignItems:"center",spacing:"0",children:[(0,i.jsx)(v.az,{color:"purple.500",children:(0,i.jsx)(C.g,{icon:k.rIc,size:"lg"})}),(0,i.jsx)(u.E,{fontWeight:"bold",fontSize:"xs",color:"purple.600",children:(0,i.jsx)(A.x6,{id:"ICUIAA"})})]}),(0,i.jsxs)(s.B,{spacing:"0",w:"100%",children:[(0,i.jsx)(u.E,{fontWeight:"bold",fontSize:"sm",children:t}),(0,i.jsx)(u.E,{fontSize:"xs",children:n})]}),(0,i.jsx)(E.$,{as:L.N,href:r,target:"_blank",size:"sm",variant:"plain",flexShrink:0,children:a})]})})};var M=n(64225),N=n(5933),T=n(92667),P=n(86136),O=n(76598),D=n(76146),F=n(32202),H=n(63341),W=n(18528),B=n(9021),V=n(72821),G=n(48637),U=n(33683),K=n(20501),q=n(67965),J=n(12327);let $=e=>{let{onDelete:t,isDeleteDisabled:n,editor:a}=e,r=(0,F.d)(),o=(0,z.useCallback)(()=>{t();let e=r({title:(0,i.jsxs)(b.z,{children:[(0,i.jsx)(u.E,{children:(0,i.jsx)(A.x6,{id:"i+ZZMW"})}),(0,i.jsx)(E.$,{variant:"link",textDecoration:"underline",as:"span",size:"sm",cursor:"pointer",color:"inherit",onClick:()=>{(0,q.tN)(a.state),r.close(e)},children:(0,i.jsx)(A.x6,{id:"IiqYd9"})})]}),status:"info",duration:3e3,position:"top"})},[a,t,r]);return(0,i.jsxs)(H.W,{children:[(0,i.jsx)(W.I,{as:B.K,icon:(0,i.jsx)(C.g,{icon:k.BH7}),"aria-label":J.Ru._({id:"CQDm4Q"}),variant:"plain",size:"sm"}),(0,i.jsx)(V.c,{children:(0,i.jsx)(G.r,{title:J.Ru._({id:"ZYWBTf"}),children:(0,i.jsx)(U.D,{onClick:o,isDisabled:n,color:"red.500",icon:(0,i.jsx)(C.g,{fixedWidth:!0,icon:K.yLS}),children:(0,i.jsx)(A.x6,{id:"xN3Y87"})})})})]})};var Y=n(25420),Q=n(10628),X=n(10458),Z=n(39286),ee=n(64130);let et=e=>{let{label:t,children:n,labelProps:a}=e,r=(0,ee.fW)();return(0,i.jsxs)(s.B,{position:"absolute",top:"50%",insetStart:"50%",transform:"translate(".concat(r?"50%":"-50%",",-50%)"),alignItems:"center",w:"100%",px:16,children:[(0,i.jsx)(u.E,{fontSize:"3xl",textAlign:"center",color:"gray.400",...a,children:t}),n]})},en=(0,z.memo)(e=>{let{onUpsellClick:t}=e;return(0,i.jsxs)(et,{label:(0,i.jsx)(A.x6,{id:"GRyKgN",values:{PRO_PROPER_NOUN:Z.Kc}}),labelProps:{color:"inherit"},children:[(0,i.jsx)(u.E,{textAlign:"center",mb:"2",children:(0,i.jsx)(A.x6,{id:"RryZ/g",values:{GAMMA_PRO_PROPER_NOUN:Z.Ol}})}),(0,i.jsx)(E.$,{variant:"solid",onClick:t,children:(0,i.jsx)(A.x6,{id:"cKQRnY",values:{PRO_PROPER_NOUN:Z.Kc}})})]})});en.displayName="CardMarginElementsUpsell";var ei=n(83292),ea=n(48310),er=n(33473),eo=n(81575),el=n(15428),es=n(20671),ed=n(31171),ec=n(18651),eu=n(37407),ep=n(14291),eh=n(74592),em=n(15750),eg=n(45591);function ex(){let e=(0,ei._)(["\n      0% { transform: rotate(9deg); background: var(--chakra-colors-trueblue-100); }\n      10% { transform: rotate(-8deg); }\n      20% { transform: rotate(7deg); }\n      30% { transform: rotate(-6deg); }\n      40% { transform: rotate(5deg); }\n      50% { transform: rotate(-4deg); background: var(--chakra-colors-trueblue-100); }\n      60% { transform: rotate(3deg); }\n      70% { transform: rotate(-2deg); }\n      80% { transform: rotate(1deg); }\n      90% { transform: rotate(0deg); }\n      100% { transform: rotate(0deg); background: var(--chakra-colors-blackAlpha-50); }\n   "]);return ex=function(){return e},e}let ef={text:{key:"text",icon:K.tiU,name:(0,i.jsx)(A.x6,{id:"xeiujy"}),deleteLabel:(0,i.jsx)(A.x6,{id:"JxxCHL"}),deleteToastLabel:(0,i.jsx)(A.x6,{id:"AwHPSN"})},cardNumbers:{key:"cardNumbers",icon:K.qzJ,name:(0,i.jsx)(A.x6,{id:"LMa4Y8"}),deleteLabel:(0,i.jsx)(A.x6,{id:"gVFDdv"}),deleteToastLabel:(0,i.jsx)(A.x6,{id:"aTqpEg"})},themeLogo:{key:"themeLogo",name:(0,i.jsx)(A.x6,{id:"zYGAMY"}),icon:K.fyG,deleteLabel:(0,i.jsx)(A.x6,{id:"cty1ii"}),deleteToastLabel:(0,i.jsx)(A.x6,{id:"sa/uRd"})}},ev=e=>{let{selectedType:t,onSelect:n,canAdd:a,showUpsell:r,onUpsellClick:o}=e;if(!t&&a)return(0,i.jsx)(G.r,{title:J.Ru._({id:"qmt9HO"}),textAlign:"start",children:Object.values(ef).map(e=>{let{key:t,icon:a,name:l}=e;return r?(0,i.jsx)(U.D,{value:t,onClick:o,icon:(0,i.jsx)(C.g,{icon:a,fixedWidth:!0}),bg:"trueblue.50",border:"1px solid white",_hover:{bg:"trueblue.50",borderColor:"trueblue.200"},_focus:{bg:"trueblue.50",borderColor:"trueblue.200"},mt:.5,children:(0,i.jsxs)(v.az,{as:"span",display:"inline-flex",gap:3,w:"100%",children:[(0,i.jsx)(v.az,{as:"span",flex:1,children:l}),(0,i.jsx)(ep.Ch,{canUseFeature:!1,productFeature:"card_margin_elements",alignSelf:"center"})]})},t):(0,i.jsx)(U.D,{value:t,onClick:()=>n(t),icon:(0,i.jsx)(C.g,{icon:a,fixedWidth:!0}),children:l},t)})});if(!t)return null;let l=(0,i.jsx)(G.r,{children:(0,i.jsx)(U.D,{onClick:()=>{n(t,!0)},color:"red.500",icon:(0,i.jsx)(C.g,{icon:K.yLS,fixedWidth:!0,fontSize:"sm"}),children:ef[t].deleteLabel})});return a?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ea.i,{title:J.Ru._({id:"Nb1WK7"}),textAlign:"start",value:t,type:"radio",children:Object.values(ef).map(e=>{let{key:t,icon:a,name:r}=e;return(0,i.jsxs)(er.k,{value:t,onClick:()=>{n(t)},children:[(0,i.jsx)(C.g,{icon:a,fixedWidth:!0}),(0,i.jsx)(v.az,{as:"span",ms:2,children:r})]},t)})}),(0,i.jsx)(eo.N,{}),l]}):l},eb=(0,el.i7)(ex()),ey=(0,z.memo)(e=>{let{selectedType:t,onSelect:n,shouldHighlight:a,canAdd:r,showUpsell:o,onUpsellClick:l}=e;return(0,i.jsxs)(H.W,{children:[t?(0,i.jsx)(W.I,{as:E.$,variant:"ghost",size:"sm",color:"black",px:"2",rightIcon:(0,i.jsx)(C.g,{icon:K.Jt$,transform:"shrink-6"}),children:ef[t].name}):(0,i.jsx)(S.Tz,{label:(0,i.jsx)(A.x6,{id:"qmt9HO"}),isDisabled:!r,placement:"top","aria-label":J.Ru._({id:"qmt9HO"}),children:(0,i.jsx)(W.I,{as:B.K,isDisabled:!r,size:"lg",variant:"ghost",fontSize:"2xl",transitionProperty:"all",transitionDuration:"normal",color:"gray.900",bg:"blackAlpha.50",animation:a?"".concat(eb," 1.5s ease-in-out"):void 0,_hover:{bg:"trueblue.100",color:"trueblue.500"},icon:(0,i.jsx)(C.g,{icon:K.QLR})})}),(0,i.jsx)(V.c,{children:(0,i.jsx)(ev,{selectedType:t,onSelect:n,canAdd:r,showUpsell:o,onUpsellClick:l})})]})});ey.displayName="CardElementMenu";let ew=(0,z.memo)(e=>{let{position:t,element:n,onUpdate:a,shouldHideFirstCardNumber:r,shouldHighlight:o,cardIndex:l,isObscured:d,isReadonly:c,isAddDisabled:p,showUpsell:h,onUpsellClick:m}=e,g=(0,F.d)(),x=(0,ee.fW)(),{logoSrc:f}=(0,em.G)(),y=null==n?void 0:n.type,w="text"===y,j="cardNumbers"===y,k=(0,z.useRef)(null),C=(0,M.GV)(N.SJ),[S,I]=(0,z.useState)(w&&(null==n?void 0:n.content)||""),R=(0,z.useCallback)(e=>{a({type:"text",content:e})},[a]),E=(0,eg.lW)(R,300),L=(0,z.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];a({type:e},t),t&&g({title:ef[e].deleteToastLabel,status:"info",duration:2e3,position:"top"})},[a,g]),{flex:_,text:T}=(0,D.o)(t),P=(0,z.useCallback)(()=>{C.workspaceId?(0,eh.vd)({theme:C}):(0,eh.L6)({theme:C})},[C]);return(0,i.jsx)(v.az,{flex:1,children:(0,i.jsxs)(s.B,{spacing:1,alignItems:_,filter:d?"grayscale(1) blur(2px)":void 0,opacity:d?.5:1,pointerEvents:d?"none":void 0,userSelect:d?"none":void 0,children:[!c&&(0,i.jsx)(v.az,{dir:x?"rtl":void 0,children:(0,i.jsx)(ey,{selectedType:y||null,onSelect:L,shouldHighlight:o,canAdd:!p,showUpsell:h,onUpsellClick:m})}),c&&(w||j)&&(0,i.jsx)(u.E,{dir:x?"rtl":void 0,fontSize:"sm",noOfLines:1,children:w?(null==n?void 0:n.content)||"":j&&"number"==typeof l?"".concat(l+1):""}),!c&&w&&(0,i.jsx)(es.p,{dir:x?"rtl":void 0,ref:k,size:"sm",borderRadius:"md",bg:"white",fontSize:"sm",placeholder:J.Ru._({id:"6MDj8K"}),value:S,maxLength:75,isDisabled:h,onKeyUp:e=>{if(!h&&"Enter"===e.key){var t;null===(t=k.current)||void 0===t||t.blur()}},onChange:e=>{if(h)return;let t=e.target.value;I(t),E(t)},textAlign:T}),!c&&j&&(0,i.jsx)(b.z,{px:3,h:8,w:"100%",fontSize:"sm",cursor:h?"not-allowed":void 0,borderRadius:"md",bg:"blackAlpha.50",color:"gray.600",justifyContent:_,children:(0,i.jsx)(u.E,{dir:x?"rtl":void 0,children:r?(0,i.jsx)(A.x6,{id:"fUJacZ",components:{0:(0,i.jsx)(ed.B.span,{opacity:"0.5"})}}):(0,i.jsx)(A.x6,{id:"AaU8Ju"})})}),"themeLogo"===y&&(0,i.jsx)(Y.s,{p:"1",justifyContent:_,dir:x?"rtl":void 0,children:f?(0,i.jsx)(ec._,{h:6,src:f,alt:J.Ru._({id:"iG7KNr"})}):(0,i.jsx)(eu.V,{onClick:h||c?void 0:P})})]})})});ew.displayName="EditableCardMarginElement";let ej=(0,z.memo)(e=>{let{visibilityLabel:t,isHidden:n,showToggleVisibilityButton:a,onToggleVisibility:r}=e;return(0,i.jsx)(et,{label:t,children:a&&(0,i.jsx)(S.Tz,{label:n?(0,i.jsx)(A.x6,{id:"G/jP6i"}):(0,i.jsx)(A.x6,{id:"Tx4/S/"}),placement:"top",children:(0,i.jsx)(B.K,{variant:"plain",size:"lg",fontSize:"2xl",color:n?"red.600":"gray.600",icon:n?(0,i.jsx)(C.g,{icon:k.k6j}):(0,i.jsx)(C.g,{icon:k.pS3}),_hover:{color:"default"},"aria-label":n?J.Ru._({id:"WY1TVs"}):J.Ru._({id:"xNpXQs"}),onClick:r})})})});ej.displayName="MarginElementsVisibilityControls";let ek=(0,z.memo)(e=>{let{isSingleCardView:t,isHiddenFirst:n,isHiddenLast:a,hasMarginElements:r,isHiddenOnCard:o}=e;return t?r?n?(0,i.jsx)(A.x6,{id:"9weBGZ"}):a?(0,i.jsx)(A.x6,{id:"Qxmjys"}):o?(0,i.jsx)(A.x6,{id:"+gYV7s"}):(0,i.jsx)(A.x6,{id:"079GgA"}):(0,i.jsx)(A.x6,{id:"tb4e+E"}):(0,i.jsx)(A.x6,{id:"4upC5z"})});ek.displayName="VisibilityLabel";let eC=(e,t)=>{if(!e)return;let n=t.indexOf(e);return -1===n?void 0:n},eS=e=>{let{editor:t,highlightPosition:n,cardNode:a,getPos:r,showUpsell:o}=e,l=(0,X.st)(),{cardMarginSettings:s}=(0,M.GV)(N.Uu),d=null==a?void 0:a.attrs,c=!!a,u=!(0,D.Nk)(s),{hideFromFirst:p}=s,{isFirstCardAndHidden:h,isLastCardAndHidden:m,isHiddenByCardSettings:g}=(0,O.j)(d),x=c&&(h||m||g),f=(0,M.GV)(N.uF),v=eC(null==d?void 0:d.id,f),b=(0,z.useCallback)(e=>{t.commands.updateDocumentSettings({cardMarginSettings:{...s,...e}})},[t,s]),y=(0,z.useCallback)(e=>function(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=s[e],a=!!((null==i?void 0:i.type)&&t.type&&t.type!==i.type);b({[e]:n?void 0:{...!a&&(i||{}),...t}}),null==l||l.track(X.VV.CARD_MARGIN_SETTINGS_UPDATED,{elementType:t.type,position:e,action:n?"delete":a?"replace":"add"})},[l,s,b]),w=!o&&c&&!h&&!m&&u,j=(0,z.useCallback)(()=>{if(a&&r)try{t.commands.updateNestedAttributesAtPos(r(),{cardMarginSettings:{...a.attrs.cardMarginSettings,isHidden:!a.attrs.cardMarginSettings.isHidden}})}catch(e){console.error("(caught) [CardMarginsBuilder](updateVisibility): could not update card",e)}},[a,t,r]),{openUpsellModal:k}=(0,Q.I)(),C=(0,z.useCallback)(()=>{k({segmentEvent:X.VV.GAMMA_PRO_UPSELL_CARD_MARGINS})},[k]);return(0,i.jsxs)(Y.s,{p:4,minH:"320px",bg:"gray.100",flexDirection:"column",justifyContent:"space-between",position:"relative",borderRadius:"md",...o&&!c&&{_before:{content:'""',position:"absolute",inset:0,borderRadius:"md",border:"2px solid transparent",background:"var(--chakra-colors-gradient-brand-bg)",mask:"linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0)",maskComposite:"subtract",opacity:.7,pointerEvents:"none"}},children:[(0,i.jsx)(Y.s,{justifyContent:"space-between",gap:6,alignItems:"flex-start",dir:"ltr",children:["topLeft","topCenter","topRight"].map(e=>(0,i.jsx)(ew,{position:e,onUpdate:y(e),element:s[e],shouldHideFirstCardNumber:!!p,shouldHighlight:n===e,isReadonly:c,isObscured:x,cardIndex:v,showUpsell:o,onUpsellClick:C,isAddDisabled:o&&u},e))}),o&&!c?(0,i.jsx)(en,{onUpsellClick:C}):(0,i.jsx)(ej,{visibilityLabel:(0,i.jsx)(ek,{isSingleCardView:c,isHiddenFirst:h,isHiddenLast:m,hasMarginElements:u,isHiddenOnCard:g}),isHidden:g,showToggleVisibilityButton:w,onToggleVisibility:j}),(0,i.jsx)(Y.s,{justifyContent:"space-between",gap:6,alignItems:"flex-end",dir:"ltr",children:["bottomLeft","bottomCenter","bottomRight"].map(e=>(0,i.jsx)(ew,{position:e,onUpdate:y(e),element:s[e],shouldHideFirstCardNumber:!!p,shouldHighlight:n===e,isReadonly:c,isObscured:x,cardIndex:v,showUpsell:o,onUpsellClick:C,isAddDisabled:o&&u},e))})]})};var eA=n(19098),ez=n(64444),eI=n(93185),eR=n(97864),eE=n(88865);let eL=(0,z.memo)(e=>{let{hideFromFirst:t,hideFromLast:n,onUpdateSettings:a}=e;return(0,i.jsxs)(eA.A,{placement:"bottom-end",children:[(0,i.jsx)(ez.W,{children:(0,i.jsx)(E.$,{leftIcon:(0,i.jsx)(C.g,{icon:t||n?k.k6j:k.pS3}),rightIcon:(0,i.jsx)(C.g,{icon:K.Jt$,transform:"shrink-6"}),size:"sm",variant:"plain",children:t&&n?(0,i.jsx)(A.x6,{id:"80NdhM"}):t?(0,i.jsx)(A.x6,{id:"gidUuU"}):n?(0,i.jsx)(A.x6,{id:"vc1V76"}):(0,i.jsx)(A.x6,{id:"4upC5z"})})}),(0,i.jsx)(eI.h,{w:"fit=content",minW:"200px",children:(0,i.jsx)(eR.e,{p:3,children:(0,i.jsxs)(s.B,{children:[(0,i.jsx)(S._x,{mb:1,children:(0,i.jsx)(A.x6,{id:"lLeEP7"})}),(0,i.jsx)(eE.S,{isChecked:t,onChange:e=>{a({hideFromFirst:e.target.checked})},children:(0,i.jsx)(A.x6,{id:"1UzO8k"})}),(0,i.jsx)(eE.S,{isChecked:n,onChange:e=>{a({hideFromLast:e.target.checked})},children:(0,i.jsx)(A.x6,{id:"uGWhnt"})})]})})})]})});eL.displayName="DisplaySettingsPopover";let e_=(0,z.memo)(e=>{let{editor:t,isOpen:n,onClose:R,cardNode:E,getPos:L,highlightPosition:F}=e,[H,W]=(0,z.useState)(0),{areElementsCurrentlyHiddenBySettings:B}=(0,O.j)(null==E?void 0:E.attrs);(0,T.Vg)(()=>{n?B&&W(1):W(0)},[B,n],[n]);let V=(0,P.R)(),G=(0,I.u)("cardMarginElements"),{cardMarginSettings:U}=(0,M.GV)(N.Uu),{hideFromFirst:K,hideFromLast:q}=U,J=(0,D.Nk)(U),Y=!!E,Q=Y||V,X=(0,z.useMemo)(()=>.67>Math.random()?"https://meetgamma.canny.io/ideas/p/beta-feedback-card-headers-footers-coming-soon":"https://app.voicepanel.co/d/4teC4UY2uNsLBf",[]),Z=(0,z.useCallback)(e=>{t.commands.updateDocumentSettings({cardMarginSettings:{...U,...e}})},[t,U]),ee=(0,z.useCallback)(()=>{let e={...void 0!==K?{hideFromFirst:K}:void 0,...void 0!==q?{hideFromLast:q}:void 0};t.commands.updateDocumentSettings({cardMarginSettings:e})},[K,q,t]);return G?(0,i.jsx)(S.L8,{isDark:!1,children:(0,i.jsxs)(a.aF,{isOpen:!0,onClose:R,size:"2xl",blockScrollOnMount:!1,children:[(0,i.jsx)(r.m,{}),(0,i.jsxs)(o.$,{children:[(0,i.jsx)(l.r,{children:(0,i.jsxs)(s.B,{spacing:1,children:[(0,i.jsxs)(d.D,{size:"lg",children:[(0,i.jsx)(A.x6,{id:"JQFgkZ"}),(0,i.jsx)(c.E,{fontSize:"lg",letterSpacing:"initial",ms:2,children:(0,i.jsx)(A.x6,{id:"YBt9YP"})})]}),(0,i.jsx)(u.E,{fontSize:"md",fontWeight:500,letterSpacing:"normal",color:"gray.700",children:(0,i.jsx)(A.x6,{id:"F1uM5U"})})]})}),(0,i.jsx)(p.c,{}),(0,i.jsx)(h.s,{}),(0,i.jsx)(m.c,{pb:"6",pt:Q?4:6,children:(0,i.jsxs)(g.t,{variant:"soft-rounded",size:"sm",isLazy:!0,index:H,onChange:W,position:"relative",children:[(0,i.jsxs)(x.w,{position:"relative",sx:Q?{minH:8,mb:4}:void 0,children:[Y&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(f.o,{children:(0,i.jsx)(A.x6,{id:"4upC5z"})}),(0,i.jsxs)(f.o,{children:[(0,i.jsx)(u.E,{me:B?2:void 0,as:"span",children:(0,i.jsx)(A.x6,{id:"xkzndo"})}),B&&(0,i.jsx)(v.az,{color:"red.600",as:"span",children:(0,i.jsx)(C.g,{icon:k.k6j})})]})]}),0===H&&V&&(0,i.jsxs)(b.z,{position:"absolute",justifyContent:"flex-end",insetEnd:"0",top:"0",children:[(0,i.jsx)(eL,{hideFromFirst:K,hideFromLast:q,onUpdateSettings:Z}),(0,i.jsx)($,{onDelete:ee,isDeleteDisabled:J,editor:t})]})]}),(0,i.jsxs)(y.T,{children:[(0,i.jsx)(w.K,{p:0,children:(0,i.jsx)(eS,{editor:t,highlightPosition:F,showUpsell:!V})}),(0,i.jsx)(w.K,{p:0,children:(0,i.jsx)(eS,{editor:t,highlightPosition:F,cardNode:E,getPos:L,showUpsell:!V})})]})]})}),V&&(0,i.jsx)(j.j,{pt:"0",children:(0,i.jsx)(_,{url:X})})]})]})}):null});e_.displayName="CardMarginsModal"},89240:(e,t,n)=>{"use strict";n.d(t,{m:()=>o});var i=n(31085),a=n(20501),r=n(24221);let o=()=>(0,i.jsxs)("span",{className:"fa-layers fa-fw fa-sm",children:[(0,i.jsx)(r.g,{icon:a.adM,style:{top:"-1rem"}}),(0,i.jsx)(r.g,{icon:a.adM,style:{bottom:"-1rem"}}),(0,i.jsx)(r.g,{icon:a.Cpz})]})},6027:(e,t,n)=>{"use strict";n.d(t,{g:()=>r});var i=n(14041),a=n(90754);let r=()=>{let{isOpen:e,onClose:t,onOpen:n}=(0,a.E)({id:"card-margins-elements"}),[r,o]=(0,i.useState)();return{isCardMarginsModalOpen:e,onCloseCardMarginsModal:t,onOpenCardMarginsModal:n,positionToHighlight:r,setPositionToHighlight:o}}},37407:(e,t,n)=>{"use strict";n.d(t,{V:()=>u});var i=n(31085),a=n(62313),r=n(80853),o=n(61778),l=n(9104),s=n(95640),d=n(14041),c=n(64130);let u=(0,d.memo)(function(e){let{onClick:t}=e,n=(0,c.fW)(),d=(0,i.jsx)(s.x6,{id:"pQr8gu"}),u=(0,i.jsx)("span",{role:"img","aria-label":"warning",children:""});return(0,i.jsxs)(a.z,{dir:n?"rtl":void 0,children:[t?(0,i.jsxs)(a.z,{children:[u,(0,i.jsx)(r.$,{variant:"link",fontSize:"xxs",onClick:t,children:d})]}):(0,i.jsxs)(o.E,{as:"span",display:"inline-flex",gap:2,fontSize:"xxs",children:[u,d]}),(0,i.jsx)(l.qT,{label:(0,i.jsx)(s.x6,{id:"ek68m3"})})]})})},86136:(e,t,n)=>{"use strict";n.d(t,{R:()=>o});var i=n(32849),a=n(64225),r=n(5933);let o=()=>{let e=(0,a.GV)(r.Jo);return(0,i.ez)("card_margin_elements",null==e?void 0:e.organization)}},76598:(e,t,n)=>{"use strict";n.d(t,{j:()=>o});var i=n(64225),a=n(5933),r=n(76146);let o=e=>{let t=(0,i.GV)(a.uF),n=null==e?void 0:e.id,o=!!(n&&t[0]===n),l=t[t.length-1]===n,{cardMarginSettings:s}=(0,i.GV)(a.Uu),{hideFromFirst:d,hideFromLast:c}=s,u=o&&d,p=l&&c,h=!!(null==e?void 0:e.cardMarginSettings.isHidden);return{isFirstCardAndHidden:u,isLastCardAndHidden:p,isHiddenByCardSettings:h,areElementsCurrentlyHiddenBySettings:!(0,r.Nk)(s)&&(u||p||h)}}},91151:(e,t,n)=>{"use strict";n.d(t,{U:()=>o});var i=n(64225),a=n(5933),r=n(76146);let o=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],{cardMarginSettings:t}=(0,i.GV)(a.Uu),n=(0,r.D3)(t);return e&&n}},76146:(e,t,n)=>{"use strict";n.d(t,{D3:()=>a,Nk:()=>i,cP:()=>l,o:()=>r});let i=e=>{let{hideFromFirst:t,hideFromLast:n,...i}=e;return Object.values(i).every(e=>!e)},a=e=>{let{hideFromFirst:t,hideFromLast:n,...i}=e;return Object.values(i).some(e=>(null==e?void 0:e.type)==="themeLogo")},r=e=>{let{flex:t,text:n}={Left:{flex:"flex-start",text:"left"},Center:{flex:"center",text:"center"},Right:{flex:"flex-end",text:"right"}}[e.replace(/^(top|bottom)/,"")];return{flex:t,text:n}},o={top:/^top/,bottom:/^bottom/,left:/Left$/,right:/Right$/,center:/Center$/},l=(e,t)=>o[e].test(t)},85303:(e,t,n)=>{"use strict";n.d(t,{R:()=>i});let i=new(n(36832)).b},72860:(e,t,n)=>{"use strict";n.d(t,{y:()=>o});var i=n(12784),a=n.n(i),r=n(14041);let o=e=>{let[t,n]=(0,r.useState)(null);return(0,r.useEffect)(()=>{if(!e)return;let t=e=>{let{editor:t}=e;n(t.state.selection)};t({editor:e});let i=a()(t,200,{leading:!0});return e.on("selectionUpdate",i),()=>{e.off("selectionUpdate",i)}},[e]),{selection:t}}},49880:(e,t,n)=>{"use strict";n.d(t,{K:()=>w,T:()=>j});var i=n(31085),a=n(32202),r=n(95640),o=n(46108),l=n.n(o),s=n(14041),d=n(32133),c=n(35002),u=n(33718),p=n(64225),h=n(89059),m=n(27649),g=n(77646),x=n(13487);let f="cardsToCopy",v=e=>{sessionStorage.setItem(f,JSON.stringify(e))},b=()=>{let e=sessionStorage.getItem(f);if(!e)return null;let t=JSON.parse(e);return t?(y(),t):null},y=()=>{sessionStorage.removeItem(f)},w=()=>{let e=(0,a.d)(),t=(0,c.u)("copyCardsToDeck");return(0,s.useCallback)(n=>{if(t)try{let t=b();if((null==t?void 0:t.length)>0){let a=(0,u.gM)((0,p.KA)().getState()),o=(0,g.W0)(n,a);if(!o)return;let{pos:l}=o,s=n.view.state.doc.nodeAt(l);if(!s){console.error("[Copy cards] Cannot append card. Node unknown");return}let d=l+s.nodeSize;for(let e of t)n.chain().insertContentAt(d,e).scrollIntoView().run();e({title:(0,i.jsx)(r.x6,{id:"7f15EI",values:{0:t.length}}),status:"success",duration:3e3,position:"top"})}}catch(e){console.error("[Copy cards] Error inserting cards to copy",e)}},[t,e])},j=()=>{let e=(0,d.wA)(),t=(0,c.u)("copyCardsToDeck");return(0,s.useCallback)(n=>{if(!t)return;let i=n.map(e=>(0,x.RE)(l()(e.toJSON()))).map(e=>(0,m.iM)(e));e((0,h.q8)({isOpen:!0,onSelectDoc:()=>{v(i)}}))},[t,e])}},96362:(e,t,n)=>{"use strict";n.d(t,{M:()=>d});var i=n(2940),a=n.n(i),r=n(1602),o=n.n(r),l=n(63723),s=n(77936);let d=a()(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"complement",{matchBrightness:i=!1,contrastColor:a,minContrast:r=3}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},d=Array.from(new Set(t));if(0===d.length)return new Map;if(1===d.length){let t=o()(e);return a&&(0,l.vd)(t,a,r),new Map([[d[0],t.toHex8String()]])}return new Map([...(()=>{switch(n){case"monochrome":{let t=o()(e),n={min:15,max:95};if(a){let e=(e,t,n)=>{let i=c(e,t);return(0,l.vd)(i,a,r,n),Math.round(100*i.toHsl().l)};n.min=e(t,n.min,"lighten"),n.max=e(t,n.max,"darken")}let s=(n.max-n.min)/d.length,u=t.getBrightness();return new Map(d.map((e,a)=>{let r=c(t,n.min+s*a);return i&&(0,l.jB)(r,u),[e,r]}))}case"spin":{let t=o()(e),n=t.getBrightness(),a=Math.ceil((d.length-1)/2),r=360/d.length<22?360/d.length:22,c=(0,s.xV)(d.map((e,o)=>{let s=0;o<a&&(s=-((a-o)*r*1)),o>a&&(s=(o-a)*r);let d=t.clone().spin(s);return i&&(0,l.jB)(d,n),d}),d.length%2==0?a:a+1);return new Map(d.map((e,t)=>[e,c[t]]))}default:{let t=o()(e),a=180/(d.length-1),r=t.getBrightness();return new Map(d.map((e,o)=>{let s=t.clone().spin(a*o*("complement2"===n?-1:1));return i&&(0,l.jB)(s,r),[e,s]}))}}})().entries()].map(e=>{let[t,n]=e;return[t,n.toHex8String()]}))});function c(e,t){let n=e.toHsl();return n.l=t,o()(n)}},84511:(e,t,n)=>{"use strict";n.d(t,{PH:()=>c,UG:()=>d,XD:()=>h,fA:()=>u,gb:()=>p});var i=n(31085),a=n(31171),r=n(20501),o=n(3040),l=n(24221),s=n(12327);let d=n(22544).D1?0:.25,c={top:0,right:0,bottom:0,left:0},u={monochrome:{label:()=>s.Ru._({id:"VvdC4u"})},spin:{label:()=>s.Ru._({id:"0LFzg9"})},complement:{label:()=>s.Ru._({id:"2HDXEj"})},complement2:{label:()=>s.Ru._({id:"XTxqsS"})}},p="monochrome",h=Object.freeze({pie:{icon:(0,i.jsx)(l.g,{icon:r.W1p}),selectedIcon:(0,i.jsx)(l.g,{icon:o.W1p}),label:()=>s.Ru._({id:"RT6aCN"})},donut:{icon:(0,i.jsxs)(a.B.span,{className:"fa-layers fa-fw",children:[(0,i.jsx)(l.g,{icon:r.xD0}),(0,i.jsx)(l.g,{icon:r.ZPt})]}),selectedIcon:(0,i.jsxs)(a.B.span,{className:"fa-layers fa-fw",children:[(0,i.jsx)(l.g,{icon:o.xD0}),(0,i.jsx)(l.g,{icon:r.ZPt})]}),label:()=>s.Ru._({id:"Cn5cfQ"})},line:{icon:(0,i.jsx)(l.g,{icon:r.gK3}),selectedIcon:(0,i.jsx)(l.g,{icon:o.gK3}),label:()=>s.Ru._({id:"MZW+2G"})},bar:{icon:(0,i.jsx)(l.g,{icon:r.s67}),selectedIcon:(0,i.jsx)(l.g,{icon:o.s67}),label:()=>s.Ru._({id:"EzalDc"})},"horizontal-bar":{icon:(0,i.jsx)(l.g,{icon:r.Mkm}),selectedIcon:(0,i.jsx)(l.g,{icon:o.Mkm}),label:()=>s.Ru._({id:"CeeoKy"})}})},81003:(e,t,n)=>{"use strict";n.d(t,{TD:()=>a,dg:()=>o,pX:()=>l,sA:()=>r});var i=n(99742);function a(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=null!==(t=n.id)&&void 0!==t?t:(0,i.Ak)(),r="auto"===n.dismissable?new Date(Date.now()+5e3):n.dismissable;return{type:"addFeedback",payload:{id:a,message:e,severity:n.severity||"info",dismissable:r}}}function r(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return{type:"removeFeedback",payload:t}}function o(e){return{type:"openContextMenu",payload:{position:e}}}function l(){return{type:"closeContextMenu",payload:void 0}}},67718:(e,t,n)=>{"use strict";n.d(t,{uR:()=>s,en:()=>c});var i=n(31085),a=n(14041),r=n(74505);let o=(e,t)=>{switch(t.type){case"addFeedback":{let n=e.feedback||[];if(n.find(e=>{let{id:n}=e;return n===t.payload.id}))return{...e,feedback:[...n]};return{...e,feedback:[...n,t.payload]}}case"clearFeedback":{let{feedback:t,...n}=e;return{...n}}case"removeFeedback":{let n=e.feedback||[];if(!t.payload.length)return{...e};return{...e,feedback:n.filter(e=>!t.payload.includes(e.id))}}case"reportActiveColumnIds":return{...e,activeColumns:t.payload?[...t.payload]:void 0};case"openContextMenu":return{...e,contextMenu:{isOpen:!0,position:t.payload.position}};case"closeContextMenu":return{...e,contextMenu:{isOpen:!1,position:{x:-1e3,y:-1e3}}};case"setGridFunctions":return{...e,gridFunctions:t.payload};default:(0,r.x)(t)}return e},l={_inContext:!1},s=(0,a.createContext)({state:l,dispatch:()=>{}}),d=e=>{let{children:t}=e,[n,r]=(0,a.useReducer)(o,{...l,_inContext:!0});return(0,i.jsx)(s.Provider,{value:{state:n,dispatch:r},children:t})},c=e=>t=>(0,i.jsx)(d,{children:(0,i.jsx)(e,{...t})})},4016:(e,t,n)=>{"use strict";n.d(t,{K:()=>a});var i=n(10541);class a{get data(){if(this._data)return this._data;let e=this.findIndices();if(e.labelsOnly){let t=this.source.columns.slice(e.from.column,e.to.column+1);return new i.h({columns:t,rows:[],cells:[]})}let t=this.source.rows.slice(e.from.row,e.to.row+1),n=this.source.columns.slice(e.from.column,e.to.column+1),a=t.flatMap(e=>n.map(t=>this.source.getCell({row:e.id,column:t.id}))).filter(e=>!!e);return new i.h({rows:t,columns:n,cells:a})}clear(){let e=this.findIndices(),{rows:t,columns:n}=this.source;for(let i=e.from.column;i<=e.to.column;i++){let a=n[i];if(this.includesLabels&&(a.label=""),!e.labelsOnly)for(let n=e.from.row;n<=e.to.row;n++){let e=t[n],i=this.source.getCell({row:e.id,column:a.id});i?i.clear():this.source.setEmptyCell(e,a)}}}includes(e){if("isLabel"in e)return this.includesLabelCell(e.column);let t=this.findIndices(),n=this.source.findCellIndex(e);return!!n&&!t.labelsOnly&&t.from.row<=n.row&&t.to.row>=n.row&&t.from.column<=n.column&&t.to.column>=n.column}includesLabelCell(e){if(!this.includesLabels)return!1;let t=this.source.columns.findIndex(t=>{let{id:n}=t;return n===e});if(t<0)return!1;let n=this.findIndices();return n.from.column<=t&&n.to.column>=t}findIndices(){let{rows:e,columns:t}=this.source,n=t.findIndex(e=>{let{id:t}=e;return t===this.from.column}),i=t.findIndex(e=>{let{id:t}=e;return t===this.to.column});if(!this.to.row)return{from:{column:n},to:{column:i},labelsOnly:!0};let a=e.findIndex(e=>{let{id:t}=e;return t===this.from.row}),r=e.findIndex(e=>{let{id:t}=e;return t===this.to.row});if(-1!==[a,r,n,i].indexOf(-1))throw Error("Invalid range");return{from:{row:a,column:n},to:{row:r,column:i},labelsOnly:!1}}static nonEmpty(e){function t(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=e.getLines(t);for(let t=n?i.length-1:0;t!==(n?-1:i.length);n?t--:t++){let n=i[t];if(!n.isEmpty(e))return n}return null}let n=t("row"),i=t("row",!0),a=t("column"),r=t("column",!0);return n&&i&&a&&r?new this(e,{row:n.id,column:a.id},{row:i.id,column:r.id},!0):null}constructor(e,t,n,i=!1){this.source=e,this.from=t,this.to=n,this.includesLabels=i,this._data=void 0}}},77936:(e,t,n)=>{"use strict";n.d(t,{us:()=>c,Z7:()=>l,jt:()=>d,Vr:()=>m,OP:()=>h,xV:()=>s,yw:()=>u,jp:()=>p});var i=n(2940),a=n.n(i),r=n(20685),o=n.n(r);let l=a()((e,t,n)=>{let i="__react_svg_text_measurement_id_gamma";n=null!=n?n:document.body;try{let a=document.getElementById(i);if(!a){let e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.style.width="0",e.style.height="0",e.style.position="absolute",e.style.top="-100%",e.style.left="-100%",(a=document.createElementNS("http://www.w3.org/2000/svg","text")).setAttribute("id",i),e.appendChild(a),n.appendChild(e)}let r=a.ownerSVGElement;r&&r.parentNode&&r.parentNode!==n&&(r.parentNode.removeChild(r),n.appendChild(r)),Object.assign(a.style,t),a.textContent=e;let o=a.getBoundingClientRect();return{width:a.getComputedTextLength(),height:o.height}}catch(e){return null}}),s=(e,t)=>{let n=e.length,i=Array(n);return e.forEach((e,a)=>{i[(a+t)%n]=e}),i},d=e=>e?1:16;function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,n=window.getComputedStyle(e).fontSize;if(!n)return t;let[i,a]=(()=>{let e=n.split(""),i=e.findIndex(e=>e.match(/[a-z]/i));return -1===i?["".concat(t),"px"]:[e.splice(0,i).join(""),e.join("")]})();return"px"!==a.toLowerCase()?t:Number.parseFloat(i)}function u(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=Math.abs(e),a=i%t,r=i-a;return 0===a?e:n*(e<0?-1:1)==-1||0===n&&a<t/2?r*(e<0?-1:1):(r+t)*(e<0?-1:1)}let p=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{exact:i}=n,r=e.length,l=new Map,s=/\W/,d=-1,c=e,u=0,p=r,h=a()(t);for(;0!==d;){l.set(p,d);let t=Math.floor(Math.abs(p-u)/2);if(0===t){if(i)return!1;if(1===d)return c;if(1===l.get(p-1))return o()(e,{length:p-1,separator:s});return!1}if(u=p,(p+=t*d)>r)return!1;d=h(c=o()(e,{length:p,separator:s}))}return c};function h(e){let t=e.target,n={x:e.clientX,y:e.clientY};if(t instanceof SVGElement){var i,a;t=null!==(a=null===(i=t.ownerSVGElement)||void 0===i?void 0:i.parentElement)&&void 0!==a?a:null}let r=null==t?void 0:t.offsetParent;if(r){let e=r.getBoundingClientRect();n.x-=e.left,n.y-=e.top}return n}let m=a()((e,t)=>{let{fontFamily:n,fontSize:i,fontWeight:a}=t,r={widths:[],heights:[],maxWidth:0,maxHeight:0};return e.length&&e.forEach(e=>{let{width:t,height:o}=l("".concat(e),{fontFamily:n,fontSize:i,fontWeight:a})||{width:0,height:0};r.widths.push(t),r.heights.push(o),t>r.maxWidth&&(r.maxWidth=t),o>r.maxHeight&&(r.maxHeight=o)}),r})},33916:(e,t,n)=>{"use strict";n.d(t,{f:()=>k});var i=n(31085),a=n(25420),r=n(14686),o=n(78776),l=n(33321),s=n(56824),d=n(80853),c=n(43342),u=n(35687),p=n(61778),h=n(19635),m=n(20501),g=n(24221),x=n(9104),f=n(95640),v=n(14041),b=n(49350),y=n(79152);let w=e=>{let{lowCreditStatus:t,isDark:n}=e;return t===y.y.EXHAUSTED?n?{color:"calamity.500",bg:"transparent",_hover:{bg:"calamity.300"},_active:{bg:"calamity.200"},progressBarFillColor:"calamity.500"}:{color:"calamity.700",bg:"transparent",_hover:{bg:"calamity.50"},_active:{bg:"calamity.100"},progressBarFillColor:"calamity.500"}:t===y.y.LOW?n?{color:"rocketfire.500 !important",bg:"transparent",_hover:{bg:"rocketfire.200 !important"},_active:{bg:"rocketfire.300 !important"},progressBarFillColor:"rocketfire.500"}:{color:"rocketfire.700 !important",bg:"transparent",_hover:{bg:"rocketfire.100 !important"},_active:{bg:"rocketfire.200 !important"},progressBarFillColor:"rocketfire.500"}:{color:"primary.subtle.text",bg:"transparent",_hover:{bg:"primary.subtle.background-hover"},_active:{bg:"primary.subtle.background-active"},progressBarFillColor:"primary.500"}},j=(0,v.memo)(e=>{let{credits:t,lowCreditStatus:n,onClick:a,isDark:r}=e,o=null===t,{colorMode:l}=(0,s.G6)(),{shouldShowRefreshUI:v,creditRefreshLabel:y,creditsRemainingInPercent:j}=(0,b.N)(),k=v?y:(0,i.jsx)(f.x6,{id:"IY3q+2"}),C=w({lowCreditStatus:n,isDark:null!=r?r:"dark"===l});return(0,i.jsx)(x.Tz,{label:k,placement:"top",children:(0,i.jsx)(d.$,{size:"sm",py:4,px:4,onClick:a,isDisabled:o,variant:"ghost",...C,children:o?(0,i.jsx)(c.y,{size:"xs"}):(0,i.jsxs)(u.B,{direction:"column",w:"100%",spacing:.5,children:[(0,i.jsxs)(u.B,{direction:"row",alignItems:"center",spacing:1.5,children:[(0,i.jsx)(g.g,{icon:m.wq_,size:"sm"}),(0,i.jsx)(p.E,{as:"span",children:(0,i.jsx)(f.x6,{id:"T57gLR",values:{credits:t}})})]}),v&&null!==j&&(0,i.jsx)(h.k,{size:"xs",value:j,borderRadius:"full",bg:"gray.200",...C.progressBarFillColor&&{sx:{'[role="progressbar"]':{bg:"".concat(C.progressBarFillColor)}}}})]})})})}),k=(0,o.A)(e=>{let{modalId:t="ai-credits-modal",segmentEvent:n,isDark:o,...s}=e,{hasUnlimitedCredits:d,credits:c,lowCreditStatus:u,onAICreditsModalOpen:p,onAICreditsModalClose:h,isAICreditsModalOpen:m}=(0,r.x)(t);return d?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.s,{...s,children:(0,i.jsx)(j,{credits:c,onClick:p,lowCreditStatus:u,isDark:o})}),(0,i.jsx)(l.m,{isOpen:m,onOpen:p,onClose:h,credits:c,segmentEvent:n})]})})},33321:(e,t,n)=>{"use strict";n.d(t,{m:()=>Z});var i=n(31085),a=n(69237),r=n(18588),o=n(59742),l=n(97482),s=n(65446),d=n(2600),c=n(61778),u=n(34363),p=n(62313),h=n(80532),m=n(43342),g=n(35687),x=n(18658),f=n(74727),v=n(80853),b=n(27670),y=n(3706),w=n(20501),j=n(24221),k=n(9104),C=n(95640),S=n(12327),A=n(14041),z=n(44913),I=n(35002),R=n(23071),E=n(64130),L=n(39286),_=n(43006),M=n(49614),N=n(32849),T=n(10458),P=n(57882),O=n(92405),D=n(31684),F=n(71197),H=n(49350),W=n(60353),B=n(85146),V=n(14892),G=n(84755),U=n(37586),K=n(58821),q=n(3601);let J=e=>{let{onContactUsClick:t,...n}=e,a=(0,I.u)("aiDebits"),r=(0,I.u)("ai-credits").enabled,o=a.generateCard,l=a.wizardCreation,s=a.chatSuggestion,d=a.autocomplete,c=a.generateImage,u=(0,I.u)("aiAutocomplete"),p=(0,I.u)("aiGeneratedImages"),h=(0,I.u)("addCard2");return(0,i.jsxs)(W.n,{allowMultiple:!0,...n,children:[(0,i.jsx)($,{accordionLabel:S.Ru._({id:"IVVQ18"}),children:(0,i.jsxs)(B.Xy,{children:[(0,i.jsxs)(B.ck,{children:[(0,i.jsx)("strong",{children:(0,i.jsx)(C.x6,{id:"p4u+sD"})})," ",(0,i.jsx)(C.x6,{id:"XSCvWA",values:{aiGeneration:l,GAMMA_ARTIFACT_PROPER_NOUN:L.TP}})]}),h&&(0,i.jsxs)(B.ck,{children:[(0,i.jsx)("strong",{children:(0,i.jsx)(C.x6,{id:"R8xLRW"})})," ",(0,i.jsx)(C.x6,{id:"M3I7Cf",values:{aiAddCard:o}})]}),(0,i.jsxs)(B.ck,{children:[(0,i.jsx)("strong",{children:(0,i.jsx)(C.x6,{id:"gPyWmV"})})," ",(0,i.jsx)(C.x6,{id:"8HgQlf",values:{aiEditing:s}}),(0,i.jsx)(C.x6,{id:"bO6EBT"})]}),p&&(0,i.jsxs)(B.ck,{children:[(0,i.jsx)("strong",{children:(0,i.jsx)(C.x6,{id:"0jmvoW"})})," ",(0,i.jsx)(C.x6,{id:"OY40J+",values:{aiImages:c}})]}),u&&(0,i.jsxs)(B.ck,{children:[(0,i.jsx)("strong",{children:(0,i.jsx)(C.x6,{id:"eBVeIQ"})})," ",(0,i.jsx)(C.x6,{id:"AJ11w6",values:{aiAutocomplete:d,AUTOCOMPLETE_SLASH_SHORTCUT:q.g,AUTOCOMPLETE_INPUT_SHORTCUT:q.H}})]})]})}),r&&(0,i.jsx)($,{accordionLabel:S.Ru._({id:"1pwdRz"}),children:(0,i.jsx)(C.x6,{id:"AVeiKc",values:{GAMMA_PROPER_NOUN:L.On}})})]})},$=e=>{let{accordionLabel:t,children:n}=e;return(0,i.jsxs)(V.A,{children:[(0,i.jsx)("h2",{children:(0,i.jsxs)(G.J,{px:2,py:2,fontSize:"sm",children:[(0,i.jsx)(h.az,{as:"span",flex:"1",textAlign:"left",fontWeight:500,children:t}),(0,i.jsx)(U.Q,{})]})}),(0,i.jsx)(K.v,{pb:4,px:2,fontSize:"sm",children:n})]})},Y=()=>({friend:{label:S.Ru._({id:"uU68PM"})},teammate:{label:S.Ru._({id:"O/k8gF"})},buy:{label:S.Ru._({id:"/2RIKE"})}}),Q={fontWeight:500,letterSpacing:"normal",color:"gray.600"},X=e=>{let{onClose:t,onOpen:n,credits:S,segmentEvent:W=T.VV.GAMMA_PRO_UPSELL_CALLOUT_AI_CREDITS}=e,B=(0,E.fW)(),{user:V,currentWorkspace:G}=(0,P.ur)(),U=(0,P.CX)(),K=(0,I.u)("upsellUXEnabled_Pro"),q=(0,N.ez)("unlimited_credits"),[$,X]=(0,A.useState)(K?"buy":"friend"),Z=(0,I.u)("ai-credits"),ee=(0,I.u)("intercom"),et=(0,_.k)(),{lowCreditStatus:en}=(0,F.B9)(),ei=(0,A.useMemo)(()=>V?"teammate"===$&&G&&U?(0,O.Fz)({userId:V.id,workspace:G}):"friend"===$?(0,O.Fz)({userId:V.id}):"":"",[U,G,$,V]),ea=Z.enabled,er=Z.referralBonus,eo=Y()[$],el=B?"friend"===$?44:56:void 0,{shouldShowRefreshUI:es,creditRefreshLabel:ed,creditRefreshModalText:ec}=(0,H.N)(),eu=(0,A.useCallback)(()=>{et(),t()},[et,t]),ep=(0,D.NZ)();return(0,i.jsx)(k.L8,{isDark:!1,children:(0,i.jsxs)(r.aF,{isOpen:!0,onClose:t,size:"xl",returnFocusOnClose:!1,children:[(0,i.jsx)(o.m,{}),(0,i.jsxs)(l.$,{children:[(0,i.jsx)(s.s,{}),(0,i.jsxs)(d.T,{py:4,px:6,textAlign:"center",children:[(0,i.jsx)(c.E,{...Q,fontSize:"md",color:en?ep[en].darkColor:void 0,children:en?ep[en].description:(0,i.jsx)(C.x6,{id:"xy3nnP"})}),(0,i.jsx)(u.r,{p:0,color:en?ep[en].lightColor:void 0,children:(0,i.jsxs)(p.z,{children:[(0,i.jsx)(h.az,{as:"span",fontSize:"xl",children:(0,i.jsx)(j.g,{icon:w.wq_})})," ",null===S?(0,i.jsx)(m.y,{size:"sm"}):(0,i.jsx)(C.x6,{id:"T57gLR",values:{credits:S}})]})}),es&&(0,i.jsx)(k.Tz,{label:ed,children:(0,i.jsxs)(g.B,{color:"text.link",alignItems:"center",direction:"row",flexWrap:"wrap",fontSize:"sm",spacing:1,children:[(0,i.jsx)(j.g,{icon:w.AoE}),(0,i.jsx)(c.E,{children:ec})]})}),(0,i.jsx)(c.E,{textAlign:"start",fontSize:"sm",pt:2,...Q,children:(0,i.jsx)(C.x6,{id:"lUUl1i"})})]}),(0,i.jsxs)(x.c,{pb:4,children:[ea?(0,i.jsxs)(d.T,{spacing:4,children:[(0,i.jsxs)(f.e,{variant:"ghost",size:"sm",spacing:0,gap:2,justifyContent:"center",flexWrap:"wrap",alignItems:"center",children:[!q&&K&&(0,i.jsx)(v.$,{onClick:()=>X("buy"),isActive:"buy"===$,color:"buy"===$?void 0:"gray.700",children:(0,i.jsx)(C.x6,{id:"KctW9G"})}),(0,i.jsx)(v.$,{onClick:()=>X("friend"),isActive:"friend"===$,color:"friend"===$?void 0:"gray.700",children:(0,i.jsx)(C.x6,{id:"KSBmDv"})}),U&&(0,i.jsx)(v.$,{leftIcon:(0,i.jsx)(j.g,{icon:w.nWR}),onClick:()=>X("teammate"),isActive:"teammate"===$,color:"teammate"===$?void 0:"gray.700",children:(0,i.jsx)(C.x6,{id:"dUOpaF"})})]}),("friend"===$||"teammate"===$)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(p.z,{spacing:2,children:[(0,i.jsxs)(c.E,{fontSize:"sm",minW:"50%",children:["friend"===$&&(0,i.jsx)(C.x6,{id:"tBKKYy",values:{referralBonusAmount:er,GAMMA_PROPER_NOUN:L.On}}),"teammate"===$&&(0,i.jsx)(C.x6,{id:"q8MWFp",values:{referralBonusAmount:er}})]}),(0,i.jsxs)(b.E,{colorScheme:"green",fontSize:"xs",children:["+"," ",(0,i.jsx)(C.x6,{id:"NFNFrR",values:{referralBonusAmount:er}})]})]}),(0,i.jsx)(z.X,{url:ei,paddingLeft:el,customLabel:eo.label})]}),"buy"===$&&(0,i.jsx)(M.c,{segmentEvent:W,onOpenCallback:t,onCloseCallback:n,title:(0,i.jsx)(C.x6,{id:"0i4o6E"})})]}):(0,i.jsxs)(p.z,{align:"baseline",spacing:1,children:[(0,i.jsx)(c.E,{children:(0,i.jsx)(C.x6,{id:"0TJN6B"})}),ee?(0,i.jsx)(v.$,{onClick:eu,variant:"link",children:(0,i.jsx)(C.x6,{id:"Bhgd0l"})}):(0,i.jsxs)(y.N,{href:"mailto:".concat(R.J),children:[(0,i.jsx)(C.x6,{id:"Bhgd0l"}),(0,i.jsx)(a.p,{ms:1,transform:"translateY(-2px)"})]})]}),(0,i.jsx)(J,{my:4,onContactUsClick:ee?eu:void 0})]})]})]})})},Z=(0,A.memo)(e=>{let{isOpen:t,...n}=e;return t?(0,i.jsx)(X,{...n}):null})},15355:(e,t,n)=>{"use strict";n.d(t,{G:()=>m});var i=n(31085),a=n(27670),r=n(62313),o=n(61778),l=n(20501),s=n(24221),d=n(9104),c=n(95640),u=n(35002),p=n(32849),h=n(31684);let m=e=>{var t;let{type:n,...m}=e,g=(0,u.u)("aiDebits");if((0,p.ez)("unlimited_credits"))return null;let x=null!==(t=g[n])&&void 0!==t?t:h.rA[n];return(0,i.jsx)(d.Tz,{label:(0,i.jsx)(c.x6,{id:"B7jvsP",values:{numCredits:x}}),children:(0,i.jsx)(a.E,{colorScheme:"whiteAlpha",bg:"whiteAlpha.300",textTransform:"none",textShadow:"none",fontSize:"xxs",ml:2,...m,children:(0,i.jsxs)(r.z,{spacing:1,children:[(0,i.jsx)(o.E,{children:x}),(0,i.jsx)(s.g,{icon:l.wq_,size:"sm"})]})})})}},14686:(e,t,n)=>{"use strict";n.d(t,{x:()=>o});var i=n(55276),a=n(71197),r=n(43087);let o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ai-credits-modal",t=(0,r.ez)("unlimited_credits"),{lowCreditStatus:n,credits:o,isCreditsReady:l}=(0,a.B9)(),{onOpen:s,onClose:d,isOpen:c}=(0,i.j)({id:e});return{hasUnlimitedCredits:t,lowCreditStatus:n,credits:o,onAICreditsModalOpen:s,onAICreditsModalClose:d,isAICreditsModalOpen:c,isCreditsReady:l}}},49350:(e,t,n)=>{"use strict";n.d(t,{N:()=>g});var i=n(31085),a=n(35687),r=n(61778),o=n(95640),l=n(49896),s=n(77563),d=n(71197),c=n(64225),u=n(54925),p=n(44380);let h=e=>{let{minsUntilRefill:t,hoursUntilRefill:n}=e;return t&&t<=60?(0,i.jsx)(o.x6,{id:"z8SbRN"}):null!==n?(0,i.jsx)(o.x6,{id:"xVtsV/",values:{hoursUntilRefill:n}}):null},m=e=>{let{credits:t,creditsUsedPercentage:n,minsUntilRefill:l,hoursUntilRefill:s}=e;return null===t?void 0:400===t?(0,i.jsx)(o.x6,{id:"fv4yIH"}):t<400?(0,i.jsxs)(a.B,{spacing:0,children:[(0,i.jsx)(r.E,{color:"white",children:(0,i.jsx)(o.x6,{id:"WZ4bvD",values:{creditsUsedPercentage:n}})}),(0,i.jsx)(r.E,{color:"gray.400",children:h({minsUntilRefill:l,hoursUntilRefill:s})})]}):(0,i.jsx)(o.x6,{id:"IY3q+2"})},g=()=>{let{credits:e}=(0,d.B9)(),t=(0,c.GV)(u.W8),n=(0,p.Cj)({creditsRemaining:e,creditsToFillTo:400}),i=n?100-n:null,a=null!==t?(0,l.A)((0,s.A)(t),new Date):null,r=(0,p.MK)(a);return{shouldShowRefreshUI:null!==a&&!!t&&a>0&&null!==e&&e<400&&null!==n,creditRefreshLabel:m({credits:e,creditsUsedPercentage:n,minsUntilRefill:a,hoursUntilRefill:r}),creditsRemainingInPercent:i,creditRefreshModalText:h({minsUntilRefill:a,hoursUntilRefill:r})}}},19717:(e,t,n)=>{"use strict";n.d(t,{R:()=>p,w:()=>u});var i=n(50877),a=n(35002),r=n(32849),o=n(64225),l=n(10458),s=n(30358),d=n(31684),c=n(54925);let u=async(e,t,n)=>{var u,h;let m=(0,r.vT)("unlimited_credits",t),g=null!==(h=a.of.get("aiDebits")[e])&&void 0!==h?h:d.rA[e];if(p(e,t,n),0===g||m)return;let x=(null==t?void 0:t.id)||(0,s.gx)();if(!x)return;let f=(0,i.H4n)(),v=null===(u=(await f.mutate({mutation:i.lgx,variables:{value:g,workspaceId:x}})).data)||void 0===u?void 0:u.deductCredits;return v?(l.zS.track(l.VV.AI_CREDITS_DEDUCTED,{operation:e,used:g,remaining:v.credits,interactionId:n}),(0,o.KA)().dispatch((0,c.z0)({availableCredits:v.credits})),v.credits):null},p=(e,t,n)=>{var i;let o=(0,r.vT)("unlimited_credits",t),s=null!==(i=a.of.get("aiDebits")[e])&&void 0!==i?i:d.rA[e];l.zS.track(l.VV.AI_CREDITS_USED,{operation:e,used:s,has_unlimited_ai:o,interactionId:n})}},60514:(e,t,n)=>{"use strict";n.d(t,{m:()=>o});var i=n(31085),a=n(95640),r=n(39286);let o={invalid_signup_code:{title:(0,i.jsx)(a.x6,{id:"F6yt1L",values:{GAMMA_PROPER_NOUN:r.On}}),description:(0,i.jsx)(a.x6,{id:"hVNvhu"})},invalid_reset_code:{title:(0,i.jsx)(a.x6,{id:"SvShcH"}),description:(0,i.jsx)(a.x6,{id:"Vm3y4h"})},invalid_user:{title:(0,i.jsx)(a.x6,{id:"a2AYF6"}),description:(0,i.jsx)(a.x6,{id:"x9CdxW",values:{GAMMA_PROPER_NOUN:r.On}})},other_workspace_member:{title:(0,i.jsx)(a.x6,{id:"J5F9Vo"}),description:(0,i.jsx)(a.x6,{id:"PX8jn2",values:{GAMMA_PROPER_NOUN:r.On,GAMMA_SUPPORT_EMAIL_ADDRESS:r.uz}})}}},92053:(e,t,n)=>{"use strict";n.d(t,{w:()=>r});var i=n(73893),a=n(19142);let r=async e=>{let{imageUrl:t,workspaceId:n,abortController:r,width:o,height:l}=e,s="".concat(i.$.API_HOST,"/media/images/edit");return await (0,a.P)(s,{method:"POST",signal:null==r?void 0:r.signal,headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({url:t,operation:"remove-background",workspaceId:n,...o&&{width:o},...l&&{height:l}})},{parseResponse:async e=>(await e.json()).url,maxDuration:3e4})}},23427:(e,t,n)=>{"use strict";n.d(t,{o:()=>eG});var i=n(31085),a=n(95372),r=n(2600),o=n(90290),l=n(69648),s=n(39761),d=n(62313),c=n(61778),u=n(80532),p=n(80853),h=n(20501),m=n(24221),g=n(95640),x=n(12327),f=n(14041),v=n(55576),b=n(87064),y=n(50877),w=n(33916),j=n(15355),k=n(71197),C=n(49547),S=n(63341),A=n(18528),z=n(25420),I=n(72821),R=n(48310),E=n(33473),L=n(57754);let _={square:h.Nfw,portrait:h.b0A,landscape:h.Cpz},M={square:()=>x.Ru._({id:"1DA6ap"}),portrait:()=>x.Ru._({id:"3bV9gD"}),landscape:()=>x.Ru._({id:"XxIeKn"})},N=(0,f.memo)(e=>{let{value:t,setValue:n,isDisabled:a,model:r}=e,o=(0,L.pH)(r);return(0,i.jsx)(C.MJ,{children:(0,i.jsxs)(S.W,{isLazy:!0,children:[(0,i.jsx)(A.I,{as:p.$,variant:"plain",isDisabled:a,w:"100%",textAlign:"start",justifyContent:"space-between",rightIcon:(0,i.jsx)(m.g,{icon:h.Jt$}),boxShadow:"none",size:"sm",children:(0,i.jsxs)(d.z,{spacing:2,children:[(0,i.jsx)(z.s,{width:"24px",height:"24px",align:"center",justify:"center",children:(0,i.jsx)(m.g,{icon:_[t],fixedWidth:!0})}),(0,i.jsx)(c.E,{as:"span",flex:1,children:M[t]()})]})}),(0,i.jsx)(I.c,{minWidth:"240px",maxH:"290px",overflowY:"auto",overflowX:"hidden",children:(0,i.jsx)(R.i,{value:t,type:"radio",onChange:e=>{n(e)},children:Object.values(o).map(e=>(0,i.jsx)(E.k,{value:e,children:(0,i.jsxs)(d.z,{spacing:2,children:[(0,i.jsx)(z.s,{width:"24px",height:"24px",align:"center",justify:"center",children:(0,i.jsx)(m.g,{icon:_[e],fixedWidth:!0})}),(0,i.jsx)(c.E,{as:"span",flex:1,children:M[e]()})]})},e))})})]})})});N.displayName="AspectRatioSelect";var T=n(11509),P=n(60107),O=n(86821),D=n(63709),F=n(64225),H=n(55090),W=n(35147),B=n(2861),V=n(5933),G=n(27042),U=n(92667),K=n(17539),q=n(62230),J=n(18651),$=n(26860),Y=n(57882),Q=n(1935),X=n(23970),Z=n(32202),ee=n(55276),et=n(74727),en=n(9021),ei=n(18588),ea=n(59742),er=n(97482),eo=n(9104),el=n(31948),es=n(59707);let ed=e=>{var t;let{currentAttributes:n,deleteImage:a,showDelete:r=!0,...o}=e;(0,Z.d)();let l=x.Ru._({id:"cnGeoo"}),{isOpen:s,onOpen:d,onClose:c}=(0,ee.j)();return(0,i.jsxs)(et.e,{size:"sm",...o,children:[(0,i.jsx)(eo.Tz,{label:(0,i.jsx)(g.x6,{id:"niRN2H"}),placement:"top",children:(0,i.jsx)(en.K,{"aria-label":"download image",borderWidth:"1px",icon:(0,i.jsx)(m.g,{icon:h.a_I}),onClick:()=>{var e;return(0,el.lE)(null!==(e=n.src)&&void 0!==e?e:"")}})}),(0,i.jsx)(eo.Tz,{label:(0,i.jsx)(g.x6,{id:"GpbSs9"}),placement:"top",children:(0,i.jsx)(en.K,{"aria-label":"zoom in",borderWidth:"1px",icon:(0,i.jsx)(m.g,{icon:h.bMI}),onClick:e=>{e.stopPropagation(),d()}})}),s&&(0,i.jsxs)(ei.aF,{isOpen:s,size:"6xl",onClose:c,isCentered:!0,children:[(0,i.jsx)(ea.m,{bg:"blackAlpha.900"}),(0,i.jsxs)(er.$,{width:"fit-content",children:[(0,i.jsx)(u.az,{position:"absolute",right:2,top:2,zIndex:"toast",contentEditable:!1,suppressContentEditableWarning:!0,children:(0,i.jsx)(en.K,{"aria-label":x.Ru._({id:"8qZ5De"}),colorScheme:"gray",size:"md",onClick:c,onMouseDown:es.Fw,icon:(0,i.jsx)(X.U,{})})}),(0,i.jsx)(J._,{src:null!==(t=n.src)&&void 0!==t?t:"",objectFit:"contain",rounded:"lg",maxH:"90vh",maxW:"90vw"})]})]}),r&&a&&(0,i.jsx)(eo.Tz,{label:l,placement:"top",children:(0,i.jsx)(en.K,{"aria-label":l,color:"red.500",borderWidth:"1px",icon:(0,i.jsx)(m.g,{icon:h.yLS}),onClick:async e=>{var t;e.stopPropagation(),await a(null!==(t=n.savedMediaId)&&void 0!==t?t:"")}})})]})};var ec=n(76003),eu=n(70405),ep=n(35789),eh=n(48574);let em=(0,f.memo)(e=>{let{image:t,currentAttributes:n,onImageClick:a,resizeThumbnail:r,h:o,deleteImage:l,isDeleting:s,showQuickActions:d=!0,showAvatar:c=!0}=e,[x,v]=(0,f.useState)(!0),{user:b}=(0,Y.ur)(),y=(0,F.GV)(V.zB),w=null==y?void 0:y.find(e=>e.user.id===t.userId),j=(0,f.useMemo)(()=>(null==b?void 0:b.id)===t.userId,[null==b?void 0:b.id,t.userId]),k=(0,f.useMemo)(()=>(null==n?void 0:n.savedMediaId)===t.id,[null==n?void 0:n.savedMediaId,t.id]),C=r?(0,K.Ub)(t.attrs.src,K.p7,t.attrs.meta):t.attrs.src,{ref:S,width:A}=(0,Q.Lh)(),z=w&&y&&y.length>1&&c;return(0,i.jsx)(ec.E,{children:(0,i.jsxs)(p.$,{borderRadius:"base",display:"block",variant:"ghost",opacity:1,width:"100%",ref:S,height:"100%",minHeight:"0",textAlign:"left",pos:"relative",overflow:"hidden",p:0,_hover:{shadow:"outline"},_active:{shadow:"outline"},transition:"box-shadow .2s ease",cursor:"pointer",onClick:()=>a(t),sx:{_focusVisible:{".attribution-container":{opacity:1}},_hover:{".attribution-container":{opacity:1}}},isDisabled:s,"data-testid":"image-search-grid-item",role:"group",children:[(0,i.jsx)(J._,{w:"100%",h:o||"100%",src:C,borderRadius:"base",objectFit:"cover",onLoad:()=>v(!1)}),!x&&(0,i.jsx)(eu.z,{in:k,children:(0,i.jsx)(u.az,{pointerEvents:"none",color:"white",pos:"absolute",inset:0,bg:"rgba(0,0,0,.5)",borderRadius:"base",children:(0,i.jsx)(ep.o,{h:"100%",w:"100%",children:(0,i.jsx)(m.g,{icon:h.e68})})})}),A>=125&&d&&(0,i.jsx)(u.az,{position:"absolute",bottom:-2,left:"50%",transform:"translate(-50%, -50%)",display:"none",_groupHover:{display:"block"},children:(0,i.jsx)(ed,{showDelete:j,currentAttributes:t.attrs,deleteImage:l})}),z&&(0,i.jsx)(eo.Tz,{label:(0,i.jsx)(g.x6,{id:"RMBnNX",values:{0:w.user.displayName,1:j?"(You)":""}}),placement:"top",children:(0,i.jsx)(eh.e,{size:"sm",src:w.user.profileImageUrl,name:w.user.displayName,position:"absolute",top:2.5,right:2.5,borderWidth:"2px",borderColor:"gray.200",_hover:{cursor:"pointer"}})}),!t.attrs.src&&(0,i.jsx)(ec.E,{width:"100%",children:(0,i.jsx)(q.E,{height:"80px",borderRadius:"base"})})]})},t.id)});em.displayName="AIImageHistoryItem";var eg=n(55746);let ex=(0,f.memo)(e=>{var t;let{attrs:n,onRateImage:a}=e,r=null===(t=n.aiParams)||void 0===t?void 0:t.interactionId,[o,l]=(0,f.useState)(null);(0,f.useEffect)(()=>{n.savedMediaId&&l(null)},[n.savedMediaId]);let s=(0,f.useCallback)((e,t,i)=>{var a;(null===(a=n.aiParams)||void 0===a?void 0:a.interactionId)&&(0,b.XD)({feedback:t,rating:e,tags:i,aiParams:n.aiParams,imageUrl:n.src,interactionId:n.aiParams.interactionId})},[n]),d=(0,f.useCallback)(e=>{l(e),a(e)},[a]);return r?(0,i.jsx)(u.az,{position:"absolute",bottom:2,zIndex:"sticky",right:2,children:(0,i.jsx)(eg.f3,{trackFeedback:s,rating:o||void 0,setRating:d,RatingButtons:eg.Ep,feedbackTags:ef},n.savedMediaId)}):null});ex.displayName="AIImageRating";let ef=[{key:"bad-people",label:(0,i.jsx)(g.x6,{id:"eft1Pc"})},{key:"bad-text",label:(0,i.jsx)(g.x6,{id:"BNmAIN"})},{key:"didnt-follow-prompt",label:(0,i.jsx)(g.x6,{id:"Tq32Jp"})},{key:"wrong-colors",label:(0,i.jsx)(g.x6,{id:"Lx0mWG"})},{key:"wrong-style",label:(0,i.jsx)(g.x6,{id:"HG712W"})},{key:"low-res",label:(0,i.jsx)(g.x6,{id:"i6Gj9B"})},{key:"inappropriate",label:(0,i.jsx)(g.x6,{id:"i/9pR4"})}];var ev=n(94140);let eb=e=>{let{imagesMatchingInteractionId:t,currentAttributes:n,isGenerating:a,isDeleting:r,selectedSavedMediaId:o,selectImage:l,onRateImage:s,deleteImage:d}=e,{user:c}=(0,Y.ur)(),[u,p]=(0,f.useState)({wA:0,hA:0,wBCD:0,hBCD:0}),h=(0,f.useMemo)(()=>(0,$.X)(),[]),{ref:m,width:g}=(0,Q.Lh)(),x=(0,f.useMemo)(()=>!!a||!!t&&!(t.length<=1)&&!ew([...t.map(e=>e.attrs),n]),[a,t,n]),v=(0,f.useMemo)(()=>{let e=(null==t?void 0:t.length)>0,n=e?t.find(e=>e.id===o):null,i=(null==n?void 0:n.userId)===(null==c?void 0:c.id);return e&&i},[t,o,c]),b=x?100/3:0;return(0,U.Vg)(()=>{var e,i,a,r;if((null==n?void 0:null===(e=n.meta)||void 0===e?void 0:e.width)&&(null==n?void 0:null===(i=n.meta)||void 0===i?void 0:i.height)){let e=ey({vpWidth:g||624,gap:8,ratioW:(null==n?void 0:null===(a=n.meta)||void 0===a?void 0:a.width)||1024,ratioH:(null==n?void 0:null===(r=n.meta)||void 0===r?void 0:r.height)||1024,thumbCount:(null==t?void 0:t.length)||0});(Math.abs(e.wA-u.wA)>=h||Math.abs(e.hA-u.hA)>=h||Math.abs(e.wBCD-u.wBCD)>=h||Math.abs(e.hBCD-u.hBCD)>=h)&&p(e)}},[n,t,g,u,h],[n,t,g]),(0,i.jsxs)(z.s,{dir:"row",w:"100%",ref:m,overflow:"hidden",alignItems:"center",justifyContent:"center",gap:"".concat(8,"px"),children:[(0,i.jsxs)(z.s,{justifyContent:"center",position:"relative",overflow:"hidden",h:u.hA,w:"".concat(100-b,"%"),children:[a?(0,i.jsx)(q.E,{w:"100%",h:u.hA}):(0,i.jsx)(J._,{h:"100%",w:"100%",objectFit:x?"cover":"contain",src:n.src||void 0,fallbackSrc:n.tempUrl||void 0,alt:"",borderRadius:"md"}),!a&&(0,i.jsx)(ed,{currentAttributes:n,position:"absolute",bottom:2,zIndex:"sticky",left:2,deleteImage:d,showDelete:v}),!a&&(0,i.jsx)(ex,{attrs:n,onRateImage:s})]}),x&&(0,i.jsx)(z.s,{alignItems:"center",justifyContent:"center",direction:"column",overflow:"hidden",gap:"".concat(8,"px"),h:u.hA,borderRadius:"base",children:a?Array.from({length:3},(e,t)=>(0,i.jsx)(q.E,{w:u.wBCD,h:u.hBCD})):(0,i.jsx)(i.Fragment,{children:t.slice(0,3).map(e=>(0,i.jsx)(em,{image:e,currentAttributes:n,onImageClick:l,resizeThumbnail:!0,deleteImage:d,isDeleting:r,h:"".concat(u.hBCD,"px"),showQuickActions:!1,showAvatar:!1},e.id))})})]})},ey=e=>{let{vpWidth:t,gap:n,ratioW:i,ratioH:a,thumbCount:r}=e,o=i/a,l=o>ev.C1.square?ev.C1.landscape:o<ev.C1.square?ev.C1.portrait:ev.C1.square,s=t*(l===ev.C1.portrait?.6:.7),d=s/l;return{wA:Math.floor(s),hA:Math.floor(d),wBCD:Math.floor(t-s-n),hBCD:Math.floor((d-n*(r-1))/r)}},ew=e=>{if(e.length<=1)return!1;let t=ej(e[0]);return e.some(e=>ej(e)!==t)},ej=e=>{var t,n,i,a;let r=null!==(i=null==e?void 0:null===(t=e.meta)||void 0===t?void 0:t.width)&&void 0!==i?i:1,o=null!==(a=null==e?void 0:null===(n=e.meta)||void 0===n?void 0:n.height)&&void 0!==a?a:1;return r>o?"landscape":o>r?"portrait":"square"};var ek=n(43342),eC=n(39286);let eS=e=>{let{isEnhancingPrompt:t,isGenerating:n,runEnhancePrompt:a}=e;return(0,i.jsx)(d.z,{position:"absolute",bottom:2,right:2,children:(0,i.jsx)(eo.Tz,{placement:"top",label:(0,i.jsx)(g.x6,{id:"LwcIt2",values:{GAMMA_PROPER_NOUN:eC.On}}),children:(0,i.jsx)(p.$,{variant:"ghost",rightIcon:(0,i.jsx)(m.g,{icon:h.uts}),isLoading:t,isDisabled:n,"aria-label":x.Ru._({id:"eoAiXB"}),onClick:a,zIndex:"sticky",size:"sm",loadingText:x.Ru._({id:"6xU0OU"}),spinner:(0,i.jsx)(ek.y,{size:"sm",right:2,alignSelf:"flex-end"}),spinnerPlacement:"end",children:(0,i.jsx)(g.x6,{id:"Uehxdq"})})})})};var eA=n(33513);let ez=e=>{let{onSelectImage:t,currentAttributes:n,resizeThumbnails:a,history:r,canLoadMore:o,loadMore:l,isLoadingMore:s,isDeleting:d,deleteImage:h,helpText:m}=e,x=f.useMemo(()=>r.map(e=>e.attrs?(0,i.jsx)(u.az,{position:"relative",children:(0,i.jsx)(em,{image:e,deleteImage:h,isDeleting:d,currentAttributes:n,onImageClick:t,resizeThumbnail:a,showQuickActions:!0})},e.id):(console.log("Image is missing attrs",e),null)),[r,h,d,n,t,a]);return(0,i.jsxs)(z.s,{direction:"column",align:"stretch",children:[m&&(0,i.jsx)(c.E,{fontSize:"xs",color:"gray.500",mb:4,children:m}),(0,i.jsx)(eA.A,{columnsCount:3,gutter:"0.5rem",children:x}),o&&(0,i.jsx)(p.$,{variant:"plain",onClick:l,mt:4,isLoading:s,children:(0,i.jsx)(g.x6,{id:"yQ2kGp"})})]})};var eI=n(92515),eR=n(57812),eE=n(19727),eL=n(71792),e_=n(96502),eM=n(71144),eN=n(55769);let eT=e=>{let{onSelectImage:t,savedMediaId:n,currentAttributes:a,scope:r,setScope:o,canLoadMore:l,loadMore:s,isLoading:d,isLoadingMore:p,history:h,deleteImage:m,isDeleting:x}=e,f=()=>d?(0,i.jsx)(eO,{}):0===h.length?(0,i.jsx)(u.az,{mt:10,children:(0,i.jsx)(eP,{})}):(0,i.jsx)(ez,{onSelectImage:t,currentAttributes:a,savedMediaId:n,canLoadMore:l,loadMore:s,isLoadingMore:p,history:h,deleteImage:m,isDeleting:x,helpText:"doc"===r?(0,i.jsx)(g.x6,{id:"uNPCE+",values:{GAMMA_ARTIFACT_PROPER_NOUN:eC.TP}}):(0,i.jsx)(g.x6,{id:"+MrfBb"}),resizeThumbnails:!0});return(0,i.jsxs)(eI.t,{size:"sm",variant:"soft-rounded",onChange:e=>{o&&o(1===e?"user":"doc")},isFitted:!0,children:[(0,i.jsxs)(eR.w,{children:[(0,i.jsx)(eE.o,{children:(0,i.jsx)(c.E,{children:(0,i.jsx)(g.x6,{id:"emHsgB",values:{GAMMA_ARTIFACT_PROPER_NOUN:eC.TP}})})}),(0,i.jsx)(eE.o,{children:(0,i.jsx)(c.E,{children:(0,i.jsx)(g.x6,{id:"4FBm2s"})})})]}),(0,i.jsxs)(eL.T,{children:[(0,i.jsx)(e_.K,{children:f()}),(0,i.jsx)(e_.K,{children:f()})]})]})},eP=()=>(0,i.jsx)(r.T,{spacing:6,children:(0,i.jsx)(eM.p,{size:"md",title:eN.G.title,description:eN.G.description})}),eO=f.memo(()=>(0,i.jsx)(d.z,{spacing:"4",children:(0,i.jsx)(eA.A,{columnsCount:3,gutter:"0.5rem",children:[void 0,void 0,void 0].map((e,t)=>(0,i.jsx)(q.E,{height:{base:"125px",lg:"200px"},width:"100%"},t))})}));eO.displayName="AIImageHistorySkeleton";var eD=n(54651),eF=n(19717),eH=n(80304),eW=n(75251);let eB=e=>{let t,{selectImage:n,savedMediaContext:i}=e,a=(0,F.GV)(V.sX),r=(0,F.GV)(eH.TJ),o=(0,eW.x)(i);"new"===r&&(r=void 0,t=y.rWX.Theme);let[l,s]=(0,f.useState)(""),[d,c]=(0,f.useState)(!1),[u,p]=(0,f.useState)(!1),[h,m]=(0,f.useState)("");return{generate:(0,f.useCallback)(async e=>{let i=(0,b.$F)();s(e.prompt),c(!0),p(!1),m("");let l={...e,stylePreset:e.stylePreset||ev.nv.Theme,stylePrompt:e.stylePrompt||"",docId:e.docId||a,themeId:e.themeId||r,context:e.context||t};try{let e=await (0,L.hU)({interactionId:i,workspaceId:o,...l});if(c(!1),0===e.length)throw Error("No images generated");e.length>0&&n(e[0]),(0,eF.w)("generateImage",void 0,i)}catch(e){p(!0),m((0,L.yC)(e)),c(!1)}c(!1)},[a,r,t,o,n]),isGenerating:d,hasError:u,errorMessage:h,searchQuery:l}};var eV=n(82849);let eG=e=>(0,i.jsx)(eU,{...e}),eU=e=>{var t,n,C,S;let{currentAttributes:A,updateAttributes:z,editor:I,contextualTheme:R,savedMediaContext:E}=e,L=(0,f.useRef)(null),_=(0,F.GV)(W.Gd),M=(0,F.GV)(V.Jo),q=null==M?void 0:M.id,{isInOfflineMode:J}=(0,y.utY)(),$=(0,F.GV)((0,G.A1)(null==M?void 0:null===(t=M.organization)||void 0===t?void 0:t.id)),Y=(0,f.useMemo)(()=>I?"doc":"user",[I]),[Q,X]=(0,f.useState)(Y),Z=null==I?void 0:null===(C=I.getAttributes("document"))||void 0===C?void 0:null===(n=C.aiOptions)||void 0===n?void 0:n.imageOptions,{prompt:ee,addPrompt:et,promptPageInfo:en,nextPrompt:ei,prevPrompt:ea,model:er,setModel:eo,stylePreset:el,setStylePreset:es,stylePrompt:ed,setStylePrompt:ec,aspectRatio:eu,setAspectRatio:ep,getStylePromptFromPreset:eh,stylePresetOptions:em,getPresetDisplayMetadata:eg,getThemeNameFromStylePrompt:ex,imageGenerateConfig:ef,loadImageAiParams:ey,resetImageAiParams:ew,isPromptDirty:ej}=(0,P.S6)({contextualTheme:R,lastUsedImageGenerationSettingsInDoc:Z,aiParams:null==A?void 0:A.aiParams,savedMediaContext:E}),ek=ej(A),eC=(0,B.M)(I),{isEnhancing:eA,setIsEnhancing:eI,runEnhanceImagePrompt:eR}=(0,T.Z8)({editor:(null==I?void 0:I.parentEditor)||I,prompt:(null==I?void 0:I.isSiteNavbarEditor)?"Logo for ".concat(null==_?void 0:_.name):ee,stylePrompt:ed,addPrompt:et}),{history:eE,loadMore:eL,canLoadMore:e_,isLoading:eM,isLoadingMore:eN,deleteImage:eP,isDeleting:eO}=(0,eD.X)({docId:q,scope:Q,savedMediaContext:E}),eF=(0,f.useCallback)(e=>{e.attrs.src&&(0,b.Sf)({imageUrl:e.attrs.src,interactionId:e.interactionId,image:e.attrs})},[]),eH=(0,U.lW)(eF,2e3),eW=(0,f.useCallback)(e=>{ey(e.attrs,"select"),z({tempUrl:(0,K.Ub)(e.attrs.src,K.p7,e.attrs.meta),showPlaceholder:!1,...e.attrs}),I&&eC(I.state.selection.from),eH(e)},[I,ey,eC,z,eH]),{generate:eG,isGenerating:eU,hasError:eK,errorMessage:eq}=eB({selectImage:eW,savedMediaContext:E}),eJ=(0,a.m)(),e$=(null==A?void 0:A.source)==="image.ai-generated"&&!!(null==A?void 0:A.src),eY=null==A?void 0:A.savedMediaId;(0,U.Vg)(()=>{var e;!eU&&(e$&&(null==A?void 0:null===(e=A.aiParams)||void 0===e?void 0:e.prompt)?ey(A,"load"):!e$&&(null==A?void 0:A.query)&&et(A.query,"load"))},[et,A,e$,ey,eU],[A]),(0,f.useEffect)(()=>{setTimeout(()=>{var e;J||null===(e=L.current)||void 0===e||e.focus()},200)},[]);let eQ=(0,f.useMemo)(()=>{var e;return(null==A?void 0:null===(e=A.aiParams)||void 0===e?void 0:e.interactionId)||""},[A]),{savedMedia:eX}=(0,T.B7)(eQ,(null==A?void 0:null===(S=A.aiParams)||void 0===S?void 0:S.prompt)||""),eZ=(0,f.useCallback)(()=>{var e,t,n;if(!I)return null;let{stylePreset:i,model:a,stylePrompt:r}=ef,o=I.getAttributes("document"),l={stylePreset:i,model:a,stylePrompt:i===ev.nv.Custom?r:null!==(n=null===(t=o.aiOptions)||void 0===t?void 0:null===(e=t.imageOptions)||void 0===e?void 0:e.stylePrompt)&&void 0!==n?n:""};I.commands.updateNestedAttributesAtPos(0,{aiOptions:{imageOptions:l}})},[I,ef]);(0,f.useEffect)(()=>{eU&&!(null==A?void 0:A.showPlaceholder)&&(null==A?void 0:A.src)?z({showPlaceholder:!0,loadImageStatus:"queued",loadImageParams:{provider:"aiGenerated",query:ee,options:ef}}):!eU&&(null==A?void 0:A.loadImageStatus)==="queued"&&(null==A?void 0:A.src)&&z({...A,loadImageStatus:"done"})},[eU]);let e0=(0,f.useCallback)(async()=>{if(!eA&&!eU)try{if(0===ee.trim().length){let e=await eR();e&&await eG({...ef,prompt:e})}else await eG({...ef,prompt:ee});eZ()}catch(e){console.error("Error generating AI image",e)}finally{eJ.refetchQueries({include:["GetSavedMedia","GetWorkspaceSavedMedia","GetUserSavedMedia"]}),eI(!1)}},[eA,eU,ee,eZ,eR,eG,ef,eJ,eI]);(0,f.useEffect)(()=>{(null==A?void 0:A.query)||eA||eR()},[]);let e1=(0,k.tO)(e0,"generateImage",H.VV.GAMMA_UPSELL_CALLOUT_AI_CREDITS_IMAGES),e2=(0,f.useCallback)(e=>{"Enter"===e.key&&e.metaKey&&(e.preventDefault(),e1()),e.stopPropagation()},[e1]),{saveImageRating:e4}=(0,T.RM)(),e5=(0,f.useCallback)(e=>{var t;(null==A?void 0:null===(t=A.aiParams)||void 0===t?void 0:t.interactionId)&&((0,b.WN)({rating:e,aiParams:A.aiParams,imageUrl:A.src,interactionId:A.aiParams.interactionId}),e4(A,e))},[A,e4]),e6=(0,f.useCallback)(async e=>{if(await eP(e),e===eY){let t=eX.filter(t=>t.id!==e);t.length>0?eW(t[0]):z({...A,savedMediaId:"",src:"",tempUrl:""})}},[eP,A,eX,eW,eY,z]),e3=(null==A?void 0:A.source)==="image.ai-generated";return(0,i.jsxs)(r.T,{spacing:4,align:"stretch",translate:"no",children:[e3&&(0,i.jsx)(eb,{imagesMatchingInteractionId:eQ?eX:[],currentAttributes:A,isGenerating:eU,isDeleting:eO,selectedSavedMediaId:null!=eY?eY:"",selectImage:eW,onRateImage:e5,deleteImage:e6}),eK&&(0,i.jsxs)(o.F,{status:"error",flexDirection:"row",alignItems:"start",justifyContent:"start",borderRadius:"md",children:[(0,i.jsx)(l._,{}),(0,i.jsx)(s.T,{children:eq})]}),(0,i.jsxs)(r.T,{align:"stretch",spacing:4,children:[(0,i.jsxs)(r.T,{align:"stretch",spacing:1,children:[(0,i.jsx)(d.z,{position:"relative",align:"center",justify:"space-between",children:(0,i.jsx)(c.E,{fontSize:"sm",fontWeight:"semibold",color:eU?"gray.500":"",children:(0,i.jsx)(g.x6,{id:"sU1/3l"})})}),(0,i.jsxs)(u.az,{position:"relative",children:[(0,i.jsx)(v._,{ref:L,isDisabled:eU,placeholder:eA||E===y.rWX.Theme?"":E===y.rWX.Dashboard?x.Ru._({id:"+VHqP0"}):x.Ru._({id:"6RfNWb"}),onKeyDown:e2,value:ee,onChange:e=>et(e.target.value,"update"),"data-testid":"image-search-input",rows:5,initialHeight:"65px",bottomSpacing:35}),I&&(0,i.jsx)(eS,{isEnhancingPrompt:eA,isGenerating:eU,runEnhancePrompt:eR})]}),en.total>1&&(0,i.jsx)(O.M,{alignSelf:"end",promptPageInfo:en,nextPrompt:ei,prevPrompt:ea,isDisabled:eU||eA})]}),(0,i.jsxs)(r.T,{align:"stretch",gap:4,children:[(0,i.jsxs)(r.T,{align:"stretch",children:[(0,i.jsx)(c.E,{fontSize:"sm",fontWeight:"semibold",color:eU?"gray.500":"",children:(0,i.jsx)(g.x6,{id:"0P2jsg"})}),(0,i.jsx)(D.y,{stylePreset:el,stylePrompt:ed,setStylePrompt:ec,setStylePreset:es,presetOptions:em,isDisabled:eU,contextualTheme:R,getThemeNameFromStylePrompt:ex,getPresetDisplayMetadata:eg,onKeyDown:e2,getStylePromptFromPreset:eh})]}),(0,i.jsxs)(d.z,{w:"100%",children:[(0,i.jsxs)(r.T,{w:"100%",align:"stretch",children:[(0,i.jsx)(c.E,{fontSize:"sm",fontWeight:"semibold",color:eU?"gray.500":"",children:(0,i.jsx)(g.x6,{id:"iKM2jY"})}),(0,i.jsx)(N,{value:eu,setValue:ep,model:er,isDisabled:eU})]}),(0,i.jsxs)(r.T,{w:"100%",align:"stretch",children:[(0,i.jsx)(c.E,{fontSize:"sm",fontWeight:"semibold",color:eU?"gray.500":"",children:(0,i.jsx)(g.x6,{id:"scu3wk"})}),er&&(0,i.jsx)(eV.o,{value:er,setValue:eo,isDisabled:eU})]})]})]}),(0,i.jsxs)(r.T,{spacing:1,align:"stretch",children:[(0,i.jsxs)(p.$,{variant:"solid",isLoading:eU,isDisabled:eA,onClick:e1,px:12,children:[(0,i.jsx)(g.x6,{id:"OSaxlZ"}),(0,i.jsx)(j.G,{type:"generateImage",position:"absolute",insetEnd:4})]}),I&&(0,i.jsx)(p.$,{onClick:()=>ew(A),leftIcon:(0,i.jsx)(m.g,{icon:h.ub2}),isDisabled:!ek||eU,sx:{opacity:ek?1:.5,transition:"opacity 0.2s ease-in-out",_hover:{color:ek?"trueblue.500":""}},children:(0,i.jsx)(g.x6,{id:"L+rMC9"})}),(0,i.jsx)(w.f,{modalId:"ai-credits-modal-message-list",variant:"ghost",justify:"flex-end",segmentEvent:H.VV.GAMMA_UPSELL_CALLOUT_AI_CREDITS_IMAGES})]})]}),I&&($?(0,i.jsx)(eT,{onSelectImage:eW,savedMediaId:eY,currentAttributes:A,scope:Q,setScope:X,canLoadMore:e_,loadMore:eL,isLoading:eM,isLoadingMore:eN,history:eE,deleteImage:e6,isDeleting:eO,resizeThumbnails:!0}):(0,i.jsx)(ez,{onSelectImage:eW,savedMediaId:eY,currentAttributes:A,scope:Q,setScope:X,canLoadMore:e_,loadMore:eL,isLoading:eM,isLoadingMore:eN,history:eE,deleteImage:e6,isDeleting:eO,resizeThumbnails:!0}))]})};eG.key="image.ai-generated"},55769:(e,t,n)=>{"use strict";n.d(t,{G:()=>r});var i=n(31085),a=n(95640);let r={originalTitle:(0,i.jsx)(a.x6,{id:"0oUc2U"}),title:(0,i.jsx)(a.x6,{id:"0MyRmc"}),description:(0,i.jsx)(a.x6,{id:"s3XYLh"}),image:"https://cdn.gamma.app/zc87vhr30n8uf3n/9f0b4d71d10f4d388e50febe89bb1853/optimized/Sal-Chill-Cloud.svg"}},82849:(e,t,n)=>{"use strict";n.d(t,{o:()=>q});var i=n(31085),a=n(14041),r=n(63552),o=n(64444),l=n(33473),s=n(25420),d=n(18651),c=n(61778),u=n(11403),p=n(49547),h=n(63341),m=n(18528),g=n(80853),x=n(62313),f=n(40173),v=n(19098),b=n(98903),y=n(72821),w=n(48310),j=n(81575),k=n(93185),C=n(20501),S=n(24221),A=n(57754),z=n(43087),I=n(14291),R=n(68984),E=n(78821),L=n(64225),_=n(10458),M=n(5933),N=n(44507),T=n(2600),P=n(80532),O=n(95640),D=n(12327),F=n(82223),H=n(63723);let W=e=>{let{numSegments:t,numFilledSegments:n,startColor:a,endColor:r}=e,[o,l]=(0,F.rd)("colors",[a,r||a]);return(0,i.jsx)(s.s,{gap:1,w:"full",alignItems:"center",children:Array.from({length:t}).map((e,a)=>{let r=a<n?(0,H.tV)(o,l,t>1?a/(t-1):0):"gray.200";return(0,i.jsx)(P.az,{h:1.5,borderRadius:"sm",flex:1,bg:r,transition:"background 0.2s ease-in-out"},a)})})},B=(0,a.memo)(e=>{let{label:t,description:n,image:a,popoverImage:r,bestStyle:o,bestType:l,speed:s}=e;return(0,i.jsxs)(T.T,{align:"stretch",p:4,spacing:4,children:[(0,i.jsxs)(P.az,{position:"relative",children:[r&&(0,i.jsx)(d._,{src:r.src,alt:t(),borderRadius:"lg",objectFit:"cover",height:"140px",width:"250px"}),(0,i.jsx)(P.az,{position:"absolute",backgroundColor:(0,H.$3)("black",.4),bottom:2,left:2,p:1,borderRadius:"sm",children:(0,i.jsx)(c.E,{color:"gray.50",fontSize:"xs",fontWeight:"medium",lineHeight:"normal",children:D.Ru._({id:"HmI5oK"})})})]}),(0,i.jsxs)(T.T,{align:"stretch",spacing:3,children:[(0,i.jsxs)(x.z,{spacing:2,children:[(0,i.jsx)(d._,{src:a.src,w:"20px",h:"20px",objectFit:"contain"}),(0,i.jsx)(c.E,{fontWeight:"semibold",fontSize:"md",color:"gray.800",children:t()})]}),(0,i.jsx)(c.E,{fontSize:"xs",color:"gray.500",fontWeight:"medium",children:n()}),(0,i.jsxs)(P.az,{children:[(0,i.jsx)(c.E,{fontSize:"xs",color:"gray.400",fontWeight:"semibold",mb:2,children:(0,i.jsx)(O.x6,{id:"l9wI00"})}),(0,i.jsx)(W,{numSegments:4,numFilledSegments:s,startColor:"trueblue.400",endColor:"orchid.500"})]}),(0,i.jsxs)(P.az,{children:[(0,i.jsx)(c.E,{fontSize:"xs",color:"gray.400",fontWeight:"semibold",mb:1,children:(0,i.jsx)(O.x6,{id:"uvPTBJ"})}),(0,i.jsxs)(T.T,{align:"stretch",spacing:1,children:[(0,i.jsxs)(x.z,{spacing:2,children:[(0,i.jsx)(S.g,{icon:C.ffg,color:(0,H.Lm)("trueblue.400"),size:"xs",width:"0.625rem",height:"0.625rem"}),(0,i.jsx)(c.E,{fontSize:"xs",color:"gray.600",fontWeight:"medium",children:o()})]}),(0,i.jsxs)(x.z,{spacing:2,children:[(0,i.jsx)(S.g,{icon:C.kLe,color:(0,H.Lm)("trueblue.400"),size:"xs",width:"0.625rem",height:"0.625rem"}),(0,i.jsx)(c.E,{fontSize:"xs",color:"gray.600",fontWeight:"medium",fontFamily:"body",children:l()})]})]})]})]})]})});B.displayName="AIImageModelPopover";var V=n(33539);let G=(0,r.R)((e,t)=>{let{model:n,...r}=e;return(0,i.jsx)(o.W,{children:(0,a.createElement)(l.k,{...r,ref:t,key:n.model},(0,i.jsxs)(s.s,{justify:"space-between",align:"center",width:"100%",children:[(0,i.jsxs)(s.s,{justify:"start",align:"center",children:[(0,i.jsx)(d._,{src:n.image.src,w:"1.5em",h:"1.5em",objectFit:"contain"}),(0,i.jsx)(c.E,{ps:2,fontSize:"sm",children:n.label()})]}),(0,i.jsx)(c.E,{color:"gray.400",fontSize:"xs",children:n.creatorLabel()})]}))})});G.id="MenuItemOption";let U=e=>{let{productKey:t,productFeature:n,canUseTier:a,styles:r}=e;return(0,i.jsxs)(s.s,{justify:"start",align:"center",width:"100%",children:[(0,i.jsx)(c.E,{sx:{...r.groupTitle,marginInlineEnd:2},children:(0,E.kf)(t).header}),n&&(0,i.jsx)(I.Ch,{canUseFeature:a,productFeature:n})]})},K=e=>{let{availableModels:t,handleModelSelect:n,canUsePlusModels:r,canUseProModels:o,selectedModel:l,isDisabled:z}=e,[I,R]=(0,a.useState)(null),E=(0,u.o5)("Menu",{}),L=e=>{let{tier:a}=e;return t.filter(e=>(0,A.kO)(e.model)===a).map(e=>(0,i.jsx)(G,{model:e,value:e.model,onClick:()=>n(e.model,a),onMouseEnter:()=>R(e)},e.model))};return(0,i.jsx)(p.MJ,{children:(0,i.jsxs)(h.W,{isLazy:!0,children:[(0,i.jsx)(m.I,{as:g.$,variant:"plain",isDisabled:z,w:"100%",textAlign:"start",justifyContent:"space-between",rightIcon:(0,i.jsx)(S.g,{icon:C.Jt$}),boxShadow:"none",size:"sm",children:(0,i.jsxs)(x.z,{spacing:2,children:[(0,i.jsx)(s.s,{width:"24px",height:"24px",align:"center",justify:"center",children:(0,i.jsx)(d._,{src:l.image.src,w:"1.25em",h:"1.25em",objectFit:"contain"})}),(0,i.jsx)(c.E,{as:"span",flex:1,children:null==l?void 0:l.label()})]})}),(0,i.jsx)(f.Z,{children:(0,i.jsxs)(v.A,{isLazy:!0,variant:"modal",placement:"start-start",matchWidth:!1,offset:[0,0],trigger:"hover",children:[(0,i.jsx)(b.d,{children:(0,i.jsx)(y.c,{minWidth:"250px",w:"350px",maxH:"350px",overflowY:"auto",overflowX:"hidden",zIndex:"modalPopover",border:"1px solid",borderColor:"gray.200",onMouseLeave:()=>R(null),children:(0,i.jsxs)(w.i,{type:"radio",value:l.model,children:[(0,i.jsx)(U,{productKey:"free",canUseTier:!0,styles:E}),L({tier:"free"}),(0,i.jsx)(j.N,{}),(0,i.jsx)(U,{productKey:"plus",productFeature:"ai_models_plus",canUseTier:r,styles:E}),L({tier:"plus"}),(0,i.jsx)(j.N,{}),(0,i.jsx)(U,{productKey:"pro",productFeature:"ai_premium_models",canUseTier:o,styles:E}),L({tier:"pro"})]})})}),!(0,N.Xb)()&&I&&(0,i.jsx)(k.h,{width:"282px",children:(0,i.jsx)(B,{label:I.label,description:I.description,image:I.image,popoverImage:V.m.None[I.model],bestStyle:I.bestStyle,bestType:I.bestType,speed:I.speed})})]})})]})})},q=e=>{let{value:t,setValue:n,isDisabled:r}=e,o=(0,A.pE)(t),l=(0,L.GV)(M.Jo),s=(0,z.ez)("ai_models_plus",null==l?void 0:l.organization),d=(0,z.ez)("ai_premium_models",null==l?void 0:l.organization),{openUpsellModal:c}=(0,R.I)(),u=(0,a.useCallback)((e,t)=>{if("plus"!==t||s){if("pro"===t&&!d){c({segmentEvent:_.VV.GAMMA_UPSELL_CALLOUT_AI_IMAGE_MODELS,eventProperties:{model:e}});return}}else{c({segmentEvent:_.VV.GAMMA_UPSELL_CALLOUT_AI_IMAGE_MODELS,eventProperties:{model:e}});return}n(e)},[s,d,c,n]);return(0,i.jsx)(K,{handleModelSelect:u,canUsePlusModels:s,canUseProModels:d,availableModels:(0,A.vp)().filter(e=>(0,A.CX)(e.model)),selectedModel:{...o,model:t},isDisabled:r})}},66712:(e,t,n)=>{"use strict";n.d(t,{VG:()=>R,Yq:()=>I,Sf:()=>S});var i=n(31085),a=n(2600),r=n(2219),o=n(62313),l=n(20671),s=n(80853),d=n(90290),c=n(69648),u=n(95640),p=n(12327),h=n(14041),m=n(64225),g=n(5933),x=n(17539),f=n(77214);let v={thumbnail:void 0,embed:void 0,meta:void 0,sourceUrl:void 0},b=e=>{let{links:{icon:t},meta:{title:n,description:i,duration:a,site:r,medium:o}={}}=e;return{...Object.entries({title:null==n?void 0:n.slice(0,200),description:null==i?void 0:i.slice(0,500),duration:a,site:r,medium:o}).reduce((e,t)=>{let[n,i]=t;return i?{...e,[n]:i}:e},{}),icon:t&&t[0]?t[0].href:void 0}},y=async e=>{var t,n,i,a,r,o;let l=await fetch("https://cdn.iframe.ly/api/iframely/?url=".concat(encodeURIComponent(e),"&key=").concat("a68bac8b6624d46b6d0ba46e5b3f8971","&iframe=1&omit_script=1")),s=await l.json();if(console.debug("[Iframely]",s),s.error)return Promise.reject(s);let{html:d,links:c,meta:u}=s,{player:p,reader:h,app:m,thumbnail:g}=c,x=p||h||m,f=x?x.filter(e=>"text/html"===e.type&&e.href)[0]||x[0]:null,v=u&&!u.xframe&&(!u.csp||!u.csp.includes("frame-ancestors"));return{sourceUrl:(null==u?void 0:u.canonical)||e,embed:f?{url:f.href,html:d,height:null===(t=f.media)||void 0===t?void 0:t.height,width:(null===(n=f.media)||void 0===n?void 0:n.width)||(null===(i=f.media)||void 0===i?void 0:i["max-width"]),aspectRatio:null===(a=f.media)||void 0===a?void 0:a["aspect-ratio"]}:v?{url:e}:void 0,meta:b(s),thumbnail:g&&g[0]?{src:g[0].href,height:null===(r=g[0].media)||void 0===r?void 0:r.height,width:null===(o=g[0].media)||void 0===o?void 0:o.width}:void 0}};var w=n(5150),j=n(90886),k=n(1087),C=n(19099);let S=e=>{try{var t,n;let i=new DOMParser().parseFromString(e,"text/html");return(null===(t=i.querySelector("iframe"))||void 0===t?void 0:t.src)||(null===(n=i.querySelector("blockquote"))||void 0===n?void 0:n.cite)||!1}catch(e){return!1}},A=e=>{let t=e.match(/^https?:\/\/www\.tiktok\.com/),n=e.match(/^https?:\/\/(www\.|staging\.)?gamma.app/);return t||n},z=async e=>{var t,n,i,a,r;let o,l;try{if(A(e)){let t=e.split("?")[0];o=await y(t)}else o=await y(e)}catch(t){if(403===t.status||404===t.status||415===t.status){for(let{key:t,urlRegex:n,canEmbedPrivate:i,defaultDisplayStyle:a}of k.NR)if(n&&e.match(n)&&i)return{...v,source:t,proxy:!1,url:e,meta:{title:p.Ru._({id:"SuoEIZ"})},sourceUrl:e,displayStyle:a||"inline"}}throw Error("Code: ".concat(t.status,". Message: ").concat(t.error))}if(!o)throw Error("No link metadata found");for(let{key:e,urlRegex:t}of k.NR)if(t&&(null===(a=o.sourceUrl)||void 0===a?void 0:a.match(t))){l=e;break}if(l){let e=k.Dc[l];return{...v,...o,source:l,proxy:!1,url:(null===(r=o.embed)||void 0===r?void 0:r.url)||o.sourceUrl,displayStyle:e.defaultDisplayStyle}}return(null===(t=o.meta)||void 0===t?void 0:t.medium)=="audio"||(null===(n=o.meta)||void 0===n?void 0:n.medium)==="video"?{...v,...o,source:j.G.key}:(null===(i=o.embed)||void 0===i?void 0:i.url)?{...v,...o,source:C.J.key,proxy:!1,url:o.embed.url}:{...v,...o,source:C.J.key,proxy:!0,url:e}},I=async(e,t)=>await z(e).then(e=>(t(e),e)).then(e=>E(e,t)),R=e=>{let{currentUrl:t="",updateAttributes:n,handleSubmit:m,handleDataSubmit:g,placeholder:v,noHeader:b}=e,[y,w]=(0,h.useState)(t||""),[j,k]=(0,h.useState)(),C=y!==t;(0,h.useEffect)(()=>{t&&w(t)},[t]),(0,h.useEffect)(()=>{k(void 0)},[y]);let A=(0,h.useCallback)(e=>{if(0===e.indexOf("data:")){if(g){try{(0,x.Xz)(e)}catch(e){k(p.Ru._({id:"YqH0TR"}));return}return g(e)}return void k(p.Ru._({id:"YqH0TR"}))}let t=S(e);if(t&&(e=t),!(0,f.Se)(e)&&(e="https://"+e,!(0,f.AY)(e))){k(p.Ru._({id:"YqH0TR"}));return}return m?m(e):n?I(e,n).catch(e=>{console.error("Error fetching URL",e),k(p.Ru._({id:"dZyJFB"}))}):void console.error("No submit handler provided")},[g,m,n]),z=(0,h.useCallback)(()=>{A(y.trim())},[A,y]),R=(0,h.useCallback)(e=>{t||A(e.clipboardData.getData("text/plain").trim())},[t,A]);return(0,i.jsxs)(a.T,{align:"flex-start",spacing:4,w:"100%",children:[!b&&(0,i.jsx)(r.D,{size:"md",children:(0,i.jsx)(u.x6,{id:"D89ve+"})}),(0,i.jsxs)(o.z,{align:"flex-start",spacing:2,w:"100%",children:[(0,i.jsx)(l.p,{placeholder:v,onKeyDown:e=>{"Enter"===e.key&&z()},onPaste:R,value:y,onChange:e=>w(e.target.value),flex:1,"data-testid":"url-input"}),(0,i.jsx)(s.$,{onClick:z,isDisabled:!C,children:(0,i.jsx)(u.x6,{id:"4pSxwB"})})]}),j&&(0,i.jsxs)(d.F,{status:"error",children:[(0,i.jsx)(c._,{}),j]})]})},E=async(e,t)=>{let n=(0,m.KA)().getState(),i=(0,g.aQ)(n);if(!i){console.error("[uploadIframelyThumbnail] No orgId specified, bailing");return}let a={...e.thumbnail},r=a.src;if(r&&void 0!==a)try{await (0,w.j_)(r,i,{onUploadComplete:e=>(a&&(a.src=e.src,a.width=e.meta.width,a.height=e.meta.height,t({thumbnail:a})),Promise.resolve()),onOriginalFileUpload:e=>(a&&(a.src=e.src,a.width=e.meta.width,a.height=e.meta.height,t({thumbnail:a})),Promise.resolve()),onUploadFailed:e=>(console.error("[iframely] Thumbnail upload error: ",e),Promise.reject())},"iframelyThumbnail")}catch(e){console.error("[iframely] Thumbnail upload error: ",e)}}},21098:(e,t,n)=>{"use strict";n.d(t,{p:()=>j});var i=n(31085),a=n(32202),r=n(2600),o=n(2219),l=n(61778),s=n(18651),d=n(80853),c=n(20671),u=n(63633),p=n(62313),h=n(95640),m=n(12327),g=n(16422),x=n(4977),f=n(64225),v=n(94007),b=n(5933),y=n(17539),w=n(66712);let j=e=>{let{updateAttributes:t,currentAttributes:n}=e,{sourceUrl:j,meta:k,thumbnail:C}=n,S=(0,f.GV)(b.aQ),A=(0,a.d)(),z=async()=>{j&&await (0,w.Yq)(j,t).catch(e=>{console.error("[EMBED METADATA] Error restoring preview defaults",e),A({title:m.Ru._({id:"cgB+pO",values:{0:e.error}}),status:"error",isClosable:!0,position:"top"})})};return(0,i.jsxs)(r.T,{pt:4,align:"stretch",spacing:4,children:[(0,i.jsxs)(r.T,{align:"stretch",children:[(0,i.jsx)(o.D,{size:"md",children:(0,i.jsx)(h.x6,{id:"qbzc6p"})}),(0,i.jsx)(l.E,{fontSize:"sm",color:"gray.600",children:(0,i.jsx)(h.x6,{id:"D9R1mI"})})]}),(0,i.jsxs)(r.T,{align:"stretch",p:4,borderRadius:"lg",border:"1px solid var(--chakra-colors-blue-500)",bg:"gray.100",spacing:4,children:[(null==C?void 0:C.showPlaceholder)?(0,i.jsx)(v.Pf,{hasUploadError:(null==C?void 0:C.uploadStatus)===x.A.Error,isUploading:(null==C?void 0:C.uploadStatus)===x.A.Uploading,height:"200px",borderRadius:"md"}):C?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s._,{src:C.src||C.tempUrl||"",alt:(null==k?void 0:k.title)||"",ignoreFallback:!0,borderRadius:"md"}),(0,i.jsx)(d.$,{isDisabled:C.uploadStatus===x.A.Uploading,onClick:()=>{t({thumbnail:void 0})},children:(0,i.jsx)(h.x6,{id:"YFcW0s"})})]}):S&&(0,i.jsx)(g.Z,{onUploadStart:e=>{let{file:n,tempUrl:i}=e;n.type&&(0,y.aI)(n.type)?t({thumbnail:{uploadStatus:x.A.Uploading,showPlaceholder:!0,tempUrl:null}}):t({thumbnail:{tempUrl:i,uploadStatus:x.A.Uploading,showPlaceholder:!1}})},onUploadSuccess:e=>{let{src:n}=e;t({thumbnail:{src:n}})},onUploadFailed:e=>{console.error("[EMBED METADATA] Error uploading thumbnail image",e),t({thumbnail:{uploadStatus:x.A.Error,showPlaceholder:!0,tempUrl:null}})},orgId:S||"",uploadType:"image",editType:"icon",dropHereText:m.Ru._({id:"yxTfZB",values:{0:"%{browse}"}}),customHeight:"200px",customFontSize:"sm"}),(0,i.jsxs)(r.T,{mt:2,align:"stretch",children:[(0,i.jsx)(l.E,{children:(0,i.jsx)(h.x6,{id:"MHrjPM"})}),(0,i.jsx)(c.p,{bg:"white",value:(null==k?void 0:k.title)||"",placeholder:m.Ru._({id:"bTzMt5"}),onChange:e=>{t({meta:{...k,title:e.target.value}})},"data-testid":"title-input"})]}),(0,i.jsxs)(r.T,{align:"stretch",children:[(0,i.jsx)(l.E,{children:(0,i.jsx)(h.x6,{id:"Nu4oKW"})}),(0,i.jsx)(u.T,{bg:"white",rows:4,value:(null==k?void 0:k.description)||"",placeholder:m.Ru._({id:"2VBqT4"}),onChange:e=>{t({meta:{...k,description:e.target.value}})}})]}),(0,i.jsxs)(r.T,{align:"stretch",children:[(0,i.jsx)(l.E,{children:(0,i.jsx)(h.x6,{id:"On0aF2"})}),(0,i.jsxs)(p.z,{children:[(null==k?void 0:k.icon)&&(0,i.jsx)(s._,{src:k.icon,h:"1.5em",borderRadius:"sm"}),(0,i.jsx)(c.p,{bg:"white",value:(null==k?void 0:k.site)||"",placeholder:m.Ru._({id:"SmWcKR"}),onChange:e=>{t({meta:{...n.meta,site:e.target.value}})}})]})]})]}),(0,i.jsx)(d.$,{onClick:z,children:(0,i.jsx)(h.x6,{id:"Z00hdC"})})]})}},4977:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var i=function(e){return e[e.Done=0]="Done",e[e.Uploading=1]="Uploading",e[e.Error=2]="Error",e[e.Queued=3]="Queued",e}({})},23331:(e,t,n)=>{"use strict";n.d(t,{D:()=>a});var i=n(17539);let a=e=>{var t,n;return!!(e.src&&!(0,i.v7)(e.src)&&!(0,i.SV)(e.src)&&!((null===(t=e.meta)||void 0===t?void 0:t.frame_count)&&(null===(n=e.meta)||void 0===n?void 0:n.frame_count)>1))}},90754:(e,t,n)=>{"use strict";n.d(t,{E:()=>l});var i=n(55276),a=n(14041),r=n(32133),o=n(73524);let l=e=>{let{id:t,...n}=e,{isOpen:l,onOpen:s,onClose:d}=(0,i.j)(n),c=(0,r.wA)();return(0,a.useEffect)(()=>{t&&c((0,o.WI)({id:t,isOpen:l}))},[l,c,t]),(0,a.useEffect)(()=>()=>{t&&c((0,o.WI)({id:t,isOpen:!1}))},[c,t]),{isOpen:l,onOpen:s,onClose:d}}},14291:(e,t,n)=>{"use strict";n.d(t,{Ch:()=>d,sR:()=>s,zL:()=>l});var i=n(31085),a=n(27670),r=n(78821),o=n(88679);let l=e=>{let{product:t="pro",...n}=e;return(0,i.jsx)(a.E,{fontSize:"xxs",bottom:0,insetEnd:0,variant:t,...n,children:(0,o.Ok)()[t].name})},s=e=>{let{workspace:t,...n}=e,a=(0,r.A4)(t);return(0,i.jsx)(l,{...n,product:null!=a?a:"free"})},d=e=>{let{canUseFeature:t,productFeature:n,...a}=e,o=(0,r.gD)(n);return t||null===o?null:(0,i.jsx)(l,{product:o,...a})}},49614:(e,t,n)=>{"use strict";n.d(t,{c:()=>h});var i=n(31085),a=n(56824),r=n(25420),o=n(35687),l=n(62313),s=n(61778),d=n(80853),c=n(95640),u=n(35002),p=n(68984);let h=e=>{let{title:t=(0,i.jsx)(c.x6,{id:"0i4o6E"}),description:n,buttonLabel:h,onOpenCallback:m,onCloseCallback:g,segmentEvent:x,isNarrow:f,...v}=e,b=(0,u.u)("upsellUXEnabled_Pro"),{openUpsellModal:y,product:w}=(0,p.I)(),j={light:{bg:"trueblue.50",bgGradient:"linear-gradient(0deg, var(--chakra-colors-gray-50) 0%, white  100%)",border:"trueblue.200",title:"gray.900",description:"gray.700",borderGradient:"var(--chakra-colors-gradient-brand-bg)"},dark:{bg:"gray.800",bgGradient:"linear-gradient(0deg, var(--chakra-colors-gray-900) 0%, var(--chakra-colors-gray-800) 100%)",border:"trueblue.400",title:"gray.50",description:"gray.100",borderGradient:"var(--chakra-colors-gradient-brand-bg)"}}["light"===(0,a.G6)().colorMode?"light":"dark"];return"pro"!==w&&b?(0,i.jsxs)(r.s,{flex:1,w:"100%",mb:4,p:4,bgGradient:j.bgGradient,position:"relative",flexDirection:f?"column":"row",align:"center",borderRadius:"lg",gap:4,zIndex:1,boxShadow:"md",_before:{content:'""',position:"absolute",inset:0,borderRadius:"lg",border:"".concat(2,"px solid transparent"),background:"".concat(j.borderGradient," border-box"),mask:"linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0)",maskComposite:"subtract",opacity:.7},...v,children:[(0,i.jsxs)(o.B,{flex:2,alignSelf:"stretch",children:[(0,i.jsx)(l.z,{spacing:3,children:(0,i.jsx)(s.E,{color:j.title,fontWeight:"bold",lineHeight:"1.3",children:t})}),(0,i.jsx)(s.E,{color:j.description,fontSize:"md",children:n||(0,i.jsx)(c.x6,{id:"Ah1+bS"})})]}),(0,i.jsx)(o.B,{spacing:1,flex:0,justifyContent:"flex-end",children:(0,i.jsx)(d.$,{variant:"solid",colorScheme:"trueblue",size:"md","data-test-id":"ai-credits-upsell",onClick:()=>{y({onOpenCallback:m,onCloseCallback:g,segmentEvent:x})},children:h||(0,i.jsx)(c.x6,{id:"kwkhPe"})})})]}):null}},43087:(e,t,n)=>{"use strict";n.d(t,{g7:()=>i.g,vT:()=>a.vT,nk:()=>a.nk,ez:()=>a.ez,Fd:()=>a.Fd});var i=n(53013),a=n(32849);n(14041)},62911:(e,t,n)=>{"use strict";n.d(t,{r:()=>h});var i=n(31085),a=n(56824),r=n(35687),o=n(80532),l=n(61778),s=n(12917),d=n(24221),c=n(95640),u=n(14041);let p={padding:{sm:4,md:4,lg:6},fontSize:{sm:"sm",md:"md",lg:"lg"},iconSize:{sm:"lg",md:"2x",lg:"3x"},labelFontSize:{sm:"xs",md:"sm",lg:"md"},spacing:{sm:1,md:2,lg:3}},h=(0,u.memo)(e=>{let{description:t,heading:n,isConnected:u=!0,size:h="lg",...m}=e,g=(0,a.dU)("gray.50","whiteAlpha.100");if(u)return null;let{spacing:x,padding:f,iconSize:v,fontSize:b,labelFontSize:y}=p;return(0,i.jsxs)(r.B,{spacing:x[h],p:f[h],borderRadius:"lg",bg:g,textAlign:"center",alignItems:"center",...m,children:[(0,i.jsx)(o.az,{opacity:.5,children:(0,i.jsx)(d.g,{icon:s.seF,size:v[h]})}),(0,i.jsx)(l.E,{fontWeight:"600",fontSize:b[h],mt:2,children:n||(0,i.jsx)(c.x6,{id:"ysdDIA"})}),(0,i.jsx)(l.E,{color:"gray.500",fontSize:y[h],children:t})]})});h.displayName="OfflineInfoBox"},99070:(e,t,n)=>{"use strict";n.d(t,{Wm:()=>c,t3:()=>d,uR:()=>p,ww:()=>u});var i=n(14041),a=n(32133),r=n(64225),o=n(41057),l=n(12790),s=n(9138);let d=()=>(0,r.GV)((0,s.lp)("left")),c=()=>(0,r.GV)((0,s.lp)("right")),u=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=e.panelPosition,l=(0,a.wA)(),d=(0,r.GV)((0,s.El)(e)),c=(0,i.useCallback)(()=>{l((0,s.TQ)({component:e}))},[e,l]);return(0,o.V)(()=>{!t&&d&&l((0,s.Zv)({position:n}))},[d,l,t,n],[t]),{togglePanel:(0,i.useCallback)(i=>{if(!t)return;let a=!d;(null==i?void 0:i.override)==="open"?a=!0:(null==i?void 0:i.override)==="closed"&&(a=!1),a?l((0,s.NE)({component:e,disableTransition:!!(null==i?void 0:i.disableTransition),isResizable:!!(null==i?void 0:i.isResizable),props:null==i?void 0:i.props})):l((0,s.Zv)({position:n}))},[e,n,d,l,t]),initPanel:c,isPanelOpen:d}},p=()=>{let e=(0,i.useMemo)(()=>new l.$u,[]),t=(0,i.useMemo)(()=>new l.$u,[]),n=(0,i.useMemo)(()=>new l.$u,[]);return(0,i.useEffect)(()=>{if(!n||!e||!t)return;let i=e.pipe(n),a=t.pipe(n);return()=>{i(),a()}},[e,t,n]),{leftPanelLifecycle:e,rightPanelLifecycle:t,globalPanelLifecycle:n}}},26860:(e,t,n)=>{"use strict";n.d(t,{X:()=>i});let i=()=>{let e=document.createElement("div");e.style.visibility="hidden",e.style.overflow="scroll",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e);let t=document.createElement("div");e.appendChild(t);let n=e.offsetWidth-t.offsetWidth;return e.parentNode.removeChild(e),n}},89059:(e,t,n)=>{"use strict";n.d(t,{xT:()=>ec,Vb:()=>f,X2:()=>eg,q8:()=>g.q8});var i=n(31085),a=n(20931),r=n(76166),o=n(35436),l=n(20671),s=n(61778),d=n(9104),c=n(12327),u=n(14041),p=n(23832),h=n(64225),m=n(44507),g=n(23013);let x=()=>c.Ru._({id:"NiZZRh"}),f=e=>{let{isDisabled:t}=e,n=(0,h.jL)(),c=(0,p.n)(x),f=(0,u.useCallback)(()=>{n((0,g.q8)({isOpen:!0}))},[n]),v=(0,u.useCallback)(e=>{n((0,g.q8)({isOpen:!0,initialQuery:e.target.value}))},[n]);return(0,i.jsxs)(r.M,{children:[(0,i.jsx)(o.W,{pointerEvents:"none",children:(0,i.jsx)(a.W,{color:"gray.300"})}),(0,i.jsx)(l.p,{placeholder:c,_placeholder:{opacity:1},onChange:v,onClick:f,value:"",isDisabled:t}),!(0,m.Xb)()&&(0,i.jsx)(o.t,{pointerEvents:"none",children:(0,i.jsx)(s.E,{marginInlineEnd:6,fontWeight:"600",color:"gray.400",fontSize:"sm",bg:"gray.50",px:1,borderRadius:"md",children:(0,d.lp)("Mod+K")})})]})};var v=n(18588),b=n(59742),y=n(97482),w=n(18658),j=n(32133),k=n(78776),C=n(78354),S=n(12567),A=n(6657),z=n(57882);let I=(0,S.Ay)("mod+K"),R=e=>{let{isEnabledFn:t=()=>!0,isOpen:n=!1}=e,{user:i}=(0,z.ur)(),a=(0,j.wA)();(0,u.useEffect)(()=>{if(!(0,m.Xb)()&&i)return A.WC.on("keydown","GLOBAL_SEARCH",e=>!!(I(e)&&t())&&(e.preventDefault(),a((0,g.q8)({isOpen:!n})),!0))},[a,t,i,n])};var E=n(25420),L=n(65446),_=n(95640),M=n(17228),N=n.n(M),T=n(50877),P=n(62911),O=n(92667),D=n(86724),F=n(14691),H=n(43342);let W=e=>{let{onChange:t,query:n,isDisabled:s,isLoading:d,isFocused:p}=e,h=(0,u.useRef)(null);return(0,u.useEffect)(()=>{h.current&&p&&(h.current.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}),h.current.focus())},[h,p]),(0,i.jsxs)(r.M,{size:"lg",variant:"unstyled",sx:{input:{paddingInlineStart:12}},children:[(0,i.jsx)(o.W,{p:4,pointerEvents:"none",color:"gray.300",children:(0,i.jsx)(a.W,{})}),(0,i.jsx)(l.p,{isDisabled:s,placeholder:c.Ru._({id:"NiZZRh"}),p:3,border:"none",outline:"none",shadow:"none",value:n,onChange:t,_placeholder:{opacity:1,color:"gray.300"},ref:h}),(0,i.jsx)(o.t,{p:4,pointerEvents:"none",color:"gray.500",opacity:d?1:0,transitionProperty:"common",transitionDuration:"normal",marginInlineEnd:(0,m.Xb)()?8:0,children:(0,i.jsx)(H.y,{size:"sm"})})]})};var B=n(23970),V=n(27559),G=n(70323),U=n(62313),K=n(26848),q=n(18201),J=n(9021);let $=e=>{let{onClose:t,showTip:n}=e;return(0,i.jsxs)(V.S,{in:n,children:[(0,i.jsx)(G.c,{}),(0,i.jsxs)(U.z,{p:4,px:6,children:[(0,i.jsxs)(s.E,{fontSize:"sm",color:"gray.600",children:[(0,i.jsxs)("span",{role:"img","aria-label":"Wave",children:["\uD83D\uDC4B"," "]}),(0,i.jsx)(_.x6,{id:"3SXj0j",values:{0:(0,d.lp)("Mod+K")},components:{0:(0,i.jsx)(K.u,{})}})]}),(0,i.jsx)(q.h,{}),(0,i.jsx)(J.K,{"aria-label":c.Ru._({id:"yz7wBu"}),icon:(0,i.jsx)(B.U,{boxSize:2.5}),isRound:!0,size:"xs",variant:"ghost",onClick:t})]})]})};var Y=n(35687),Q=n(92712),X=n(80532),Z=n(24221),ee=n(79182),et=n(92405);let en=e=>{let{result:t,isActive:n,focusedItemEl:a,onMouseMove:r,onClick:o}=e,{name:l,id:u,slug:p,isMember:h,memberCount:m,members:g}=t;return(0,i.jsx)(Q.Q,{children:(0,i.jsxs)(U.z,{ref:n?a:null,className:"search-result",wordBreak:"break-word",onMouseMove:r,p:3,align:"flex-start",alignItems:"center",borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",role:"group",bg:n?"gray.100":"transparent",cursor:"pointer",color:"gray.800",borderWidth:"1px",borderColor:n?"gray.200":"transparent",spacing:{base:0,sm:4},onClick:o,children:[(0,i.jsx)(X.az,{p:2,children:(0,i.jsx)(Z.g,{icon:ee.$Q})}),(0,i.jsx)(Y.B,{spacing:2,flex:"1",children:(0,i.jsxs)(Q.r,{href:(0,et.gU)({id:u,slug:p}),children:[(0,i.jsx)(s.E,{children:l}),(0,i.jsx)(s.E,{fontSize:"sm",color:"gray.400",children:h?(0,i.jsx)(_.x6,{id:"tWPlLK",values:{0:m||0}}):(0,i.jsx)(_.x6,{id:"pkIIls",values:{0:m||0}})})]})}),(0,i.jsx)(q.h,{}),(0,i.jsx)(d.KZ,{overflowTooltipLabel:c.Ru._({id:"25VyZX"}),size:"xs",avatars:g||[],max:3})]})})};var ei=n(18651),ea=n(31595),er=n(89897),eo=n.n(er),el=n(46210),es=n(35002),ed=n(13166);let ec=e=>{let{result:t,isActive:n,focusedItemEl:a,onMouseMove:r,onClick:o,context:l="globalSearch"}=e,c=(0,es.u)("screenshotsEnabled"),{title:u,text:p,previewUrl:h,editors:g,editedTime:x,id:f,createdBy:v}=t,b="mentionsList"===l;return(0,i.jsx)(Q.Q,{children:(0,i.jsxs)(U.z,{ref:n?a:null,className:"search-result",wordBreak:"break-word",onMouseMove:r,p:b?0:[2,3],py:b?.5:void 0,align:"flex-start",borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",role:"group",bg:n?"gray.100":"transparent",cursor:"pointer",color:"gray.800",borderWidth:"1px",borderColor:n?"gray.200":"transparent",spacing:{base:0,sm:4},sx:{em:{bg:"var(--chakra-colors-trueblue-100)",fontStyle:"normal",borderRadius:"base",display:"inline-block",padding:"0px 2px",margin:"0px -2px"}},onClick:o,children:[(0,i.jsx)(ei._,{display:{base:"none",xs:"block"},h:"100%",src:c?h:el.A.src,w:{base:"0px",sm:"25%"},border:"1px solid",borderColor:"gray.200",borderRadius:"md",shadow:"lg",fallbackSrc:el.A.src}),(0,i.jsxs)(Y.B,{spacing:(0,m.Xb)()?1:2,flex:"1",children:[(0,i.jsxs)(Q.r,{href:"globalSearch"===l?(0,et.LN)({docId:f}):void 0,children:[(0,i.jsx)(s.E,{fontSize:"md",fontWeight:"600",noOfLines:b?1:2,dangerouslySetInnerHTML:{__html:u?eo().sanitize(u):""}}),(null==v?void 0:v.displayName)&&(0,i.jsx)(s.E,{fontSize:"xs",color:"gray.600",fontWeight:"500",children:(0,i.jsx)(_.x6,{id:"ab98Hp",values:{0:null==v?void 0:v.displayName}})})]}),(0,i.jsx)(s.E,{fontSize:b?"xs":"sm",noOfLines:2,whiteSpace:"normal",wordBreak:"break-word",dangerouslySetInnerHTML:{__html:p?eo().sanitize(p):""}}),(0,i.jsxs)(U.z,{children:[g&&g.length>0&&(0,i.jsx)(ea.Z,{size:"xs",fontSize:"xs",max:5,children:null==g?void 0:g.map(e=>{let{user:t}=e,{id:n,displayName:a,profileImageUrl:r}=t;return(0,i.jsx)(d.Vc,{label:a,src:r,shadow:"base"},n)})}),x&&(0,i.jsx)(s.E,{fontSize:"xs",color:"gray.600",fontWeight:"500",children:(0,i.jsx)(_.x6,{id:"5cC8f2",values:{0:(0,ed.OG)(x)}})})]})]})]})})},eu=e=>{let{results:t,focusedIndex:n,focusedItemEl:a,onMouseMove:r}=e,o=(0,h.GV)(g.PC);return(0,i.jsx)(Y.B,{spacing:1,px:4,h:["lg","xl"],maxHeight:["lg","xl"],pb:4,overflow:"auto","data-testid":"search-results-wrapper",children:t.map((e,t)=>"DocResult"===e.__typename||"PseudoDocResult"===e.__typename?(0,i.jsx)(ec,{result:e,isActive:n===t,focusedItemEl:a,onMouseMove:()=>{r(t)},onClick:()=>{null==o||o()}},e.id):"Channel"===e.__typename?(0,i.jsx)(en,{result:e,isActive:n===t,focusedItemEl:a,onMouseMove:()=>{r(t)},onClick:()=>{null==o||o()}},e.id):null)})},ep=(0,S.Ay)("mod+K"),eh=e=>{let{query:t,isOpen:n,setResults:i,currentWorkspaceId:a}=e,{data:r}=(0,T.b_w)({variables:{first:5,workspaceId:a,archived:!1,sortBy:{field:T.vY2.LastViewed,direction:T.UEL.Desc}},fetchPolicy:"cache-first",skip:!n});(0,u.useEffect)(()=>{!(t.length>0)&&n&&i(((null==r?void 0:r.docs.edges.map(e=>e.node))||[]).slice(0,5).map(e=>{let{id:t,title:n,archived:i,titleCard:a,createdBy:r,editors:o,createdTime:l,editedTime:s,updatedTime:d}=e;return{id:t,title:n,archived:i,previewUrl:null==a?void 0:a.previewUrl,createdBy:r,editors:o,text:"",createdTime:l,editedTime:s,updatedTime:d,__typename:"PseudoDocResult"}}))},[n,t.length,null==r?void 0:r.docs.edges,i])},em=()=>{let{user:e,currentWorkspace:t}=(0,z.ur)(),{isConnected:n}=(0,T.utY)(),a=(0,h.GV)(g.MQ),[r,o]=(0,u.useState)([]),[l,s]=(0,u.useState)(!0),[c,p]=(0,u.useState)(-1),[x,f]=(0,D.M)(F.E.hasDismissedSearchTip,!1),v=(0,u.useRef)(null),[b,y]=(0,u.useState)(!1),w=(0,h.GV)(g.xo),[j,k]=(0,u.useState)(()=>w||""),[C,{data:S,loading:I}]=(0,T.eXh)();eh({query:j,isOpen:a,setResults:o,currentWorkspaceId:null==t?void 0:t.id});let R=(0,O.lW)(C,600);(0,u.useEffect)(()=>{0!=w.length&&k(w)},[w]);let M=(0,u.useCallback)(function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{target:"_self"},{target:n}=t||{},i=(null==v?void 0:null===(e=v.current)||void 0===e?void 0:e.querySelector("[href]")).href;i||console.error("[SearchModal] No href found"),window.open(i,n)},[v]),H=(0,u.useRef)({focusedIndex:c,results:r,goToItem:M,searchInputFocused:l});H.current={focusedIndex:c,results:r,goToItem:M,searchInputFocused:l},(0,u.useEffect)(()=>{if(a)return A.WC.on("keydown","GLOBAL_SEARCH",e=>{let{key:t}=e;if(ep(e))return!0;let n=H.current;switch(t){case"Escape":return e.preventDefault(),e.stopPropagation(),!0;case"Tab":return e.preventDefault(),n.searchInputFocused?p(N()(n.focusedIndex-1,0,n.results.length-1)):p(-1),s(!n.searchInputFocused),!0;case"Enter":return e.preventDefault(),n.searchInputFocused?R.flush():n.results.length>0&&n.goToItem({target:e.metaKey||e.ctrlKey?"_blank":"_self"}),!0;case"ArrowUp":return e.preventDefault(),n.focusedIndex<0?(s(!1),p(n.results.length-1)):0==n.focusedIndex?(s(!0),p(-1)):(s(!1),p(N()(n.focusedIndex-1,-1,n.results.length-1))),y(!0),!0;case"ArrowDown":return e.preventDefault(),n.focusedIndex<0?(s(!1),p(0)):n.focusedIndex>=n.results.length-1?(s(!0),p(-1)):(s(!1),p(N()(n.focusedIndex+1,-1,n.results.length-1))),y(!0),!0;default:return s(!0),p(-1),!1}})},[c,R,a,l]),(0,u.useEffect)(()=>{(null==S?void 0:S.search)&&o(null==S?void 0:S.search.filter(e=>void 0!==e&&("DocResult"===e.__typename||"Channel"===e.__typename)))},[null==S?void 0:S.search]);let B=(0,u.useCallback)(e=>{let{value:n}=e.target;n?(k(n),R({variables:{workspaceId:null==t?void 0:t.id,query:n}})):(R.cancel(),k(""),o([]),p(-1),s(!0))},[null==t?void 0:t.id,R]),V=(0,u.useCallback)(e=>{y(!1),p(e)},[]),G=(0,O.wb)(V,50),U=!x&&r.length>0;(0,u.useEffect)(()=>{var e;v.current&&b&&(null==v||null===(e=v.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}))},[c,b]);let K=j.length>0?(0,i.jsx)(_.x6,{id:"5WYZKZ"}):(0,i.jsx)(_.x6,{id:"AOvC3b"});return e?(0,i.jsxs)(E.s,{direction:"column",children:[(0,i.jsx)(W,{onChange:B,query:j,isDisabled:!n,isLoading:I,isFocused:l}),(0,i.jsx)(P.r,{mx:4,mt:2,mb:4,isConnected:n,description:(0,i.jsx)(_.x6,{id:"R4lJxt"})}),n&&(0,i.jsx)(d._x,{p:4,children:K}),n&&r&&r.length>0&&(0,i.jsx)(eu,{focusedItemEl:v,results:r,focusedIndex:c,onMouseMove:G}),!(0,m.Xb)()&&(0,i.jsx)($,{onClose:()=>{f(!0)},showTip:U}),(0,m.Xb)()&&(0,i.jsx)(L.s,{})]}):null},eg=(0,k.A)(e=>{let{isEnabledFn:t}=e,n=(0,h.GV)(g.MQ);R({isEnabledFn:t,isOpen:n});let a=(0,j.wA)(),r=(0,C.h5)({base:"sm",sm:"md",md:"lg",lg:"2xl"}),o=(0,u.useCallback)(()=>{a((0,g.q8)({isOpen:!1,initialQuery:""}))},[a]);return(0,i.jsxs)(v.aF,{isOpen:n,onClose:o,size:r,onOverlayClick:o,returnFocusOnClose:!1,children:[(0,i.jsx)(b.m,{}),(0,i.jsx)(y.$,{children:(0,i.jsx)(w.c,{p:0,children:(0,i.jsx)(em,{})})})]})})},84292:(e,t,n)=>{"use strict";n.d(t,{N:()=>p});var i=n(31085),a=n(56824),r=n(25420),o=n(35687),l=n(61778),s=n(18201),d=n(20501),c=n(24221),u=n(95640);let p=e=>{let{formatLabel:t,icon:n,rightIcon:p=d.a_I,accentColor:h,onClick:m,exportInProgress:g,exportInProgressNote:x,badge:f,customLabel:v,customInProgressMessage:b}=e,y=(0,a.dU)("gray.50","whiteAlpha.100"),w=(0,a.dU)("gray.200","gray.700"),j=(0,a.dU)("".concat(h,".100"),"".concat(h,".200")),k=h.endsWith("00")?h:j,C=(0,a.dU)("gray.300","gray.600");return(0,i.jsxs)(r.s,{alignItems:"stretch",overflow:"hidden",onClick:m,borderRadius:"md",border:"1px",borderColor:(0,a.dU)("gray.200","gray.700"),bgColor:g?w:y,cursor:g?"progress":void 0,disabled:g,as:"button",transitionProperty:"common",transitionDuration:"normal",_hover:g?{}:{boxShadow:"var(--chakra-shadows-md)",borderColor:"inherit",color:"inherit"},children:[(0,i.jsx)(r.s,{bgColor:g?C:k,filter:g?"grayscale(1)":void 0,width:14,minWidth:14,minH:14,alignItems:"center",justifyContent:"center",fontSize:"2xl",children:n}),(0,i.jsxs)(o.B,{alignItems:"flex-start",spacing:0,p:4,justifyContent:"center",children:[!g&&(0,i.jsxs)(l.E,{fontWeight:"medium",children:[v||(0,i.jsx)(u.x6,{id:"i3Tbgc",values:{formatLabel:t}})," ",f]}),g&&(0,i.jsxs)(l.E,{fontWeight:"medium",textAlign:"start",children:[b||(0,i.jsx)(u.x6,{id:"wRvCQ6",values:{formatLabel:t}})," ",x]})]}),(0,i.jsx)(s.h,{}),!g&&(0,i.jsx)(r.s,{alignItems:"center",ps:4,pe:6,children:(0,i.jsx)(c.g,{icon:p,size:"1x"})})]})}},71138:(e,t,n)=>{"use strict";n.d(t,{q:()=>r});var i=n(31085),a=n(18651);let r={pdf:{icon:(0,i.jsx)(a._,{src:"/_next/static/media/pdf-icon.a0dfc5d3.svg",h:"1.35rem",w:"auto"}),accentColor:"red"},pptx:{icon:(0,i.jsx)(a._,{src:"/_next/static/media/powerpoint-icon.2df39be4.svg",h:"1.5rem",w:"auto"}),accentColor:"orange"},png:{icon:(0,i.jsx)(a._,{src:"/_next/static/media/png-icon.0a2f46dc.svg",h:"1.45rem",w:"auto"}),accentColor:"purple"},google_slides:{icon:(0,i.jsx)(a._,{src:"/_next/static/media/google-slides-icon.a22064ae.svg",h:"1.6rem",w:"auto"}),accentColor:"sunglow"},linkedin:{icon:(0,i.jsx)(a._,{src:"/_next/static/media/linkedin-icon.314303f8.svg",h:"1.6rem",w:"auto"}),accentColor:"deepocean.900"}}},92214:(e,t,n)=>{"use strict";n.d(t,{P:()=>i});class i extends Error{constructor(e,t){super(e),this.code=t,this.name="AccountStateError"}}},44790:(e,t,n)=>{"use strict";n.d(t,{w:()=>c});var i=n(23672),a=n(2241),r=n(56154),o=n(14041),l=n(10458),s=n(60367),d=n(92214);let c=e=>{let{doc:t,source:n,editor:c,fileName:u,cardIds:p,cardRanges:h}=e,m="https://www.googleapis.com/auth/drive.file",g=(0,o.useRef)(null),x=(0,l.st)(),f=(0,a.mg)({scope:m,prompt:"",onSuccess:async e=>{let{showErrorToast:o,showEmailToast:f,showSuccessToast:v,setExportInProgress:b,exportWaitWarnTimeout:y}=g.current,w="";if((0,a.DY)(e,m))w=e.access_token;else{o();return}let j=null==c?void 0:c.getJSON(),k="google_slides";(0,s.QH)(t.id,j,"google_slides","card_export_menu"===n,u,p,h,w).then(async e=>{let i=await e.json();if(!e.ok){if(console.error("Export failed:",{status:e.status,statusText:e.statusText}),400===e.status)throw new d.P("Google drive upload failed",i.error);throw Error("Fetching export failed: ".concat(e.status," ").concat(e.statusText))}let a=l.VV.GSLIDES_EXPORTED;a&&(null==x||x.track(a,{doc_id:t.id,source:n})),v(i.url,"web"),window.open(i.url,"_blank")}).catch(e=>{"AbortError"===e.name?f():(r.Cp(e,{extra:{docId:t.id,format:k,source:n}}),i.yf.logger.error("[useHandleExport] Error exporting doc",{docId:t.id,format:k,source:n},e),e instanceof d.P?o(e.code):o())}).finally(()=>{b(!1),clearTimeout(y)})}});return{interceptFileExport:e=>"google_slides"===e.format&&(g.current=e,f(),!0)}}},79182:(e,t,n)=>{"use strict";n.d(t,{$Q:()=>c,h9:()=>p,oQ:()=>u,zI:()=>g});var i=n(31085),a=n(20501),r=n(3040),o=n(24221),l=n(95640),s=n(12327),d=n(39286);let c=a.ao0,u=r.Uj9,p=()=>s.Ru._({id:"1tCpcF",values:{GAMMA_PROPER_NOUN:d.On}}),h=()=>({invite:{ariaLabel:s.Ru._({id:"b4DayH"}),label:(0,i.jsx)(l.x6,{id:"b4DayH"}),icon:(0,i.jsx)(o.g,{icon:a.nWR,fixedWidth:!0}),key:"invite"},public:{ariaLabel:s.Ru._({id:"Z8lGw6"}),label:(0,i.jsx)(l.x6,{id:"Z8lGw6"}),icon:(0,i.jsx)(o.g,{icon:a.zxS,fixedWidth:!0}),key:"public"},export:{ariaLabel:s.Ru._({id:"GS+Mus"}),label:(0,i.jsx)(l.x6,{id:"GS+Mus"}),icon:(0,i.jsx)(o.g,{icon:a.a_I,fixedWidth:!0}),key:"export"},embed:{ariaLabel:s.Ru._({id:"KKBlUU"}),label:(0,i.jsx)(l.x6,{id:"KKBlUU"}),icon:(0,i.jsx)(o.g,{icon:a.jTw,fixedWidth:!0}),key:"embed"}}),m=["invite","public","export","embed"],g=e=>{let{showSharePublic:t=!0,showEmbed:n=!0,showInvite:i=!0,showExport:a=!0}=e;return m.map(e=>h()[e]).filter(e=>"public"===e.key?t:"embed"===e.key?n:"invite"===e.key?i:"export"!==e.key||a)}},60367:(e,t,n)=>{"use strict";n.d(t,{Is:()=>k,QH:()=>w,Up:()=>j});var i=n(31085),a=n(32202),r=n(3706),o=n(61778),l=n(23672),s=n(95640),d=n(12327),c=n(56154),u=n(82438),p=n.n(u),h=n(14041),m=n(73893),g=n(64225),x=n(10458),f=n(5933),v=n(92214);let b=(e,t)=>"".concat(m.$.API_HOST||"","/export/docs/").concat(e,"/").concat(t),y=(e,t)=>"".concat(m.$.API_HOST||"","/share/docs/").concat(e,"/").concat(t),w=async function(e,t,n,i,a,r,o,l){let s=arguments.length>8&&void 0!==arguments[8]&&arguments[8],d=arguments.length>9?arguments[9]:void 0,c=arguments.length>10?arguments[10]:void 0,u=s?y(e,c):b(e,n),p=new AbortController;return setTimeout(()=>p.abort(),6e4),fetch(u,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","share-token":m.$.SHARE_TOKEN||""},body:JSON.stringify({docContent:t,fileName:a,cardIds:r,cardRanges:o,isCardExport:i,shareMessage:d,googleOauthToken:"google_slides"===n?l:void 0}),signal:p.signal})},j=e=>{let{doc:t,source:n,editor:u,format:p="pdf",formatLabel:m,fileName:g,cardIds:f,cardRanges:b,socialPost:y=!1,socialPlatform:j,shareMessage:k,interceptFileExport:C}=e,S=(0,a.d)(),A=(0,h.useRef)(null),z=(0,x.st)(),[I,R]=(0,h.useState)(!1);if(y&&!j)throw console.error("Unable to export since no social platform provided for the post"),Error("Unable to share post");let E=(0,h.useCallback)(()=>{A.current=S({id:"export-toast-".concat(t.id,"-").concat(p),isClosable:!1,position:"top",duration:null,status:"loading",variant:"light",title:y?(0,i.jsx)(s.x6,{id:"jQGAZQ",values:{formatLabel:m}}):(0,i.jsx)(s.x6,{id:"eWt/TT",values:{formatLabel:m}})})},[null==t?void 0:t.id,S,p,m,y]),L=(0,h.useCallback)(()=>{A.current&&S.update(A.current,{status:"loading",variant:"light",title:y?(0,i.jsx)(s.x6,{id:"iPHeYN"}):(0,i.jsx)(s.x6,{id:"eJOEBy"}),description:(0,i.jsx)(s.x6,{id:"3xBuWT"}),isClosable:!0})},[S,y]),_=(0,h.useCallback)(()=>{A.current&&S.update(A.current,{status:"info",variant:"light",title:(0,i.jsx)(s.x6,{id:"eJOEBy"}),description:y?(0,i.jsx)(s.x6,{id:"c5plBG"}):"google_slides"===p?(0,i.jsx)(s.x6,{id:"/CtF0l"}):(0,i.jsx)(s.x6,{id:"W4zgCP"}),isClosable:!0})},[S,y,p]),M=(0,h.useCallback)(e=>{if(A.current){let t;t=y?"REVOKED_ACCESS_TOKEN"===e?(0,i.jsx)(s.x6,{id:"zK8Tsy",values:{formatLabel:m}}):(0,i.jsx)(s.x6,{id:"sBE71M",values:{formatLabel:m}}):"INSUFFICIENT_SPACE"===e?(0,i.jsx)(s.x6,{id:"+ope9f",values:{formatLabel:m}}):(0,i.jsx)(s.x6,{id:"walT1X"}),S.update(A.current,{title:t,status:"error",duration:null,isClosable:!0})}},[S,m,y]),N=(0,h.useCallback)(function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"download";if(A.current){let a,l;switch(n){case"download":a=d.Ru._({id:"aVmJex",values:{formatLabel:m}}),l=(0,i.jsx)(s.x6,{id:"VkeGn4",components:{0:(0,i.jsx)(r.N,{textDecoration:"underline",target:"_blank",href:e||void 0,onClick:()=>A.current&&S.close(A.current)})}});break;case"social":a=d.Ru._({id:"027pS1",values:{formatLabel:m,0:t.title}}),l=(0,i.jsx)(s.x6,{id:"nManvG",components:{0:(0,i.jsx)(r.N,{textDecoration:"underline",target:"_blank",href:e||void 0,onClick:()=>A.current&&S.close(A.current)})}});break;case"web":a=d.Ru._({id:"eLTtkg"}),l=(0,i.jsx)(s.x6,{id:"8hY871",values:{formatLabel:m},components:{0:(0,i.jsx)(r.N,{textDecoration:"underline",target:"_blank",href:e||void 0})}})}S.update(A.current,{status:"success",title:a,description:(0,i.jsx)(o.E,{children:l}),isClosable:!0})}},[t,m,S]);return{handleExport:(0,h.useCallback)(()=>{let e=null==u?void 0:u.getJSON();R(!0),E();let i=setTimeout(L,3e4);null!=C&&C({format:p,exportWaitWarnTimeout:i,showErrorToast:M,showEmailToast:_,showSuccessToast:N,setExportInProgress:R})||w(t.id,e,p,"card_export_menu"===n,g,f,b,void 0,y,k,j).then(async e=>{var i;if(!e.ok){let t=await e.json();if(console.error("Export failed:",{status:e.status,statusText:e.statusText}),"REVOKED_ACCESS_TOKEN"===t.error)throw new v.P("Posting to LinkedIn failed due to revoked access token",t.error);throw Error("Fetching export failed: ".concat(e.status," ").concat(e.statusText))}let a="linkedin"===j?x.VV.LINKEDIN_POST:"pdf"===p?x.VV.PDF_EXPORTED:"pptx"===p?x.VV.PPTX_EXPORTED:"image"===p?x.VV.PNG_EXPORTED:void 0,r=decodeURIComponent(e.headers.get("x-gamma-download-url")||"")||void 0;if(y&&(r=(await e.json()).url),a&&(null==z||z.track(a,{doc_id:t.id,source:n,...y&&{postUrl:r}})),N(r,y?"social":"download"),y)return;let o=await e.blob(),l=window.URL.createObjectURL(o),s=document.createElement("a"),d=decodeURIComponent((null===(i=(e.headers.get("Content-Disposition")||"").split(";").find(e=>e.includes("filename=")))||void 0===i?void 0:i.replace("filename=","").trim())||"".concat(t.id,".").concat(p));s.download=d,s.href=l,s.style.display="none",document.body.appendChild(s),s.click(),s.remove()}).catch(e=>{"AbortError"===e.name?_():(c.Cp(e,{extra:{docId:t.id,format:p,source:n}}),l.yf.logger.error("[useHandleExport] Error exporting doc",{docId:t.id,format:p,source:n},e),M(null==e?void 0:e.code))}).finally(()=>{R(!1),clearTimeout(i)})},[z,null==t?void 0:t.id,u,n,p,g,C,f,b,k,M,E,L,_,N,j,y]),exportInProgress:I}},k=e=>{let t=(0,g.GV)(f.SJ),n=e.theme||t;return(0,h.useMemo)(()=>{let e=n.fonts?[...n.fonts]:[];return e.length<2&&e.push({id:"Inter",name:"Inter",url:"https://fonts.googleapis.com/css2?family=Inter"}),p()(e).map(e=>{var t;return(null===(t=e.url)||void 0===t?void 0:t.includes("fonts.googleapis.com"))?{name:e.name,url:"https://fonts.google.com/specimen/".concat(e.name)}:{name:e.name}}).filter(e=>!!e)},[n])}},82257:(e,t,n)=>{"use strict";n.d(t,{Um:()=>c,oR:()=>s});var i=n(31085),a=n(14041),r=n(30503);let o=a.createContext({publishedVersionOverride:!1}),l=()=>(0,a.useContext)(o);function s(){let{publishedVersionOverride:e}=l();return e||(0,r.NF)()}let d={publishedVersionOverride:!0},c=e=>{let{children:t}=e;return(0,i.jsx)(o.Provider,{value:d,children:t})}},747:(e,t,n)=>{"use strict";n.d(t,{c:()=>p});var i=n(31242),a=n(14041),r=n(17303),o=n(64225),l=n(5933),s=n(92667),d=n(30503),c=n(82257),u=n(68962);let p=e=>{let{url:t,nonPublishedUrl:n}=e,{push:p}=(0,i.useRouter)(),h=(0,s.En)(),m=(0,o.GV)(l.Jo),g=(0,c.oR)(),x=(0,o.GV)(r.C),f=g?(0,d.M7)({url:t,doc:m,previewEnabled:x}):n||t,v=h&&(0,d.uH)(t,m),b=(0,a.useCallback)(e=>{(0,u.jv)(f)&&(e.preventDefault(),p(f,void 0,{shallow:!0}))},[f,p]);return(0,a.useMemo)(()=>({linkUrl:f,handleClick:x?b:void 0,isCurrentPage:v}),[b,f,x,v])}},25317:(e,t,n)=>{"use strict";n.d(t,{n:()=>l});var i=n(46123),a=n.n(i),r=n(69e3),o=n(81570);class l extends o.LN{map(e,t){let{deleted:n,pos:i}=t.mapResult(this.anchor),a=e.resolve(i);return n?o.LN.near(a):new l(a,this.keyPath)}content(){return new r.Ji(r.FK.from(this.node),0,0)}getItemData(){return this.node.attrs.data?a()(this.node.attrs.data,this.keyPath):null}eq(e){return e instanceof l&&e.anchor==this.anchor&&e.keyPath==this.keyPath}toJSON(){return{type:"diagramItem",anchor:this.anchor,key:this.keyPath}}static fromJSON(e,t){if("number"!=typeof t.anchor||"string"!=typeof t.key)throw RangeError("Invalid input for DiagramItemSelection.fromJSON");return new l(e.resolve(t.anchor),t.key)}static create(e,t,n){return new this(e.resolve(t),n)}static isSelectable(e){return"smartDiagram"===e.type.name&&e.attrs.data}constructor(e,t){let n=e.nodeAfter;super(e,e.node(0).resolve(e.pos+n.nodeSize)),this.keyPath=t,this.node=n}}if(l.prototype.visible=!1,!l.prototype.jsonID)try{o.LN.jsonID("diagramItem",l)}catch(e){}},73734:(e,t,n)=>{"use strict";n.d(t,{c:()=>R,F:()=>E});var i=n(31085),a=n(12917),r=n(12327),o=n(14041),l=n(63413),s=n(67442),d=n(80532),c=n(39875);let u=e=>{let{x:t,y:n,width:a,height:r,image:o,iconSize:l=2,isEditable:s,selectItem:u}=e;return(0,i.jsx)("foreignObject",{x:t,y:n,width:a,height:r,style:{overflow:"visible"},children:(0,i.jsx)(d.az,{width:"100%",height:"100%",children:(0,i.jsx)(c.R,{image:o||null,selectCell:s?u:void 0,iconSize:l,placeholderIfEmpty:!0,boxProps:{w:"100%",h:"100%"}})})})};var p=n(25420),h=n(60948),m=n(95905),g=n(54363),x=n(58599),f=n(37116);let v=e=>{let{...t}=e,n=(0,o.useMemo)(()=>(0,f.D)(),[]),a=(0,x.hG)({extensions:n,...t});return a.shouldUseLiteMenus=!0,(0,o.useEffect)(()=>{t.editable?a.setEditable(!0):a.setEditable(!1)},[t.editable,a]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(x.$Z,{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"var(--vertical-align)",cursor:t.editable?"text":void 0},className:"text-label-editor",editor:a,onBlur:()=>{a.commands.forceHideBubbleMenu(!0)},onFocus:()=>{a.commands.forceHideBubbleMenu(!1)}}),(0,i.jsx)(g.Ht,{editor:a,appendToSelector:".smart-diagram-wrapper:focus-within"})]})},b=e=>{let{x:t,y:n,width:a,height:r,...o}=e;return(0,i.jsx)("foreignObject",{x:t,y:n,width:a,height:r,style:{overflow:"visible"},children:(0,i.jsx)(y,{...o})})},y=e=>{let{text:t,isEditable:n,onUpdate:a,horizontalAlign:r="center",verticalAlign:o="center",...l}=e,s={...(0,m.yp)(r),...(0,m.AS)(r,"ltr"),"--vertical-align":o};return(0,i.jsx)(p.s,{direction:"column",w:"100%",h:"100%",_focusWithin:n?{shadow:"inset var(--chakra-shadows-outline)"}:void 0,_focusVisible:{outline:"none"},css:s,p:"0.5em",borderRadius:"var(--box-border-radius)",justifyContent:"stretch",...l,children:(0,i.jsx)(v,{content:t,onBlur:e=>{let{editor:t}=e,n=t.state.doc.content;a((0,h.$R)(n,t.schema))},editable:n})})},w=e=>{let{x:t,color:n,icon:a,label:r,updateLabel:o,selectItem:d,isEditable:c,index:p}=e,h=(0,s.q9)(n);return(0,i.jsxs)("g",{transform:"translate(".concat(t,", 0)"),style:h,children:[(0,i.jsx)("rect",{x:12.5,y:205,width:140,height:330,className:l.D6}),(0,i.jsx)("rect",{x:0,y:205,width:165,height:20,rx:5,ry:5,className:l.D6}),(0,i.jsx)("rect",{x:0,y:515,width:165,height:20,rx:5,ry:5,className:l.D6}),(0,i.jsx)(u,{x:57.5,y:345,width:50,height:50,image:a,isEditable:c,selectItem:()=>d("pillars[".concat(p,"].icon"))}),(0,i.jsx)(b,{x:82.5,y:555,width:214.5,transform:"translateX(-50%)",height:80,fontSize:24,text:r,isEditable:c,onUpdate:o,verticalAlign:"start"})]})},j={key:"pillars",Component:e=>{let{data:t,updateData:n,isEditable:a,selectItem:r}=e,{title:o,pillars:s}=t,d=(()=>{let e=s.length;if(e<=1)return[417.5];let t=e>1?(850-165*e)/(e-1):0;return s.map((e,n)=>75+n*(165+t))})(),c="".concat(75,",").concat(205," ").concat(925,",").concat(205," ").concat(712.5,",").concat(5," ").concat(287.5,",").concat(5);return(0,i.jsxs)("svg",{viewBox:"0 0 ".concat(1e3," ").concat(650),preserveAspectRatio:"xMidYMid meet",overflow:"visible",children:[(0,i.jsx)("polygon",{points:c,className:l.D6}),(0,i.jsx)(b,{x:287.5,y:5,width:425,height:200,fontSize:24,text:o,isEditable:a,onUpdate:e=>{n(t=>(t.title=e,t))},verticalAlign:"center",className:l.lR}),(0,i.jsx)("rect",{x:75,y:535,width:850,height:20,className:l.D6,rx:5,ry:5}),s.map((e,t)=>(0,i.jsx)(w,{x:d[t],color:e.color,icon:e.icon,label:e.label,updateLabel:e=>{n(n=>(n.pillars[t].label=e,n))},isEditable:a,selectItem:r,index:t},t))]})},label:()=>r.Ru._({id:"xGL+6k"}),icon:a.PKn,defaultData:()=>({title:"<h2>Building</h2>",pillars:[{label:"Alpha",icon:void 0},{label:"Beta",icon:void 0},{label:"Gamma",icon:void 0}]})},k={key:"venn",Component:e=>{let{data:t,updateData:n,isEditable:a}=e,{leftCircleLabel:r,rightCircleLabel:o,overlapLabel:d,leftCircleColor:c,rightCircleColor:u}=t,p=(0,s.q9)(c),h=(0,s.q9)(u);return(0,i.jsxs)("svg",{viewBox:"0 0 ".concat(1e3," ").concat(650),preserveAspectRatio:"xMidYMid meet",overflow:"visible",style:{"--shape-border-width":"1.25px"},children:[(0,i.jsx)("g",{style:p,children:(0,i.jsx)("circle",{cx:350,cy:325,r:250,className:l.D6,fillOpacity:.5})}),(0,i.jsx)("g",{style:h,children:(0,i.jsx)("circle",{cx:650,cy:325,r:250,className:l.D6,fillOpacity:.5})}),(0,i.jsx)(b,{x:100,y:75,width:300,height:500,fontSize:19.200000000000003,className:l.lR,text:r,isEditable:a,onUpdate:e=>{n(t=>(t.leftCircleLabel=e,t))},textAlign:"center"}),(0,i.jsx)(b,{x:600,y:75,width:300,height:500,fontSize:19.200000000000003,className:l.lR,text:o,isEditable:a,onUpdate:e=>{n(t=>(t.rightCircleLabel=e,t))},textAlign:"center"}),(0,i.jsx)(b,{x:500,transform:"translateX(-50%)",y:75,width:200,height:500,fontSize:19.200000000000003,text:d,isEditable:a,onUpdate:e=>{n(t=>(t.overlapLabel=e,t))},textAlign:"center"})]})},label:()=>r.Ru._({id:"5fjKm2"}),icon:a.cvw,defaultData:()=>({leftCircleLabel:"<h3>A</h3>",rightCircleLabel:"<h3>B</h3>",overlapLabel:"A & B"})},C=e=>{if(!e)return null;let t=new DOMParser().parseFromString(e,"image/svg+xml").documentElement,n=t.getAttribute("viewBox")||void 0,i=t.getAttribute("width")||void 0,a=t.getAttribute("height")||void 0;return{element:t,props:{viewBox:n,width:i,height:a,preserveAspectRatio:"xMidYMid meet",overflow:"visible",style:{"--shape-border-width":"1.25px"}}}},S=(e,t,n,i,a)=>{let r=[];return Array.from(e).forEach((e,l)=>{if(e.nodeType!==Node.ELEMENT_NODE)return;let s=e.tagName.toLowerCase(),d=e.getAttribute("id")||"element-".concat(l),c="".concat(s,"-").concat(d,"-").concat(l);if("rect"===s&&e.classList.contains("textbox")){r.push(z(e,c,t,n,i,a));return}let u=S(e.childNodes,t,n,i,a),p=A(e);r.push(o.createElement(s,{key:c,...p},u.length>0?u:void 0))}),r},A=e=>{let t={};return Array.from(e.attributes).forEach(e=>{let n="class"===e.name?"className":e.name;["x","y","width","height","cx","cy","r","x1","y1","x2","y2","opacity","fill-opacity","stroke-width"].includes(e.name)?t[n]=parseFloat(e.value):"style"===e.name?t[n]=e.value:("class"===e.name||"className"===e.name)&&e.value.includes("shape-background")?t[n]=l.D6:t[n]=e.value}),t},z=(e,t,n,a,r,o)=>{let s=parseFloat(e.getAttribute("x")||"0"),d=parseFloat(e.getAttribute("y")||"0"),c=parseFloat(e.getAttribute("width")||"0"),u=parseFloat(e.getAttribute("height")||"0"),p=e.getAttribute("id")||t.split("-")[1],h=n[p]||"";return(0,i.jsx)(b,{x:s,y:d,width:c,height:u,fontSize:o,className:l.lR,text:h,isEditable:a,onUpdate:e=>{r(t=>(t[p]=e,t))}},t)},I=e=>{let{svgText:t,isEditable:n=!1,data:a={},updateData:r=()=>{},defaultFontSize:l=16}=e,s=(0,o.useMemo)(()=>C(t),[t]);return(0,o.useMemo)(()=>{if(!s)return null;let e=S(s.element.childNodes,a,n,r,l);return(0,i.jsx)("svg",{...s.props,children:e})},[s,a,n,r,l])},R={pillars:j,venn:k,venn3:{key:"svg-venn3",Component:e=>{let{data:t,updateData:n,isEditable:a}=e;return(0,i.jsx)(I,{svgText:'\n<svg width="1000" height="800" viewBox="0 0 1000 800" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <circle id="topCircle" cx="500" cy="275" r="250" class="shape-background recolorable" fill-opacity="0.4"/>\n  <circle id="leftCircle" cx="350" cy="525" r="250" class="shape-background recolorable" fill-opacity="0.4"/>\n  <circle id="rightCircle" cx="650" cy="525" r="250" class="shape-background recolorable" fill-opacity="0.4"/>\n  <rect id="topLeftIntersectionLabel" x="275" y="275" width="150" height="175" class="textbox"/>\n  <rect id="topRightIntersectionLabel" x="575" y="275" width="150" height="175" class="textbox"/>\n  <rect id="leftRightIntersectionLabel" x="425" y="525" width="150" height="175" class="textbox"/>\n  <rect id="rightCircleLabel" x="600" y="486" width="250" height="200" class="textbox"/>\n  <rect id="leftCircleLabel" x="150" y="486" width="250" height="200" class="textbox" />\n  <rect id="topCircleLabel" x="350" y="68" width="300" height="200" class="textbox"/>\n  <rect id="allIntersectionLabel" x="425" y="343" width="150" height="175" class="textbox"/>\n</svg>\n',data:t,updateData:n,isEditable:a,defaultFontSize:19.200000000000003})},label:()=>r.Ru._({id:"1ar6Rs"}),icon:a.cvw,defaultData:()=>({topCircleLabel:"<h3>A</h3>",leftCircleLabel:"<h3>B</h3>",rightCircleLabel:"<h3>C</h3>",topLeftIntersectionLabel:"A & B",leftRightIntersectionLabel:"B & C",topRightIntersectionLabel:"A & C",allIntersectionLabel:"A & B & C"})}},E=e=>R[e]},14095:(e,t,n)=>{"use strict";n.d(t,{A:()=>b});var i=n(31085),a=n(15672),r=n(76003),o=n(80532),l=n(80853),s=n(9021),d=n(70405),c=n(35789),u=n(20501),p=n(24221),h=n(9104),m=n(95640),g=n(12327),x=n(14041),f=n(38684),v=n(17539);let b=e=>{let{accentImages:t,isDark:n,handleDelete:b,handleItemClick:y,currentAttributes:w,editType:j}=e,k=(0,x.useCallback)(e=>t=>{b&&(t.stopPropagation(),b(e))},[b]),C=(0,x.useCallback)(e=>()=>{y&&y(e)},[y]);return(0,i.jsx)(a.r,{gap:2,columns:{base:2,"2xl":3},children:t.map(e=>{let t=(0,f.FD)(e,n,v.p7),a=("node"===j||"accessory"===j)&&e.image,x=a?{...e.image,source:e.source}:e,S=a?(null==w?void 0:w.src)===e.image.src:(null==w?void 0:w.accentId)===e.accentId;return(0,i.jsx)(r.E,{children:(0,i.jsxs)(o.az,{as:l.$,variant:"unstyled",backgroundColor:n?"black":"white",cursor:y?"pointer":void 0,...t,opacity:1,width:"100%",borderRadius:"base",shadow:"md",minH:"100px",position:"relative",role:"group",onClick:C(x),children:[b&&(0,i.jsx)(h.Tz,{label:(0,i.jsx)(m.x6,{id:"Rz0Yis"}),placement:"top",children:(0,i.jsx)(s.K,{"aria-label":g.Ru._({id:"Rz0Yis"}),icon:(0,i.jsx)(p.g,{icon:u.yLS}),onClick:k(e),isRound:!0,position:"absolute",top:1,insetEnd:1,size:"sm",color:"red.600",opacity:0,_hover:{color:"red.600"},_groupHover:{opacity:1}})}),w&&(0,i.jsx)(d.z,{in:S,children:(0,i.jsx)(o.az,{pointerEvents:"none",color:"white",pos:"absolute",inset:0,bg:"rgba(0,0,0,.5)",borderRadius:"base",children:(0,i.jsx)(c.o,{h:"100%",w:"100%",children:(0,i.jsx)(p.g,{icon:u.e68})})})})]})},e.accentId)})})}},57799:(e,t,n)=>{"use strict";n.d(t,{E:()=>s,V:()=>d});var i=n(31085),a=n(76228),r=n(80853),o=n(9104),l=n(63723),s=function(e){return e[e.small=4]="small",e[e.medium=7]="medium",e}({});let d=e=>{let{color:t,setColor:n=()=>{},isActive:s=!1,name:d,size:c=7,tooltipIsDisabled:u=!1}=e,p=(0,l.$p)(t)?"white":"black";return(0,i.jsx)(o.Tz,{label:d||t.toUpperCase(),placement:"top",isDisabled:u,children:(0,i.jsx)(r.$,{display:"inline-block",alignSelf:"center",boxSize:c,borderRadius:"md",border:"1px solid",borderColor:"blackAlpha.300",color:p,bgColor:null!=t?t:"#FFFFFF",onClick:()=>n(t),variant:"unstyled",minW:0,fontSize:"xs",transitionProperty:"border",transitionDuration:"normal",children:s&&(0,i.jsx)(a.S,{})})})}},31549:(e,t,n)=>{"use strict";n.d(t,{v:()=>m});var i=n(31085),a=n(18528),r=n(80853),o=n(35687),l=n(80532),s=n(61778),d=n(20501),c=n(24221),u=n(95640),p=n(1602),h=n.n(p);let m=e=>{let{color:t,isDefaultColor:n,isMixed:p=!1,...m}=e;return(0,i.jsx)(a.I,{as:r.$,variant:"plain",size:"sm",boxShadow:"none",minW:"fit-content",textAlign:"left",rightIcon:(0,i.jsx)(c.g,{fixedWidth:!0,icon:d.Jt$,transform:"shrink-6"}),...m,children:(0,i.jsxs)(o.B,{direction:"row",spacing:2,align:"center",children:[(0,i.jsx)(l.az,{as:"span",alignSelf:"center",boxSize:5,borderRadius:"md",border:"2px solid",borderColor:"gray.300",bgColor:t}),(0,i.jsx)(s.E,{fontFamily:n||p?void 0:"mono",textTransform:n||p?void 0:"uppercase",fontSize:"sm",children:p?(0,i.jsx)(u.x6,{id:"+UN6+J"}):n?(0,i.jsx)(u.x6,{id:"ovBPCi"}):h()(t).toHexString()})]})})}},49624:(e,t,n)=>{"use strict";n.d(t,{b:()=>R});var i=n(31085),a=n(2600),r=n(70323),o=n(25420),l=n(80853),s=n(20501),d=n(24221),c=n(95640),u=n(14041),p=n(10458),h=n(12327),m=n(48637),g=n(62313),x=n(61778),f=n(18201),v=n(15672),b=n(91559),y=n(57799);let w=e=>{let{label:t,colors:n,setColor:a,currentColor:r,isDefault:o,handleAddColorButtonClick:s}=e,{isInOfflineMode:d}=(0,b.u)();return(0,i.jsx)(m.r,{children:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(g.z,{px:"2",fontSize:"sm",w:"100%",justifyContent:"space-between",alignItems:"center",mb:"2",mt:s?1:0,children:[(0,i.jsx)(x.E,{children:t}),(0,i.jsx)(f.h,{}),s&&(0,i.jsx)(l.$,{variant:"link",fontSize:"sm",onClick:s,isDisabled:d,children:(0,i.jsx)(c.x6,{id:"ePK91l"})})]}),(0,i.jsx)(v.r,{gap:1.5,columns:6,p:2,pt:0,children:n.map((e,t)=>{let{hex:n,name:l}=e;return(0,i.jsx)(y.V,{name:l,color:n,setColor:a,isActive:o?null===r:r===n},t)})})]})})},j=()=>[{key:"black",hex:"#000000",name:h.Ru._({id:"THokF3"})},{key:"dark-gray",hex:"#4D4D4D",name:h.Ru._({id:"uUMrFZ"})},{key:"gray",hex:"#808080",name:h.Ru._({id:"qS5//Q"})},{key:"light-gray",hex:"#CCCCCC",name:h.Ru._({id:"xa/b9m"})},{key:"white-smoke",hex:"#F2F2F2",name:h.Ru._({id:"rGj3KB"})},{key:"white",hex:"#FFFFFF",name:h.Ru._({id:"5Ex+AP"})},{key:"light-sun",hex:"#FCEC99",name:h.Ru._({id:"nOXj3q"})},{key:"peach",hex:"#FFD1A7",name:h.Ru._({id:"68+2yw"})},{key:"salmon",hex:"#FAA1A1",name:h.Ru._({id:"TrGQaZ"})},{key:"lavender",hex:"#D8AFF8",name:h.Ru._({id:"gc4DdH"})},{key:"baby-blue",hex:"#AFCBF8",name:h.Ru._({id:"+bmpN5"})},{key:"pale-green",hex:"#AEE4BD",name:h.Ru._({id:"hUOhvE"})},{key:"gold",hex:"#F9D933",name:h.Ru._({id:"FYlHHU"})},{key:"orange",hex:"#FFA44F",name:h.Ru._({id:"4OE5Sf"})},{key:"red",hex:"#F44444",name:h.Ru._({id:"wRTiSD"})},{key:"purple",hex:"#B05EF1",name:h.Ru._({id:"mF9LxA"})},{key:"blue",hex:"#5E98F1",name:h.Ru._({id:"Zn5crm"})},{key:"green",hex:"#5CC97B",name:h.Ru._({id:"VmkjGB"})},{key:"dark-goldenrod",hex:"#957D00",name:h.Ru._({id:"vWWr+k"})},{key:"brown",hex:"#995515",name:h.Ru._({id:"JLxwQS"})},{key:"maroon",hex:"#910D0D",name:h.Ru._({id:"cg4yu3"})},{key:"dark-purple",hex:"#5E208E",name:h.Ru._({id:"oqSDkM"})},{key:"midnight-blue",hex:"#204C8E",name:h.Ru._({id:"QCyMdk"})},{key:"forest-green",hex:"#1F7135",name:h.Ru._({id:"HVCLqF"})}],k=e=>{let{setColor:t,currentColor:n}=e;return(0,i.jsx)(w,{label:h.Ru._({id:"Zp2USm"}),colors:j(),setColor:t,currentColor:n})};var C=n(64225),S=n(74592),A=n(1771),z=n(5933);let I=e=>{let{setColor:t,currentColor:n,showAddColorButton:a=!0}=e,r=(0,C.GV)(z.SJ),o=(0,A.ND)(r,!0).map(e=>{let t=(0,A.Ik)(e);return{hex:t,key:t}});return(0,i.jsx)(w,{label:h.Ru._({id:"J1XRO3"}),colors:o,setColor:t,currentColor:n,...a?{handleAddColorButtonClick:()=>{r.workspaceId?(0,S.vd)({theme:r}):(0,S.L6)({theme:r})}}:{},addColorLabel:null===r.workspaceId?h.Ru._({id:"0TWTg2"}):h.Ru._({id:"TExCtI"})})},R=e=>{let{currentColor:t,setColor:n,unsetColor:h=()=>n(null),source:m,showAddColorButton:g=!0}=e,x=(0,p.st)(),f=(0,u.useCallback)(e=>{null==x||x.track(p.VV.COLOR_PICKER_SET_COLOR,{color:e,source:m}),n(e)},[n,x,m]),v=(0,u.useCallback)(()=>{null==x||x.track(p.VV.COLOR_PICKER_RESET,{source:m}),h()},[h,x,m]);return(0,p.JQ)(e=>{e.track(p.VV.COLOR_PICKER_OPENED,{source:m})},[m]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(a.T,{divider:(0,i.jsx)(r.c,{}),p:0,align:"start",children:[(0,i.jsx)(I,{showAddColorButton:g,setColor:f,currentColor:t}),(0,i.jsx)(k,{setColor:f,currentColor:t})]}),(0,i.jsx)(o.s,{px:5,py:3,bg:"gray.100",alignItems:"center",justifyContent:"center",mx:-2,mb:-2,mt:2,children:(0,i.jsx)(l.$,{onClick:v,variant:"link",size:"sm",colorScheme:"gray",leftIcon:(0,i.jsx)(d.g,{icon:s.U23}),children:(0,i.jsx)(c.x6,{id:"L+rMC9"})})})]})}},75678:(e,t,n)=>{"use strict";n.d(t,{J:()=>c,m:()=>u});var i=n(31085),a=n(3706),r=n(87835),o=n.n(r),l=n(14041),s=n(82257),d=n(74061);let c=e=>{let{fonts:t}=e,n=(0,s.oR)(),r=null==t?void 0:t.find(e=>"Eudoxus Sans"===e.id),c=(0,l.useMemo)(()=>o()((null==t?void 0:t.filter(e=>e.url))||[],"url"),[t]);return(0,i.jsxs)(i.Fragment,{children:[r?(0,i.jsx)(d.Ay,{shouldUsePublishedVersion:n}):null,c.map(e=>(0,i.jsx)(a.N,{as:"link",href:e.url,rel:"stylesheet","data-gamma-font":e.id},e.url))]})},u=e=>{let{theme:t}=e;return(0,i.jsx)(c,{fonts:null==t?void 0:t.fonts})}},70637:(e,t,n)=>{"use strict";n.d(t,{e:()=>r,V:()=>a});var i=n(22544);let a=e=>{if(i.rS)return{};let{accentCut:t}=e.config;if(!t)return{};let{maskStyles:n,fgStyles:a}=r[t]||{};return{"[data-layout-cut=left]":n.left,"[data-layout-cut=right]":n.right,"video[data-layout-cut=right]":{width:"100%",marginLeft:0,marginRight:0},"[data-layout-cut=top]":n.top,"[data-layout-cut-fg=left]":a.left,"[data-layout-cut-fg=right]":a.right,"[data-layout-cut-fg=top]":a.top}},r={default:{name:()=>"Default",maskStyles:{left:void 0,right:void 0,top:void 0},fgStyles:{left:void 0,right:void 0,top:void 0}},fade:{name:()=>"Fade",maskStyles:{left:{maskImage:'url("'.concat("/_next/static/media/gradient-left.5e1ae259.svg",'")'),maskSize:"cover",maskRepeat:"no-repeat",maskPosition:"right",width:"110%",marginRight:"-10%"},right:{maskImage:'url("'.concat("/_next/static/media/gradient-right.81936f6b.svg",'")'),maskSize:"cover",maskRepeat:"no-repeat",maskPosition:"left",width:"110%",marginLeft:"-10%"},top:{maskImage:'url("'.concat("/_next/static/media/gradient-top.9cbcc51e.svg",'")'),maskSize:"cover",maskRepeat:"no-repeat",maskPosition:"bottom",height:"110%"}},fgStyles:{left:{maxWidth:"90%",marginRight:"10%"},right:{maxWidth:"90%",marginLeft:"10%"},top:void 0}},diagonal:{name:()=>"Diagonal",maskStyles:{left:{maskImage:'url("'.concat("/_next/static/media/diagonal-left.c66da52d.svg",'")'),maskSize:"cover",maskRepeat:"no-repeat",maskPosition:"right",width:"105%",marginRight:"-5%"},right:{maskImage:'url("'.concat("/_next/static/media/diagonal-right.c56ea47c.svg",'")'),maskSize:"cover",maskRepeat:"no-repeat",maskPosition:"left",width:"105%",marginLeft:"-5%"},top:{maskImage:'url("'.concat("/_next/static/media/diagonal-top.f5cfbd00.svg",'")'),maskSize:"cover",maskRepeat:"no-repeat",maskPosition:"bottom",height:"105%"}},fgStyles:{left:{maxWidth:"80%",marginRight:"20%"},right:{maxWidth:"80%",marginLeft:"20%"},top:{maxHeight:"85%",marginBottom:"auto"}}},round:{name:()=>"Round",maskStyles:{left:{maskImage:'url("'.concat("/_next/static/media/circle-left.b2ca2ce2.svg",'")'),maskSize:"cover",maskRepeat:"no-repeat",maskPosition:"right",width:"105%",marginRight:"-5%"},right:{maskImage:'url("'.concat("/_next/static/media/circle-right.9a77e2f4.svg",'")'),maskSize:"cover",maskRepeat:"no-repeat",maskPosition:"left",width:"105%",marginLeft:"-5%"},top:{maskImage:'url("'.concat("/_next/static/media/circle-top.49150ee5.svg",'")'),maskSize:"cover",maskRepeat:"no-repeat",maskPosition:"bottom",height:"105%"}},fgStyles:{left:{maxWidth:"80%",marginRight:"20%"},right:{maxWidth:"80%",marginLeft:"20%"},top:void 0}},roundInverse:{name:()=>"Round Inverse",maskStyles:{left:{maskImage:'url("'.concat("/_next/static/media/circle-inverted-left.dbc8a93f.svg",'")'),maskSize:"cover",maskRepeat:"no-repeat",maskPosition:"right",width:"110%",marginRight:"-10%"},right:{maskImage:'url("'.concat("/_next/static/media/circle-inverted-right.de2dd517.svg",'")'),maskSize:"cover",maskRepeat:"no-repeat",maskPosition:"left",width:"110%",marginLeft:"-10%"},top:{maskImage:'url("'.concat("/_next/static/media/circle-inverted-top.07d69c71.svg",'")'),maskSize:"cover",maskRepeat:"no-repeat",maskPosition:"bottom",height:"112%"}},fgStyles:{left:{maxWidth:"90%",marginRight:"10%"},right:{maxWidth:"90%",marginLeft:"10%"},top:{maxHeight:"90%",marginBottom:"auto"}}},wiggle:{name:()=>"Wiggle",maskStyles:{left:{maskImage:'url("'.concat("/_next/static/media/wiggle-left.578c81e9.svg",'")'),maskSize:"cover",maskRepeat:"no-repeat",maskPosition:"right",width:"105%",marginRight:"-5%"},right:{maskImage:'url("'.concat("/_next/static/media/wiggle-right.8ee6fc0f.svg",'")'),maskSize:"cover",maskRepeat:"no-repeat",maskPosition:"left",width:"105%",marginLeft:"-5%"},top:{maskImage:'url("'.concat("/_next/static/media/wiggle-top.41b099b7.svg",'")'),maskSize:"cover",maskRepeat:"no-repeat",maskPosition:"bottom",height:"105%"}},fgStyles:{left:{maxWidth:"94%",marginRight:"6%"},right:{maxWidth:"94%",marginLeft:"6%"},top:{maxHeight:"95%",marginBottom:"auto"}}}}},70605:(e,t,n)=>{"use strict";n.d(t,{EB:()=>d,Gx:()=>i,Up:()=>l,uQ:()=>r,zQ:()=>a});let i="themed-clickable-box",a={transitionProperty:"transform",transitionDuration:"normal"},r={transform:"scale(1.03)",_before:{content:'""',position:"absolute",inset:0,borderRadius:"inherit",boxShadow:"inset 0 0 0 500px var(--expandable-hover-background)",pointerEvents:"none"}},o={border:"var(--shape-border-width) solid var(--neutral-border-color)",borderRadius:"var(--box-border-radius)",backgroundColor:"var(--clickable-background-color)",boxShadow:"var(--clickable-shadow)",backdropFilter:"var(--card-backdrop-filter)","@media print":{boxShadow:"none"}},l={_hover:{transform:"scale(1.1)"},color:"var(--link-color)",height:"auto",padding:"0.7em",paddingY:"0.2em",minW:"2.5em",position:"relative"},s=(e,t)=>({...a,...o,_hover:t?void 0:r,"@media print":{boxShadow:"none"}}),d=(e,t)=>({[".".concat(i)]:s(e,t)})},93681:(e,t,n)=>{"use strict";n.d(t,{z:()=>i});let i={borderRadius:"var(--box-border-radius)"}},13320:(e,t,n)=>{"use strict";n.d(t,{S:()=>c});var i=n(82354),a=n(93765),r=n(70637),o=n(70605),l=n(77654),s=n(63413),d=n(71220);let c=(e,t)=>({...(0,l.dd)(e),...(0,o.EB)(e,t),...(0,a.tX)(e),...(0,r.V)(e),...(0,s.py)(),...(0,d.zz)(),[".".concat(i.QJ," .").concat(i._P)]:e.config.contentStyles})},71220:(e,t,n)=>{"use strict";n.d(t,{a0:()=>i,zz:()=>a});let i="themed-table",a=()=>({[".".concat(i)]:r}),r={border:"0.0625em solid var(--neutral-border-color)",borderRadius:"var(--box-border-radius)","tbody tr":{_even:{backgroundColor:"blackAlpha.50"},_odd:{backgroundColor:"whiteAlpha.50"}},td:{borderInlineStart:"0.0625em solid var(--shape-border-color)",_first:{borderInlineStartWidth:"0"}}}},15750:(e,t,n)=>{"use strict";n.d(t,{G:()=>o});var i=n(64225),a=n(28997),r=n(5933);let o=()=>{let e=(0,i.GV)(r.SJ);return{logoSrc:(0,a.X)(e),logoImage:e.config.logoImage}}},45390:(e,t,n)=>{"use strict";n.d(t,{B:()=>O});var i=n(31085),a=n(56824),r=n(80532),o=n(25420),l=n(27559),s=n(62313),d=n(18201),c=n(80853),u=n(20501),p=n(24221),h=n(9104),m=n(95640),g=n(12567),x=n(14041),f=n(32133),v=n(92667),b=n(58599),y=n(5933),w=n(95580),j=n(35864),k=n(56982),C=n(47687),S=n(44386),A=n(46291),z=n(77854),I=n(79893),R=n(27838),E=n(71837),L=n(87643),_=n(13236);let M=n(67291).A.extend({parseHTML:()=>[{tag:"p"}],renderHTML(e){let{HTMLAttributes:t}=e;return["p",(0,_.KV)(t,{dir:"auto"}),0]}}),N=()=>[k.A.configure({horizontalRule:!1,codeBlock:!1,paragraph:!1}),M,E.c,j.Ay.configure({openOnClick:!1}),S.N,z.c,R.M9,R.lw,R.BF,A.Hf,C.a,A.mk,I.Q8,L.bU],T=(0,g.v_)("mod+Enter"),P=(0,g.v_)("mod+a"),O=x.memo(e=>{let{clearContentOnSave:t=!1,editable:n=!0,saveButtonText:g=(0,i.jsx)(m.x6,{id:"tfDRzk"}),saveButtonIcon:j=(0,i.jsx)(p.g,{icon:u.isI}),initialContent:k="",placeholder:C="Reply",showBorder:S=!0,onCancelEditingClick:A,onCommentSave:z,onCreate:I=()=>{},onUpdate:R=()=>{},shouldFocus:E=!0,alwaysShowButtons:L=!1,..._}=e,M=(0,x.useMemo)(()=>N(),[]),O=(0,f.d4)(y.sX),D=(0,f.d4)(y.aQ),F=(0,b.hG)({extensions:M,content:k,onCreate:e=>{let{editor:t}=e;I({editor:t}),t.gammaDocId=O,t.gammaOrgId=D},onUpdate:e=>{let{editor:t,transaction:n}=e;R({editor:t,transaction:n})}});(0,x.useEffect)(()=>{F&&F.setOptions({editable:n})},[F,n]),(0,v.Vg)(()=>{F&&E&&F.isEditable&&F.commands.focus("end")},[F,E],[F]),(0,x.useEffect)(()=>{F&&!n&&(null==F||F.commands.setContent(k))},[F,k,n]);let{colorMode:H}=(0,a.G6)(),W="light"===H,B=e=>{P(e)&&(e.preventDefault(),null==F||F.commands.selectAll()),T(e)&&(e.preventDefault(),e.stopPropagation(),V())},V=()=>{!(!z||!F||(0,w.mf)(F.state.doc)||(0,w.nC)(F.state.doc))&&(z(F.getJSON()),t&&F.commands.clearContent(!0))};return n?(0,i.jsxs)(o.s,{"data-gamma-child-tiptap-editor":"comment-editor",direction:"column",..._,children:[(0,i.jsx)(r.az,{tabIndex:0,w:"100%",onKeyDownCapture:B,onKeyPressCapture:B,className:"comment-editor",color:W?"gray.800":"gray.200",bg:W?"white":"gray.800",...S?{border:"1px solid",borderColor:W?"gray.200":"gray.700",borderRadius:"md"}:{},sx:{"p:first-of-type::before":(null==F?void 0:F.isEmpty)?{content:'"'.concat(C,'"'),float:"left",color:W?"gray.400":"gray.500",pointerEvents:"none",height:"0"}:""},fontSize:"sm",children:(0,i.jsx)(b.$Z,{editor:F,className:"comment-editor",style:{wordBreak:"break-word",width:"100%"}})}),(0,i.jsxs)(l.S,{in:!!(L||F&&!F.isEmpty),children:[(0,i.jsx)(r.az,{h:3,children:(0,i.jsx)(i.Fragment,{})}),(0,i.jsxs)(s.z,{children:[(0,i.jsx)(d.h,{}),!!A&&(0,i.jsx)(h.Tz,{label:(0,i.jsx)(m.x6,{id:"zeQdHz"}),placement:"top",children:(0,i.jsx)(c.$,{size:"sm",variant:"hazardous",onClick:()=>{A&&A(),null==F||F.commands.clearContent(!0)},children:(0,i.jsx)(m.x6,{id:"dEgA5A"})})}),(0,i.jsx)(c.$,{size:"sm",variant:"solid",leftIcon:j,isDisabled:(null==F?void 0:F.isEmpty)||(0,w.nC)(null==F?void 0:F.state.doc),onClick:V,"data-testid":"post-comment",children:g})]})]})]}):(0,i.jsx)(r.az,{fontSize:"sm",children:(0,i.jsx)(b.$Z,{editor:F})})})},57267:(e,t,n)=>{"use strict";n.d(t,{C:()=>sU});var i=n(83683),a=n(28396),r=n(73893),o=n(47687),l=n(13236),s=n(37864),d=n(11329),c=n(58599),u=n(29362),p=n(31085),h=n(80532),m=n(5434);let g=e=>(0,p.jsx)(m.u,{...e,children:(0,p.jsxs)(h.az,{position:"relative","data-selection-ring":"padded",children:[(0,p.jsx)(c.$p,{as:"blockquote"}),(0,p.jsx)(h.az,{position:"absolute",left:"0",top:"0",height:"100%",w:"var(--line-thickness)",backgroundColor:"var(--accent-color)",backgroundImage:"var(--accent-gradient)"})]})}),x=s.Ay.extend({group:"cardBlock layoutBlock footnoteBlock tableBlock smartLayoutBlock",content:"(block | calloutBlock)+",addNodeView:()=>(0,c.gu)(g,{update:u.z0}),addCommands(){var e;return{...null===(e=this.parent)||void 0===e?void 0:e.call(this),unwrapQuoteOnDelete:()=>e=>{let{state:t,tr:n}=e,{selection:i}=t;if(!i.empty)return!1;let a=(0,l.KP)(e=>e.type.name===x.name)(i);if(!a||!(i.from<=a.pos+2))return!1;let r=i.$from.blockRange(i.$to);if(!r)return!1;let o=(0,d.jP)(r);return!!o&&(n.lift(r,o),!0)}}}});var f=n(43504);let v=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,b=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,y=f.Ay.extend({addInputRules(){return[(0,l.OX)({find:v,type:this.type}),(0,l.OX)({find:b,type:this.type})]},renderHTML(e){let{HTMLAttributes:t}=e;return["b",(0,l.KV)(this.options.HTMLAttributes,t),0]}});var w=n(20169),j=n(31060),k=n(23231);let C=l.bP.create({name:"buttonGroup",content:"button{1, ".concat(k.r4,"}"),group:"block",allowGapCursor:!1,addNodeView:()=>(0,c.gu)(j.r,{update:u.R$}),parseHTML:()=>[{tag:"div[class=button-group]"},{tag:"buttons"}],renderHTML(e){let{HTMLAttributes:t}=e;return["div",(0,l.KV)(t,{class:"button-group"}),0]},renderHTMLforAI(e){let{node:t}=e;return["buttons",{},0]}});var S=n(62313),A=n(61778),z=n(81313),I=n(24221),R=n(14041),E=n(77654),L=n(1771),_=n(63723),M=n(4381),N=n(91725),T=n(98057),P=n(93765),O=n(63955),D=n(75185),F=n(16262);let H=e=>{let{node:t,editor:n,getPos:i,decorations:a}=e,{variant:r,icon:o,color:l}=t.attrs,{firstChildSize:s}=(0,T.P)(a),{theme:d,isDark:u}=(0,M.a)(a),g=(0,P.bh)(s,d),x=(0,L.Ik)((0,L.VH)(d)),{colorScheme:f,icon:v}=(0,F.Tg)(r),{backgroundColor:b,iconColor:y,bodyColor:w}=l?W(l):B(u,f,x),j=(0,R.useCallback)(()=>{n.isEditable&&n.commands.selectNodeAtPos(i())},[n,i]);return(0,p.jsx)(m.u,{...e,children:(0,p.jsxs)(h.az,{backgroundColor:"".concat(b," !important"),pt:"0.25em",pb:"0.5em",px:"1em",className:"calloutBox",borderRadius:"var(--box-border-radius)",css:{"--body-color":w,"--heading-color":w},"data-selection-ring":!0,pos:"relative",children:[(0,p.jsxs)(S.z,{direction:"row",align:s?"baseline":"flex-start",spacing:"1em",children:[o&&(0,p.jsx)(A.E,{sx:g,onClick:j,color:y,mt:s?void 0:"1em",contentEditable:!1,children:(0,p.jsx)(I.g,{icon:v,fixedWidth:!0})}),(0,p.jsx)(c.$p,{style:{flex:"1 1 auto",minWidth:0},className:(0,z.cx)(E.Dv)})]}),(0,p.jsx)(N.A,{...e})]})})},W=e=>{let t=(0,_.$p)(e),n=t?(0,_.PE)(e,.7):(0,_.PE)(e,.3);return{backgroundColor:e,bodyColor:t?"white":"black",iconColor:n}},B=(e,t,n)=>{let i=e?(0,_.PE)("accent"===t?n:O.hr.dark[t].hex,.15):(0,_.PE)("accent"===t?n:O.hr.light[t].hex,.85),a=e?"accent"===t?(0,_.PE)(n,.7):D.qd.dark[t].hex:"accent"===t?(0,_.PE)(n,.3):D.qd.light[t].hex;return{backgroundColor:i,bodyColor:e?"white":"black",iconColor:a}},V=l.bP.create({name:"calloutBox",group:"cardBlock layoutBlock footnoteBlock smartLayoutBlock",content:"(block | calloutBlock)+",selectable:!0,isolating:!0,containerHandle:!0,addAttributes:()=>({variant:{default:"note"},icon:{default:!0},color:{}}),addNodeView:()=>(0,c.gu)(H,{update:u.z0}),parseHTML:()=>[{tag:"aside"}],renderHTML(e){let{HTMLAttributes:t}=e;return["aside",(0,l.KV)(t,{class:"calloutBox"}),0]}});var G=n(61201),U=n(69646),K=n(42215),q=n(44428),J=n(60953),$=n(33587),Y=n(952),Q=n(43873),X=n(26813),Z=n(95580),ee=n(26884),et=n(25420),en=n(82451),ei=n.n(en),ea=n(71096),er=n(70338),eo=n(4977),el=n(64225),es=n(48192),ed=n(71957),ec=n(802),eu=n(73818),ep=n(2696),eh=n(41938),em=n(5933),eg=n(14e3),ex=n(17539),ef=n(27930),ev=n(5366),eb=n(35002),ey=n(64130),ew=n(10458),ej=n(77256),ek=n(19534),eC=n(74336),eS=n(87643),eA=n(27559),ez=n(35687),eI=n(46882),eR=n(3040),eE=n(9104),eL=n(95640),e_=n(12327),eM=n(87835),eN=n.n(eM),eT=n(91559),eP=n(90754),eO=n(55090),eD=n(87747),eF=n(80917),eH=n(32202),eW=n(18588),eB=n(59742),eV=n(97482),eG=n(65446),eU=n(34363),eK=n(18658),eq=n(20501),eJ=n(22267),e$=n(51436),eY=n(37570),eQ=n(61409);let eX=(0,R.memo)(e=>{let{editor:t,onClose:n,handleAddCard:i,recentlyUsedTemplates:a}=e,r=(0,eH.d)(),o=(0,e$.wz)("modal"),l=(0,R.useCallback)(e=>{r({status:"success",title:e_.Ru._({id:"WJGAWS"}),duration:1300,isClosable:!1,position:"top"}),n(),i(e,"modal")},[n,i,r]),s=a.filter(e=>!(0,e$.l2)(t,e)).slice(0,eQ.q);return(0,p.jsx)(eE.L8,{isDark:!1,children:(0,p.jsxs)(eW.aF,{isOpen:!0,onClose:n,size:{base:"5xl","2xl":"6xl"},children:[(0,p.jsx)(eB.m,{}),(0,p.jsxs)(eV.$,{children:[(0,p.jsx)(eG.s,{}),(0,p.jsx)(eU.r,{children:(0,p.jsx)(eL.x6,{id:"HNcS3K"})}),(0,p.jsx)(eK.c,{pb:6,children:(0,p.jsxs)(ez.B,{spacing:6,children:[!!s.length&&(0,p.jsxs)(ez.B,{children:[(0,p.jsxs)(A.E,{color:"gray.700",children:[(0,p.jsx)(I.g,{icon:eq.a$,fixedWidth:!0})," ",(0,p.jsx)(eL.x6,{id:"uabU9X"})]}),(0,p.jsx)(eI.x,{templateColumns:"repeat(auto-fill, minmax(calc(".concat(eY.dG.lg," + 0.4em), 1fr))"),gap:3,children:s.map(e=>{let{jsonContent:t,id:n,name:i}=e;return(0,p.jsx)(eJ.F,{isDark:!1,isSelected:!1,tooltip:i(),label:i(),onClick:()=>l(n),w:"auto",templateIcon:(0,p.jsx)(eY.LK,{content:t,isDark:!1,borderRadius:"base",size:"lg"})},n)})})]}),o.map(e=>{let{subcategory:n,items:i}=e;return(0,p.jsxs)(ez.B,{children:[(0,p.jsx)(A.E,{color:"gray.700",children:n}),(0,p.jsx)(eI.x,{templateColumns:"repeat(auto-fill, minmax(calc(".concat(eY.dG.lg," + 0.4em), 1fr))"),gap:3,children:i.filter(e=>!(0,e$.l2)(t,e)).map(e=>{let{id:t,name:n,jsonContent:i}=e,r=!!a.find(e=>{let{id:n}=e;return n===t});return(0,p.jsx)(eJ.F,{isDark:!1,isSelected:!1,tooltip:"".concat(n()," ").concat(r?e_.Ru._({id:"uabU9X"}):""),label:n(),onClick:()=>l(t),w:"auto",templateIcon:(0,p.jsx)(eY.LK,{content:i,isDark:!1,borderRadius:"base",size:"lg"}),boxShadow:"none"},t)})})]},n)})]})})]})]})})});var eZ=n(59707),e0=n(86724),e1=n(14691),e2=n(42849),e4=n(77633);let e5=(0,R.memo)(e=>{let{setCardContent:t,editor:n,isFocused:i,edgeLayoutsDisabled:a,isNested:r}=e,{isInOfflineMode:o}=(0,eT.u)(),l=(0,eD.rd)(),{isOpen:s,onClose:d,onOpen:c}=(0,eP.E)({id:"cardTemplatesModal"}),[u,h]=(0,e0.M)(e1.E.recentlyUsedCardTemplateIds,[]),m=(0,R.useCallback)(function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"placeholder";t(e),"aiCardAfter"!==e&&h((0,e4.s)(e,u));let i="placeholder"===n?eO.oU.CARD_TEMPLATE_PLACEHOLDER:eO.oU.CARD_TEMPLATE_MODAL;(0,eF.J)({nodeName:"card",key:e},i)},[t,u,h]),[g,x]=(0,R.useMemo)(()=>{let e=u.map(e=>(0,e$.iT)()[e]).filter(e=>!!e),t=(0,e$.wz)("placeholder").flatMap(e=>{let{items:t}=e;return t});return[eN()([...e,...t],"id").filter(e=>!!e).filter(e=>!(0,e$.l2)(n,e,e=>{var t;let{jsonContent:n}=e;return a&&(0,e2.sP)(null===(t=n.attrs)||void 0===t?void 0:t.layout)})),e]},[a,n,u]);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(eE.L8,{isDark:l,children:(0,p.jsx)(eA.S,{in:i||s,onAnimationComplete:()=>{var e,t;null===(e=(t=n.commands).refreshBubbleMenu)||void 0===e||e.call(t)},children:(0,p.jsxs)(ez.B,{overflow:"hidden",mx:16,mb:12,contentEditable:!1,onMouseDown:eZ.Fw,cursor:"default",fontFamily:"body",color:"var(--body-color-muted)",children:[(0,p.jsx)(A.E,{fontSize:"sm",fontWeight:"normal",children:(0,p.jsx)(eL.x6,{id:"3h21H3"})}),(0,p.jsxs)(eI.x,{templateColumns:"repeat(auto-fill, minmax(calc(".concat(eY.dG.md," + var(--chakra-space-1-5)), 1fr))"),fontSize:"1rem",gap:2,children:[g.slice(0,r?2:4).map(e=>{let{id:t,jsonContent:n,name:i}=e;return(0,p.jsx)(eJ.F,{tooltip:i(),isDark:l,templateIcon:(0,p.jsx)(eY.LK,{content:n,isDark:l,borderRadius:"base",maxH:"5em",overflow:"hidden"}),isSelected:!1,onClick:()=>m(t),w:"auto",minW:"auto",fontSize:"1em"},t)}),(0,p.jsx)(eJ.F,{tooltip:e_.Ru._({id:"bHT6mZ"}),label:(0,p.jsx)(eL.x6,{id:"iTylMl"}),isDark:l,templateIcon:(0,p.jsx)(I.g,{icon:eR.Qyz,fixedWidth:!0}),isSelected:!1,onClick:c,fontSize:"1em"}),!o&&(0,p.jsx)(eJ.F,{isDark:l,templateIcon:(0,p.jsx)(I.g,{icon:eR.p7g,fixedWidth:!0}),label:(0,p.jsx)(eL.x6,{id:"ziAjHi"}),tooltip:e_.Ru._({id:"tkZYgO"}),isSelected:!1,onClick:()=>{m("aiCardAfter")},fontSize:"1em"})]})]})})}),s&&(0,p.jsx)(eX,{editor:n,onClose:d,handleAddCard:m,recentlyUsedTemplates:x})]})});e5.displayName="ChooseCardTemplatePlaceholder";var e6=n(14250),e3=n(94562),e8=n(92776),e7=n(3706),e9=n(67965),te=n(5377),tt=n(69e3),tn=n(85303),ti=n(94445),ta=n(49880),tr=n(49624),to=n(91939),tl=n(48226),ts=n(96061),td=n(14661),tc=n(44751),tu=n(68109),tp=n(49964),th=n(22762),tm=n(12554);let tg=e=>{let{editor:t,cardNode:n,cardPos:i,cardId:a,displayLayout:r,hasCardNotesNode:o}=e,l=(0,eH.d)(),s=(0,ta.T)(),d=(0,eb.u)("copyCardsToDeck"),c=(0,el.GV)(em.nD),u=(0,th.K)(),h=a===(0,el.GV)(em.uF)[0],m=(0,tu._)(t,i),g=(0,R.useCallback)(()=>{if(!t||!n)return;let e=t.state.doc.nodeAt(i),a=e&&(0,te.getCardTitle)(e.toJSON());t.chain().deleteCard(i).focus().run();let r=e_.Ru._({id:"0MWv65",values:{displayTitle:a?'"'.concat(a,'"'):"card"}}),o=e_.Ru._({id:"9uI/rE"}),s=l({title:(0,p.jsxs)(S.z,{children:[(0,p.jsx)(A.E,{noOfLines:1,children:r}),(0,p.jsx)(e7.N,{textDecoration:"underline",onClick:()=>{(0,e9.tN)(t.state),l.close(s)},children:o})]}),status:"info",duration:3e3,position:"top"})},[t,n,i,l]),x=(0,R.useCallback)(()=>{if(!t||!n)return;let e=tt.FK.from([n]);(0,ts.E)(e,t,!1)},[t,n]),f=(0,R.useCallback)(()=>{t&&void 0!==i&&t.chain().mergeCardsAtPos(i).focus().run()},[t,i]),v=(0,R.useCallback)(()=>{if(!t||!n)return;let e=n.attrs,a={background:{type:X.h.NONE,source:void 0},cardSize:void 0,verticalAlign:void 0,container:{...e.container,width:void 0,background:void 0},layout:"blank"};(0,tl.e)(t,i,a)},[t,n,i]),{setCardColor:b,currentColor:y,themeCardColor:w}=(0,tc.Q)({editor:t,attrs:null==n?void 0:n.attrs,getPos:()=>i}),j=(0,R.useCallback)(()=>{if(!t||!a||!n)return;c&&!o&&(0,tm.ni)(t,i);let e=(0,ti.Ix)((0,el.KA)().getState());tn.R.emit("toggle",{clickedCardId:a,activeNotesCardId:e})},[t,a,n,i,o,c]),{onCopyLinkClick:k}=(0,to.L)({cardId:null==n?void 0:n.attrs.id}),C=(0,R.useCallback)(()=>{t&&a&&k()},[t,a,k]);return(0,R.useMemo)(()=>t?[{key:"card-options",title:(0,p.jsx)(eL.x6,{id:"kryGs+"})},{divider:!0},{key:"copy-card",label:(0,p.jsx)(eL.x6,{id:"Bq0HJ4"}),icon:eq.jPR,onClick:x},...d?[{key:"copy-card-to-deck",label:(0,p.jsx)(eL.x6,{id:"IAsTWw"}),icon:(0,p.jsx)(I.g,{icon:eq.Rvk,flip:"horizontal"}),onClick:()=>n&&s([n])}]:[],...h?[]:[{key:"merge-card-with-above",label:(0,p.jsx)(eL.x6,{id:"lxx9kE"}),icon:eq.INu,onClick:f}],{divider:!0},{key:"change-card-color",label:(0,p.jsx)(eL.x6,{id:"D/jD8b"}),icon:eq.fyG,items:[{key:"color-picker",element:e=>(0,p.jsx)(tr.b,{currentColor:null!=y?y:w,setColor:t=>{b(t),null==e||e()},source:"CardColor"})}]},{key:"reset-styling",label:(0,p.jsx)(eL.x6,{id:"6hU6uw"}),icon:eq.ub2,onClick:v},{divider:!0},{key:"card-notes",label:(0,p.jsx)(eL.x6,{id:"PFP9+0"}),icon:eq.bLf,onClick:j},{key:"copy-private-link",label:u?(0,p.jsx)(eL.x6,{id:"F0YmUY"}):(0,p.jsx)(eL.x6,{id:"j7DOt7"}),icon:eq.CQO,onClick:C},{divider:!0},{key:"layout",label:e_.Ru._({id:"rdU729"}),icon:eq.swh,items:td.bI.map(e=>({key:e,label:(0,tp.Nu)(e),checked:r===e,icon:(0,p.jsx)(td.Ed,{layout:e,isSelected:r===e}),onClick:()=>m(e)}))},{divider:!0},{key:"delete",label:(0,p.jsx)(eL.x6,{id:"cnGeoo"}),icon:eq.yLS,onClick:g,color:"red.500"}]:[],[t,x,d,h,f,v,j,u,C,g,n,s,y,w,b,r,m])};var tx=n(77646),tf=n(31485),tv=n(74727),tb=n(9021),ty=n(18651);let tw={src:"/_next/static/media/layout-behind.f3d267a6.svg"},tj={src:"/_next/static/media/layout-left.deebff4d.svg"},tk={src:"/_next/static/media/layout-right.af6aebc7.svg"},tC={src:"/_next/static/media/layout-top.bb63e01e.svg"},tS=e=>{let{isVisible:t,setLayout:n,editor:i}=e,a=(0,eD.rd)(),r=a?"invert(.8) brightness(1.2)":"invert(0)";return(0,p.jsx)(eE.L8,{isDark:a,children:(0,p.jsx)(eA.S,{in:t,onAnimationComplete:()=>{var e,t;null===(e=(t=i.commands).refreshBubbleMenu)||void 0===e||e.call(t)},children:(0,p.jsxs)(ez.B,{overflow:"hidden",mx:16,mb:12,contentEditable:!1,onMouseDown:eZ.Fw,cursor:"default",children:[(0,p.jsx)(A.E,{color:"var(--body-color-muted)",fontSize:"sm",fontFamily:"Inter",fontWeight:"normal",children:(0,p.jsx)(eL.x6,{id:"q+/7Td"})}),(0,p.jsxs)(tv.e,{spacing:1,children:[(0,p.jsx)(tb.K,{"aria-label":e_.Ru._({id:"loNm+3"}),h:"auto",p:1,variant:"ghost",onClick:()=>n("top"),icon:(0,p.jsx)(ty._,{src:tC.src,filter:r})}),(0,p.jsx)(tb.K,{"aria-label":e_.Ru._({id:"dL4qXb"}),h:"auto",p:1,variant:"ghost",onClick:()=>n("left"),icon:(0,p.jsx)(ty._,{src:tj.src,filter:r})}),(0,p.jsx)(tb.K,{"aria-label":e_.Ru._({id:"kVQU97"}),h:"auto",p:1,variant:"ghost",onClick:()=>n("right"),icon:(0,p.jsx)(ty._,{src:tk.src,filter:r})}),(0,p.jsx)(tb.K,{"aria-label":e_.Ru._({id:"3eqz61"}),h:"auto",p:1,variant:"ghost",onClick:()=>n("behind"),icon:(0,p.jsx)(ty._,{src:tw.src,filter:r})})]})]})})})},tA=(e,t,n)=>{if(n)return{};if("behind"===e||"blank"===e)return{borderRadius:"var(--card-border-radius)"};if("left"===e)return"accent"===t?{borderLeftRadius:"var(--card-border-radius)"}:"body"===t?{borderRightRadius:"var(--card-border-radius)"}:{};if("right"===e)return"body"===t?{borderLeftRadius:"var(--card-border-radius)"}:"accent"===t?{borderRightRadius:"var(--card-border-radius)"}:{};if("top"===e||"mobileLeft"===e)return"body"===t?{borderBottomRadius:"var(--card-border-radius)"}:"accent"===t?{borderTopRadius:"var(--card-border-radius)"}:{};if("mobileRight"===e){if("accent"===t)return{borderBottomRadius:"var(--card-border-radius)"};if("body"===t)return{borderTopRadius:"var(--card-border-radius)"}}return{}},tz=e=>{var t;let n;let{node:i,getPos:a,decorations:r,editor:o}=e,s=i.attrs,d=(0,ey.fW)(),u=(0,tf.Bn)(r),h=(0,R.useMemo)(()=>[],[]);try{let e=a();(n=(0,l.eL)(null==o?void 0:o.state.doc.resolve(e),tx.jg))&&(h=(0,ek.j5)(o,n.pos))}catch(e){console.error(e)}let{isNested:m,insideSideLayout:g,displayLayout:x,hasCardNotesNode:f}=(0,e6.tg)(h),v=(null==u?void 0:u.layout)==="blank",b=tA(u.layout,s.itemId,"full"===u.cardSize),y={flexDirection:"column",justifyContent:s.verticalAlign||"var(--card-vertical-align)"},w=(0,e2.lH)(null==u?void 0:u.layout),j=w&&!w.items[s.itemId],[k]=(0,e8.E)(u.cardId),C=(0,eC.v)(r),S=(0,el.GV)(em.nD),A=(0,eS.DM)(r),z=(0,e3.F)(),I=(0,eb.u)("cardTemplatesPlaceholder"),E=(0,ew.st)(),L=S&&C&&v,_=(0,R.useCallback)(e=>{let t=(0,Z.TK)(o.state.doc.resolve(a()),tx.jg),n=t.length>0?t[0].pos:null;n&&(null==E||E.track(ew.VV.CARD_LAYOUT_UPDATED,{source:"empty-card-placeholder",layout:e}),o.chain().setCardLayout(n,e,z).selectInsideCardBody(n).focus().run())},[o,a,z,E]),M=(0,R.useCallback)(e=>{if(!I)return;let t=(0,Z.TK)(o.state.doc.resolve(a()),tx.jg),n=t.length>0?t[0]:null;if(!n)return;let i=(0,ej.GO)()[e]||(0,ej.GO)().blankCard,{layoutTemplateColumns:r,...l}=n.node.attrs;i.attrs={...l,...i.attrs};let s=n.pos,d=n.pos+n.node.nodeSize;o.chain().insertContentAt({from:s,to:d},i,{updateSelection:!1}).selectInsertedNode().run()},[I,o,a]),N=tg({editor:o,cardNode:null==n?void 0:n.node,cardPos:null!==(t=null==n?void 0:n.pos)&&void 0!==t?t:0,cardId:null==n?void 0:n.node.attrs.id,displayLayout:x,hasCardNotesNode:f}),{onOpenContextMenu:T,onCloseContextMenu:P,menuProps:O}=(0,eh.$)({editor:o,getPos:a});return(0,p.jsxs)(c.VR,{dir:d?"rtl":"ltr",as:"div",style:{...j?{display:"none"}:{}},children:[(0,p.jsxs)(et.s,{"data-content-reference":!0,className:"card-layout-cell-bg",w:"100%",h:"100%",position:"relative","data-selection-ring":!0,"data-selection-background":!0,..."presentCurrent"!==k&&b,...y,children:[(0,p.jsx)(c.$p,{as:"div",style:{width:"100%"},onContextMenu:e=>{e.target===e.currentTarget&&T(e)}}),L&&I&&(0,p.jsx)(e5,{isFocused:A,editor:o,setCardContent:M,edgeLayoutsDisabled:g,isNested:m}),L&&!m&&!I&&(0,p.jsx)(tS,{isVisible:A,setLayout:_,editor:o})]}),(0,p.jsx)(ea.t,{menuItems:N,isOpen:O.isOpen,position:O.position,onClose:P,size:"small"})]})};var tI=n(29383),tR=n(52417);let tE=e=>{var t;let{hasImage:n,onEditImage:i,image:a,editor:r,isLoading:o,openEditBackgroundDrawer:l,borderProps:s,accentLayout:d,...c}=e,u=!!i;return n?null:(0,p.jsx)(et.s,{align:"center",justify:"center",pos:"absolute",inset:0,role:"group",cursor:"default","data-layout-cut":"mobileLeft"===d?"top":d,...n?{}:{bgColor:"gray.200"},...c,children:!r.isThumbnail&&(0,p.jsx)(et.s,{pos:"absolute",inset:0,justify:"center",align:"center",cursor:u?"default":void 0,onClick:i,children:(0,p.jsx)(h.az,{color:"gray.400",h:"100%",w:"100%",children:(0,p.jsx)(ef.Pf,{icon:tR.Fn[es.j].icon,isUploading:!1,isLoading:o,loadingProvider:null==a?void 0:null===(t=a.loadImageParams)||void 0===t?void 0:t.provider,onSelectAndFocus:i,hasUploadError:!1,isAccentImageDrawer:!0,openEditBackgroundDrawer:l,h:"100%",w:"100%",hasQuickActions:"behind"!==d,...s})})})})};var tL=n(23331),t_=n(38684);let tM=e=>{let{background:t,rounded:n,resizeParams:i,cutLayout:a,isDark:r,bodyColor:o}=e,l=(0,t_.FD)(t,r,i,o);return(0,p.jsx)(h.az,{position:"absolute",inset:"0",overflow:"hidden",borderRadius:n?"var(--box-border-radius)":"inherit","data-layout-cut":a,...l})},tN=e=>{var t,n;let{background:i,rounded:a,cutLayout:r}=e,o=i.image&&!(0,ex.SV)(i.image.src)&&!(null===(t=i.image.meta)||void 0===t?void 0:t.has_transparency),l=o?(0,t_.FD)(i,!1,{width:400,blur:50,format:"jpg"}):void 0;return(0,p.jsx)(h.az,{position:"absolute",inset:"0","data-image-fit-bg":!0,overflow:"hidden",...l,borderRadius:a?"var(--box-border-radius)":"inherit",marginY:a?"1em":void 0,bgPosition:"center","data-layout-cut":r,children:o&&!(0,ex.md)((null===(n=i.image)||void 0===n?void 0:n.src)||void 0)&&(0,p.jsx)(h.az,{backdropFilter:"blur(6em)",inset:0,position:"absolute",borderRadius:"inherit","data-selection-ring":"inside"})})},tT=e=>{let{image:t,resizeParams:n,cutLayout:i,bodyColor:a}=e,{tempUrl:r,meta:o}=t,l=t.src?(0,ex.pO)(t.src,a):void 0,s=l&&(0,tL.D)(t)&&n?(0,ex.Ub)(l,n,o):l;return(0,p.jsx)(ex.Me,{src:s||void 0,fallbackSrc:r||void 0,borderRadius:"var(--box-border-radius)",pos:"relative",flex:"0 1 auto",minH:0,minW:0,width:"auto",maxW:"100%","data-layout-cut-fg":i,className:"reset-max-width-with-margins"})};var tP=n(32900),tO=n(74240),tD=n(14858),tF=n(15355),tH=n(2079),tW=n(79893),tB=n(16648);let tV=e=>{var t;let n,{editor:i,node:a,decorations:r,getPos:o}=e,s=a.attrs,d=(0,tf.Bn)(r),c=(0,tp.jh)(s,null==d?void 0:d.layout),{changeFocalPoint:u,startRemoveBg:h,isRemovingBg:m}=(0,tH.c)({editor:i,getPos:o,backgroundRemovalId:null==d?void 0:d.cardId});try{n=(0,l.eL)(i.state.doc.resolve(o()),ek.jg)}catch(e){console.error(e)}let g=s.background.type===X.h.IMAGE,{displayLayout:x}=(0,e6.tg)(r),f=(0,tu._)(i,(null==n?void 0:n.pos)||0),v=(0,tO.l)(s.background.image),{toggleBuddyChatPanel:b,isBuddyChatPanelOpen:y}=(0,tD.C)(),w=(0,tB.d)({editor:i,getPos:o,node:a,includeCut:!1,imageSrc:null===(t=s.background.image)||void 0===t?void 0:t.src});return{contextMenuItems:[...g?[...w,{divider:!0},{key:"edit-image",label:g?e_.Ru._({id:"9IrgTy"}):e_.Ru._({id:"pVb3uA"}),icon:eq.MT7,onClick:()=>{let e=null==n?void 0:n.node.attrs.id;e&&tI.R.emit("toggleEditBackgroundDrawer",{openDrawer:!0,cardId:e})}},...v?[{key:"ask-ai",label:(0,p.jsx)(eL.x6,{id:"vKZEFh"}),icon:eR.p7g,onClick:()=>{y||b(),setTimeout(()=>{tP.j.emit("prefillMessage",{message:""})},200)}}]:[],{key:"remove-background",label:m?e_.Ru._({id:"RdqLb7"}):e_.Ru._({id:"ylbfBl"}),icon:m?eq.z1G:eq.sAw,rightIcon:m?void 0:(0,p.jsx)(tF.G,{type:"removeBackground",ms:2,color:"gray.400"}),disabled:m,onClick:h},{key:"fit-image",label:"fit"===c?e_.Ru._({id:"2Ivw1n"}):e_.Ru._({id:"VPxUGR"}),icon:eq.GZ1,onClick:()=>{i.commands.updateAttributesAtPos(o(),{fitType:"fit"===c?"fill":"fit"})}},{key:"change-focus-point",label:e_.Ru._({id:"BmxaoW"}),icon:eq.xD0,onClick:()=>{let e=(0,tW.um)(a);u((0,tW.Df)(i,a,o(),e))},disabled:"fit"===c},{divider:!0}]:[],{key:"layout",label:e_.Ru._({id:"vR68Ol"}),icon:eq.swh,items:td.bI.map(e=>({key:e,label:(0,tp.Nu)(e),icon:(0,p.jsx)(td.Ed,{layout:e,isSelected:x===e}),onClick:()=>f(e)}))},{divider:!0},{key:"remove-accent-image",label:g?e_.Ru._({id:"sGYCGx"}):e_.Ru._({id:"6vLq+T"}),icon:g?eq.K3F:eq.yLS,onClick:()=>(0,tp.kB)(i,o(),g),color:"red.500"}]}},tG={width:1200},tU=e=>{var t,n,i;let a=(0,el.GV)(em.SJ),r=(null===(t=a.config)||void 0===t?void 0:t.accentBackgrounds)&&(null===(n=a.config)||void 0===n?void 0:n.accentBackgrounds.length)>0;return e.source||(null===(i=e.image)||void 0===i?void 0:i.source)||r?es.j:er.L},tK=e=>{let{editor:t,node:n,getPos:i}=e;(0,R.useEffect)(()=>{"cardLayoutItem"===n.type.name&&"accent"===n.attrs.itemId&&setTimeout(()=>{t.commands.command(e=>{let{tr:a}=e;return(0,e2.OH)(a,i(),n,t.schema),!0})})},[t,i,n])},tq=e=>{var t,n,i,a,r;let{node:o,decorations:l,editor:s,getPos:d}=e,u=o.attrs,{background:h}=u;tK(e);let{openBackgroundTab:m,...g}=(0,ed.O)(),x=tU(h),f=(0,R.useCallback)(e=>{s.commands.updateNestedAttributesAtPos(d(),e)},[s,d]),v=(0,R.useCallback)(e=>{s.commands.updateNestedAttributesAtPos(d(),{background:ei()({},h,{image:{...e,meta:{has_transparency:!0}}})})},[s,d,h]),{onCloseContextMenu:b,onOpenContextMenu:y,menuProps:w}=(0,eh.$)({editor:s,getPos:d}),{contextMenuItems:j}=tV({editor:s,node:o,decorations:l,getPos:d}),{defaultFullBleed:k}=(0,el.GV)(em.Uu),C=(0,tf.Bn)(l),{isDark:S,bodyColor:A}=(0,M.a)(l),z=(0,el.GV)(em.wC)!==eg.w.SLIDE_VIEW&&(null==C||!C.isNested)&&((null==C?void 0:C.cardSize)==="default"?"full"===k:(null==C?void 0:C.cardSize)==="full"),I=null==C?void 0:C.cardId,E=null==C?void 0:C.layout,L="behind"===E,_=s.isThumbnail?ex.p7:"right"===E||"left"===E||"top"===E||"mobileLeft"===E||"mobileRight"===E?tG:void 0,{bgRemovalInProgress:N}=(0,ec._)({editor:s,id:I,src:null===(t=h.image)||void 0===t?void 0:t.src,updateAttributes:v}),T=(0,tp.jh)(u,E),P=!!(0,e2.lH)(E).items[u.itemId],O=tA(C.layout,u.itemId,"full"===C.cardSize),D="none"===h.type||h.type===X.h.IMAGE&&!h.image||h.type===X.h.IMAGE&&!(null===(n=h.image)||void 0===n?void 0:n.src)&&!(null===(i=h.image)||void 0===i?void 0:i.tempUrl),F="fit"===T&&h.image&&!D,H=(0,eu.j8)(s,d),{setBackgroundDrawerSourceKeyAction:W}=(0,eu.Bz)(),B=(null===(a=h.image)||void 0===a?void 0:a.loadImageStatus)==="queued",V=(0,el.GV)(em.nD);(0,R.useEffect)(()=>tI.R.on("toggleEditBackgroundDrawer",e=>{let{openDrawer:t,cardId:n}=e;t&&n===I&&(W(x),m(!1))}),[x,I,m,W]);let G=null===(r=h.image)||void 0===r?void 0:r.uploadStatus,U=(0,ep.FX)(),K=!z||"fit"===T||U?void 0:"left"===E||"right"===E?{borderRadius:"var(--box-border-radius)",marginY:"1em",height:"auto"}:"top"===E||"behind"===E?{width:"var(--editor-width)",position:"absolute",transform:"translateX(-50%)",left:"calc(50% - var(--doc-padding-left, 0px) / 2 + var(--doc-padding-right, 0px) / 2)"}:void 0,q=(0,R.useCallback)(e=>{(!(e.target instanceof Element)||e.target.closest("[data-card-layout]"))&&(H(),W(x),m(!1))},[x,H,m,W]);if(!P)return null;let J="mobileLeft"===E?"top":E;return(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)(c.VR,{as:"div",style:{display:z?"flex":void 0},children:[(0,p.jsxs)(et.s,{"data-content-reference":!0,"data-change-focus-point-el":!0,className:"card-layout-cell-bg",w:"100%",h:"100%",onContextMenu:g.isOpen?void 0:y,"data-selection-ring":"inside","data-selection-background":!0,"data-card-layout":null==C?void 0:C.layout,"data-testid":"card-accent-layout-item","data-fit-type":T,position:"relative","data-drag-handle":!0,...O,flexDirection:"column",justifyContent:"center",onClick:H,onDoubleClick:q,...K,bgSize:"fill"===T||L?"cover":"contain",p:"fill"===T||L?0:z?"1.5em":"1.25em",objectFit:"contain",css:{containerType:"size"},align:"center",justify:"center",children:[!F&&(0,p.jsx)(tM,{background:h,rounded:z&&!U,resizeParams:_,cutLayout:J,isDark:S,bodyColor:A}),F&&(0,p.jsx)(tN,{background:h,rounded:z&&!U,cutLayout:J}),F&&(0,p.jsx)(tT,{image:h.image,resizeParams:_,cutLayout:J,bodyColor:A}),L&&(0,p.jsx)(ev.TH,{background:h}),V&&(0,p.jsx)(ed.G,{editor:s,updateNestedAttributes:f,background:null==u?void 0:u.background,backFrom:I?{source:"accentBackgroundDrawer",id:I}:void 0,enableMask:L,isAccentImageDrawer:!0,...g}),(0,p.jsx)(tE,{isLoading:B,editor:s,hasImage:!D,image:h.image,onEditImage:V?H:void 0,openEditBackgroundDrawer:m,borderProps:O,accentLayout:null==C?void 0:C.layout,...O}),(G==eo.A.Uploading||N)&&V&&(0,p.jsx)(ef.Td,{removeBackground:N,scootRight:N&&("top"===E||"left"===E)}),G==eo.A.Error&&(0,p.jsx)(ef.Hy,{})]}),(0,p.jsx)(ea.t,{menuItems:j,isOpen:w.isOpen,position:w.position,onClose:b,size:"small"})]})})},tJ=e=>{let{node:t}=e;return"accent"===t.attrs.itemId?(0,p.jsx)(tq,{...e}):(0,p.jsx)(tz,{...e})},t$=l.bP.create({name:"cardAccentLayoutItem",group:"cardLayoutItemGroup",priority:Q.y.CardAccentLayoutItem,selectable:!1,atom:!0,draggable:!0,imageKeyPath:"background.image",addAttributes:()=>({itemId:{default:"accent"},fitType:{},background:{default:{type:X.h.NONE},...(0,Z.tb)("background")}}),addNodeView:()=>(0,c.gu)(tJ,{update:u.z0}),addStorage:ee.xu,parseHTML(){return[{tag:"img[class=accent-image][bookmark]",getAttrs:(0,ee.Ll)(this.storage)},{tag:"img[class=accent-image][".concat(J.A,"]"),getAttrs:e=>{let t=(0,$.Dr)(e);return{background:{type:X.h.IMAGE,image:t}}}},{tag:"img[class=accent-image][src]",getAttrs:e=>({fitType:e.getAttribute("fitType")||"fill",background:{type:X.h.IMAGE,image:{src:e.getAttribute("src")||"",source:"image.custom"}}})},{tag:"img[class=accent-image]"},{tag:"div[class=card-accent-layout-item]",context:"card/"}]},renderHTMLforAI(e){let{node:t}=e,n=(0,ee.vL)(this.storage,t),i=t.attrs.background;return["img",{bookmark:n,class:"accent-image",alt:i.image&&(0,Y.ve)(i.image)}]},renderHTML(e){let{HTMLAttributes:t}=e;return["div",(0,l.KV)(t,{class:"card-accent-layout-item"})]}});var tY=n(3756),tQ=n(81570),tX=n(73686),tZ=n(96712);let t0=new tQ.hs("cardLayoutResizing");class t1{getActiveHandleAbs(e){return this.activeHandle?(0,tZ.d_)(e,this.activeHandle):null}reset(){return this.activeHandle=null,this.side=null,this.dragging=null,this}setHandle(e,t){return null===t.setHandle?(this.activeHandle=null,this.side=null):(this.activeHandle=(0,tZ.JO)(e,t.setHandle.pos),this.side=t.setHandle.side),this}setDragging(e){return this.dragging=e.setDragging,this}apply(e,t){let n=e.getMeta(t0);return n&&"setHandle"in n?this.setHandle(t,n):n&&"setDragging"in n?this.setDragging(n):n&&"reset"in n?this.reset():this}constructor(){this.activeHandle=null,this.dragging=null}}var t2=n(119),t4=n.n(t2),t5=n(75621),t6=n(26374);let t3=e=>t0.getState(e.state),t8=(e,t)=>{e.dispatch(e.state.tr.setMeta(t0,{setHandle:t}))},t7=(e,t)=>{e.dispatch(e.state.tr.setMeta(t0,{setDragging:t}))},t9=e=>{e.dispatch(e.state.tr.setMeta(t0,{reset:!0}))},ne=(e,t)=>{if(!e.editable||!t.target||t.target.closest(".column-resize-handle"))return;let n=t3(e);if(n.dragging)return;let i=function(e,t){let n=e.posAtCoords({left:t.clientX,top:t.clientY});if(!n||-1===n.inside)return null;let i=e.domAtPos(n.inside);if(!i)return null;let a=i.node.childNodes[i.offset];if(!a)return null;let r=e.state.doc.resolve(n.inside);if(!r.nodeAfter||!(0,tx.sw)(r.nodeAfter))return null;let o=(0,Z.TK)(r,tx.jg)[0];if(!o)return null;let l=o.node.attrs.layout;if(!(0,e2.lH)(l).allowResizing)return null;let s="top"===l,{left:d,right:c,bottom:u,top:p}=a.getBoundingClientRect();if(t.clientX-d<=5&&!s){let n=e.posAtCoords({left:t.clientX-10,top:t.clientY});if(!n)return null;let i=e.state.doc.nodeAt(n.inside);return i&&(0,tx.sw)(i)?"cardLayoutItem"===i.type.name?{pos:n.inside,side:"right"}:{pos:r.pos,side:"left"}:null}if(c-t.clientX<=5&&!s){let n=e.posAtCoords({left:t.clientX+10,top:t.clientY});if(!n)return null;let i=e.state.doc.nodeAt(n.inside);return i&&(0,tx.sw)(i)?"cardLayoutItem"===i.type.name?{pos:n.inside,side:"left"}:{pos:r.pos,side:"right"}:null}if(u-t.clientY<=5&&s){let n=e.posAtCoords({left:t.clientX,top:t.clientY+10});if(!n)return null;let i=e.state.doc.nodeAt(n.inside);return i&&(0,tx.sw)(i)&&"cardLayoutItem"===i.type.name?{pos:n.inside,side:"top"}:null}if(t.clientY-p<=5&&s){let n=e.posAtCoords({left:t.clientX,top:t.clientY+10});if(!n)return null;let i=e.state.doc.nodeAt(n.inside);if(!i||!(0,tx.sw)(i)||"cardLayoutItem"!==i.type.name)return null;let a=e.state.doc.resolve(n.inside).parent;return a&&"card"===a.type.name&&"top"===a.attrs.layout?{pos:n.inside,side:"top"}:null}return null}(e,t),a=n.getActiveHandleAbs(e.state),r=n.side;null===a&&null===i||i&&i.side===r&&i.pos===a||t8(e,i)},nt=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x",i=e.domAtPos(t),a=i.node.childNodes[i.offset];return"x"===n?a.offsetWidth:a.offsetHeight},nn=(e,t)=>{let{node:n,offset:i}=e.domAtPos(t.start()),a=n.childNodes[i];do if(a&&a.classList&&a.classList.contains("node-card"))break;while(a=a.parentNode);return a},ni=(e,t,n)=>{let i=(0,e2.lH)(n),a=t.querySelector('[data-node-view-content-inner="card"]');if("top"===n)return nr(e,a,n);let r=e.attrs,o=(null==a?void 0:a.style.gridTemplateColumns)||r.layoutTemplateColumns||i.grid.gridTemplateColumns;if(!o)return null;let l=o.split(" ");if(!l.length)return null;let s=l[0].includes("fr"),d=[];if(s){let e=l.map(e=>+e.replace("fr","")),t=e.reduce((e,t)=>e+t,0);d=e.map(e=>e/t*100)}else d=l.map(e=>+e.replace("%",""));return d},na={sm:100,md:200,lg:300},nr=(e,t,n)=>{let i=(0,e2.lH)(n),a=e.attrs,r=(null==t?void 0:t.style.gridTemplateRows)||a.layoutTemplateRows||i.grid.gridTemplateRows;if(!r)return null;let o=r.split(" ");if(!o.length)return null;let l=o[0],s=l.includes("var"),d=[];if(s){var c;let e=null===(c=l.split("-").at(-1))||void 0===c?void 0:c.slice(0,-1);e&&e in na||(e="md"),d=[na[e],0]}else d=o.map(e=>"auto"===e?0:Number.parseInt(e));return d},no=l.bP.create({name:"cardLayoutItem",group:"cardLayoutItemGroup",content:"(block | cardBlock)+",selectable:!1,draggable:!1,isolating:!0,containerHandle:!0,priority:Q.y.CardLayoutItem,addAttributes:()=>({itemId:{default:"body"}}),addNodeView:()=>(0,c.gu)(tJ,{update:u.z0}),addCommands:()=>({handleCardAccentDelete:()=>e=>{let{state:t,commands:n}=e;if(!(0,l.BQ)(t.selection))return!1;let{node:i}=t.selection;if(!(0,e2.wL)(i))return!1;let a=(0,l.KP)(tx.jg)(t.selection);return!!a&&n.setCardLayout(a.pos,"blank")},selectInsideCardBody:(e,t)=>n=>{let{state:i,tr:a,commands:r}=n,o=i.doc.nodeAt(e);if(!o||!(0,tx.jg)(o))return!1;let l=(0,e2.dg)(a,e);if(0===Object.entries(l).length)return r.selectInsideNodeAtPos(e,t);let s=l.body;return!!s&&r.selectInsideNodeAtPos(s.pos,t)},setCardLayout:(e,t,n)=>i=>{let{tr:a,editor:r}=i;return(0,tY.c)(r,a,e,t,n)},removeCardLayout:e=>t=>{let{tr:n,editor:i}=t,a=(0,tx.W0)(i,e);return!!a&&(0,tY.c)(i,n,a.pos,"blank")}}),parseHTML:()=>[{tag:"div[class=card-layout-item]"},{tag:"div[class=body]",context:"card/"}],addProseMirrorPlugins(){return[(0,tf.OX)(this.editor),new tQ.k_({key:t0,state:{init:()=>new t1,apply:(e,t,n,i)=>t.apply(e,i)},props:{attributes:e=>null!==t0.getState(e).getActiveHandleAbs(e)?{class:"resize-cursor"}:{class:""},handleDOMEvents:{mousemove:(e,t)=>(ne(e,t),!1),mouseleave:e=>(!function(e){let t=t3(e);null===t.getActiveHandleAbs(e.state)||t.dragging||t8(e,null)}(e),!1),mousedown:(e,t)=>(!function(e,t){if(!e.editable)return;let n=t3(e),i=n.getActiveHandleAbs(e.state);if(null===i||n.dragging)return;let a=e.state.doc.resolve(i),r=a.node(),o=nn(e,a),l=o.querySelector('[data-node-view-content-inner="card"]');if(!l)return;let s=n.side,d=s&&["top","bottom"].includes(s)?"y":"x",c="x"===d?l.offsetWidth:l.offsetHeight,u=nt(e,i),p=ni(r,o,r.attrs.layout);if(!p)return;t7(e,{startX:t.clientX,startY:t.clientY,dragDirection:s&&["top","bottom"].includes(s)?"y":"x",startSize:u,colWidths:p,totalSize:c,colIndex:0});let h=null;function m(){window.removeEventListener("mouseup",m),window.removeEventListener("mousemove",g);let t=t3(e);if(t.dragging){if(null===h){t7(e,null);return}if(t.dragging)try{(function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"x",a=e.state.doc.resolve(t).before(),r=n.join(" "),o=e.state.tr.setNodeAttribute(a,"x"===i?"layoutTemplateColumns":"layoutTemplateRows",r);e.dispatch(o),function(e,t){let n=e.state.doc.resolve(t),i=nn(e,n).querySelector('[data-node-view-content-inner="card"]');i&&(i.style.gridTemplateColumns="",i.style.gridTemplateRows="")}(e,t)})(e,t.getActiveHandleAbs(e.state),h,t.dragging.dragDirection),t7(e,null)}catch(t){t9(e)}h=null}}function g(t){if(!t.which)return m();let n=t3(e),i=n.getActiveHandleAbs(e.state);if(!n.dragging||null===i)return;let{colWidths:a}=n.dragging,r=a[0],l={left:[10,25,37.5,50],right:[50,62.5,75,90],top:Object.values(na)}[null!=s?s:"left"];if("top"===s){let e=r+(t.clientY-n.dragging.startY),i=l.findIndex((t,n,i)=>n===i.length-1||e<=(i[n+1]+t)/2),a=Object.keys(na)[i];h=["var(--top-accent-height-".concat(a,")"),"auto"]}else{let e=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,{totalSize:i}=e,a="x"===e.dragDirection?t.clientX-e.startX:t.clientY-e.startY;return t4()(100*a/i/n,0)*n}(n.dragging,t,.1),i=r+e<l[0]?l[0]:r+e>l[l.length-1]?l[l.length-1]:l.find(t=>6.25>=Math.abs(t-r-e));h=(0,t5.H0)(a,0,i-r,10).map(e=>"".concat(e,"%"))}(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x",i=e.querySelector('[data-node-view-content-inner="card"]');i&&(i.style["y"===n?"gridTemplateRows":"gridTemplateColumns"]=t.join(" "))})(o,h,d),(0,t6.i$)(o)}window.addEventListener("mouseup",m),window.addEventListener("mousemove",g),t.preventDefault()}(e,t),!1)},decorations(e){let t=t0.getState(e),n=t.getActiveHandleAbs(e);if(null!==n){let i=[];try{let a=document.createElement("div");a.className="column-resize-handle ".concat(t.side),i.push(tX.NZ.widget(n+1,a));let r=e.doc.nodeAt(n);return i.push(tX.NZ.node(n,n+r.nodeSize,{class:"has-column-resize-handle"})),tX.zF.create(e.doc,i)}catch(e){return console.error("(caught) cardLayoutResizing error: ".concat(e.message)),tX.zF.empty}}},nodeViews:{}}})]},renderHTML(e){let{HTMLAttributes:t}=e;return["div",(0,l.KV)(t,{class:"card-layout-item"}),0]},renderHTMLforAI(e){let{node:t}=e;return["div",{class:"body"},0]}});var nl=n(46108),ns=n.n(nl),nd=n(20392),nc=n(65056),nu=n(46291),np=n(71837),nh=n(73350),nm=n(5628);class ng extends c.Lz{updateProps(e){this.isDestroyed||this.renderer.updateProps(e)}mountEditor(){let e=this.editor,{nodeName:t,preventNodeOrExtensionTypes:n}=this.editorOptions,i=[...sU({isInnerEditor:!0}),nh.V,nu.mk,eS.bU,tW.Q8,nf.configure({outerEditor:e,getPos:this.getPos}),np.c,nc.mM].filter(e=>!n||!n.includes(e.name)).map(e=>e.name===t?e.extend({topNode:!0}):e);return this.innerEditor=new nd.K({extensions:i,content:{type:t,content:this.node.content.toJSON(),attrs:ns()(this.node.attrs)},onBeforeCreate(i){let{editor:a}=i;a.schema.nodes={...e.schema.nodes},null==n||n.forEach(e=>{a.schema.nodes[e]&&delete a.schema.nodes[e]}),a.schema.marks={...e.schema.marks},a.schema.topNodeType=e.schema.nodes[t],a.extensionManager.schema=a.schema}}),this.innerEditor.gammaOrgId=e.gammaOrgId,this.innerEditor.gammaDocId=e.gammaDocId,this.innerEditor.parentEditor=e,this.innerEditor.view.updateState=function(e){if(!this.docView){this.state=e;return}this.updateStateInner(e,this.state.plugins!=e.plugins)},this.innerEditor.view.update=function(e){this.docView&&tX.Lz.prototype.update.call(this,e)},this.updateProps({innerEditor:this.innerEditor}),this.innerEditor}destroy(){var e;this.isDestroyed=!0,null===(e=this.innerEditor)||void 0===e||e.destroy(),super.destroy()}update(e,t){var n;if(!e.sameMarkup(this.node))return!1;this.node=e;let i=null===(n=this.innerEditor)||void 0===n?void 0:n.view;if(!i)return!0;let a=i.state,r=e.content.findDiffStart(a.doc.content);if(null!=r){let{a:t,b:n}=e.content.findDiffEnd(a.doc.content),o=r-Math.min(t,n);o>0&&(t+=o,n+=o),i.dispatch(a.tr.replace(r,n,e.slice(r,t)).setMeta(nm.k,!0).setMeta("preventAutolink",!0))}return super.update(e,t)}stopEvent(e){return!!this.innerEditor&&this.innerEditor.view.dom.contains(e.target)}ignoreMutation(){return!0}get contentDOM(){return null}constructor(e,t,n){super(e,t,n),this.isDestroyed=!1,this.editorOptions=n,this.updateProps({mountEditor:()=>this.mountEditor(),destroyEditor:()=>{var e,t,n;null===(e=this.innerEditor)||void 0===e||e.destroy(),null===(t=(n=this.editor.commands).forceHideBubbleMenu)||void 0===t||t.call(n,!1),setTimeout(()=>{this.updateProps({innerEditor:void 0})})}})}}function nx(e,t){return n=>new ng(e,n,t)}let nf=l.YY.create({name:"innerEditorExtension",addOptions:()=>({outerEditor:null,getPos:null}),addProseMirrorPlugins(){let{outerEditor:e,getPos:t}=this.options;return[new tQ.k_({appendTransaction:n=>{let i=n[0];if(!i)return null;if(!i.getMeta(nm.k)){let i=e.state.tr,a=d.Lm.offset(t()+1);for(let e=0;e<n.length;e++){let t=n[e].steps;for(let e=0;e<t.length;e++){let n=t[e],r=n.map(a);!r&&n instanceof d.Wg&&0==n.from&&(r=nv(n,a)),r&&i.step(r)}}if(i.setMeta(nm.R,!0).setMeta("preventAutolink",!0),i.docChanged){let t=!e.state.selection.eq(i.selection),n=e.state.selection instanceof tQ.U3;if(t&&n)try{i.setSelection(tQ.U3.create(i.doc,i.mapping.map(e.state.selection.from),i.mapping.map(e.state.selection.to)))}catch(e){console.error("[InnerEditorExtension] restore selection error",e)}e.view.dispatch(i)}}return null}})]},addKeyboardShortcuts(){let{outerEditor:e}=this.options;return{"Mod-z":()=>e.commands.undo(),"Mod-y":()=>e.commands.redo()}}}),nv=(e,t)=>{let n=t.mapResult(e.from,1),i=t.mapResult(e.to,-1),a=t.map(e.gapFrom,1),r=t.map(e.gapTo,1);return n.deletedAcross&&i.deletedAcross||a<n.pos||r>i.pos?null:new d.Wg(n.pos,i.pos,a,r,e.slice,e.insert,e.structure)};var nb=n(72860);let ny=e=>{let{decorations:t,editor:n,getPos:i,destroyEditor:a,mountEditor:r}=e,o=(0,el.jL)();(0,nb.y)(n);let{mountEditor:l,activeNoteCardId:s}=(0,el.GV)(ti.rd),{parentCardId:d,isNested:c}=(0,e6.tg)(t),u=!c&&(0,tm.I5)(n,i(),d),p=s===d&&"function"==typeof r&&l===r,h=u&&!p&&!!r&&!c&&!n.isThumbnail;(0,R.useEffect)(()=>{h&&requestAnimationFrame(()=>{o((0,ti.Lz)({activeNoteCardId:d,mountEditor:r,destroyEditor:a}))})},[h,a,o,r,d])};var nw=n(387),nj=n(49572),nk=n(32262),nC=n(91100);let nS=new tQ.hs("cardNotesPlugin"),nA=(e,t)=>new tQ.k_({key:nS,props:{attributes:()=>{let n=t.getState();return(0,ti.Iw)(n)&&!(0,tm.NO)(e)&&(0,em.nD)(n)&&!e.isStatic?{class:"card-notes-active"}:{class:""}},decorations:n=>{let{doc:i,selection:a}=n,r=t.getState();if(!(0,ti.Iw)(r)||(0,tm.NO)(e)||!(0,em.nD)(r)||e.isStatic)return;let o=(0,nk.hT)(e.state.doc,a.from);if(o)return tX.zF.create(i,[tX.NZ.node(o.pos,o.pos+o.node.nodeSize,{class:"card-notes-active-parent-card"})])}},appendTransaction:(t,n,i)=>{if((0,tm.NO)(e)||e.isThumbnail||e.isStatic)return;let a=i.tr;return((0,nj.z)(t,n,i,a,"cardNotes"),nI(t,n,i,a),a.docChanged)?a:null}}),nz=e=>e.map(e=>{let t=0===e.slice.content.size;return e.from!==e.to&&t?{type:"delete",step:e}:e.from!==e.to||t?e.from===e.to||t?null:{type:"replace",step:e}:{type:"insert",step:e}}).filter(e=>!!e),nI=(e,t,n,i)=>{e.forEach(e=>{let a=e.steps.filter(e=>e instanceof d.Ln||e instanceof d.Wg);1!==a.length||(0,nw.he)(e)||e.getMeta(nm.R)||e.getMeta("appendedTransaction")||e.getMeta("cardNotesHandled")||e.getMeta("rearrangeCards")||nz(a).filter(e=>"delete"===e.type||"replace"===e.type).forEach(e=>{let{step:a}=e,{from:r,to:o}=a;t.doc.nodesBetween(r,o,(e,a)=>{if("cardNotes"===e.type.name){var o;let s=t.doc.resolve(a),d=(0,l.eL)(s,tx.jg),c=(0,l.xe)(n.doc,e=>(0,tx.jg)(e)&&e.attrs.id===(null==d?void 0:d.node.attrs.id));if(!c[0])return;let u=(0,l.xe)(c[0].node,e=>"cardNotes"===e.type.name);if(u.length>0&&(null===(o=u[0])||void 0===o?void 0:o.node.content.eq(e.content))&&c[0].pos===(null==d?void 0:d.pos))return;let p=(0,nk.hT)(n.doc,r);if(!p){console.warn("[preventNotesDelete] parentCard not found");return}let h=n.doc.resolve(p.pos);if((0,tm.PD)(h)){let t=(0,nC.XC)(n.doc,p.pos,!1);if(null===t){console.warn("[preventNotesDelete] insertPos not found");return}i.insert(t,e.content)}else{let t=p.pos+p.node.nodeSize-1;i.insert(t,e)}}})})})},nR=l.bP.create({name:"cardNotes",content:"cardNotesBlock+",selectable:!1,atom:!0,parseHTML:()=>[{tag:"div[class=card-notes]"},{tag:"notes"}],renderHTML(e){let{HTMLAttributes:t}=e;return["div",(0,l.KV)(t,{class:"card-notes"}),0]},renderHTMLforAI:()=>["notes",0],renderText:()=>"",addProseMirrorPlugins(){let e=(0,el.KA)();return[nA(this.editor,e)]},addNodeView(){return this.editor.shouldUsePublishedVersion?(0,c.gu)(()=>null):nx(ny,{nodeName:this.name,preventNodeOrExtensionTypes:["dropCursor","smartLayout","doc","document","card","embed","slashMenu","mediaUpload","GammaMention"]})}});var nE=n(90290),nL=n(69648),n_=n(84607),nM=n(39761),nN=n(2600),nT=n(22844);let nP=e=>(0,p.jsx)(h.az,{bg:"var(--body-color)",opacity:"0.4",borderRadius:"sm",...e});var nO=n(87487),nD=n(22544),nF=n(85146),nH=n(15072),nW=n(82257),nB=n(50201),nV=n(38888),nG=n(30503),nU=n(92405);let nK=(0,R.memo)(e=>{let{cardId:t,docId:n,editor:i,cards:a,level:r,showNested:o,isPresentMode:l}=e,s=(0,nH.d)({cardId:t,editor:i}),d=(0,el.GV)(em.Jo),c=(0,R.useCallback)(e=>{(0,nB.T)(i,e,t)},[i,t]),u=(0,nW.oR)(),m=(0,R.useMemo)(()=>{let e=(0,nU.Io)({cardId:t,docId:n,isPresentMode:l});return u?(0,nG.M7)({url:e,doc:d}):e},[t,n,d,l,u]),{listStyle:g,paddingStart:x,marginStart:f}=(0,nV.WI)(r);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(nF.B8,{mb:"0.5em",children:(0,p.jsx)(nF.ck,{listStyleType:g,ps:x,ms:f,children:(0,p.jsx)(h.az,{display:"inline",children:(0,p.jsx)(e7.N,{href:m,className:"link",role:"link",isExternal:!u,noOfLines:1,wordBreak:"break-word",onClick:c,display:"-webkit-inline-box",verticalAlign:"top",children:(null==s?void 0:s.title)||(0,p.jsx)(eL.x6,{id:"wja8aL"})})})})}),o&&a.map(e=>(0,p.jsx)(nK,{cardId:e.id,cards:e.children,editor:i,level:r+1,showNested:o,docId:n,isPresentMode:l},e.id))]})});nK.displayName="CardTOCItem";let nq=e=>{let{node:t,editor:n,getPos:i}=e,{nested:a}=t.attrs,r=i(),o=(0,nk.hT)(n.state.doc,r),l=(0,el.GV)(nT.NG),s=(0,el.GV)((0,em.xO)({cardId:null==o?void 0:o.node.attrs.id,showAll:nD.LD})).filter(e=>{let{id:t}=e;return!(null==l?void 0:l[t])}),d=(0,el.GV)(em.Jo),c=(0,el.GV)(em.wC),u=(0,el.GV)(em.jO),g=c===eg.w.SLIDE_VIEW;return(0,p.jsx)(m.u,{...e,as:"div",children:(0,p.jsxs)(h.az,{cursor:"default",pointerEvents:u?"none":void 0,borderRadius:"var(--box-border-radius)","data-selection-ring":!0,className:"card-toc",children:[0===s.length&&(0,p.jsxs)(nE.F,{colorScheme:"gray",color:"gray.800",fontFamily:"body",fontSize:"1em",py:"0.75em",px:"1em",children:[(0,p.jsx)(nL._,{w:"1em",h:"1em",alignSelf:"center",me:"0.75em"}),(0,p.jsxs)(h.az,{children:[(0,p.jsx)(n_.X,{fontSize:"1em",lineHeight:"1.5em",children:(0,p.jsx)(eL.x6,{id:"519v/x"})}),(0,p.jsx)(nM.T,{fontSize:"0.75em",lineHeight:"1.5em",children:(0,p.jsx)(eL.x6,{id:"HmhQ3B"})})]})]}),s.map(e=>(0,p.jsx)(nK,{cardId:e.id,cards:e.children,editor:n,level:0,showNested:a,docId:(null==d?void 0:d.id)||"",isPresentMode:g},e.id))]})})},nJ=e=>(0,p.jsx)(nO.V,{children:(0,p.jsxs)(nN.T,{spacing:"0.5em",align:"start",children:[(0,p.jsx)(nP,{h:"1em",w:"14em",bg:"var(--link-color)"}),(0,p.jsx)(nP,{h:"1em",w:"14em",bg:"var(--link-color)"}),(0,p.jsx)(nP,{h:"1em",w:"14em",bg:"var(--link-color)"}),(0,p.jsx)(nP,{h:"1em",w:"14em",bg:"var(--link-color)"})]})}),n$=l.bP.create({name:"tableOfContents",group:"block",atom:!0,selectable:!0,dynamic:!0,addAttributes:()=>({nested:{default:!1}}),parseHTML:()=>[{tag:"div[class=toc]"}],renderHTML(e){let{HTMLAttributes:t}=e;return["div",(0,l.KV)(t,{class:"toc"})]},addNodeView(){return this.editor.isThumbnail?(0,c.gu)(nJ,{update:u.z0}):(0,c.gu)(nq,{update:u.z0})}});var nY=n(99742),nQ=n(50885),nX=n(919),nZ=n(83377),n0=n(74207),n1=n(10541),n2=n(25841);let n4={serialize(e){let{omitIds:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=["colgroup",{}],i=["tbody",{}],a=["table",{},n,i];return e.rows.forEach((a,r)=>{let o=["tr",{}];t||(o[1].id=a.id),i.push(o),e.columns.forEach(i=>{if(0===r){let{type:e,label:a,format:r,id:o,fixedType:l}=i,s=["col",{type:e,label:a,format:r,"fixed-type":l}];t||(s[1].id=o),n.push(s)}let l=e.getCell({column:i.id,row:a.id});o.push(["td",{type:l.type},["value",{},l.textValue]])})}),a},parse(e){let t=[],n=[],i=[];for(let a of e.children)switch(a.tagName){case"COLGROUP":t=[...a.children].filter(e=>"COL"===e.nodeName).map(e=>{var t;return new n0.n({id:e.getAttribute("id")||void 0,type:e.getAttribute("type")||"label",label:e.getAttribute("label")||"",format:e.getAttribute("format")||"raw",fixedType:(null===(t=e.getAttribute("fixed-type"))||void 0===t?void 0:t.toLowerCase())==="true"})});break;case"TBODY":if(!t.length)throw Error("No columns defined before tbody");n=[...a.children].filter(e=>"TR"===e.nodeName).map(e=>{let n=new n2.N({id:e.getAttribute("id")||void 0});return!function(e,n){[...e.children].filter(e=>"TD"===e.nodeName).forEach((e,a)=>{let r=e.getElementsByTagName("value").item(0),o=t[a],l={row:n,column:o},s="data"===o.type?new nX.T(l):new nZ.l(l);s.textValue=(null==r?void 0:r.textContent)?r.textContent:"",i.push(s)})}(e,n),n})}return new n1.h({columns:t,rows:n,cells:i})}};var n5=n(1098),n6=n(39933),n3=n(80853),n8=n(12917),n7=n(77447),n9=n(4300),ie=n(21404),it=n(36227),ii=n(16130);function ia(e){for(let t of e.columns)if(!t.isEmpty(e)&&"data"===t.type)return t;return null}function ir(e){for(let t of e.columns)if(!t.isEmpty(e)&&"label"===t.type)return t;return null}var io=n(96362),il=n(84511),is=n(98736),id=n(28423);let ic=e=>{let{direction:t="vertical",definition:n,textValue:i,x:a,y:r,width:o,height:l,bounds:s,offset:d={x:0,y:0},onPositionChange:c,invertColorOfInsideText:u}=e,h=(()=>{if(!n)return!1;let e=n.getDimensions(i),c=e.width+d.x,u=e.height+d.y;return"vertical"===t?n.inside?(n.rotate?c:u)+n.margin<l:r-(n.rotate?c:u)-n.margin<=0:n.inside?c+n.margin<o:a+c+n.margin+o>=s.width})(),m=(0,R.useMemo)(()=>({x:"vertical"===t?a+o/2+d.x:a+o+(n.margin+d.x)*(h?-1:1),y:"vertical"===t?r+(d.y+n.margin)*(h?1:-1):r+l/2+d.y}),[a,o,d.x,r,l,d.y,h,t,n.margin]);return((0,R.useEffect)(()=>{null==c||c(m)},[m]),n.hide)?null:(0,p.jsx)(id.A,{pointerEvents:"none",...m,textAnchor:n.rotate?h?"end":"start":"vertical"===t?"middle":h?"end":"start",verticalAnchor:"vertical"===t?n.rotate?"middle":h?"start":"end":"middle",style:{...n.textStyles,userSelect:"none",filter:h&&u?"invert(1)":void 0},angle:n.rotate?270:0,children:i})};var iu=n(32598),ip=n(33780),ih=n(28466),im=n(34992),ig=n(69651),ix=n(14356),iv=n(20685),ib=n.n(iv),iy=n(77936);let iw={top:8,bottom:2,right:1,left:4},ij=e=>{let{color:t,labelCells:n,dataCells:i,height:a,children:r,textColor:o,tickColor:l,tiny:s=!1,width:d,fontFamily:c="var(--body-font)",fontSize:u="var(--chakra-fontSizes-sm)",fontWeight:h="var(--body-font-weight)",margin:m=il.PH,direction:g="vertical",hideLabels:x=!1,padding:f=0,labelPadding:v=.3,pullToZero:b=!0,onMouseMove:y,onMouseLeave:w,onMouseMoveInside:j,onMouseLeaveInside:k}=e,C=s?2:14,S=s?{top:1,right:0,bottom:2,left:0}:iw,A=s?{top:0,right:0,bottom:0,left:0}:m,z=!!s||x;s&&(u="2px",f=0);let I=s?.5:2,E=s?1:6,L=i.map(e=>e.data),_=i.reduce((e,t)=>{if("mixed"===e)return e;let n=t.getFormatter().type;return""===e||e===n?n:"mixed"},""),M=Math.max(...L),N=Math.min(...L),T=n.length?n:i.map(e=>({position:{row:e.position.row},textValue:""})),P=(0,R.useMemo)(()=>{let e="percentage"===_&&M<=100?100:null;return function(e,t,n,i){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(null!==a&&t>a&&(console.error("`capAt` MUST be larger than `max`",{capAt:a,max:t}),a=null),!i){let n=(0,im.A)({range:[0,1],domain:[e,Math.max(t,0)]}).ticks();i=n.length<2?1:Math.abs(n[1]-n[0])}let r=(0,iy.yw)(Math.max(t,0),i,1),o=(0,iy.yw)(e,i,-1),l=(0,iy.yw)((r-o)/(n-1),i,1);l&&l!==i&&(o=(0,iy.yw)(o,l,-1));let s=[o];for(;s[s.length-1]<r&&(s.push(o+s.length*l),!(s.length>2*n)););return null!==a&&s[s.length-1]>=a?Array.from({length:n+1}).map((e,t)=>(o+(r-o)/n)*t):s}(b?Math.min(N,0):N,M,4,void 0,e)},[N,M,b,_]),O=i[0].getFormatter(),D="vertical"===g?P.map(e=>O.format(e)):T.map(e=>ib()(e.textValue,{length:25,separator:" "})),F=(0,iy.Vr)(D,{fontFamily:c,fontSize:u,fontWeight:h}),H=z?0:F.maxWidth,W={top:A.top+S.top,right:A.right+S.right,bottom:A.bottom+I+(z?0:E+S.bottom),left:A.left+H+I+(z?0:E+S.left)},B=("vertical"===g?T:i).map(e=>{let{textValue:t}=e;return ib()(t,{length:25,separator:" "})}),{bottomTickValues:V,bottomLabels:G,rotateLabels:U,labelsHeight:K,splitIx:q}=ik({em:C,textStyles:{fontFamily:c,fontSize:u,fontWeight:h},hideLabels:z,padding:f,height:a,width:d,margin:W,labelCells:T,labelStrings:B}),J=a-W.top-W.bottom-K,$="horizontal"===g&&J/D.length<C?(W.left-=H,[]):T.map(e=>{let{position:{row:t}}=e;return t}),Y=d-W.left-W.right,Q=T.map(e=>"".concat(e.position.row,":").concat(e.textValue)).join(","),{labelScale:X,labelIndex:Z}=(0,R.useMemo)(()=>({labelScale:(0,n9.A)({range:"vertical"===g?[0,Y]:[0,J],domain:T.map(e=>e.position.row),paddingInner:v,paddingOuter:.3}),labelIndex:Object.fromEntries(T.map(e=>[e.position.row,e]))}),[Y,g,J,Q,v]),ee=(0,R.useMemo)(()=>{let e=P[0],t=P[P.length-1];return(0,im.A)({range:"horizontal"===g?[N<0?f:0,Y]:[J-(N<0?f:0),I+f],round:!0,domain:[e,t]})},[P,J,N,Y,g,f,I]),et=(()=>{if(!j&&!k)return null;let e=e=>t=>{e(t,function(e,t){var n;let i=null!==(n=(0,ih.A)(e))&&void 0!==n?n:{x:e.clientX,y:e.clientY};return{svgCoords:i,axisCoords:{x:i.x-t.left,y:i.y-t.top}}}(t,W))};return{move:j&&e(j),leave:k&&e(k)}})();return(0,p.jsxs)("svg",{width:"100%",viewBox:"0 0 ".concat(d," ").concat(a),height:"100%",preserveAspectRatio:"none",overflow:"visible",onMouseMove:y,onMouseLeave:w,children:[P.map((e,n)=>"vertical"===g?(0,p.jsx)(ig.A,{from:{x:W.left,y:ee(e)+W.top},to:{x:d,y:ee(e)+W.top},stroke:t,opacity:0===e?.5:.2},n):(0,p.jsx)(ig.A,{from:{x:W.left+ee(e),y:W.top},to:{x:W.left+ee(e),y:J},stroke:t,opacity:0===e?.5:.2},n)),et&&(0,p.jsx)(ie.A,{fill:"transparent",opacity:.2,x:W.left,y:W.top,height:J,width:Y,onMouseMove:et.move,onMouseLeave:et.leave}),r({labelScale:X,dataScale:ee,yMax:J,xMax:Y,margin:{...W}}),(0,p.jsx)(n7.A,{children:"vertical"===g?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(iu.A,{top:W.top,left:W.left,scale:ee,stroke:t,rangePadding:N<0?-1*f:0,strokeWidth:I,tickValues:z?[]:P,tickFormat:O.format.bind(O),tickLength:E,tickStroke:l||t,tickLabelProps:()=>({fill:o||t,textAnchor:"end",fontFamily:c,fontSize:u,fontWeight:h,dy:"0.33em",dx:s?0:-4,userSelect:"none"})}),(0,p.jsx)(ip.A,{top:J+W.top,left:W.left,scale:X,stroke:t,tickValues:V,tickFormat:(e,t)=>G[t],tickStroke:l||t,tickLabelProps:(e,n)=>({fill:o||t,fontFamily:c,fontSize:u,fontWeight:h,userSelect:"none",dy:s?0:4,i:n}),strokeWidth:I,tickLength:E,tickComponent:e=>{let{x:t,y:n,i,dy:a,formattedValue:r,...o}=e;return(0,p.jsx)("g",{alignmentBaseline:"middle",...o,children:U||!q[i]?(0,p.jsx)("text",{x:t,y:n,dy:a,transform:U?"rotate(-45, ".concat(t,", 0)"):"",textAnchor:U?"end":"middle",children:r}):(r||"").split(" ").map((e,r)=>(0,p.jsx)("text",{x:t,y:n+C*r,dy:a,textAnchor:"middle",children:e},"".concat(i,":").concat(r)))})}})]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(iu.A,{top:W.top,left:W.left,scale:X,stroke:t,strokeWidth:I,tickLength:E,tickValues:z?[]:$,tickFormat:e=>ib()(Z[e].textValue,{length:25,separator:" "}),tickStroke:l||t,tickLabelProps:()=>({fill:o||t,textAnchor:"end",fontFamily:c,fontSize:u,fontWeight:h,dy:"0.33em",dx:s?0:-4,userSelect:"none"})}),(0,p.jsx)(ip.A,{top:J+W.top,left:W.left,scale:ee,stroke:t,rangePadding:N<0?f:0,tickValues:z?[]:P,tickFormat:O.format.bind(O),tickLength:E,tickStroke:l||t,tickLabelProps:(e,n)=>({fill:o||t,textAnchor:0===n?"end":"middle",fontFamily:c,fontSize:u,fontWeight:h,userSelect:"none",dy:s?0:4}),strokeWidth:I})]})})]})},ik=e=>{let{em:t,textStyles:n,hideLabels:i,padding:a,height:r,width:o,margin:l,labelStrings:s,labelCells:d}=e,c=s.join(","),u=(o-l.left-l.right)/s.length,{fontFamily:p,fontSize:h,fontWeight:m}=n;return(0,R.useMemo)(()=>{let e=[...s],o={bottomTickValues:[],rotateLabels:!1,labelsHeight:0,splitIx:[],sliceWidth:u,bottomLabels:[]};if(i||u<=t+3)return o;let{widths:c,maxWidth:p}=(0,iy.Vr)(s,n),h=!1,m=t,g=d.map(e=>{let{position:{row:t}}=e;return t}),x=s.map((e,i)=>{if(h||c[i]<u-a)return!1;let{widths:r,maxWidth:o}=(0,iy.Vr)(e.split(" "),n);if(o>u-a)return h=!0,!0;let l=r.length*t;return l>m&&(m=l),!0});if(!h)return{bottomTickValues:g,rotateLabels:h,labelsHeight:m,splitIx:x,sliceWidth:u,bottomLabels:e};let f=e=>Math.cos(Math.PI/4)*e-(t+7);m=Math.sin(Math.PI/4)*p;let v=f(p);if(v>.3*r)return o;let b=e=>l.left+u*e+u/2;for(let t=0;t<s.length;t++){let i=b(t);if(i>v)break;if(f(c[t])>i){let a=(0,iy.jp)(s[t],e=>{let t=(0,ix.A)(e,n);if(null===t)return -1;let a=f(t);return a<i-10?1:a>i?-1:0});if(!a)return console.log("could not truncate"),o;e[t]=a}}return{bottomTickValues:g,bottomLabels:e,rotateLabels:h,labelsHeight:m,splitIx:x,sliceWidth:u}},[t,r,c,p,h,m,i,a,u])};var iC=n(60674);let iS=e=>{let{data:t,render:n,getColor:i,getOpacity:a,onMouseOver:r,onMouseLeave:o,onClick:l,onDoubleClick:s,textColor:d,position:c="bottom",width:u}=e,m=(0,R.useRef)(null),[g,x]=(0,R.useState)(0),[f,v]=(0,R.useState)(!1),b=["top","bottom"].includes(c)?{width:"100%",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(".concat(g,"em, 1fr))"),justifyItems:f?"flex-start":"center",alignSelf:"stretch","& > div:first-child":{justifySelf:f?void 0:"flex-end"},"& > div:last-child":{justifySelf:f?void 0:"flex-start"}}:{height:"100%",flexDir:"column"},y=t.map(e=>n(e)).join("|");return(0,R.useEffect)(()=>{let e=0;if(!m.current)return;let t=(0,iy.us)(m.current);for(let t of m.current.querySelectorAll(":scope > div")){var n;t.style.width="min-content";let i=(null===(n=t.getClientRects()[0])||void 0===n?void 0:n.width)||0;t.style.width="",i>e&&(e=i)}x(parseFloat((e/t).toFixed(2)))},[y]),(0,R.useEffect)(()=>{v(!!m.current&&function(e){var t;let n=e.children;if(!n.length)return!1;let i=null===(t=n.item(0))||void 0===t?void 0:t.offsetTop;for(let e of n)if(e.offsetTop!==i)return!0;return!1}(m.current))},[u,g]),(0,p.jsx)(et.s,{ref:m,sx:b,flexGrow:0,flexShrink:1,flexWrap:"wrap",alignContent:["left","top"].includes(c)?"flex-end":"flex-start",justifyContent:"center",gap:5,children:t.map((e,t)=>(0,p.jsxs)(S.z,{flexGrow:0,flexShrink:1,opacity:a?a(e,t):1,cursor:"pointer",onMouseOver:null==r?void 0:r(e,t),onMouseLeave:null==o?void 0:o(e,t),onClick:null==l?void 0:l(e,t),onDoubleClick:null==s?void 0:s(e,t),transition:"opacity ".concat(il.UG,"s"),minW:"min-content",gap:2,alignItems:"flex-start",children:[(0,p.jsx)(h.az,{flex:"0 0 auto",as:iC.P.div,width:"1em",height:"1em",flexShrink:0,bg:i(e,t),borderRadius:"sm",animate:{backgroundColor:i(e,t)},children:" "}),(0,p.jsx)(A.E,{flex:"0 1 auto",fontSize:"1em",lineHeight:"1em",color:d,textAlign:"left",children:ib()(n(e),{length:30})})]},t))})};function iA(){let e=(0,R.useRef)(null);return(0,R.useEffect)(()=>()=>{e.current&&(clearTimeout(e.current),e.current=null)},[]),{clickHandler:t=>n=>{e.current||(e.current=setTimeout(()=>{e.current=null,t(n)},200))},doubleClickHandler:t=>n=>{e.current&&(clearTimeout(e.current),e.current=null),t(n)}}}let iz=e=>{let{showInlineLabels:t,dataCells:n,scale:i,textStyles:a,direction:r,labelMargin:o=5}=e,l=n.flatMap(e=>e.map(e=>e.textValue)),s=l.join("|"),d=i.bandwidth();return(0,R.useMemo)(()=>{if(!t)return;let e=n[0].length>1?(0,n9.A)({range:[0,d],domain:n[0].map(e=>e.textValue),paddingInner:.2}):i,s=(0,iy.Vr)(l,a),c="vertical"===r&&s.maxWidth+o>=e.bandwidth(),u="vertical"===r?c&&s.maxHeight+o>=e.bandwidth():s.maxHeight+o>=e.bandwidth(),p=Object.fromEntries(l.map((e,t)=>[e,t]));return{margin:o,rotate:c,hide:u,textStyles:a,getDimensions:e=>{let t=p[e];return{width:void 0===t?0:s.widths[t],height:void 0===t?0:s.heights[t]}},inside:!1}},[t,a,s,r,d,o])};var iI=n(11403),iR=n(31171),iE=n(50089),iL=n(59135);let i_=e=>{let{TooltipInner:t}=e,{showTooltip:n,tooltipOpen:i,tooltipLeft:a,tooltipTop:r,tooltipData:o,hideTooltip:l}=(0,iE.A)(),s={minW:"5rem",textAlign:"left",pointerEvents:"none",...(0,iI.Vl)("Tooltip")},d=(0,R.useRef)();return(0,R.useEffect)(()=>()=>{d.current&&clearTimeout(d.current)},[]),{mouseMoveHandler:(e,t)=>i=>{d.current&&clearTimeout(d.current);let a=t?t(e,i):(0,iy.OP)(i);n({tooltipData:{...e,position:e.position},tooltipTop:null==a?void 0:a.y,tooltipLeft:null==a?void 0:a.x})},mouseLeaveHandler:e=>e=>{d.current=window.setTimeout(()=>{l()},300)},renderTooltip:function(){return i&&o?(0,p.jsx)(iM,{style:{},top:r,left:a,sx:{...s,top:void 0,left:void 0,userSelect:"none",pointerEvents:"none"},position:"absolute",contentEditable:!1,suppressContentEditableWarning:!0,children:(0,p.jsx)(t,{...o})},Math.random()):null}}},iM=(0,iR.B)(iL.A,{shouldForwardProp:e=>["top","left","style","children"].includes(e)});var iN=n(67718);let iT=e=>{let{dispatch:t}=(0,R.useContext)(iN.uR),n=e.filter(e=>e instanceof n0.n).map(e=>e.id),i=n.join(",");(0,R.useEffect)(()=>(t({type:"reportActiveColumnIds",payload:n}),()=>{t({type:"reportActiveColumnIds",payload:void 0})}),[i,t])},iP=function(){let{textColor:e="var(--body-color)",fontFamily:t="var(--body-font)",fontSize:n="var(--chakra-fontSizes-sm)",fontWeight:i="var(--body-font-weight)"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,R.useMemo)(()=>({fontFamily:t,fontSize:n,fontWeight:i,fill:e}),[e,t,n,i])},iO=e=>{let{showZero:t,data:n,dataColumns:i,animationDuration:a,barColors:r,textColor:o,direction:l,selectCell:s,tooltipEnter:d,tooltipLeave:c,dataScale:u,labelScale:h,yMax:m,xMax:g,margin:x,minValueGreaterThanZero:f,onDataClick:v,onDataDoubleClick:b,isThumbnail:y,focusedPosition:w,setFocusedPosition:j,showInlineLabels:k}=e,C=(0,is.wQ)(i,"id"),S=iP({textColor:o}),A=n.rows.map(e=>e.getCells(n).filter(e=>!!C.get(e.position.column))),z=iz({dataCells:A,textStyles:S,scale:h,direction:l,showInlineLabels:k});return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(n7.A,{top:x.top,left:x.left,children:n.rows.map((e,n)=>{let i="group-".concat(e.id);return(0,p.jsx)(iF,{animationDuration:a,barColors:r,data:A[n],showZero:t,yMax:m,xMax:g,dataScale:u,inlineLabels:z,labelScale:h,selectCell:s,direction:l,globalMinValueGreaterThanZero:f,tooltipEnter:d,tooltipLeave:c,onDataClick:v,onDataDoubleClick:b,borderRadius:y?1:5,focusedPosition:w,setFocusedPosition:j},i)})})})},iD=e=>{var t,n;let{TooltipInner:i,showZero:a=!0,data:r,textColor:o,accentColor:l,animationDuration:s=il.UG,isThumbnail:d=!1,width:c,height:u,chartType:m,colorScheme:g=il.gb,hideLabels:x,showInlineLabels:f,onDataClick:v,onDataDoubleClick:b,backgroundColor:y,chartOptions:w,onContextMenu:j}=e,k="horizontal-bar"===m?"horizontal":"vertical",{renderTooltip:C,mouseMoveHandler:S,mouseLeaveHandler:A}=i_({TooltipInner:i}),[z,I]=(0,R.useState)(null),E=ir(r),L=(null==E?void 0:E.getCells(r))||[],_=r.columns.filter(e=>{let{type:t}=e;return"data"===t}),M=_.map(e=>e.getCells(r)).flat(),N=_.length>1&&!x,T=Math.min(...M.map(e=>e.data).filter(e=>e>0)),P=_.map(e=>{let{id:t}=e;return t}),O=(0,io.M)(l,P.length>1?P:[...new Set(M.map(e=>e.position.row))],g,{contrastColor:y}),D=(0,iy.jt)(d),F=null!==(t=w["vertical"===k?"bar":"horizontal-bar"])&&void 0!==t?t:{};return iT([E,..._]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(h.az,{"data-test":"bar-chart-container",height:N?"calc(100% - ".concat(3,"em)"):"100%",cursor:"default",userSelect:"none",contentEditable:!1,onContextMenu:j,children:[(0,p.jsx)(ij,{width:c,height:N?u-3*D:u,labelCells:L,dataCells:M,color:o,textColor:o,tiny:d,direction:k,hideLabels:x,pullToZero:null===(n=F.axisPullToZero)||void 0===n||n,children:e=>(0,p.jsx)(iO,{showZero:a,barColors:O,data:r,textColor:o,dataColumns:_,animationDuration:s,direction:k,tooltipEnter:S,tooltipLeave:A,minValueGreaterThanZero:T,onDataClick:v,onDataDoubleClick:b,isThumbnail:d,focusedPosition:z,setFocusedPosition:I,showInlineLabels:f,...e})}),N&&(0,p.jsx)(iS,{width:c,data:_,render:e=>e.label,getColor:e=>O.get(e.id),textColor:o,onMouseOver:e=>()=>I({row:"_",column:e.id}),onMouseLeave:()=>()=>I(null)})]}),C()]})},iF=e=>{var t;let{animationDuration:n,barColors:i,data:a,showZero:r,yMax:o,xMax:l,dataScale:s,inlineLabels:d,labelScale:c,direction:u,globalMinValueGreaterThanZero:h,tooltipEnter:m,tooltipLeave:g,onDataClick:x,onDataDoubleClick:f,borderRadius:v,focusedPosition:b,setFocusedPosition:y}=e,{clickHandler:w,doubleClickHandler:j}=iA(),k=c.bandwidth(),C=c(null===(t=a[0])||void 0===t?void 0:t.position.row)||0,S=(0,R.useMemo)(()=>{let e=a.map(e=>e.position.column);return(0,n9.A)({range:[C,C+k],domain:e,paddingInner:e.length>1?.2:0})},[k,a,C]),A=r?s(h):0,z=e=>{let t=m(e);return n=>{t(n),y(e.position)}},I=e=>{let t=g(e);return e=>{t(e),y(null)}},E=e=>null!==b&&(a.length>1?b.column!==e.position.column:b.row!==e.position.row);return(0,p.jsx)(n7.A,{children:a.map(e=>{let t={dataScale:s,value:e,innerScale:S,yMax:o,xMax:l,scaledMinValueGreaterThanZero:A,showZero:r},{x:c,y:h,width:m,height:g,roundedCorners:b}="vertical"===u?function(e){var t,n;let{dataScale:i,value:a,innerScale:r,showZero:o,scaledMinValueGreaterThanZero:l}=e,s=Math.min(i.range()[0],i(0)),d=s-(null!==(t=i(a.data))&&void 0!==t?t:0),c=d,u=null!==(n=r(a.position.column))&&void 0!==n?n:0,p=s-c,h=r.bandwidth(),m={topLeft:!0,topRight:!0,bottomLeft:!1,bottomRight:!1};return o&&Math.abs(s-l)>12&&6>Math.abs(d)&&(c=6,i.domain()[0]<0?(p-=3,m.bottomLeft=!0,m.bottomRight=!0):p-=6),c<0&&(p+=c,m.topLeft=!1,m.topRight=!1,m.bottomLeft=!0,m.bottomRight=!0),{x:u,y:p,height:Math.abs(c),width:h,roundedCorners:m}}(t):function(e){let{dataScale:t,value:n,innerScale:i,showZero:a,scaledMinValueGreaterThanZero:r}=e,o=Math.max(t.range()[0],t(0)),l=o,s=i(n.position.column),d=t(n.data)-o,c=i.bandwidth(),u=d,p={topLeft:!1,topRight:!0,bottomLeft:!1,bottomRight:!0};return a&&r>12&&6>Math.abs(d)&&(u=6,t.domain()[0]<0&&(l-=3,p.bottomLeft=!0,p.topLeft=!0)),u<0&&(l+=u,p.bottomLeft=!0,p.bottomRight=!1,p.topLeft=!0,p.topRight=!1),{x:l,y:s,height:c,width:Math.abs(u),roundedCorners:p}}(t);return(0,p.jsx)(iH,{yMax:o,xMax:l,x:c,y:h,direction:u,width:m,height:g,radius:v,topLeft:b.topLeft,topRight:b.topRight,bottomRight:b.bottomRight,bottomLeft:b.bottomLeft,fill:i.get(a.length>1?e.position.column:e.position.row),label:d?{...d,label:e.textValue}:void 0,opacity:E(e)?.5:1,duration:n,onMouseLeave:I(e),onMouseMove:z(e),onClick:x?w(x.bind(void 0,e)):void 0,onDoubleClick:f?j(f.bind(void 0,e)):void 0,style:{cursor:"pointer",transition:"opacity .25s"}},e.key)})})},iH=e=>{let{duration:t=0,y:n,x:i,height:a,width:r,yMax:o,xMax:l,innerRef:s,direction:d,label:c,opacity:u,style:h,...m}=e,[g,x]=(0,R.useState)(0),[f,v]=(0,R.useState)(r),[b,y]=(0,R.useState)(n+a),[w,j]=(0,R.useState)(i);return(0,R.useEffect)(()=>{(0,ii.i)(g,a,{duration:t,onUpdate:e=>x(e)})},[a]),(0,R.useEffect)(()=>{(0,ii.i)(f,r,{duration:t,onUpdate:e=>v(e)})},[r]),(0,R.useEffect)(()=>{(0,ii.i)(w,i,{duration:t,onUpdate:e=>j(e)})},[i]),(0,R.useEffect)(()=>{(0,ii.i)(b,n,{duration:t,onUpdate:e=>y(e)})},[n]),(0,p.jsxs)(n7.A,{children:[(0,p.jsx)(ie.A,{height:"vertical"===d?Math.max(0,o):g,width:"horizontal"===d?Math.max(0,l):f,x:"vertical"===d?w:0,y:"vertical"===d?0:b,...m,onClick:void 0,onDoubleClick:void 0,style:void 0,opacity:0}),(0,p.jsxs)("g",{opacity:u,style:h,children:[(0,p.jsx)(it.A,{height:g,width:f,x:w,y:b,innerRef:s,...m}),c&&(0,p.jsx)(ic,{direction:d,textValue:c.label,definition:c,width:f,height:g,x:w,y:b,invertColorOfInsideText:!0,bounds:{x:0,y:0,width:l,height:o}})]})]})};var iW=n(4016),iB=n(74936);let iV=e=>{var t,n;let{data:i,TooltipInner:a,isThumbnail:r=!1,width:o,height:l,accentColor:s,textColor:d,colorScheme:c=il.gb,hideLabels:u,backgroundColor:m,chartOptions:g,onContextMenu:x,...f}=e,{renderTooltip:v,mouseMoveHandler:b,mouseLeaveHandler:y}=i_({TooltipInner:a}),[w,j]=(0,R.useState)(null),[k,C]=(0,R.useState)(null),S=ir(i),A=(null==S?void 0:S.getCells(i))||[],z=i.columns.filter(e=>{let{type:t}=e;return"data"===t}),I=z.map(e=>e.getCells(i)).flat(),E=z.map(e=>{let{id:t}=e;return t}),L=(0,io.M)(s,E,c,{contrastColor:m}),_=(0,iy.jt)(r),M=z.length>1&&!u,N=M?l-3*_:l;return iT([S,...z]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(h.az,{"data-test":"line-chart-container",height:M?"calc(100% - ".concat(3,"em)"):"100%",cursor:"default",contentEditable:!1,suppressContentEditableWarning:!0,userSelect:"none",onContextMenu:x,children:[(0,p.jsx)(ij,{width:o,height:N,color:d,textColor:d,tiny:r,labelCells:A,dataCells:I,hideLabels:u,labelPadding:0,pullToZero:null===(n=null===(t=g.line)||void 0===t?void 0:t.axisPullToZero)||void 0===n||n,onMouseMoveInside:r?void 0:(e,t)=>j(t.axisCoords),onMouseLeaveInside:r?void 0:()=>j(null),children:e=>(0,p.jsx)(iG,{data:i,dataColumns:z,width:o,height:N,isThumbnail:r,getColor:L.get.bind(L),textColor:d,tooltipEnter:b,tooltipLeave:y,hoverPosition:w,highlightedColumn:k,chartOptions:g,...f,...e})}),M&&(0,p.jsx)(iS,{width:o,data:z,getColor:e=>L.get(e.id),textColor:d,render:e=>e.label,onMouseOver:e=>()=>C(e.id),onMouseLeave:()=>()=>C(null)})]}),v()]})},iG=e=>{var t,n;let{labelScale:i,dataScale:a,data:r,dataColumns:o,isThumbnail:l,getColor:s,margin:d,tooltipEnter:c,tooltipLeave:u,chartOptions:{line:h={}},onDataClick:m,onDataDoubleClick:g,animationDuration:x=il.UG,textColor:f,hoverPosition:v,highlightedColumn:b,showInlineLabels:y}=e,[w,j]=a.range(),[k,C]=(0,R.useState)(null),[S,A]=(0,R.useState)(null),z=iP({textColor:f}),I=(0,is.wQ)(o,"id"),E=iz({dataCells:r.rows.map(e=>e.getCells(r).filter(e=>!!I.get(e.position.column))),textStyles:z,scale:i,direction:"vertical",showInlineLabels:1===o.length&&y,labelMargin:-2}),L=e=>{let{data:t,position:{row:n}}=e;return{x:i(n)+i.bandwidth()/2,y:a(t)}},_=e=>{let t=c(e),n=L(e);return i=>{t(i),C(n),A(e.position.row)}},M=e=>{let t=u(e);return e=>{t(e),C(null),A(null)}};return(0,p.jsxs)(n7.A,{left:d.left,top:d.top,children:[(0,p.jsx)("line",{y1:j,y2:w,x1:0,x2:0,strokeWidth:1,stroke:f,transform:"translate(".concat(null!==(n=null!==(t=null==k?void 0:k.x)&&void 0!==t?t:null==v?void 0:v.x)&&void 0!==n?n:0,", 0)"),style:{opacity:"".concat(v||k?.8:0),pointerEvents:"none",transition:"opacity ".concat(x,"s, transform ").concat(k?.15:0,"s")}}),o[0].getCells(r).map(e=>(0,p.jsx)(ie.A,{opacity:0,height:w,width:i.bandwidth(),x:i(e.position.row),y:j,onMouseMove:_(e),onMouseLeave:M(e)},"p-".concat(e.key))),o.map(e=>{let t=e.getCells(r);return(0,p.jsx)(iU,{cells:t,isThumbnail:l,color:s(e.id),xScale:i,yScale:a,onDataClick:m,onDataDoubleClick:g,lineOptions:h,animationDuration:x,onMouseMove:_,onMouseLeave:M,highlightedRow:S,highlightedColumn:b,inlineLabels:E,height:w},e.id)})]})},iU=e=>{var t;let{cells:n,color:i,xScale:a,yScale:r,onDataClick:o,onDataDoubleClick:l,onMouseMove:s,onMouseLeave:d,lineOptions:c={},animationDuration:u,isThumbnail:h,highlightedRow:m,highlightedColumn:g,inlineLabels:x,height:f}=e,{clickHandler:v,doubleClickHandler:b}=iA(),y=a.bandwidth(),[w,j]=(0,R.useState)({}),k=iK(n,r,u),C=e=>a(e.position.row)||0,S=e=>(!!m||!!g)&&(g?g!==e.position.column:m!==e.position.row);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(iB.A,{data:n,x:e=>C(e)+y/2,y:k,stroke:i,strokeWidth:2,style:{pointerEvents:"none",transition:"opacity ".concat(u,"s")},opacity:(t=n[0],(m||g)&&(g?g!==t.position.column:!!m))?.3:1}),!h&&n.map(e=>{let t=w[e.key],n=C(e)+a.bandwidth()/2,r=k(e);return(0,p.jsxs)("g",{style:{transition:"opacity ".concat(u,"s")},opacity:c.hideMarkers?0:S(e)?.3:1,children:[x&&!x.hide&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(ic,{textValue:e.textValue,definition:x,width:y,height:f,x:C(e),y:k(e),offset:{y:Math.min(.1*f,50),x:0},onPositionChange:t=>{j(n=>({...n,[e.key]:t}))}}),t&&(0,p.jsx)("line",{x1:n,y1:r,x2:t.x,y2:t.y+5*(t.y>r?-1:1),stroke:x.textStyles.fill})]}),(0,p.jsx)(iC.P.circle,{cx:n,cy:r,r:4,fill:i,stroke:i,style:{cursor:"pointer"},onMouseMove:s(e),onMouseLeave:d(e),onClick:o?v(o.bind(void 0,e)):void 0,onDoubleClick:l?b(l.bind(void 0,e)):void 0})]},"circle-".concat(e.key))})]})},iK=(e,t,n)=>{let i=(0,R.useRef)(Object.fromEntries(e.map(e=>[e.key,void 0]))),a=()=>e=>i.current[e.key],[r,o]=(0,R.useState)(()=>a());return(0,R.useEffect)(()=>{let r=t(0);if(0===r)return;let l=e.map(e=>{var l;let s=e.key;return(0,ii.i)(null!==(l=i.current[s])&&void 0!==l?l:r,t(e.data),{duration:n,ease:"easeOut",onUpdate:e=>{i.current[s]=e,o(()=>a())}})});return()=>{l.forEach(e=>{e.stop()})}},[e,t]),r||console.log("no getter"),r};var iq=n(13643),iJ=n(81003);let i$=e=>{let{targetValue:t,initialValue:n=0,duration:i=il.UG}=e,[a,r]=(0,R.useState)(n);return(0,R.useEffect)(()=>{let{stop:e}=(0,ii.i)(a,t,{duration:i,onUpdate:e=>{r(e)}});return()=>{e()}},[t]),a};var iY=n(95197);function iQ(e,t){return e.x>=t.x&&e.x<=t.x+t.width&&e.y>=t.y&&e.y<=t.y+t.height}function iX(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return"number"==typeof t&&(t={x:t,y:t}),{...e,x:e.x+t.x*n,y:e.y+t.y*n}}class iZ{get anchor(){return function(e){let t=360*e/(2*Math.PI);switch(!0){case t>=225&&t<=315:return{h:"middle",v:"end"};case t>=45&&t<=135:return{h:"middle",v:"start"};case t>135&&t<225:return{h:"end",v:"middle"};default:return{h:"start",v:"middle"}}}(this.angle)}get key(){return this.cell.key}get closestCorner(){let e=this.angle,t=this.rect;return{x:e>=1.5*Math.PI||e<=Math.PI/2?t.x:t.x+this.width,y:e<=Math.PI?t.y:t.y+this.height}}get furthestCorner(){let e=this.angle,t=this.rect;return{x:e>=1.5*Math.PI||e<=Math.PI/2?t.x+this.width:t.x,y:e<=Math.PI?t.y+this.height:t.y}}getConnectionPoint(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.rect,{x:n,y:i}=this.closestCorner,a=n/Math.cos(this.angle),r=i/Math.sin(this.angle),o=a;return iQ({x:r*Math.cos(this.angle),y:i},t)?o=r:iQ({x:n,y:a*Math.sin(this.angle)},t)||console.error("Line does not intersect rect"),{x:(o-e)*Math.cos(this.angle),y:(o-e)*Math.sin(this.angle)}}get rect(){var e,t,n;return{...iX({x:Math.cos(e=this._angle)*(t=this.radius+this.offset),y:Math.sin(e)*t},null!=(n=this.anchorPos)?n:0),width:this.width,height:this.height}}get angle(){return this._angle}set angle(e){this._angle=function(e){let t=e;for(;t<0;)t+=2*Math.PI;return t%(2*Math.PI)}(e)}getOverflowingRadius(){let e=this.boundingRect,t=this.furthestCorner;if(t.y<e.y||t.x<e.x||t.x>e.x+e.width||t.y>e.y+e.height){let n=Math.min(Math.abs(e.x/Math.cos(this.angle)),Math.abs(e.y/Math.sin(this.angle)));return Math.sqrt(t.x**2+t.y**2)-n}return 0}handleIntersection(e){let t=this.rect,n=e.rect,i=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=iX(e,n),a=iX(t,n),r=e=>{let t={x:"width",y:"height"}[e];return a[e]>i[e]?[a[e],Math.max(i[e]+i[t]-a[e],0)]:[i[e],Math.max(a[e]+a[t]-i[e],0)]},[o,l]=r("x"),[s,d]=r("y");return 0!==l&&0!==d&&iX({x:o,y:s,width:l,height:d},-1*n)}(n,t,this.radius);if(!i)return 0;let a=(i.x>n.x?i.width:-1*i.width)*Math.sign(t.x),r=0>Math.sign(t.y)?-((i.y>n.y?n.height-i.height+t.height:i.height)*1):i.y>n.y?i.height:n.height-i.height,o=a/Math.cos(this.angle),l=r/Math.sin(this.angle),s=Math.sign(o)===Math.sign(l)?Math.min(Math.max(o,0),Math.max(l,0)):Math.max(o,l);return this.offset+=s,this.offset}get anchorPos(){var e,t;return e={w:this.width,h:this.height},{x:"start"===(t=this.anchor).h?0:"middle"===t.h?-(e.w/2):-1*e.w,y:"start"===t.v?0:"middle"===t.v?-(e.h/2):-1*e.h}}constructor(e,t,n,i,a,r,o){this.cell=e,this.radius=n,this.label=i,this.width=a,this.height=r,this.boundingRect=o,this.offset=0,this.angle=t}}let i0=e=>{let{showLabels:t,cells:n,radius:i,textStyles:a,chartWidth:r,margin:o=20,...l}=e,s=n.map(e=>e.textValue).join("|");return(0,R.useMemo)(()=>{if(!t)return{labelPad:0,labels:[]};let e={x:-(r/2),y:-(r/2),width:r,height:r},s=(0,iY.rL)({value:e=>e.data,...l})(n),d=0,c=s.map(t=>{var n;let{startAngle:r,endAngle:o}=t,l=t.data,s=l.textValue,{width:c,height:u}=null!==(n=(0,iy.Z7)(s,a))&&void 0!==n?n:{width:0,height:0},p=new iZ(l,(r+o)/2-Math.PI/2,i,s,c,u,e),h=p.getOverflowingRadius();return h>d&&(d=h),p}),u=d,p=d,h=0;for(;u>0&&h++<2;){let e=d;d=0,u=0,c.forEach((t,n)=>{t.radius=t.radius-e,0!==n&&(u+=t.handleIntersection(c[n-1])),n===c.length-1&&(u+=t.handleIntersection(c[0]));let i=t.getOverflowingRadius();i>d&&(d=i)}),p+=d,u+=d}let m=o+p;return i-m<i/2?{labelPad:0,labels:[]}:{labelPad:m,labels:c}},[s,a,i,r,o,t])},i1=e=>{let{labels:t,radius:n,textStyles:i,colors:a,isFocused:r,explodeOffset:o,animationDuration:l=.2}=e;return(0,p.jsx)("g",{children:t.map((e,t)=>{let s=e.getConnectionPoint(5),d=r(e.cell.position),c=r(e.cell.position,!0),u="opacity ".concat(l,"s, transform ").concat(l,"s"),h=c?"translate(".concat(Math.cos(e.angle)*o,"px, ").concat(Math.sin(e.angle)*o,"px)"):"";return(0,p.jsxs)("g",{opacity:d?1:.5,style:{transition:u,transform:h},children:[(0,p.jsx)("line",{x1:Math.cos(e.angle)*n,y1:Math.sin(e.angle)*n,x2:s.x,y2:s.y,stroke:i.fill,strokeWidth:c?2:1}),(0,p.jsx)("circle",{cx:s.x,cy:s.y,r:3,fill:a[t],stroke:i.fill}),(0,p.jsx)("text",{dominantBaseline:"hanging",x:e.rect.x,y:e.rect.y+3,...i,fontWeight:c?"bold":"normal",pointerEvents:"none",style:{userSelect:"none"},children:e.label})]},e.key)})})},i2=e=>{var t;let{data:n,TooltipInner:i,colorScheme:a=il.gb,isThumbnail:r=!1,width:o,height:l,chartType:s,textColor:d,accentColor:c,chartOptions:{donut:u,pie:h},hideLabels:m,showInlineLabels:g,onDataClick:x,onDataDoubleClick:f,animationDuration:v=il.UG,backgroundColor:b,onContextMenu:y}=e,{dispatch:w}=(0,R.useContext)(iN.uR),{renderTooltip:j,mouseMoveHandler:k,mouseLeaveHandler:C}=i_({TooltipInner:i}),S={top:15,right:15,bottom:15,left:15},A=ia(n),z=ir(n),I=A?A.getCells(n).filter(e=>!e.isEmpty):[];iT([z,A]),(0,R.useEffect)(()=>{let e="pie-no-labels";return z||m||w((0,iJ.TD)(e_.Ru._({id:"gMgGUM"}),{severity:"warning",id:e,dismissable:!1})),()=>{w((0,iJ.sA)(e))}},[z,m,w]),(0,R.useEffect)(()=>{let e="pie-single-row";return 1===I.length&&w((0,iJ.TD)(e_.Ru._({id:"uHTxZb"}),{severity:"info",id:e,dismissable:!0})),()=>{w((0,iJ.sA)(e))}},[I.length,w]);let E=I.map(e=>{let{position:t}=e;return t.row}),L=(0,io.M)(c,E,a,{contrastColor:b,minContrast:1.3}),[_,M]=(0,R.useState)(null),N=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return _?_.row===e.row&&_.column==_.column:!t};r&&(S.top=5,S.right=5,S.bottom=5,S.left=5);let T=r||m||!z,[P,O]=o<l?[o,o]:[l,l],D=P-S.left-S.right,F=O-S.top-S.bottom,H=Math.min(D,F)/2,W=D/2,B=i$({targetValue:"donut"===s?(null==u?void 0:u.radius)||.5:1,initialValue:1,duration:v}),V=null!==(t=null==h?void 0:h.legendPosition)&&void 0!==t?t:"bottom",G=iP(),{labelPad:U,labels:K}=i0({showLabels:g,cells:I,radius:H,textStyles:G,chartWidth:D,sort:null}),q=H-U,J=q*B,$=e=>(0,p.jsx)(i5,{cells:I,colors:L,donutThickness:J,duration:v,isDummy:e,isFocused:N,isThumbnail:r,onClick:x,onDoubleClick:f,radius:q,setFocus:M,tooltipEnter:k,tooltipLeave:C}),Y=["top","left"].includes(V),Q=["right","left"].includes(V),X="".concat(Q?"row":"column").concat(Y?"-reverse":"");return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(et.s,{height:"100%","data-test":"pie-chart-container",cursor:"default",contentEditable:!1,suppressContentEditableWarning:!0,userSelect:"none",flexDirection:X,gap:1,justifyContent:Y?"flex-end":"flex-start",onContextMenu:y,children:[(0,p.jsx)("svg",{style:{aspectRatio:"1",minHeight:"2em",overflow:"hidden"},viewBox:"0 0 ".concat(P," ").concat(O),children:(0,p.jsx)(n7.A,{top:F/2+S.top,left:W+S.left,children:(0,p.jsxs)(p.Fragment,{children:[$(!0),$(!1),(0,p.jsx)(i1,{labels:K,isFocused:N,radius:q,textStyles:G,colors:[...L.values()],explodeOffset:15})]})})}),!T&&(0,p.jsx)(iS,{width:o,position:V,data:I,getColor:e=>L.get(e.position.row),render:e=>{let{position:{row:t}}=e;return n.getCellOrThrow({row:t,column:z.id}).label},textColor:d,getOpacity:e=>N(e.position)?1:.2,onMouseOver:e=>()=>M(e.position),onMouseLeave:()=>()=>M(null)})]}),j()]})},i4=e=>{let{arc:t,duration:n=.2,path:i,getColor:a,tooltipEnter:r,tooltipLeave:o,onClick:l,onDoubleClick:s,focused:d,setFocused:c,isThumbnail:u,radius:h,isDummy:m,isDonut:g,...x}=e,{startAngle:f,endAngle:v}=t,b=a(t.data),[y,w]=(0,R.useState)(f),[j,k]=(0,R.useState)(f),[C,S]=(0,R.useState)(b),{clickHandler:A,doubleClickHandler:z}=iA();(0,R.useEffect)(()=>{(0,ii.i)(y,[y,v],{duration:n,onUpdate:e=>w(e)})},[v]),(0,R.useEffect)(()=>{(0,ii.i)(j,[j,f],{duration:n,onUpdate:e=>k(e)})},[f]),(0,R.useEffect)(()=>{(0,ii.i)(C,b,{duration:n,onUpdate:e=>S(e)})},[b]);let I=d?u?4:15:0,E=(j+y)/2,L=I>0?"translate(".concat(Math.sin(E)*I,", ").concat(-(Math.cos(E)*I*1),")"):"";return(0,p.jsx)("g",{transform:L,style:{transition:"transform ".concat(n,"s")},children:(0,p.jsx)("path",{d:i({...t,startAngle:j,endAngle:y}),fill:C,stroke:m||g?"transparent":"var(--card-color)",strokeWidth:.02*h,strokeLinecap:"round",strokeLinejoin:"round",onMouseMove:e=>{c(!0),null==r||r(t.data)(e)},onMouseLeave:e=>{c(!1),null==o||o(t.data)(e)},onClick:l?A(l.bind(void 0,t.data)):void 0,onDoubleClick:s?z(s.bind(void 0,t.data)):void 0,...x})})},i5=e=>{let{cells:t,colors:n,donutThickness:i,duration:a,isDummy:r,isFocused:o,isThumbnail:l,onClick:s,onDoubleClick:d,radius:c,setFocus:u,tooltipEnter:h,tooltipLeave:m}=e;return(0,p.jsx)(iq.A,{data:t,outerRadius:c,innerRadius:r?0:c-i,pieValue:e=>{let{data:t}=e;return t},pieSort:null,pieSortValues:null,padAngle:r?0:i<c?.016:0,children:e=>{let{arcs:t,...g}=e;return t.map(e=>(0,p.jsx)(i4,{arc:e,...g,radius:c,isDonut:i<c,focused:!r&&o(e.data.position,!0),setFocused:t=>{u(t?e.data.position:null)},getColor:e=>r?"transparent":n.get(e.position.row),tooltipEnter:h,tooltipLeave:m,duration:r?0:a,isThumbnail:l,onClick:s,onDoubleClick:d,isDummy:!!r},e.data.key))}})};var i6=n(15576),i3=n(95905),i8=n(87071),i7=n(95994),i9=n(80916),ae=n(57569);let at=e=>{let{isResizing:t,onResizing:n,setIsResizing:i,cloneBoxProps:a={},showResizeControls:r,disableCloning:o,children:l,...s}=e,d=(0,R.useRef)(null),c=(0,R.useRef)(null),u=(0,R.useRef)(void 0);return(0,R.useEffect)(()=>{if(!o&&(!0===t&&c.current&&u.current&&c.current.appendChild(u.current),!t&&u.current)){var e;null===(e=u.current.parentNode)||void 0===e||e.removeChild(u.current)}},[t]),(0,p.jsxs)(p.Fragment,{children:[t&&!o?(0,p.jsx)(h.az,{filter:"blur(15px)",...a,ref:c,width:"100%",height:"100%",position:"relative","data-test":"resize-placeholder"}):(0,p.jsx)(h.az,{ref:d,width:"100%",height:"100%",filter:t?"blur(4px) opacity(0.75)":void 0,children:l}),r&&(0,p.jsx)(ae.u4,{setIsResizing:e=>{if(!o&&e){var t;u.current=null===(t=d.current)||void 0===t?void 0:t.cloneNode(!0);let e=u.current;e&&(e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.width="auto",e.style.height="auto")}i(e)},onResizing:function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];let{width:r,height:o}=e,l=u.current;if(!l)return;let s={width:l.offsetWidth,height:l.offsetHeight},d=r/s.width,c=o/s.height;l.style.transform="scale(".concat(d,", ").concat(c,")"),l.style.transformOrigin="top left",null==n||n(e,...i)},...s})]})};var an=n(14608),ai=n(9746),aa=n(70323),ar=n(6228),ao=n(23970);let al=e=>{var t,n;let{state:i,dispatch:a}=(0,R.useContext)(iN.uR),[r,o]=(0,R.useState)(new Date),l=(0,R.useRef)(!1),s=i.feedback;return((0,R.useEffect)(()=>{if(!(null==s?void 0:s.length))return;let e=[],t=s.filter(t=>{let n=t.dismissable;return n instanceof Date&&(!(n<=r)||(e.push(t.id),!1))});e.length&&a((0,iJ.sA)(...e)),!l.current&&t.length&&(l.current=setTimeout(()=>{l.current=!1,o(new Date)},1e3))},[s,r,a]),null===(t=i.feedback)||void 0===t?void 0:t.length)?(0,p.jsx)(ez.B,{marginY:2,...e,children:null===(n=i.feedback)||void 0===n?void 0:n.map(e=>(0,p.jsxs)(nE.F,{marginBottom:1,status:e.severity,children:[(0,p.jsx)(nL._,{}),(0,p.jsx)(nM.T,{flexGrow:1,children:e.message}),e.dismissable&&(0,p.jsx)(ao.U,{cursor:"pointer",onClick:()=>{a((0,iJ.sA)(e.id))}})]},e.id))}):null};var as=n(83272),ad=n(43342),ac=n(83894);let au=n.n(ac)()(async()=>(await Promise.all([n.e(7585),n.e(9835),n.e(5546)]).then(n.bind(n,45546))).DataEditor,{loadableGenerated:{webpack:()=>[45546]},ssr:!1,loading:()=>(0,p.jsx)(et.s,{m:5,h:"100%",justifyContent:"center",children:(0,p.jsx)(ad.y,{size:"lg"})})}),ap=e=>(0,p.jsx)(au,{...e}),ah=(0,iN.en)(e=>{let{onChange:t,onClose:n,data:i,isOpen:a,renderChart:r,attributes:o,updateAttributes:l,accentColor:s,selectedCell:d,cardColor:c}=e,u=(0,el.GV)(em.SJ),m=(0,L.Ik)((0,L.fQ)(u));return(0,p.jsxs)(an._,{placement:"bottom",onClose:n,isOpen:a,trapFocus:!0,isFullHeight:!0,returnFocusOnClose:!1,children:[(0,p.jsx)(eB.m,{}),(0,p.jsxs)(ai.z,{borderTopRadius:"xl",h:"calc(var(--100vh) - 24px)",transitionDuration:{enter:"0.4s"},children:[(0,p.jsx)(eG.s,{}),(0,p.jsxs)(eK.c,{p:0,h:"100%",overflow:"auto","data-testid":"chart-editor-body",display:"flex",flexDir:"column",children:[(0,p.jsx)(eU.r,{children:(0,p.jsx)(eL.x6,{id:"44wbJb"})}),(0,p.jsxs)(et.s,{direction:{base:"column",xl:"row-reverse"},overflow:"auto",gap:5,px:5,children:[(0,p.jsxs)(et.s,{direction:{base:"column",lg:"row",xl:"column"},width:{base:"auto",xl:"40%","2xl":"30%"},gap:5,children:[(0,p.jsx)(h.az,{flexGrow:{base:1,xl:0},flexShrink:0,flexBasis:"auto",borderRadius:"md",overflow:"hidden",children:(0,p.jsx)(h.az,{background:c,borderRadius:"md",padding:8,maxWidth:"100%",h:"xs",children:(0,p.jsx)(h.az,{as:ar.A,position:"relative",children:e=>{let{width:t,height:n}=e;return r({data:i,width:t,height:n,textColor:m})}})})}),(0,p.jsx)(h.az,{background:"gray.50",borderRadius:"md",children:(0,p.jsx)(as.z,{attributes:o,updateAttributes:l,accentColor:s})})]}),(0,p.jsx)(aa.c,{display:{base:"block",xl:"none"}}),(0,p.jsxs)(h.az,{flexGrow:1,zIndex:1,overflow:{xl:"auto"},children:[(0,p.jsx)(ap,{onChange:t,data:i||n1.h.createEmpty(2,3),selectedCell:d}),(0,p.jsx)(al,{})]})]})]})]})]})}),am=e=>{let t=(0,R.useRef)(!1),[n,i]=(0,R.useState)(!1);(0,R.useEffect)(()=>{if(t.current||null===e)return;let n=!1;e.columns.forEach((t,i)=>{let a=e.getCellAtIndex({row:0,column:i});n=(0,is.aH)(a,e)||n}),t.current=!0,n&&i(n)},[e])},ag=e=>{let{editor:t,node:n,getPos:i}=e,a=(0,R.useCallback)(()=>{t.commands.selectNodeAtPos(i()),t.chain().deleteSelectionAndSelectNear().run()},[t,i]),{attrs:r}=n,o=!!r.data,l=r.colorScheme,s=r.chartType,d=e=>{t.commands.selectNodeAtPos(i()),t.chain().updateAttributes("chart",e).focus().run()},c=(0,tB.d)({editor:t,node:n,getPos:i});return[{key:"chart-options",title:(0,p.jsx)(eL.x6,{id:"nuBbBr"})},{divider:!0},...c,{divider:!0},{key:"edit-chart",label:o?(0,p.jsx)(eL.x6,{id:"BhcOHV"}):(0,p.jsx)(eL.x6,{id:"UHoZ5e"}),icon:eq.zLW,onClick:()=>{t.commands.selectNodeAtPos(i()),t.commands.editSelectedChart()}},{divider:!0},{key:"change-color-scheme",label:(0,p.jsx)(eL.x6,{id:"q3f9iw"}),icon:eq.wIs,items:[{key:"default",label:e_.Ru._({id:"ovBPCi"}),check:!l,onClick:()=>{d({colorScheme:void 0})}},...Object.entries(il.fA).map(e=>{let[t,n]=e;return{key:t,label:n.label(),check:t===l,onClick:()=>{d({colorScheme:t})}}})]},{key:"horizontal-alignment",label:(0,p.jsx)(eL.x6,{id:"9ms+e0"}),icon:eq.ecg,items:i3.gj.map(e=>{let{name:n,key:i,icon:a,checkActive:r,apply:o}=e;if(r&&o)return{key:i,label:n(),check:r(t),icon:a,onClick:()=>{o(t)}}}).filter(Boolean)},{divider:!0},{key:"switch-chart-type",label:(0,p.jsx)(eL.x6,{id:"U2Nq+R"}),icon:eq.$Fj,items:Object.entries(il.XD).map(e=>{let[t,{label:n,icon:i}]=e;return{key:t,label:(0,p.jsx)(eL.x6,{id:"J/hVSQ",values:{0:n()}}),icon:i,check:s===t,onClick:()=>d({chartType:t})}})},{divider:!0},{key:"delete",label:(0,p.jsx)(eL.x6,{id:"cnGeoo"}),icon:eq.yLS,onClick:a,color:"red.500"}]},ax=e=>{let{node:t,editor:n,selected:i,updateAttributes:a,decorations:r,getPos:o}=e,{chartType:l,colorScheme:s,data:d,dimensions:c={ratio:.5},hideLabels:u,showInlineLabels:g,chartAttributes:x={},horizontalAlign:f}=t.attrs,v=(0,R.useMemo)(()=>{try{return d?nQ.A.parse(d):null}catch(e){return console.error("[DATALOSS] Error parsing serialized chart",e),console.log(d),null}},[d]),b=(0,el.CU)(),y=(0,el.GV)(em.Cl),w=(0,ep.FX)(),j=(0,el.GV)(em.Ik),k=(0,ep.CJ)(n),C=(0,el.GV)(em.r9),S=y&&k&&j,{theme:z,cardColor:I}=(0,M.a)(r),{ref:E,isResizing:_,setIsResizing:N,resizeableSx:T}=(0,ae.Y3)(n),P=(0,R.useCallback)(e=>{a({dimensions:{width:e.width,height:e.height}})},[a]),[O,D]=(0,R.useState)(il.UG);am(v),(0,R.useEffect)(()=>{_?D(0):setTimeout(()=>{D(il.UG)},1e3*il.UG)},[_]);let F=n.isThumbnail||!1,[H,W]=(0,R.useState)(),B=!F&&C===t.attrs.id,V=e=>{if(e){b.dispatch((0,em.Jr)({chartId:t.attrs.id}));return}b.dispatch((0,em.Jr)({chartId:null}))},G=(0,R.useMemo)(()=>{switch(l){case"pie":case"donut":return i2;case"line":return iV;default:return iD}},[l]),U=(0,L.Ik)((0,L.VH)(z)),K=e=>{y&&j&&(W(e),V(!0))};(0,R.useEffect)(()=>{H&&(null==v?void 0:v.getCell(H.position))!==H&&W(void 0)},[H,B]);let q=e=>{var t;let{data:n,width:i,height:a,textColor:r="var(--body-color)",showEditInPlaceholder:o=!1,onContextMenu:c=()=>{}}=e,m=n&&(null===(t=iW.K.nonEmpty(n))||void 0===t?void 0:t.data);return!m||!ia(m)||m.isEmpty()?(0,p.jsx)(ab,{setEditing:o?V:void 0,onContextMenu:c}):(0,p.jsx)(G,{animationDuration:O,data:m,colorScheme:s||void 0,width:i,height:a,accentColor:U,textColor:r,chartOptions:x,onDataDoubleClick:K,hideLabels:u,showInlineLabels:g,backgroundColor:I,onContextMenu:c,TooltipInner:e=>(0,p.jsx)(p.Fragment,{children:d.columns.map(t=>{var n;return(0,p.jsxs)(h.az,{as:"p",mb:1,children:[t.label&&(0,p.jsxs)(A.E,{as:"b",children:[t.label,": "]}),(0,p.jsx)(A.E,{as:"span",children:null===(n=m.getCell({row:e.position.row,column:t.id}))||void 0===n?void 0:n.textValue},t.id)]},t.id)})}),chartType:l,isThumbnail:F})},J=af(c),$="width"in c?c.width:i7.St;w&&($=Math.min($,i7.St/2));let Y=$*J,Q=(0,i3.yp)(f),X=ag(e),{onOpenContextMenu:Z,onCloseContextMenu:ee,menuProps:en}=(0,eh.$)({editor:n,getPos:o});return(0,i6.l)()?(0,p.jsx)(m.u,{as:"div",...e,children:(0,p.jsxs)(et.s,{w:"100%",dir:(0,i3.fZ)(r,f),className:i8.S,sx:T,css:Q,direction:"column",onDoubleClick:()=>{S&&V(!0)},_focusWithin:{shadow:"outline"},children:[(0,p.jsxs)(h.az,{ref:E,className:"chart",borderRadius:"var(--box-border-radius)","data-content-reference":!0,"data-selection-ring":!0,"data-selection-background":!0,maxW:"100%",minW:"min(10em, 100%)",minH:"min(10em, 100%)",width:!function(e){return"width"in e&&"height"in e}(c)?"calc(100% * var(--media-scale))":av(c.width),aspectRatio:"1/".concat(J),position:"relative","data-drag-handle":!0,"data-scale-preview":!0,children:[(0,p.jsx)(at,{showResizeControls:S&&i,imageWrapperRef:E,isResizing:_,setIsResizing:N,updateResizeAttrs:P,refreshDeps:[t.attrs],disableCloning:!0,keepRatio:!1,children:v?q({data:v,width:$,height:Y,showEditInPlaceholder:!F&&y,onContextMenu:Z}):(0,p.jsx)(ab,{setEditing:F||!y?void 0:V})}),(0,p.jsx)(ah,{renderChart:q,cardColor:I,data:v,isOpen:B,onClose:()=>V(!1),onChange:e=>{a({data:nQ.A.serialize(e)})},attributes:t.attrs,updateAttributes:a,accentColor:U,selectedCell:H})]}),(0,p.jsx)(ea.t,{menuItems:X,isOpen:en.isOpen,position:en.position,onClose:ee,size:"small"})]})}):(0,p.jsx)(h.az,{w:$,h:Y})},af=e=>"ratio"in e?e.ratio:e.height/e.width,av=e=>"calc(".concat(e," * var(--font-size) / 16)"),ab=e=>{let{setEditing:t,onContextMenu:n}=e,i=(0,eD.rd)();return(0,p.jsxs)(nN.T,{spacing:3,justify:"center",contentEditable:!1,color:i?i9.N.DARK_COLOR:i9.N.LIGHT_COLOR,h:"100%",backgroundColor:i?i9.N.DARK_BG:i9.N.LIGHT_BG,borderRadius:"var(--box-border-radius)","data-testid":"chart-placeholder",onContextMenu:n,children:[(0,p.jsx)(I.g,{size:"2x",icon:n8.s67}),t&&(0,p.jsx)(n3.$,{size:"xs",fontFamily:"body",onClick:()=>t(!0),children:(0,p.jsx)(eL.x6,{id:"UHoZ5e"})})]})};var ay=n(98757);let aw=()=>(0,nY.Ak)(5),aj=new tQ.hs("UniqueMediaId"),ak=n5.S.extend({name:"UniqueChartId"}).configure({attributeName:"id",types:["chart"],initialValue:aw,filterTransaction:nw.kz,pluginKey:aj}),aC=l.bP.create({name:"chart",group:"cardBlock layoutBlock",selectable:!0,draggable:!0,addNodeView:()=>(0,c.gu)(ax,{update:u.z0}),addAttributes:()=>({id:(0,n6.e)(()=>(0,nY.Ak)(5)),chartType:{default:"bar"},chartAttributes:{...(0,Z.tb)("chartAttributes"),default:{}},colorScheme:{isRequired:!1},dimensions:{...(0,Z.tb)("dimensions"),default:{ratio:.56}},hideLabels:{isRequired:!1,default:!1},showInlineLabels:{isRequired:!1,default:!1},data:{...(0,Z.tb)("data")}}),addCommands:()=>({insertChart:(e,t)=>n=>{let{dispatch:i,editor:a,commands:r}=n;if(!i)return!1;let{schema:o}=a,l=o.nodes.chart,s=aw(),d=l.createChecked({id:s,chartType:e,data:t&&e?(0,ay.$)(e):void 0});return r.insertContent(d.toJSON())},editSelectedChart:()=>e=>{let{state:t}=e,n=t.selection;if(!(n instanceof tQ.nh)||!aS(n.node))return!1;let i=n.node;return(0,el.KA)().dispatch((0,em.Jr)({chartId:i.attrs.id})),!0}}),addExtensions:()=>[ak],parseHTML(){return[{tag:'div[data-type="'.concat(this.name,'"]')},{tag:"chart",getAttrs(e){try{if("string"==typeof e)return!1;let t=[...e.children].find(e=>"TABLE"===e.nodeName);if(!t)return null;let n=n4.parse(t);if(!n)return{};return{data:nQ.A.serialize(n)}}catch(e){return console.error("[caught]",e),!1}}}]},renderHTMLforAI(e){let{node:t,HTMLAttributes:n}=e,{"data-data":i,...a}=n,r=["chart",(0,l.KV)(this.options.HTMLAttributes,a)];return t.attrs.data&&r.push(n4.serialize(nQ.A.parse(t.attrs.data))),r},renderHTML(e){let{HTMLAttributes:t}=e;return["div",(0,l.KV)({"data-type":this.name},this.options.HTMLAttributes,t)]}}),aS=e=>"chart"===e.type.name;var aA=n(44386);let az=n(55642).Ay.extend({priority:Q.y.Code,inclusive:!1});var aI=n(31595),aR=n(14979),aE=n(78354),aL=n(92667);let a_=e=>{let[t,n]=(0,R.useState)(new Date),i=(0,R.useRef)(!1);return(0,R.useEffect)(()=>{i.current&&n(new Date),i.current=!0;let e=setInterval(()=>{n(new Date)},6e4);return()=>{clearInterval(e)}},[e]),t},aM=e=>{var t;let n=(0,aE.h5)({base:4,md:8})||8,{node:i,decorations:a}=e,{showTime:o,hiddenContributorIds:l}=i.attrs,s=(0,el.GV)(em.zB),d=(0,R.useMemo)(()=>(s||[]).filter(e=>!l.includes(e.user.id)),[s,l]),c=(0,aL.En)(),u=(0,el.GV)(em.Jo),h=null==u?void 0:u.editedTime,g=a_(h).toISOString(),x=d.length-n,f=(0,i3.fZ)(a),v=null!==(t=e.node.attrs.horizontalAlign)&&void 0!==t?t:"rtl"===f?"right":"left",b=(0,R.useMemo)(()=>({left:"rtl"===f?"row-reverse":"row",center:"column",right:"rtl"===f?"row":"row-reverse"})[v],[f,v]);return(0,p.jsx)(p.Fragment,{children:d.length>0&&(0,p.jsx)(m.u,{...e,as:"div",children:(0,p.jsxs)(et.s,{dir:f,userSelect:"none",contentEditable:!1,justify:"flex-start",align:"center",direction:b,borderRadius:"var(--box-border-radius)","data-selection-ring":"padded","data-selection-background":!0,children:[(0,p.jsxs)(aI.Z,{sx:{".avatar-overflow-activator":{height:"1.6em",width:"1.6em",minH:"1.6em",minW:"1.6em",fontSize:"inherit",span:{fontSize:"0.68em"}}},children:[d.slice(0,n).map(e=>(0,p.jsx)(eE.Vc,{width:"1.6em",height:"1.6em",fontSize:"inherit",size:"sm",shadow:"base",sx:{"@media print":{shadow:"none"}},borderWidth:"1px",name:e.user.displayName,label:c?e_.Ru._({id:"bxVoEp",values:{0:e.user.displayName,1:(0,aR.Gx)(e.lastEdited,g)}}):" ",src:e.user.profileImageUrl},e.user.id)),x>0&&(0,p.jsx)(eE.oQ,{tooltipLabel:e_.Ru._({id:"25VyZX"}),count:x,avatars:d.map(e=>({name:e.user.displayName||"",id:e.user.id,profileImageUrl:e.user.profileImageUrl||"",color:"white"})),disabled:!0})]}),(0,p.jsxs)(et.s,{direction:"column",marginInline:"0.5em",lineHeight:"1.4",textAlign:v,children:[(0,p.jsx)(A.E,{className:"contributors-list",children:1===d.length?(0,p.jsx)(eL.x6,{id:"t490IT",values:{0:d[0].user.displayName}}):(0,p.jsx)(eL.x6,{id:"KNjuGh",values:{0:d.length}})}),!r.$.GAMMA_PUPPETEER_SERVICE&&h&&o&&(0,p.jsx)(A.E,{fontSize:"0.75em",children:c?(0,p.jsx)(eL.x6,{id:"gUWkFH",values:{0:(0,aR.Gx)(h,g)}}):" "})]})]})})})},aN=e=>{var t;let n=null!==(t=e.node.attrs.horizontalAlign)&&void 0!==t?t:"left",i=(0,R.useMemo)(()=>({left:"row",center:"column",right:"row-reverse"})[n],[n]);return(0,p.jsx)(nO.V,{children:(0,p.jsxs)(et.s,{direction:i,alignItems:"center",gap:"1em",children:[(0,p.jsx)(nP,{borderRadius:"full",boxSize:"4em"}),(0,p.jsx)(nP,{h:"2em",w:"14em"})]})})},aT=l.bP.create({name:"contributors",group:"block",atom:!0,selectable:!0,dynamic:!0,addAttributes:()=>({showTime:{default:!0},hiddenContributorIds:{default:[],...(0,Z.tb)("hiddenContributorIds")}}),addCommands:()=>({toggleShowTime:()=>e=>{let{commands:t,state:n}=e,{selection:i}=n;if(!(i instanceof tQ.nh))return!1;let{node:a}=i;return"contributors"===a.type.name&&(t.updateAttributes("contributors",{showTime:!a.attrs.showTime}),!0)},toggleOneContributorVisibility:e=>t=>{let{commands:n,state:i}=t,a=(0,el.KA)().getState(),r=(0,em.zB)(a);if(!r||1===r.length)return!1;let{selection:o}=i;if(!(o instanceof tQ.nh))return!1;let{hiddenContributorIds:l}=o.node.attrs,s=[];if(l.includes(e))s=l.filter(t=>t!==e);else{if(l.length+1===r.length)return!1;s=[...l,e]}return n.updateAttributes("contributors",{hiddenContributorIds:s}),!0},toggleAllContributorsVisibility:()=>e=>{let{commands:t,state:n}=e,i=(0,el.KA)().getState(),a=(0,em.zB)(i);if(!a||1===a.length)return!1;let{selection:r}=n;if(!(r instanceof tQ.nh))return!1;let{hiddenContributorIds:o}=r.node.attrs,l=[];if(o.length>0)l=[];else{let e=(0,em.JV)(i);l=a.filter(t=>t.user.id!==(null==e?void 0:e.id)).map(e=>e.user.id)}return t.updateAttributes("contributors",{hiddenContributorIds:l}),!0}}),parseHTML:()=>[{tag:"div[class=contributors]"}],renderHTML(e){let{HTMLAttributes:t}=e;return["div",(0,l.KV)(t,{class:"contributors"})]},addNodeView(){return this.editor.isThumbnail?(0,c.gu)(aN,{update:u.z0}):(0,c.gu)(aM,{update:u.z0})}});var aP=n(47813);let aO="125em",aD=e=>{let{svg:t,theme:n}=e;if(!t)return null;let i=(0,aP.k)(n);return(0,p.jsx)(h.az,{dangerouslySetInnerHTML:{__html:t},"data-testid":"diagram-svg",sx:{svg:{width:"100%",height:"auto",maxH:aO,...i}}})};var aF=n(25472),aH=n(27664),aW=n(41870);let aB=async e=>{let t=Array.from(e.getCurrentPageShapeIds()),n=await e.getSvg(t,{padding:8,scale:1});if(n)return console.debug("generated svg",n),n},aV=(e,t,n)=>{e&&t&&(Array.from(e.getCurrentPageShapeIds()).length>0?e.updateShapes(t):e.createShapes(t),n&&e.updateAssets(n))},aG=(e,t)=>{e.user.updateUserPreferences({isDarkMode:(0,L.Mw)(t)}),setTimeout(()=>{e.zoomToFit()})},aU=e=>{let{isOpen:t,isEditable:n,onClose:i,isDrawingEditorActive:a,setDrawingEditorActive:r,editor:o,...l}=e,{node:s,updateAttributes:d}=l,{assets:c,shapes:u}=s.attrs,h=(0,el.GV)(em.SJ),[m,g]=(0,R.useState)();(0,R.useEffect)(()=>{m&&aV(m,u,c)},[u,c,m,d]);let x=(0,R.useCallback)(e=>{g(e),window.tldrawEditor=e,aG(e,h)},[h]),f=(0,R.useCallback)(async()=>{if(!m)return;let e=await aB(m);e?d({svg:e.outerHTML}):d({svg:null})},[m,d]),v=(0,R.useCallback)(()=>{m&&d({shapes:m.getCurrentPageShapes(),assets:m.getAssets(),version:2})},[d,m]),b=(0,aL.lW)(v,500),y=(0,R.useCallback)(()=>{n&&f(),r(!1),i()},[i,f,r,n]);return(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)(eE._s,{placement:"bottom",onClose:y,isOpen:t,trapFocus:!0,isFullHeight:!0,returnFocusOnClose:!1,children:[(0,p.jsx)(eE.QP,{}),(0,p.jsxs)(eE.zj,{dir:"ltr",borderTopRadius:"xl",h:"calc(var(--100vh) - 24px)",onAnimationComplete:e=>{"enter"==e&&r(!0)},transition:{enter:{duration:.4}},overflow:"hidden",children:[(0,p.jsx)(eE.ys,{p:0,h:"100%",overflow:"hidden","data-testid":"drawing-editor-body",children:a?(0,p.jsx)(aW.U,{onMount:x,onChange:n?b:void 0,orgId:o.gammaOrgId,theme:h}):(0,p.jsx)(et.s,{align:"center",justify:"center",w:"100%",h:"100%",children:(0,p.jsx)(ad.y,{size:"xl"})})}),(0,p.jsx)(eE.s1,{zIndex:400,backgroundColor:"white","data-testid":"drawing-editor-close"})]})]})})};var aK=n(17835);let aq=e=>{let{editor:t,node:n,getPos:i}=e,{id:a,fullWidthBlock:r}=n.attrs,o=(0,R.useCallback)(()=>{t.commands.selectNodeAtPos(i()),t.chain().deleteSelectionAndSelectNear().run()},[t,i]),l=(0,R.useCallback)(()=>{t.commands.selectNodeAtPos(i()),(0,aH.CD)(a,!0)},[t,i,a]),s=(0,tB.d)({editor:t,node:n,getPos:i});return{contextMenuItems:[{key:"diagram-options",title:(0,p.jsx)(eL.x6,{id:"i+ShMB"})},{divider:!0},...s,{divider:!0},{key:"edit-diagram",label:(0,p.jsx)(eL.x6,{id:"SsJ/l2"}),icon:eq.MT7,onClick:l},{divider:!0},{key:"add-comment",label:(0,p.jsx)(eL.x6,{id:"oFsfkI"}),icon:eq.DN2,onClick:()=>{t.commands.selectNodeAtPos(i()),(0,aK.wG)(t.state.selection)}},{divider:!0},{key:"align",label:(0,p.jsx)(eL.x6,{id:"9ms+e0"}),icon:eq.ecg,disabled:r,items:i3.gj.map(e=>{let{name:n,key:i,icon:a,checkActive:o,apply:l}=e;return{key:i,check:null==o?void 0:o(t),icon:a,label:n(),onClick:()=>{l&&l(t),r&&t.commands.updateAttributes("diagram",{fullWidthBlock:!1})}}})},{divider:!0},{key:"delete",label:(0,p.jsx)(eL.x6,{id:"cnGeoo"}),icon:eq.yLS,onClick:o,color:"red.500"}]}},aJ=e=>{let{node:t,updateAttributes:n,selected:i,editor:a,getPos:r,decorations:o}=e,{width:l,meta:s,id:d,horizontalAlign:c,svg:u,shapes:g}=t.attrs,x=(0,el.GV)(em.Cl),f=(0,el.GV)(em.Ik),v=(0,ep.CJ)(a),b=x&&v&&f,y=(0,el.GV)(em.Xu),w=!!y&&y===d,[j,k]=(0,R.useState)(!1),C=(0,el.GV)(em.SJ),S=(0,eD.rd)(),{ref:A,setIsResizing:z,resizeableSx:E}=(0,ae.Y3)(a),{onOpenContextMenu:L,onCloseContextMenu:_,menuProps:M}=(0,eh.$)({editor:a,getPos:r}),{contextMenuItems:N}=aq({editor:a,node:t,getPos:r}),T=(0,R.useCallback)(()=>{(0,aH.CD)(d,!0)},[d]),P=(0,R.useCallback)(()=>{a.chain().setNodeSelection(r()).focus().run()},[a,r]),O=(0,R.useCallback)(()=>{(0,aH.CD)(null,!1)},[]),D=(0,R.useCallback)((e,i)=>{n({...t.attrs,fullWidthBlock:void 0===i?t.attrs.fullWidthBlock:i,...e})},[t.attrs,n]),F=l||(null==s?void 0:s.width),H=!u,W=g&&g.length>0,{isFullWidth:B}=(0,aF.D)(o),V=(0,i3.yp)(B?"center":c);return(0,p.jsxs)(m.u,{...e,as:"div",children:[(0,p.jsxs)(et.s,{dir:(0,i3.fZ)(o,c),w:"100%",className:i8.S,css:V,sx:E,direction:"column",_focusWithin:{shadow:"outline"},onContextMenu:L,children:[(0,p.jsxs)(h.az,{ref:A,className:"diagram",borderRadius:"var(--box-border-radius)","data-content-reference":!0,"data-selection-ring":!0,"data-selection-background":!0,w:B?"calc(100% * var(--media-scale))":F?"calc(".concat(F," * var(--font-size) / 16)"):"100%",maxW:"100%",h:"auto",maxH:aO,position:"relative",minH:H?"6em":"auto","data-drag-handle":!0,children:[b&&i&&!B&&(0,p.jsx)(ae.u4,{imageWrapperRef:A,setIsResizing:z,updateResizeAttrs:D,refreshDeps:[t.attrs]}),(0,p.jsx)(aD,{svg:u,theme:C}),b&&!w&&!H&&(0,p.jsx)(h.az,{cursor:"default",position:"absolute",inset:"0",zIndex:"1",onClick:P,onDoubleClick:T}),H&&(0,p.jsxs)(nN.T,{spacing:3,justify:"center",contentEditable:!1,color:S?i9.N.DARK_COLOR:i9.N.LIGHT_COLOR,h:"7em",backgroundColor:S?i9.N.DARK_BG:i9.N.LIGHT_BG,borderRadius:"var(--box-border-radius)","data-testid":"drawing-placeholder",onDoubleClick:x?T:void 0,children:[(0,p.jsx)(I.g,{size:"2x",icon:n8.qTS}),x&&(0,p.jsx)(n3.$,{size:"xs",onClick:T,fontFamily:"body",children:W?(0,p.jsx)(eL.x6,{id:"3IPx8n"}):(0,p.jsx)(eL.x6,{id:"trQ3Gx"})})]})]}),w&&(0,p.jsx)(aU,{...e,isOpen:w,isEditable:x,onClose:O,isDrawingEditorActive:j,setDrawingEditorActive:k})]}),(0,p.jsx)(ea.t,{menuItems:N,isOpen:M.isOpen,position:M.position,onClose:_,size:"small"})]})},a$=l.bP.create({name:"diagram",group:"block",atom:!0,selectable:!0,draggable:!0,addAttributes:()=>({id:(0,n6.e)(aQ),shapes:{...(0,Z.tb)("shapes")},assets:{...(0,Z.tb)("assets"),default:{}},meta:{...(0,Z.tb)("meta"),default:{}},width:{},svg:{}}),parseHTML(){return[{tag:"div[class=diagram]"},{tag:"diagram[bookmark]",getAttrs:(0,ee.Ll)(this.storage)}]},addStorage:ee.xu,renderHTMLforAI(e){let{node:t}=e;return["diagram",{bookmark:(0,ee.vL)(this.storage,t)}]},renderHTML(e){let{HTMLAttributes:t}=e;return["div",(0,l.KV)(t,{class:"diagram"})]},addCommands(){let e=this.name,t=t=>{let{selection:n}=t;return n instanceof tQ.nh&&n.node.type.name===e?n.node:void 0};return{editSelectedDiagramBlock:()=>e=>{let{state:n}=e,i=t(n);return i&&(0,el.KA)().dispatch((0,em.v5)({drawingId:i.attrs.id})),!0}}},addExtensions:()=>[aX],addNodeView:()=>(0,c.gu)(aJ,{update:u.z0})}),aY=new tQ.hs("UniqueMediaId"),aQ=()=>(0,nY.Ak)(5),aX=n5.S.extend({name:"UniqueDiagramId"}).configure({attributeName:"id",types:["diagram"],initialValue:aQ,filterTransaction:nw.kz,pluginKey:aY});var aZ=n(98380);let a0=()=>(0,p.jsx)(c.VR,{as:"div",children:(0,p.jsx)(h.az,{contentEditable:!1,borderRadius:"var(--box-border-radius)","data-selection-ring":"padded","data-selection-background":!0,"data-drag-handle":!0,py:"0.25em",position:"relative",transform:"translateY(0.25em)",children:(0,p.jsx)(aa.c,{backgroundColor:"var(--body-color-muted)",height:"0.125em",opacity:1})})}),a1=/^(---|___|-)/,a2=l.bP.create({name:"divider",group:"block cardNotesBlock",atom:!0,selectable:!0,draggable:!0,parseHTML:()=>[{tag:'hr[class="divider"]'}],renderHTML(e){let{HTMLAttributes:t}=e;return["hr",(0,l.KV)(t,{class:"divider"})]},addNodeView:()=>(0,c.gu)(a0),addInputRules(){return[(0,aZ.wN)({find:a1,type:this.type})]}});var a4=n(75669),a5=n(12567),a6=n(32133),a3=n(91151),a8=n(6657),a7=n(75678),a9=n(13320),re=n(34252),rt=n(33919),rn=n(80215),ri=n(55037);let ra=(0,R.memo)(e=>{let{theme:t}=e,n=(0,ri.ZI)(t),i=(0,L.fQ)(t),a=(0,L.VH)(t);return(0,p.jsx)(h.az,{as:"svg",width:"0",height:"0",sx:n,children:(0,p.jsxs)("defs",{children:[(0,p.jsx)(rr,{theme:t}),(0,p.jsx)(ro,{theme:t}),(0,p.jsx)(rs,{color:(0,L.Ik)(a),id:"theme-accent-color-fill"}),(0,p.jsx)(rs,{color:(0,L.Ik)(i),id:"theme-body-color-fill"}),(0,p.jsx)(rd,{theme:t})]})})});ra.displayName="ThemeSVGDefs";let rr=(0,R.memo)(e=>{let{theme:t}=e,n=(0,L.VH)(t);return"linear-gradient"!==n.type?null:(0,p.jsx)(rl,{gradient:n,id:"theme-accent-gradient-linear"})});rr.displayName="ThemeAccentGradientLinearDef";let ro=(0,R.memo)(e=>{let{theme:t}=e,n=(0,L.VH)(t),i=(0,re.M)(t);if("linear-gradient"!==n.type)return null;let a=(0,L.Mw)(t),r=(0,L.Oq)(t),o="semi"===i.shapeFill?(0,rt.nz)(n,r,.5):n,l=(0,rt.Hh)(o,a?.25:.9);return l?(0,p.jsx)(rl,{gradient:l,id:"theme-accent-background-gradient-linear"}):null});ro.displayName="ThemeAccentBackgroundGradientLinearDef";let rl=(0,R.memo)(e=>{let{gradient:t,id:n}=e,i=t.angle*Math.PI/180,a=50+50*Math.cos(i+Math.PI),r=50+50*Math.sin(i+Math.PI),o=50+50*Math.cos(i),l=50+50*Math.sin(i);return(0,p.jsx)("linearGradient",{id:n,x1:"".concat(a,"%"),y1:"".concat(r,"%"),x2:"".concat(o,"%"),y2:"".concat(l,"%"),children:t.stops.map((e,t)=>{let{color:n,position:i}=e;return(0,p.jsx)("stop",{offset:"".concat(i,"%"),stopColor:n},t)})})});rl.displayName="LinearGradientDef";let rs=(0,R.memo)(e=>{let{color:t,id:n}=e;return t?(0,p.jsxs)("filter",{id:n,children:[(0,p.jsx)("feFlood",{floodColor:t,result:"flood"}),(0,p.jsx)("feComposite",{in:"flood",in2:"SourceAlpha",operator:"in"})]}):null});rs.displayName="ColorFillDef";let rd=(0,R.memo)(e=>{let{theme:t}=e,n=(0,re.M)(t);return(0,p.jsx)(p.Fragment,{children:"soft3d"===n.shapeShadow&&(0,p.jsx)(rn.Y,{theme:t,id:"theme-shape-shadow"})})});rd.displayName="ThemesV3SVGDefs";var rc=n(64162),ru=n(90397);let rp=e=>{if(e.state.selection instanceof tQ.nh&&(0,ru.J)(e.state.selection.node)){e.chain().focus(e.state.selection.from).blur().run();return}return e.commands.blur()};var rh=n(44507),rm=n(82354),rg=n(87825),rx=n(22071),rf=n(46343),rv=n.n(rf);let rb=e=>(0,el.GV)(t=>{if((0,em.wC)(t)!==eg.w.SLIDE_VIEW)return null;let n=(0,em.FI)(t);if(!n||!(null==n?void 0:n.cardId))return null;let[i]=(0,l.xe)(e.state.doc,e=>(0,tx.jg)(e)&&e.attrs.id===n.cardId);if(!i)return console.warn("[usePresentingCardBackground] Unexpectedly couldnt find presentingCard ".concat(n.cardId)),null;let a=(0,Z.TK)(e.state.doc.resolve(i.pos+1),e=>(0,tx.jg)(e)&&e.attrs.background&&!e.attrs.background.inside).pop();return a?a.node.attrs.background:(console.warn("[usePresentingCardBackground] Unexpectedly couldnt find card at pos ".concat(i.pos)),null)},rv());var ry=n(14968),rw=n(39907);let rj=(0,iC.P)(h.az),rk=(e,t)=>{let n=!!(e&&t),i=!!(e&&!t),a=!!(!e&&t),r=(0,R.useRef)(n);return(0,R.useEffect)(()=>{r.current=n},[n,!!(!e&&!t)]),[i||a?r.current:n,n]},rC=e=>{let{editor:t,node:n,updateAttributes:i}=e,a=(0,a6.d4)(em.wC),r=(0,el.GV)(em.nD),o=(0,a6.d4)(em.cS),l=(0,a6.d4)(em.$i),s=(0,el.GV)(em.SJ),d=a===eg.w.SLIDE_VIEW,u=rb(t),{background:m}=n.attrs,g=(0,ep.FX)(),x=(0,rc.t)(),[f,v]=rk(d,l);(0,R.useEffect)(()=>{!n.attrs.docId&&t.gammaDocId&&i({...n.attrs,docId:t.gammaDocId})},[n.attrs,t,i]);let b=(0,a9.S)(s,r),y=(0,L.Mw)(s),w=(0,t_.fS)(s,m),j=(0,t_.FD)(w,y,t.isThumbnail?ex.p7:void 0),k=(0,t_.FD)(d&&u&&u.type!==X.h.NONE?u:w,y,t.isThumbnail?ex.p7:void 0);console.debug("%c[DocComponent] Doc is rerendering","background-color: chartreuse",{isPresentModeReady:v,isPresentModeReadyLagging:f,presentingCardId:l});let C=(0,rx.Tq)(),S={width:"100%",'[data-animate-value="doc"]':{display:f?"none":void 0},...C.src&&d?{"--logo-push-x":"".concat(C.width+2*C.paddingX,"px"),"--logo-push-y":"".concat(C.height+2*C.paddingY,"px")}:void 0},A=(0,R.useCallback)(e=>{let n=e.target;return(!n.closest(".".concat(rm.p$))||!!n.getAttribute("data-outside-card-body"))&&(rp(t),!0)},[t]);(0,R.useEffect)(()=>a8.WC.on("keydown","DOC_BLUR",e=>!!(0,a5.Ay)("Esc")(e)&&!!t.isFocused&&(t.commands.blur(),e.preventDefault(),!0)),[t]);let I=(0,ep.UT)("comment"),E=(0,a3.U)(!g),_=!g&&!d&&!E,M=(0,eb.u)("insertWidgetBottom")?rg.PX:rg.C9;return(0,p.jsxs)(c.VR,{as:"div","data-testid":"doc-node-root",style:{height:"100%"},children:[(0,p.jsx)(a7.m,{theme:s}),(0,p.jsx)(ra,{theme:s}),(0,p.jsx)(h.az,{onMouseDown:A,h:"100%",children:(0,p.jsxs)(et.s,{className:"doc-content-wrapper",direction:"column",align:"center",pos:"relative",pb:g||d||!I?"0px":o?rg.bc:M,sx:b,onDragOver:eZ.JO,minH:rw.env.STORYBOOK?"auto":"calc(var(--100vh) - var(--editor-padding-top, 0px))",children:[(0,p.jsx)(rS,{...j}),_&&(0,p.jsx)(et.s,{alignSelf:"start",pos:"absolute",inset:"0",h:"100%",children:(0,p.jsx)(rx.e5,{})}),(0,p.jsx)(a4.N,{children:(0,p.jsx)(rj,{className:"motion-present-mode-bg","data-doc-background-element-present-mode":!0,"data-export-master":!0,position:"fixed",zIndex:ry.$.presentBg,top:0,left:0,right:0,h:"100%",initial:{opacity:0},animate:{opacity:1},exit:{opacity:1},visibility:v?"visible":"hidden",transition:rm.Dt,css:nD.D1?void 0:{scrollbarGutter:"stable",overflow:"scroll"},...k},"presenting-background-"+l)}),(0,p.jsx)(et.s,{sx:S,justify:"center",className:(0,z.cx)("document-content",d?"is-present-mode":"is-doc-mode"),css:{"--viewport-scale-factor":"".concat(x)},pt:"var(--doc-padding-top)",children:(0,p.jsx)(c.$p,{style:{width:"100%"}})}),g&&(0,p.jsx)(rx.cT,{})]})})]})},rS=e=>{let t=(0,ep.FX)(),n=(0,rh.mG)()||t,i=(0,rh.mG)()?{style:{touchAction:"none",display:"contents"}}:{};return(0,p.jsx)(et.s,{"data-doc-background-element":!0,position:"absolute",w:"var(--editor-width)",h:"100%",contentEditable:!1,userSelect:"none",clipPath:"inset(0)",top:0,left:0,...i,children:(0,p.jsx)(h.az,{"data-testid":"doc-background",width:"100%",height:"100%",position:"fixed",...n?{top:"0px"}:{},...e})})};var rA=n(58335);let rz=l.bP.create({name:"doc",topNode:!0,content:"document"}),rI=l.bP.create({name:"document",content:"card+",isolating:!0,defining:!0,selectable:!1,addAttributes:()=>({aiOptions:{default:rA.C.aiOptions,...(0,Z.tb)("aiOptions")},docId:{},background:{default:rA.C.background,...(0,Z.tb)("background")},docFlags:{default:rA.C.docFlags,...(0,Z.tb)("docFlags")},format:{},customCode:{default:rA.C.customCode,...(0,Z.tb)("customCode")},settings:{default:rA.C.settings,...(0,Z.tb)("settings")},generateStatus:{default:rA.C.generateStatus},generateInfo:{default:rA.C.generateInfo,...(0,Z.tb)("generateInfo")}}),addCommands:()=>({updateDocumentSettings:e=>t=>{let{commands:n}=t;return n.updateNestedAttributesAtPos(0,{settings:e})}}),addNodeView:()=>(0,c.gu)(rC,{update:u.z0,ignoreMutation:e=>{let{mutation:t}=e,n=t.target instanceof HTMLElement?t.target:t.target.parentElement,i="selection"!==t.type&&rR(n);return console.debug("[Document.ignoreMutation] isMutationOutsideDocContent:",i),!!i}}),parseHTML:()=>[{tag:"div[class=gamma-doc]"}],renderHTML(e){let{HTMLAttributes:t}=e;return["div",(0,l.KV)(t,{class:"gamma-doc"}),0]}}),rR=e=>{let t=null==e?void 0:e.parentElement;return!!t&&!t.closest(".document-content")};var rE=n(69771),rL=n(97331),r_=n.n(rL),rM=n(15333),rN=n(89565),rT=n(474),rP=n(63915),rO=n(48365),rD=n(57036);class rF{destroy(){this.handlers.forEach(e=>{let{name:t,handler:n}=e;return this.editorView.dom.removeEventListener(t,n)})}update(e,t){null!=this.cursor&&t.doc!=e.state.doc&&(this.cursor.pos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){var t,n,i,a,r;(((null==e?void 0:e.pos)||null)!=(null===(t=this.cursor)||void 0===t?void 0:t.pos)||(null==e?void 0:e.type)!=(null===(n=this.cursor)||void 0===n?void 0:n.type)||(null==e?void 0:e.side)!=(null===(i=this.cursor)||void 0===i?void 0:i.side))&&(this.cursor=e,null==e?(null===(r=this.element)||void 0===r||null===(a=r.parentNode)||void 0===a||a.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){var e;let t,n;if(null==this.cursor||!this.editorView)return;let i=this.editorView.state.doc.resolve(this.cursor.pos),a,r=()=>"";if("gallery"==this.cursor.type&&(null===(e=this.cursor.node)||void 0===e?void 0:e.type.name)!=="gallery")a=this.cursor.rect,r=()=>e_.Ru._({id:"pl+vw2"});else if("blankRect"==this.cursor.type)a=this.cursor.rect,r=()=>"";else if("smartLayoutVariant"==this.cursor.type)a=this.cursor.rect,r=()=>e_.Ru._({id:"hErHGD"});else if("column"==this.cursor.type||"gallery"==this.cursor.type||"smartLayout"==this.cursor.type){let e=this.cursor.rect;if(!e)return;let t="right"==this.cursor.side||"bottom"==this.cursor.side,n=t?i.nodeAfter:i.nodeBefore,r=n&&((0,rT.NJ)(n)||(0,rP.q)(n))?0:this.width;if("right"==this.cursor.side||"left"==this.cursor.side){let n=t?e.right+r:e.left-r;a={top:e.top,bottom:e.bottom,left:n-this.width/2,right:n+this.width/2}}else{let n=t?e.bottom+r:e.top-r;a={left:e.left,right:e.right,top:n-this.width/2,bottom:n+this.width/2}}}else if(!i.parent.inlineContent){let e=i.nodeBefore,t=i.nodeAfter;if(e||t){let n=this.editorView.nodeDOM(this.cursor.pos-(e?e.nodeSize:0));if(!n||!(n instanceof Element))return;let i=n.getBoundingClientRect(),r=e?i.bottom:i.top;e&&t&&(r=(r+this.editorView.nodeDOM(this.cursor.pos).getBoundingClientRect().top)/2),a={left:i.left,right:i.right,top:r-this.width/2,bottom:r+this.width/2}}}if(!a){let e=this.editorView.coordsAtPos(this.cursor.pos);a={left:e.left-this.width/2,right:e.left+this.width/2,top:e.top,bottom:e.bottom}}let o=this.editorView.dom.offsetParent;if(this.element||(this.element=o.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color),o&&(o!=document.body||"static"!=getComputedStyle(o).position)){let e=o.getBoundingClientRect();t=e.left-o.scrollLeft,n=e.top-o.scrollTop}else t=-pageXOffset,n=-pageYOffset;this.element.style.left=a.left-t+"px",this.element.style.top=a.top-n+"px",this.element.style.width=a.right-a.left+"px",this.element.style.height=a.bottom-a.top+"px",this.element.dataset.type=this.cursor.type,this.element.innerHTML=r()}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){var t,n,i,a,r,o,l,s,d,c;if(!this.editorView.editable)return;let u=(0,rM.nA)(this.editorView,e,null===(t=this.editorView.dragging)||void 0===t?void 0:t.slice);if(u){this.setCursor({...u,type:"blankRect"}),this.scheduleRemoval(5e3);return}let p=(0,rO.fc)(this.editorView,e,null===(n=this.editorView.dragging)||void 0===n?void 0:n.slice);if(p){this.setCursor({...p,type:"blankRect"}),this.scheduleRemoval(5e3);return}if((0,rN.Vk)(this.editorView,e,null===(i=this.editorView.dragging)||void 0===i?void 0:i.slice)){this.scheduleRemoval(20);return}let h=(0,aK.tz)(this.editorView,e,null===(a=this.editorView.dragging)||void 0===a?void 0:a.slice,!this.editorView.dragging);if(h){this.setCursor({...h,type:"gallery"}),this.scheduleRemoval(5e3);return}let m=(0,rT.ds)(this.editorView,e,null===(r=this.editorView.dragging)||void 0===r?void 0:r.slice);if(m){this.setCursor({...m,type:"column"}),this.scheduleRemoval(5e3);return}let g=(0,rM.ZL)(this.editorView,e,null===(o=this.editorView.dragging)||void 0===o?void 0:o.slice);if(g){this.setCursor({...g,type:"blankRect"}),this.scheduleRemoval(5e3);return}let x=(0,rO.TS)(this.editorView,e,null===(l=this.editorView.dragging)||void 0===l?void 0:l.slice);if(x){this.setCursor({...x,type:"smartLayoutVariant"}),this.scheduleRemoval(5e3);return}let f=(0,rO.eL)(this.editorView,e,null===(s=this.editorView.dragging)||void 0===s?void 0:s.slice);if(f){this.setCursor({...f,type:"smartLayout"}),this.scheduleRemoval(5e3);return}let v=(0,nk.M7)(this.editorView,e,null===(d=this.editorView.dragging)||void 0===d?void 0:d.slice);if(v){this.setCursor({pos:v.pos,type:"default"}),this.scheduleRemoval(5e3);return}let b=(0,rD.M)(this.editorView,e,null===(c=this.editorView.dragging)||void 0===c?void 0:c.slice);null===b?this.setCursor(null):(this.setCursor({pos:b,type:"default"}),this.scheduleRemoval(5e3))}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){e.target!=this.editorView.dom&&this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}constructor(e,t){this.cursor=null,this.element=null,this.timeout=null,this.editorView=e,this.width=t.width||1,this.color=t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(t=>{let n=e=>this[t](e);return e.dom.addEventListener(t,n),{name:t,handler:n}}),this.dragover=r_()(this.dragover,100,{trailing:!1}).bind(this)}}let rH=l.YY.create({name:"dropCursor",addOptions:()=>({color:"currentColor",width:1,class:null}),addProseMirrorPlugins(){return[function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new tQ.k_({key:new tQ.hs("dropCursor"),view:t=>new rF(t,e)})}(this.options)]}}).configure({color:"var(--chakra-ring-color)",width:3,class:"ProseMirror-dropcursor"});var rW=n(45363),rB=n(45905);let rV=e=>{let{svg:t,isDark:n,font:i}=e,a=(0,R.useMemo)(()=>(0,rB.k)(n),[n]),r=(0,R.useMemo)(()=>(0,rB.I)(i),[i]);return t?(0,p.jsx)(h.az,{dangerouslySetInnerHTML:{__html:t},"data-testid":"drawing-svg",sx:{svg:{width:"100%",height:"auto",text:r,...a}}}):null};var rG=n(43909),rU=n(56632);let rK=["tl-centered-g"],rq=async e=>{let t=await e.getSvg(e.shapes.map(e=>e.id),{padding:1});if(t)return rK.forEach(e=>{var n;null===(n=t.querySelector(".".concat(e)))||void 0===n||n.classList.remove(e)}),t.querySelectorAll(":not(mask)[id]").forEach(e=>e.removeAttribute("id")),t},rJ=e=>{let{isOpen:t,isEditable:n,onClose:i,font:a,isDark:r,isDrawingEditorActive:o,setDrawingEditorActive:l,...s}=e,{node:d,updateAttributes:c}=s,{page:u,assets:h}=d.attrs,[m,g]=(0,R.useState)();(0,R.useEffect)(()=>{(0,aH.IN)(m,u,h)},[u,h,m,c]);let x=(0,R.useCallback)(e=>{g(e),window.tldrawEditor=e,(0,aH.Wp)(e,!0)},[]),f=(0,R.useCallback)(async()=>{if(!m)return;let e=await rq(m);if(!e)return;c({svg:e.outerHTML});let t=JSON.stringify({page:m.document.pages.page,assets:m.document.assets});console.debug("[DrawingEditor] Generated SVG",{svgSize:e.outerHTML.length,jsonSize:t.length,svgEl:e})},[m,c]),v=(0,R.useCallback)(()=>{m&&c({page:m.document.pages.page,assets:m.document.assets})},[c,m]),b=(0,aL.lW)(v,500),y=(0,R.useCallback)(()=>{n&&f(),l(!1),i()},[i,f,l,n]);return(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)(eE._s,{placement:"bottom",onClose:y,isOpen:t,trapFocus:!0,isFullHeight:!0,returnFocusOnClose:!1,children:[(0,p.jsx)(eE.QP,{}),(0,p.jsxs)(eE.zj,{borderTopRadius:"xl",h:"calc(var(--100vh) - 24px)",onAnimationComplete:e=>{"enter"==e&&l(!0)},transition:{enter:{duration:.4}},children:[(0,p.jsx)(eE.ys,{p:0,h:"100%",overflow:"hidden","data-testid":"drawing-editor-body",children:o?(0,p.jsx)(rU.UG,{readOnly:!n,showPages:!1,onMount:x,onChangePage:n?b:void 0,autofocus:!1,isDark:r,font:a}):(0,p.jsx)(et.s,{align:"center",justify:"center",w:"100%",h:"100%",children:(0,p.jsx)(ad.y,{size:"xl"})})}),(0,p.jsx)(eE.s1,{zIndex:2,backgroundColor:"white","data-testid":"drawing-editor-close"})]})]})})},r$=(0,iC.P)(h.az),rY=e=>{let{node:t,updateAttributes:n,selected:i,editor:a,getPos:r,decorations:o}=e,{width:l,meta:s,id:d,horizontalAlign:c,svg:u,page:g}=t.attrs,x=(0,el.GV)(em.Cl),f=(0,el.GV)(em.Ik),v=(0,ep.CJ)(a),b=x&&v&&f,y=(0,el.GV)(em.Xu),w=!!y&&y===d,[j,k]=(0,R.useState)(!1),C=(0,el.GV)(em.SJ),{isDark:S}=(0,rG.mm)(C),A=(0,ri.ZI)(C)["--body-font"],{ref:z,setIsResizing:E,resizeableSx:L,onLayoutAnimationStart:_,onLayoutAnimationComplete:M}=(0,ae.Y3)(a),N=(0,R.useCallback)(()=>{(0,aH.CD)(d,!0)},[d]),T=(0,R.useCallback)(()=>{a.chain().setNodeSelection(r()).focus().run()},[a,r]),P=(0,R.useCallback)(()=>{(0,aH.CD)(null,!1)},[]),O=(0,R.useCallback)((e,i)=>{n({...t.attrs,fullWidthBlock:void 0===i?t.attrs.fullWidthBlock:i,...e})},[t.attrs,n]),D=l||(null==s?void 0:s.width),F=!u,H=g&&Object.keys(g.shapes).length>0,{isFullWidth:W}=(0,aF.D)(o),B=(0,i3.yp)(W?"center":c);return(0,p.jsx)(m.u,{...e,as:"div",children:(0,p.jsxs)(et.s,{w:"100%",className:i8.S,css:B,sx:L,direction:"column",_focusWithin:{shadow:"outline"},children:[(0,p.jsxs)(r$,{ref:z,className:"drawing",borderRadius:"var(--box-border-radius)","data-content-reference":!0,"data-selection-ring":!0,"data-selection-background":!0,w:W?"100%":D?"calc(".concat(D," * var(--font-size) / 16)"):"100%",maxW:"100%",h:"auto",position:"relative",layout:!0,layoutDependency:c,transition:{duration:.15},onLayoutAnimationStart:_,onLayoutAnimationComplete:M,minH:F?"6em":"auto","data-drag-handle":!0,children:[b&&i&&!W&&(0,p.jsx)(ae.u4,{imageWrapperRef:z,setIsResizing:E,updateResizeAttrs:O,refreshDeps:[t.attrs]}),!j&&(0,p.jsx)(rV,{font:A,svg:u,isDark:S}),b&&!w&&!F&&(0,p.jsx)(h.az,{cursor:"default",position:"absolute",inset:"0",zIndex:"1",onClick:T,onDoubleClick:N}),F&&(0,p.jsxs)(nN.T,{spacing:3,justify:"center",contentEditable:!1,color:"gray.400",h:32,backgroundColor:"blackAlpha.50",borderRadius:"var(--box-border-radius)","data-testid":"drawing-placeholder",children:[(0,p.jsx)(I.g,{size:"2x",icon:eq.qTS}),x&&(0,p.jsx)(n3.$,{size:"xs",onClick:N,children:H?"Open diagram":"Add diagram"})]})]}),w&&(0,p.jsx)(rJ,{...e,isOpen:w,isEditable:x,onClose:P,isDark:S,font:A,isDrawingEditorActive:j,setDrawingEditorActive:k})]})})},rQ=new tQ.hs("UniqueMediaId"),rX=n5.S.extend({name:"UniqueDrawingId"}).configure({attributeName:"id",types:["drawing"],initialValue:aH.rZ,filterTransaction:nw.kz,pluginKey:rQ}),rZ=l.bP.create({name:"drawing",group:"block",atom:!0,selectable:!0,draggable:!0,addAttributes:()=>({id:(0,n6.e)(aH.rZ),page:{...(0,Z.tb)("page")},assets:{...(0,Z.tb)("assets"),default:{}},meta:{...(0,Z.tb)("meta"),default:{}},fullWidthBlock:{default:!1},width:{},svg:{}}),parseHTML(){return[{tag:"div[class=drawing]"},{tag:"tldraw",getAttrs:e=>{try{let t=new rW.mf,n=JSON.parse(e.innerHTML);return t.insertContent(n,{select:!1}),{page:t.document.pages[t.currentPageId],assets:t.assets}}catch(t){return console.error("(caught) Error parsing Tldraw paste",t,e.innerHTML),!1}}},{tag:"drawing[bookmark]",getAttrs:(0,ee.Ll)(this.storage)}]},addStorage:ee.xu,renderHTMLforAI(e){let{node:t}=e;return["drawing",{bookmark:(0,ee.vL)(this.storage,t)}]},renderHTML(e){let{HTMLAttributes:t}=e;return["div",(0,l.KV)(t,{class:"drawing"})]},addCommands(){this.name;let e=e=>{let{selection:t}=e;return t instanceof tQ.nh&&("drawing"===t.node.type.name||"diagram"===t.node.type.name)?t.node:void 0};return{editSelectedDrawingBlock:()=>t=>{let{state:n}=t,i=e(n);return i&&(0,el.KA)().dispatch((0,em.v5)({drawingId:i.attrs.id})),!0}}},addExtensions:()=>[rX],addNodeView:()=>(0,c.gu)(rY,{update:u.z0})}),r0=l.YY.create({name:"dynamicNodes",extendNodeSchema(e){var t;return{dynamic:null!==(t=(0,l.gk)((0,l.iI)(e,"dynamic",e)))&&void 0!==t&&t}}}),r1=l.YY.create({name:"fixRequiredAttrs",onBeforeCreate(){Object.values(this.editor.schema.nodes).forEach(e=>{Object.values(e.attrs||{}).forEach(e=>{void 0===e.default&&(e.hasDefault=!1)})})}});var r2=n(30138),r4=n(20277),r5=n(20284),r6=n(27649),r3=n(69180),r8=n(87809),r7=n.n(r8);let r9=e=>{if("footnote"!==e.$anchor.doc.type.name&&!e.empty&&!(0,r3.uI)(e)&&(0,l.eE)(e)){let e=(0,r3.bk)();if(!e)return;let t=document.querySelector('[data-footnote-popover-id="'.concat(e,'"] .ProseMirror'));t&&t.contains(document.activeElement)||(0,r3.Wj)(null,!1)}},oe=(e,t,n,i)=>{if(!e.some(e=>e.docChanged))return;let{doc:a}=n,r=[],o=[];a.nodesBetween(0,n.doc.content.size,(e,t,n)=>{"footnote"===e.type.name&&r.push({from:t,to:t+e.nodeSize,node:e,parent:n}),e.marks.forEach(i=>{"footnoteLabel"===i.type.name&&o.push({from:t,to:t+e.nodeSize,mark:i,parent:n})})}),o.filter(e=>{let{mark:t,parent:n}=e;return!r.find(e=>{let{node:i,parent:a}=e;return i.attrs.noteId===t.attrs.noteId&&a===n})}).forEach(e=>{let{from:t,to:n,mark:a}=e;return i.removeMark(t,n,a)});let s=e=>(0,l.I2)("footnoteLabel",n.schema).create({noteId:e});o.filter(e=>{let{mark:t}=e;return!t.attrs.noteId}).forEach(e=>{let{mark:t,from:n,to:a}=e,l=r.find(e=>{let{node:t,from:n}=e,i=n>=a,r=!o.find(e=>{let{mark:n}=e;return n.attrs.noteId==t.attrs.noteId});return i&&r});l&&i.removeMark(n,a,t).addMark(n,a,s(l.node.attrs.noteId))}),Object.entries(r7()(r,e=>{let{node:t}=e;return t.attrs.noteId})).forEach(e=>{let[t,n]=e;if(1==n.length||!t)return;let a=o.filter(e=>{let{mark:n}=e;return n.attrs.noteId===t});n.slice(1).forEach((e,t)=>{let{from:n}=e,r=(0,r3.pN)();i.setNodeMarkup(n,void 0,{noteId:r});let o=a[t+1];o&&(i.removeMark(o.from,o.to,o.mark),i.addMark(o.from,o.to,s(r)))})})},ot=new tQ.k_({key:new tQ.hs("footnote"),appendTransaction:(e,t,n)=>{let{selection:i}=n;i.eq(t.selection)||r9(i);let a=n.tr;return((0,nj.z)(e,t,n,a),oe(e,t,n,a),a.docChanged)?(console.debug("[FootnotePlugin] Applied steps",a.steps),a):null}});var on=n(19098),oi=n(64444),oa=n(40173),or=n(93185),oo=n(13945),ol=n(97864),os=n(63341),od=n(18528),oc=n(72821),ou=n(33683),op=n(57322),oh=n(65053),om=n(83707),og=n(54363),ox=n(5893),of=n(31201);let ov=(e,t,n)=>{let i=(0,el.GV)(em.DH);(0,of.j)({ref:n,enabled:!!(n&&i===t),handler(e){var t,n;(null===(t=e.target)||void 0===t?void 0:t.closest("[data-footnote-view]"))||(null===(n=e.target)||void 0===n?void 0:n.closest("[data-footnote-label]"))||a(!1)}});let a=(0,R.useCallback)(n=>{var a,r;let o=e.state.selection,s=(0,l.eE)(o)&&!o.empty,d=(null===(a=document.activeElement)||void 0===a?void 0:a.closest(".footnote-popover"))||!!(null===(r=document.activeElement)||void 0===r?void 0:r.closest("[data-in-editor-focus]")),c=void 0!==n?n:i!==t;d||(c&&!s?(0,r3.N3)(t,!0):!1===c&&(0,r3.N3)(t,!1))},[e.state.selection,i,t]);return{onClick:a}},ob=e=>{let{node:t,editor:n,innerEditor:i,selected:a}=e,{noteId:r}=t.attrs,o=(0,R.useRef)(null),l=(0,el.GV)(em.DH),s=(0,el.GV)(em.Cl),d=(0,nW.oR)(),{onClick:u}=ov(n,r,o);(0,R.useEffect)(()=>{i&&i.setEditable(s)},[s,i]);let m=!!l&&l===r,g=(0,R.useCallback)(()=>(0,r3.Wj)(r,!1),[r]);(0,R.useEffect)(()=>{if(!i)return;let e=()=>{setTimeout(()=>{(0,Z.We)(i)||g()},20)};return i.on("blur",e),()=>{i.off("blur",e)}},[i,g]);let x=!(0,tm.NO)(n),f=(0,R.useCallback)(()=>{x&&u()},[x,u]);return(0,p.jsx)(c.VR,{as:"span","data-testid":"footnote-nodeview-wrapper",children:(0,p.jsxs)(on.A,{isOpen:m,onClose:g,placement:"top",gutter:8,isLazy:!0,lazyBehavior:"unmount",autoFocus:!1,closeOnBlur:!1,closeOnEsc:!1,returnFocusOnClose:!1,children:[(0,p.jsx)(oi.W,{children:(0,p.jsx)(A.E,{as:"span",onClick:f,_after:{content:"counter(footnote)",counterIncrement:"footnote",position:"relative",bottom:"0.6em",fontSize:"0.8em",shadow:a&&x?"outline":void 0,borderRadius:"sm"},pl:"1px",className:"footnote",contentEditable:!1,"data-footnote-view":!0,cursor:x?"pointer":void 0})}),x&&(0,p.jsx)(oa.Z,{children:(0,p.jsxs)(or.h,{zIndex:"popover",shadow:"md",borderRadius:"md",border:"1px solid",borderColor:"gray.200",w:"500px",maxW:"100vw","data-footnote-popover-test-id":r,p:0,ref:o,children:[(0,p.jsx)(oo.R,{}),(0,p.jsx)(ol.e,{position:"relative",zIndex:"1",p:0,className:"footnote-popover","data-footnote-popover-id":r,children:d?(0,p.jsx)(oj,{...e,onClose:g}):(0,p.jsx)(ow,{...e,editable:s,onClose:g})}),(0,p.jsx)(h.az,{position:"absolute",top:"-".concat(8,"px"),bottom:"-".concat(8,"px"),left:0,right:0,zIndex:"0"})]})})]})})},oy=ei()({},oh.q,{".ProseMirror":{px:8,py:4,overflow:"hidden auto",maxH:"300px",maxW:"100%",borderRadius:"md"}}),ow=e=>{let{editor:t,innerEditor:n,mountEditor:i,destroyEditor:a,node:r,editable:o,getPos:s,onClose:d}=e,{noteId:c}=r.attrs,u=(0,R.useCallback)(()=>t.commands.convertNoteToCard(c),[t,c]),m=(0,R.useCallback)(()=>{t.chain().focus().setNodeSelection(s()).deleteSelection().run()},[t,s]);(0,R.useEffect)(()=>{if(i&&a)return i(),()=>{a()}},[i,a]);let g=(0,el.GV)(em.SJ),x=(0,ri.ZI)(g,"#FFFFFF");if(!n)return null;let f=(0,l.xe)(t.state.doc,e=>e.marks.some(e=>"footnoteLabel"===e.type.name&&e.attrs.noteId===c)).length>0;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(h.az,{className:rm._P,sx:oy,position:"relative",_focusWithin:{shadow:o?"outline":void 0},borderRadius:"md",css:x,children:[(0,p.jsx)(ox.$,{editor:n,className:"highlight-mask"}),(0,p.jsx)(om.G,{editor:n}),(0,p.jsxs)(tv.e,{size:"sm",colorScheme:"gray",variant:"ghost",position:"absolute",right:4,top:2,onMouseDown:eZ.Fw,spacing:0,children:[o&&(0,p.jsxs)(os.W,{autoSelect:!1,isLazy:!0,children:[(0,p.jsx)(od.I,{as:tb.K,icon:(0,p.jsx)(I.g,{icon:eq.Dwc}),minW:6,h:6,isRound:!0,backgroundColor:"white"}),(0,p.jsx)(oa.Z,{children:(0,p.jsxs)(oc.c,{"data-in-editor-focus":!0,zIndex:"dropdown",children:[f&&(0,p.jsx)(ou.D,{icon:(0,p.jsxs)("span",{className:"fa-layers fa-fw",children:[(0,p.jsx)(I.g,{icon:eR.vti,fixedWidth:!0}),(0,p.jsx)(I.g,{icon:eR.dmS,inverse:!0,transform:"shrink-8"})]}),onClick:u,children:(0,p.jsx)(eL.x6,{id:"p/s15o"})}),(0,p.jsx)(ou.D,{icon:(0,p.jsx)(I.g,{icon:eq.yLS,fixedWidth:!0}),color:"red.500",onClick:m,children:(0,p.jsx)(eL.x6,{id:"sHHbXH"})})]})})]}),(0,p.jsx)(tb.K,{"aria-label":e_.Ru._({id:"j+JKcM"}),icon:(0,p.jsx)(I.g,{icon:eq.GRI}),minW:6,h:6,isRound:!0,onClick:d,backgroundColor:"white"})]})]}),(0,p.jsx)(og.Ht,{editor:n})]})},oj=e=>{let{mountEditor:t,destroyEditor:n,onClose:i}=e,a=(0,R.useMemo)(()=>{if(t)return t()},[t]);(0,R.useEffect)(()=>{if(n)return()=>n()},[n]);let r=(0,el.GV)(em.SJ),o=(0,ri.ZI)(r,"#FFFFFF");return a?(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)(h.az,{className:rm._P,sx:oy,position:"relative",borderRadius:"md",css:o,children:[(0,p.jsx)(op.N,{editor:a}),(0,p.jsx)(tv.e,{size:"sm",colorScheme:"gray",variant:"ghost",position:"absolute",right:4,top:2,onMouseDown:eZ.Fw,spacing:0,children:(0,p.jsx)(tb.K,{"aria-label":e_.Ru._({id:"j+JKcM"}),icon:(0,p.jsx)(I.g,{icon:eq.GRI}),minW:6,h:6,isRound:!0,onClick:i,backgroundColor:"white"})})]})}):null};var ok=n(25845);let oC=l.CU.create({name:"footnoteLabel",inclusive:!1,excludes:"link underline",priority:Q.y.FootnoteLabel,parseHTML(){return[{tag:"span[class=footnote-label][bookmark]",getAttrs:(0,ee.Ll)(this.storage)},{tag:"span[class=footnote-label]"}]},renderHTML(e){let{HTMLAttributes:t}=e;return["span",(0,l.KV)(t,{class:"footnote-label"}),0]},renderHTMLforAI(e){let{mark:t}=e;return["span",{class:"footnote-label",bookmark:(0,ee.vL)(this.storage,t)},0]},addStorage:ee.xu,addAttributes:()=>({noteId:{rendered:!1}}),addProseMirrorPlugins(){return[(0,ok.f)(this,oS)]}}),oS=e=>{let{node:t,editor:n,children:i}=e,{noteId:a}=t.attrs,r=(0,nW.oR)(),{onClick:o}=ov(n,a),l=!(0,tm.NO)(n),s=(0,R.useCallback)(()=>{l&&o()},[l,o]);return(0,p.jsx)(c.VR,{as:"span",className:"footnote-label-view",children:(0,p.jsx)(A.E,{as:"span",className:"footnote-label",onClick:s,"data-footnote-label":!0,cursor:l?"pointer":void 0,children:r?i:(0,p.jsx)(c.$p,{as:"span"})})})},oA=/(?:^|\s)((?:\^)((?:[^^]+))(?:\^))$/,oz=l.bP.create({name:"footnote",content:"(block | footnoteBlock)+",group:"inline",atom:!0,inline:!0,priority:Q.y.Footnote,parseHTML(){return[{tag:"span[class=footnote]",getContent:(e,t)=>tt.FK.fromJSON(t,JSON.parse(e.getAttribute("data-content")||"{}"))},{tag:"div[class=imported-footnote]"},{tag:"footnote[bookmark]",getAttrs:(0,ee.Ll)(this.storage),getContent:(0,ee.cn)(this.storage)}]},addStorage:ee.xu,renderHTML(e){let{node:t,HTMLAttributes:n}=e;return["span",(0,l.KV)(n,{class:"footnote","data-content":JSON.stringify(t.content.toJSON())})]},renderHTMLforAI(e){let{node:t}=e;return["footnote",{bookmark:(0,ee.vL)(this.storage,t)}]},addAttributes(){return{noteId:{parseHTML:e=>{let t=(0,ee.Ll)(this.storage)(e);return t&&t.noteId?t.nodeId:(0,r3.pN)()},default:void 0}}},addNodeView:()=>nx(ob,{nodeName:"footnote",preventNodeOrExtensionTypes:["doc","document","card"]}),addInputRules(){var e;return[(e={find:oA,nodeType:this.type,markType:this.editor.schema.marks.footnoteLabel},new l.fV({find:e.find,handler:t=>{let{state:n,range:i,match:a}=t,{tr:r}=n,o=a[a.length-1],s=a[0],d=i.to;if(o){let t=s.search(/\S/),a=i.from+s.indexOf(o),c=a+o.length;if((0,l.hO)(i.from,i.to,n.doc).filter(t=>t.mark.type.excluded.find(n=>n===e.markType&&n!==t.mark.type)).filter(e=>e.to>a).length)return;c<i.to&&r.delete(c,i.to),a>i.from&&r.delete(i.from+t,a),d=i.from+t+o.length;let u=(0,r3.pN)();(0,r3.Wj)(u,!0);let p=e.nodeType.createAndFill({noteId:u},tt.FK.empty);r.insert(d,p),r.addMark(i.from+t,d,e.markType.create({noteId:u})),r.removeStoredMark(e.markType)}}}))]},addKeyboardShortcuts:()=>({Enter:e=>{let{editor:t}=e;if(!(0,r3.uI)(t.state.selection))return!1;let n=t.state.selection.node.attrs.noteId;return(0,r3.Wj)(n,!0),!0},Escape:()=>{let e=(0,r3.bk)();return!!e&&((0,r3.Wj)(e,!1),!0)},"Mod-Alt-f":e=>{let{editor:t}=e;return t.commands.toggleFootnote()}}),addProseMirrorPlugins:()=>[ot],addCommands:()=>({convertNoteToCard:e=>t=>{let{chain:n,state:i}=t,{doc:a}=i,r=(0,l.xe)(a,t=>"footnote"===t.type.name&&t.attrs.noteId===e);if(1!==r.length)throw Error("Found the wrong number of footnotes nodes: ".concat(r));let{node:o,pos:s}=r[0],d=(0,l.ve)(a.resolve(s-1),i.schema.marks.footnoteLabel,{noteId:o.attrs.noteId});if(!d)return console.error("Couldnt find the corresponding footnote mark",{node:o,pos:s}),!1;let c=a.textBetween(d.from,d.to),u={type:"card",attrs:{id:r6.Yv.generate()},content:[{type:"heading",attrs:{level:1},content:[{type:"text",text:c}]},...o.content.toJSON()]},p=new URL(window.location.href);p.hash="card-".concat(u.attrs.id),(0,U.wE)(u.attrs.id,!1);let h=a.content.size-1;return n().setTextSelection(d).unsetMark("footnoteLabel").setLink({href:p.toString()}).insertContentAt(h,u).command(e=>{let{tr:t}=e,n=(0,r4.s)(t.doc.resolve(h));return n&&t.setSelection(n),!0}).deleteRange({from:s,to:s+o.nodeSize}).focusDelayed().run()},toggleFootnote:()=>e=>{let{chain:t,state:n,editor:i}=e;if(i.isActive("footnoteLabel"))return t().toggleMark("footnoteLabel").focus().run();let a=(0,r3.pN)();return(0,r3.Wj)(a,!0),(0,r5.b)().push(()=>{var e,t;null===(e=(t=i.commands).forceHideBubbleMenu)||void 0===e||e.call(t,!0),oI(a)},"toggleFootnote"),t().setMark("footnoteLabel",{noteId:a}).insertContentAt(n.selection.to,{type:"footnote",attrs:{noteId:a},content:[{type:"paragraph"}]}).run()}})}),oI=e=>{let t=document.querySelector('[data-footnote-popover-id="'.concat(e,'"] .ProseMirror'));if(!t)return;t.focus();let n=window.getSelection();if(!n)return;let i=document.createRange();i.setStart(t,0),i.setEnd(t,0),n.removeAllRanges(),n.addRange(i)};var oR=n(33487),oE=n(34444),oL=n(98213);let o_=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,oM=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,oN=oL.Ay.extend({addInputRules(){return[(0,l.OX)({find:o_,type:this.type}),(0,l.OX)({find:oM,type:this.type})]}});var oT=n(92091),oP=n(22574),oO=n(68566),oD=n(17119),oF=n(92257),oH=n(12127),oW=n(7908),oB=n(94007),oV=n(40452);let oG=e=>{var t,n,i;let{variant:a,editor:r,node:o,getPos:s,deco:d}=e,c=o.attrs,{id:u}=c,{editImage:h,startRemoveBg:m,isRemovingBg:g,changeFocalPoint:x}=(0,tH.c)({editor:r,backgroundRemovalId:u,getPos:s}),f=null;try{f=r.state.doc.resolve(s())}catch(e){f=null}let v=f?(0,l.eL)(f,rP.M):null,{imageType:b,imageSlot:y}=a,w=(0,tO.l)(null!==(n=c.image)&&void 0!==n?n:void 0)&&y&&"image"===b,{toggleBuddyChatPanel:j,isBuddyChatPanelOpen:k}=(0,tD.C)(),{addColumnBefore:C,addColumnAfter:z,canChangeFocusPointAndRemoveBackground:E,hasImage:L,addDirection:_,parentVariant:M,cellOptions:N,handleDelete:T,selectParent:P,duplicateNode:O,updateAttributes:D}=(0,tH.m)({editor:r,node:o,parentNode:null==v?void 0:v.node}),F=(0,R.useMemo)(()=>L?[{key:"edit-image",label:"icon"===b?(0,p.jsx)(eL.x6,{id:"JE/4q/"}):(0,p.jsx)(eL.x6,{id:"9IrgTy"}),icon:eq.MT7,onClick:h},...w?[{key:"ask-ai",label:(0,p.jsx)(eL.x6,{id:"vKZEFh"}),icon:eR.p7g,onClick:()=>{k||j(),setTimeout(()=>{tP.j.emit("prefillMessage",{message:""})},200)}}]:[],...E?[{key:"remove-background",disabled:g,label:g?(0,p.jsx)(eL.x6,{id:"RdqLb7"}):(0,p.jsx)(eL.x6,{id:"ylbfBl"}),icon:eq.sAw,onClick:m},{key:"change-focus-point",label:(0,p.jsx)(eL.x6,{id:"BmxaoW"}),icon:eq.zTK,onClick:()=>x(u)}]:[],{divider:!0}]:[],[L,h,m,E,g,x,u]),H=(0,R.useMemo)(()=>(null==M?void 0:M.cellOptions.length)?null==M?void 0:M.cellOptions.map(e=>{var t,n;if(e.checkEnabled&&!e.checkEnabled(o.attrs))return null;let i=null!==(n=N[e.key])&&void 0!==n?n:null===(t=e.defaultValue)||void 0===t?void 0:t.call(e,{ctx:"menu"});return e.ControlMenu?e.ControlMenu(i,t=>{D(s(),{options:{...N,[e.key]:t}})},e):null}).filter(e=>null!==e):[],[N,s,o.attrs,null==M?void 0:M.cellOptions,D]),W=(0,tB.d)({editor:r,getPos:s,node:o,includeCut:!1,imageSrc:null===(t=c.image)||void 0===t?void 0:t.src}),B=null!==(i=d.index)&&void 0!==i?i:0;return{contextMenuItems:[{key:"title",title:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(A.E,{children:(0,p.jsx)(eL.x6,{id:"wIRP9h",values:{0:a.name()}})}),(0,p.jsxs)(S.z,{gap:1,children:[(0,p.jsx)(I.g,{icon:eq.qUw}),(0,p.jsx)(A.E,{children:(0,p.jsx)(eL.x6,{id:"y/5CE8",values:{0:B+1}})})]})]})},{divider:!0},...W,{divider:!0},...F,{key:"add-item-before",label:(0,p.jsx)(eL.x6,{id:"w7mkyz"}),icon:(0,p.jsx)(I.g,{icon:eq.UiS,rotation:"bottom"===_?void 0:270}),onClick:()=>C(s())},{key:"add-item-after",label:(0,p.jsx)(eL.x6,{id:"1e37Dl"}),icon:(0,p.jsx)(I.g,{icon:eq.UiS,rotation:"bottom"===_?180:90}),onClick:()=>z(s()+o.nodeSize)},{key:"duplicate",label:(0,p.jsx)(eL.x6,{id:"euc6Ns"}),icon:eq.jPR,onClick:()=>O(s()+o.nodeSize)},{divider:!0},...H.length?[...H,{key:"divider",divider:!0}]:[],{key:"edit-layout",label:(0,p.jsx)(eL.x6,{id:"UUpX+c"}),icon:eq.Hmw,onClick:()=>P(s())},{divider:!0},{key:"delete",label:(0,p.jsx)(eL.x6,{id:"cnGeoo"}),icon:eq.yLS,onClick:T,color:"red.500"}]}};var oU=n(88693);let oK=e=>{var t;let{node:n,decorations:i,editor:a,getPos:r}=e,o=a.state.selection,l=o.node&&!!(0,rP.M)(o.node),{options:s,...d}=n.attrs,u=(0,oV.fw)(i),g=(0,oU.B)(u.smartLayoutAttrs.variantKey),{Cell:x}=g,f=(0,el.GV)(em.SJ),v=(0,rO.aG)(u.smartLayoutAttrs,u.direction),{firstChildSize:b}=(0,T.P)(i),y=u.index===u.numCells-1,w=(0,el.GV)(em.nD),j=(0,eS.DM)(i),k="number"==typeof u.emphasizedIndex&&u.emphasizedIndex!==u.index,C=(0,R.useCallback)(()=>{let e=r(),t=a.state.doc.nodeAt(r());t&&a.commands.insertSmartLayoutCell(e+t.nodeSize)},[a,r]),S=g.addDirection?g.addDirection(v):"right",[z,E]=(0,oW.yz)(u.direction),L=(0,R.useCallback)(()=>{w&&a.commands.selectNodeAtPos(r())},[a,r,w]),_=d.image,M=(0,R.useCallback)(e=>{a.commands.updateNestedAttributesAtPos(r(),{image:ei()({},_,e,{meta:{has_transparency:!0}})})},[a,r,_]),{bgRemovalInProgress:P}=(0,ec._)({editor:a,id:d.id,src:null==_?void 0:_.src,updateAttributes:M}),{onOpenContextMenu:O,onCloseContextMenu:D,menuProps:F}=(0,eh.$)({editor:a,getPos:r}),{contextMenuItems:H}=oG({variant:g,editor:a,node:n,getPos:r,deco:u});return(0,p.jsxs)(m.u,{...e,children:[(0,p.jsx)(h.az,{display:"contents",position:"relative","data-spotlight-parent":!0,className:k?"smart-layout-cell-not-emphasized":"",onContextMenu:l?void 0:O,style:{...(0,i3.AS)(v.horizontalAlign||(null===(t=g.baseHorizontalAlign)||void 0===t?void 0:t.call(g,{dir:u.direction})),u.direction)},children:(0,p.jsxs)(x,{cellOptions:s,layoutOptions:v,theme:f,...u,...d,...e,firstChildSize:b,isFocused:j,selectCell:L,variant:g,dragHandle:(0,p.jsx)(N.A,{...e,handlePlacement:"top","data-testid":"smart-layout-cell-drag-handle",label:(0,p.jsx)(et.s,{direction:"column",align:"center",children:(0,p.jsx)(eL.x6,{id:"YkfVHA",components:{0:(0,p.jsx)(A.E,{color:"gray.500"})}})})}),children:[(0,p.jsx)(c.$p,{style:{maxWidth:"100%",wordBreak:"break-word"}}),w&&y&&(0,p.jsx)(et.s,{position:"absolute",..."bottom"===S?{bottom:-3,[E]:0,width:"100%",height:6,justify:"center"}:{[E]:-3,bottom:0,height:"100%",width:6,align:"center"},opacity:"0",transitionProperty:"opacity",transitionDuration:"normal",zIndex:"1",className:"add-button",children:(0,p.jsx)(eE.Tz,{label:(0,p.jsx)(eL.x6,{id:"NQ8llq"}),placement:"top",children:(0,p.jsx)(tb.K,{icon:(0,p.jsx)(I.g,{icon:eq.QLR}),"aria-label":e_.Ru._({id:"NQ8llq"}),position:"absolute",size:"xs",variant:"plain",isRound:!0,onClick:C,onMouseDown:eZ.Fw})})}),P&&w&&(0,p.jsx)(oB.Td,{removeBackground:P})]})}),(0,p.jsx)(ea.t,{isOpen:F.isOpen,onClose:D,menuItems:H,position:F.position,size:"small"})]})},oq=l.bP.create({name:"smartLayoutCell",content:"(block | smartLayoutBlock)+",isolating:!0,selectable:!1,containerHandle:!0,imageKeyPath:"image",accessoryImageKey:"image",addAttributes:()=>({id:(0,n6.e)(oH.z),options:{default:{},...(0,Z.tb)("options")},width:{default:null},image:{default:null,...(0,Z.tb)("image")},label:{default:null,parseHTML:e=>e.getAttribute("label")||e.getAttribute("number")}}),parseHTML(){return[{tag:"div[class=layout-item]"},{tag:"item"},{tag:"div[image-bookmark]",context:"smartLayout/",getAttrs:e=>{let t=e.getAttribute("image-bookmark");if(!t)return!1;let n=(0,ee.bi)(this.storage,t);return{...oJ(e),image:n}}},{tag:"div",context:"smartLayout/",getAttrs:e=>oJ(e)}]},renderHTML(e){let{HTMLAttributes:t}=e;return["div",(0,l.KV)(t,{class:"layout-item"}),0]},addStorage:ee.xu,renderHTMLforAI(e){let{node:t}=e,{image:n,options:i,...a}=t.attrs,r={};Object.keys(i).forEach(e=>{r[e]="string"==typeof i[e]?i[e]:JSON.stringify(i[e])});let o={...a,...r};return n?["div",o,["image.icon"===n.source?"icon":"img",{bookmark:(0,ee.vL)(this.storage,n)}],["div",0]]:["div",o,0]},addNodeView:()=>(0,c.gu)(oK,{update:u.z0})}),oJ=e=>{let t=e.dataset.image?JSON.parse(e.dataset.image):void 0,n=e.getAttribute("label")||e.getAttribute("number"),i=(0,oU.a)().find(t=>{var n,i;return t.htmlTag===(null===(n=e.parentElement)||void 0===n?void 0:n.tagName.toLowerCase())||t.key===(null===(i=e.parentElement)||void 0===i?void 0:i.tagName.toLowerCase())});return{image:t,label:n,options:((null==i?void 0:i.options.map(e=>e.key))||[]).reduce((t,n)=>{let i=e.getAttribute(n);if(i)try{t[n]=JSON.parse(i)}catch(e){t[n]=i}return t},{})}};var o$=n(94669),oY=n(13934);let oQ=e=>{let{node:t}=e,{verticalAlign:n}=t.attrs;return(0,p.jsxs)(c.VR,{className:"grid-cell",style:{position:"relative",justifyContent:n},"data-selection-ring":!0,children:[(0,p.jsx)(N.A,{handlePlacement:"top",...e,"data-testid":"column-drag-handle",label:(0,p.jsx)(et.s,{direction:"column",align:"center",children:(0,p.jsx)(eL.x6,{id:"zWdF4l",components:{0:(0,p.jsx)(A.E,{color:"gray.500"})}})})}),(0,p.jsx)(c.$p,{})]})},oX=l.bP.create({name:"gridCell",content:"(block | layoutBlock)+",definingAsContext:!0,isolating:!0,selectable:!1,containerHandle:!0,parseHTML:()=>[{tag:"div[class=column]"},{tag:"div",context:"gridLayout/"}],addAttributes:()=>({verticalAlign:null}),renderHTML(e){let{HTMLAttributes:t}=e;return["div",(0,l.KV)(t,{class:"column"}),0]},addNodeView:()=>(0,c.gu)(oQ,{update:u.z0})});var oZ=n(12443),o0=n(20265),o1=n(93090);let o2=e=>{let{doc:t}=e,n=[];return t.descendants((e,t)=>{if(e.type.name!==oY.BM)return;n.push(tX.NZ.node(t,t+e.nodeSize,{},{isLayoutDecoration:!0}));let i=e.attrs.colWidths;return e.forEach((e,a,r)=>{let o=t+1+a,l={isLayoutCellDecoration:!0,colWidth:i[r],colIndex:r};n.push(tX.NZ.node(o,o+e.nodeSize,{},l))}),!1}),tX.zF.create(t,n)};class o4{constructor(e=null){this.dragging=e}}let o5=new tQ.hs("layoutPlugin"),o6=e=>new tQ.k_({key:o5,state:{init:()=>new o4,apply:(e,t)=>t},appendTransaction:(e,t,n)=>{if(!e.some(e=>e.docChanged))return null;let i=e.find(e=>e.selectionSet),a=n.tr;if(n.doc.descendants((e,t)=>{if("gridLayout"===e.type.name&&1==e.childCount){let n=a.mapping.map(t);a.replaceWith(n,a.mapping.map(t+e.nodeSize),e.child(0).content).setMeta("annotationEvent",{type:"unwrap-node",pos:n})}}),!a.docChanged)return null;if(i){let e=i.selection.$from.depth-a.selection.$from.depth,t=(0,oO.n)(a.doc.resolve(i.selection.from-e));t&&a.setSelection(t)}return a},props:{decorations:e=>o2(e),handleDOMEvents:{drop(t,n){var i,a,r,o,l;let s=null===(i=t.dragging)||void 0===i?void 0:i.annotations;if(!o5.getState(t.state))return!1;let d=null===(a=t.dragging)||void 0===a?void 0:a.slice,c=null,u=null,p=(0,o1.p$)(n).filter(o1.KS);try{u=(0,rN.Vk)(t,n,d),c=(0,rT.ds)(t,n,d)}catch(e){return!1}try{let{selection:i}=t.state,a=!i.empty,h=null==d?void 0:d.content.toJSON(),m=[];if(p.length>0&&(h=(m=(0,o0.kT)(e,p)).map(e=>e.content)),!h)return!1;if((null===(r=h[0])||void 0===r?void 0:r.type)==="image"&&(null===(o=h[0].attrs)||void 0===o?void 0:o.resize)&&(u||c)&&(h[0].attrs.resize={}),(null==c?void 0:c.node.type.name)==="gridCell"){let{node:t,pos:i,side:r}=c,o="left"===r?i:i+t.nodeSize,d=(null===(l=h[0])||void 0===l?void 0:l.type)==="gridCell",u=null==s?void 0:s.origNodePos,p=u&&d?(0,rT.rP)(u,o,e):void 0,g=d?h:{type:"gridCell",content:h},x=e.chain().insertContentAt({from:o,to:o},g,{updateSelection:!1});return p&&x.updateNestedAttributesAtPos(p.parentPos,{colWidths:p.colWidths}),x.command(e=>{let{tr:t}=e;return a&&t.deleteSelection(),s&&t.setMeta("annotationEvent",{type:"drop",dragging:s,droppedBlockPos:o+(d?0:1)}),!0}).focusMapped(o,1).run(),m.length>0&&m.forEach(e=>{e.upload()}),n.preventDefault(),!0}if(!u&&!c)return;let{node:g,pos:x,side:f}=u||c;if(x>i.from&&x<i.to)return n.preventDefault(),!0;let v=(0,oZ.eq)({view:t,from:x,to:x+g.nodeSize,node:g}),{contentToInsert:b,focusOffset:y}=u?{contentToInsert:(0,oZ.Sm)({horizontalAlign:v,eventTarget:n.target,node:g,newContent:h,editor:e}),focusOffset:(0,oZ.Cn)({eventTarget:n.target,horizontalAlign:v,nodeSize:g.nodeSize,editor:e})}:{contentToInsert:(0,rN.wC)({side:f,pasteContent:h,node:g}),focusOffset:(0,rN.M5)({side:f,node:g})};e.chain().insertContentAt({from:x,to:x+g.nodeSize},b,{updateSelection:!1}).command(n=>{let{tr:i}=n;if(a){let e=t.state.selection,n=i.mapping.map(e.from),a=i.mapping.map(e.to);i.delete(n,a)}if(s){let n="left"===f&&d?d.size:g.nodeSize,a=(0,oD.U5)({side:f,view:t,tr:i,dragging:s,dropPos:x,dropNode:g,leftContentSize:n});requestAnimationFrame(()=>{var t,n;null===(t=(n=e.commands).moveAnnotations)||void 0===t||t.call(n,a)})}return!0}).focusMapped(x,y).run(),m.length>0&&m.forEach(e=>{e.upload()})}catch(e){console.error("(caught) [LayoutPlugin] handleDrop error:",e)}return n.preventDefault(),!0}}}}),o3=new tQ.hs("layoutResizing");class o8{getActiveHandleAbs(e){return this.activeHandle?(0,tZ.d_)(e,this.activeHandle):null}reset(){return this.activeHandle=null,this.dragging=null,this}setHandle(e,t){return null===t.setHandle?this.activeHandle=null:this.activeHandle=(0,tZ.JO)(e,t.setHandle),this}setDragging(e){return this.dragging=e.setDragging,this}apply(e,t){let n=e.getMeta(o3);return n&&"setHandle"in n?this.setHandle(t,n):n&&"setDragging"in n?this.setDragging(n):n&&"reset"in n?this.reset():this}constructor(e=null,t=null){this.activeHandle=e,this.dragging=t}}let o7=e=>o3.getState(e.state),o9=(e,t)=>{e.dispatch(e.state.tr.setMeta(o3,{setHandle:t}))},le=(e,t)=>{e.dispatch(e.state.tr.setMeta(o3,{setDragging:t}))},lt=e=>{e.dispatch(e.state.tr.setMeta(o3,{reset:!0}))},ln=(e,t)=>{if(!e.editable||!t.target||t.target.closest(".column-resize-handle"))return;let n=o7(e);if(n.dragging)return;let i=function(e,t){var n;let i=e.posAtCoords({left:t.clientX,top:t.clientY});if(!i||-1===i.inside)return null;let a=e.domAtPos(i.inside);if(!a)return null;let r=a.node.childNodes[a.offset];if(!r)return null;let o=e.state.doc.resolve(i.inside);if((null===(n=o.nodeAfter)||void 0===n?void 0:n.type.name)!=="gridCell")return null;let{left:l,right:s}=r.getBoundingClientRect();if(t.clientX-l<=5){let t=e.state.doc.resolve(o.before(o.depth)),n=li((0,rT.Ob)(t),e=>e.pos===o.pos);return(null==n?void 0:n.pos)||null}return s-t.clientX<=5?o.pos:null}(e,t);i!==n.getActiveHandleAbs(e.state)&&o9(e,i)},li=(e,t)=>{for(let n=0;n<e.length;n++)if(t(e[n])){if(0===n)return null;return e[n-1]||null}return null},la=(e,t)=>{let n=e.domAtPos(t);return n.node.childNodes[n.offset].offsetWidth},lr=(e,t)=>{let{node:n,offset:i}=e.domAtPos(t.start()),a=n.childNodes[i];do if(a&&a.classList&&a.classList.contains("node-gridLayout"))break;while(a=a.parentNode);return a};var lo=n(15672);let ll=e=>{let{getPos:t,updateAttributes:n,editor:i,node:a}=e,r=i.state.doc.resolve(t()),o=(0,rT.Ob)(r);(0,R.useEffect)(()=>{o.length!==a.attrs.colWidths.length&&setTimeout(()=>{n({colWidths:(0,t5.I)(o.length)})},0)},[a,o,n])},ls=e=>{let{node:t,editor:n,getPos:i}=e,a=t.content.childCount,r=(0,el.GV)(em.Cl),o=(0,ep.FX)();ll(e);let l=a%2==0,s=Math.min((0,aE.h5)({base:1,sm:l?2:1,md:l?2:3,lg:4})||4,a),d=(0,R.useCallback)(()=>{n.commands.addLayoutCell(i())},[n,i]),u=a<oY.ZS&&r,h=o?"100%":(t.attrs.colWidths||[]).map(e=>"".concat(e,"%")).join(" ");return(0,p.jsx)(m.u,{...e,children:(0,p.jsxs)(lo.r,{className:(0,z.cx)("grid-col-controls",r&&"is-editable"),columns:s,gap:"var(--grid-border)",position:"relative",gridTemplateColumns:h,"data-selection-ring":!0,children:[(0,p.jsx)(c.$p,{className:"layout-content"}),(0,p.jsx)(N.A,{...e,label:e_.Ru._({id:"Szg6OU"}),"data-testid":"layout-drag-handle"}),(0,p.jsx)(et.s,{position:"absolute",top:"0",h:"100%",align:"center",w:6,insetInlineEnd:-3,className:"add-column",opacity:"0",transitionProperty:"opacity",transitionDuration:"normal",children:u&&(0,p.jsx)(eE.Tz,{label:(0,p.jsx)(eL.x6,{id:"AgvHni"}),placement:"top",children:(0,p.jsx)(tb.K,{icon:(0,p.jsx)(I.g,{icon:eq.QLR}),"aria-label":e_.Ru._({id:"AgvHni"}),position:"absolute",size:"xs",variant:"plain",isRound:!0,zIndex:"1",onClick:d})})})]})})},ld=l.bP.create({name:oY.BM,content:"gridCell{1, ".concat(oY.ZS,"}"),group:"cardBlock",defining:!1,isolating:!0,selectable:!1,priority:Q.y.Layout,containerHandle:!0,parseHTML:()=>[{tag:"div[class=columns]"},{tag:"columns"}],renderHTML(e){let{HTMLAttributes:t}=e;return["div",(0,l.KV)(t,{class:"columns"}),0]},renderHTMLforAI(e){let{node:t}=e;return["columns",{colWidths:JSON.stringify(t.attrs.colWidths)},0]},addAttributes(){let e="colWidths";return{colWidths:{default:[],parseHTML:t=>{let n=t.getAttribute("data-".concat(e));if(n)return JSON.parse(n);let i=0;return t.childNodes.forEach(e=>{"DIV"===e.nodeName&&i++}),(0,t5.I)(i)},renderHTML:t=>{let n=t[e];return n?{["data-".concat(e)]:JSON.stringify(n)}:{}}},fullWidthBlock:{default:!1}}},addNodeView:()=>(0,c.gu)(ls,{update:u.R$,ignoreMutation:oP.I}),addProseMirrorPlugins(){return[o6(this.editor),new tQ.k_({key:o3,state:{init:()=>new o8,apply:(e,t,n,i)=>t.apply(e,i)},props:{attributes:e=>null!==o3.getState(e).getActiveHandleAbs(e)?{class:"resize-cursor"}:{class:""},handleDOMEvents:{mousemove:(e,t)=>!!eb.of.get("layoutResizing")&&(ln(e,t),!1),mouseleave:e=>!!eb.of.get("layoutResizing")&&(!function(e){let t=o7(e);null===t.getActiveHandleAbs(e.state)||t.dragging||o9(e,null)}(e),!1),mousedown:(e,t)=>!!eb.of.get("layoutResizing")&&(!function(e,t){if(!e.editable)return;let n=o7(e),i=n.getActiveHandleAbs(e.state);if(null===i||n.dragging)return;let a=e.state.doc.resolve(i),r=[...a.node().attrs.colWidths],o=(0,rT.xK)(a),l=la(e,i),s=lr(e,a),d=s.offsetWidth;le(e,{startX:t.clientX,startWidth:l,colWidths:r,tableWidth:d,colIndex:o});let c=null;function u(t){window.removeEventListener("mouseup",u),window.removeEventListener("mousemove",p);let n=o7(e);if(n.dragging){if(null===c){le(e,null);return}if(n.dragging)try{let t=n.getActiveHandleAbs(e.state);(function(e,t,n){let i=e.state.doc.resolve(t).before(),a=e.state.tr.setNodeMarkup(i,void 0,{colWidths:[...n]}).setMeta("annotationEvent",{type:"update-node-attrs",pos:i});e.dispatch(a),function(e,t){let n=e.state.doc.resolve(t),i=lr(e,n).querySelector(".grid-col-controls");i&&(i.style.gridTemplateColumns="")}(e,t)})(e,t,c),le(e,null)}catch(t){lt(e)}c=null}}function p(t){if(!t.which)return u(t);let n=o7(e),i=n.getActiveHandleAbs(e.state);if(!n.dragging||null===i)return;let{colIndex:a,colWidths:r}=n.dragging,o=function(e,t){let{tableWidth:n}=e,i=t.clientX-e.startX;return t4()(100*i/n,0)}(n.dragging,t);(function(e,t){let n=e.querySelector(".grid-col-controls");n&&(n.style.gridTemplateColumns=t.map(e=>"".concat(e,"%")).join(" "))})(s,c=(0,t5.H0)(r,a,o,15)),(0,t6.i$)(s)}window.addEventListener("mouseup",u),window.addEventListener("mousemove",p),t.preventDefault()}(e,t),!1)},decorations(e){let t=o3.getState(e).getActiveHandleAbs(e);if(null!==t){let n=[];try{let i=document.createElement("div");return i.className="column-resize-handle",n.push(tX.NZ.widget(t+1,i)),tX.zF.create(e.doc,n)}catch(e){return console.error("(caught) layoutResizing error: ".concat(e.message)),tX.zF.empty}}},nodeViews:{}}})]},addCommands(){var e=this;return{useLayoutPreset:(e,t)=>n=>{let{dispatch:i,tr:a,commands:r,view:o}=n;if(!i)return!0;let s=(0,rT.DF)(a.doc.resolve(e));if(!s)return!0;let d=(0,rT.Ob)(s),c=t.length-d.length,u=[];for(;0!==c;){if(c<0){let t=(0,rT.nX)(a.doc.resolve(e),-1),n=t.nodeAfter;a.deleteRange(t.pos,t.pos+n.nodeSize),u=[...1===n.childCount&&(0,l.Op)(n.firstChild)?[]:n.content.toJSON(),...u],c++;continue}if(c>0){r.addLayoutCell(s.pos,!1),c--;continue}}a.setNodeAttribute(e,"colWidths",t);let p=(0,rT.nX)(a.doc.resolve(s.pos),-1);if(!p||!p.nodeAfter)return!0;let h=p.pos+p.nodeAfter.nodeSize-1;if(r.insertContentAt(h,u,{updateSelection:!1}),a.selection.from>h||a.selection.to>h){let e=a.doc.resolve(p.pos+1).end(),t=(0,oO.n)(a.doc.resolve(e),-1);t&&a.setSelection(t)}let m=lr(o,s);return m&&(0,t6.i$)(m),!0},insertLayout:e=>t=>{let{dispatch:n,commands:i}=t;if(!n)return!0;let a=Array.from(Array(e),e=>lc);return i.insertContentAndSelect({type:"gridLayout",attrs:{colWidths:(0,t5.I)(e)},content:a})},addLayoutCell:function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return n=>{let{chain:i,state:a}=n,r=a.doc.nodeAt(e);if(!r||r.type.name!==ld.name)return!1;let o=e+r.nodeSize-1,{colWidths:l}=r.attrs,s=l.length,d=t4()(100/(s+1),2),c=(0,t5.KJ)(l,s,d,15),u=i().insertContentAt(o,lc,{updateSelection:!1});return t&&u.selectInsertedNode(),u.command(t=>{let{tr:n}=t;return n.setNodeAttribute(e,"colWidths",c),!0}).run(),!0}},handleLayoutDelete:function(t){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return i=>{let{tr:a,dispatch:r,state:o}=i;if(!r)return!0;let s=(0,l.KP)(e=>e.type.name===oX.name)(o.selection),d=(0,l.KP)(e=>e.type.name===ld.name)(o.selection);if(!s||!d)return!1;if(!n||(0,Z.mf)(s.node)){if(2==d.node.childCount){let t=s.node===d.node.child(0),n=t?d.node.child(1):d.node.child(0),i=t?d.start+d.node.child(0).nodeSize+1:d.start+1,r=i+n.content.size;a.replaceWith(d.pos,d.pos+d.node.nodeSize,n.content);let o=(0,oO.n)(a.doc.resolve(d.pos+(t?0:n.content.size)),t?1:-1);o&&a.setSelection(o);let l=(0,oD.es)({insertPos:d.pos,contentPos:i,contentEnd:r,editor:e.editor});requestAnimationFrame(()=>{var t,n;null===(t=(n=e.editor.commands).moveAnnotations)||void 0===t||t.call(n,l)})}else{let e=a.doc.resolve(s.pos);(0,o$.K)(a,e,t),a.setNodeAttribute(d.pos,"colWidths",(0,t5.XC)(d.node.attrs.colWidths,[(0,rT.xK)(e)]))}return!0}let{parent:c}=o.selection.$from;return!!(o.selection.empty&&c.isTextblock&&(0,l.Op)(c))&&c==s.node.firstChild&&!t&&(a.deleteRange(o.selection.$from.before(),o.selection.$from.after()),!0)}},goToNextLayoutCell:e=>t=>{let{tr:n,state:i}=t,a=(0,l.KP)(e=>e.type.name===oX.name||e.type.name===oq.name)(i.selection),r=(0,l.KP)(e=>e.type.name===ld.name||e.type.name===oF.o.name)(i.selection);if(!a||!r)return!1;let o=i.doc.resolve(a.pos),s=e?o.index()+1:o.index()-1;if(s<0||s>=o.parent.childCount)return!1;let d=o.posAtIndex(s);return n.setSelection(tQ.LN.near(i.doc.resolve(d))),!0}}},addKeyboardShortcuts:()=>({Tab:e=>{let{editor:t}=e;return!eb.of.get("arrowAutocomplete")&&t.commands.goToNextLayoutCell(!0)},"Shift-Tab":e=>{let{editor:t}=e;return!eb.of.get("arrowAutocomplete")&&t.commands.goToNextLayoutCell(!1)}})}),lc={type:"gridCell",content:[{type:"paragraph"}]};var lu=n(37672),lp=n(99364),lh=n(33795),lm=n(72809),lg=n(60443),lx=n(88865),lf=n(57882);let lv=e=>{let{decorations:t,node:n,updateAttributes:i}=e,a=(0,el.GV)(em.Jo),r=(0,lf.Iy)("edit",a),{checked:o,fontSize:l,placeholder:s}=n.attrs;return(0,p.jsx)(m.u,{dir:(0,i3.fZ)(t),...e,children:(0,p.jsxs)(A.E,{as:"li",color:o?"var(--body-color-muted)":void 0,textDecoration:o?"line-through":void 0,transition:"color 250ms ease-out",position:"relative",className:"todo","data-font-size":l,children:[(0,p.jsx)(lx.S,{contentEditable:!1,suppressContentEditableWarning:!0,isChecked:o,onChange:e=>{r&&i({checked:e.target.checked})},position:"absolute"}),(0,p.jsx)(c.$p,{as:"span",className:"todo-content","data-placeholder":s})]})})},lb=/^\s*\[[ ]?\]\s$/,ly=/^\s*\[x\]\s$/,lw=l.bP.create({name:lg.e.Todo,addOptions:()=>({HTMLAttributes:{}}),content:"inline*",defining:!0,group:"block cardNotesBlock",selectable:!1,allowFontSizes:"body",addAttributes:()=>({indent:{default:0},checked:{default:!1},fontSize:r2.mD}),addNodeView:()=>(0,c.gu)(lv,{as:"ul",update:u.z0,updateWrapperEl:(e,t)=>{e.setAttribute("indent",t.node.attrs.indent)}}),addInputRules(){return[(0,lh.aW)({find:lb,type:this.type,getAttributes:{checked:!1}},this.editor.state.schema),(0,lh.aW)({find:ly,type:this.type,getAttributes:{checked:!0}},this.editor.state.schema)]},addKeyboardShortcuts:()=>({"Mod-,":e=>{let{editor:t}=e;return t.commands.setListItems({variant:lg.e.Todo})},"Mod-Shift-9":e=>{let{editor:t}=e;return t.commands.setListItems({variant:lg.e.Todo})}}),parseHTML(){return[{tag:'li[variant="'.concat(this.name,'"]')}]},renderHTML(e){let{HTMLAttributes:t}=e;return["li",(0,l.KV)(this.options.HTMLAttributes,t,{variant:this.name}),0]}});var lj=n(74327),lk=n(66712),lC=n(90406),lS=n(70605);let lA=(0,R.forwardRef)((e,t)=>{let{dimensions:n,enforceMinDimensions:i,isThumbnail:a,isLoading:r,children:o,...l}=e,s=(0,eb.u)("enableVirtualization"),d=(0,eD.rd)();if(!s)return(0,p.jsx)(p.Fragment,{children:o});let c=n?{width:"".concat(n.width,"px"),height:"".concat(n.height,"px")}:{};return(!0===r||i)&&(c.minHeight=c.height),void 0!==r&&(c.height=void 0,c.width=void 0),(0,p.jsxs)(et.s,{backgroundColor:!1===r?"transparent":d?"whiteAlpha.200":"blackAlpha.200",ref:t,position:!1!==r?"relative":"static",transition:"background-color .2s",...c,...l,children:[o,!1!==r&&(0,p.jsx)(ad.y,{position:"absolute",top:"50%",insetStart:"50%",colorScheme:"gray",size:a?"xs":"md"})]})});lA.displayName="VirtualizedPlaceholder";var lz=n(53766);let lI=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,el.GV)(em.OG),n=(0,el.GV)(em.$i),i=!1!==e.memoGroup&&(t?"".concat(e.memoGroup?"".concat(e.memoGroup,":"):"","presenting:").concat(n):void 0);return(0,lz.v)({...e,memoGroup:i})};var lR=n(66792);let lE=e=>{let{attrs:t,inGallery:n,shouldDisableClick:i}=e,a=(0,lC.lQ)(t),r=t.displayStyle,o=(0,nW.oR)(),l=(0,lC.eb)(t,"preview"===r&&!n),{handleOpenLinkWithInterstitial:s,handleOpenNativeLinkWithInterstitial:d,linkUrlSafe:c}=(0,lR.E)(a),u="newTab"===l&&!i;return(0,R.useMemo)(()=>u?{url:o?a:c,handleOpenLinkWithInterstitial:s,handleOpenNativeLinkWithInterstitial:d}:void 0,[s,d,c,a,u,o])};var lL=n(76304),l_=n(92712),lM=n(90286);let lN=e=>{let{enterZoom:t,zoomBoxProps:n,url:i,handleOpenLink:a,handleOpenInNewTab:r}=e,o=(0,el.GV)(em.nD);return nD.D1?null:!o&&a&&i?(0,p.jsx)(l_.Q,{inset:0,w:"100%",h:"100%",position:"absolute",zIndex:1,cursor:"pointer",children:(0,p.jsx)(l_.r,{onClick:a,href:i,target:"_blank",rel:"noopener"})}):(0,p.jsx)(lM.K,{enterZoom:t,doubleClickNonZoomHandler:o?r:void 0,...n})};var lT=n(56824),lP=n(4876);let lO={allowPopups:!1,noSandbox:!1,preventScroll:void 0},lD=e=>{let{initialUrl:t,frameRef:n,iframeOptions:i,backgroundColor:a="white",onLoad:r,...o}=e,{allowPopups:l,preventScroll:s,noSandbox:d}=i||lO;return(0,p.jsx)(et.s,{w:"100%",h:"100%",direction:"column",background:a,...o,children:(0,p.jsx)("iframe",{ref:n,src:t,frameBorder:"0",width:"100%",height:"100%",allow:"encrypted-media; camera; microphone",allowFullScreen:!0,title:"Embedded app",sandbox:d?void 0:"allow-forms allow-scripts allow-same-origin allow-modals allow-pointer-lock ".concat(l?"allow-popups":""),scrolling:s?"no":void 0,style:{flex:1},onLoad:()=>{null==r||r()}})})},lF=(()=>{let e=e=>e.replace(/^https?:/,""),t=null,n=new Map,i={capture:!0,passive:!0},a=a=>{let r=e(a);n.delete(r),0===n.size&&t&&(window.removeEventListener("message",t,i),t=null)};return(r,o)=>{if(n.set(e(r),o),t)return()=>a(r);let l=Math.floor(519*Math.random());return t=t=>{if("https://if-cdn.com"===t.origin)try{let i=JSON.parse(t.data);if(!("context"in i))return;let a=Math.floor(519*Math.random());i.messageId=a,i.listenerId=l;let r=e(i.context);if(n.has(r)){n.get(r)(i);return}}catch(e){console.error(e)}},window.addEventListener("message",t,i),()=>a(r)}})();function lH(e){return!!e&&"if-cdn.com"===new URL(e).host}let lW=e=>{let[t,n]=(0,R.useState)(null),i="function"==typeof e,a={resizeSettled:!1,loadFired:!1,preloadStart:Number.NEGATIVE_INFINITY,loadStart:Number.NEGATIVE_INFINITY,triggered:!1},r=(0,R.useRef)({...a}),o=(0,R.useRef)(e),l=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],{preloadStart:t,loadStart:n,resizeSettled:i,loadFired:a,triggered:l}=r.current,s=performance.now()-t,d=performance.now()-n;if(!l&&(e||i&&a)){var c;console.debug("[embed] firing onLoad ".concat(d,"ms after frame load"),{preloadDelta:s,loadDelta:d}),r.current.triggered=!0,null===(c=o.current)||void 0===c||c.call(o);return}};return(0,R.useEffect)(()=>{o.current=e},[e]),(0,R.useEffect)(()=>{if(!i||!lH(t))return()=>{r.current={...a}};r.current.preloadStart=performance.now();let e=null,n=lF(t,e=>{e&&"object"==typeof e&&"height"in e&&o.push(e.height),s(o.length?200:1e3)}),o=[],s=t=>{e&&(clearTimeout(e),e=null),r.current.resizeSettled||(e=setTimeout(()=>{e=null,r.current.resizeSettled=!0,n(),l()},t))};return s(1e3),()=>{e&&(clearTimeout(e),e=null),n(),r.current={...a}}},[t,i]),{handlePreload:e=>(n(e),()=>{r.current.loadStart=performance.now(),r.current.loadFired=!0,l(!lH(e))})}},lB=e=>{let{html:t,onLoad:n,...i}=e,{handlePreload:a}=lW(n),r=(0,R.useRef)({frame:null,listener:null});return(0,p.jsx)(h.az,{position:"relative",role:"group",className:"html-embed-viewer","data-selection-ring":"inside","data-selection-background":!0,borderRadius:"var(--box-border-radius)",contentEditable:!1,dangerouslySetInnerHTML:{__html:t},ref:e=>{if(!e){r.current.frame&&r.current.listener&&r.current.frame.removeEventListener("load",r.current.listener),r.current={frame:null,listener:null};return}let t=null==e?void 0:e.getElementsByTagName("iframe");if((null==t?void 0:t.length)!==1){null==n||n();return}let i=t.item(0),o=i.src;if(i===r.current.frame)return;r.current.frame&&r.current.listener&&r.current.frame.removeEventListener("load",r.current.listener);let l=a(o);r.current={frame:i,listener:l},i.addEventListener("load",l)},...i})};var lV=n(20671);let lG=e=>{let{frameRef:t,node:n,isStealth:i=!1,isDark:a}=e,r=(0,lC.lQ)(n.attrs),{handleOpenLinkWithInterstitial:o}=(0,lR.E)(r);return(0,p.jsxs)(et.s,{direction:"row",background:a?"gray.800":"gray.50",align:"center",borderBottom:"1px solid",borderColor:a?"gray.600":"gray.200",w:"100%",p:1,zIndex:2,position:i?"absolute":"relative",transitionProperty:"common",transitionDuration:"normal",opacity:i?0:1,_hover:{opacity:1},fontFamily:"body",children:[(0,p.jsx)(lV.p,{size:"xs",value:r,border:"0",noOfLines:1,color:a?"gray.200":"gray.600",pointerEvents:"none",readOnly:!0}),(0,p.jsxs)(tv.e,{size:"xs",spacing:1,variant:"ghost",colorScheme:"gray",ml:2,children:[(0,p.jsx)(eE.Tz,{label:(0,p.jsx)(eL.x6,{id:"HpK/8d"}),placement:"top",children:(0,p.jsx)(tb.K,{isRound:!0,"aria-label":e_.Ru._({id:"HpK/8d"}),icon:(0,p.jsx)(I.g,{icon:eq.yek}),onClick:()=>{if(!t.current)return;let e=t.current.src;t.current.src="about:blank",setTimeout(()=>{t.current&&(t.current.src=e)},50)}})}),(0,p.jsx)(eE.Tz,{label:(0,p.jsx)(eL.x6,{id:"Alx2/L"}),placement:"top",children:(0,p.jsx)(tb.K,{isRound:!0,"aria-label":e_.Ru._({id:"Alx2/L"}),icon:(0,p.jsx)(I.g,{icon:eq.vMs}),onClick:o})})]})]})};var lU=n(12116);let lK=e=>{let{isZoomed:t,useStealthNav:n,onLoad:i,opacity:a,...r}=e,{node:o}=r,l=(0,R.useRef)(null),{colorMode:s}=(0,lT.G6)(),d="dark"===s,c=(0,ep.FX)(),{url:u,proxy:h,source:m,embed:g}=o.attrs,x=(0,lU.B)(m),f=x.rewriteEmbedUrl&&u?x.rewriteEmbedUrl(u):u,v=h?(0,lU.l)(f):f||"about:blank",{isUntrusted:b}=(0,lP.i)(v);return x.preferHtml&&(null==g?void 0:g.html)?(0,p.jsx)(lB,{html:g.html,w:t?"100%":void 0,onClick:t?eZ.dG:void 0,onLoad:i,opacity:a,...x.minWidth?{minW:"min(".concat(x.minWidth,", 100vw, 100%)"),left:"50%",transform:"translateX(-50%)"}:void 0}):b?(0,p.jsx)(et.s,{h:"100%",w:"100%",align:"center",justify:"center",children:"unknown embed"}):(0,p.jsxs)(et.s,{direction:"column",h:"100%",w:"100%",maxW:"var(--media-maxW)",maxH:"var(--media-maxH)",borderRadius:t?"lg":"var(--box-border-radius)",border:"1px solid",borderColor:d?"gray.600":"gray.200",overflow:"hidden",position:"relative","data-content-reference":!0,"data-selection-ring":"inside","data-selection-background":!0,className:(0,z.cx)("embed-viewer"),onClick:t?eZ.dG:void 0,children:[(0,p.jsx)(lG,{...r,frameRef:l,isDark:d,isStealth:n}),!t&&(0,p.jsx)(lL.zA,{...r,frameRef:l}),(0,p.jsx)(lD,{initialUrl:v,frameRef:l,iframeOptions:x.iframeOptions,onLoad:i,css:{aspectRatio:c?"1 / 1.618":"1.618 / 1"},flex:"1"})]})};var lq=n(57750);let lJ=(0,iC.P)(h.az),l$=(0,iC.P)(et.s),lY=e=>{let{node:t,editor:n,decorations:i}=e,a=t.attrs,{source:o,embed:l,displayStyle:s,id:d,sourceUrl:c}=a,u=(0,lU.B)(o),{isZoomed:g,enterZoom:x,exitZoom:f}=(0,lL.RL)(d),v="inline"===s&&u.preferHtml&&(null==l?void 0:l.html),b=(0,aK.NZ)(e),y=(0,ep.FX)(),w=(0,el.GV)(em.nD),j=(0,eS.DM)(i)||!n.view.hasFocus(),k=(0,eb.u)("virtualizeEmbeds"),[C,S]=(0,R.useState)(!1),A=!r.$.GAMMA_PUPPETEER_SERVICE&&(v||"inline"===s)&&!b&&!(y&&u.forcePreviewOnMobile),{handleOpenLinkWithInterstitial:I,handleOpenNativeLinkWithInterstitial:E,url:L}=lE({attrs:a,inGallery:b,shouldDisableClick:!!(u.inlineInteractive&&A)})||{},_=!b&&!n.isThumbnail,{inViewport:M,ref:N,dimensions:T}=lI();return k&&A&&!n.isThumbnail&&"embed.gdrive"!==u.key&&!1===M?(!0===C&&S(!1),(0,p.jsx)(m.u,{...e,as:"div",children:(0,p.jsx)(lA,{ref:N,dimensions:T})})):(0,p.jsxs)(m.u,{...e,children:[(0,p.jsxs)(lJ,{h:"100%",w:"calc(100% * var(--media-scale))",className:(0,z.cx)("embed-preview",!v&&!(u.inlineInteractive&&A)&&lS.Gx),"data-export-as-image":!0,"data-export-link":c,position:"relative",overflow:v&&u.minWidth?"visible":"hidden","data-drag-handle":!0,ref:N,children:[A&&n.isThumbnail?(0,p.jsx)(lq.a6,{...e}):b?(0,p.jsx)(lq.x6,{...e}):A?(0,p.jsx)(lA,{isLoading:!C,dimensions:T,enforceMinDimensions:"embed.twitter"===u.key,flexDir:"column",children:(0,p.jsx)(lK,{...e,opacity:C?1:0,onLoad:()=>{S(!0)},useStealthNav:!0})}):(0,p.jsx)(lq.Ch,{...e}),u.inlineInteractive&&!y&&A?(0,p.jsx)(h.az,{position:"absolute",inset:0,zIndex:1,pointerEvents:w&&!j&&"inline"===s?"auto":"none",cursor:"default"}):u.inlineInteractive&&y&&A?(0,p.jsx)(p.Fragment,{}):(0,p.jsx)(lN,{enterZoom:x,handleOpenLink:E,handleOpenInNewTab:I,url:L})]}),_&&(0,p.jsx)(lL.Gx,{isZoomed:g,exitZoom:f,editor:n,children:(0,p.jsx)(l$,{h:"100%",w:"100%",direction:"column",justify:"center",align:"center",children:(0,p.jsx)(lK,{...e,onLoad:()=>{S(!0)},isZoomed:!0})})})]})},lQ=l.bP.create({name:"embed",group:"block media",atom:!0,draggable:!0,selectable:!0,expandable:!0,addNodeView:()=>(0,c.gu)(lY,{update:u.z0}),addAttributes:()=>({id:(0,n6.e)(oH.z),url:{},source:{default:lj.Jp.key},thumbnail:{...(0,Z.tb)("thumbnail")},embed:{...(0,Z.tb)("embed")},meta:{...(0,Z.tb)("meta")},proxy:{},sourceUrl:{},displayStyle:{default:"preview"},fullWidthBlock:{default:!1},clickBehavior:{default:null}}),parseHTML(){return[{tag:"div[class=embed]"},{tag:"iframe[bookmark]",getAttrs:(0,ee.Ll)(this.storage)}]},renderHTML(e){let{HTMLAttributes:t,node:n}=e;return["div",(0,l.KV)(t,{class:"embed"}),["a",{href:(0,lC.lQ)(n),target:"_blank"},(0,lC.JY)(n)]]},addStorage:ee.xu,renderHTMLforAI(e){let{node:t}=e;return["iframe",{bookmark:(0,ee.vL)(this.storage,t)}]},addCommands:()=>({replaceEmbedsById:(e,t)=>n=>{let{editor:i,chain:a}=n,r=(0,l.xe)(i.state.doc,t=>"embed"===t.type.name&&t.attrs.id===e),o=a();return r.forEach(e=>{let{pos:n,node:i}=e;o.insertContentAt({from:n,to:n+i.nodeSize},t,{updateSelection:!1})}),o.run(),!0},updateEmbedsById:(e,t)=>n=>{let{editor:i,chain:a}=n,r=(0,l.xe)(i.state.doc,t=>("embed"===t.type.name||"video"===t.type.name)&&t.attrs.id===e),o=a();return r.forEach(e=>{let{pos:n}=e;o.updateAttributesAtPos(n,{thumbnail:t.thumbnail})}),o.run(),!0},insertEmbedAndFetchMetadata:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return i=>{let{commands:a,editor:r}=i,o=(0,oH.z)();a.insertContent({type:"embed",attrs:{id:o,url:e,sourceUrl:e,displayStyle:null!=t?t:"preview",meta:{title:"Loading..."}}},{updateSelection:!1});let l=!1;return(0,lk.Yq)(e,e=>{if(l){r.commands.updateEmbedsById(o,e);return}let n=tR.Fn[e.source];r.commands.replaceEmbedsById(o,{type:(null==n?void 0:n.nodeName)||"embed",attrs:{...e,id:o,displayStyle:null!=t?t:"video"===n.nodeName?"inline":"preview"}}),l=!0}).catch(t=>{console.warn("(caught) insertEmbedAndFetchMetadata error fetching url",t,e),n&&r.commands.replaceEmbedsById(o,e)}),!0}}})});var lX=n(69951);let lZ="gallery-prevent-flex";class l0{constructor(e=null){this.dragging=e}}let l1=new tQ.hs("galleryPlugin"),l2=e=>new tQ.k_({key:l1,state:{init:()=>new l0,apply:(e,t)=>t},props:{handleDOMEvents:{drop(e){var t;let n=null===(t=e.dragging)||void 0===t?void 0:t.annotations,i=l1.getState(e.state);if(!i)return!1;i.dragging=n}},decorations:e=>{let{doc:t}=e,n=[];return t.descendants((e,t,i)=>{if((0,aK.Pb)(e))n.push(tX.NZ.node(t,t+e.nodeSize,{class:"gallery-layout-".concat(e.attrs.layout)},{children:e.content}));else if((0,aK.Pb)(i)){var a;let r="image"===e.type.name&&(null===(a=e.attrs.resize)||void 0===a?void 0:a.clipType)==="circle";n.push(tX.NZ.node(t,t+e.nodeSize,{class:r?lZ:""},{inGallery:!0,layout:i.attrs.layout,dimensions:i.attrs.dimensions,thumbHeight:i.attrs.thumbHeight,thumbSpacing:i.attrs.thumbSpacing}))}}),tX.zF.create(t,n)},handlePaste:(e,t,n)=>{let{selection:i,schema:a}=e.state;if(!(i instanceof tQ.nh&&(0,aK.Pb)(i.node)))return!1;if((0,aK.jG)(a,n,t)){let t=e.state.tr.setSelection(tQ.U3.create(e.state.doc,i.to-1));e.dispatch(t)}return!1},handleDrop:(t,n,i)=>{let a;let r=l1.getState(t.state),o=null==r?void 0:r.dragging;r&&(r.dragging=null);try{if(!(a=(0,aK.tz)(t,n,i,!1)))return!1}catch(e){return console.error("(caught) [GalleryPlugin] handleDrop checkGalleryDropTarget error:",e),!1}try{let{selection:n}=t.state,r=i.content.toJSON(),{pos:l,side:s,node:d}=a,c=!n.empty,u=r.some(e=>{var t;return"image"===e.type&&!(null===(t=e.attrs)||void 0===t?void 0:t.src)}),p=c&&!u;if(d&&(0,aK.Pb)(d)){let t="left"===s?l:l+1;e.chain().insertContentAt({from:t,to:t},r,{updateSelection:!1}).command(n=>{let{tr:i}=n;if(p&&i.deleteSelection(),o){let n=e.state.tr;n.deleteSelection(),i.setMeta("annotationEvent",{type:"drop",dragging:o,droppedBlockPos:n.mapping.map(t)})}return!0}).focusMapped(t).run()}else if(d&&(0,lC.Bv)(d)){let n="left"===s?[...r,d.toJSON()]:[d.toJSON(),...r];e.chain().insertContentAt({from:l,to:l+d.nodeSize},{type:"gallery",content:n},{updateSelection:!1}).command(n=>{let{tr:i}=n;if(p&&i.deleteSelection(),o){let n=(0,oD.Q4)({side:s,view:t,tr:i,dragging:o,dropPos:l,dropNode:d});requestAnimationFrame(()=>{var t,i;null===(t=(i=e.commands).moveAnnotations)||void 0===t||t.call(i,n)})}return!0}).run()}}catch(e){console.error("(caught) [GalleryPlugin] handleDrop error:",e)}return!0}}});var l4=n(74801),l5=n(47572),l6=n(56436);let l3=e=>e&&lj.Dc[e]?lj.Dc[e]:lj.GQ,l8=16/9,l7=e=>{let{isZoomed:t,onLoad:n,opacity:i,position:a="relative",...r}=e,{node:o}=r,{embed:l,source:s,sourceUrl:d}=o.attrs,c=l3(s),u=(0,R.useRef)(null),m=c.preferHtml&&(null==l?void 0:l.html),g=(null==l?void 0:l.height)&&!(null==l?void 0:l.width),x=(null==l?void 0:l.height)&&(null==l?void 0:l.width)?l.width/l.height:(null==l?void 0:l.aspectRatio)||l8,f=t?{width:"min(var(--media-maxW), calc(var(--media-maxH) * ".concat(x,"))"),height:"video.tiktok"===s?void 0:g?l.height:"min(var(--media-maxH), calc(var(--media-maxW) / ".concat(x,"))"),alignContent:"center"}:m?{width:"100%"}:g?{height:l.height}:{height:0,pb:"".concat(100/x,"%")},v=(null==l?void 0:l.url)||o.attrs.embedUrl||d,b=c&&c.rewriteEmbedUrl&&v?c.rewriteEmbedUrl(v):v;return(0,p.jsxs)(h.az,{position:a,opacity:i,"data-content-reference":!0,"data-drag-handle":!0,...f,onClick:t?eZ.dG:void 0,transition:"opacity .2s",children:[!t&&(0,p.jsx)(lL.zA,{...r,frameRef:u}),m?(0,p.jsx)(lB,{html:l.html,w:t?"100%":void 0,onClick:t?eZ.dG:void 0,onLoad:n,...c.minWidth?{minW:"min(".concat(c.minWidth,", 100vw, 100%)"),left:"50%",transform:"translateX(-50%)"}:void 0,maxW:c.maxWidth}):(0,p.jsx)(lD,{initialUrl:b,backgroundColor:"none",borderRadius:"var(--box-border-radius)",overflow:"hidden","data-content-reference":!0,"data-selection-ring":"inside","data-selection-background":!0,className:(0,z.cx)("video-player"),onLoad:n,iframeOptions:{preventScroll:!0,...c.iframeOptions},position:"absolute",inset:0,frameRef:u})]})},l9=e=>{let{node:t,editor:n}=e,i=t.attrs,{source:a,embed:o,displayStyle:l,id:s,sourceUrl:d}=i,{isZoomed:c,enterZoom:u,exitZoom:g}=(0,lL.RL)(s),x=(0,aK.NZ)(e),f=(0,lU.B)(a),v=(0,eb.u)("virtualizeEmbeds"),[b,y]=(0,R.useState)(!1),w=!r.$.GAMMA_PUPPETEER_SERVICE&&"inline"===l,j="inline"===l&&f.preferHtml&&(null==o?void 0:o.html),k=!x&&!n.isThumbnail,{handleOpenLinkWithInterstitial:C,handleOpenNativeLinkWithInterstitial:S,url:A}=lE({attrs:i,inGallery:x,shouldDisableClick:w&&!x})||{},{inViewport:I,ref:E,dimensions:L}=lI();return v&&w&&!1===I&&!n.isThumbnail?(!0===b&&y(!1),(0,p.jsx)(m.u,{...e,as:"div",children:(0,p.jsx)(lA,{ref:E,dimensions:L})})):(0,p.jsxs)(m.u,{...e,as:"div",children:[(0,p.jsx)(h.az,{h:"100%",w:"calc(100% * var(--media-scale))",className:(0,z.cx)("embed-preview",!w&&lS.Gx),"data-export-as-image":!0,"data-export-link":d,position:"relative",overflow:j&&f.minWidth?"visible":"hidden",ref:E,children:n.isThumbnail?(0,p.jsx)(lq.a6,{...e}):x?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(lN,{enterZoom:u,url:A,handleOpenLink:S,handleOpenInNewTab:C}),(0,p.jsx)(lq.x6,{...e})]}):w?(0,p.jsx)(lA,{isLoading:!b,dimensions:L,children:(0,p.jsx)(l7,{opacity:b?1:0,position:"static",onLoad:()=>{y(!0)},...e})}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(lN,{enterZoom:u,url:A,handleOpenLink:S,handleOpenInNewTab:C}),(0,p.jsx)(lq.Ch,{...e})]})}),k&&(0,p.jsx)(lL.Gx,{isZoomed:c,exitZoom:g,editor:n,children:(0,p.jsx)(et.s,{width:"var(--media-maxW)",height:"var(--media-maxH)",direction:"column",align:"center",justify:"center",children:(0,p.jsx)(l7,{onLoad:()=>{y(!0)},...e,isZoomed:!0})})})]})},se=l.bP.create({name:"video",group:"block media",atom:!0,draggable:!0,selectable:!0,expandable:!0,addNodeView:()=>(0,c.gu)(l9,{update:u.z0}),addAttributes:()=>({id:(0,n6.e)(oH.z),embedUrl:{},source:{},thumbnail:{...(0,Z.tb)("thumbnail")},embed:{...(0,Z.tb)("embed")},meta:{...(0,Z.tb)("meta")},sourceUrl:{},displayStyle:{default:"inline"},fullWidthBlock:{default:!1},clickBehavior:{default:null}}),parseHTML(){return[{tag:"div[class=video]"},{tag:"video[bookmark]",getAttrs:(0,ee.Ll)(this.storage)}]},addStorage:()=>({bookmarks:{}}),renderHTMLforAI(e){let{node:t}=e;return["video",{bookmark:(0,ee.vL)(this.storage,t)}]},renderHTML(e){let{HTMLAttributes:t,node:n}=e;return["div",(0,l.KV)(t,{class:"video"}),["a",{href:(0,lC.lQ)(n),target:"_blank"},(0,lC.JY)(n)]]}});var st=n(93711);let sn=e=>{let{editor:t,node:n,getPos:i}=e,a=(0,R.useCallback)(()=>{t.commands.selectNodeAtPos(i()),t.chain().deleteSelectionAndSelectNear().run()},[t,i]),r=(0,st.N_)(),o=n.attrs.layout;return{contextMenuItems:[...(0,tB.d)({editor:t,node:n,getPos:i}),{divider:!0},{key:"add-comment",label:(0,p.jsx)(eL.x6,{id:"oFsfkI"}),icon:eq.DN2,onClick:()=>{t.commands.selectNodeAtPos(i()),(0,aK.wG)(t.state.selection)}},{divider:!0},{key:"layout",label:(0,p.jsx)(eL.x6,{id:"vR68Ol"}),icon:eq.Qyz,items:Object.entries(r).map(e=>{let[a,r]=e;return{key:a,label:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(A.E,{children:r.title}),(0,p.jsx)(A.E,{fontSize:"xxs",color:"gray.500",children:r.description})]}),icon:a===o?eq.e68:void 0,onClick:()=>{t.commands.selectNodeAtPos(i()),(0,st.mF)(a,n.attrs,t,t.state.selection)}}})},{key:"add-image",label:(0,p.jsx)(eL.x6,{id:"pVb3uA"}),icon:eq.HuL,onClick:()=>{t.commands.selectNodeAtPos(i()),(0,aK.hk)(i,t)}},{divider:!0},{key:"delete",label:(0,p.jsx)(eL.x6,{id:"cnGeoo"}),icon:eq.yLS,onClick:a,color:"red.500"}]}},si=(0,iC.P)(et.s),sa=e=>{let{node:t,editor:n,getPos:i}=e,a=t.attrs,r=(0,ep.FX)(),o=(0,aK.yg)(e),l=0===o.length,s=(0,eD.rd)(),d=l?lX.Aj:r?lX.XJ:a.thumbHeight||lX.Aj,u=a.layout,h="grid"===u?a.dimensions||"square":void 0,g=(0,i3.lI)(a.horizontalAlign||"center"),{isZoomed:x,isZoomComplete:f,exitZoom:v,zoomedId:b,setZoomedId:y}=(0,lL.$B)(o.map(e=>e.attrs.id)),w=(0,el.GV)(em.nD),j=(0,R.useRef)(null),k=(0,l4.z)(j,e=>(0,aK.HI)(n.view,e)),{onOpenContextMenu:C,onCloseContextMenu:S,menuProps:z}=(0,eh.$)({editor:n,getPos:i}),{contextMenuItems:E}=sn({editor:n,node:t,getPos:i}),L=(0,R.useCallback)(e=>{e.stopPropagation(),e.preventDefault(),(0,aK.hk)(i,n)},[i,n]),_=(0,R.useCallback)(e=>{var t;n.isEditable&&(null===(t=e.target.closest(".gallery, .block"))||void 0===t?void 0:t.classList.contains("gallery"))&&n.commands.selectNodeAtPos(i())},[n,i]),M=(0,R.useMemo)(()=>"grid"===u?{overflow:"hidden",aspectRatio:"square"===h?"1":"landscape"===h?"4/3":"3/4"}:"logo"===u?{height:void 0}:{h:"".concat(d,"em"),flex:a.stretchFill?"1 1 auto":null===a.stretchFill?"1 1 auto":void 0},[u,h,d,a.stretchFill]),T=(0,R.useMemo)(()=>"grid"===u?{justifyContent:"center",display:"grid",gridTemplateColumns:1===o.length?"repeat(auto-fit, ".concat(a.thumbHeight,"em)"):o.length<6?a.thumbHeight>=lX.Vj/(1+.1*o.length)?"repeat(auto-fit, minmax(".concat(a.thumbHeight,"em, 1fr))"):"repeat(auto-fit, ".concat(a.thumbHeight,"em)"):"repeat(auto-fit, minmax(".concat(a.thumbHeight,"em, 1fr))"),gap:a.thumbHeight>=lX.Vj/2?"".concat(lX.I0,"em"):a.thumbHeight<=lX.Vj/3?"".concat(lX.I0/1.25,"em"):"".concat(lX.I0/1.5,"em")}:{gap:a.thumbHeight<=lX.Aj/3?"".concat(lX.I0/2,"em"):a.thumbHeight<=lX.Aj/2?"".concat(lX.I0/1.5,"em"):"".concat(lX.I0,"em"),display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"center",placeContent:g,w:o.length>=3&&(null===a.stretchFill||a.stretchFill)?"100%":void 0},[u,a.thumbHeight,a.stretchFill,g,o.length]);return(0,p.jsxs)(m.u,{...e,children:[(0,p.jsxs)(et.s,{onContextMenu:w?C:void 0,className:"gallery",cursor:"default",onClick:_,ref:j,align:g,direction:"column",position:"relative","data-selection-ring":!0,"data-selection-background":!0,...l?k:{},css:{"--media-maxH":"flex"===u?"".concat(d,"em"):void 0,"--media-maxW":"100%"},w:"100%",sx:{".gallery-content":{w:"100%",display:"flex"===u?"contents":void 0},"[data-node-view-content-inner=gallery]":{...T,".block":{...M,["&.".concat(lZ)]:{flex:"0 0 auto"},my:0,transitionProperty:"filter",transitionDuration:"normal",_hover:{[":not(.block-mediaPlaceholder) > :not(.".concat(l5.T,")")]:{filter:"brightness(0.9)"}},"[data-node-view-wrapper]":{h:"100%"}},".block-mediaPlaceholder":{overflow:"visible"}},".block-gallery.is-focused & .placeholder":{bg:s?i9.N.DARK_GALLERY_BG:i9.N.LIGHT_GALLERY_BG},".placeholder":{minW:"flex"===u?"12em":"logo"===u?"6em":void 0,h:"logo"===u?(0,aK.w5)(a.thumbHeight,a.thumbSpacing):void 0}},children:[l?(0,p.jsxs)(nN.T,{spacing:3,h:"".concat(d,"em"),justify:"center",contentEditable:!1,color:s?i9.N.DARK_COLOR:i9.N.LIGHT_COLOR,className:"gallery-placeholder","data-testid":"gallery-placeholder",userSelect:"none",children:[(0,p.jsx)(I.g,{size:"2x",icon:n8.yvG}),w?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(n3.$,{size:"xs",onClick:L,onMouseDown:eZ.Fw,children:"Add images"}),(0,p.jsx)(A.E,{color:s?i9.N.DARK_ICON_COLOR:i9.N.LIGHT_ICON_COLOR,fontSize:"sm",textAlign:"center",children:(0,p.jsx)(eL.x6,{id:"oyPIji"})})]}):null]}):(0,p.jsx)(c.$p,{className:"gallery-content"}),w&&!l&&(0,p.jsx)(et.s,{position:"absolute",bottom:"0",h:"grid"===u||"logo"===u?"100%":"".concat(d,"em"),align:"center",w:6,insetEnd:-3,className:"add-image",opacity:"0",transitionProperty:"opacity",zIndex:"tooltip",transitionDuration:"normal",children:(0,p.jsx)(eE.Tz,{label:(0,p.jsx)(eL.x6,{id:"P5MuiB"}),placement:"top",children:(0,p.jsx)(tb.K,{icon:(0,p.jsx)(I.g,{icon:eq.QLR}),"aria-label":e_.Ru._({id:"P5MuiB"}),position:"absolute",size:"xs",variant:"plain",isRound:!0,onClick:L})})}),(0,p.jsx)(N.A,{...e,label:e_.Ru._({id:"wnA/4R"})}),(0,p.jsx)(ea.t,{menuItems:E,isOpen:z.isOpen,position:z.position,onClose:S,size:"small"})]}),(0,p.jsx)(lL._M,{isZoomed:x,isZoomComplete:f,exitZoom:v,zoomedId:b,setZoomedId:y,editor:n,children:o.filter(e=>e.attrs.id).map(e=>{let{id:t}=e.attrs,i=e.type.name;return{id:t,thumbnail:"image"===i?(0,p.jsx)(l6.F,{imageAttrs:e.attrs,objectFit:"cover",isThumbnail:!0}):(0,p.jsx)(lq.x6,{node:e}),full:(0,p.jsx)(et.s,{justify:"center",align:"center",h:"100%",w:"100%",children:"image"===i?(0,p.jsx)(l6.F,{isZoomed:!0,imageAttrs:e.attrs}):"video"===i?(0,p.jsx)(si,{width:"var(--media-maxW)",height:"var(--media-maxH)",direction:"column",align:"center",justify:"center",children:(0,p.jsx)(l7,{isZoomed:!0,node:e,decorations:[],editor:n})}):(0,p.jsx)(si,{h:"100%",w:"100%",direction:"column",justify:"center",align:"center",children:(0,p.jsx)(lK,{isZoomed:!0,node:e,decorations:[],editor:n})})})}})})]})},sr=l.bP.create({name:"gallery",group:"cardBlock layoutBlock",content:"media*",isolating:!0,draggable:!0,selectable:!0,priority:Q.y.Gallery,containerHandle:!0,expandable:!0,addNodeView:()=>(0,c.gu)(sa,{update:u.z0,ignoreMutation:oP.I}),addAttributes:()=>({thumbHeight:{default:lX.Aj},fullWidthBlock:{default:!1},layout:{default:"flex"},stretchFill:{},dimensions:{default:"square"},thumbSpacing:{default:lX.mj}}),addProseMirrorPlugins(){return[l2(this.editor)]},parseHTML:()=>[{tag:"div[class=gallery]"},{tag:"gallery"}],renderHTMLforAI(e){let{node:t}=e;return["gallery",{thumbHeight:t.attrs.thumbHeight},0]},renderHTML(e){let{HTMLAttributes:t}=e;return["div",(0,l.KV)(t,{class:"gallery"}),0]}});var so=n(14285),sl=n(12253);let ss=l.YY.create({name:"media",addExtensions:()=>[oH.p],addCommands:()=>({handleSpaceToZoom:()=>e=>{let{state:t}=e;if(t.selection instanceof tQ.nh&&(0,lC.Bv)(t.selection.node)){let e=(0,el.KA)(),{id:n}=t.selection.node.attrs;return!!(n&&(0,sl.iZ)(n)(e.getState()))||(e.dispatch((0,em.a)({nodeId:t.selection.node.attrs.id})),!0)}return!1}})});var sd=n(27838),sc=n(50881),su=n(12784),sp=n.n(su);let sh=["paragraph","heading","title","bullet","numbered","todo","toggleSummary"],sm=l.YY.create({name:"placeholderText",addGlobalAttributes:()=>[{types:sh,attributes:{placeholder:{default:null,keepOnSplit:!1,rendered:!1}}}],addCommands:()=>({removeFilledPlaceholders:()=>e=>{let{tr:t,dispatch:n}=e;return!n||(t.doc.descendants((e,n)=>{e.attrs.placeholder&&e.textContent&&(console.debug("Removing placeholder",e.attrs.placeholder,"at",n,"with content",e.textContent),t.setNodeAttribute(n,"placeholder",null))}),!0)}}),onUpdate(){sg(this.editor)}}),sg=sp()(e=>{e.isEditable&&e.commands.removeFilledPlaceholders()},100,{maxWait:1e3});var sx=n(97404),sf=n(25317),sv=n(73734);let sb=e=>({color:"var(--body-color)",".text-label-editor .ProseMirror":{"--line-height-body":"1.25",".block":{my:"1rem"},"> .first-block":{mt:"0rem"},"> .last-block":{mb:"0rem"}}}),sy=e=>{let{node:t,updateAttributes:n,getPos:i,editor:a,selected:r,decorations:o}=e,{templateKey:l,data:s,width:d,horizontalAlign:c}=t.attrs,{Component:u}=(0,sv.F)(l),g=(0,el.GV)(em.nD),x=(0,el.GV)(em.SJ),f=sb(x),{ref:v,setIsResizing:b,resizeableSx:y}=(0,ae.Y3)(a),w=(0,i3.yp)(c),j=(0,R.useCallback)(e=>{n({...t.attrs,...e})},[t.attrs,n]),k=(0,R.useCallback)(e=>{let t=i();try{var r;let i=null===(r=a.state.doc.nodeAt(t))||void 0===r?void 0:r.attrs.data,o=JSON.parse(JSON.stringify(i)),l=e(o);n({data:l})}catch(e){console.error("Error updating smart diagram data",e)}},[n,i,a]),C=(0,R.useCallback)(e=>{let t=i(),n=a.state.doc.resolve(t),r=new sf.n(n,e);a.view.dispatch(a.state.tr.setSelection(r))},[i,a]);return(0,p.jsx)(m.u,{...e,children:(0,p.jsx)(et.s,{dir:(0,i3.fZ)(o,c),w:"100%",className:i8.S,css:w,sx:y,direction:"column",children:(0,p.jsxs)(h.az,{ref:v,className:"smart-diagram-wrapper","data-drag-handle":!0,"data-content-reference":!0,"data-selection-ring":!0,"data-in-editor-focus":!0,sx:f,w:d?"calc(".concat(d," * var(--font-size) / 16)"):"100%",maxW:"100%",position:"relative",children:[g&&r&&(0,p.jsx)(ae.u4,{imageWrapperRef:v,setIsResizing:b,updateResizeAttrs:j,refreshDeps:[t.attrs]}),(0,p.jsx)(u,{data:s,theme:x,isEditable:g,updateData:k,selectItem:C})]})})})},sw=l.bP.create({name:"smartDiagram",group:"block",isolating:!0,defining:!0,atom:!1,selectable:!0,addAttributes:()=>({templateKey:{default:void 0},data:{default:{},...(0,Z.tb)("data")},width:{default:null}}),renderHTML(e){let{HTMLAttributes:t}=e;return["div",(0,l.KV)(t,{class:"smart-diagram"})]},parseHTML:()=>[{tag:"div[class=smart-diagram]"}],addNodeView:()=>(0,c.gu)(sy,{update:u.z0}),addCommands(){return{insertSmartDiagram:(e,t)=>n=>{let{chain:i}=n;return i().insertContent({type:this.name,attrs:{templateKey:e,data:t}}).run()},updateSmartDiagramData:(e,t,n)=>i=>{let{chain:a}=i;return a().updateAttributeKeyPathAtPos(e,"data."+t,n).run()}}}});var sj=n(85700),sk=n(65641),sC=n(77583);let sS=l.YY.create({name:"TableCommands",addCommands:()=>({selectColumn:e=>t=>{let{tr:n,dispatch:i}=t;if(!i)return!0;let{doc:a}=n,r=a.resolve(e),o=sC.rn.colSelection(r);return n.setSelection(o),!0},selectRow:e=>t=>{let{tr:n,dispatch:i}=t;if(!i)return!0;let{doc:a}=n,r=a.resolve(e),o=sC.rn.rowSelection(r);return n.setSelection(o),!0},selectTable:e=>t=>{let{tr:n,dispatch:i}=t;if(!i)return!0;let{doc:a}=n,r=a.resolve(e),o=sC.rn.colSelection(r),l=sC.rn.rowSelection(o.$anchorCell,o.$headCell);return n.setSelection(l),!0}})}),sA=l.bP.create({name:"tableCell",addOptions:()=>({HTMLAttributes:{}}),content:"(block | tableBlock)+",addAttributes:()=>({colspan:{default:1},rowspan:{default:1}}),tableRole:"cell",isolating:!0,selectable:!1,parseHTML:()=>[{tag:"td"},{tag:"th"}],renderHTML(e){let{HTMLAttributes:t}=e;return["td",(0,l.KV)(this.options.HTMLAttributes,t),0]}}),sz=e=>(0,p.jsxs)(c.VR,{className:"table-row-wrapper",style:{display:"contents"},children:[(0,p.jsx)("th",{style:{position:"relative",padding:0},children:(0,p.jsx)(sI,{...e})}),(0,p.jsx)(c.$p,{as:"div",className:"table-row-content",style:{display:"contents"}})]}),sI=(0,R.memo)(e=>{let{...t}=e,{getPos:n,editor:i}=t;return(0,p.jsx)(et.s,{height:"100%",align:"center",contentEditable:!1,suppressContentEditableWarning:!0,children:(0,p.jsx)(N.A,{...t,label:e_.Ru._({id:"9c44h0"}),onClick:()=>{let e=n()+1;i.chain().focus().selectRow(e).run()},insetInlineStart:"-0.5em",top:"1em",zIndex:"3","data-testid":"table-row-control"})})});sI.displayName="RowControl";let sR=l.bP.create({name:"tableRow",addOptions:()=>({HTMLAttributes:{}}),selectable:!1,content:"tableCell+",tableRole:"row",containerHandle:!0,addNodeView:()=>(0,c.gu)(sz,{update:u.z0,as:"tr"}),parseHTML:()=>[{tag:"tr"}],renderHTML(e){let{HTMLAttributes:t}=e;return["tr",(0,l.KV)(this.options.HTMLAttributes,t),0]}});var sE=n(32565),sL=n(8558),s_=n(18733),sM=n(46896);let sN=()=>new tQ.k_({key:new tQ.hs("TogglePlugin"),props:{handlePaste(e,t,n){let{selection:i,tr:a}=e.state,r=(0,l.KP)(sM.Rv)(i);if(!r)return!1;let o=null,s=null,d=[];if(n.content.descendants(e=>{e.isTextblock&&(o?d.push(e):(o=e.content,s=(0,s_.NA)(e)||null))}),!o)return;s&&a.setNodeAttribute(r.pos,"fontSize",s),a.replaceSelection(tt.Ji.maxOpen(o));let c=a.mapping.map(r.pos+r.node.nodeSize);a.replaceRange(c,c,tt.Ji.maxOpen(tt.FK.fromArray(d)));let u=(0,oO.i)(a,-1);return u&&a.setSelection(u),e.dispatch(a),!0},decorations(e){let{doc:t}=e,n=[];return t.descendants((e,t,i)=>{if(!i||!(0,sM.Rv)(e))return;let a=(0,Z.F2)(i.content).slice(1).every(e=>(0,Z.Op)(e)),r=tX.NZ.node(t,t+e.nodeSize,{},{isToggleDecoration:!0,toggleId:i.attrs.id,isEmpty:a});n.push(r)}),tX.zF.create(t,n)}}}),sT=e=>{var t;return(null===(t=e.find(e=>e.spec.isToggleDecoration))||void 0===t?void 0:t.spec)||{}},sP="1.5em",sO=e=>{let{node:t,decorations:n}=e,{level:i,fontSize:a,placeholder:r,horizontalAlign:o}=t.attrs,{toggleId:l="",isEmpty:s}=sT(n),d=(0,i3.yp)(o),u=(0,i3.fZ)(n),[h]=(0,oW.yz)(u),g=(0,el.GV)(em.nD),x=(0,el.GV)(em.jO),f=(0,el.GV)((0,em.q)(l))||x,v=(0,R.useCallback)(()=>{(0,sM.bG)(l,!f)},[l,f]);return(0,p.jsx)(m.u,{...e,hideComments:!f,children:(0,p.jsxs)(A.E,{as:"div",dir:u,display:"flex",flexDirection:"column",position:"relative",onClick:g?void 0:v,cursor:g?void 0:"pointer",style:{display:"flex",flexDirection:"column",...(0,i3.yp)(o)},children:[(0,p.jsx)(n3.$,{[h]:"calc(0.125em - ".concat(sP,")"),position:"absolute",variant:"ghost",colorScheme:"gray",color:s?"var(--body-color-muted)":"var(--body-color)",onClick:g?v:void 0,contentEditable:!1,onMouseDown:eZ.Fw,fontSize:"1em",lineHeight:"inherit",height:"100%",px:2,marginStart:-2,minW:"unset","data-testid":"toggle-button",children:(0,p.jsx)(A.E,{transform:"rotate(".concat(f?90:"rtl"===u?180:0,"deg)"),transformOrigin:"center",transitionProperty:"transform",transitionDuration:"normal",fontSize:"0.75em",children:(0,p.jsx)(I.g,{icon:eR.ijD})})}),(0,p.jsx)(c.$p,{dir:u,level:i,"data-placeholder":r||e_.Ru._({id:"JFciKP"}),"data-font-size":a,className:(0,z.cx)((0,s_.Ii)(a)&&E.U6),style:{minWidth:"min(100%, 10em)",textAlign:d.textAlign,...(0,i3.O8)(o)}})]})})},sD=l.bP.create({name:"toggleSummary",content:"inline*",selectable:!1,marks:"bold italic underline code footnoteLabel strike textColor highlight",allowFontSizes:"heading body",addAttributes:()=>({fontSize:r2.mD}),addNodeView:()=>(0,c.gu)(sO,{update:u.z0}),renderHTML(e){let{HTMLAttributes:t}=e;return["summary",t,0]},parseHTML:()=>[{tag:"summary"}]}),sF=e=>{let{decorations:t,node:n}=e,i=(0,i3.fZ)(t),[a]=(0,oW.yz)(i),r=(0,el.GV)(em.jO),o=(0,el.GV)((0,em.q)(n.attrs.id))||r;return(0,p.jsx)(m.u,{...e,hideComments:o,readOnly:!o,children:(0,p.jsxs)(h.az,{dir:i,ps:sP,position:"relative","data-open":!!o,className:"toggle",borderRadius:"var(--box-border-radius)","data-selection-ring":"padded",children:[(0,p.jsx)(c.$p,{}),o&&(0,p.jsx)(h.az,{position:"absolute",[a]:"0.375em",bottom:"0.25em",top:"2.5em",borderStart:"1px solid",borderColor:"var(--neutral-border-color)"})]})})};var sH=n(44275);let sW=/^\s*([+])\s$/,sB=l.bP.create({name:"toggle",group:"layoutBlock calloutBlock cardBlock smartLayoutBlock tableBlock",content:"toggleSummary (block | layoutBlock)+",selectable:!1,isolating:!0,priority:Q.y.Toggle,expandable:!0,addNodeView:()=>(0,c.gu)(sF,{update:u.z0}),addProseMirrorPlugins:()=>[sN()],addAttributes:()=>({id:(0,n6.e)(sH.n)}),addInputRules(){var e;return[(e={find:sW,innerType:this.editor.schema.nodes.toggleSummary,outerType:this.type,getInnerAttributes:e=>({fontSize:(0,s_.NA)(e)}),getOuterAttributes:()=>{let e=(0,sH.n)();return(0,sM.bG)(e,!0),{id:e}}},new l.fV({find:e.find,handler:t=>{let{state:n,range:i,match:a}=t,r=n.doc.resolve(i.from);if(!r.node(-1).canReplaceWith(r.index(-1),r.indexAfter(-1),e.outerType))return;let o=(0,l.gk)(e.getOuterAttributes,void 0,r.parent)||{},s=(0,l.gk)(e.getInnerAttributes,void 0,r.parent)||{},d=n.tr.delete(i.from,i.to),c=d.doc.resolve(i.from),u=c.parent,p=e.outerType.createAndFill(o,[e.innerType.create(s,u.content)]);d.replaceWith(c.before(),c.after(),p);let h=(0,oO.n)(d.doc.resolve(i.from));h&&d.setSelection(h)}}))]},addCommands(){var e=this;return{unwrapToggle:()=>e=>{let{state:t,editor:n,tr:i}=e;if(!n.isActive("toggleSummary"))return!1;let{selection:a,schema:r}=t,o=(0,l.KP)(sM.p8)(a);if(!o||o.start+1!==a.from||!a.empty)return!1;let s=(0,Z.F2)(o.node.content),d=s[0],{type:c,level:u}=(0,s_.o)(d.attrs.fontSize),p=["heading"===c?r.nodes.heading.create({level:u},d.content):r.nodes.paragraph.create({fontSize:d.attrs.fontSize},d.content)].concat(s.slice(1));i.replaceWith(o.pos,o.pos+o.node.nodeSize,tt.FK.from(p)).setMeta("annotationEvent",{type:"unwrap-node",pos:o.pos});let h=i.doc.resolve(o.pos),m=(0,r4.s)(h);return m&&i.setSelection(m),!0},joinBackwardInToggle:()=>e=>{let{state:t,editor:n,chain:i}=e;if(n.isActive("toggleSummary"))return!1;let{selection:a}=t,r=(0,l.KP)(sM.p8)(a);if(!r)return!1;let o=(0,Z.F2)(r.node.content).slice(1);return!!a.empty&&0===a.$from.parentOffset&&1===o.length&&(i().command(e=>{let{tr:t}=e,i=t.doc.resolve(r.pos+1).end();return t.insert(i,n.schema.nodes.paragraph.create()),!0}).joinBackward(),!0)},wrapWithToggle:function(t){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return i=>{let a,{state:r,tr:o}=i,{doc:l,selection:s,schema:d}=r,c=s.$from.blockRange(s.$to);if(!c)return!1;let u=[];l.nodesBetween(s.from,s.to,(e,t,n)=>{if(n===c.parent)return u.push(e),!1});let p=[];if(!t&&u[0].isTextblock&&u[0].textContent.length<100){let e=(0,s_.NA)(u[0]);a=d.nodes.toggleSummary.create({fontSize:e},u[0].content),p=u.slice(1)}else{let e=t?d.text(t):null;a=d.nodes.toggleSummary.create(null,e),p=u}let h=(0,sH.n)();n&&(0,sM.bG)(h,!0);let m=e.editor.schema.nodes.toggle.createAndFill({id:h},tt.FK.fromArray([a,...p]));if(!m)return!1;let{start:g,end:x}=c;o.replaceRangeWith(g,x,m).setMeta("annotationEvent",{type:"wrap-nodes",start:g,end:x,level:1});let f=(0,r4.t)(o);if(!f)return!1;let v=(0,r4.s)(f,-1);return v&&o.setSelection(v),!0}},enterInToggle:()=>e=>{let{editor:t,state:n,chain:i}=e;if(!t.isActive("toggle"))return!1;let a=(0,l.KP)(sM.p8)(n.selection);if(!a||(0,sM.vb)(a.node.attrs.id))return!1;let{selection:r}=t.state,{$from:o}=r;if(o.parentOffset===o.parent.nodeSize-2){let e=a.pos+a.node.nodeSize;return i().insertContentAt(e,{type:"paragraph"}).selectInsertedNode().run(),!0}return(0,sM.bG)(a.node.attrs.id,!0),!0}}},addKeyboardShortcuts:()=>({Enter:e=>{let{editor:t}=e;return t.commands.enterInToggle()},Backspace:e=>{let{editor:t}=e;return t.commands.first(e=>{let{commands:t}=e;return[()=>t.unwrapToggle(),()=>t.joinBackwardInToggle()]})}}),addExtensions:()=>[sH.D,sD],renderHTML(e){let{HTMLAttributes:t}=e;return["details",t,0]},parseHTML:()=>[{tag:"details"}]}),sV=n(15657).A.extend({parseHTML:()=>[{tag:"u"},{style:"text-decoration=underline"},{style:"text-decoration-line=underline"}]});var sG=n(39002);let sU=function(){let{isInnerEditor:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[rz,rI,rE.T,G.Zp,q.QJ.configure({enabled:!r.$.GAMMA_PUPPETEER_SERVICE}),U.iM,K.N,no,t$,nR,sG.n,a.E,oR.B,lu.N.configure({openOnClick:!1}),az,ru.z,y,oN,sV,sj.n,lh.B8,lp.D,lm.R,lw,sL.h,oE.DZ,sc.f,x,V,aA.N,i3.wq,sE.f,w.$,C,sE.r,r2.Z4,sm,sk.X.extend({resizable:!0,allowTableNodeSelection:!0}),sR,sA,sS,aC,ss,ef.Ud,so._V,se,lQ,rZ,a$,sr,sd.M9,sd.BF,sd.lw,nu.Hf,a2,ld,oX,oF.o,oq,sw,oz,oC,aT,n$,sB,r0,eC.h,o.a,r1,ts.B,rH,i.v,sx.a,oT.A_.configure({addSelectionKeyMaps:!e}),oT.Q4]}},70184:(e,t,n)=>{"use strict";n.d(t,{F:()=>l});var i=n(34897),a=n(14041),r=n(64225),o=n(5933);let l=e=>{let[t]=(0,a.useState)(()=>(0,i.U1)({reducer:r.Ki,middleware:e=>e({serializableCheck:!1})}));return(0,a.useEffect)(()=>{(null==e?void 0:e.doc)&&t.dispatch((0,o.BN)({doc:e.doc}))},[e,t]),t}},66159:(e,t,n)=>{"use strict";n.d(t,{G:()=>u,J:()=>p});var i=n(56154),a=n(12784),r=n.n(a),o=n(11329),l=n(14041),s=n(64225),d=n(69646),c=n(69771);let u="FLUSH_SYNCED_EDITOR",p=e=>{let{sourceEditor:t,targetEditor:n,isStreaming:a=!1}=e,r=(0,s.jL)();(0,l.useEffect)(()=>{let e=new g(n,e=>{let{editor:t}=e;try{var a;n.commands.command(e=>{let{state:t}=e;return(0,d.jL)(t.doc,r),!0}),null===c.U||void 0===c.U||null===(a=c.U.getState(t.state))||void 0===a||a.processChanges(r)}catch(e){i.Cp(e)}},{maxWait:a?500:void 0,onError(){let e=t.getJSON();n.commands.setContent(e),n.commands.command(e=>{let{state:t}=e;return(0,d.jL)(t.doc,r),!0})}}),o=h.bind(void 0,e),l=m.bind(void 0,e);return t.on("update",o),t.on("selectionUpdate",l),()=>{n.isDestroyed?e.clear():e.flush(),t.off("update",o),t.off("selectionUpdate",l)}},[t,n,r,a])},h=(e,t)=>{let{transaction:n}=t;e.add(n),n.getMeta(u)&&e.flush()},m=(e,t)=>{var n,i;let{editor:a}=t,r=null===(i=a.state.selection)||void 0===i?void 0:null===(n=i.ranges)||void 0===n?void 0:n[0];r&&e.setSelection({from:r.$from.pos,to:r.$to.pos})};class g{add(e){this.queue.push(e.steps.map(e=>o.pn.fromJSON(this.editor.schema,e.toJSON()))),this.apply()}setSelection(e){this.selection=e,setTimeout(()=>{0===this.queue.length&&this.applySelection()},0)}flush(){this.apply.flush()}clear(){this.apply.cancel()}doApply(){var e,t;let n;for(;void 0!==(n=this.queue.shift());){let e=this.editor.state.tr;try{n.forEach(t=>e.step(t)),this.editor.view.dispatch(e)}catch(e){this.queue.splice(0,this.queue.length),null===(t=this.onError)||void 0===t||t.call(this)}}this.applySelection(),null===(e=this.onApply)||void 0===e||e.call(this,{editor:this.editor})}applySelection(){this.selection&&this.editor.commands.setTextSelection(this.selection),this.selection=null}constructor(e,t,{maxWait:n,onError:i=null}={}){this.editor=e,this.onApply=t,this.queue=[],this.selection=null,this.onError=null,this.onError=null!=i?i:null,this.apply=r()(this.doApply.bind(this),500,n?{maxWait:n}:{})}}},40408:(e,t,n)=>{"use strict";n.d(t,{S:()=>f,o:()=>b});var i=n(31085),a=n(80532),r=n(14041),o=n(32133),l=n(67397),s=n(64225),d=n(69646),c=n(44428),u=n(69771),p=n(5933),h=n(65053),m=n(58599),g=n(57267),x=n(70184);let f=e=>{let{reduxData:t,...n}=e,a=(0,x.F)(t);return(0,i.jsx)(o.Kq,{store:a,children:(0,i.jsx)(v,{...n})})},v=e=>{let{onCreate:t=()=>{},initialContent:n,content:o,theme:x,isThumbnail:f,portalComponent:v}=e,[b,y]=(0,r.useState)(!1),w=(0,r.useMemo)(()=>(0,g.C)(),[]),j=(0,s.jL)();(0,r.useEffect)(()=>{j((0,p.Yl)({theme:x||null})),j((0,p.kd)({isAllowedToEdit:!1})),j((0,p.$j)({animationsEnabled:!1}))},[x,j]);let k=(0,m.hG)({async onCreate(e){var n;let{editor:i}=e;console.debug("[EditorPreview][onCreate] TipTap editor is now ready"),null===(n=c.Jl.getState(i.state))||void 0===n||n.compute(i.state).processChanges(j),i.commands.command(()=>((0,d.jL)(i.state.doc,j),!0)),y(!0),null==t||t({editor:i})},extensions:w,content:n,editable:!1});return(k.isThumbnail=f,(0,r.useEffect)(()=>{var e;o&&k&&(k.commands.setContent(o),k.commands.command(()=>((0,d.jL)(k.state.doc,j),!0)),null===(e=u.U.getState(k.state))||void 0===e||e.compute(k.state.doc).processChanges(j))},[o,k,j]),(0,l.GZ)(k),b)?(0,i.jsx)(a.az,{className:"editor-preview-root","data-variation-preview":!0,"data-testid":"editor-preview-root",width:"100%",position:"relative",sx:h.q,children:(0,i.jsx)(m.$Z,{editor:k,portalComponent:v,style:{width:"100%",height:"100%"},className:"highlight-mask"})}):(0,i.jsx)(i.Fragment,{})},b={"[data-thumbnail-hidden]":{display:"none !important"},"*":{backdropFilter:"none !important",webkitBackdropFilter:"none !important",WebkitTransition:"none !important",MozTransition:"none !important",OTransition:"none !important",msTransition:"none !important",transition:"none !important",vectorEffect:"none"},contain:"paint",".editor-core-root, .editor-preview-root":{height:"100% !important",width:"auto !important"},".doc-content-wrapper":{pb:"0 !important",minH:"auto !important"},"[data-doc-background-element], [data-doc-background-element-present-mode]":{display:"none !important"},".card2-background":{mt:0}}},57322:(e,t,n)=>{"use strict";n.d(t,{N:()=>d});var i=n(31085);n(13236);var a=n(14041),r=n(58599),o=n(95186),l=n(74346);class s extends a.Component{componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}init(){let{editor:e}=this.props;if(!e)return;let{doc:t}=e.state;e.contentComponent=this,e.createNodeViews(),this.RootComponent=(0,i.jsx)(c,{editor:e,node:t})}setRenderer(e,t){this.renderers.set(e,t),this.mounted&&this.setState({counter:this.state.counter+1})}removeRenderer(e){this.renderers.delete(e),this.mounted&&this.setState({counter:this.state.counter+1})}render(){let{editor:e}=this.props;return e?(0,i.jsx)("div",{className:"ProseMirror",children:this.RootComponent}):null}constructor(e){super(e),this.RootComponent=null,this.renderers=new Map,this.mounted=!1,this.editorContentRef=a.createRef(),this.editorContentChildren=a.createRef(),this.state={counter:0},this.init()}}let d=a.memo(s),c=e=>{let{node:t,editor:n}=e;return(0,i.jsx)(o.e.Provider,{value:{editor:n,node:t},children:(0,i.jsx)(r.VR,{children:(0,i.jsx)(l.$,{})})})}},74346:(e,t,n)=>{"use strict";n.d(t,{$:()=>x});var i=n(31085),a=n(81313),r=n(13236),o=n(69e3),l=n(14041),s=n(95186),d=n(95580),c=n(19534);let u=e=>{let t={};for(let n of e.attributes){let e=n.name;"class"===e?t.className=n.value:"contenteditable"===e&&"false"===n.value||(t[e]=n.value)}return t},p=(e,t,n,a)=>{let r=Array.from(n.contentComponent.renderers.values()).find(t=>t.props.node===e);if(r){let e=r.element.nodeName.toLowerCase()||"div",{style:n,...o}=u(r.element);return(0,i.jsx)(e,{"data-pos":t,...o,STYLE:"white-space: inherit;".concat(n),children:(0,i.jsx)(r.component,{...r.props,children:a})},r.id)}return null},h=e=>{var t;return null!==(t=e.config.renderHTMLforSSR)&&void 0!==t?t:e.config.renderHTML},m=e=>{let t={...e};return(null==t?void 0:t.style)&&(t.STYLE=t.style,delete t.style),(null==t?void 0:t.class)&&(t.className=t.class,delete t.class),(null==t?void 0:t.colspan)&&(t.colSpan=t.colspan,delete t.colspan),(null==t?void 0:t.rowspan)&&(t.rowSpan=t.rowspan,delete t.rowspan),t},g=(e,t)=>{var n;let i=(0,d.vC)(e,t.type);if(!i)return[];let a=e.extensionManager.attributes.filter(e=>e.type===t.type.name),o=(0,r.zU)(t,a),l=i;for(;!h(l)&&l.parent;)l=l.parent;let s=null===(n=h(l))||void 0===n?void 0:n.bind(i);if(!s)return[];let[c,u,p]=s({HTMLAttributes:o,node:t,mark:t,editor:e});return[c,m(u),p]},x=l.memo(e=>{let{node:t,editor:n,getPos:r}=(0,s.c)();if(!t||!n)return null;let d=e.as||"div",u=t.isInline||t instanceof o.CU?"span":"div",h=[],m="function"==typeof r?r():null,x=(e,t,r)=>{let o=(null===m?0:m)+t+1,s=p(e,o,n);if(s)return s;let d=t=>Array.from(e.marks).reverse().reduce((e,t)=>{let i=p(t,o,n,e);if(i)return i;let[a,s,d]=g(n,t)||[];return a?l.createElement(a,{key:r,...s},e):e},t),u=null===m?[]:(0,c.j5)(n,o),[h,f,v]=g(n,e);if(h&&f){let n=null;if(0===v&&e.firstChild){let i=[];e.forEach((e,n,a)=>{i.push(x(e,t+n,"".concat(r,"_").concat(a)))}),n=i,console.debug("[SSR NodeViewContent] HOLE",i)}else Array.isArray(v)?(console.debug("[SSR NodeViewContent] children array",v),n=[...v]):v&&(console.debug("[SSR NodeViewContent] children plain",v),n=v);let{nodeName:i,...s}=u.map(e=>{var t;return null===(t=e.type)||void 0===t?void 0:t.attrs}).reduce((e,t)=>({...e,...t}),{}),c={...f,...s,className:(0,a.cx)(s.class,f.class),"data-pos":o};return delete c.class,console.debug("[SSR NodeViewContent] non-nodeview:",r,c,v),d(l.createElement(h,{key:r,...c},n))}return e.isText?d((0,i.jsx)(l.Fragment,{children:e.textContent},r)):null};return t.forEach((e,n)=>{let i=h.length+1,a=x(e,n,"".concat(i));a?h.push(a):console.warn("%c [Simple NodeViewContent] UNKNOWN NODE $$$$$$$$$$$$$$$$$$$$$$$$$","background-color: aqua; font-weight: bold",{unknownNode:e,parentNode:t})}),(0,i.jsx)(d,{...e,"data-node-view-content":"",style:{whiteSpace:"pre-wrap",...e.style},children:(0,i.jsx)(u,{"data-node-view-content-inner":t.type.name,style:{whiteSpace:"inherit"},children:0===h.length?null:1===h.length?h[0]:h})})});x.displayName="NodeViewContent"},99100:(e,t,n)=>{"use strict";n.d(t,{t:()=>o});var i=n(35002),a=n(36832);class r extends a.b{initialize(){this.on("cardViewed",e=>{let{cardId:t,interval:n}=e;this.viewedCards[t]=this.viewedCards[t]||0,this.viewedCards[t]+=n});let e=()=>{var e;this.cardViewedThreshold=null!==(e=i.of.get("cardViewedThreshold"))&&void 0!==e?e:5e3};i.of.subscribe("cardViewedThreshold",e),e()}flush(){let e={};for(let t in this.viewedCards){let n=this.viewedCards[t];n&&!(n<this.cardViewedThreshold)&&(e[t]=Math.floor(n/1e3))}this.emit("flush",{viewed:e}),this.viewedCards={}}destroy(){this.flush(),this.off("cardViewed"),this.off("flush")}constructor(...e){super(...e),this.viewedCards={},this.cardViewedThreshold=i.of.get("cardViewedThreshold")}}let o=new r},96964:(e,t,n)=>{"use strict";n.d(t,{bO:()=>R,gT:()=>_,Vo:()=>L,E1:()=>E});var i=n(12917),a=n(20501),r=n(12327),o=n(40074),l=n.n(o),s=n(34789),d=n.n(s),c=n(35002),u=n(45709),p=n(3040),h=n(3601);let m=()=>[{key:"autoComplete",name:()=>r.Ru._({id:"ZyVTQp"}),shortcut:h.H,nodeName:"paragraph",icon:p._$C,keywords:["continue","autocomplete","typeahead","complete","continue","ai"],execute:e=>{e.commands.autoComplete()},featureFlag:"aiAutocomplete",creditType:"autocomplete",needsConnection:!0},{key:"aiCardAfter",name:()=>r.Ru._({id:"yk2NpI"}),nodeName:"card",icon:p._$C,execute:e=>e.commands.insertCardAfter((0,u.G)().aiCardAfter),checkDisabled:e=>!e.schema.nodes.card,keywords:["card","below","after","new"],featureFlag:"addCard2",needsConnection:!0}];var g=n(16262),x=n(95785),f=n(99603),v=n(69180),b=n(49572),y=n(60443),w=n(97025),j=n(97661),k=n(59277),C=n(80917),S=n(44275),A=n(46896);let z=()=>[{key:"toggle",name:()=>r.Ru._({id:"JFciKP"}),description:()=>r.Ru._({id:"Woijyj"}),keywords:["toggle","expand","collapse","disclosure","details"],nodeName:"toggle",icon:i.ijD,execute:e=>{let t=(0,S.n)();(0,A.bG)(t,!0),e.chain().insertContent({...(0,u.G)().toggle,attrs:{id:t}}).selectInsertedNode().run()},dragStartFn:e=>{let t=(0,S.n)();(0,A.bG)(t,!0),(0,C.f)(e,{...(0,u.G)().toggle,attrs:{id:t}})}}];var I=n(95580);let R=()=>[{key:"insertCardAfter",name:()=>r.Ru._({id:"coNSGP"}),nodeName:"card",icon:i.UiS,execute:e=>e.commands.insertCardAfter(),checkDisabled:e=>!e.schema.nodes.card,keywords:["card","below","after","new"]},{key:"insertCardInside",name:()=>r.Ru._({id:"lOmsEK"}),nodeName:"card",icon:i.ViY,execute:e=>e.commands.insertNestedCard(),checkDisabled:e=>!e.schema.nodes.card,keywords:["nested","card","sub"]},{key:"splitCard",name:()=>r.Ru._({id:"ONXbeB"}),nodeName:"card",icon:i.ufr,shortcut:"***",execute:e=>e.commands.splitCardAtSelection(),checkDisabled:e=>!e.schema.nodes.card,dragStartFn:e=>{(0,C.f)(e,(0,u.G)().normalText)},dragEndFn:e=>{e.chain().splitCardAtSelection().focusDelayed().run()},keywords:["split"]},{key:"title",name:()=>r.Ru._({id:"XxGz2W"}),nodeName:"title",icon:a.jwR,shortcut:"! Title",execute:e=>{e.chain().focus().setFontSize("title").run()},checkDisabled:(e,t)=>!!t&&!(0,I.zi)(e,"title"),keywords:["title","large"]},{key:"display",name:()=>r.Ru._({id:"ySF22d"}),nodeName:"title",icon:a.jwR,shortcut:"!! Title",execute:e=>{e.chain().focus().setFontSize("titleLg").run()},checkDisabled:(e,t)=>!!t&&!(0,I.zi)(e,"title"),keywords:["display","large"]},{key:"monster",name:()=>r.Ru._({id:"+nhv+2"}),nodeName:"title",icon:a.jwR,shortcut:"!!! Ahhhh",execute:e=>{e.chain().focus().setFontSize("titleXl").run()},checkDisabled:(e,t)=>!!t&&!(0,I.zi)(e,"title"),keywords:["monster","huge"]},{key:"h1",name:()=>r.Ru._({id:"lXKZGw"}),nodeName:"heading",icon:i.RDv,shortcut:"# Heading 1",execute:e=>{e.chain().focus().setFontSize("h1").run()},checkDisabled:(e,t)=>!!t&&!(0,I.zi)(e,"heading"),keywords:["heading","h1"]},{key:"smallText",name:()=>r.Ru._({id:"LBkaLa"}),nodeName:"paragraph",icon:a.jwR,shortcut:"/sm",execute:e=>{e.chain().focus().setFontSize("sm").run()},checkDisabled:(e,t)=>!!t&&!(0,I.zi)(e,"body"),keywords:["sm","small","paragraph"]},{key:"normalText",name:()=>r.Ru._({id:"5NwZ8t"}),nodeName:"paragraph",icon:i.jwR,shortcut:"/md",execute:e=>{e.chain().focus().setFontSize("md").run()},checkDisabled:(e,t)=>!!t&&!(0,I.zi)(e,"body"),keywords:["md","normal","paragraph","default","body"]},{key:"largeText",name:()=>r.Ru._({id:"0Sz17G"}),nodeName:"paragraph",icon:i.jwR,shortcut:"/lg",execute:e=>{e.chain().focus().setFontSize("lg").run()},checkDisabled:(e,t)=>!!t&&!(0,I.zi)(e,"body"),keywords:["lg","large","paragraph"]},{key:"h2",name:()=>r.Ru._({id:"El7NbA"}),nodeName:"heading",icon:i.K1h,shortcut:"## Heading 2",execute:e=>{e.chain().focus().setFontSize("h2").run()},checkDisabled:(e,t)=>!!t&&!(0,I.zi)(e,"heading"),keywords:["heading","h2"]},{key:"h3",name:()=>r.Ru._({id:"SFN6dN"}),nodeName:"heading",icon:i.Dn6,shortcut:"### Heading 3",execute:e=>{e.chain().focus().setFontSize("h3").run()},checkDisabled:(e,t)=>!!t&&!(0,I.zi)(e,"heading"),keywords:["heading","h3"]},{key:"h4",name:()=>r.Ru._({id:"nJeKmw"}),nodeName:"heading",icon:i.wLS,shortcut:"#### Heading 4",execute:e=>{e.chain().focus().setFontSize("h4").run()},checkDisabled:(e,t)=>!!t&&!(0,I.zi)(e,"heading"),keywords:["heading","h4"]},{key:"openEmojiPicker",name:()=>r.Ru._({id:"tKlWWY"}),nodeName:"emoji",icon:a.H82,execute:e=>e.commands.openEmojiPicker(),keywords:["symbol","emoji"]},{key:"bulletedList",name:()=>r.Ru._({id:"ynb7Kh"}),nodeName:y.e.Bullet,icon:i.pch,shortcut:"- Item",execute:e=>{e.chain().setListItems({variant:y.e.Bullet}).selectInsertedNode().run()},checkDisabled:(e,t)=>!!t&&!(0,I.aq)(e,y.e.Bullet),keywords:["bullets","unordered","ul","list"]},{key:"numberedList",name:()=>r.Ru._({id:"M3G9ZD"}),nodeName:y.e.Numbered,icon:i.Tsj,shortcut:"1. Item",execute:e=>{e.chain().setListItems({variant:y.e.Numbered}).selectInsertedNode().run()},checkDisabled:(e,t)=>!!t&&!(0,I.aq)(e,y.e.Numbered),keywords:["numbers","numbered","ordered","ol","list"]},{key:"todoList",name:()=>r.Ru._({id:"rCIbrq"}),nodeName:y.e.Todo,icon:i.AgW,shortcut:"[] Item",execute:e=>{e.chain().setListItems({variant:y.e.Todo}).selectInsertedNode().run()},checkDisabled:(e,t)=>!!t&&!(0,I.aq)(e,y.e.Todo),keywords:["todo","task","checkbox","list","checklist"]},{key:"blockquote",name:()=>r.Ru._({id:"OLMhPm"}),nodeName:"blockquote",icon:i.R9H,shortcut:"> Quote",execute:e=>e.chain().focus().toggleBlockquote().run(),keywords:["quote","blockquote"]},...(0,g.A3)(),{key:"buttonGroup",name:()=>r.Ru._({id:"hxBFty"}),nodeName:"buttonGroup",icon:i.A8r,execute:e=>e.commands.insertContentAndSelect((0,u.G)().buttonGroup),description:()=>r.Ru._({id:"IvDo5O"}),keywords:["button","link","click","call to action"]},{key:"codeBlock",name:()=>r.Ru._({id:"4A3Yzu"}),nodeName:"codeBlock",icon:i.jTw,shortcut:"```",execute:e=>{e.chain().focus().setCodeBlock().run()},keywords:["code","block","codeblock"]},{key:"mathBlock",name:()=>r.Ru._({id:"TI6GY9"}),nodeName:"math_display",featureFlag:"math",icon:i.YLF,keywords:["math","equation","latex","katex"],execute:e=>e.chain().focus().insertContent((0,u.G)().mathBlock).run(),dragEndFn:()=>{},description:()=>r.Ru._({id:"mBJFYh"})},{key:"mathInline",name:()=>r.Ru._({id:"qc9cD+"}),featureFlag:"math",nodeName:"math_inline",icon:i.Dkf,keywords:["math","equation","latex","katex"],execute:e=>e.chain().focus().insertMathInline().run(),shortcut:"$x^2$ "},{key:"table2",name:()=>r.Ru._({id:"3gSgpL"}),keywords:["table","grid","data"],nodeName:"table",shortcut:"/table",icon:i.w97,execute:e=>e.commands.insertTable({rows:2,cols:2,withHeaderRow:!1})},{key:"table3",name:()=>r.Ru._({id:"ZjN50+"}),keywords:["table","grid","data"],nodeName:"table",icon:i.w97,execute:e=>e.commands.insertTable({rows:3,cols:3,withHeaderRow:!1})},{key:"table4",name:()=>r.Ru._({id:"64S2d0"}),keywords:["table","grid","data"],nodeName:"table",icon:i.w97,execute:e=>e.commands.insertTable({rows:4,cols:4,withHeaderRow:!1})},{key:"columns2",name:()=>r.Ru._({id:"vVJ2/D"}),keywords:["columns","layout","grid","two"],nodeName:"gridLayout",shortcut:"/columns",icon:i.oZz,execute:e=>e.commands.insertLayout(2)},{key:"columns3",name:()=>r.Ru._({id:"OnuuaA"}),keywords:["columns","layout","grid","three"],nodeName:"gridLayout",icon:i.oZz,execute:e=>e.commands.insertLayout(3)},{key:"columns4",name:()=>r.Ru._({id:"hexbw8"}),keywords:["columns","layout","grid","four"],nodeName:"gridLayout",icon:i.oZz,execute:e=>e.commands.insertLayout(4)},{key:"contributors",name:()=>r.Ru._({id:"YqsXfH"}),nodeName:"contributors",icon:i.hP6,execute:e=>e.commands.insertContentAndSelect((0,u.G)().contributors),keywords:["contributors","authors","credits"]},{key:"divider",name:()=>r.Ru._({id:"R8AthW"}),nodeName:"divider",icon:i.adM,keywords:["hr","rule","line","divider"],shortcut:"---",execute:e=>e.commands.insertContentAndSelect((0,u.G)().divider)},{key:"tableOfContents",name:()=>r.Ru._({id:"9FTolD"}),nodeName:"tableOfContents",icon:i.o97,execute:e=>e.commands.insertContentAndSelect((0,u.G)().tableOfContents,-1),keywords:["toc","contents"]},{key:"gallery",name:()=>r.Ru._({id:"U+kFad"}),description:()=>r.Ru._({id:"GqdREM"}),nodeName:"gallery",shortcut:"/gallery",icon:i.Qyz,keywords:["gallery","image","layout","filmstrip","carousel"],execute:e=>e.commands.insertContentAndSelect((0,u.G)().gallery)},{key:"logo",name:()=>r.Ru._({id:"YkFus/"}),description:()=>r.Ru._({id:"YRtGxa"}),nodeName:"gallery",shortcut:"/logos",icon:i.a8v,keywords:["logo","logos","gallery"],execute:e=>e.chain().insertContentAndSelect((0,u.G)().logoGallery).run()},{key:"footnote",name:()=>r.Ru._({id:"dOxPd4"}),nodeName:"footnote",shortcut:"^note^",icon:i.sxe,execute:e=>{let t=(0,v.pN)(),n={...(0,u.G)().footnote,attrs:{noteId:t}};(0,v.Wj)(t,!0),e.commands.insertContent(n)},dragStartFn:e=>{let t=(0,v.pN)(),n={...(0,u.G)().footnote,attrs:{noteId:t}};(0,v.Wj)(t,!0),(0,C.f)(e,n)},checkDisabled:b.Q,keywords:["footnote","note","reference"]},...(0,x.V)(),...z(),...(0,w.D)(),...(0,k.WP)(),...(0,k.Wg)(),...(0,f.A)(),...(0,j.b)(),...m()],E=()=>l()(R(),e=>e.priority),L=()=>d()(R(),"key"),_=function(e,t){var n;let i=!(arguments.length>2)||void 0===arguments[2]||arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return!!(t.needsConnection&&a||t.featureFlag&&!c.of.get(t.featureFlag)||(null===(n=t.checkDisabled)||void 0===n?void 0:n.call(t,e,i)))||!!i&&!(0,I.Bi)(e,t.nodeName)}},45709:(e,t,n)=>{"use strict";n.d(t,{G:()=>s});var i=n(12327),a=n(16262),r=n(42717),o=n(51436);let l=()=>i.Ru._({id:"9FTolD"}),s=()=>({title:{type:"title",attrs:{level:1}},h1:{type:"heading",attrs:{level:1}},normalText:{type:"paragraph"},h2:{type:"heading",attrs:{level:2}},h3:{type:"heading",attrs:{level:3}},h4:{type:"heading",attrs:{level:4}},bulletedList:{type:"bullet",attrs:{indent:0}},numberedList:{type:"numbered",attrs:{indent:0}},todoList:{type:"todo",attrs:{indent:0}},blockquote:{type:"blockquote",content:[{type:"paragraph"}]},codeBlock:{type:"codeBlock"},mathBlock:{type:"math_display"},button:{type:"button",content:[{type:"text",text:i.Ru._({id:"uWe4QF"})}]},buttonGroup:{type:"buttonGroup",content:[{type:"button",content:[{type:"text",text:i.Ru._({id:"uWe4QF"})}]}]},table2:{type:"table",content:[{type:"tableRow",content:[{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]}]},{type:"tableRow",content:[{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]}]}]},table3:{type:"table",content:[{type:"tableRow",content:[{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]}]},{type:"tableRow",content:[{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]}]},{type:"tableRow",content:[{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]}]}]},table4:{type:"table",content:[{type:"tableRow",content:[{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]}]},{type:"tableRow",content:[{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]}]},{type:"tableRow",content:[{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]}]},{type:"tableRow",content:[{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]}]}]},columns2:{type:"gridLayout",content:[{type:"gridCell",content:[{type:"paragraph"}]},{type:"gridCell",content:[{type:"paragraph"}]}]},columns3:{type:"gridLayout",content:[{type:"gridCell",content:[{type:"paragraph"}]},{type:"gridCell",content:[{type:"paragraph"}]},{type:"gridCell",content:[{type:"paragraph"}]}]},columns4:{type:"gridLayout",content:[{type:"gridCell",content:[{type:"paragraph"}]},{type:"gridCell",content:[{type:"paragraph"}]},{type:"gridCell",content:[{type:"paragraph"}]},{type:"gridCell",content:[{type:"paragraph"}]}]},insertCardInside:{type:"card",content:[{type:"cardLayoutItem",attrs:{itemId:"body",background:{}},content:[{type:"heading",attrs:{level:1}}]}]},aiCardAfter:{type:"card",attrs:{generatorInput:r.O},content:[{type:"paragraph"}]},footnote:{type:"footnote",content:[{type:"paragraph"}]},contributors:{type:"contributors"},divider:{type:"divider"},tableOfContents:[{type:"heading",attrs:{level:3},content:[{type:"text",text:l()}]},{type:"tableOfContents"}],gallery:{type:"gallery",content:[]},logoGallery:{type:"gallery",attrs:{layout:"logo"},content:[]},...(0,o.s2)(),...(0,a.i)(),toggle:{type:"toggle",content:[{type:"toggleSummary"},{type:"paragraph"}]}})},77256:(e,t,n)=>{"use strict";n.d(t,{E1:()=>i.E1,GO:()=>r.G,Jb:()=>a.J,Vo:()=>i.Vo,fS:()=>a.f,gT:()=>i.gT});var i=n(96964),a=n(80917),r=n(45709)},80917:(e,t,n)=>{"use strict";n.d(t,{J:()=>o,f:()=>r});var i=n(69e3),a=n(10458);let r=(e,t)=>{let n=Array.isArray(t)?t:[t],a=i.Ji.fromJSON(e.schema,{content:n});e.view.dragging={slice:a,move:!0},e.commands.setTextSelection(e.state.selection.from)},o=(e,t)=>{a.zS.track(a.VV.NODE_INSERTED,{node_name:e.nodeName,command:e.key,method:t}),"card"===e.nodeName&&a.zS.track(a.VV.CARD_CREATED,{method:t,command:e.key})}},83707:(e,t,n)=>{"use strict";n.d(t,{G:()=>O});var i=n(31085),a=n(14608),r=n(59742),o=n(9746),l=n(34363),s=n(62313),d=n(18201),c=n(18658),u=n(25420),p=n(65446),h=n(38735),m=n(12761),g=n(95640),x=n(81570),f=n(14041),v=n(86416),b=n(91559),y=n(4977),w=n(93090);let j=e=>{let{currentAttributes:t,updateAttributes:n,editor:i,isMounted:a}=e,r=(0,f.useRef)({currentAttributes:t,updateAttributes:n,sourceKey:t.source});r.current.currentAttributes=t,r.current.updateAttributes=n,(0,f.useEffect)(()=>{r.current.sourceKey=r.current.currentAttributes.source},[t.tempUrl,t.src]),(0,f.useEffect)(()=>{if(!i||a)return;let{src:e,tempUrl:t,uploadStatus:n}=r.current.currentAttributes;t&&!e&&n!==y.A.Uploading&&(console.log("[useUploadOnUnmount] uploading tempUrl:",t),r.current.updateAttributes({uploadStatus:y.A.Uploading,source:r.current.sourceKey}),(0,w.XE)(i,t))},[i,a])};var k=n(19099),C=n(62911),S=n(64225),A=n(14285),z=n(52417),I=n(73818),R=n(36830),E=n(95580),L=n(2696),_=n(5933),M=n(46511),N=n(8077),T=n(83380),P=n(91500);let O=f.memo(e=>{let{editor:t}=e;(0,L.lC)(t);let n=(0,L.CJ)(t),y=(0,T.f)(),w=(0,S.GV)(_.nD),O=t.state.selection,D=(0,f.useMemo)(()=>(0,P.Am)(t,O),[t,O]),F=null==D?void 0:D.attrs.id,H=(0,S.GV)((0,A.No)(F||"")),{currentMediaDrawerSourceKey:W,setMediaDrawerSourceKeyAction:B,isQuickAction:V}=(0,I.Bz)(),G=z.Fn[W],{isConnected:U}=(0,b.u)(),K=!!(U||G.availableOffline),q=(0,S.GV)(_.rp),J=D&&(0,P.Nx)(t,D.type),$=n&&!!(q&&J&&w),Y=(0,f.useRef)(null),Q=(0,f.useCallback)(()=>{y({isOpen:!1}),O instanceof x.nh&&t.chain().selectNodeAtPos(O.from,!1).focus().run()},[t,O,y]),X=(0,R.N)(t);(0,f.useEffect)(()=>{J||y({isOpen:!1})},[J,y]),(0,f.useEffect)(()=>{$&&setTimeout(()=>{if(!Y.current||!K)return;let e=(0,h.ep)(Y.current);e&&!(e.length<1)&&(0,m.X)(e[0],{nextTick:!0})},100)},[K,$,t]),(0,f.useEffect)(()=>{if(!D)return;let{attrs:e,mediaType:n,type:i}=D;(0,P.Nx)(t,i)&&(!t.isSiteNavbarEditor||(0,E.We)(t))&&!V&&B("embed"===n&&null===e.source?k.J.key:e.source||W)},[D,t,B,W,V]);let Z=(0,f.useCallback)(e=>{H&&A.RR.emit("cancelRemoveBg",{id:F||""}),(0,P.vI)({editor:t,selection:O,sourceKey:W,attrs:e,resizeToFit:null==G?void 0:G.resizeToFit})},[t,H,W,O,F,null==G?void 0:G.resizeToFit]),ee=(null==D?void 0:D.attrs)||{};j({currentAttributes:ee,updateAttributes:Z,editor:t,isMounted:$});let et=(0,f.useCallback)(()=>{(0,P.vI)({editor:t,selection:O,sourceKey:W,attrs:{source:W},nodeName:"mediaPlaceholder",resetAttrs:!0})},[W,O,t]),en=(0,M.o)(),ei=(null==D?void 0:D.editType)||"node",ea=(0,f.useCallback)(e=>(null==D?void 0:D.mediaType)==="embed"?"embed"===e.nodeName||"video"===e.nodeName:(null==D?void 0:D.mediaType)==="image"?"image"===e.nodeName:(null==D?void 0:D.mediaType)==="icon"?"image.icon"===e.key||"image.custom"===e.key:!!e.nodeName,[D]),er=z.ez[W];return(0,i.jsxs)(a._,{isOpen:$,onClose:Q,size:en,trapFocus:!1,blockScrollOnMount:!1,children:[(0,i.jsx)(r.m,{background:"none"}),(0,i.jsxs)(o.z,{onKeyDown:X,"data-in-editor-focus":!0,"data-testid":"media-drawer","data-test-media-source":W,children:[(0,i.jsx)(l.r,{fontSize:"x-large",children:(0,i.jsxs)(s.z,{me:7,children:[(0,i.jsx)(g.x6,{id:"xYilR2"}),(0,i.jsx)(d.h,{}),(null==D?void 0:D.mediaType)==="image"&&!t.isSiteNavbarEditor&&(0,i.jsx)(v.V,{onClick:Q,image:null==D?void 0:D.attrs,backFrom:{source:"mediaDrawer",id:(null==D?void 0:D.attrs.id)||""}})]})}),(0,i.jsxs)(c.c,{overflowX:"hidden",sx:{scrollbarGutter:"stable"},display:"flex",flexDirection:"column",pt:0,children:[(0,i.jsx)(C.r,{isConnected:K,description:(0,i.jsx)(g.x6,{id:"2y7sUG"}),mb:6}),(0,i.jsx)(N.H,{currentSource:G,onChange:e=>B(e,!0),isValidSource:ea}),G&&(0,i.jsx)(u.s,{ref:Y,opacity:K?1:.4,pointerEvents:K?"initial":"none",flex:"1",direction:"column",children:(0,i.jsx)(er,{editor:t,updateAttributes:Z,currentAttributes:ee,resetToPlaceholder:et,editType:ei})})]}),(0,i.jsx)(p.s,{"data-testid":"media-drawer-close"})]})]})});O.displayName="MediaDrawer"},8077:(e,t,n)=>{"use strict";n.d(t,{H:()=>y});var i=n(31085),a=n(63341),r=n(18528),o=n(80853),l=n(18651),s=n(80532),d=n(40173),c=n(72821),u=n(48310),p=n(33473),h=n(25420),m=n(27670),g=n(20501),x=n(24221),f=n(14041),v=n(35002),b=n(52417);let y=f.memo(e=>{var t;let{currentSource:n,onChange:f,isValidSource:y}=e,w=null==n?void 0:null===(t=n.image)||void 0===t?void 0:t.src,j=(0,v.mt)();return(0,i.jsxs)(a.W,{children:[(0,i.jsx)(r.I,{as:o.$,w:"100%",textAlign:"start",rightIcon:(0,i.jsx)(x.g,{icon:g.Jt$}),leftIcon:w?(0,i.jsx)(l._,{h:"1em",w:"1em",objectFit:"cover",src:w}):(null==n?void 0:n.icon)?(0,i.jsx)(x.g,{icon:null==n?void 0:n.icon,color:"var(--chakra-colors-trueblue-600)",fixedWidth:!0}):void 0,mb:4,"data-testid":"media-drawer-menu-button",flexShrink:"0",children:(0,i.jsx)(s.az,{noOfLines:1,wordBreak:"break-all",overflowX:"hidden",textOverflow:"ellipsis",children:(null==n?void 0:n.label())||"Source"})}),(0,i.jsx)(d.Z,{children:(0,i.jsx)(c.c,{zIndex:"modalPopover",maxH:"60vh",overflowY:"auto",pos:"relative","data-media-drawer-menu":!0,children:Object.entries(b.jU).map(e=>{var t;let[a,r]=e,o=r.filter(e=>!(e.checkDisabled&&e.checkDisabled())&&!e.disabled&&(!e.featureFlag||!!j[e.featureFlag])&&y(e));return 0===o.length?null:(0,i.jsx)(u.i,{title:null!==(t=b.K4[a]())&&void 0!==t?t:a,type:"radio",onChange:f,value:null==n?void 0:n.key,children:o.map(e=>{let{label:t,key:n,icon:a,image:r,badge:o}=e;return(0,i.jsx)(p.k,{value:n,children:(0,i.jsxs)(h.s,{direction:"row",align:"center",children:[r?(0,i.jsx)(l._,{display:"inline",marginInlineEnd:2,h:"1em",w:"1em",objectFit:"contain",src:r.src}):a?(0,i.jsx)(s.az,{display:"inline",marginInlineEnd:2,color:"trueblue.600",children:(0,i.jsx)(x.g,{icon:a})}):(0,i.jsx)(i.Fragment,{}),t(),o&&(0,i.jsx)(m.E,{marginInlineStart:2,colorScheme:"green",children:o()})]})},n)})},a)})})})]})});y.displayName="MediaDrawerMenu"},83380:(e,t,n)=>{"use strict";n.d(t,{G:()=>l,f:()=>s});var i=n(14041),a=n(64225),r=n(5933),o=n(95709);let l=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=(0,a.KA)();if(!t){console.error("[MediaDrawer].openMediaDrawer: can't open because getStore() returned ".concat(t));return}e&&t.dispatch((0,o.Hy)()),t.dispatch((0,r.Zf)({isEditingMedia:!0}))},s=()=>{let e=(0,a.CU)();return(0,i.useCallback)(t=>{let{isOpen:n,shouldResetSourceKey:i=!0}=t;i&&e.dispatch((0,o.Hy)()),e.dispatch((0,r.Zf)({isEditingMedia:n}))},[e])}},91500:(e,t,n)=>{"use strict";n.d(t,{Am:()=>c,Nx:()=>p,vI:()=>u});var i=n(69e3),a=n(81570),r=n(90406),o=n(59534),l=n(88693),s=n(95580),d=n(52417);let c=(e,t,n)=>{let i=(0,o.A)({editor:e,selection:t,freshNode:n});if(i){if("smartLayoutCell"===i.node.type.name){let e=(0,l.B)(i.node.attrs.variantKey);if(!i.attrs.source){var r,d,c;if(null===(d=e.defaultAttrs)||void 0===d?void 0:null===(r=d.image)||void 0===r?void 0:r.source)i.attrs.source=e.defaultAttrs.image.source;else{let e=(0,s.F2)(t.$from.parent.content).find(e=>{var t;return null===(t=e.attrs.image)||void 0===t?void 0:t.source});i.attrs.source=null==e?void 0:null===(c=e.attrs.image)||void 0===c?void 0:c.source}}}let e="accessory"===i.area||"background"===i.area?i.imgKeyPath:void 0;return{...i,type:i.node.type,accesoryKeyPath:e,editType:"accessory"===i.area||"background"===i.area?i.area:void 0}}if(t instanceof a.nh)return{editType:"node",...t.node};if(t instanceof a.U3){if(t.to-t.from==1&&t.$from.nodeAfter&&!e.isActive("link"))return{editType:"node",...null!=n?n:t.$from.nodeAfter};if(e.isActive("link"))return{attrs:e.getAttributes("link"),type:e.schema.marks.link,mediaType:"embed"}}return null},u=e=>{let t,{editor:n,selection:o,sourceKey:l,attrs:s,nodeName:u,resetAttrs:p,resizeToFit:h}=e,{from:m}=o,g=c(n,o);if(g){if(p)t={};else if(g.type instanceof i.sX)t=g.attrs;else{var x;let e=n.state.doc.nodeAt(m);if(!e||e.type!==g.type&&e.attrs.id!==g.attrs.id){console.error("[updateSelectedMedia] Node has moved, cant update");return}t=(null===(x=c(n,o,e))||void 0===x?void 0:x.attrs)||{}}}else{console.error("[updateSelectedMedia] No selectedMedia to update");return}let f={...t,source:l,...s};if(h&&"node"===g.editType&&(f=(0,r.Ez)(f)),(null==g?void 0:g.type.name)==="link"){f.href=f.href||f.sourceUrl;let{from:e,to:t}=o;n.chain().extendMarkRange("link").updateAttributes("link",f).setTextSelection({from:e,to:t}).run();return}if("smartDiagram"===g.type.name&&g.accesoryKeyPath){n.chain().updateSmartDiagramData(m,g.accesoryKeyPath,f).run();return}if(g.accesoryKeyPath){n.chain().updateAttributesAtPos(m,{[g.accesoryKeyPath]:f}).run();return}let v=d.Fn[f.source],b=u||v.nodeName;b&&n.commands.command(e=>{let{tr:t,state:n}=e,i=n.schema.nodes[b];return!!i&&(t.setNodeMarkup(m,i,f).setSelection(a.nh.create(t.doc,m)).setMeta("annotationEvent",{type:"update-node-attrs",pos:m}),!0)})},p=(e,t)=>{let n=(0,s.vC)(e,t);return!!n&&!!n.config.accessoryImageKey||"smartDiagram"===t.name||(t instanceof i.Z6?(0,r.bi)(t):t instanceof i.sX&&"link"===t.name)}},46511:(e,t,n)=>{"use strict";n.d(t,{o:()=>r});var i=n(78354);let a={base:"md","2xl":"lg"},r=()=>(0,i.h5)(a)},91939:(e,t,n)=>{"use strict";n.d(t,{L:()=>v,g:()=>b});var i=n(31085),a=n(32202),r=n(78872),o=n(35687),l=n(61778),s=n(95640),d=n(12327),c=n(14041),u=n(64225),p=n(16737),h=n(22762),m=n(5933),g=n(14e3),x=n(92405),f=n(59392);let v=e=>{let{cardId:t}=e,n=(0,u.GV)(m.wC),i=(0,u.GV)(m.Jo),o=(0,x.Io)({cardId:t,docId:null==i?void 0:i.id,isPresentMode:n===g.w.SLIDE_VIEW}),l=(0,a.d)(),{onCopy:s}=(0,r.i)(o);return{onCopyLinkClick:(0,c.useCallback)(()=>{s(),l({title:d.Ru._({id:"BVYvMa"}),status:"success",duration:3e3,position:"top"})},[s,l])}},b=e=>{let{attrs:t}=e,n=(0,h.K)(),{onCopyLinkClick:a}=v({cardId:t.id});return(0,i.jsx)(f.I,{onClick:e=>{var t;if(e.target&&(null===(t=e.target)||void 0===t?void 0:t.closest('[data-testid="open-share"]'))){e.preventDefault();return}a()},label:n?(0,i.jsx)(s.x6,{id:"F0YmUY"}):(0,i.jsxs)(o.B,{spacing:"0",children:[(0,i.jsx)(l.E,{children:(0,i.jsx)(s.x6,{id:"afMspw"})}),(0,i.jsx)(l.E,{fontSize:"xxs",color:"gray.400",children:(0,i.jsx)(s.x6,{id:"OpeWZK"})})]}),children:(0,i.jsx)(p.E,{isLocked:!n})})}},94745:(e,t,n)=>{"use strict";n.d(t,{Ht:()=>al});var i=n(31085),a=n(80532),r=n(62313),o=n(9104),l=n(13236),s=n(81570),d=n(14041),c=n(9138),u=n(64225),p=n(42849),h=n(474),m=n(17835),g=n(56922),x=n(63915),f=n(77583),v=n(5933),b=n(19534),y=n(12790),w=n(65056);let j=e=>{let t=(0,d.useRef)(null),n=(0,y.cq)(),{editor:a,tippyOptions:r,onHide:o,targetElement:l}=e;return(0,d.useEffect)(()=>{a&&a.commands.command(e=>{let{tr:i}=e;return i.setMeta(w.Q2,{element:t.current,tippyOptions:r,panelLifecycle:n,onHide:o,targetElement:l}),!0})},[a,r,n,o,l]),(0,i.jsx)("div",{ref:t,className:e.className,style:{visibility:"hidden"},children:e.children})};var k=n(90406),C=n(2696),S=n(74727),A=n(63341),z=n(18528),I=n(80853),R=n(72821),E=n(20501),L=n(24221),_=n(95640),M=n(12327),N=n(16262),T=n(59707),P=n(11138),O=n(48226),D=n(59392);let F=e=>{let{editor:t,attrs:n,selection:a}=e,r=(0,N._w)(),l=r[n.variant],s=l?l.icon:E.jyJ;return(0,i.jsxs)(A.W,{isLazy:!0,onClose:()=>(0,O.q)(t),children:[(0,i.jsx)(o.Tz,{placement:"top",label:(0,i.jsx)(_.x6,{id:"H8b4pf"}),"aria-label":M.Ru._({id:"H8b4pf"}),children:(0,i.jsx)(z.I,{as:I.$,variant:"toolbar",rightIcon:(0,i.jsx)(L.g,{icon:E.Jt$,transform:"shrink-6"}),size:"sm",onMouseDown:T.Fw,children:(0,i.jsx)(L.g,{icon:s})})}),(0,i.jsx)(R.c,{maxW:"auto",children:(0,i.jsxs)(S.e,{flex:"row",alignItems:"center",children:[Object.entries(r).map(e=>{let[r,{name:o,icon:l}]=e;return(0,i.jsx)(D.I,{label:o,icon:l,isActive:n.icon&&n.variant===r,onClick:()=>{t.chain().focus().updateAttributes("calloutBox",{variant:r,icon:!0}).selectNodeAtPos(a.from).run()}},o)}),(0,i.jsx)(P.q,{}),(0,i.jsx)(D.I,{label:n.icon?(0,i.jsx)(_.x6,{id:"Cs6LHm"}):(0,i.jsx)(_.x6,{id:"pjF2Hd"}),icon:E.Dfk,isActive:!n.icon,onClick:()=>{t.chain().focus().updateAttributes("calloutBox",{icon:!n.icon}).selectNodeAtPos(a.from).run()}},"icon")]})})]})};var H=n(57860);let W=e=>{let{editor:t,handleDelete:n,hasText:a=!1}=e,r=(0,d.useCallback)(()=>{t.chain().deleteSelectionAndSelectNear().run()},[t]);return a?(0,i.jsx)(I.$,{variant:"toolbar",onClick:n||r,color:"red.500",onMouseDown:T.Fw,size:"md",leftIcon:(0,i.jsx)(L.g,{icon:E.yLS}),children:(0,i.jsx)(_.x6,{id:"cnGeoo"})}):(0,i.jsx)(D.I,{label:(0,i.jsx)(_.x6,{id:"cnGeoo"}),icon:E.yLS,onClick:n||r,testId:"delete-node-button",color:"red.500"})};var B=n(32202),V=n(61778),G=n(3706),U=n(67965),K=n(5377),q=n(68228),J=n(96742),$=n(91559),Y=n(49880),Q=n(35002),X=n(90754),Z=n(24008),ee=n(18588),et=n(59742),en=n(97482),ei=n(34363),ea=n(65446),er=n(70323),eo=n(18658),el=n(2600),es=n(35687),ed=n(27670),ec=n(82680),eu=n(2241),ep=n(73893),eh=n(78776),em=n(84292),eg=n(44790),ex=n(71138),ef=n(60367),ev=n(9335);let eb=e=>{let{cardId:t,format:n,doc:a,editor:r,icon:o,badge:l,accentColor:s,label:d}=e,{handleExport:c,exportInProgress:u}=(0,ef.Up)({doc:a,source:"card_export_menu",editor:r,format:n,formatLabel:d,cardIds:[t],interceptFileExport:void 0});return(0,i.jsx)(em.N,{onClick:c,icon:o,formatLabel:d,accentColor:s,badge:l,exportInProgress:u,exportInProgressNote:(0,i.jsx)(_.x6,{id:"SJjTti"})})},ey=e=>{let{cardId:t,doc:n,editor:a,icon:r,badge:o,accentColor:l,label:s}=e,{interceptFileExport:d}=(0,eg.w)({doc:n,source:"card_export_menu",editor:a,fileName:n.title,cardIds:[t]}),{handleExport:c,exportInProgress:u}=(0,ef.Up)({doc:n,source:"card_export_menu",editor:a,format:"google_slides",formatLabel:s,cardIds:[t],interceptFileExport:d});return(0,i.jsx)(em.N,{onClick:c,icon:r,formatLabel:s,accentColor:l,badge:o,exportInProgress:u,exportInProgressNote:(0,i.jsx)(_.x6,{id:"SJjTti"})})},ew=e=>"google_slides"===e.format?(0,i.jsx)(eu.G_,{clientId:ep.$.GOOGLE_DRIVE_IMPORT_CLIENT_ID,children:(0,i.jsx)(ey,{...e})}):(0,i.jsx)(eb,{...e}),ej=(0,eh.A)(e=>{let{isOpen:t,onClose:n,cardId:a,editor:r}=e,o=(0,u.GV)(v.Jo),l=(0,Q.u)("googleSlidesExport");return(0,i.jsxs)(ee.aF,{isOpen:t,onClose:n,size:"lg",children:[(0,i.jsx)(et.m,{}),(0,i.jsxs)(en.$,{children:[(0,i.jsx)(ei.r,{children:(0,i.jsx)(_.x6,{id:"xRJ+bN"})}),(0,i.jsx)(ea.s,{}),(0,i.jsx)(er.c,{}),(0,i.jsx)(eo.c,{pt:"6",children:(0,i.jsxs)(el.T,{spacing:4,align:"start",children:[(0,i.jsxs)(es.B,{spacing:2,w:"100%",children:[(0,i.jsx)(ew,{cardId:a,format:"image",label:"PNG",icon:ex.q.png.icon,accentColor:ex.q.png.accentColor,doc:o,editor:r}),(0,i.jsx)(ew,{cardId:a,format:"pdf",label:"PDF",icon:ex.q.pdf.icon,accentColor:ex.q.pdf.accentColor,doc:o,editor:r}),(0,i.jsx)(ew,{cardId:a,format:"pptx",label:"PPTX",icon:ex.q.pptx.icon,accentColor:ex.q.pptx.accentColor,doc:o,editor:r}),l&&(0,i.jsx)(ew,{cardId:a,format:"google_slides",label:"Google Slides",icon:ex.q.google_slides.icon,accentColor:ex.q.google_slides.accentColor,badge:(0,i.jsx)(ed.E,{colorScheme:"green",children:(0,i.jsx)(_.x6,{id:"isRobC"})}),doc:o,editor:r})]}),(0,i.jsx)(V.E,{fontSize:"sm",color:"gray.600",children:(0,i.jsx)(_.x6,{id:"8LhjM/",components:{0:(0,i.jsx)(I.$,{variant:"link",as:"span",size:"sm",cursor:"pointer",onClick:()=>{n(),ev.LF.emit(ev.DN.OPEN_PAGE_SETUP,"cards")}})}})})]})}),(0,i.jsx)(ec.j,{children:(0,i.jsx)(S.e,{children:(0,i.jsx)(I.$,{onClick:()=>{n()},children:(0,i.jsx)(_.x6,{id:"DPfwMq"})})})})]})]})});var ek=n(91939),eC=n(9021),eS=n(74240),eA=n(11718),ez=n(55276),eI=n(31201),eR=n(40173),eE=n(48637),eL=n(76166),e_=n(35436),eM=n(33683),eN=n(18201),eT=n(12917),eP=n(3040),eO=n(55576),eD=n(15355),eF=n(71197),eH=n(43087),eW=n(14291),eB=n(10628),eV=n(10458),eG=n(71780),eU=n(32900),eK=n(14858),eq=n(60632),eJ=n(5283);let e$=e=>{let{attrs:t,...n}=e,a=(0,d.useRef)(null),r=(0,eF.tO)(void 0,"imageChat",eV.VV.GAMMA_UPSELL_CALLOUT_AI_CREDITS_IMAGES),{isOpen:l,onClose:s,onToggle:c}=(0,ez.j)();(0,eI.j)({ref:a,handler:e=>{if(!l)return;let t=e.target;null!=t&&t.closest("[data-image-chat-menu-trigger]")||s()}});let u=(0,d.useRef)(null),p=(0,eS.l)(t),{isInOfflineMode:h}=(0,$.u)(),{toggleBuddyChatPanel:m,isBuddyChatPanelOpen:g}=(0,eK.C)(),x=(0,d.useCallback)(()=>{g||(m(),eG.q.emit("hide",{}))},[g,m]),f=(0,d.useCallback)(function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];r()&&(x(),e&&t?setTimeout(()=>{eU.j.emit("sendMessage",{message:e})},200):setTimeout(()=>{eU.j.emit("prefillMessage",{message:e||""})},200))},[r,x]),v=(0,d.useCallback)(e=>{f(e.message?e.message():e.label(),!e.openWithoutSendingMessage)},[f]),{suggestions:b,generateSuggestionsStatus:y}=(0,eJ.s)(t),w=(0,d.useMemo)(()=>[{label:()=>M.Ru._({id:"7kAwBx"}),key:"quick-actions",operations:eY},{label:()=>M.Ru._({id:"nyQWMb"}),key:"suggested",operations:b.map(e=>({key:e,label:()=>e,creditCostType:"imageChat"})),loading:"generating"===y}],[b,y]);return p?(0,i.jsx)(o.L8,{isDark:!1,children:(0,i.jsxs)(A.W,{isLazy:!0,onClose:s,onOpen:c,isOpen:l,closeOnBlur:!1,initialFocusRef:u,children:[(0,i.jsx)(o.Tz,{label:(0,i.jsx)(_.x6,{id:"vKZEFh"}),placement:"top",shouldWrapChildren:!0,children:(0,i.jsxs)(z.I,{as:I.$,isActive:l,isDisabled:h,"data-image-chat-menu-trigger":!0,...n,children:[(0,i.jsx)(L.g,{icon:eP.p7g,fixedWidth:!0}),(0,i.jsx)(eA.D,{})]})}),(0,i.jsx)(eR.Z,{children:(0,i.jsx)(R.c,{"data-card-ai-menu":!0,minWidth:"320px",width:"fit-content",maxWidth:"min(360px, 80vw)",fontFamily:"body",fontSize:"md",border:"none","data-image-chat-menu-trigger":!0,maxH:"60vh",display:"flex",flexDirection:"column",children:(0,i.jsx)(eQ,{handleMessage:f,handleOperation:v,onClose:s,firstItemRef:a,inputRef:u,isDisabled:h,pb:2,groupedOperations:w,selected:t})})})]})}):null},eY=[{key:"chat",label:()=>M.Ru._({id:"LJNDI6"}),creditCostType:"imageChat",icon:eT.Y$q,message:()=>"",openWithoutSendingMessage:!0},{key:"remove-bg",label:()=>M.Ru._({id:"ylbfBl"}),creditCostType:"removeBackground",icon:E.IP$,checkEnabled:eq.d.removeBackground.checkEnabled},{key:"upscale",label:()=>M.Ru._({id:"OcutTC"}),creditCostType:"imageChat",icon:E.oZK,productFeature:"ai_models_plus",checkEnabled:eq.d.upscale.checkEnabled},{key:"vectorize",label:()=>M.Ru._({id:"ZF+2pT"}),creditCostType:"imageChat",icon:E.nlc,productFeature:"ai_premium_models",checkEnabled:eq.d.vectorize.checkEnabled},{key:"animate",label:()=>M.Ru._({id:"2qLe/y"}),creditCostType:"animateImage",icon:E.OxR,productFeature:"ai_premium_models",checkEnabled:eq.d.animate.checkEnabled}],eQ=(0,d.memo)(e=>{let{handleMessage:t,handleOperation:n,onClose:o,firstItemRef:l,inputRef:s,isDisabled:d,showCreditCosts:c=!0,opacityFadeUpsell:u=!1,groupedOperations:p,selected:h,...m}=e,{openUpsellModal:g}=(0,eB.I)(),x="-webkit-gradient(linear, left top, left bottom, from(rgba(0,0,0,1)), to(rgba(0,0,0,0)))";return(0,i.jsxs)(a.az,{px:.5,pt:.5,flex:1,overflowY:"auto",style:u?{WebkitMaskImage:x,maskImage:x}:void 0,...m,children:[(0,i.jsx)(eE.r,{children:(0,i.jsxs)(eL.M,{size:"sm",mb:2,children:[(0,i.jsx)(e_.W,{fontSize:"sm",color:"orchid.300",children:(0,i.jsx)(L.g,{icon:eP.p7g})}),(0,i.jsx)(eO._,{initialHeight:"32px",ref:s,paddingInlineStart:9,py:1.5,borderRadius:"xl",maxLength:300,isDisabled:d,onKeyDown:e=>{var n,i;if(!d){if("Enter"===e.key&&!e.shiftKey){e.preventDefault(),e.stopPropagation();let n=null===(i=s.current)||void 0===i?void 0:i.value;if(!n)return;t(n),o()}"ArrowDown"===e.key&&(null===(n=s.current)||void 0===n?void 0:n.value.length)===0&&(e.preventDefault(),e.stopPropagation(),l.current&&l.current.focus())}},placeholder:M.Ru._({id:"vKZEFh"})})]})}),p.map((e,t)=>{let a=e.operations.filter(e=>!e.checkEnabled||e.checkEnabled(h));return a&&0!==a.length?(0,i.jsx)(eE.r,{title:e.label(),children:a.map((e,a)=>{var s;let d=!e.productFeature||(0,eH.vT)(e.productFeature);return(0,i.jsx)(eM.D,{icon:(0,i.jsx)(L.g,{icon:null!==(s=e.icon)&&void 0!==s?s:eP._$C,fixedWidth:!0}),onClick:()=>{if(!d){g({segmentEvent:eV.VV.GAMMA_UPSELL_CALLOUT_AI_CREDITS_IMAGE_CHAT});return}n(e),o()},ref:0===a&&0===t?l:null,children:(0,i.jsxs)(r.z,{children:[(0,i.jsx)(V.E,{children:e.label()}),(0,i.jsx)(eN.h,{}),e.productFeature?(0,i.jsx)(eW.Ch,{productFeature:e.productFeature,canUseFeature:d}):c&&(0,i.jsx)(eD.G,{type:e.creditCostType,colorScheme:"blackAlpha",color:"blackAlpha.600",fontSize:"sm"})]})},e.key)})},e.key):null})]})});eQ.displayName="ChatDropdownMenuGroups";var eX=n(23331),eZ=n(29383),e0=n(49964),e1=n(31485),e2=n(26813);let e4=e=>{let{editor:t,selection:n,decorations:a}=e,{node:r,from:l}=n,s=r.attrs,c=(0,e1.Bn)(a),u=(0,e0.jh)(s,null==c?void 0:c.layout),p=(0,d.useCallback)(e=>{l&&t.commands.updateAttributesAtPos(l,{fitType:e})},[t,l]),h="fit"===u;return(0,i.jsx)(o.Tz,{label:h?(0,i.jsx)(_.x6,{id:"sShDhp"}):(0,i.jsx)(_.x6,{id:"VPxUGR"}),placement:"top",children:(0,i.jsx)(eC.K,{variant:h?"activeToolbar":"toolbar",size:"sm",icon:(0,i.jsx)(L.g,{icon:E.GZ1}),onClick:()=>p(h?"fill":"fit"),boxSize:7,p:0,my:0,"aria-label":M.Ru._({id:"l1XNCT"}),isActive:h})})};var e5=n(19098),e6=n(98903),e3=n(93185),e8=n(97864),e7=n(25676),e9=n(18651),te=n(17228),tt=n.n(te),tn=n(119),ti=n.n(tn),ta=n(32133),tr=n(14285),to=n(96712),tl=n(17539),ts=n(39452);let td=e=>{let[t,n]=(0,d.useState)(null);return(0,d.useEffect)(()=>((()=>{let t=new Image;t.src=e,t.onload=()=>{let{naturalWidth:e,naturalHeight:i}=t;n(e/i)}})(),()=>{n(null)}),[e]),t},tc=(e,t,n)=>{let i=e.view.domAtPos(t);if(!i)return;let{node:a,offset:r}=i,o=a.childNodes[r].querySelector("[data-change-focus-point-el]");o&&(o.style.backgroundPosition=n?"".concat(n.x,"% ").concat(n.y,"%"):"")},tu=e=>{var t;return null===(t=(0,ts.um)(e))||void 0===t?void 0:t.backgroundPos},tp=(e,t,n)=>{if(!t||!n)return;let i=(0,to.d_)(e.state,n);if(!i){console.error("ChangeFocusPoint - relative pos is null");return}tc(e,i,null);let a=e.state.doc.nodeAt(i);if(!a)return;let r=(0,ts.um)(a),o=(0,ts.wH)(a,{...r,backgroundPos:t});e.commands.updateAttributesAtPos(i,o)},th=e=>{let{editor:t,pos:n,node:i,isOpen:a}=e,r=(0,d.useRef)(null),o=(0,d.useRef)(null),l=(0,d.useRef)(null),[s,c]=(0,d.useState)(!1),u=(0,d.useRef)(),p=(0,d.useCallback)(e=>{let i=r.current;if(i){if(u.current=e,!e){i.style.left="calc(50% - 10px)",i.style.top="calc(50% - 10px)",c(!1);return}i.style.left="calc(".concat(e.x,"% - 10px)"),i.style.top="calc(".concat(e.y,"% - 10px)"),tc(t,n,e),c(50!==e.x||50!==e.y)}},[t,n]);(0,d.useEffect)(()=>{a&&p(tu(i))},[a,i,p]);let h=(0,d.useCallback)(()=>{let e={x:50,y:50};p(e);let i=(0,to.JO)(t.state,n);tp(t,e,i)},[p,t,n]),m=(0,d.useCallback)(e=>{let t=o.current;if(!t)return;let n=t.getBoundingClientRect(),i=n.width,a=n.height,r=(e.clientX-n.left)/i,l=(e.clientY-n.top)/a;p({x:ti()(100*tt()(r,0,1),2),y:ti()(100*tt()(l,0,1),2)})},[p]);return(0,d.useEffect)(()=>{let e=r.current,i=o.current;if(!e||!i)return;l.current=(0,to.JO)(t.state,n);let a=()=>{i.addEventListener("mousemove",m),window.addEventListener("mouseup",s)},s=()=>{i.removeEventListener("mousemove",m),window.removeEventListener("mouseup",s),tp(t,u.current,l.current)};return e.addEventListener("mousedown",a),()=>{e.removeEventListener("mousedown",a)}},[t,m,n]),(0,d.useEffect)(()=>{let e=o.current;if(!e)return;l.current=(0,to.JO)(t.state,n);let i=t=>{e.addEventListener("mousemove",m),window.addEventListener("mouseup",a),m(t)},a=()=>{e.removeEventListener("mousemove",m),window.removeEventListener("mouseup",a),tp(t,u.current,l.current)};return e.addEventListener("mousedown",i),()=>{e.removeEventListener("mousedown",i)}},[t,m,n]),{dotRef:r,dotContainerRef:o,canReset:s,resetDotPosition:h}},tm=e=>{let{node:t,editor:n,pos:r,isDisabled:l=!1}=e,s=(0,ts.um)(t),c=(null==s?void 0:s.src)||(null==s?void 0:s.tempUrl),p=td(c),h=(0,ts.Df)(n,t,r,s),m=(0,ta.d4)((0,tr.CU)(h)),{dotRef:g,dotContainerRef:x,canReset:f,resetDotPosition:v}=th({editor:n,pos:r,node:t,isOpen:m}),b=(0,u.jL)();return(0,d.useEffect)(()=>()=>{b((0,tr.zs)())},[b]),(0,eI.j)({ref:{current:x.current},handler(){b((0,tr.zs)())}}),(0,i.jsxs)(e5.A,{strategy:"absolute",placement:"top",isOpen:m,onClose:()=>b((0,tr.zs)()),children:[(0,i.jsx)(o.Tz,{label:(0,i.jsx)(_.x6,{id:"BmxaoW"}),placement:"top",children:(0,i.jsx)(a.az,{my:1,children:(0,i.jsx)(e6.d,{children:(0,i.jsx)(eC.K,{variant:"toolbar",size:"sm",icon:(0,i.jsx)(L.g,{icon:E.xD0}),boxSize:7,p:0,my:0,isDisabled:l,"aria-label":M.Ru._({id:"BmxaoW"}),onClick:()=>{b((0,tr.sI)({id:h}))}})})})}),(0,i.jsx)(e3.h,{children:(0,i.jsx)(e8.e,{p:1,children:(0,i.jsxs)(a.az,{ref:x,userSelect:"none",position:"relative",children:[(0,i.jsx)(a.az,{ref:g,borderRadius:"full",boxSize:5,pos:"absolute",zIndex:"overlay",border:"2px solid",borderColor:"gray.100",pointerEvents:"none",boxShadow:"0 0 0 2px rgba(0,0,0,.1)",bg:"white"}),c&&(0,i.jsx)(e7.g,{maxW:"300px",ratio:p||1,position:"relative",children:(0,i.jsx)(e9._,{pointerEvents:"none",src:(0,tl.Ub)(c,tl.p7,s.meta),fallbackSrc:c,objectFit:"cover",position:"absolute",top:0,insetStart:0,width:"100%",height:"100%"})}),(0,i.jsx)(I.$,{opacity:f?1:0,pos:"absolute",bottom:3,insetEnd:3,variant:"plain",size:"xs",onClick:v,children:(0,i.jsx)(_.x6,{id:"OfhWJH"})})]})})})]})};var tg=n(87145),tx=n(1771),tf=n(83272),tv=n(59835),tb=n(25420);let ty=e=>{let{icon:t,label:n,children:a,iconProps:r,isHidden:o,...l}=e;return o?null:(0,i.jsxs)(es.B,{direction:"row",spacing:8,alignItems:"center",justifyContent:"space-between",...l,children:[(0,i.jsxs)(tb.s,{gap:4,alignItems:"center",children:[t&&(0,i.jsx)(L.g,{icon:t,fixedWidth:!0,...r}),(0,i.jsx)(V.E,{children:n})]}),a]})},tw=e=>{let{icon:t,label:n,onClick:a,colorScheme:r="gray",secondaryIcon:o,secondaryLabel:l,secondaryAction:s,secondaryColorScheme:d="gray",isPrimaryActionDestructive:c=!1}=e;return(0,i.jsxs)(tb.s,{px:5,py:3,bg:"gray.100",mx:-4,mb:-4,justifyContent:l?"space-between":"center",alignItems:"center",children:[l&&s&&(0,i.jsx)(I.$,{variant:"link",size:"sm",colorScheme:d,leftIcon:o?(0,i.jsx)(L.g,{icon:o,fixedWidth:!0}):void 0,onClick:s,onMouseDown:T.Fw,children:l}),(0,i.jsx)(I.$,{variant:c?"error-link":"link",size:"sm",colorScheme:r,leftIcon:t?(0,i.jsx)(L.g,{icon:t,fixedWidth:!0}):void 0,onClick:a,onMouseDown:T.Fw,children:n})]})},tj=e=>{let{...t}=e;return(0,i.jsx)(er.c,{my:1,...t})},tk=e=>{let{children:t,...n}=e;return(0,i.jsx)(es.B,{spacing:4,p:4,...n,children:t})},tC="14px",tS="28px",tA=e=>{let{label:t,withSidePadding:n=!1,children:a,...r}=e;return(0,i.jsxs)(es.B,{direction:"row",spacing:3,...r,children:[t&&(0,i.jsx)(es.B,{alignSelf:"center",justifyContent:"start",minWidth:a?"max-content":"100%",h:tS,pl:n?tC:void 0,children:(0,i.jsx)(tb.s,{justifyContent:"flex-start",alignItems:"center",width:"100%",height:"100%",children:t})}),a&&(0,i.jsx)(es.B,{alignSelf:"center",width:"100%",pr:n?tC:void 0,h:tS,children:(0,i.jsx)(tb.s,{justifyContent:"flex-end",alignItems:"center",width:"100%",height:"100%",children:a})})]})};var tz=n(95905);let tI=e=>{let{editor:t}=e;return(0,i.jsx)(S.e,{dir:"ltr",spacing:1,size:"sm",children:tz.gj.map(e=>{let{name:n,icon:a,checkActive:r,apply:o}=e;if(r&&o)return(0,i.jsx)(D.I,{label:n(),icon:a,onClick:()=>{o(t)},isActive:r(t),my:0},n())})})},tR=e=>{let{contributors:t,hiddenContributorIds:n,toggleOneVisibleContributor:a,toggleAllVisibleContributors:r,isDisabled:l=!1}=e,s=(null==n?void 0:n.length)===0;return(0,i.jsxs)(A.W,{isLazy:!0,children:[(0,i.jsx)(z.I,{as:I.$,variant:"plain",size:"sm",boxShadow:"none",minW:"max-content",textAlign:"left",rightIcon:(0,i.jsx)(eA.D,{}),isDisabled:l,children:s?(0,i.jsx)(_.x6,{id:"lZw9AX"}):(0,i.jsx)(_.x6,{id:"8Tg/JR"})}),(0,i.jsx)(R.c,{minWidth:"max-content",padding:0,children:(0,i.jsxs)(es.B,{spacing:1,py:3,children:[(0,i.jsx)(tA,{label:(0,i.jsx)(_.x6,{id:"lZw9AX"}),withSidePadding:!0,children:(0,i.jsx)(tv.d,{isChecked:s,onChange:r})}),(0,i.jsx)(er.c,{py:2}),(0,i.jsx)(tA,{label:(0,i.jsx)(o._x,{children:(0,i.jsx)(V.E,{children:(0,i.jsx)(_.x6,{id:"8Tg/JR"})})}),withSidePadding:!0}),t.map(e=>(0,i.jsx)(tE,{contributor:e,contributors:t,toggleOneVisibleContributor:a,hiddenContributorIds:n,allVisible:s},e.user.id))]})})]})},tE=e=>{let{contributor:t,contributors:n,toggleOneVisibleContributor:a,hiddenContributorIds:r,allVisible:l}=e,s=n.length-r.length==1&&!r.includes(t.user.id);return(0,i.jsxs)(tA,{label:(0,i.jsxs)(tb.s,{alignItems:"center",gap:2,children:[(0,i.jsx)(o.Vc,{size:"xs",src:t.user.profileImageUrl,opacity:l?.5:1}),(0,i.jsx)(V.E,{fontSize:"md",fontFamily:"body",opacity:l?.5:1,sx:{cursor:l?"default":"text"},children:t.user.displayName})]}),paddingY:1.25,withSidePadding:!0,children:[(0,i.jsx)(eN.h,{w:4}),(0,i.jsx)(tv.d,{isChecked:!r.includes(t.user.id),onChange:()=>a(t.user.id),disabled:s})]})},tL=e=>{let{contributors:t,hiddenContributorIds:n,hasMultipleContributors:a,toggleOneVisibleContributor:r,toggleAllVisibleContributors:o}=e;return(0,i.jsx)(ty,{label:(0,i.jsx)(_.x6,{id:"YqsXfH"}),icon:E.VFr,children:(0,i.jsx)(tR,{contributors:t,hiddenContributorIds:n,toggleOneVisibleContributor:r,toggleAllVisibleContributors:o,isDisabled:!a})})};var t_=n(11403),tM=n(31171);let tN=e=>{let{children:t,...n}=e,{content:a}=(0,t_.o5)("Popover");return(0,i.jsx)(tM.B.div,{__css:a,p:0,overflow:"hidden",borderWidth:0,minW:"auto",width:"auto",...n,children:t})},tT=()=>({square:{icon:E.Nfw,label:(0,i.jsx)(_.x6,{id:"du/PIl"})},landscape:{icon:E.vti,label:(0,i.jsx)(_.x6,{id:"BZXXSi"})},portrait:{icon:E.b0A,label:(0,i.jsx)(_.x6,{id:"79gnko"})}}),tP=e=>{let{selection:t,editor:n}=e,a=tT(),r=t.node.attrs;return(0,i.jsx)(ty,{label:(0,i.jsx)(_.x6,{id:"7bRShe"}),icon:E.VGw,children:(0,i.jsx)(S.e,{children:Object.entries(a).map(e=>{let[a,{icon:o,label:l}]=e;return(0,i.jsx)(D.I,{icon:o,label:l,onClick:()=>{n.chain().updateAttributes("gallery",{dimensions:a}).setNodeSelection(t.from).run()},isActive:r.dimensions===a},a)})})})};var tO=n(1984),tD=n(69951);let tF=e=>{let{selection:t,editor:n}=e,a=t.node.attrs.thumbHeight||tD.Aj,r=(0,d.useCallback)(e=>{n.chain().updateAttributes("gallery",{thumbHeight:e}).setNodeSelection(t.from).focus().run()},[n,t.from]);return(0,i.jsx)(ty,{label:(0,i.jsx)(_.x6,{id:"Cj2Gtd"}),icon:E.dwj,children:(0,i.jsxs)(tO.Ap,{"aria-label":"gallery-slider",min:tD.pg,max:tD.Vj,step:.25,value:a,onChange:r,w:"120px",focusThumbOnChange:!1,colorScheme:"trueblue",size:"sm",children:[(0,i.jsx)(tO.hB,{children:(0,i.jsx)(tO.hJ,{})}),(0,i.jsx)(tO.OQ,{background:"trueblue.500"})]})})};var tH=n(93711);let tW=e=>{let{selection:t,editor:n}=e,a=t.node.attrs.thumbSpacing||tD.mj,r=(0,d.useCallback)(e=>{n.chain().updateAttributes("gallery",{thumbSpacing:e}).setNodeSelection(t.from).focus().run()},[n,t.from]);return(0,i.jsx)(ty,{label:(0,i.jsx)(_.x6,{id:"EL5s3L"}),icon:E.dwj,children:(0,i.jsxs)(tO.Ap,{"aria-label":"gallery-slider",min:tD.BA,max:tD.ZX,step:.1,value:a,onChange:r,w:"120px",focusThumbOnChange:!1,colorScheme:"trueblue",size:"sm",children:[(0,i.jsx)(tO.hB,{children:(0,i.jsx)(tO.hJ,{})}),(0,i.jsx)(tO.OQ,{background:"trueblue.500"})]})})},tB=e=>{let{selection:t,editor:n}=e,a=t.node.attrs,r=!0===a.stretchFill||null===a.stretchFill;return(0,i.jsx)(ty,{label:(0,i.jsx)(_.x6,{id:"57WAKT"}),icon:E.fGk,children:(0,i.jsx)(tv.d,{isChecked:r,onChange:()=>{n.chain().updateAttributes("gallery",{stretchFill:!a.stretchFill}).setNodeSelection(t.from).run()}})})};var tV=n(49572),tG=n(78807),tU=n(802),tK=n(31948),tq=n(76304),tJ=n(83380),t$=n(2057),tY=n(48310),tQ=n(33473);let tX=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{none:{label:(0,i.jsx)(_.x6,{id:"gIjBW2"})},expand:{label:(0,i.jsx)(_.x6,{id:"1A3EXy"})},newTab:{label:e?(0,i.jsx)(_.x6,{id:"YdDilE"}):(0,i.jsx)(_.x6,{id:"XGRJzS"})}}},tZ=e=>{let{handleClickBehaviorChange:t,currentClickBehavior:n,enableNoClickBehavior:a=!1,canAddLink:r=!1}=e,o=tX(r);return(0,i.jsxs)(A.W,{closeOnSelect:!0,isLazy:!0,autoSelect:!1,children:[(0,i.jsx)(z.I,{as:I.$,"data-testid":"click-behavior-dropdown",size:"sm",rightIcon:(0,i.jsx)(L.g,{fixedWidth:!0,icon:E.Jt$,transform:"shrink-6"}),boxShadow:"none",onMouseDown:T.Fw,children:o[n].label}),(0,i.jsx)(R.c,{zIndex:2,children:(0,i.jsx)(tY.i,{type:"radio",onChange:e=>{t(e)},value:n,children:Object.entries(o).map(e=>{let[t,{label:n}]=e;return"none"!==t||a?(0,i.jsx)(tQ.k,{value:t,onMouseOver:T.Fw,onMouseDown:T.Fw,"data-testid":"click-behavior-option-".concat(t),children:(0,i.jsx)(V.E,{children:n})},t):null})})})]})};var t0=n(20671),t1=n(66712),t2=n(50201),t4=n(67408),t5=n(95580),t6=n(77214),t3=n(70403),t8=n(15072),t7=n(22844),t9=n(92405),ne=n(85146);let nt=(0,d.memo)(e=>{let{label:t,icon:n,isFocused:a,focusedItemEl:o,onClick:l,onMouseMove:s}=e;return(0,i.jsx)(ne.ck,{px:2,py:2,mx:2,borderRadius:"md",ref:a?o:null,bg:a?"trueblue.50":"none",onClick:l,onMouseMove:s,onMouseDown:T.Fw,role:"option",cursor:"pointer",tabIndex:-1,children:(0,i.jsxs)(r.z,{pointerEvents:"none",children:[(0,i.jsx)(L.g,{icon:n,fixedWidth:!0,size:"sm"}),(0,i.jsx)(V.E,{noOfLines:1,fontSize:"sm",w:"100%",children:t})]})})});nt.displayName="Option";let nn=(0,d.memo)(e=>{let{items:t,inputValue:n,focusedIndex:r,interactionRef:l,isScrollingRef:s,isFiltered:c,onMouseMove:u,onSelectItem:p}=e,h=t.reduce((e,t,n)=>("page"===t.type?e.pages.push({item:t,index:n}):"card"===t.type?e.cards.push({item:t,index:n}):"url"===t.type&&e.url.push({item:t,index:n}),e),{pages:[],cards:[],url:[]}),m=(0,d.useRef)(null),g=(0,d.useRef)(null);return(0,d.useEffect)(()=>{if("keyboard"!==l.current)return;let e=g.current,t=m.current;if(!e||!t)return;let n=t.clientHeight,i=e.offsetTop,a=e.offsetHeight;s.current=!0,t.scrollTo({top:i-n/2+a/2,behavior:"smooth"});let r=setTimeout(()=>{s.current=!1},50);return()=>{clearTimeout(r)}},[r,g,m,l,s]),(0,i.jsx)(a.az,{children:(0,i.jsxs)(ne.B8,{ref:m,pos:"relative",overflowY:"auto",maxH:"min(300px, 50vh)",children:[h.pages.map((e,t)=>{let{item:l,index:s}=e;return(0,i.jsxs)(a.az,{children:[0===t&&(0,i.jsx)(o._x,{ml:4,my:1,children:c?(0,i.jsx)(_.x6,{id:"rXYeDA",values:{inputValue:n}}):(0,i.jsx)(_.x6,{id:"QIUdjp"})}),(0,i.jsx)(nt,{label:ni(l),icon:E.A4h,isFocused:s===r,focusedItemEl:g,onClick:()=>p(l),onMouseMove:()=>u(s)})]},l.docId)}),h.cards.map((e,t)=>{let{item:l,index:s}=e;return(0,i.jsxs)(a.az,{children:[0===t&&(0,i.jsx)(o._x,{ml:4,my:1,children:c?(0,i.jsx)(_.x6,{id:"m+j0l8",values:{inputValue:n}}):(0,i.jsx)(_.x6,{id:"Ccpbzh"})}),(0,i.jsx)(nt,{label:ni(l),icon:E.vti,isFocused:s===r,focusedItemEl:g,onClick:()=>p(l),onMouseMove:()=>u(s)})]},l.cardId)}),h.url.map((e,t)=>{let{item:n,index:l}=e;return(0,i.jsxs)(a.az,{children:[0===t&&(0,i.jsx)(o._x,{ml:4,my:1,children:(0,i.jsx)(_.x6,{id:"wuJqqq"})}),(0,i.jsx)(nt,{label:n.value,icon:E.CQO,isFocused:l===r,focusedItemEl:g,onClick:()=>p(n),onMouseMove:()=>u(l)})]},"custom".concat(l))})]})})});nn.displayName="ListBox";let ni=e=>e.title||("card"===e.type?M.Ru._({id:"gLDJuJ"}):M.Ru._({id:"kveQAJ"})),na=(e,t)=>ni(t).trim().toLowerCase().includes(e.trim().toLowerCase()),nr=e=>{let t=(0,t6.Se)(e)||(0,t4.hc)(e)?e:"https://"+e;return(0,t6.AY)(t)?t:""},no=e=>{let{items:t,inputValue:n}=e;return(0,d.useMemo)(()=>{let e=nr(n),i=[...t.filter(e=>na(n,e)),""!==e?{type:"url",value:e}:null].filter(e=>!!e),a=i.length!==t.length;return{filteredItems:i,isFiltered:a}},[t,n])},nl=e=>{let{items:t,inputValue:n,onSelect:i,onRevert:a,popoverRef:r}=e,{isOpen:o,onClose:l,onOpen:s}=(0,ez.j)(),[c,u]=(0,d.useState)(null),p=(0,d.useRef)(null),h=(0,d.useRef)(!1),m=(0,d.useCallback)(()=>{l(),u(null)},[l]),g=(0,d.useCallback)(()=>{n&&(s(),u(0))},[n,s]),x=(0,d.useCallback)(e=>{var t;null!==(t=r.current)&&void 0!==t&&t.contains(e.relatedTarget)||m()},[m,r]),f=(0,d.useCallback)(e=>{i(e),m()},[m,i]),v=(0,d.useCallback)(e=>{switch(p.current="keyboard",e.key){case"Enter":case"Tab":{if(null===c)return;e.preventDefault();let n=t[c];n?f(n):m();return}case"Escape":e.preventDefault(),m(),a();return;case"ArrowDown":e.preventDefault(),o?u(e=>((null!=e?e:0)+1)%t.length):(s(),u(0));return;case"ArrowUp":e.preventDefault(),o?u(e=>{let n=(null!=e?e:0)-1;return n<0?t.length-1:n}):(s(),u(t.length-1));return}},[a,m,o,c,t,f,s]),b=(0,d.useCallback)(e=>{h.current||(p.current="mouse",u(e))},[]);return{isOpen:o,onClose:l,onOpen:s,focusedIndex:c,setFocusedIndex:u,handleSelectItem:f,onMouseMove:b,onKeyDown:v,onBlur:x,onFocus:g,interactionRef:p,isScrollingRef:h}},ns=(0,d.memo)(e=>{let{items:t,onSelect:n,onRevert:a,inputValue:r,setInputValue:o,inputRef:l}=e,s=(0,d.useRef)(null),{filteredItems:c,isFiltered:u}=no({items:t,inputValue:r}),{onKeyDown:p,onMouseMove:h,focusedIndex:m,setFocusedIndex:g,interactionRef:x,isOpen:f,onClose:v,onOpen:b,onBlur:y,onFocus:w,handleSelectItem:j,isScrollingRef:k}=nl({items:c,onSelect:n,onRevert:a,popoverRef:s,inputValue:r}),C=(0,d.useCallback)(e=>{o(e.target.value),f||b(),g(0)},[f,b,g,o]),S=(0,d.useCallback)(()=>{f||(b(),g(0))},[f,b,g]);return(0,i.jsxs)(e5.A,{isLazy:!0,isOpen:f,onClose:v,autoFocus:!1,returnFocusOnClose:!1,matchWidth:!0,placement:"bottom",children:[(0,i.jsx)(e6.d,{children:(0,i.jsx)(t0.p,{ref:l,size:"sm",placeholder:M.Ru._({id:"BHFH/3"}),value:r,onKeyDown:p,onFocus:w,onBlur:y,onChange:C,onClick:S})}),(0,i.jsx)(e3.h,{ref:s,w:"100%",h:"100%",display:0===c.length?"none":void 0,tabIndex:-1,_focusVisible:{outline:"none"},children:(0,i.jsx)(nn,{items:c,isFiltered:u,onSelectItem:j,onMouseMove:h,inputValue:r,focusedIndex:m,interactionRef:x,isScrollingRef:k})})]})});ns.displayName="PageAwareLinkComboBox";var nd=n(35147),nc=n(30503);let nu=e=>{let{site:t}=e;return{linkablePages:null==t?void 0:t.routes.map(e=>{var t;return{docId:e.docId,title:null===(t=e.doc)||void 0===t?void 0:t.title}})}},np=e=>{let{href:t,linkablePages:n}=e;if(!t)return null;let i=(0,nc.uT)(t);if(!i)return{href:t};let{docId:a,cardId:r}=i;return{...a&&(null==n?void 0:n.find(e=>e.docId===a))||null,href:t,cardId:r}},nh=e=>{let{href:t}=e,n=(0,u.GV)(nd.Gd);return(0,d.useMemo)(()=>{let{linkablePages:e}=nu({site:n}),i=np({href:t,linkablePages:e}),a=(null==i?void 0:i.docId)&&(null==n?void 0:n.id)&&(0,t9.pF)({docId:null==i?void 0:i.docId})||t,r=null==e?void 0:e.some(e=>e.docId===(null==i?void 0:i.docId));return{linkablePages:e,existingLink:i,newTabUrl:a,isPageLink:r}},[t,n])},nm=e=>{var t;let{href:n,inputValue:l,setInputValue:s,setHref:c,clearHref:p,inputRef:h,onCloseFocusRef:m}=e,g=(0,u.GV)(v.sX),x=(0,u.GV)(t7.rZ),{existingLink:f,linkablePages:b}=nh({href:n}),y=(0,d.useMemo)(()=>[...(b||[]).map(e=>({type:"page",docId:e.docId,title:e.title})),...x.map(e=>({type:"card",cardId:e.id,title:e.title}))],[b,x]),w=null==f?void 0:f.title,j=null!==(t=null==f?void 0:f.cardId)&&void 0!==t?t:void 0,{title:k}=(0,t8.d)({cardId:j}),C=(0,d.useCallback)(e=>{var t;e&&(c("url"===e.type?e.value:"page"===e.type?(0,t9.LN)({docId:e.docId,docTitle:e.title,absolute:!0}):(0,t9.Io)({cardId:e.cardId,docId:g})),null==m||null===(t=m.current)||void 0===t||t.focus({preventScroll:!0}))},[g,c,m]),S=(null==f?void 0:f.href)&&!f.docId;if(!f||S)return(0,i.jsx)(ns,{items:y,inputValue:l,setInputValue:s,inputRef:h,onSelect:C,onRevert:()=>{var e;s(n),null==m||null===(e=m.current)||void 0===e||e.focus()}});{let e=j?k||(0,i.jsx)(_.x6,{id:"gLDJuJ"}):w||(0,i.jsx)(_.x6,{id:"kveQAJ"});return(0,i.jsx)(r.z,{spacing:1,children:(0,i.jsx)(t3.vw,{pr:1,children:(0,i.jsxs)(r.z,{spacing:1,children:[(0,i.jsx)(L.g,{icon:j?E.vti:E.A4h}),(0,i.jsx)(o.Tz,{label:e,placement:"top",children:(0,i.jsx)(a.az,{noOfLines:1,children:e})}),p&&(0,i.jsx)(o.Tz,{label:(0,i.jsx)(_.x6,{id:"484LKL"}),placement:"top",children:(0,i.jsx)(eC.K,{size:"xs",minHeight:4,height:4,variant:"ghost","aria-label":M.Ru._({id:"484LKL"}),icon:(0,i.jsx)(L.g,{icon:E.yYc}),onMouseDown:T.Fw,onClick:()=>{p(),s("")}})})]})})})}},ng="link-input-invalid-url",nx=e=>{let{editor:t,href:n,updateHref:r,clearHref:l,removeLink:s,isEmbedLink:c=!1}=e,[p,h]=(0,d.useState)(n),m=(0,d.useRef)(null),g=(0,d.useRef)(null),x=(0,B.d)(),f=p!==n,b=!!(t.multipageEnabled||t.isSiteNavbarEditor),y=(0,u.GV)(v.bO),w=(0,t5.Cf)(n,y),{newTabUrl:j}=nh({href:n});(0,d.useEffect)(()=>{h(n)},[n]),(0,d.useEffect)(()=>{!n&&m.current&&setTimeout(()=>{var e;null==m||null===(e=m.current)||void 0===e||e.focus()})},[n]);let k=(0,d.useCallback)(e=>{if(!e)return;let t=e;if(c){let n=(0,t1.Sf)(e);n&&(t=n)}if(t=(0,t6.Se)(t)||(0,t4.hc)(t)?t:"https://"+t,!(0,t6.AY)(t)){r(""),x.isActive(ng)||x({id:ng,title:(0,i.jsx)(_.x6,{id:"sBZMWb"}),description:(0,i.jsx)(_.x6,{id:"jEw0Mr"}),status:"error",position:"top",duration:3e3,isClosable:!0});return}r(t),h(t)},[c,x,r]),C=(0,d.useCallback)(e=>{if(w){let i=(0,t5.Ww)(n);(0,t2.T)(t,e,i)}else try{window.open(j,"_blank")}catch(e){console.error("(caught) LinkInput error going to URL",e)}},[w,t,n,j]);return(0,i.jsxs)(tb.s,{gap:2,justify:"space-between",alignItems:"center",children:[b&&!c?(0,i.jsxs)(tb.s,{flex:1,children:[(0,i.jsx)(nm,{href:n,inputValue:p,setInputValue:h,setHref:k,clearHref:l,inputRef:m,onCloseFocusRef:g}),(0,i.jsx)(a.az,{w:"0",h:"0",ref:g,tabIndex:-1})]}):(0,i.jsxs)(eL.M,{children:[(0,i.jsx)(t0.p,{"data-testid":"link-input",ref:m,value:p,placeholder:M.Ru._({id:"Ilf1mg"}),onChange:e=>{h(e.target.value)},onKeyUp:e=>{"Enter"===e.key&&(e.preventDefault(),k(p),t.commands.focus())},size:"sm"}),p.length>0&&f&&(0,i.jsx)(e_.t,{top:"50%",transform:"translateY(-50%)",children:(0,i.jsx)(o.Tz,{placement:"top",label:(0,i.jsx)(_.x6,{id:"tfDRzk"}),children:(0,i.jsx)(eC.K,{"aria-label":M.Ru._({id:"tfDRzk"}),variant:"ghost",size:"xs",onClick:()=>{k(p)},icon:(0,i.jsx)(L.g,{icon:E.e68})})})})]}),(0,i.jsxs)(S.e,{spacing:1,size:"sm",onMouseDown:T.Fw,children:[s&&(0,i.jsx)(D.I,{label:(0,i.jsx)(_.x6,{id:"484LKL"}),icon:E.vev,onClick:s,my:0}),n&&(0,i.jsx)(D.I,{label:w?(0,i.jsx)(_.x6,{id:"088Oxr"}):(0,i.jsx)(_.x6,{id:"fOj0+R"}),icon:w?E.dmS:E.vMs,onClick:C,my:0})]})]})},nf=e=>{let{buttonList:t}=e,n=t.filter(e=>!e.isHidden),r=1===n.length,l=n.length<=5?5:4,s=n.slice(0,l),d=n.slice(l,n.length);return(0,i.jsxs)(S.e,{size:"sm",width:"100%",children:[s.map(e=>{let{key:t,label:n,ariaLabel:l,action:s,icon:d,customIcon:c,isDisabled:u=!1,isLoading:p=!1,customButton:h}=e;return h||(d||c?(0,i.jsx)(o.Tz,{label:n,placement:"top",children:(0,i.jsx)(a.az,{flex:r?void 0:1,width:r?"33%":void 0,tabIndex:u?-1:void 0,children:(0,i.jsx)(eC.K,{"aria-label":l,icon:c||(0,i.jsx)(L.g,{icon:d,fixedWidth:!0}),onClick:s,w:"100%",isDisabled:u,isLoading:p,onMouseDown:T.Fw,shadow:"none"})})},t):null)}),!!d.length&&(0,i.jsxs)(A.W,{children:[(0,i.jsx)(o.Tz,{placement:"top",label:(0,i.jsx)(_.x6,{id:"3Siwmw"}),children:(0,i.jsx)(z.I,{as:eC.K,"aria-label":M.Ru._({id:"3Siwmw"}),icon:(0,i.jsx)(L.g,{icon:E.Dwc,fixedWidth:!0}),flex:1,shadow:"none"})}),(0,i.jsx)(R.c,{children:d.map(e=>{let{key:t,label:n,action:a,icon:r,customIcon:o}=e;return(0,i.jsx)(eM.D,{icon:o||r&&(0,i.jsx)(L.g,{icon:r,fixedWidth:!0}),onClick:a,children:n},t)})})]})]})},nv=()=>({inset:{title:M.Ru._({id:"Jn5DbR"})},circle:{title:M.Ru._({id:"7xMmki"})}}),nb=e=>{let{clipType:t,onChange:n}=e;return t?(0,i.jsxs)(t$.ms,{children:[(0,i.jsx)(t$.gf,{size:"sm",borderRadius:"full",minWidth:"105px",rightIcon:(0,i.jsx)(L.g,{icon:E.Jt$,transform:"shrink-6"}),variant:"toolbar",ps:2,onMouseDown:T.Fw,children:nv()[t].title}),(0,i.jsx)(t$.Q5,{children:Object.entries(nv()).map(e=>{let[r,{title:o}]=e;return(0,i.jsx)(t$.tJ,{value:r,fontSize:"sm",fontWeight:600,icon:(0,i.jsx)(a.az,{visibility:r===t?"visible":"hidden",children:(0,i.jsx)(L.g,{icon:E.e68})}),onMouseDown:T.Fw,onClick:()=>{n(r)},children:(0,i.jsx)(V.E,{children:o})},r)})})]}):null},ny={expand:E.bMI,newTab:E.Ju_,none:E.IPg};var nw=n(47024),nj=n(13934);let nk=e=>{let{editor:t,selection:n,handleDuplicate:a}=e,r=(0,d.useCallback)(()=>{t.chain().insertContentAt(n.from+n.node.nodeSize,n.node.toJSON()).selectInsertedNode().run()},[t,n]);return(0,i.jsx)(D.I,{label:(0,i.jsx)(_.x6,{id:"euc6Ns"}),icon:E.$3n,onClick:a||r,testId:"duplicate-node-button"})},nC=e=>{let{editor:t,label:n}=e;return(0,i.jsx)(D.I,{onClick:()=>{t.chain().selectParentNode().run()},label:n,children:(0,i.jsx)(L.g,{icon:E.Hmw,flip:"horizontal"})})};var nS=n(76228);let nA={src:"/_next/static/media/layout-3-cols.478d87d6.svg",height:25,width:20,blurWidth:0,blurHeight:0},nz={src:"/_next/static/media/layout-30-70.019e8aa0.svg",height:25,width:20,blurWidth:0,blurHeight:0},nI={src:"/_next/static/media/layout-4-cols.bc7869e3.svg",height:25,width:20,blurWidth:0,blurHeight:0},nR={src:"/_next/static/media/layout-50-50.a28ea4d4.svg",height:25,width:20,blurWidth:0,blurHeight:0},nE={src:"/_next/static/media/layout-70-30.abcf64e9.svg",height:25,width:20,blurWidth:0,blurHeight:0},nL=()=>[{name:M.Ru._({id:"oCWIE5"}),testId:"layout-preset-5050",image:nR,value:[50,50]},{name:M.Ru._({id:"eWUI4Z"}),testId:"layout-preset-7030",image:nE,value:[70,30]},{name:M.Ru._({id:"hOcihM"}),testId:"layout-preset-3070",image:nz,value:[30,70]},{name:M.Ru._({id:"OnuuaA"}),testId:"layout-preset-3col",image:nA,value:[33.33,33.33,33.34]},{name:M.Ru._({id:"hexbw8"}),testId:"layout-preset-4col",image:nI,value:[25,25,25,25]}];var n_=n(31549),nM=n(49624),nN=n(33919),nT=n(23231);let nP=()=>({link:{title:(0,i.jsx)(_.x6,{id:"yzF66j"})},button:{title:(0,i.jsx)(_.x6,{id:"hxBFty"})},preview:{title:(0,i.jsx)(_.x6,{id:"rdUucN"})},inline:{title:(0,i.jsx)(_.x6,{id:"KKBlUU"})}}),nO=e=>{let{editor:t,selection:n,isDisabled:a}=e,r=(0,l.KP)(e=>"button"===e.type.name)(n),o=n instanceof s.U3?r?"button":"link":n.node.type.name,c="link"===o,u="button"===o,p=t.getAttributes(o),h=u?"button":c?"link":"displayStyle"in p&&p.displayStyle||"inline",m=(0,d.useCallback)(e=>{if(o===e)return;let n="inline"===e||"preview"===e;switch(o){case"link":n?t.commands.convertLinkToMedia(e):"button"===e&&t.commands.convertLinkToButton();break;case"button":"link"===e?t.commands.convertButtonToLink():n&&t.commands.convertButtonToMedia(e);break;default:"link"===e?t.commands.convertMediaToLink():"button"===e?t.commands.convertMediaToButton():t.commands.updateAttributes(o,{displayStyle:e})}},[t,o]),g=nP();return(0,i.jsxs)(A.W,{closeOnSelect:!0,isLazy:!0,autoSelect:!1,children:[(0,i.jsx)(z.I,{as:I.$,"data-testid":"display-style-dropdown",isDisabled:a,size:"sm",rightIcon:(0,i.jsx)(L.g,{fixedWidth:!0,icon:E.Jt$,transform:"shrink-6"}),boxShadow:"none",onMouseDown:T.Fw,children:g[h].title}),(0,i.jsx)(R.c,{zIndex:2,children:(0,i.jsx)(tY.i,{type:"radio",onChange:m,value:h,children:Object.entries(g).map(e=>{let[t,{title:n}]=e;return(0,i.jsx)(tQ.k,{value:t,onMouseDown:T.Fw,"data-testid":"display-style-option-".concat(t),children:(0,i.jsx)(V.E,{children:n})},t)})})})]})},nD=e=>{let{editor:t,selection:n}=e,{href:a}=t.getAttributes("button"),{isPageLink:r}=nh({href:a}),o=(0,u.GV)(v.SJ),l=(0,tx.jO)(o),c=(0,tx.Ik)(l),p=(0,nN.yh)(l),h=t.getAttributes("button").color,m=n.$from.node(-1),g=nT.Dn[m.type.name],x=(0,nT.vf)().filter(e=>g.variants.includes(e.key)),f=(0,d.useCallback)(()=>t.commands.handleButtonDelete(!1),[t]),b=(0,d.useCallback)(e=>{t.commands.updateAttributes("button",{color:e})},[t]);return(0,i.jsxs)(tk,{overflow:"hidden",children:[g.linkDropdownEnabled&&a&&(n instanceof s.U3||n instanceof s.nh)&&(0,i.jsx)(ty,{label:(0,i.jsx)(_.x6,{id:"/SVg/B"}),icon:E.n2$,children:(0,i.jsx)(nO,{editor:t,selection:n,isDisabled:r})}),(0,i.jsx)(nx,{href:a||"",updateHref:e=>{t.commands.updateAttributes("button",{href:e})},clearHref:()=>{t.commands.updateAttributes("button",{href:""})},editor:t}),x.length>=2&&(0,i.jsx)(ty,{label:(0,i.jsx)(_.x6,{id:"q6YAHa"}),icon:E.Cpz,children:(0,i.jsx)(S.e,{spacing:1,size:"sm",onMouseDown:T.Fw,children:x.map(e=>{let{name:n,icon:a,key:r}=e;return(0,i.jsx)(D.I,{label:n,icon:a,onClick:()=>{t.commands.updateAttributes("button",{variant:r})},isActive:t.isActive("button",{variant:r}),my:0},n)})})}),g.alignEnabled&&(0,i.jsx)(ty,{label:(0,i.jsx)(_.x6,{id:"0j+RGO"}),icon:E.ecg,children:(0,i.jsx)(S.e,{dir:"ltr",spacing:0,size:"sm",onMouseDown:T.Fw,children:tz.gj.map(e=>{let{name:n,icon:a,checkActive:r,apply:o}=e;if(r&&o)return(0,i.jsx)(D.I,{label:n(),icon:a,onClick:()=>{o(t)},isActive:r(t),my:0},n())})})}),g.colorEnabled&&(0,i.jsx)(ty,{label:(0,i.jsx)(_.x6,{id:"jZlrte"}),icon:E.wIs,children:(0,i.jsx)(S.e,{spacing:0,size:"sm",onMouseDown:T.Fw,children:(0,i.jsxs)(A.W,{isLazy:!0,children:[(0,i.jsx)(n_.v,{color:h||c,isDefaultColor:null===h||h===c}),(0,i.jsx)(R.c,{overflow:"hidden",children:(0,i.jsx)(nM.b,{currentColor:h||(p?null:c),setColor:b,source:"ButtonColor"})})]})})}),(0,i.jsx)(tw,{isPrimaryActionDestructive:!0,label:(0,i.jsx)(_.x6,{id:"cnGeoo"}),icon:E.yLS,onClick:f,colorScheme:"red"})]})};var nF=n(91500),nH=n(12116);let nW="embed-formatting-invalid-error";var nB=n(92515),nV=n(57812),nG=n(19727),nU=n(71792),nK=n(96502),nq=n(1602),nJ=n.n(nq);let n$=(e,t)=>{let n=new Set;for(let i of e)if(n.add(i[t]),n.size>1)return!1;return[...n][0]},nY=(e,t,n)=>n$(function(e,t){let n=function(e,t){if("string"==typeof e){if(!t.marks[e])throw Error("There is no mark type named '".concat(e,"'. Maybe you forgot to add the extension?"));return t.marks[e]}return e}(t,e.schema),{from:i,to:a,empty:r}=e.selection,o=[];return r?(e.storedMarks&&o.push(...e.storedMarks),o.push(...e.selection.$head.marks())):e.doc.nodesBetween(i,a,e=>{o.push(...e.marks)}),o.filter(e=>e.type.name===n.name).map(e=>({...e.attrs}))}(e,t),n),nQ=e=>{let{editor:t,isLinkText:n,defaultTextColor:i}=e,a=n0(t,i,n),r=n1(t,n),o=n&&t.state.selection.empty,l=(0,d.useCallback)(e=>{o?t.chain().focus().extendMarkRange("link").setHighlightColor(e).setTextSelection({from:t.state.selection.from,to:t.state.selection.to}).run():t.chain().focus().setHighlightColor(e).run()},[t,o]),s=(0,d.useCallback)(e=>{o?t.chain().focus().extendMarkRange("link").setTextColor(e).setTextSelection({from:t.state.selection.from,to:t.state.selection.to}).run():t.chain().focus().setTextColor(e).run()},[t,o]);return{highlightColor:r,resetColorAndHighlight:(0,d.useCallback)(()=>{o?t.chain().focus().extendMarkRange("link").unsetMark("textColor").unsetMark("highlight").setTextSelection({from:t.state.selection.from,to:t.state.selection.to}).run():t.chain().focus().unsetMark("textColor").unsetMark("highlight").run()},[t,o]),setHighlightColor:l,setTextColor:s,textColor:a}},nX=e=>{let{editor:t,defaultTextColor:n,testId:a,disabled:r,useMenuButton:l=!1,isLinkText:s=!1}=e,{textColor:d,highlightColor:c,setHighlightColor:u,setTextColor:p,resetColorAndHighlight:h}=nQ({editor:t,isLinkText:s,defaultTextColor:n});return(0,i.jsxs)(A.W,{isLazy:!0,onClose:()=>(0,O.q)(t),children:[l?(0,i.jsx)(n_.v,{color:c.color||d.color||void 0,isDefaultColor:!c.color&&"default"===d.state,disabled:r,"data-testid":a,isMixed:"mixed"===c.state||"mixed"===d.state}):(0,i.jsx)(o.Tz,{placement:"top",label:(0,i.jsx)(_.x6,{id:"76ESgh"}),children:(0,i.jsx)(z.I,{isDisabled:r,as:I.$,variant:"toolbar",rightIcon:(0,i.jsx)(L.g,{icon:E.Jt$,transform:"shrink-6"}),"data-testid":a,onMouseDown:T.Fw,size:"sm",children:(0,i.jsx)(n2,{color:c.color||d.color||void 0})})}),(0,i.jsx)(R.c,{overflow:"hidden",children:(0,i.jsxs)(nB.t,{isFitted:!0,variant:"soft-rounded",size:"md",defaultIndex:c.color?1:0,children:[(0,i.jsxs)(nV.w,{children:[(0,i.jsx)(nG.o,{children:(0,i.jsx)(o.Tz,{label:(0,i.jsx)(_.x6,{id:"xeiujy"}),placement:"top",children:(0,i.jsx)(L.g,{icon:E.jrc})})}),(0,i.jsx)(nG.o,{children:(0,i.jsx)(o.Tz,{label:(0,i.jsx)(_.x6,{id:"gtEbeW"}),placement:"top",children:(0,i.jsx)(L.g,{icon:E.nps})})})]}),(0,i.jsxs)(nU.T,{children:[(0,i.jsx)(nK.K,{p:0,pt:2,children:(0,i.jsx)(nM.b,{currentColor:d.color||null,setColor:p,unsetColor:h,source:"TextColor"})}),(0,i.jsx)(nK.K,{p:0,pt:2,children:(0,i.jsx)(nM.b,{currentColor:c.color||"",setColor:u,unsetColor:h,source:"TextHighlight"})})]})]})})]})},nZ=e=>{let{from:t}=e.state.selection,n=e.view.domAtPos(t),i=n.node instanceof HTMLElement?n.node:n.node.parentElement;if(!i)return null;let a=getComputedStyle(i).getPropertyValue("color");return a&&"rgba(0, 0, 0, 0)"!==a?nJ()(a).toHexString().toUpperCase():null},n0=(e,t,n)=>{let{selection:i,doc:a,schema:r}=e.state,{from:o,to:l}=i,s=n?(0,t5.Cm)(a,o,l,r.marks.highlight):a.rangeHasMark(o,l,r.marks.highlight),d=n?(0,t5.Cm)(a,o,l,r.marks.textColor):a.rangeHasMark(o,l,r.marks.textColor);if(s)return{state:null,color:null};if(!d)return{state:"default",color:t||nZ(e)};{let n=nY(e.state,"textColor","hex");return n?{state:null,color:n}:{state:"mixed",color:t||null}}},n1=(e,t)=>{let{selection:n,doc:i,schema:a}=e.state,{from:r,to:o}=n,l=t?(0,t5.Cm)(i,r,o,a.marks.highlight):i.rangeHasMark(r,o,a.marks.highlight);if(t?(0,t5.Cm)(i,r,o,a.marks.textColor):i.rangeHasMark(r,o,a.marks.textColor))return{state:null,color:null};if(!l)return{state:"default",color:null};{let t=nY(e.state,"highlight","hex");return t?{state:null,color:t}:{state:"mixed",color:null}}},n2=e=>{let{color:t,fixedWidth:n,isChecked:a}=e;return(0,i.jsxs)(es.B,{spacing:"2px",children:[(0,i.jsx)(V.E,{children:a?(0,i.jsx)(nS.S,{}):(0,i.jsx)(L.g,{icon:eP.jrc,fixedWidth:n,size:t?"sm":void 0,transform:{y:t?3:0}})}),t&&(0,i.jsx)(tb.s,{w:5,h:1.5,bg:t,borderRadius:"sm",borderWidth:"1px",borderColor:"blackAlpha.400"})]})};var n4=n(99070),n5=n(15672),n6=n(56824),n3=n(94259),n8=n(86984),n7=n(65184),n9=n(39087);let ie=n(68335).o0,it=ie+100;var ii=n(20931);let ia=e=>{let{searchQuery:t,onChange:n,placeholder:a}=e,r={searchInputBorderColor:(0,n6.dU)("gray.200","whiteAlpha.200"),searchInputBackgroundColor:(0,n6.dU)("whiteAlpha.900","blackAlpha.900"),searchInputTextColor:(0,n6.dU)("gray.900","gray.100"),searchInputCloseColorScheme:(0,n6.dU)("blackAlpha","gray")};return(0,i.jsxs)(eL.M,{size:"md",children:[(0,i.jsx)(e_.W,{pointerEvents:"none",color:"gray.400",children:(0,i.jsx)(ii.W,{})}),(0,i.jsx)(t0.p,{placeholder:a,value:t,onChange:n,backgroundColor:r.searchInputBackgroundColor,color:r.searchInputTextColor}),t&&(0,i.jsx)(e_.t,{p:4,children:(0,i.jsx)(eC.K,{variant:"ghost",colorScheme:r.searchInputCloseColorScheme,size:"xs","aria-label":M.Ru._({id:"V8yTm6"}),icon:(0,i.jsx)(L.g,{icon:E.Jyw}),onClick:()=>n({target:{value:""}})})})]})};var ir=n(40452),io=n(21172),il=n(48365);let is=(e,t)=>"".concat(e,"-").concat(JSON.stringify(t)),id=e=>{let[t,n]=e.split("-");return{key:t,options:JSON.parse(n)}};var ic=n(16397),iu=n(88693);let ip=()=>{let e=(0,iu.a)();return Object.entries(ic.Ab).map(t=>{let[n,i]=t,a=e.filter(e=>{let{disabled:t,featureFlag:i,family:a}=e;return!t&&(!i||Q.of.get(i))&&a===n}).map(e=>{let t=e.presetConfigurations,n=[];return t&&t.forEach(t=>{n.push({...t,icon:e.icon,variantKey:e.key,key:is(e.key,t.options),visible:!0})}),{variant:e,options:n}});return{family:{key:n,...i},variants:a,visible:!0}}).filter(e=>e.variants.length>0)},ih=()=>ip().flatMap(e=>e.variants.flatMap(e=>e.options)),im=()=>ip().reduce((e,t)=>(e[t.family.key]={family:t.family,variants:t.variants},e),{}),ig=()=>ih().reduce((e,t)=>(e[is(t.variantKey,t.options)]=t,e),{}),ix=e=>{let{initialFamily:t=null,selectedVariantHash:n=null,editor:i,selectedSmartLayoutPos:a}=e,[r,o]=(0,d.useState)(t),[l,s]=(0,d.useState)(""),[c,u]=(0,d.useState)(null),p=null,h=null,m=null;try{let e=void 0!==a?null==i?void 0:i.state.doc.nodeAt(a):null;m=(h=(p=void 0!==a&&i?(0,b.j5)(i,a):null)?(0,ir.Rv)(p):null)?(0,il.aG)(null==e?void 0:e.attrs,h.direction):null}catch(e){console.error("[SmartLayout] unable to find decorations at ".concat(a),e.message)}let{isHorizontal:g}=(0,io.i)(m||{},(null==h?void 0:h.numCells)||0,(null==h?void 0:h.containerSize)||0);(0,d.useEffect)(()=>{if(n){let{key:e}=id(n),t=ip().find(t=>t.variants.some(t=>t.variant.key===e));u((null==t?void 0:t.family.key)||null)}},[]);let x=(0,d.useCallback)(e=>{s(e.target.value),e.target.value.trim()&&r&&o(null)},[r]),f=(0,d.useCallback)(e=>e.map(e=>({...e,visible:!r||e.family.key===r})),[r]),v=(0,d.useCallback)(e=>{if(!l.trim())return e.map(e=>({...e,variants:e.variants.map(e=>({...e,options:e.options.map(e=>({...e,visible:!0}))}))}));let t=l.toLowerCase().trim();return e.map(e=>{let n=e.variants.map(n=>({...n,options:n.options.map(i=>({...i,visible:i.name().toLowerCase().includes(t)||n.variant.name().toLowerCase().includes(t)||e.family.name().toLowerCase().includes(t)}))})),i=n.some(e=>e.options.some(e=>e.visible));return{...e,variants:n,visible:i}})},[l]),y=(0,d.useCallback)(e=>e.map(e=>({...e,variants:e.variants.map(e=>({...e,options:e.options.map(e=>({...e,visible:e.visible&&(!e.hideIfVertical||g)}))}))})),[g]),w=(0,d.useCallback)(e=>{if(!c)return e;let t=e.findIndex(e=>e.family.key===c);if(-1===t)return e;let n=e[t],i=[...e];return i.splice(t,1),i.unshift({...n,family:{...n.family,name:()=>M.Ru._({id:"+0acwA"}),icon:E.i7d}}),i},[c]);return{selectedFamilyKey:r,setSelectedFamilyKey:o,searchQuery:l,handleSearchChange:x,filteredVariants:(0,d.useMemo)(()=>{let e=[...ip()];return w(e=y(e=v(e=f(e))))},[f,v,y,w]),suggestedFamilyKey:c}},iv=d.memo(e=>{var t;let{selectedFamilyKey:n,setSelectedFamilyKey:r,searchQuery:o,handleSearchChange:l,suggestedFamilyKey:s}=e,c={dropdownBgColor:(0,n6.dU)("blackAlpha.100","whiteAlpha.100"),dropdownBgHoverColor:(0,n6.dU)("blackAlpha.300","whiteAlpha.300"),dropdownTextColor:(0,n6.dU)("gray.900","white")},u=(0,d.useMemo)(()=>{let e=[];return ip().forEach(t=>{t.family.key===s?e.unshift({value:t.family.key,icon:E.i7d,label:M.Ru._({id:"+0acwA"})}):e.push({value:t.family.key,icon:t.family.icon,label:t.family.name()})}),[{value:"",icon:E.Qyz,label:M.Ru._({id:"XbthhE"})},...e]},[s]);return(0,i.jsxs)(tb.s,{px:4,pb:2,direction:"column",gap:2,children:[(0,i.jsx)(a.az,{mb:1,children:(0,i.jsx)(ia,{searchQuery:o,onChange:l,placeholder:M.Ru._({id:"CYJHZl"})})}),(0,i.jsxs)(tb.s,{alignItems:"center",gap:2,children:[(0,i.jsx)(V.E,{fontSize:"xs",mb:1,children:(0,i.jsx)(_.x6,{id:"2BreKV"})}),(0,i.jsxs)(A.W,{children:[(0,i.jsx)(z.I,{as:I.$,display:"flex",rightIcon:(0,i.jsx)(L.g,{icon:E.Jt$}),variant:"unstyled",size:"xs",textAlign:"start",bgColor:c.dropdownBgColor,color:c.dropdownTextColor,borderRadius:"md",px:2,_hover:{bgColor:c.dropdownBgHoverColor},children:s===n?(0,i.jsx)(_.x6,{id:"+0acwA"}):n?null===(t=im()[n])||void 0===t?void 0:t.family.name():(0,i.jsx)(_.x6,{id:"XbthhE"})}),(0,i.jsx)(R.c,{children:(0,i.jsx)(tY.i,{type:"radio",value:n||"",onChange:e=>r(""===e?null:String(e)),children:u.map(e=>(0,i.jsx)(tQ.k,{value:e.value,children:(0,i.jsxs)(tb.s,{alignItems:"center",gap:2,children:[(0,i.jsx)(L.g,{icon:e.icon,fixedWidth:!0}),e.label]})},e.value))})})]})]})]})});iv.displayName="FilterControls";let ib=(e,t)=>({...e,...Object.fromEntries(Object.entries(t).filter(n=>{let[i]=n;return null===e[i]||void 0===e[i]||null===t[i]}))}),iy=e=>{let{baseContent:t,variants:n}=e;return(0,K.createDocWithCards)({settings:{cardDimensions:"16x9"}},n.map(e=>{var n,i;return{type:"card",attrs:{id:e.key},content:[{type:"cardLayoutItem",content:[{...t,attrs:{...t.attrs,options:{...null===(n=t.attrs)||void 0===n?void 0:n.options,...e.options},variantKey:e.variantKey},content:(null===(i=e.cellAttrs)||void 0===i?void 0:i.label)&&t.content?t.content.map(t=>"smartLayoutCell"===t.type?{...t,attrs:ib(t.attrs||{},e.cellAttrs||{})}:t):t.content}]}]}}))},iw=(e,t,n)=>{try{let i=e.chain(),{key:a,options:r}=id(t);i.updateAttributesAtPos(n,{variantKey:a,options:r});let o=ig()[t];if(!o)return;let{cellAttrs:s}=o;if(s){let t=e.view.state.doc.nodeAt(n);if(!t)return;(0,l.xe)(t,x.q).forEach(e=>{let t=n+e.pos+1,a=ib(e.node.attrs,s);i.updateNestedAttributesAtPos(t,a)})}i.run()}catch(e){console.error("[Smart Layout Variant Panel] Error updating variant",e)}};var ij=n(21325),ik=n(1935);let iC=d.memo(e=>{let{item:t,isSelected:n,onClick:a}=e,{ref:r,width:o}=(0,ik.Lh)();return(0,i.jsxs)(tb.s,{ref:r,direction:"column",onClick:a,cursor:"pointer",overflow:"hidden",transition:"all 0.2s",color:n?"trueblue.600":"gray.900",bgColor:n?"trueblue.200":"transparent",_hover:{backgroundColor:n?"trueblue.150":"trueblue.100"},position:"relative",w:"100%",px:2,pt:2,pb:1,borderRadius:"md",css:{"--editor-width":"".concat(o&&1!==o?o:173,"px"),"--line-thickness":"1px"},h:"100%",children:[(0,i.jsx)(ij.N,{cardId:t.key,zoomIn:t.zoomIn,shadow:"md",border:"1px solid",borderColor:"gray.200",borderRadius:"md",minH:"80px"}),(0,i.jsxs)(V.E,{fontSize:"sm",mt:1,noOfLines:1,children:[n&&(0,i.jsx)(L.g,{icon:E.e68,width:"1.5em"}),t.name()]})]})});iC.displayName="VariantCard";let iS=()=>(0,i.jsx)(tb.s,{direction:"column",w:"100%",gap:1,opacity:.7,px:4,children:Array.from({length:3}).map((e,t)=>(0,i.jsxs)(tb.s,{direction:"column",w:"100%",mb:4,children:[(0,i.jsx)(tb.s,{alignItems:"center",justifyContent:"space-between",mb:2,children:(0,i.jsxs)(tb.s,{px:2,py:1,alignItems:"center",flex:1,children:[(0,i.jsx)(a.az,{as:"span",fontSize:"lg",me:2,children:(0,i.jsx)(a.az,{w:"16px",h:"16px",bg:"gray.200",borderRadius:"sm"})}),(0,i.jsx)(a.az,{w:"120px",h:"20px",bg:"gray.200",borderRadius:"md"})]})}),(0,i.jsx)(n5.r,{columns:2,spacing:4,children:Array.from({length:4}).map((e,t)=>(0,i.jsxs)(tb.s,{direction:"column",overflow:"hidden",h:"100px",position:"relative",children:[(0,i.jsx)(a.az,{flex:1,borderWidth:"1px",borderColor:"gray.200",borderRadius:"md",w:"100%",position:"relative",bg:"gray.100"}),(0,i.jsx)(tb.s,{direction:"row",alignItems:"center",mt:2,children:(0,i.jsx)(a.az,{w:"80px",h:"16px",bg:"gray.200",borderRadius:"md"})})]},t))})]},t))}),iA=e=>({visibility:e?"visible":"hidden",height:e?"auto":"0",overflow:"hidden",position:e?"relative":"absolute",pointerEvents:e?"auto":"none","aria-hidden":!e,tabIndex:e?void 0:-1}),iz=Object.assign(e=>{let{selectedSmartLayoutRange:t,closePanel:n,editor:a,node:r}=e;return(0,C.lC)(a,!0),(0,d.useEffect)(()=>{var e;let i=null==a?void 0:null===(e=a.state.selection)||void 0===e?void 0:e.from,{from:r,to:o}=t||{};if(!r||!o||!i){n();return}let l=null==a?void 0:a.state.doc.nodeAt(r),s=(null==l?void 0:l.type.name)==="smartLayout";(i===r||i>r&&i<o)&&s||n()},[null==a?void 0:a.state.selection,t,n,null==a?void 0:a.state.doc]),(0,i.jsx)(iI,{closePanel:n,selectedSmartLayoutRange:t,editor:a,node:r})},{panelPosition:"right",panelName:"smart-layout-variant",canCollapse:!1,minWidth:400}),iI=e=>{let{closePanel:t,selectedSmartLayoutRange:n,editor:a,node:r}=e,[o,l]=(0,d.useState)(null),[s,c]=(0,d.useState)(null);(0,d.useEffect)(()=>{var e,t;n&&n.from&&(l(is(r&&(null==r?void 0:null===(e=r.attrs)||void 0===e?void 0:e.variantKey)||"",r&&(null==r?void 0:null===(t=r.attrs)||void 0===t?void 0:t.options)||{})),c(iy({baseContent:null==r?void 0:r.toJSON(),variants:ih()})))},[]);let u={bgColor:(0,n6.dU)("white","gray.900"),textColor:(0,n6.dU)("gray.900","white")},p=(0,d.useCallback)(e=>{a&&n&&n.from&&(l(e),requestAnimationFrame(()=>{n.from&&iw(a,e,n.from)}))},[a,n]);return o?(0,i.jsx)(n8.Z,{bgColor:u.bgColor,w:"100%",pt:4,children:(0,i.jsxs)(tb.s,{direction:"column",overflowX:"hidden",w:"100%",h:"100%",children:[(0,i.jsxs)(tb.s,{position:"relative",px:4,children:[(0,i.jsx)(tb.s,{flex:1,children:(0,i.jsx)(n7.N,{children:(0,i.jsx)(_.x6,{id:"uNnHCK"})})}),(0,i.jsx)(n3.J,{onClick:t})]}),(0,i.jsx)(iR,{combinedContent:s,savedVariantHash:o,handleSelectVariant:p,editor:a,selectedSmartLayoutPos:null==n?void 0:n.from})]})}):null},iR=d.memo(e=>{let{combinedContent:t,savedVariantHash:n,handleSelectVariant:r,editor:o,selectedSmartLayoutPos:l}=e,{selectedFamilyKey:s,setSelectedFamilyKey:c,searchQuery:u,handleSearchChange:p,filteredVariants:h,suggestedFamilyKey:m}=ix({selectedVariantHash:n,editor:o,selectedSmartLayoutPos:l}),[g,x]=(0,d.useState)(!1),[f,v]=(0,d.useState)(!0);return((0,d.useEffect)(()=>{v(!0);let e=setTimeout(()=>{x(!0)},ie),t=setTimeout(()=>{v(!1)},it);return()=>{clearTimeout(e),clearTimeout(t)}},[]),t)?(0,i.jsxs)(tb.s,{direction:"column",h:"100%",overflowY:"auto",flex:1,pt:4,children:[(0,i.jsx)(iv,{selectedFamilyKey:s,setSelectedFamilyKey:c,searchQuery:u,handleSearchChange:p,suggestedFamilyKey:m}),f&&(0,i.jsx)(iS,{}),g&&(0,i.jsx)(n9.q,{initialContent:t,children:(0,i.jsx)(tb.s,{direction:"column",w:"100%",gap:1,children:h.map((e,t)=>{let o=e.visible,l=iA(o);return(0,i.jsxs)(tb.s,{direction:"column",w:"100%",...l,children:[o&&(0,i.jsx)(tb.s,{alignItems:"center",justifyContent:"space-between",children:(0,i.jsxs)(tb.s,{px:4,py:1,alignItems:"center",flex:1,children:[(0,i.jsx)(a.az,{as:"span",fontSize:"lg",me:2,children:e.family.icon&&(0,i.jsx)(L.g,{icon:e.family.icon,fixedWidth:!0,size:"sm"})}),(0,i.jsx)(V.E,{children:e.family.name()})]})}),(0,i.jsx)(n5.r,{columns:2,gap:2,px:2,pb:o?2:0,...l,children:e.variants.flatMap(e=>e.options.map(e=>{let t=iA(o&&e.visible);return(0,i.jsx)(d.Fragment,{children:(0,i.jsx)(a.az,{...t,children:(0,i.jsx)(iC,{item:e,isSelected:n===e.key,onClick:()=>{r(e.key)}})})},e.key)}))})]},t)})})})]}):null});iR.displayName="SmartLayoutVariantList";let iE=()=>{let{togglePanel:e,isPanelOpen:t}=(0,n4.ww)(iz);return{toggleSmartLayoutVariantPanel:e,isSmartLayoutVariantPanelOpen:t}};var iL=n(2079),i_=n(75621),iM=n(65641),iN=n(34095);let iT=e=>{let{editor:t,testId:n,disabled:a,icon:r,label:l}=e;return t.shouldUseLiteMenus?null:(0,i.jsxs)(A.W,{isLazy:!0,onClose:()=>(0,O.q)(t),children:[(0,i.jsx)(o.Tz,{placement:"top",label:l,children:(0,i.jsx)(z.I,{isDisabled:a,as:I.$,variant:"toolbar","data-testid":n,onMouseDown:T.Fw,rightIcon:(0,i.jsx)(L.g,{icon:E.Jt$,transform:"shrink-6"}),children:r&&(0,i.jsx)(L.g,{icon:r})})}),(0,i.jsx)(eR.Z,{children:(0,i.jsx)(R.c,{minW:"auto",zIndex:"modalPopover",dir:"ltr",children:tz.gj.map(e=>{let{key:n,name:a,shortcut:r,icon:o,checkActive:l,apply:s}=e;return(0,i.jsx)(D.I,{icon:o,label:a(),onClick:()=>null==s?void 0:s(t),isActive:null==l?void 0:l(t),testId:n,shortcut:r},n)})})})]})};var iP=n(16723),iO=n(59277),iD=n(77256);let iF=()=>({list:{label:M.Ru._({id:"Ci8I/9"})},wrap:{label:M.Ru._({id:"T4+jD7"})}}),iH=()=>{let e=(0,iD.Vo)();return[{key:"toggle",name:()=>M.Ru._({id:"JFciKP"}),icon:E.ijD,node:"toggle",description:()=>M.Ru._({id:"rhfAX6"}),apply:t=>{(0,iD.Jb)(e.toggle,eV.oU.FORMATTING_MENU),t.chain().wrapWithToggle().run()},group:"wrap"},{key:"convertToNestedCard",name:()=>M.Ru._({id:"lOmsEK"}),node:"card",description:()=>M.Ru._({id:"gRMoQV"}),icon:E.ViY,apply:t=>{(0,iD.Jb)(e.insertCardInside,eV.oU.FORMATTING_MENU),t.chain().convertToNestedCard().run()},checkDisabled:e=>!e.schema.nodes.card||!(0,t5.pO)(e,"card"),group:"wrap"},{key:"blockquote",name:()=>M.Ru._({id:"OLMhPm"}),node:"blockquote",description:()=>M.Ru._({id:"2yuhT7"}),icon:E.R9H,shortcut:"> Quote",apply:e=>e.chain().wrapWithAnnotations("blockquote").run(),checkDisabled:e=>!(0,t5.pO)(e,"blockquote"),group:"wrap"},{key:"calloutBox",name:()=>M.Ru._({id:"1E4ojF"}),node:"calloutBox",description:()=>M.Ru._({id:"4Wf98Z"}),icon:E.iW_,apply:e=>e.chain().wrapWithAnnotations("calloutBox",{variant:"info"}).run(),checkDisabled:e=>!(0,t5.pO)(e,"calloutBox"),group:"wrap"},{key:"listToCards",name:()=>M.Ru._({id:"FJ18tL"}),icon:E.vGi,description:()=>M.Ru._({id:"hWesxP"}),group:"list",apply:e=>e.commands.listToCards(),checkDisabled:e=>!(0,iP.Jx)(e)},...(0,iO.P3)()]};var iW=n(17119),iB=n(12554),iV=n(96964),iG=n(80917),iU=n(33795),iK=n(60443);let iq=[[{key:"textColor",name:()=>M.Ru._({id:"MapzEo"}),icon:E.jrc,shortcut:"Mod+Shift+H",enabledForTables:!0,checkDisabled:iB.NO}],[{key:"bold",name:()=>M.Ru._({id:"KmydK6"}),mark:"bold",icon:eP.l5I,shortcut:"Mod+B",enabledForTables:!0},{key:"italic",name:()=>M.Ru._({id:"pzutoc"}),mark:"italic",icon:E.SIw,shortcut:"Mod+I",enabledForTables:!0},{key:"underline",name:()=>M.Ru._({id:"YyXtnN"}),mark:"underline",icon:E.chs,shortcut:"Mod+U",enabledForTables:!0},{key:"strike",name:()=>M.Ru._({id:"WhOsNE"}),mark:"strike",icon:E.$6A,shortcut:"Mod+Shift+X"},{key:"code",name:()=>M.Ru._({id:"EWPtMO"}),mark:"code",icon:E.jTw,shortcut:"Mod+E"},{key:"math",name:()=>M.Ru._({id:"l8rp1O"}),apply:e=>e.commands.convertToMathInline(),icon:E.Dkf,featureFlag:"math",shortcut:"$$",checkDisabled:()=>!0},{key:"removeFormatting",name:()=>M.Ru._({id:"bj5jMy"}),icon:E.Dkb,apply:e=>e.chain().unsetAllMarks().focus().run(),enabledForTables:!0}],[{key:"link",name:()=>M.Ru._({id:"yzF66j"}),mark:"link",icon:E.CQO,shortcut:"Mod+K"},{key:"footnote",name:()=>M.Ru._({id:"ONAJuB"}),icon:E.sxe,apply:e=>{(0,iG.J)((0,iV.Vo)().footnote,eV.oU.FORMATTING_MENU),e.chain().toggleFootnote().run()},checkActive:e=>e.isActive("footnoteLabel"),shortcut:"Mod+Alt+F",checkDisabled:e=>(0,tV.Q)(e)||!(0,t5.pO)(e,"footnote")||(0,iB.NO)(e)}],[{key:"numbered",name:()=>M.Ru._({id:"M3G9ZD"}),icon:E.Tsj,node:"numbered",checkActive:e=>(0,iU.Lf)(e,iK.e.Numbered),shortcut:"Mod+/ or Mod+Shift+7",apply:e=>e.chain().toggleListItems({variant:iK.e.Numbered}).focus().run()},{key:"bullet",name:()=>M.Ru._({id:"ynb7Kh"}),icon:E.pch,node:"bullet",checkActive:e=>(0,iU.Lf)(e,iK.e.Bullet),apply:e=>e.chain().toggleListItems({variant:iK.e.Bullet}).focus().run(),shortcut:"Mod+. or Mod+Shift+8"},{key:"todo",name:()=>M.Ru._({id:"rCIbrq"}),icon:E.AgW,node:"todo",checkActive:e=>(0,iU.Lf)(e,iK.e.Todo),shortcut:"Mod+, or Mod+Shift+9",apply:e=>{let{from:t,to:n}=e.state.selection;e.chain().toggleListItems({variant:iK.e.Todo}).run(),requestAnimationFrame(()=>e.chain().focus().setTextSelection({from:t,to:n}).run())}}],[{key:"alignText",name:()=>M.Ru._({id:"6Hkcin"}),icon:E.ecg}],[{key:"convertText",name:()=>M.Ru._({id:"cXIM1U"}),checkDisabled:e=>!!e.shouldUseLiteMenus,icon:E.VH5},{key:"rewriteText",name:()=>M.Ru._({id:"C4t1b/"}),icon:eP.p7g,checkDisabled:e=>!!e.shouldUseLiteMenus,featureFlag:"aiRewrite",needsConnection:!0}],[{key:"comment",name:()=>M.Ru._({id:"oFsfkI"}),icon:E.DN2,checkDisabled:e=>(0,tV.Q)(e)||(0,iB.NO)(e)||!!e.shouldUseLiteMenus,needsConnection:!0,apply:e=>{let{selection:t}=e.state,{from:n,to:i}=t,[a]=(0,t5.TK)(e.state.doc.resolve(n),(e,t)=>(0,iW.cE)(t));if(!a){console.warn("[TEXT_FORMATTING_COMMANDS] Add comment - Unable to find annotatable parent for this selection");return}let r=(0,t5.r$)(e.state.doc,n,i,e=>"footnote"!==e.type.name&&"cardNotes"!==e.type.name,"__BLOCK_SEPARATOR_PLACEHOLDER").split("__BLOCK_SEPARATOR_PLACEHOLDER").join("<br /><br />");ev.LF.emit(ev.DN.CREATE_COMMENT_FROM_SELECTION,{selectionPos:n,parentPos:a.pos,text:r})}}]],iJ=function(e,t){var n;let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return!!(t.needsConnection&&i||t.featureFlag&&!Q.of.get(t.featureFlag)||(null===(n=t.checkDisabled)||void 0===n?void 0:n.call(t,e)))||(t.node?!(0,t5.aq)(e,t.node):!!t.mark&&!(0,t5.Au)(e,t.mark))},i$=e=>{let{editor:t,testId:n,disabled:a,icon:r,label:l}=e,{isInOfflineMode:s}=(0,$.u)(),d=iH().filter(e=>e.apply&&!iJ(t,e,s));return 0===d.length?null:(0,i.jsxs)(A.W,{isLazy:!0,onClose:()=>(0,O.q)(t),children:[(0,i.jsx)(o.Tz,{placement:"top",label:l,children:(0,i.jsx)(z.I,{isDisabled:a,as:I.$,variant:"toolbar","data-testid":n,onMouseDown:T.Fw,rightIcon:(0,i.jsx)(L.g,{icon:E.Jt$,transform:"shrink-6"}),children:r&&(0,i.jsx)(L.g,{icon:r})})}),(0,i.jsx)(eR.Z,{children:(0,i.jsx)(R.c,{maxH:"min(25em, 45vh)",overflowY:"auto",maxW:"400px",children:Object.entries(iF()).map(e=>{let[n,{label:a}]=e,r=d.filter(e=>e.group===n);return 0===r.length?null:(0,i.jsx)(eE.r,{title:a,children:r.map(e=>{let{key:n,icon:a,name:r,description:o,apply:l}=e;return(0,i.jsxs)(eM.D,{value:n,icon:(0,i.jsx)(L.g,{icon:a,fixedWidth:!0}),onClick:()=>l(t),"data-testid":"text-convert-menu-".concat(n),children:[(0,i.jsx)(V.E,{children:r()}),o&&(0,i.jsx)(V.E,{color:"gray.400",fontSize:"sm",children:o()})]},n)})},n)})})})]})};var iY=n(87809),iQ=n.n(iY);let iX=()=>({rephrase:{label:M.Ru._({id:"bKWhYP"})},visualize:{label:M.Ru._({id:"6n7jtr"})},reformat:{label:M.Ru._({id:"ILEG4I"})}}),iZ=[{key:"rephrase.better",type:"rephrase",name:()=>M.Ru._({id:"zD3xDw"}),icon:E.DKF,featureFlag:"aiRewrite",description:()=>M.Ru._({id:"YePdJg"}),apply:()=>{ev.LF.emit("queueDesignPartnerTask",{message:M.Ru._({id:"8nKskd"})})}},{key:"rephrase.expand",type:"rephrase",name:()=>M.Ru._({id:"K1q3tl"}),icon:E.t6y,description:()=>M.Ru._({id:"Y2Kk1Q"}),apply:()=>{ev.LF.emit("queueDesignPartnerTask",{message:M.Ru._({id:"HyVgOT"})})},featureFlag:"aiRewrite"},{key:"rephrase.condense",type:"rephrase",name:()=>M.Ru._({id:"rqoYwb"}),icon:E.nr0,description:()=>M.Ru._({id:"+ZW8bU"}),apply:()=>{ev.LF.emit("queueDesignPartnerTask",{message:M.Ru._({id:"70o6lh"})})},featureFlag:"aiRewrite"},{key:"visualize.keypoints",type:"visualize",name:()=>M.Ru._({id:"n+v3I1"}),description:()=>M.Ru._({id:"E9axcX"}),icon:E.bef,node:"smartLayout",apply:()=>{ev.LF.emit("queueDesignPartnerTask",{message:M.Ru._({id:"bXgpVx"})})}},{key:"visualize.images",type:"visualize",name:()=>M.Ru._({id:"laUyeH"}),description:()=>M.Ru._({id:"ADlAam"}),icon:E.yvG,apply:()=>{ev.LF.emit("queueDesignPartnerTask",{message:M.Ru._({id:"p2oHY3"})})}},{key:"visualize.timeline",type:"visualize",name:()=>M.Ru._({id:"Oh+9k8"}),description:()=>M.Ru._({id:"Qx1qQH"}),icon:E.v6v,apply:()=>{ev.LF.emit("queueDesignPartnerTask",{message:M.Ru._({id:"4ReFRy"})})}},{key:"reformat.columns",type:"reformat",name:()=>M.Ru._({id:"KyPPwt"}),description:()=>M.Ru._({id:"52Y/fs"}),icon:E.fq7,node:"gridLayout",apply:()=>{ev.LF.emit("queueDesignPartnerTask",{message:M.Ru._({id:"Y0UR8y"})})}},{key:"reformat.table",type:"reformat",name:()=>M.Ru._({id:"84sVti"}),description:()=>M.Ru._({id:"CxvNve"}),icon:E.w97,node:"table",apply:()=>{ev.LF.emit("queueDesignPartnerTask",{message:M.Ru._({id:"rU0fs4"})})}},{key:"reformat.toggles",type:"reformat",name:()=>M.Ru._({id:"aRUmvo"}),icon:E.Ke8,node:"toggle",description:()=>M.Ru._({id:"914Ln8"}),apply:()=>{ev.LF.emit("queueDesignPartnerTask",{message:M.Ru._({id:"rivjMe"})})}}],i0=()=>Object.entries(iQ()(iZ,"type")),i1=e=>{let{editor:t,testId:n,disabled:a,icon:r,label:l}=e,s=(0,B.d)(),{isInOfflineMode:d}=(0,$.u)();return(0,i.jsxs)(A.W,{isLazy:!0,onClose:()=>(0,O.q)(t),children:[(0,i.jsx)(o.Tz,{placement:"top",label:l,children:(0,i.jsx)(z.I,{isDisabled:a,as:I.$,variant:"toolbar","data-testid":n,onMouseDown:T.Fw,color:"trueblue.500",rightIcon:(0,i.jsx)(L.g,{icon:E.Jt$,transform:"shrink-6"}),children:r&&(0,i.jsx)(L.g,{icon:r})})}),(0,i.jsx)(eR.Z,{children:(0,i.jsx)(R.c,{maxH:"min(25em, 45vh)",overflowY:"auto",maxW:"450px",children:i0().map(e=>{let[n,a]=e,{label:r,featureFlag:o}=iX()[n];if(o&&!Q.of.get(o))return;let l=a.map(e=>{if(!(!e.apply||iJ(t,e,d)))return(0,i.jsxs)(eM.D,{value:e.key,icon:(0,i.jsx)(L.g,{icon:e.icon,fixedWidth:!0}),onClick:()=>i2(e,t,s),children:[(0,i.jsx)(V.E,{children:e.name()}),e.description&&(0,i.jsx)(V.E,{color:"gray.400",fontSize:"sm",children:e.description()})]},e.key)}).filter(Boolean);return l.length?(0,i.jsx)(eE.r,{title:r,children:l},n):null})})})]})},i2=(e,t,n)=>{let{apply:a}=e;if(!a)return;let o=a(t);if(!o)return;let l=n({position:"top",isClosable:!1,duration:null,status:"loading",variant:"subtle",title:(0,i.jsx)(_.x6,{id:"j4ZLea"})});o.then(()=>{n.close(l);let e=n({title:(0,i.jsxs)(r.z,{children:[(0,i.jsxs)(V.E,{noOfLines:1,children:[(0,i.jsx)(_.x6,{id:"hAmdL3"})," "]}),(0,i.jsx)(G.N,{textDecoration:"underline",onClick:()=>{(0,U.tN)(t.state),n.close(e)},children:(0,i.jsx)(_.x6,{id:"9uI/rE"})})]}),status:"success",duration:3e3,position:"top"})}).catch(e=>{n.close(l),n({title:(0,i.jsx)(_.x6,{id:"mTQLsL"}),description:e.message,status:"error",duration:3e3,position:"top"})})};var i4=n(81575),i5=n(70635),i6=n(74592),i3=n(45965),i8=n(30138),i7=n(18733);let i9=(e,t)=>!!t&&(e||!t.startsWith("/")),ae=e=>{let{editor:t}=e,{isInOfflineMode:n}=(0,$.u)(),a=(0,u.GV)(v.SJ),{bodyFont:o,headingFont:l}=a,s=e=>{t.chain().focus().setFontSize(e).run()},c=(0,t5.zi)(t,"heading"),p=(0,t5.zi)(t,"title"),h=(0,t5.zi)(t,"body"),m=(0,d.useCallback)(()=>{a.workspaceId?(0,i6.vd)({theme:a}):(0,i6.L6)({theme:a})},[a]);if(!h&&!c&&!p)return null;let g=(0,i8.Xw)(t),x="default",f=(0,i7.o)("default");x=t.isActive("title")?(0,i7.bn)(t.getAttributes("title").level)||"default":t.isActive("heading")?(0,i7.bZ)(t.getAttributes("heading").level)||"default":1===g.length&&g[0]||"default",f=(0,i7.o)(x)||f;let b=e=>"".concat(Math.sqrt(e),"em"),y=(0,iB.NO)(t),w=!!t.extensionManager.extensions.find(e=>"slashMenu"===e.name);return(0,i.jsxs)(A.W,{closeOnSelect:!0,isLazy:!0,children:[(0,i.jsx)(z.I,{size:"sm",as:I.$,rightIcon:(0,i.jsx)(L.g,{icon:E.Jt$,transform:"shrink-6"}),variant:"toolbar",pl:2,children:f.label}),(0,i.jsxs)(R.c,{maxH:"min(60em, 45vh)",overflowY:"auto",minW:"260px",children:[h&&(0,i.jsx)(tY.i,{type:"radio",value:x,children:(0,i3.QD)().filter(e=>{let[t]=e;return!(y&&"default"!==t)}).map(e=>{let[t,{label:n,size:a,flagged:l,shortcut:d}]=e,c=i9(w,d);return(0,i.jsx)(tQ.k,{value:t,onClick:()=>s(t),children:(0,i.jsxs)(r.z,{children:[(0,i.jsx)(V.E,{fontFamily:o,fontSize:b(a),children:n}),c&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eN.h,{}),(0,i.jsx)(V.E,{color:"gray.400",children:d})]})]})},t)})}),c&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(i4.N,{}),(0,i.jsx)(tY.i,{type:"radio",value:x,children:(0,i3.KG)().reverse().map(e=>{let[t,{label:n,size:a,shortcut:o}]=e,d=i9(w,o);return(0,i.jsx)(tQ.k,{value:t,onClick:()=>s(t),children:(0,i.jsxs)(r.z,{children:[(0,i.jsx)(V.E,{fontSize:b(a),fontWeight:"bold",fontFamily:l,children:n}),d&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eN.h,{}),(0,i.jsx)(V.E,{color:"gray.400",children:o})]})]})},t)})})]}),p&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(i4.N,{}),(0,i.jsx)(tY.i,{type:"radio",value:x,children:(0,i3.Y5)().map(e=>{let[t,{label:n,size:a,shortcut:o}]=e,d=i9(w,o);return(0,i.jsx)(tQ.k,{value:t,onClick:()=>s(t),children:(0,i.jsxs)(r.z,{children:[(0,i.jsx)(V.E,{fontSize:b(a),fontWeight:"bold",fontFamily:l,children:n}),d&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eN.h,{}),(0,i.jsx)(V.E,{color:"gray.400",children:o})]})]})},t)})})]}),(0,i.jsx)(i5.N,{label:(0,i.jsx)(_.x6,{id:"gJpKw8"}),leftIcon:(0,i.jsx)(L.g,{icon:E.tiU,fixedWidth:!0}),onClick:m,isDisabled:n})]})]})},at=e=>{let{editor:t,filterBy:n}=e,{isInOfflineMode:a}=(0,$.u)(),r="rtl"===(0,tz.CY)(t)?"alignRight":"alignLeft",o=()=>{let e=tz.gj.find(e=>e.alignment===(0,tz.F0)(t));if(e)return e.icon;let n=tz.gj.find(e=>e.key===r);return(null==n?void 0:n.icon)||E.ecg};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(S.e,{isAttached:!0,onMouseDown:T.Fw,children:(0,i.jsx)(ae,{editor:t})},"text"),iq.map((e,r)=>(0,i.jsx)(S.e,{spacing:0,size:"sm",onMouseDown:T.Fw,_empty:{display:"none"},children:e.filter(e=>{let i=!iJ(t,e,a);return n?i&&e[n]:i}).map(e=>{let{key:n,name:a,shortcut:r,icon:l,mark:s,node:d,checkActive:c,apply:u}=e,p=u||(s?e=>e.chain().toggleMark(s).focus().run():()=>{}),h=c?c(t):s?t.isActive(s):d?t.isActive(d):void 0;return"textColor"===n?(0,i.jsx)(nX,{shortcut:r,icon:l,editor:t},n):"rewriteText"===n?(0,i.jsx)(i1,{editor:t,shortcut:r,icon:l,testId:n,label:a()},n):"convertText"===n?(0,i.jsx)(i$,{editor:t,shortcut:r,icon:l,testId:n,label:a()},n):"alignText"===n?(0,i.jsx)(iT,{editor:t,shortcut:r,icon:o(),testId:n,label:a()},n):(0,i.jsx)(D.I,{label:a(),shortcut:r,isActive:h,onClick:()=>p(t),icon:l,testId:n},n)})},r))]})};var an=function(e){return e.enabledForTables="enabledForTables",e}({});let ai=e=>{let{editor:t,selection:n}=e,a=n.isRowSelection(),o=n.isColSelection(),d=a&&o,c=(0,l.KP)(iN.hj)(n);c&&s.nh.create(t.state.doc,null==c?void 0:c.pos);let u=Math.min(n.$anchorCell.pos,n.$headCell.pos),p=Math.max(n.$anchorCell.pos,n.$headCell.pos),{colMinPercent:h,newColSize:m}=t.schema.nodes[iM.X.name].spec,g=n.getTableNode(),x=(0,i_.cG)(g.attrs.colWidths,m,h);return(0,i.jsxs)(r.z,{spacing:1,children:[(0,i.jsx)(at,{editor:t,filterBy:an.enabledForTables}),(0,i.jsx)(P.q,{}),a&&!d&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(D.I,{label:(0,i.jsx)(_.x6,{id:"1ct6G/"}),onClick:()=>{t.commands.addRowBefore(),requestAnimationFrame(()=>{t.commands.focus(u)})},testId:"add-row-before-button",children:(0,i.jsx)(L.g,{icon:E.UiS})}),(0,i.jsx)(D.I,{label:(0,i.jsx)(_.x6,{id:"JUmxSq"}),onClick:()=>{t.commands.addRowAfter(),requestAnimationFrame(()=>{t.chain().focus(p).goToNextCell().run()})},testId:"add-row-after-button",children:(0,i.jsx)(L.g,{icon:E.UiS,rotation:180})}),(0,i.jsx)(D.I,{label:(0,i.jsx)(_.x6,{id:"0cspe/"}),icon:E.yLS,onClick:()=>t.chain().focus().deleteRow().run(),color:"red.500",testId:"delete-row-button"})]}),o&&!d&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(D.I,{label:(0,i.jsx)(_.x6,{id:"mwcRkO"}),onClick:()=>{let{left:e}=(0,f._t)(t.state.selection);t.commands.addColumnBefore(e),requestAnimationFrame(()=>{t.commands.focus(u)})},isDisabled:!x,testId:"add-col-before-button",children:(0,i.jsx)(L.g,{icon:E.UiS,rotation:270})}),(0,i.jsx)(D.I,{label:(0,i.jsx)(_.x6,{id:"/93cy4"}),onClick:()=>{let{left:e}=(0,f._t)(t.state.selection);t.commands.addColumnAfter(e),requestAnimationFrame(()=>{t.chain().focus(u).goToNextCell().run()})},isDisabled:!x,testId:"add-col-after-button",children:(0,i.jsx)(L.g,{icon:E.UiS,rotation:90})}),(0,i.jsx)(D.I,{label:(0,i.jsx)(_.x6,{id:"GAohqx"}),icon:E.yLS,onClick:()=>{t.commands.deleteColumn(),requestAnimationFrame(()=>{t.commands.focus(u)})},color:"red.500",testId:"delete-col-button"})]}),d&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(D.I,{label:(0,i.jsx)(_.x6,{id:"SOkhdm"}),icon:E.yC$,onClick:()=>t.commands.equalizeColumns(),testId:"equalize-columns-button"}),(0,i.jsx)(P.q,{}),(0,i.jsx)(D.I,{label:(0,i.jsx)(_.x6,{id:"HSI88F"}),icon:E.yLS,onClick:()=>t.chain().focus().deleteTable().run(),color:"red.500",testId:"delete-table-button"})]})]})},aa=[{component:ai,predicate:e=>e instanceof f.rn&&e.isColSelection(),offsetPx:16},{component:ai,predicate:e=>e instanceof f.rn&&e.isRowSelection(),offsetPx:12},{component:e=>{let{editor:t,selection:n}=e,a=(0,u.GV)(v.SJ),r=n.node,o=(0,tx.Ik)((0,tx.VH)(a));return r?(0,i.jsx)(tf.z,{attributes:r.attrs,updateAttributes:e=>{t.chain().updateAttributes("chart",e).focus().run()},accentColor:o,setEditing:()=>{t.commands.editSelectedChart()},editor:t,inline:!0}):null},predicate:e=>{var t,n;return e instanceof s.nh&&(null===(n=e.node)||void 0===n?void 0:null===(t=n.type)||void 0===t?void 0:t.name)==="chart"},isPopover:!0},{component:e=>{let{editor:t,selection:n}=e,a=(0,u.GV)(v.SJ),r=t.getAttributes("link").href||"",o=!t.shouldUseLiteMenus,{isPageLink:l}=nh({href:r}),s=(0,tx.Ik)((0,tx.Jh)(a)),c=(0,d.useCallback)(e=>{t.commands.updateSurroundingLink(e)},[t]),p=(0,tJ.f)(),h=(0,d.useCallback)(e=>{t.view.focus(),p({isOpen:!0}),e.stopPropagation()},[t,p]);return(0,i.jsxs)(tk,{children:[o&&r&&!(0,t4.hc)(r)&&(0,i.jsx)(ty,{label:(0,i.jsx)(_.x6,{id:"/SVg/B"}),icon:E.CQO,children:(0,i.jsx)(nO,{editor:t,selection:n,isDisabled:l})}),(0,i.jsx)(nx,{href:r,updateHref:c,clearHref:()=>{t.commands.updateSurroundingLink("")},removeLink:()=>t.commands.removeSurroundingLink(),editor:t}),o&&(0,i.jsx)(ty,{label:(0,i.jsx)(_.x6,{id:"0j+RGO"}),icon:E.ecg,children:(0,i.jsx)(S.e,{dir:"ltr",spacing:0,size:"sm",onMouseDown:T.Fw,children:tz.gj.map(e=>{let{name:n,key:a,icon:r,shortcut:o,checkActive:l,apply:s}=e;if(l&&s)return(0,i.jsx)(D.I,{label:n(),shortcut:o,isActive:l(t),onClick:()=>{s(t)},icon:r,testId:a,my:0},a)})})}),o&&(0,i.jsx)(ty,{label:(0,i.jsx)(_.x6,{id:"jZlrte"}),icon:E.wIs,children:(0,i.jsx)(nX,{editor:t,useMenuButton:!0,isLinkText:!0,defaultTextColor:s})}),o&&!(0,t4.hc)(r)&&(0,i.jsx)(tw,{label:(0,i.jsx)(_.x6,{id:"sxkWRg"}),onClick:h,icon:E.BH7})]})},predicate:(e,t)=>e instanceof s.U3&&t.isActive("link"),isPopover:!0},{component:nD,predicate:(e,t)=>t.isActive("button")&&!t.isSiteNavbarEditor,isPopover:!0},{component:e=>{let{editor:t,selection:n}=e,{node:a,from:r}=n,o=e=>!!a&&JSON.stringify(e)===JSON.stringify(a.attrs.colWidths),{verticalAlign:l}=t.getAttributes("gridCell"),s=(0,d.useCallback)(e=>{t.chain().updateAttributes("gridCell",{verticalAlign:e===l?null:e}).selectNodeAtPos(n.from).focus().run()},[t,n,l]);return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(S.e,{spacing:1,size:"sm",alignItems:"center",children:[(0,i.jsxs)(t$.ms,{isLazy:!0,children:[(0,i.jsx)(t$.gf,{as:I.$,variant:"toolbar",rightIcon:(0,i.jsx)(L.g,{icon:E.Jt$}),size:"sm","data-testid":"layout-preset-dropdown",children:(0,i.jsx)(_.x6,{id:"6v+N4U",values:{0:a.childCount}})}),(0,i.jsx)(t$.Q5,{"data-in-editor-focus":!0,fontSize:"md",children:nL().map(e=>{let{testId:n,name:a,image:l,value:s}=e;return(0,i.jsx)(t$.tJ,{"data-testid":n,icon:o(s)?(0,i.jsx)(nS.S,{w:"2rem"}):(0,i.jsx)(e9._,{h:"1rem",w:"2rem",objectFit:"cover",src:l.src}),onClick:()=>{r&&t.commands.useLayoutPreset(r,s)},children:a},a)})})]}),(0,i.jsx)(D.I,{onClick:()=>s("start"),isActive:"start"===l,label:M.Ru._({id:"/Q0jUh"}),children:(0,i.jsx)(nw.a_t,{})}),(0,i.jsx)(D.I,{onClick:()=>s("center"),isActive:"center"===l,label:M.Ru._({id:"QhuQN2"}),children:(0,i.jsx)(nw.o9M,{})}),(0,i.jsx)(D.I,{onClick:()=>s("end"),isActive:"end"===l,label:M.Ru._({id:"EPnxoe"}),children:(0,i.jsx)(nw.Awj,{})}),(0,i.jsx)(P.q,{}),(0,i.jsx)(W,{editor:t})]})})},predicate:e=>e instanceof s.nh&&(0,h.X6)(e.node)},{component:e=>{let{editor:t,selection:n,decorations:a}=e,{isInOfflineMode:o}=(0,$.u)(),{node:l,from:s}=n,{attrs:c,isNested:u,isFirstCard:p}=(0,Z.f)({node:l,decorations:a,editor:t}),{isOpen:h,onOpen:m,onClose:g}=(0,X.E)({id:"downloadCardAsImageDisclosure"}),x=(0,d.useCallback)(()=>{null==t||t.commands.duplicateCard(s)},[t,s]),f=(0,d.useCallback)(()=>{null==t||t.commands.unnestCard(s)},[t,s]),v=(0,d.useCallback)(()=>{null==t||t.chain().mergeCardsAtPos(s).focus().run()},[t,s]),b=(0,B.d)(),y=(0,d.useCallback)(()=>{let e=t.state.doc.nodeAt(s),n=e&&(0,K.getCardTitle)(e.toJSON());t.chain().deleteCard(s).focus().run();let a=M.Ru._({id:"0MWv65",values:{displayTitle:n?'"'.concat(n,'"'):"card"}}),o=M.Ru._({id:"9uI/rE"}),l=b({title:(0,i.jsxs)(r.z,{children:[(0,i.jsx)(V.E,{noOfLines:1,children:a}),(0,i.jsx)(G.N,{textDecoration:"underline",onClick:()=>{(0,U.tN)(t.state),b.close(l)},children:o})]}),status:"info",duration:3e3,position:"top"})},[t,s,b]),w=(0,Q.u)("aiCardDesigner"),j=(0,d.useCallback)(()=>{var e;let t=null===(e=n.node)||void 0===e?void 0:e.attrs.id;if(!t)return;let i=prompt("What do you want to change?",J.s);i&&q.R.emit("openSuggestionEditor",{cardId:t,userMessage:i})},[n]),k=(0,Q.u)("copyCardsToDeck"),C=(0,Y.T)();return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(S.e,{spacing:1,size:"sm",alignItems:"center",children:[(0,i.jsx)(D.I,{label:(0,i.jsx)(_.x6,{id:"BTDPLo"}),testId:"duplicate-card",onClick:x,icon:E.$3n}),u&&(0,i.jsx)(D.I,{label:(0,i.jsx)(_.x6,{id:"b+J8Wt"}),testId:"merge-into-parent-card",onClick:f,icon:E.ndq}),!u&&!p&&(0,i.jsx)(D.I,{label:(0,i.jsx)(_.x6,{id:"kV34zB"}),testId:"merge-into-card-above",onClick:v,icon:E.INu}),w&&(0,i.jsx)(D.I,{onClick:j,icon:E.ESE,label:"Design with AI"}),(0,i.jsx)(ek.g,{attrs:c}),k&&(0,i.jsx)(D.I,{label:(0,i.jsx)(_.x6,{id:"IAsTWw"}),onClick:()=>C([l]),icon:E.Rvk,flipIcon:"horizontal",isDisabled:o}),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(D.I,{label:(0,i.jsx)(_.x6,{id:"xRJ+bN"}),testId:"download-card",onClick:m,icon:E.a_I,isDisabled:o}),(0,i.jsx)(ej,{isOpen:h,onClose:g,cardId:c.id,editor:t})]}),(0,i.jsx)(W,{editor:t,handleDelete:y})]})})},predicate:e=>e instanceof s.nh&&(0,b.jg)(e.node),offsetPx:0},{component:e=>{var t;let{editor:n,selection:a,decorations:r}=e,{node:s,from:d}=a,c=(0,e1.Bn)(r),u=s.attrs,p=(0,e0.jh)(u,null==c?void 0:c.layout),h=(0,e0.JH)(u,null==c?void 0:c.layout),m=(null===(t=u.background)||void 0===t?void 0:t.type)===e2.h.IMAGE,g=(0,eS.l)(u.background.image),x=(0,l.eL)(n.state.doc.resolve(d),b.jg),f=s.attrs.background.type===e2.h.IMAGE&&u.background.image&&(0,eX.D)(u.background.image);return(0,i.jsx)(S.e,{spacing:1,size:"sm",alignItems:"center",children:"accent"===u.itemId&&(0,i.jsxs)(i.Fragment,{children:[h&&(0,i.jsx)(e4,{editor:n,selection:a,decorations:r}),f&&(0,i.jsx)(tm,{editor:n,pos:d,node:s,isDisabled:"fit"===p}),(h||f)&&(0,i.jsx)(P.q,{}),m&&u.background.image&&(g?(0,i.jsx)(e$,{attrs:u.background.image,editor:n,variant:"toolbar",size:"sm"}):(0,i.jsx)(tg.g,{editor:n,selection:a,decorations:r})),(0,i.jsx)(o.Tz,{label:m?(0,i.jsx)(_.x6,{id:"XQFMOm"}):(0,i.jsx)(_.x6,{id:"P5MuiB"}),placement:"top",children:(0,i.jsx)(eC.K,{onClick:()=>{let e=null==x?void 0:x.node.attrs.id;e&&eZ.R.emit("toggleEditBackgroundDrawer",{openDrawer:!0,cardId:e})},variant:"toolbar",size:"sm",icon:(0,i.jsx)(L.g,{icon:E.MT7}),boxSize:7,p:0,"aria-label":m?M.Ru._({id:"Ov693i"}):M.Ru._({id:"B6vyEa"})})}),(0,i.jsx)(P.q,{}),(0,i.jsx)(o.Tz,{label:m?(0,i.jsx)(_.x6,{id:"sGYCGx"}):(0,i.jsx)(_.x6,{id:"6vLq+T"}),placement:"top",children:(0,i.jsx)(eC.K,{onClick:()=>(0,e0.kB)(n,d,m),variant:"toolbar",size:"sm",icon:m?(0,i.jsx)(L.g,{icon:E.K3F}):(0,i.jsx)(L.g,{icon:E.yLS}),color:"red.500",boxSize:7,p:0,"aria-label":m?M.Ru._({id:"sGYCGx"}):M.Ru._({id:"6vLq+T"})})})]})})},predicate:e=>e instanceof s.nh&&(0,p.wL)(e.node),offsetPx:6},{component:e=>{let{editor:t,selection:n}=e,a=n.$from.parent.childCount<nj.ZS,{verticalAlign:r}=n.node.attrs,o=(0,d.useCallback)(e=>{t.chain().updateAttributes("gridCell",{verticalAlign:e===r?null:e}).selectNodeAtPos(n.from).focus().run()},[t,r,n]);return(0,i.jsxs)(S.e,{spacing:1,size:"sm",alignItems:"center",children:[(0,i.jsx)(nC,{editor:t,label:M.Ru._({id:"NFoeBH"}),icon:E.tjk}),a&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(P.q,{}),(0,i.jsx)(D.I,{label:M.Ru._({id:"bZ9ges"}),icon:E.UiS,iconRotation:270,onClick:()=>{t.chain().insertContentAt(n.from,nj.eK).run()},testId:"add-col-before-button"}),(0,i.jsx)(D.I,{label:M.Ru._({id:"7ibPpM"}),icon:E.UiS,iconRotation:90,onClick:()=>{t.chain().insertContentAt(n.from+n.node.nodeSize,nj.eK).run()},testId:"add-col-after-button"}),(0,i.jsx)(nk,{editor:t,selection:n})]}),(0,i.jsx)(D.I,{onClick:()=>o("start"),isActive:"start"===r,label:M.Ru._({id:"/Q0jUh"}),children:(0,i.jsx)(nw.a_t,{})}),(0,i.jsx)(D.I,{onClick:()=>o("center"),isActive:"center"===r,label:M.Ru._({id:"QhuQN2"}),children:(0,i.jsx)(nw.o9M,{})}),(0,i.jsx)(D.I,{onClick:()=>o("end"),isActive:"end"===r,label:M.Ru._({id:"EPnxoe"}),children:(0,i.jsx)(nw.Awj,{})}),(0,i.jsx)(P.q,{}),(0,i.jsx)(W,{editor:t,handleDelete:()=>{t.chain().selectInsideNodeAtPos(n.from).handleLayoutDelete(!0,!1).run()}})]})},predicate:e=>e instanceof s.nh&&(0,h.NJ)(e.node)},{component:e=>{let{editor:t,selection:n,decorations:a}=e,{node:o}=n,{options:l,variantKey:s}=o.attrs,c=(0,iu.B)(s),{toggleSmartLayoutVariantPanel:u}=iE(),p=(0,d.useCallback)(e=>{t.commands.updateNestedAttributesAtPos(n.from,e)},[t,n.from]),h=(0,d.useCallback)(()=>{u({override:"open",isResizable:!1,props:{selectedSmartLayoutRange:{from:n.from,to:n.to},editor:t,node:o}})},[u,n.from,n.to,t,o]),m=(0,d.useCallback)(e=>{p({variantKey:e})},[p]);return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(r.z,{spacing:2,children:[(0,i.jsxs)(t$.ms,{isLazy:!0,children:[(0,i.jsx)(t$.gf,{as:I.$,variant:"toolbar",rightIcon:(0,i.jsx)(L.g,{icon:E.Jt$,transform:"shrink-6"}),leftIcon:(0,i.jsx)(L.g,{icon:c.icon,fixedWidth:!0}),size:"sm","data-testid":"smart-layout-variant-dropdown",children:c.name()}),(0,i.jsx)(t$.Q5,{maxH:"min(25em, 45vh)",overflowY:"auto","data-in-editor-focus":!0,fontSize:"md",children:(0,iu.a)().map(e=>{let{key:t,name:n,icon:a,disabled:r,featureFlag:o}=e;if(r||o&&!Q.of.get(o))return null;let l=s===t;return(0,i.jsx)(t$.tJ,{"data-test-variant-option":t,icon:l?(0,i.jsx)(nS.S,{}):(0,i.jsx)(L.g,{icon:a,fixedWidth:!0}),onClick:()=>m(t),children:n()},t)})})]}),(0,i.jsx)(P.q,{}),(0,i.jsx)(S.e,{size:"sm",children:c.options.map(e=>{var r,s;let d=(0,ir.Rv)(a);if(e.checkEnabled&&!e.checkEnabled(o.attrs,d))return null;let c=null!==(s=l[e.key])&&void 0!==s?s:null===(r=e.defaultValue)||void 0===r?void 0:r.call(e,{ctx:"menu"});return(0,i.jsx)(e.Control,{value:c,updateValue:(i,a)=>{p({options:{...l,[e.key]:i}}),a&&o.forEach((a,r)=>{t.commands.updateNestedAttributesAtPos(n.from+r+1,{options:{...a.attrs.options,[e.key]:i}})})},editor:t,option:e},e.key)})}),(0,i.jsx)(P.q,{}),(0,i.jsx)(I.$,{variant:"toolbar",rightIcon:(0,i.jsx)(L.g,{icon:E.LFz}),size:"sm",onClick:h,children:(0,i.jsx)(_.x6,{id:"vR68Ol"})}),(0,i.jsx)(P.q,{}),(0,i.jsx)(W,{editor:t})]})})},predicate:(e,t,n)=>e instanceof s.nh&&(0,x.M)(e.node)&&"smart-layout-variant"!==n.right},{component:e=>{let{editor:t,selection:n}=e,{node:a,from:r}=n,o=a.attrs.id,s=(0,x.M)(null==n?void 0:n.$from.parent)?null==n?void 0:n.$from.parent:null,{editImage:c,startRemoveBg:u,isRemovingBg:p}=(0,iL.c)({editor:t,backgroundRemovalId:o,getPos:()=>r}),h=(0,iL.m)({editor:t,node:a,parentNode:s}),{toggleSmartLayoutVariantPanel:m}=iE(),g=(0,d.useCallback)(e=>{let n=(0,l.eL)(e,x.M);if(!n)return;let i=n.pos,a=i+n.node.nodeSize;t.commands.selectParentNode(),m({override:"open",isResizable:!1,props:{selectedSmartLayoutRange:{from:i,to:a},editor:t,node:n.node}})},[m,t]);if(!h)return null;let{addColumnBefore:f,addColumnAfter:v,canChangeFocusPointAndRemoveBackground:b,canEditImageWithAI:y,hasImage:w,imageSlot:j,imageType:k,addDirection:C,parentVariant:A,cellOptions:z,handleDelete:R,updateAttributes:N,resetImage:T}=h;return(0,i.jsxs)(S.e,{spacing:1,size:"sm",alignItems:"center",children:[(0,i.jsx)(nC,{editor:t,label:M.Ru._({id:"NFoeBH"}),icon:null==A?void 0:A.icon}),(0,i.jsx)(P.q,{}),b&&(0,i.jsx)(tm,{editor:t,pos:r,node:a}),y?(0,i.jsx)(e$,{editor:t,attrs:a.attrs.image,variant:"toolbar"}):b&&(0,i.jsx)(tg.j,{onClick:u,disabled:p}),"always"===j||w?(0,i.jsx)(D.I,{label:"icon"===k?(0,i.jsx)(_.x6,{id:"JE/4q/"}):(0,i.jsx)(_.x6,{id:"9IrgTy"}),icon:"icon"===k?E.cCs:E.MT7,onClick:c}):"optional"===j?(0,i.jsx)(D.I,{label:"icon"===k?(0,i.jsx)(_.x6,{id:"1SYZRR"}):(0,i.jsx)(_.x6,{id:"pVb3uA"}),icon:"icon"===k?E.cCs:E.Cyq,onClick:c}):null,w&&(0,i.jsx)(D.I,{label:"icon"===k?(0,i.jsx)(_.x6,{id:"+4mjS6"}):(0,i.jsx)(_.x6,{id:"EyVcag"}),icon:E.K3F,color:"red",onClick:()=>T(r)}),("always"===j||w)&&(0,i.jsx)(P.q,{}),(0,i.jsx)(D.I,{label:M.Ru._({id:"w7mkyz"}),iconRotation:"bottom"===C?void 0:270,icon:E.UiS,onClick:()=>f(r),testId:"add-col-before-button"}),(0,i.jsx)(D.I,{label:M.Ru._({id:"1e37Dl"}),icon:E.UiS,iconRotation:"bottom"===C?180:90,onClick:()=>v(r+a.nodeSize),testId:"add-col-after-button"}),(0,i.jsx)(nk,{editor:t,selection:n}),(null==A?void 0:A.cellOptions.length)&&(null==A?void 0:A.cellOptions.length)>0?(0,i.jsx)(P.q,{}):null,(0,i.jsx)(S.e,{size:"sm",children:null==A?void 0:A.cellOptions.map(e=>{var o,l;if(e.checkEnabled&&!e.checkEnabled(a.attrs))return null;let s=null!==(l=z[e.key])&&void 0!==l?l:null===(o=e.defaultValue)||void 0===o?void 0:o.call(e,{ctx:"menu"});return(0,i.jsx)(e.Control,{value:s,updateValue:t=>{N(n.from,{options:{...z,[e.key]:t}})},editor:t,option:e,pos:r},e.key)})}),(0,i.jsx)(P.q,{}),(0,i.jsx)(I.$,{variant:"toolbar",rightIcon:(0,i.jsx)(L.g,{icon:E.LFz}),size:"sm",onClick:()=>g(n.$from),children:(0,i.jsx)(_.x6,{id:"vR68Ol"})}),(0,i.jsx)(P.q,{}),(0,i.jsx)(W,{editor:t,handleDelete:R})]})},predicate:e=>e instanceof s.nh&&(0,x.q)(e.node)},{component:e=>{let{selection:t,editor:n}=e,r=0===t.node.childCount,{layout:l,stretchFill:s}=t.node.attrs,c=(0,d.useCallback)(()=>{n.chain().deleteSelectionAndSelectNear().run()},[n]);return r?null:(0,i.jsx)(a.az,{minW:"300px",children:(0,i.jsxs)(tk,{children:[!r&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(es.B,{w:"100%",direction:"row",justify:"space-between",alignItems:"flex-start",children:(0,i.jsx)(o._x,{children:(0,i.jsx)(_.x6,{id:"U+kFad"})})}),(0,i.jsx)(ty,{label:(0,i.jsx)(_.x6,{id:"rdU729"}),icon:E.yOA,children:(0,i.jsx)(tH.lQ,{editor:n,selection:t})}),"grid"===l&&(0,i.jsx)(tP,{editor:n,selection:t}),"flex"===l&&(0,i.jsx)(tB,{editor:n,selection:t}),(0,i.jsx)(tF,{editor:n,selection:t}),"logo"===l&&(0,i.jsx)(tW,{editor:n,selection:t}),"flex"===l&&!(!0===s||null===s)&&(0,i.jsx)(ty,{label:(0,i.jsx)(_.x6,{id:"0j+RGO"}),icon:E.ecg,children:(0,i.jsx)(S.e,{dir:"ltr",spacing:0,size:"sm",onMouseDown:T.Fw,_empty:{display:"none"},children:tz.gj.map(e=>{let{key:a,name:r,shortcut:o,icon:l,apply:s,checkActive:d}=e;if(!n||!s||!d)return null;let c=d(n);return(0,i.jsx)(D.I,{shortcut:o,icon:l,label:r(),onClick:()=>{s(n),n.chain().setNodeSelection(t.from).run()},isActive:c,testId:a},a)})})})]}),(0,i.jsx)(tw,{isPrimaryActionDestructive:!0,label:(0,i.jsx)(_.x6,{id:"cnGeoo"}),icon:E.yLS,colorScheme:"red",onClick:c})]})})},predicate:e=>e instanceof s.nh&&(0,m.Pb)(e.node),isPopover:!0},{component:e=>{let{editor:t,selection:n}=e,a=n.node.attrs;return(0,i.jsxs)(S.e,{spacing:2,size:"sm",flex:"row",alignItems:"center",children:[(0,i.jsx)(F,{editor:t,attrs:a,selection:n}),(0,i.jsx)(H.a,{color:a.color||void 0,setColor:e=>{t.chain().focus().updateAttributes("calloutBox",{color:e}).selectNodeAtPos(n.from).run()},editor:t,analyticsSource:"CalloutBox"}),(0,i.jsx)(P.q,{}),(0,i.jsx)(W,{editor:t})]})},predicate:e=>e instanceof s.nh&&"calloutBox"===e.node.type.name},{component:e=>{let{editor:t,selection:n}=e,a=n.node.type.name,{fullWidthBlock:r}=t.getAttributes(a),o=(0,d.useCallback)(e=>{var n,i;e.stopPropagation(),null===(n=(i=t.commands).editSelectedDrawingBlock)||void 0===n||n.call(i)},[t]);return(0,i.jsxs)(S.e,{spacing:0,size:"sm",alignItems:"center",dir:"ltr",children:[tz.gj.map(e=>{let{name:n,icon:o,checkActive:l,apply:s}=e;if(l&&s)return(0,i.jsx)(D.I,{label:n(),icon:o,onClick:()=>{s(t),r&&t.commands.updateAttributes(a,{fullWidthBlock:!1})},isActive:!r&&l(t)},n())}),(0,i.jsx)(D.I,{label:(0,i.jsx)(_.x6,{id:"ePK91l"}),icon:E.MT7,onClick:o}),(0,i.jsx)(P.q,{}),(0,i.jsx)(W,{editor:t})]})},predicate:e=>e instanceof s.nh&&("drawing"===e.node.type.name||"diagram"===e.node.type.name)},{component:e=>{let{editor:t,selection:n}=e,a=n.node.type.name,{fullWidthBlock:r}=t.getAttributes(a);return(0,i.jsxs)(S.e,{spacing:0,size:"sm",alignItems:"center",dir:"ltr",children:[tz.gj.map(e=>{let{name:n,icon:o,checkActive:l,apply:s}=e;if(l&&s)return(0,i.jsx)(D.I,{label:n(),icon:o,onClick:()=>{s(t),r&&t.commands.updateAttributes(a,{fullWidthBlock:!1})},isActive:!r&&l(t)},n())}),(0,i.jsx)(P.q,{}),(0,i.jsx)(W,{editor:t})]})},predicate:e=>e instanceof s.nh&&"smartDiagram"===e.node.type.name},{component:e=>{let{editor:t,selection:n}=e,{fullWidthBlock:a}=n.node.attrs,o=(0,tJ.f)(),l=(0,d.useCallback)(e=>{t.view.focus(),o({isOpen:!0}),e.stopPropagation()},[t,o]),s=(0,tV.Q)(t),c=(0,m.qK)(n.$from);return(0,i.jsxs)(r.z,{spacing:0,children:[!c&&!s&&(0,i.jsxs)(tb.s,{dir:"ltr",children:[tz.gj.map(e=>{let{name:r,icon:o,checkActive:l,apply:s}=e;if(l&&s)return(0,i.jsx)(D.I,{label:r(),icon:o,onClick:()=>{s(t),a&&t.commands.updateAttributes(n.node.type.name,{fullWidthBlock:!1})},isActive:!a&&l(t)},r())}),(0,i.jsx)(P.q,{})]}),(0,i.jsxs)(S.e,{spacing:0,size:"sm",alignItems:"center",children:[(0,i.jsxs)(i.Fragment,{children:[c&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(nC,{editor:t,label:M.Ru._({id:"+v0hYZ"}),icon:E.Qyz}),(0,i.jsx)(P.q,{})]}),(0,i.jsx)(D.I,{label:(0,i.jsx)(_.x6,{id:"ePK91l"}),icon:E.MT7,onClick:l,testId:"edit-button"})]}),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(P.q,{}),(0,i.jsx)(W,{editor:t})]})]})]})},predicate:e=>e instanceof s.nh&&"mediaPlaceholder"===e.node.type.name},{component:e=>{let{editor:t,selection:n}=e,o=n.node.attrs,{resize:l,fullWidthBlock:s,id:c,src:p,tempUrl:h,href:g,clickBehavior:x}=o,{isInOfflineMode:f}=(0,$.u)(),{enterZoom:v}=(0,tq.RL)(c),b=(0,tJ.f)(),y=(0,d.useCallback)(e=>{t.view.focus(),b({isOpen:!0}),e.stopPropagation()},[t,b]),w=(0,Q.u)("disableRemoveBackground"),j=(0,k.gk)(x),C=(0,d.useCallback)(e=>{t.commands.updateAttributes(tr._V.name,{clickBehavior:e})},[t]),A=(0,d.useCallback)(e=>{t.commands.updateAttributes(tr._V.name,{href:e})},[t]),{setCropClipType:z,confirmCrop:I,cancelCrop:R,startCrop:N,resetCrop:P}=(0,tG.E)(t),O=(0,u.GV)(tr.$k),F=(0,d.useCallback)(()=>{(0,m.wG)(n)},[n]),H=(0,tV.Q)(t),W=(0,m.qK)(n.$from),B=(0,tl.SV)(p||h),V=(0,tl.v7)(p||h),G=!W&&!H&&!V,U=!B&&!w&&!V,K=(0,u.GV)((0,tr.iZ)(c)),{startRemoveBg:q,isRemovingBg:J}=(0,tU.D)({editor:t,id:c}),Y=!!((null==l?void 0:l.clipPath)&&(null==l?void 0:l.clipType)),X=(0,eS.l)(o),Z=(0,d.useCallback)(()=>{J&&tr.RR.emit("cancelRemoveBg",{id:c}),t.chain().deleteSelectionAndSelectNear().run()},[t,c,J]),ee=(0,d.useMemo)(()=>[{key:"zoom",ariaLabel:M.Ru._({id:"ACjxWW"}),label:(0,i.jsx)(_.x6,{id:"ACjxWW"}),action:v,icon:E.bMI},{key:"addComment",ariaLabel:M.Ru._({id:"oFsfkI"}),label:(0,i.jsx)(_.x6,{id:"oFsfkI"}),action:F,icon:E.DN2,isHidden:H,isDisabled:f},{key:"crop",ariaLabel:M.Ru._({id:"qKx+US"}),label:(0,i.jsx)(_.x6,{id:"qKx+US"}),action:()=>{N({id:c,clipType:null==l?void 0:l.clipType})},icon:E.K1P,isHidden:!G,isDisabled:J},{key:"removeBackground",canRemoveBackground:U,ariaLabel:M.Ru._({id:"YOCRHt"}),label:(0,i.jsxs)(tb.s,{alignItems:"center",justifyContent:"center",children:[(0,i.jsx)(_.x6,{id:"ylbfBl"}),(0,i.jsx)(eD.G,{type:"removeBackground",ms:2,color:"gray.400"})]}),customIcon:(0,i.jsxs)(a.az,{as:"span",className:"fa-layers fa-fw",children:[(0,i.jsx)(L.g,{icon:E.sAw,size:"lg"}),(0,i.jsx)(L.g,{icon:eP.X46,size:"xs",transform:"shrink-5"})]}),action:q,isHidden:!U||X,isDisabled:f,isLoading:J},{key:"ai",customButton:(0,i.jsx)(e$,{editor:t,attrs:o,variant:"plain",height:"100%"},"ai"),isHidden:!X,ariaLabel:M.Ru._({id:"EVnzPs"}),label:(0,i.jsx)(_.x6,{id:"EVnzPs"}),action:()=>{}},{key:"editGallery",ariaLabel:M.Ru._({id:"ATVjaW"}),label:(0,i.jsx)(_.x6,{id:"+v0hYZ"}),action:()=>{t.chain().selectParentNode().run()},icon:E.Qyz,isHidden:!W},{key:"edit",ariaLabel:M.Ru._({id:"ePK91l"}),label:(0,i.jsx)(_.x6,{id:"ePK91l"}),action:y,icon:E.MT7}],[F,U,G,y,t,v,c,H,W,f,J,null==l?void 0:l.clipType,N,q,X,o]);return(0,i.jsxs)(tk,{children:[!K&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(nf,{buttonList:ee}),(0,i.jsx)(ty,{label:(0,i.jsx)(_.x6,{id:"0j+RGO"}),icon:E.ecg,isHidden:!G,children:(0,i.jsx)(S.e,{dir:"ltr",spacing:0,size:"sm",onMouseDown:T.Fw,children:tz.gj.map(e=>{let{name:n,key:a,icon:r,shortcut:o,checkActive:d,apply:c}=e;if(d&&c)return(0,i.jsx)(D.I,{label:n(),shortcut:o,isActive:!s&&d(t),onClick:()=>{c(t),s&&t.commands.updateAttributes(tr._V.name,{fullWidthBlock:!1,resize:{...l,width:null}})},isDisabled:J,icon:r,testId:a,my:0},a)})})}),(0,i.jsx)(ty,{label:(0,i.jsx)(_.x6,{id:"S58tkK"}),icon:ny[j],children:(0,i.jsx)(tZ,{currentClickBehavior:j,handleClickBehaviorChange:C,enableNoClickBehavior:!0,canAddLink:!0})}),"newTab"===j&&(0,i.jsx)(nx,{editor:t,href:g||"",updateHref:A,clearHref:()=>{A("")}}),(0,i.jsx)(tw,{isPrimaryActionDestructive:!0,label:(0,i.jsx)(_.x6,{id:"cnGeoo"}),icon:E.yLS,onClick:Z,colorScheme:"red",secondaryLabel:(0,tK.bT)(n.node)?(0,i.jsx)(_.x6,{id:"5eaf8Z"}):void 0,secondaryAction:(0,tK.bT)(n.node)?()=>(0,tK.LQ)(t):void 0,secondaryIcon:(0,tK.bT)(n.node)?E.ub2:void 0})]}),G&&K&&(0,i.jsxs)(r.z,{alignSelf:"stretch",my:-3,mx:-2,zIndex:"menu",children:[(0,i.jsx)(nb,{clipType:O,onChange:e=>{z({clipType:e})}}),(0,i.jsxs)(S.e,{spacing:0,size:"sm",alignItems:"center",children:[(0,i.jsx)(D.I,{label:(0,i.jsx)(_.x6,{id:"6Z0nnS"}),icon:E.ub2,isDisabled:!Y,onClick:()=>{P({id:c})},my:0}),(0,i.jsx)(D.I,{color:"red.500",label:(0,i.jsx)(_.x6,{id:"7Bn152"}),icon:E.Jyw,onClick:()=>{R({id:c})},my:0}),(0,i.jsx)(D.I,{color:"green.500",label:(0,i.jsx)(_.x6,{id:"ryQtQS"}),icon:E.e68,onClick:()=>{I({id:c})},my:0})]})]})]})},predicate:e=>e instanceof s.nh&&"image"===e.node.type.name,isPopover:!0},{component:e=>{let{editor:t,selection:n}=e,a=(0,B.d)(),r=(0,tJ.f)(),o=(0,d.useCallback)(e=>{t.view.focus(),r({isOpen:!0}),e.stopPropagation()},[t,r]),l=(0,d.useCallback)(()=>{t.chain().deleteSelectionAndSelectNear().run()},[t]),s=(0,d.useCallback)(e=>{"none"!==e&&t.commands.updateAttributes(n.node.type.name,{clickBehavior:e})},[t,n]),c=(0,d.useCallback)(e=>{let r="embed.custom";(0,t1.Yq)(e,e=>{r=e.source||r,(0,nF.vI)({editor:t,selection:n,attrs:e,sourceKey:r})}).catch(e=>{a.isActive(nW)||a({id:nW,title:(0,i.jsx)(_.x6,{id:"MWOB3g"}),description:(0,i.jsx)(_.x6,{id:"iEFpL0"}),status:"error",position:"top",duration:3e3,isClosable:!0}),console.error("[caught] EmbedVideoFormattingMenu error fetching URL",e)})},[t,a,n]),u=t.getAttributes(n.node.type.name),p="displayStyle"in u&&u.displayStyle||"inline",h=(0,k.Zj)(u),g=(0,m.qK)(n.$from),x="video"===n.node.type.name,f=(0,k.eb)(u,"preview"===p&&!g),v=u.source?(0,nH.B)(u.source):null,b="inline"===p&&(x||(null==v?void 0:v.inlineInteractive))&&!g;return(0,i.jsxs)(tk,{children:[!g&&(0,i.jsx)(ty,{label:(0,i.jsx)(_.x6,{id:"/SVg/B"}),icon:"inline"===p?E.c9S:E.$qH,children:(0,i.jsx)(nO,{editor:t,selection:n})}),(0,i.jsx)(nx,{href:h||"",updateHref:c,editor:t,isEmbedLink:!0}),!b&&(0,i.jsx)(ty,{label:(0,i.jsx)(_.x6,{id:"S58tkK"}),icon:"newTab"===f?E.Ju_:E.bMI,children:(0,i.jsx)(tZ,{currentClickBehavior:f,handleClickBehaviorChange:s})}),(0,i.jsx)(tw,{isPrimaryActionDestructive:!0,label:(0,i.jsx)(_.x6,{id:"cnGeoo"}),icon:E.yLS,onClick:l,colorScheme:"red",secondaryAction:o,secondaryIcon:E.BH7,secondaryLabel:(0,i.jsx)(_.x6,{id:"sxkWRg"})})]})},predicate:e=>e instanceof s.nh&&(0,k._Y)(e.node),isPopover:!0},{component:e=>{let{editor:t,selection:n}=e,{nested:a}=n.node.attrs;return(0,i.jsxs)(S.e,{spacing:0,size:"sm",children:[(0,i.jsx)(D.I,{testId:"toc-top-level-cards",label:(0,i.jsx)(_.x6,{id:"RiLgqi"}),icon:E.ITF,onClick:()=>{t.commands.updateAttributes("tableOfContents",{nested:!1})},isActive:!a}),(0,i.jsx)(D.I,{testId:"toc-nested-cards",label:(0,i.jsx)(_.x6,{id:"nTkST4"}),icon:E.QLL,onClick:()=>{t.commands.updateAttributes("tableOfContents",{nested:!0})},isActive:a})]})},predicate:e=>e instanceof s.nh&&"tableOfContents"===e.node.type.name},{component:e=>{let{editor:t}=e,{showTime:n=!0,hiddenContributorIds:a=[]}=t.getAttributes("contributors"),r=(0,u.GV)(v.zB)||[],{toggleShowTime:l,toggleOneVisibleContributor:s,toggleAllVisibleContributors:c}=function(e){return{toggleShowTime:(0,d.useCallback)(()=>{e.commands.toggleShowTime()},[e]),toggleOneVisibleContributor:(0,d.useCallback)(t=>{e.commands.toggleOneContributorVisibility(t)},[e]),toggleAllVisibleContributors:(0,d.useCallback)(()=>{e.commands.toggleAllContributorsVisibility()},[e])}}(t),p=r.length>1,h=(0,d.useCallback)(()=>{t.chain().deleteSelectionAndSelectNear().run()},[t]);return(0,i.jsxs)(tk,{children:[(0,i.jsx)(ty,{label:(0,i.jsx)(_.x6,{id:"0j+RGO"}),icon:E.ecg,children:(0,i.jsx)(tI,{editor:t})}),(0,i.jsx)(ty,{label:(0,i.jsx)(_.x6,{id:"4ep6pq"}),icon:E.a$,children:(0,i.jsx)(tv.d,{isChecked:n,onChange:l})}),p&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(tj,{}),(0,i.jsx)(tL,{contributors:r,hasMultipleContributors:p,hiddenContributorIds:a,toggleOneVisibleContributor:s,toggleAllVisibleContributors:c})]}),(0,i.jsxs)(V.E,{fontSize:"xs",color:"gray.700",textAlign:"center",children:[(0,i.jsx)(_.x6,{id:"Xqn2KO"})," ",(0,i.jsx)(o.qT,{label:(0,i.jsx)(_.x6,{id:"CYpThg"})})]}),(0,i.jsx)(tw,{label:(0,i.jsx)(_.x6,{id:"cnGeoo"}),icon:E.yLS,colorScheme:"red",onClick:h,isPrimaryActionDestructive:!0})]})},predicate:e=>e instanceof s.nh&&"contributors"===e.node.type.name,isPopover:!0},{component:at,predicate:e=>e instanceof s.U3}],ar=[{component:nD,predicate:(e,t)=>{var n,i;let a=null===(n=document)||void 0===n?void 0:n.activeElement,r=!!(null==a?void 0:a.closest('[data-active-menu="navigation"]')),o=!!(null==a?void 0:a.closest("[data-navbar-editor]"));return(r||o)&&t.isActive("button")&&!!t.isSiteNavbarEditor&&!t.multipageEnabled&&!(null===(i=document)||void 0===i?void 0:i.querySelector("[".concat(g.hu,"]")))},isPopover:!0}],ao={backgroundColor:"white",shadow:"lg"},al=e=>{let{editor:t,scrollingParentSelector:n,menuContext:s,appendToSelector:p}=e;(0,C.lC)(t);let{hideTooltips:h,GammaTooltipHiderContext:m}=(0,o.ku)(),g=(0,u.GV)(v.Du),x=(0,u.GV)(c.Vt),f=t.state.selection,y=!g&&("navigation"===s?ar:aa).find(e=>e.predicate(f,t,x)),w=[];try{(0,l.BQ)(t.state.selection)&&(w=(0,b.j5)(t,t.state.selection.from))}catch(e){console.error("[FormattingMenu] unable to find decorations at ".concat(t.state.selection.from),e.message)}let k=(0,d.useMemo)(()=>({maxWidth:"none",zIndex:"var(--chakra-zIndices-popover)",placement:"top",appendTo:p?()=>document.querySelector(p):void 0,popperOptions:{modifiers:[{name:"flip",options:{fallbackPlacements:["top","top-start","top-end","bottom","bottom-start","bottom-end"]}},{name:"preventOverflow",options:{boundary:n?document.querySelector(n):void 0,altAxis:!0}}]}}),[n,p]),S="navigation"===s?"navigation":"editor";return(0,i.jsx)(m,{children:(0,i.jsx)(o.L8,{isDark:!1,children:(0,i.jsxs)(j,{editor:t,onHide:h,tippyOptions:k,children:[y&&y.isPopover&&(0,i.jsx)(tN,{"data-in-editor-focus":!0,"data-active-menu":S,"data-testid":"formatting-menu",fontFamily:"body",children:(0,i.jsx)(y.component,{editor:t,selection:f,decorations:w})}),y&&!y.isPopover&&(0,i.jsx)(a.az,{"data-active-menu":S,borderRadius:"xl",...ao,w:"auto",minW:"0px",h:"fit-content",position:"relative",bottom:y.offsetPx?"".concat(y.offsetPx,"px"):"0","data-in-editor-focus":!0,"data-testid":"formatting-menu",fontFamily:"body",children:(0,i.jsx)(r.z,{spacing:3,px:2,minH:10,children:(0,i.jsx)(y.component,{editor:t,selection:f,decorations:w})})})]})})})}},11138:(e,t,n)=>{"use strict";n.d(t,{q:()=>o});var i=n(31085),a=n(35789),r=n(70323);let o=()=>(0,i.jsx)(a.o,{h:"20px",children:(0,i.jsx)(r.c,{mx:1,borderColor:"gray.300",orientation:"vertical"})})},87145:(e,t,n)=>{"use strict";n.d(t,{g:()=>x,j:()=>g});var i=n(31085),a=n(25420),r=n(80532),o=n(20501),l=n(3040),s=n(24221),d=n(95640),c=n(15355),u=n(35002),p=n(31485),h=n(802),m=n(59392);let g=e=>{let{onClick:t=()=>{},...n}=e;return(0,u.u)("disableRemoveBackground")?null:(0,i.jsx)(m.I,{label:(0,i.jsxs)(a.s,{alignItems:"center",justifyContent:"center",children:[(0,i.jsx)(d.x6,{id:"ylbfBl"}),(0,i.jsx)(c.G,{type:"removeBackground",ms:2,color:"gray.400"})]}),onClick:t,...n,children:(0,i.jsxs)(r.az,{as:"span",className:"fa-layers fa-fw",children:[(0,i.jsx)(s.g,{icon:o.sAw,size:"lg"}),(0,i.jsx)(s.g,{icon:l.X46,size:"xs",transform:"shrink-5"})]})})},x=e=>{let{editor:t,decorations:n}=e,a=(0,p.Bn)(n),{startRemoveBg:r,isRemoveBgLoading:o}=(0,h.D)({editor:t,id:null==a?void 0:a.cardId});return(0,i.jsx)(g,{onClick:r,disabled:o})}},93711:(e,t,n)=>{"use strict";n.d(t,{N_:()=>x,lQ:()=>v,mF:()=>f});var i=n(31085),a=n(63341),r=n(18528),o=n(80853),l=n(72821),s=n(48310),d=n(33473),c=n(61778),u=n(20501),p=n(24221),h=n(95640),m=n(69951),g=n(59707);let x=()=>({flex:{title:(0,i.jsx)(h.x6,{id:"oNVcTP"}),description:(0,i.jsx)(h.x6,{id:"HfsL0F"})},grid:{title:(0,i.jsx)(h.x6,{id:"fY+Mvd"}),description:(0,i.jsx)(h.x6,{id:"Ur6uwh"})},logo:{title:(0,i.jsx)(h.x6,{id:"iG7KNr"}),description:(0,i.jsx)(h.x6,{id:"hcTCev"})}}),f=(e,t,n,i)=>{let a="flex"===e&&t.thumbHeight<m.pg?m.pg:"grid"===e||"logo"===e?Math.round(t.thumbHeight):void 0;n.chain().updateAttributes("gallery",{layout:e,dimensions:"grid"===e?"square":void 0,stretchToFill:"flex"!==e&&void 0,...a&&{thumbHeight:a}}).setNodeSelection(i.from).focus().run()},v=e=>{let{selection:t,editor:n}=e,h=t.node.attrs,m=x(),v=Object.keys(m).includes(h.layout)?h.layout:"flex",b=m[v].title;return(0,i.jsxs)(a.W,{closeOnSelect:!0,isLazy:!0,autoSelect:!1,strategy:"fixed",children:[(0,i.jsx)(r.I,{as:o.$,"data-testid":"display-style-dropdown",size:"sm",rightIcon:(0,i.jsx)(p.g,{fixedWidth:!0,icon:u.Jt$,transform:"shrink-6"}),boxShadow:"none",onMouseDown:g.Fw,children:b}),(0,i.jsx)(l.c,{zIndex:2,maxW:"400px",children:(0,i.jsx)(s.i,{type:"radio",onChange:e=>f(e,h,n,t),value:h.layout,children:Object.entries(m).map(e=>{let[t,{title:n,description:a}]=e;return(0,i.jsxs)(d.k,{value:t,onMouseDown:g.Fw,"data-testid":"display-style-option-".concat(t),children:[(0,i.jsx)(c.E,{children:n}),(0,i.jsx)(c.E,{fontSize:"xs",color:"gray.500",children:a})]},t)})})})]})}},54363:(e,t,n)=>{"use strict";n.d(t,{Ht:()=>i.Ht});var i=n(94745)},2079:(e,t,n)=>{"use strict";n.d(t,{c:()=>p,m:()=>h});var i=n(14041),a=n(74240),r=n(64225),o=n(14285),l=n(802),s=n(48365),d=n(88693),c=n(17539),u=n(83380);let p=e=>{let{editor:t,getPos:n,backgroundRemovalId:a}=e,s=(0,r.jL)(),d=(0,u.f)(),c=(0,i.useCallback)(e=>{t.view.focus(),d({isOpen:!0}),e.stopPropagation()},[t,d]),{startRemoveBg:p,isRemovingBg:h}=(0,l.D)({editor:t,id:a});return{changeFocalPoint:(0,i.useCallback)(e=>{t.commands.selectNodeAtPos(n()),s((0,o.sI)({id:e}))},[t,n,s]),editImage:c,startRemoveBg:p,isRemovingBg:h}},h=e=>{let{editor:t,node:n,parentNode:r}=e,o=(0,i.useCallback)(e=>{t.chain().insertSmartLayoutCell(e).run()},[t]),l=(0,i.useCallback)(e=>{t.chain().insertSmartLayoutCell(e).run()},[t]),u=(0,i.useCallback)(e=>{t.chain().insertContentAt(e,n.toJSON()).selectInsertedNode().run()},[t,n]),p=(0,i.useCallback)(()=>{t.chain().handleSmartLayoutDelete().run()},[t]),h=(0,i.useCallback)((e,n)=>{t.commands.updateNestedAttributesAtPos(e,n)},[t]),m=(0,i.useCallback)(e=>{t.chain().updateNestedAttributesAtPos(e,{image:null}).run()},[t]),g=n.attrs.options,x=n.attrs.image,f=r&&(0,s.$o)(r.attrs),v=r?(0,d.B)(r.attrs.variantKey):null,{imageSlot:b,imageType:y}=null!=v?v:{},w=b&&!!(null==x?void 0:x.src),j=(0,c.SV)((null==x?void 0:x.src)||(null==x?void 0:x.tempUrl)),k=(0,c.v7)(null==x?void 0:x.src);return{addColumnBefore:o,addColumnAfter:l,canChangeFocusPointAndRemoveBackground:"image"===y&&!j&&(null==x?void 0:x.src)&&!k,canEditImageWithAI:(0,a.l)(x)&&w&&"image"===y,hasImage:w,imageSlot:b,imageType:y,addDirection:f,parentVariant:v,cellOptions:g,handleDelete:p,selectParent:e=>{t.commands.selectNodeAtPos(e),t.chain().selectParentNode().run()},duplicateNode:u,updateAttributes:h,resetImage:m}}},48226:(e,t,n)=>{"use strict";n.d(t,{e:()=>r,q:()=>a});var i=n(26813);let a=e=>{setTimeout(()=>{e.commands.focus()})},r=(e,t,n)=>{var a;(null===(a=n.background)||void 0===a?void 0:a.type)===i.h.NONE?e.commands.updateAttributesAtPos(t,n):e.commands.updateNestedAttributesAtPos(t,n)}},75551:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y,p:()=>w});var i=n(31085),a=n(56824),r=n(35687),o=n(25420),l=n(18651),s=n(80532),d=n(27670),c=n(61778),u=n(20501),p=n(3040),h=n(24221),m=n(9104),g=n(95640),x=n(12327),f=n(51436),v=n(37570),b=n(65695);let y=e=>{let{item:t}=e,{name:n,image:u,icon:p,key:m,previewImage:g,shortcut:x,badge:b}=t,y=(0,f.iT)(),{colorMode:w}=(0,a.G6)(),j={iconColor:(0,a.dU)("trueblue.600","trueblue.100"),bgColor:(0,a.dU)("white","gray.900"),textColor:(0,a.dU)("gray.800","gray.100"),borderColor:(0,a.dU)("gray.200","gray.700"),invertFilter:(0,a.dU)("invert(0)","invert(.7) brightness(1.4) hue-rotate(180deg)"),iconBgColor:(0,a.dU)("white","gray.800"),gripDotsColor:(0,a.dU)("gray.500","gray.500")};return(0,i.jsxs)(r.B,{h:"100%",bg:"neutral.toolbar.background",p:2.5,pt:2,spacing:1.5,alignItems:"center",shadow:"sm",borderRadius:"xl",border:"1px",borderColor:j.borderColor,role:"group",children:[(0,i.jsx)(o.s,{justifyContent:"center",alignItems:"center",minH:"7",w:"100%",children:"cardTemplate"===t.type&&y[m]?(0,i.jsx)(v.LK,{content:y[m].jsonContent,isDark:"dark"===w}):g?(0,i.jsx)(o.s,{bg:j.iconBgColor,borderRadius:"md",children:(0,i.jsx)(l._,{filter:j.invertFilter,src:g.src,w:"100%",maxW:"100%",alt:n(),pointerEvents:"none"})}):u?(0,i.jsx)(l._,{src:u.src,borderRadius:"sm",h:"1.5em",w:"1.5em",objectFit:"contain",pointerEvents:"none"}):(0,i.jsx)(s.az,{color:j.iconColor,fontSize:"xl",children:p&&(0,i.jsx)(h.g,{icon:p})})}),b&&(0,i.jsx)(d.E,{position:"absolute",top:"1",insetEnd:"2",colorScheme:"green",children:b()}),(0,i.jsxs)(r.B,{spacing:0,whiteSpace:"break-spaces",flex:"1",textAlign:"center",children:[(0,i.jsx)(c.E,{color:j.textColor,fontWeight:"600",fontSize:"xs",lineHeight:1.2,noOfLines:2,children:n()}),x&&(0,i.jsx)(c.E,{fontSize:"xs",color:"gray.500",fontWeight:"500",children:x})]})]})},w=e=>{let{item:t,onDragStart:n,onDragEnd:o,onClick:l}=e,{isDragging:d,isMouseDown:f,handleDragStart:v,handleDragEnd:w,handleClick:j,onMouseDown:k,onMouseUp:C}=(0,b.c)(n,o,l),{key:S,description:A}=t,z={gripDotsBg:(0,a.dU)("white","gray.900"),gripDotsColor:(0,a.dU)("gray.500","gray.500")};return(0,i.jsx)(m.Tz,{closeOnMouseDown:!0,closeOnClick:!0,isOpen:!d&&void 0,label:(0,i.jsxs)(s.az,{as:"span",display:"inline",children:[(0,i.jsx)(h.g,{icon:u.bFI})," ",(0,i.jsx)(c.E,{display:"inline",children:(0,i.jsx)(g.x6,{id:"Dd9uag"})}),A&&(0,i.jsx)(c.E,{textAlign:"start",color:"gray.300",maxW:"170px",children:A()})]}),"aria-label":x.Ru._({id:"Dd9uag"}),placement:"top",children:(0,i.jsxs)(r.B,{"data-testid":"".concat(S,"-insert-button"),draggable:!0,onDragStart:v,onDragEnd:w,onClick:j,onMouseDown:k,onMouseUp:C,onMouseLeave:C,cursor:"grab",_hover:{transform:"scale(1.05) rotate(-0.25deg)",shadow:"lg"},transitionProperty:"common",transitionDuration:"normal",transform:"rotate(".concat(f&&!d?-1:0,"deg) translate(0, 0);"),role:"group",borderRadius:"xl",children:[(0,i.jsx)(y,{item:t}),(0,i.jsx)(s.az,{opacity:0,_groupHover:{opacity:1},transitionProperty:"opacity",transitionDuration:"normal",position:"absolute",top:"1.5",insetStart:"1.5",bg:z.gripDotsBg,color:z.gripDotsColor,borderRadius:"sm",fontSize:"sm",children:(0,i.jsx)(h.g,{icon:p.IMq,fixedWidth:!0})})]})})}},65695:(e,t,n)=>{"use strict";n.d(t,{R:()=>u,c:()=>c});var i=n(2250),a=n(43421),r=n(14041),o=n(9138),l=n(64225),s=n(14e3),d=n(5933);let c=(e,t,n)=>{let[i,a]=(0,r.useState)(!1),[o,l]=(0,r.useState)(!1),s=(0,r.useRef)(),d=(0,r.useCallback)(t=>{a(!0),e(t)},[e]),c=(0,r.useCallback)(e=>{a(!1),l(!1),t(e)},[t]);return{isDragging:i,isMouseDown:o,handleDragStart:d,handleDragEnd:c,handleClick:(0,r.useCallback)(e=>{s.current instanceof HTMLElement&&s.current.focus(),n(e)},[n]),onMouseDown:(0,r.useCallback)(()=>{l(!0),s.current=document.activeElement||void 0},[]),onMouseUp:(0,r.useCallback)(()=>{l(!1)},[])}},u=()=>{let[e]=(0,i.U)(["(max-height: 400px)","(min-height: 401px"]),t=(0,l.GV)(d.nD),n=(0,l.GV)(d.cS),r=(0,l.GV)((0,o.DP)("right")),c=(0,a.A)({base:!1,lg:!0}),u=(0,l.GV)(d.wC);return t&&!e&&!n&&!r&&c&&u!==s.w.SLIDE_VIEW}},92448:(e,t,n)=>{"use strict";n.d(t,{a:()=>x,B:()=>E});var i=n(31085),a=n(80532),r=n(18651),o=n(27670),l=n(24221),s=n(9104),d=n(14041),c=n(91559),u=n(15355),p=n(23832),h=n(10458),m=n(77256),g=n(38234);let x=(0,d.forwardRef)((e,t)=>{let{query:n,editor:x}=e,{isInOfflineMode:f}=(0,c.u)(),v=(0,p.n)(m.E1).filter(e=>{if((0,m.gT)(x,e,void 0,f))return!1;let{name:t,keywords:i=[]}=e;return t().toLowerCase().includes(n.toLowerCase())||i.find(e=>e.startsWith(n.toLowerCase()))}),b=(0,d.useCallback)(e=>{if(!v[e])return;let{execute:t}=v[e],i=x.state.selection;x.chain().deleteRange({from:i.from-n.length-1,to:i.to}).run(),(0,m.Jb)(v[e],h.oU.SLASH_MENU),t(x)},[x,v,n.length]),{selectedIndex:y,selectedItemEl:w}=(0,g.Rj)({ref:t,selectItem:b,options:v});return v.length>0?(0,i.jsx)(a.az,{"data-slash-menu-dropdown":!0,children:(0,i.jsx)(s.qF,{children:(0,i.jsx)(s.QE,{width:"375px",children:v.map((e,t)=>{let{name:n,icon:a,iconStyle:d,image:c,shortcut:p,creditType:h,badge:m}=e;return(0,i.jsxs)(s.nh,{ref:t===y?w:null,icon:c?(0,i.jsx)(r._,{h:"1.5em",w:"1.25em",objectFit:"contain",src:c.src}):a?(0,i.jsx)(l.g,{icon:a,rotation:null==d?void 0:d.rotation,size:"1x",fixedWidth:!0,color:"var(--chakra-colors-trueblue-600)"}):(0,i.jsx)(i.Fragment,{}),tabIndex:t===y?0:-1,onClick:()=>b(t),command:p,children:[n(),h&&(0,i.jsx)(u.G,{type:h,colorScheme:"blackAlpha",bg:"whiteAlpha.800"}),m&&(0,i.jsx)(o.E,{ms:2,colorScheme:"green",children:m()})]},t)})})})}):(0,i.jsx)(i.Fragment,{})});var f=n(62313),v=n(61778),b=n(26848),y=n(74727),w=n(9021),j=n(95640),k=n(35002),C=n(3601),S=n(49572),A=n(59707),z=n(96964);let I=["image.custom","table2","columns","insertCardInside","embed.custom"],R=()=>I.map(e=>(0,z.bO)().find(t=>t.key===e)).filter(Boolean),E=e=>{let{editor:t,dir:n}=e,{isInOfflineMode:a}=(0,c.u)(),r=(0,k.u)("aiAutocomplete")&&!(0,S.Q)(t)&&!a,o=(0,p.n)(R),{selection:d}=t.state;return d.empty?(0,i.jsxs)(f.z,{spacing:4,dir:n,color:"gray.400","data-print-hidden":!0,position:"absolute",inset:"0",contentEditable:!1,overflow:"hidden",fontFamily:"body",fontSize:"0.8em",onMouseDown:A.Fw,pointerEvents:"none",userSelect:"none","data-guider-highlight":"slash-menu-prompt",className:"slash-menu-prompt",children:[(0,i.jsx)(v.E,{whiteSpace:"nowrap",children:r?(0,i.jsx)(j.x6,{id:"UfUEJ5",values:{AUTOCOMPLETE_INPUT_SHORTCUT:C.H},components:{0:(0,i.jsx)(b.u,{}),1:(0,i.jsx)(b.u,{})}}):(0,i.jsx)(j.x6,{id:"HGRFT/",components:{0:(0,i.jsx)(b.u,{})}})}),(0,i.jsx)(y.e,{isAttached:!0,variant:"ghost",size:"xs",spacing:1,pointerEvents:"auto",colorScheme:"gray",transitionProperty:"opacity",transitionDuration:"normal",_hover:{opacity:1},children:o.map(e=>{let{name:n,shortcut:r,icon:o,execute:d,key:c,creditType:p}=e;return!(0,m.gT)(t,e,!1,a)&&(0,i.jsx)(s.Tz,{placement:"top",shortcut:r,label:(0,i.jsxs)(i.Fragment,{children:[n()," ",p&&(0,i.jsx)(u.G,{type:p})]}),children:(0,i.jsx)(w.K,{"aria-label":n(),onClick:()=>{(0,m.Jb)(e,h.oU.BLOCK_PROMPT),d(t)},icon:(0,i.jsx)(l.g,{icon:o}),color:"inherit"})},c)})})]}):null}},2057:(e,t,n)=>{"use strict";n.d(t,{Q5:()=>b,gf:()=>v,ms:()=>f,tJ:()=>y});var i=n(31085),a=n(55276),r=n(95863),o=n(11403),l=n(80853),s=n(56077),d=n(31171),c=n(7499),u=n(9104),p=n(14041);let[h,m]=(0,s.q)({strict:!1,name:"DropdownContext"}),[g,x]=(0,s.q)({name:"DropdownStylesContext",errorMessage:"useDropdownStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<Dropdown />\" "}),f=e=>{let{isOpen:t,onClose:n,onToggle:l}=(0,a.j)(),s=(0,o.o5)("Dropdown",e),d=(0,r.E)({placement:"bottom-start"}),c=(0,p.useMemo)(()=>({isOpen:t,onClose:n,onToggle:l,popper:d}),[t,n,l,d]);return(0,i.jsx)(h,{value:c,children:(0,i.jsx)(g,{value:s,children:(0,i.jsx)(u.qF,{...e})})})},v=e=>{let{children:t,as:n,...a}=e,{popper:r,onToggle:o}=m(),s=n||l.$;return(0,i.jsx)(s,{...a,ref:r.referenceRef,onClick:(0,c.Hj)(e.onClick,o),children:(0,i.jsx)(d.B.span,{__css:{pointerEvents:"none",flex:"1 1 auto",justifyContent:"flex-start",display:"flex",minW:0},children:t})})},b=e=>{var t,n;let{children:a,...r}=e,{isOpen:o,popper:l}=m(),s=x();if(!o)return null;let c=l.getPopperProps({...e,style:{visibility:o?"visible":"hidden",...e.style}});return(0,i.jsx)(d.B.div,{...r,mt:2,minWidth:"var(--chakra-sizes-48)",ref:l.popperRef,...c,__css:{zIndex:null!==(n=e.zIndex)&&void 0!==n?n:null===(t=s.list)||void 0===t?void 0:t.zIndex},children:(0,i.jsx)(u.QE,{children:a})})},y=e=>{let{onToggle:t}=m();return(0,i.jsx)(u.nh,{...e,onClick:(0,c.Hj)(e.onClick,t)})}},57860:(e,t,n)=>{"use strict";n.d(t,{a:()=>x});var i=n(31085),a=n(63341),r=n(18528),o=n(80853),l=n(72821),s=n(20501),d=n(24221),c=n(9104),u=n(95640),p=n(12327),h=n(49624),m=n(59707),g=n(48226);let x=e=>{let{editor:t,color:n,setColor:x,analyticsSource:f}=e;return(0,i.jsxs)(a.W,{isLazy:!0,onClose:()=>(0,g.q)(t),children:[(0,i.jsx)(c.Tz,{placement:"top",label:(0,i.jsx)(u.x6,{id:"XAIjEI"}),"aria-label":p.Ru._({id:"XAIjEI"}),children:(0,i.jsx)(r.I,{as:o.$,variant:"toolbar",rightIcon:(0,i.jsx)(d.g,{icon:s.Jt$,transform:"shrink-6"}),size:"sm",onMouseDown:m.Fw,children:(0,i.jsx)(d.g,{icon:s.fyG})})}),(0,i.jsx)(l.c,{overflow:"hidden",children:(0,i.jsx)(h.b,{currentColor:n||null,setColor:x,source:f})})]})}},59392:(e,t,n)=>{"use strict";n.d(t,{I:()=>d});var i=n(31085),a=n(80853),r=n(24221),o=n(9104);n(14041);var l=n(35015),s=n(59707);let d=e=>{let{label:t,shortcut:n,disabled:o=!1,color:l,isActive:d=!1,onClick:u,icon:p,iconRotation:h,testId:m,children:g,flipIcon:x,...f}=e,v=(0,i.jsx)(a.$,{isDisabled:o,color:l,variant:d?"activeToolbar":"toolbar",onClick:u,"data-testid":m,onMouseDown:s.Fw,size:"sm",...f,children:p?(0,i.jsx)(r.g,{icon:p,rotation:h,flip:x,fixedWidth:!0}):g||null});return t?(0,i.jsx)(c,{label:t,shortcut:n,children:v}):v},c=e=>{let{label:t,shortcut:n,children:a}=e;return(0,i.jsx)(o.Tz,{placement:"top",portalProps:{containerRef:(0,l.EC)()},label:t,shortcut:n,children:a})}},77874:(e,t,n)=>{"use strict";n.d(t,{v:()=>m});var i=n(31085),a=n(95640),r=n(14041),o=n(50877),l=n(91559),s=n(62911),d=n(48192),c=n(52417),u=n(26813),p=n(8077);let h=(e,t)=>{if(!e.source&&e.type===u.h.IMAGE){var n;return null===(n=e.image)||void 0===n?void 0:n.source}return!e.source&&t?c.dO:e.source},m=(0,r.memo)(e=>{let{editor:t,defaultMessage:n,isDark:u,setCurrentSourceKey:m,currentSourceKey:g,currentSource:x,updateCurrentBackground:f,currentBackground:v,isValidSource:b,editType:y="background",contextualTheme:w,defaultToNoBackgroundSource:j=!1}=e,{isConnected:k}=(0,l.u)(),C=(0,r.useCallback)(e=>{let t=c.Fn[e];t.backgroundType&&f({type:t.backgroundType,source:e,[t.backgroundType]:void 0})},[f]),S=(0,r.useCallback)(()=>C(g),[g,C]),A=(0,r.useCallback)(e=>{e===c.dO&&C(c.dO),m(e)},[m,C]),z=h(v,j);(0,r.useEffect)(()=>{z&&c.Fn[z]&&m(z)},[z,m]);let I=!!(k||(null==x?void 0:x.availableOffline)),R=c.ez[g],E="themeBackground"===y?o.rWX.Theme:o.rWX.Doc;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.r,{isConnected:I,description:(0,i.jsx)(a.x6,{id:"nfjtFu"}),mb:3,my:6}),(0,i.jsx)(p.H,{isValidSource:b,onChange:A,currentSource:x}),x&&(0,i.jsx)(R,{editor:t,updateAttributes:e=>{x.backgroundType&&(x.key===d.j?f(e):f({type:x.backgroundType,[x.backgroundType]:{...e},source:g}))},currentAttributes:(e=>x.backgroundType?x.key===d.j?e:e[x.backgroundType]||{}:{})(v),resetToPlaceholder:S,editType:y,isDark:u,contextualTheme:w,savedMediaContext:E}),g===c.dO&&n]})});m.displayName="BackgroundPanel"},40351:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(31085),a=n(14041),r=n(48192),o=n(52417),l=n(73818),s=n(77874),d=n(68409);let c=e=>{let{editor:t,updateNestedAttributes:n,background:c,defaultMessage:u,isDark:p,isValidSource:h,defaultToNoBackgroundSource:m}=e,{currentEditBackgroundDrawerSourceKey:g,setBackgroundDrawerSourceKeyAction:x}=(0,l.Bz)(),f=o.Fn[g],v=(0,a.useCallback)(e=>{f.key===r.j?n({background:e}):n({background:{...e,accentId:void 0}})},[null==f?void 0:f.key,n]),b=(0,a.useCallback)(e=>h?h(e)&&(0,d.S0)(e):(0,d.S0)(e),[h]);return(0,i.jsx)(s.v,{editor:t,isDark:p,isValidSource:b,defaultMessage:u,currentBackground:c,updateCurrentBackground:v,currentSourceKey:g,setCurrentSourceKey:x,currentSource:f,defaultToNoBackgroundSource:m})}},68409:(e,t,n)=>{"use strict";n.d(t,{R4:()=>r,S0:()=>a});var i=n(48192);n(26813);let a=e=>!!e.backgroundType,r=e=>e.key!==i.j},21325:(e,t,n)=>{"use strict";n.d(t,{N:()=>g});var i=n(31085),a=n(25420),r=n(80532),o=n(14041),l=n(64225),s=n(87747),d=n(13320),c=n(40408),u=n(63751),p=n(5933),h=n(43909),m=n(35459);let g=e=>{let{cardId:t,zoomIn:n,shouldFixHeight:g,hidden:f,...v}=e,{setNavItemPreviewRef:b}=(0,m.U)(),y=(0,l.GV)(p.SJ),w=(0,d.S)(y,!1),j=(0,s.rd)(),k=(0,h.NC)(y),C=(0,o.useRef)(null),S=x(C);return(0,o.useEffect)(()=>{C.current&&(g?C.current.style.height="".concat(C.current.offsetHeight,"px"):C.current.style.height="")},[g]),(0,i.jsxs)(a.s,{ref:C,className:"filmstrip-nav-item-wrapper",sx:c.o,css:{"--editor-font-size":"calc(var(--editor-width) / ".concat(u.s5,")"),"--thumbnail-min-height":"calc(var(--editor-width) * 0.4)"},justifyContent:"center",overflow:"hidden",pointerEvents:"none",bg:j?"gray.900":"gray.100",minH:"var(--thumbnail-min-height)",maxH:"calc(var(--editor-width) * 1.777)",w:"var(--editor-width)",...v,children:[S?(0,i.jsx)(r.az,{pos:"absolute",bottom:"-1px",insetStart:0,w:"100%",h:"25%",bg:k,zIndex:1,css:{maskImage:"linear-gradient(to bottom, transparent 0%, black 90%)"}}):null,(0,i.jsx)("div",{className:"ProseMirror",children:(0,i.jsx)(a.s,{className:"doc-content-wrapper",transform:n?"scale(2)":void 0,transformOrigin:n?"center left":void 0,direction:"column",align:"center",sx:w,inert:"true",bg:j?"gray.800":"white",opacity:f?.4:1,height:"100%",children:(0,i.jsx)("div",{style:{width:"100%"},ref:e=>{e&&b(t,e)}})})})]})};g.displayName="PreviewCard";let x=e=>{if(!e.current)return;let t=e.current.querySelector(".doc-content-wrapper");if(t)return t.offsetHeight>1.1*e.current.offsetHeight}},39087:(e,t,n)=>{"use strict";n.d(t,{q:()=>h});var i=n(31085),a=n(80532),r=n(14041),o=n(35459),l=n(64225),s=n(41551),d=n(40408),c=n(5933);let u=r.memo(e=>{let{initialContent:t,onCreate:n}=e,[a,o]=(0,r.useState)(!1),u=(0,l.GV)(c.SJ);return((0,r.useEffect)(()=>{requestAnimationFrame(()=>{o(!0)})},[]),a)?(0,i.jsx)(d.S,{theme:u,content:t,isThumbnail:!0,portalComponent:s.m,onCreate:n}):null});function p(e){let{initialContent:t,children:n}=e,{setEditor:r}=(0,o.U)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.az,{position:"absolute",left:"-9999px",top:"-9999px",children:(0,i.jsx)(u,{initialContent:t,onCreate:e=>{let{editor:t}=e;r(t)}})}),n]})}function h(e){let{initialContent:t,children:n}=e;return(0,i.jsx)(o.h,{children:(0,i.jsx)(p,{initialContent:t,children:n})})}u.displayName="PreviewCardGroupEditor"},35459:(e,t,n)=>{"use strict";n.d(t,{U:()=>l,h:()=>o});var i=n(31085),a=n(14041);let r=(0,a.createContext)({state:{navItemPreviewRefMap:{}},setNavItemPreviewRef:()=>{throw Error("context not initialized")},editor:null,setEditor:()=>{throw Error("context not initialized")}}),o=e=>{let{children:t}=e,[n,o]=(0,a.useState)(null),[l,s]=(0,a.useState)({navItemPreviewRefMap:{}}),d=a.useMemo(()=>{let e=[],t=null,n=()=>{let n;t=null;let i={...l.navItemPreviewRefMap},a=!1;for(;n=e.shift();){let[e,t]=n;i[e]!==t&&(i[e]=t,a=!0)}a&&s(e=>({...e,navItemPreviewRefMap:i}))},i=()=>{t&&(clearTimeout(t),t=null)};return(a,r)=>{i(),e.push([a,r]),t=setTimeout(n,0)}},[l.navItemPreviewRefMap]);return(0,i.jsx)(r.Provider,{value:{state:l,setNavItemPreviewRef:d,editor:n,setEditor:o},children:t})};function l(){return(0,a.useContext)(r)}},41551:(e,t,n)=>{"use strict";n.d(t,{m:()=>l});var i=n(31085),a=n(43144),r=n(19534),o=n(35459);let l=e=>{let{renderers:t}=e,{state:{navItemPreviewRefMap:n}}=(0,o.U)();return(0,i.jsx)(i.Fragment,{children:Object.entries(t).map(e=>{let[t,i]=e,o=i.props.node;if("document"===o.type.name)return null;let l=(0,r.jg)(o)?n[o.attrs.id]:null;return a.createPortal(i.reactElement,l||i.element,t)})})}},9335:(e,t,n)=>{"use strict";n.d(t,{DN:()=>a,LF:()=>o});var i=n(36832),a=function(e){return e.CREATE_COMMENT_FROM_SELECTION="createCommentFromSelection",e.OPEN_POPUP_COMMENT="openPopupComment",e.POPUP_COMMENT_TOGGLED="popupCommentToggled",e.OPEN_THEME_DRAWER="openThemeDrawer",e.OPEN_PAGE_SETUP="openPageSetup",e.OPEN_PRESENT_MODE_CONTEXT_MENU="openPresentModeContextMenu",e.Y_DOC_IS_TOO_LARGE="yDocIsTooLarge",e}({});class r extends i.b{}let o=new r},82883:(e,t,n)=>{"use strict";n.d(t,{G:()=>l,Z:()=>s});var i=n(81570),a=n(95580),r=n(19534),o=n(96712);let l=new i.hs("aiModifications");class s{getExistingRangeId(e,t){let n=(0,o.GB)(e,t);if(!n)return null;let i=Object.entries(this.ranges).find(t=>{let[i,a]=t,r=(0,o.GB)(e,a);return!!r&&n.from===r.from&&n.to===r.to});return i?i[0]:null}getRangeParentCardId(e,t){let n=this.ranges[t];if(!n)return null;let i=(0,o.GB)(e,n);if(!i)return null;let l=i.from,s=e.doc.nodeAt(l),d=e.doc.resolve(l),c=s&&(0,r.jg)(s)?{node:s,pos:l,start:d.start,depth:d.depth}:(0,a.TK)(d,r.jg)[0];return c?c.node.attrs.id:null}getRange(e,t){let n=this.queuedMoveRanges[t];if(n)return n;let i=this.ranges[t];return i?(0,o.GB)(e,i):null}apply(e,t){let n=e.getMeta("aiModificationAction");n&&"setInteractionRange"===n.type&&this.setInteractionRange(n,t);let i=e.getMeta("applyingAiModification");if(i)return this.handleRangeMapping(t,e,i.rangeId),this;let a=e.getMeta("appendedTransaction");return a&&this.handleAppendedTransaction(t,e,a),this}handleAppendedTransaction(e,t,n){if(n.getMeta("applyingAiModification")){let i=n.getMeta("applyingAiModification");i&&this.handleRangeMapping(e,t,i.rangeId)}}handleRangeMapping(e,t,n){let i=this.getRange(e,n);if(!i){console.warn("[AiModificationState] Could not find range for rangeId=".concat(n));return}let a={from:i.from,to:t.mapping.map(i.to)};(i.from!==a.to||i.to!==a.to)&&this.enqueueMoveInstructions(n,a)}enqueueMoveInstructions(e,t){this.queuedMoveRanges[e]=t}flushMoveInstructionQueue(e){for(let[t,n]of Object.entries(this.queuedMoveRanges))this.ranges[t]=(0,o.w8)(e,n);this.queuedMoveRanges={}}setInteractionRange(e,t){this.ranges[e.rangeId]=e.range}constructor(){this.queuedMoveRanges={},this.ranges={}}}},28302:(e,t,n)=>{"use strict";n.d(t,{j:()=>w,B:()=>y});var i=n(13236),a=n(81570),r=n(57450),o=n(74109),l=n(87064),s=n(19717),d=n(44380),c=n(35002),u=n(64225),p=n(5933),h=n(96712),m=n(68566),g=n(77646),x=n(39848),f=n(27617);let v=new(n(46418)).F({systemPrompt:"You are helping a user write a document. Your job is to continue what they've written by writing 2-3 additional sentences. Respond with the just the additional text, and no additional conversation.".trim(),userPrompt:"Continue the following text. Respond with at most 3 sentences.\n\n{{text}}".trim(),variables:["text"],params:{maxTokens:200,temperature:1,model:"gpt-3.5-turbo"}}),b=/(\+\+\+)/,y=4e3,w=i.YY.create({name:"autocomplete",addProseMirrorPlugins(){return[(0,f.c)(this.editor)]},addCommands:()=>({autoOutline:()=>e=>{let{editor:t,state:n,tr:a}=e,{selection:r,doc:o}=n,{$from:l,from:s}=r,d=(0,h.JO)(n,l.after()),c=(0,i.KP)(g.jg)(r);return!!c&&!!d&&((0,x.s6)(o,c.pos,s),a.setMeta("autocompleteEvent",{type:"load"}),!0)},autoComplete:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=>{var n;let{editor:i,state:g,tr:f}=t,{selection:b,doc:w}=g,{from:j}=b,k=(0,h.JO)(g,j);if(!(c.of.get("aiAutocomplete")&&b.empty&&b instanceof a.U3&&k))return!1;let C=(0,u.KA)().getState(),S=null===(n=(0,p.Jo)(C))||void 0===n?void 0:n.organization;if(!(0,d.ny)("autocomplete",S))return!1;let A=(0,x.s6)(w,Math.max(b.from-1e3,0),b.from),z=(0,o.p9)(A).slice(-200),I=(0,o.$0)(z),R=w.textBetween(b.from-10,b.to);f.setMeta("autocompleteEvent",{type:"load"});let E=(0,l.$F)(),L=v.prepare({interactionId:E,variables:{text:I},params:e}),_=performance.now(),M={interactionId:E,interface:"autocomplete",inputContent:A};return(0,l.rl)(M),(0,r.U)(L,E,{timeout:5e3,retries:1}).then(e=>{var t,n,a;let r=(0,h.d_)(g,k);if(!e||!r)throw Error("No completion or insertPos");e=e.trim();let o={from:r,to:r},d=i.chain().insertMarkdownAt(o,e).command(e=>{let{tr:t}=e,n=(0,m.i)(t);return!n||(o.to=n.to,t.setSelection(n).scrollIntoView(),!0)}).setMeta("autocompleteEvent",{range:o,type:"insert"});(null===(t=g.doc.resolve(r).nodeBefore)||void 0===t?void 0:t.isText)&&!(R.endsWith(" ")||R.endsWith("\n"))&&d.insertContentAt(r," ",{updateSelection:!1}),d.run(),(0,l.UL)({...M,outputContent:e,latency:performance.now()-_,timeToComplete:performance.now()-_}),null===(n=(a=i.commands).forceHideAutocompleteButton)||void 0===n||n.call(a,!1),(0,s.w)("autocomplete",S,E),setTimeout(()=>{i.commands.setMeta("autocompleteEvent",{type:"reset"})},y)}).catch(e=>{console.warn("Error fetching autocomplete",e),i.commands.setMeta("autocompleteEvent",{type:"reset"})}),!0}}}),addInputRules:()=>[new i.fV({find:b,handler:e=>{let{range:t,chain:n}=e;n().setTextSelection(t).deleteSelection().autoComplete().run()}})]})},27617:(e,t,n)=>{"use strict";n.d(t,{c:()=>l,n:()=>o});var i=n(13236),a=n(81570),r=n(73686);let o=new a.hs("autocomplete"),l=e=>new a.k_({key:o,state:{init:()=>({loading:!1,insertedRange:null}),apply(e,t){let n=e.getMeta("autocompleteEvent");return(null==n?void 0:n.type)==="reset"?{loading:!1,insertedRange:null}:(null==n?void 0:n.type)==="load"?{loading:!0,insertedRange:null}:(null==n?void 0:n.type)==="insert"?{loading:!1,insertedRange:n.range}:t}},props:{decorations(e){let t=[],n=o.getState(e),{selection:a,doc:l}=e,{loading:s,insertedRange:d}=n||{};if(s){let e=r.NZ.widget(a.from,()=>{let e=document.createElement("span");return e.className="autocomplete-loading",e});t.push(e)}if(d){let e;try{e=(0,i.Nx)(l,d,e=>e.isTextblock)}catch(t){e=[]}e.forEach(e=>{let{node:n,pos:i}=e,a=Math.max(i+1,d.from),o=Math.min(i+n.nodeSize-1,d.to),l=r.NZ.inline(a,o,{class:"autocomplete-inserted"});t.push(l)})}return t.length?r.zF.create(l,t):r.zF.empty}}})},3601:(e,t,n)=>{"use strict";n.d(t,{H:()=>i,g:()=>a});let i="+++",a="/continue"},26884:(e,t,n)=>{"use strict";n.d(t,{Ll:()=>a,bi:()=>o,cn:()=>r,vL:()=>s,xu:()=>l});var i=n(99742);let a=e=>t=>{let n=t.getAttribute("bookmark");if(!n)return!1;let i=e.bookmarks[n];return!!i&&i.attrs},r=e=>t=>{let n=t.getAttribute("bookmark");if(!n)return!1;let i=e.bookmarks[n];return!!i&&i.content},o=(e,t)=>e.bookmarks[t],l=()=>({bookmarks:{}}),s=(e,t)=>{let n=d.generateBookmarkId();return e.bookmarks[n]=t,n},d={generateBookmarkId:()=>(0,i.Ak)(5)}},26768:(e,t,n)=>{"use strict";n.d(t,{s:()=>p,u:()=>h});var i=n(81570),a=n(63587),r=n(22844),o=n(5933),l=n(95580),s=n(96712),d=n(32262),c=n(77646);let u=(e,t)=>{let{content:n}=e.state.doc.slice(t.from,t.to);return(0,a.K)(e,n)},p=(e,t)=>{let{selection:n}=e.state,a=(0,l.IV)(n.$from,c.jg)[0],r=a&&(0,d.Ub)(a.node,a.pos);if(!a||!r)throw Error("Cant find parent card for selection ".concat(n));let p={from:a.pos,to:a.pos+a.node.nodeSize},m={from:r.pos+1,to:r.pos+r.node.nodeSize-1},g=n.$from.blockRange(n.$to),x={from:g.start,to:g.end},f={range:(0,s.w8)(e.state,m),html:u(e,m)},v={range:(0,s.w8)(e.state,n),html:u(e,n)},b={range:(0,s.w8)(e.state,x),html:u(e,x)},y=n instanceof i.nh&&(0,c.jg)(n.node)||n.empty||0===v.html.trim().length||n instanceof i.nh&&n.node.isAtom,w=!n.$from.parent.eq(n.$to.parent)||0===g.$from.parentOffset&&g.$to.parentOffset===g.$to.parent.content.size,j=v,k="selectionRange";y?(j=f,k="cardContent"):w&&(j=b,k="blockRange");let C=h(t),S=(0,o.SJ)(t.getState());return{card:{cardId:a.node.attrs.id,range:(0,s.w8)(e.state,p),html:u(e,p),attrs:a.node.attrs},cardContent:f,blockRange:b,selectionRange:v,defaultRange:j,selection:n,outline:C,selectedDefaultRange:k,theme:S}},h=e=>{let t=e.getState(),n=(0,o.Ev)(t),i=(0,r.ow)(t);return Object.keys(n.tree).map(e=>{var t;return null===(t=i[e])||void 0===t?void 0:t.title}).filter(e=>!!e).join("\n")}},65202:(e,t,n)=>{"use strict";n.d(t,{q:()=>i});let i=new(n(81570)).hs("annotation")},76241:(e,t,n)=>{"use strict";n.d(t,{_:()=>u,h:()=>p});var i=n(81570),a=n(3583),r=n(54107),o=n(13236),l=n(73686),s=n(387),d=n(65202);class c{apply(e,t){let n=e.getMeta(u);if(n&&n.type)return"createDraftComment"===n.type&&this.createDraftComment(n,t),"removeDraftComment"===n.type&&this.removeDraftComment(n,t),this;let i=e.getMeta(d.q);if(i&&i.type)return"refreshAnnotationDecorations"===i.type&&this.createDecorations(t),this;if((0,s.LP)(e)){try{this.createDecorations(t)}catch(e){console.log("could not create decorations: ".concat(e.message),e)}return this}return this.decorations=this.decorations.map(e.mapping,e.doc),this}removeDraftComment(e,t){return e.comments.forEach(e=>{let{targetId:t}=e;delete this.draftComments[t]}),this.createDecorations(t),this}createDraftComment(e,t){this.draftComments[e.comment.targetId]=e.comment,this.createDecorations(t)}createDecorations(e){let t=a.pJ.getState(e);if(!t.binding)return this;let{doc:n,type:i,binding:s}=t,d=[];for(let t of Object.values(this.draftComments))try{var c,u;let a=(0,r.bL)(n,i,t.relativePos,s.mapping);if(null==a)continue;let p=e.doc.resolve(a),h=t=>{let n=(0,o.xe)(e.doc,e=>e===t);if(!n||0===n.length)throw Error();return n[0].pos},m=(null===(c=p.nodeAfter)||void 0===c?void 0:c.isBlock)?a:h(p.parent),g=m+((null===(u=p.nodeAfter)||void 0===u?void 0:u.isBlock)?p.nodeAfter.nodeSize:p.parent.nodeSize);d.push(l.NZ.node(m,g,{},{isDraftComment:!0,comment:t}))}catch(e){console.log("[DraftCommentState] error: $".concat(e.message))}return this.decorations=l.zF.create(e.doc,d),this}absToRel(e,t){let n=a.pJ.getState(e),{type:i,binding:o}=n;if(!n.binding)throw Error("Y.State non initialized");return(0,r.Bw)(t,i,o.mapping)}constructor(){this.draftComments={},this.decorations=l.zF.empty}}let u=new i.hs("draftComments"),p=()=>new i.k_({key:u,state:{init:()=>new c,apply:(e,t,n,i)=>t.apply(e,i)},props:{decorations(e){let{decorations:t}=this.getState(e);return t}}})},5434:(e,t,n)=>{"use strict";n.d(t,{u:()=>eV});var i=n(31085),a=n(80532),r=n(81313),o=n(9104),l=n(99742),s=n(14041),d=n(91559),c=n(35002),u=n(64225),p=n(82257),h=n(2696),m=n(58599),g=n(5933),x=n(63723),f=n(44507),v=n(92667),b=n(4468);let y=e=>{let{editor:t,decorations:n}=e,i=n.filter(e=>!!e.spec.isMobileAnnotation),[a,r]=(0,s.useState)(null),o=(0,s.useRef)(null);return(0,s.useEffect)(()=>{if(0===i.length){null!==o.current&&(document.removeEventListener("touchstart",o.current),o.current=null,r(null));return}o.current||(r({left:i[0].spec.offsetX,top:i[0].spec.offsetY}),o.current=e=>{e.target.closest(".mobile-add-comment-widget")||t.commands.setMobileAddBlockComment(null)},document.addEventListener("touchstart",o.current))},[t,i]),a};var w=n(32202),j=n(32133),k=n(9335),C=n(32262),S=n(57882),A=n(6201),z=n(62313),I=n(3040),R=n(25420),E=n(35687),L=n(27559),_=n(20501),M=n(95640),N=n(75669),T=n(64130),P=n(59707),O=n(80853),D=n(27670),F=n(24221);let H=(0,s.memo)(e=>{let{isMobile:t,icon:n,badgeCount:a,tooltip:r,children:l,...s}=e;t&&delete s._hover;let d=(0,i.jsx)(z.z,{className:"block-comment-button-wrapper",children:(0,i.jsxs)(O.$,{variant:"custom",borderRadius:"full",size:"sm",bgGradient:"none",color:"yellow.600",boxSize:t?10:8,border:t?"":"1px solid white",transitionProperty:"common",transitionDuration:"normal",_hover:t?{}:{bgGradient:"linear(to-b, yellow.300, yellow.400)",color:"yellow.700"},...s,children:[n&&(0,i.jsx)(F.g,{size:t?"lg":"sm",icon:n}),l&&l,void 0!==a&&(0,i.jsx)(D.E,{colorScheme:"highlight-bonan",borderRadius:"full",pos:"absolute",bottom:-1,right:-1,shadow:"base","data-testid":"badge-count",children:a})]})});return r?(0,i.jsx)(o.Tz,{placement:"left",label:r,children:d}):d});H.displayName="GenericBlockCommentButton";var W=n(31201),B=n(87835),V=n.n(B),G=n(84003),U=n(45930),K=n(4912);let q=e=>{let{comments:t,reactions:n,draftComment:i}=e;if(i&&i.text.trim().length>0)return"draft";if(0===t.length)return 0===n.length?"fresh":"reactions-only";if(1===t.length)return"single-thread";if(t.length>1)return"multiple-threads";throw Error("Invalid button state")},J=e=>{let{comments:t,reactions:n}=e,i={};return t.forEach(e=>{i[e.id]=[e.user],e.replies.forEach(t=>{i[e.id].push(t.user)})}),Object.entries(i).forEach(e=>{let[t,n]=e;i[t]=V()(n,"id")}),i},$=e=>{let{reactions:t}=e,n={};return t.forEach(e=>{n[e.emoji]=V()(e.reactions.flatMap(e=>e.users),"id")}),n},Y=e=>{let{comments:t,reactions:n,draftComment:i}=e;return{state:q({comments:t,reactions:n,draftComment:i}),allCount:t.reduce((e,t)=>{var n;return e+((null===(n=t.replies)||void 0===n?void 0:n.length)||0)},0)+n.reduce((e,t)=>e+t.count,0)+t.length,overflowReactionCount:Math.max(0,n.length-7)}},Q=e=>{let{comments:t,reactions:n}=e,i=n.flatMap(e=>e.reactions.map(e=>e.users)).flat(),a=t.map(e=>e.user).concat(t.map(e=>e.replies.map(e=>e.user)).flat()).filter(Boolean),r=J({comments:t,reactions:n}),o=V()([...a,...i],"id"),l=[],s=$({reactions:n});return t.forEach(e=>{l.push(r[e.id])}),{allAvatars:o,reactionAvatars:s,commentAvatars:l}},X=e=>{let{popup:t,isMobile:n,isHovered:i,comments:a,reactions:r,draftComment:o,enableReactions:l}=e,{state:d}=Y({comments:a,reactions:r,draftComment:o}),c=n||l&&i||!l&&i&&"fresh"!==d||null!==t;return(0,s.useEffect)(()=>{n||(c?document.body.classList.add("is-taking-action"):document.body.classList.remove("is-taking-action"))},[c,n]),{isExpanded:c}},Z=e=>{let{isOpen:t,popupRef:n,onClose:i}=e;(0,W.j)({ref:n,handler:e=>{var n,a,r,o,l,s,d;(0,f.mG)()&&!(null==e?void 0:null===(n=e.target)||void 0===n?void 0:n.closest(".".concat(U.V," [data-controls-toggle-button]")))||!t||(null==e?void 0:null===(a=e.target)||void 0===a?void 0:a.closest("[data-controls-toggle-button]"))||(null==e?void 0:null===(r=e.target)||void 0===r?void 0:r.closest('[data-target-name="emoji-list"]'))||(null==e?void 0:null===(o=e.target)||void 0===o?void 0:o.closest('[data-target-name="mention-list"]'))||(null==e?void 0:null===(l=e.target)||void 0===l?void 0:l.closest('[data-target-name="reaction-emoji-picker"]'))||(null==e?void 0:null===(s=e.target)||void 0===s?void 0:s.closest(".chakra-menu__menu-list"))||(null==e?void 0:null===(d=e.target)||void 0===d?void 0:d.closest('[data-target-name="doc-mention-popup"]'))||i()}})},ee=e=>{let{editor:t,getPos:n}=e,i=t.view.nodeDOM(n()),[a,r]=(0,s.useState)(null);return((0,s.useLayoutEffect)(()=>{r((null==i?void 0:i.offsetHeight)||100)},[]),null===a)?null:Math.min(a,G.Ey)};var et=n(61778),en=n(43342),ei=n(60674),ea=n(81112);let er=(0,ei.P)(a.az),eo=(0,s.memo)(e=>{let{emojis:t,rtlEnabled:n}=e;return(0,i.jsx)(i.Fragment,{children:null==t?void 0:t.map((e,a)=>0===a?(0,i.jsx)(er,{initial:{x:n?"-6px":"6px",y:"5px"},textShadow:(null==t?void 0:t.length)>1?"0px 1px 3px rgba(0,0,0,.4)":"none",fontSize:"20px",position:"absolute",zIndex:1,children:(0,i.jsx)("em-emoji",{size:0,native:!0,id:e})},a):1===a?(0,i.jsx)(er,{zIndex:0,initial:{x:n?"-10px":"10px",y:"6px",scale:.7},animate:{scale:.7,rotate:"10deg",x:n?"-18px":"18px",y:"-3px"},position:"absolute",children:(0,i.jsx)("em-emoji",{size:0,native:!0,id:e})},a):2===a?(0,i.jsx)(er,{zIndex:0,initial:{x:n?"-10px":"10px",y:"6px",scale:.7},animate:{scale:.7,rotate:"-10deg",x:n?"3px":"-3px",y:"16px"},position:"absolute",children:(0,i.jsx)("em-emoji",{size:0,native:!0,id:e})},a):3===a?(0,i.jsx)(er,{zIndex:0,initial:{x:n?"-10px":"10px",y:"6px",scale:.7},animate:{scale:.7,rotate:"-10deg",x:n?"3px":"-3px",y:"-3px"},position:"absolute",children:(0,i.jsx)("em-emoji",{size:0,native:!0,id:e})},a):null)})});eo.displayName="EmojiCluster";let el=(0,ei.P)(a.az),es=(0,s.memo)(e=>{let{emoji:t,emojiCluster:n,isMobile:r,user:l,canReact:d,reaction:c,badgeCount:u,onClick:p,...h}=e,m=(0,T.fW)(),g=(0,K.BW)(c),x=!!g.find(e=>e.id===(null==l?void 0:l.id)),f=(0,ea.gj)({users:g,selfUserId:(null==l?void 0:l.id)||""}),v=(0,i.jsxs)(a.az,{alignContent:"center",children:[(0,i.jsx)(M.x6,{id:"mRnNF/",values:{usersLabel:f,emoji:t},components:{0:(0,i.jsx)(et.E,{as:"span",color:"gray.300"})}}),d&&(0,i.jsx)(et.E,{display:"block",color:"gray.500",children:x?(0,i.jsx)(M.x6,{id:"fb/FjL"}):(0,i.jsx)(M.x6,{id:"AG3H1y"})})]}),b=(0,i.jsx)(z.z,{className:"block-comment-button-wrapper",children:(0,i.jsxs)(O.$,{variant:"ghost",borderRadius:"full",size:"sm",boxSize:r?10:8,transitionProperty:"common",transitionDuration:"normal",...x?{bg:"gray.100",borderColor:r?"blackAlpha.200":"gray.200"}:{},...h,onClick:e=>{d&&p&&p(e)},pos:"relative",children:[(0,i.jsx)(s.Suspense,{fallback:(0,i.jsx)(en.y,{size:"sm"}),children:(0,i.jsxs)(et.E,{pos:"absolute",inset:0,as:"span",sx:{".emoji-mart-emoji":{fontSize:"1em",span:{cursor:"inherit",fontSize:"1em !important"},":hover::before":r?{}:{backgroundColor:"transparent"}}},fontSize:r?"1.5em":"1.25em",children:[!n&&(0,i.jsx)(el,{initial:{x:m?"-6px":"6px",y:"5px"},fontSize:"20px",position:"absolute",zIndex:1,children:(0,i.jsx)("em-emoji",{size:0,native:!0,id:t})}),(0,i.jsx)(N.N,{children:(0,i.jsx)(eo,{emojis:n,rtlEnabled:m})})]})}),void 0!==u&&(0,i.jsx)(D.E,{colorScheme:"highlight-bonan",borderRadius:"full",pos:"absolute",bottom:-1,insetEnd:-1,shadow:"base",zIndex:1,children:u})]})});return v?(0,i.jsx)(o.Tz,{placement:"left",label:v,children:b}):b});es.displayName="ReactionButton";let ed={bg:"yellow.600",color:"yellow.100",_hover:{bg:"yellow.600",color:"yellow.100"}},ec={bg:"yellow.100",color:"yellow.800"},eu="linear(to-b, yellow.200, yellow.300)",ep=e=>{e.stopPropagation()},eh=(0,s.memo)(e=>{let{user:t,userCanComment:n,isExpanded:r,isMobile:l,comments:s,reactions:d,draftComment:c,onClickThread:u,onClickAddComment:p,onClickAddReaction:h,onClickReactionsOverflow:m,onClickExistingReaction:g,onClosePopup:x,hideAddCommentButton:f=!1,viewingCommentId:v,enableReactions:b,blockAllowsCommenting:y,...w}=e,j=(0,T.fW)(),{state:k,allCount:C,overflowReactionCount:S}=Y({comments:s,reactions:d,draftComment:c}),A=[];if(!r)switch(k){case"draft":A.push((0,i.jsx)(H,{isMobile:l,icon:_.I$7,onClick:p,bg:r?"gray.100":"white",_hover:ec,color:"gray.600"},"draft"));break;case"fresh":A.push((0,i.jsx)(H,{isMobile:l,icon:I.vdI,bg:r?"gray.100":"white",_hover:ec,color:"gray.600",bgGradient:eu,tooltip:(0,i.jsx)(M.x6,{id:"oFsfkI"}),"data-testid":"create-comment-button",onClick:p},"fresh"));break;case"reactions-only":if(d.length>0){let e=d[0],a=d.reduce((e,t)=>(e.push(t.emoji),e),[]);A.push((0,i.jsx)(es,{isMobile:l,onClick:t=>{g(e),t.stopPropagation()},reaction:e,user:t,badgeCount:C,emoji:e.emoji,"data-testid":"reaction-".concat(e.emoji),emojiCluster:a,canReact:n&&y},e.emoji))}break;case"single-thread":A.push((0,i.jsx)(H,{isMobile:l,icon:I.DN2,bgGradient:eu,badgeCount:C,"data-testid":"single-thread"},"first-thread"));break;case"multiple-threads":A.push((0,i.jsx)(H,{isMobile:l,bgGradient:eu,icon:I.q9p,badgeCount:C,"data-testid":"multiple-threads"},"first-thread"))}return(r&&(s.forEach((e,t)=>{let n=null!==v&&e.id===v,a=n?ed:{},r=n?()=>x():()=>u(e);A.push((0,i.jsx)(H,{isMobile:l,icon:I.DN2,badgeCount:e.replies.length+1,bgGradient:eu,onClick:r,"data-testid":"thread-".concat(t),...a},0===t?"first-thread":"thread-".concat(t)))}),b&&(d.slice(0,7).forEach(e=>{A.push((0,i.jsx)(es,{isMobile:l,onClick:t=>{g(e),t.stopPropagation()},"data-testid":"reaction-".concat(e.emoji),reaction:e,user:t,badgeCount:e.count,emoji:e.emoji,canReact:n&&y},e.emoji))}),S>0&&A.push((0,i.jsxs)(H,{isMobile:l,onClick:()=>{m()},bg:"gray.100",color:"yellow.800",_hover:ec,children:["+",S]},"reactions-overflow"))),"draft"===k?A.push((0,i.jsx)(H,{isMobile:l,icon:_.I$7,tooltip:(0,i.jsx)(M.x6,{id:"x8Zuns"}),onClick:p,bg:r?"gray.100":"white",_hover:ec,"data-testid":"create-comment-button-draft",color:"gray.600"},"draft")):f||l||A.push((0,i.jsx)(H,{isMobile:l,icon:I.vdI,transform:j?"scaleX(-1)":"",bgGradient:eu,tooltip:(0,i.jsx)(M.x6,{id:"oFsfkI"}),onClick:p,bg:r?"gray.100":"white",_hover:ec,"data-testid":"create-comment-button",color:"gray.600"},"fresh")),b&&n&&!f&&!l&&A.push((0,i.jsx)(H,{isMobile:l,icon:I.Q3O,transform:j?"scaleX(-1)":"",bgGradient:eu,onClick:()=>{h()},tooltip:(0,i.jsx)(M.x6,{id:"9OEgyT"}),"data-testid":"add-reaction-button",bg:"gray.100",_hover:ec,color:"gray.600"},"add-reaction"))),l)?(0,i.jsx)(R.s,{className:"block-comments-inner-stack",userSelect:"none",transitionProperty:"all",transitionDuration:"fast",flexDir:"row",flexWrap:"wrap",onClick:ep,children:A}):(0,i.jsx)(o.L8,{isDark:!1,force:!0,children:(0,i.jsxs)(E.B,{className:"block-comments-inner-stack",userSelect:"none",spacing:0,width:"34px",transitionProperty:"all",transitionDuration:"fast",onClick:ep,borderRadius:"full",boxShadow:"0 0 0 2px rgba(0,0,0,.1)",bg:"white",border:"1px solid transparent",onMouseDown:P.Fw,"data-testid":"block-comments-buttons",...w,children:[(0,i.jsx)(a.az,{children:A[0]}),(0,i.jsx)(L.S,{in:r,startingHeight:0,transitionEnd:{enter:{overflow:"initial"}},children:(0,i.jsx)(N.N,{children:A.length>1&&(0,i.jsx)(E.B,{spacing:1,children:A.slice(1)})})})]})})});eh.displayName="BlockCommentsButtons";let em=(0,s.memo)(e=>{let{onClickAddComment:t,onClickAddReaction:n,...r}=e;return(0,i.jsx)(a.az,{className:"mobile-add-comment-widget",pos:"absolute",transform:"translate(-50%,-50%) scale(1)",mt:-6,background:"white",p:"4px",borderRadius:"full",shadow:"lg",transitionProperty:"common",transitionDuration:"normal",transitionTimingFunction:"cubic-bezier(0.34, 1.56, 0.64, 1);",zIndex:9,...r,children:(0,i.jsxs)(z.z,{spacing:1,children:[(0,i.jsx)(H,{isMobile:!0,icon:I.vdI,bg:"white",_hover:ec,color:"gray.600",bgGradient:eu,onClick:()=>{t()}},"fresh"),(0,i.jsx)(H,{isMobile:!0,icon:I.Q3O,bgGradient:eu,onClick:()=>{n()},bg:"white",_hover:ec,color:"gray.600"},"add-reaction")]})})});em.displayName="MobileAddCommentWidget";var eg=n(31595),ex=n(48574);let ef=(0,s.memo)(e=>{let{comments:t,reactions:n,isExpanded:a,avatarMax:r=4}=e,{allAvatars:o,reactionAvatars:l,commentAvatars:s}=Q({comments:t,reactions:n});return(0,i.jsxs)(E.B,{className:"avatar-group-popup",spacing:1,transitionProperty:"common",transitionDuration:"fast",onClick:e=>{e.stopPropagation()},p:"1px",ps:3,userSelect:"none",children:[!a&&(0,i.jsx)(eg.Z,{max:r,style:{fontSize:"var(--chakra-fontSizes-sm)"},size:"sm",justifyContent:"start",opacity:[0,0,0,1],transitionProperty:"common",transitionDuration:"normal",position:"relative",children:o.map((e,t)=>(0,i.jsx)(ex.e,{zIndex:o.length-t,me:-3,name:null==e?void 0:e.displayName,src:null==e?void 0:e.profileImageUrl,shadow:"base",ignoreFallback:!0},"unexpanded-".concat(null==e?void 0:e.id)))}),a&&(0,i.jsxs)(i.Fragment,{children:[s.map((e,t)=>(0,i.jsx)(eg.Z,{max:r,style:{fontSize:"var(--chakra-fontSizes-sm)"},size:"sm",justifyContent:"start",opacity:[0,0,0,1],transitionProperty:"common",transitionDuration:"normal",position:"relative",children:e.map((e,t)=>(0,i.jsx)(ex.e,{zIndex:o.length-t,me:-3,name:null==e?void 0:e.displayName,src:null==e?void 0:e.profileImageUrl,shadow:"base",ignoreFallback:!0},"comment-".concat(null==e?void 0:e.id)))},"comment-".concat(t))),n.slice(0,7).map((e,t)=>(0,i.jsx)(eg.Z,{max:r,style:{fontSize:"var(--chakra-fontSizes-sm)"},size:"sm",justifyContent:"start",opacity:[0,0,0,1],transitionProperty:"common",transitionDuration:"normal",position:"relative",children:l[e.emoji].map((e,t)=>(0,i.jsx)(ex.e,{zIndex:o.length-t,me:-3,name:null==e?void 0:e.displayName,src:null==e?void 0:e.profileImageUrl,shadow:"base",ignoreFallback:!0},"reaction-".concat(null==e?void 0:e.id)))},"reaction-".concat(t)))]})]})});ef.displayName="AvatarGroupPopup";var ev=n(12327);let eb=e=>{let{isMobile:t,emoji:n}=e,a=ev.Ru._({id:"r2ONxg"});return(0,i.jsx)(s.Suspense,{fallback:(0,i.jsx)(en.y,{size:"sm"}),children:(0,i.jsxs)(et.E,{as:"span",sx:{".emoji-mart-emoji":{fontSize:"1em",span:{cursor:"inherit",fontSize:"1em !important"}}},children:[(0,i.jsx)("em-emoji",{size:0,native:!0,id:n})," ",a,"."]})})};var ey=n(19893),ew=n(37881),ej=n(39225),ek=n(34323);let eC=e=>{let{onCancel:t,editor:n,commentIdToHighlight:a,userCanComment:r,blockAllowsCommenting:o,getPos:l,draftComment:s,onCommentDraftUpdate:d,onCommentSave:c,isMobile:p}=e,{user:h}=(0,S.ur)(),m=(0,u.GV)(g.Jo),x=(0,ey.h6)(m,h),f=ee({editor:n,getPos:l}),v=x&&!h&&o;if(null===f)return null;let b=(0,i.jsxs)(R.s,{overflowY:"auto",direction:"column",className:"comments-list",p:p||v?0:4,children:[v&&m&&(0,i.jsx)(ew.W,{accessLink:x,doc:m,className:"comments-sign-up",showDivider:!1}),r&&(0,i.jsx)(ej.h,{draftComment:s,user:h,showUser:p,showBorder:p,onCommentDraftUpdate:d,onCommentSave:c,commentIdToHighlight:a,alwaysShowButtons:p})]});return p?b:(0,i.jsx)(ek.Pj,{offsetFromTop:f,children:b})};var eS=n(52609);let eA=e=>{let{isMobile:t,editor:n,onReactionClick:a,getPos:r}=e,o=ee({editor:n,getPos:r});if(null===o)return null;let l=(0,i.jsx)(R.s,{bg:"white",p:"0",zIndex:"tooltip","data-testid":"add-reaction-popup","data-target-name":"reaction-emoji-picker",boxShadow:"none",sx:{".emoji-mart":{border:"none"}},overflow:"hidden",justify:"center",children:(0,i.jsx)(eS.pP,{perLine:9,handlePick:a,shouldFocusSearch:!t})});return t?l:(0,i.jsx)(ek.Pj,{offsetFromTop:o,children:l})};var ez=n(14608),eI=n(59742),eR=n(9746),eE=n(18658),eL=n(65446);let e_=(0,s.forwardRef)(function(e,t){let{isMobile:n,children:r,closePopup:o,drawerMinHeight:l}=e;if(n){let e=l||"calc(calc(100vh - calc(100vh - 100%)) - 1rem)";return(0,i.jsxs)(ez._,{placement:"bottom",isOpen:!0,onClose:o,children:[(0,i.jsx)(eI.m,{}),(0,i.jsxs)(eR.z,{minH:e,maxH:e,borderTopRadius:"xl",className:"comments-wrapper","data-block-comments-popup":!0,children:[(0,i.jsx)(eE.c,{p:6,pb:2,className:ek.Vv,children:r}),(0,i.jsx)(eL.s,{})]})]})}return(0,i.jsx)(a.az,{ref:t,children:r})});var eM=n(2219);let eN=e=>{let{onCancel:t,reactions:n,onClickExistingReaction:a,editor:r,getPos:o,user:l,userCanComment:d,blockAllowsCommenting:c,isMobile:u}=e,p=ee({editor:r,getPos:o}),h=n.slice(u?0:7),m=h.map(e=>(0,i.jsx)(es,{isMobile:!0,onClick:t=>{a(e),t.stopPropagation()},mr:2,mb:4,reaction:e,user:l,canReact:d&&c,badgeCount:e.count,emoji:e.emoji},e.emoji));if((0,s.useEffect)(()=>{0===h.length&&t()},[t,h]),null===p)return null;let g=(0,i.jsxs)(E.B,{spacing:4,children:[(0,i.jsx)(eM.D,{size:"md",children:(0,i.jsx)(M.x6,{id:"7ZMg79"})}),(0,i.jsx)(R.s,{flexWrap:"wrap",children:m})]});return u?g:(0,i.jsx)(ek.Pj,{offsetFromTop:p,children:(0,i.jsx)(R.s,{p:4,px:2,pb:0,flexWrap:"wrap",children:m})})};var eT=n(78358);let eP=e=>{let{comment:t,editor:n,commentIdToHighlight:a,userCanComment:r,blockAllowsCommenting:o,getPos:l,isMobile:s,closePopup:d}=e,c=n.gammaDocId,{user:p}=(0,S.ur)(),h=(0,j.d4)(g.wC),m=(0,u.GV)(g.Jo),x=(0,ey.h6)(m,p),f=ee({editor:n,getPos:l});if(null===f||!t)return null;let v=(0,i.jsxs)(R.s,{direction:"column",className:"comments-list","data-testid":"thread-view-popup",children:[x&&!p&&m&&o&&(0,i.jsx)(ew.W,{accessLink:x,doc:m,className:"comments-sign-up"}),(0,i.jsx)(eT.h,{instanceType:s?"drawer":"popup",userCanComment:r,commentIdToHighlight:a,editor:n,comment:t,selfUser:p,docId:c,editorMode:h,isRootComment:!0,borderBottomWidth:"none",closePopup:d,p:s?0:4,pb:4},t.id)]});return s?v:(0,i.jsx)(ek.Pj,{offsetFromTop:f,children:v})};var eO=n(50877),eD=n(2156);let eF=e=>{let{getPos:t,editor:n,reactions:i}=e,{user:a}=(0,S.ur)(),[r]=(0,eO.nkJ)(),[o]=(0,eO.eaJ)(),l=(0,s.useCallback)(e=>{let{reaction:t}=e;if(!a)return;let i=t.docId;1===t.count&&n.commands.deleteAnnotation(t.targetId);let r=t.count-1,l=t.users.filter(e=>(null==e?void 0:e.id)!==(null==a?void 0:a.id));o({variables:{reactionInput:{docId:i,targetId:t.targetId,emoji:t.emoji}},update:(e,t)=>{let{data:n}=t;e.writeFragment({id:"Doc:".concat(i),fragment:eO.JhL,fragmentName:"DocReactionsCreate",data:{reactions:[null==n?void 0:n.removeReaction]}})},optimisticResponse:{removeReaction:{docId:i,targetId:t.targetId,targetType:eO.yKx.Decoration,count:r,emoji:t.emoji,users:l,__typename:"Reaction"}}})},[n,o,a]);return{addReactionFn:(0,s.useCallback)(e=>{let{emoji:o}=e;if((0,K.uP)({emoji:o,user:a,reactions:i})||!a)return;let l=n.gammaDocId,s=(0,K.jj)({reactions:i,emoji:o}),d=eD.D.generate(),c=((null==s?void 0:s.count)||0)+1,u=[];s?(d=s.targetId,u=[...s.users]):n.commands.addAnnotation({id:d,pos:t()}),u.unshift(a),u.sort((e,t)=>e.id>t.id?1:-1),r({variables:{reactionInput:{docId:l,targetId:d,targetType:eO.yKx.Decoration,emoji:o}},update:(e,t)=>{let{data:n}=t;e.writeFragment({id:"Doc:".concat(l),fragment:eO.JhL,fragmentName:"DocReactionsCreate",data:{reactions:[null==n?void 0:n.addReaction]}})},optimisticResponse:{addReaction:{docId:l,targetId:d,targetType:eO.yKx.Decoration,count:c,emoji:o,users:u,__typename:"Reaction"}}})},[r,n,t,i,a]),removeReactionFn:l}},eH={"add-comment":"350px","add-reaction":"350px","reactions-overflow":"350px"},eW=e=>{let{nodeName:t,isVisible:n,editor:a,getPos:o,comments:l,reactions:d,createDraftComment:c,cleanupDraftComment:p,onCommentDraftUpdate:h,draftComment:m,onCommentSave:x,userCanComment:b,blockAllowsCommenting:y,blockCommentId:z,enableReactions:I,mobileAddCommentPos:R,setIsButtonStackHovered:E}=e,L=(0,w.d)(),_=(0,f.Xb)(),M=(0,j.wA)(),{user:N,isUserLoading:T}=(0,S.ur)(),{isHovering:P,delayedClose:O,...D}=(0,v.ou)({enterDelay:30,leaveDelay:100}),F=!!P,H=(0,s.useRef)(null),W=(0,s.useRef)(),B=(0,j.d4)((0,g.tT)(z)),V=(0,s.useRef)(null),[G,K]=(0,s.useState)(null),q=null!==G,J=(0,u.GV)(g.Ml),$=l.find(e=>e.id===J)||null,Y=(0,s.useCallback)(e=>{K("thread"),M((0,g.fw)({isOpen:!0,blockCommentId:z,viewingCommentId:e.id}))},[z,M]),Q=(0,s.useCallback)(e=>{K("add-comment"),M((0,g.fw)({isOpen:!0,blockCommentId:z,viewingCommentId:null})),c(e)},[z,M,c]),ee=(0,s.useCallback)(()=>{K("add-reaction"),M((0,g.fw)({isOpen:!0,blockCommentId:z,viewingCommentId:null}))},[z,M]),et=(0,s.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];K(null),p(),M((0,g.fw)({isOpen:!1,blockCommentId:z,viewingCommentId:null})),e&&O(1e3)},[z,p,O,M]),{addReactionFn:en,removeReactionFn:ei}=eF({editor:a,getPos:o,reactions:d}),ea=(0,s.useCallback)(e=>{b&&(en({emoji:e.id}),L({title:(0,i.jsx)(eb,{emoji:e.id,isMobile:_}),status:"success",duration:5e3,isClosable:!1,position:_?"bottom":"top"}),et(!0))},[en,et,_,L,b]),er=(0,s.useCallback)(e=>{x(e),et(!0)},[x,et]),eo=(0,s.useCallback)(e=>{if(!b)return;let t=e.reactions.find(e=>{var t;return null===(t=e.users)||void 0===t?void 0:t.find(e=>e.id===(null==N?void 0:N.id))});t?ei({reaction:t}):en({emoji:e.emoji})},[en,ei,N,b]),el=(0,s.useCallback)(()=>{K("reactions-overflow"),M((0,g.fw)({isOpen:!0,blockCommentId:z,viewingCommentId:null}))},[z,M]);Z({isOpen:q,popupRef:V,onClose:et});let{isExpanded:es}=X({popup:G,isMobile:_,isHovered:F,comments:l,reactions:d,draftComment:m,enableReactions:I});(0,s.useEffect)(()=>{_||E(F)},[F,_,E]),(0,A.hx)(o,Q);let ed=(0,A.f0)({comments:l,blockAllowsCommenting:y,showComment:(0,s.useCallback)(e=>{(0,C.Ib)({pos:o(),editor:a}),Y({id:e})},[a,o,Y])});(0,s.useEffect)(()=>{k.LF.emit(k.DN.POPUP_COMMENT_TOGGLED,{open:q})},[q]);let ec=(0,s.useCallback)(e=>{"Escape"===e.key&&et()},[et]);if(!n||T)return null;let eu=!!N&&!b,ep=0===l.length&&0===d.length;if((eu||!y)&&ep)return null;let eg=eu||!y;return(0,i.jsxs)(i.Fragment,{children:[_&&R&&(0,i.jsx)(em,{onClickAddComment:Q,onClickAddReaction:ee,top:R.top,left:R.left}),(0,i.jsxs)(U.p,{nodeName:t,className:(0,r.cx)("block-comments-stack",es&&"is-expanded",es&&"is-taking-action",ep&&"is-empty",!_&&B&&"other-comment-open"),isMobile:_,isEmpty:ep,isPopupOpen:q,...D,buttonRef:H,onKeyDown:ec,hasCommentsOrReactions:!ep,children:[(0,i.jsx)(eh,{isExpanded:es,isMobile:_,user:N,userCanComment:b,blockAllowsCommenting:y,draftComment:m,reactions:d,comments:l,onClickThread:Y,onClickAddComment:Q,onClickAddReaction:ee,onClickExistingReaction:eo,onClickReactionsOverflow:el,hideAddCommentButton:eg,onClosePopup:et,viewingCommentId:J,enableReactions:I}),!q&&!_&&(0,i.jsx)(ef,{isExpanded:es,comments:l,reactions:d}),q&&(0,i.jsxs)(e_,{isMobile:_,ref:V,closePopup:et,drawerMinHeight:eH[G],children:["thread"===G&&(0,i.jsx)(eP,{isMobile:_,comment:$,closePopup:et,editor:a,getPos:o,commentIdToHighlight:ed,commentsPanelRef:W,userCanComment:b,blockAllowsCommenting:y}),"add-comment"===G&&(0,i.jsx)(eC,{isMobile:_,onCancel:()=>{et()},editor:a,getPos:o,commentIdToHighlight:ed,userCanComment:b,blockAllowsCommenting:y,onCommentSave:er,draftComment:m,onCommentDraftUpdate:h}),"add-reaction"===G&&(0,i.jsx)(eA,{isMobile:_,onReactionClick:ea,editor:a,getPos:o}),"reactions-overflow"===G&&(0,i.jsx)(eN,{isMobile:_,onCancel:()=>{et()},onClickExistingReaction:eo,editor:a,getPos:o,user:N,userCanComment:b,blockAllowsCommenting:y,reactions:d})]})]})]})};var eB=n(79246);let eV=e=>{let{children:t,as:n,className:a,dir:r,style:o,hideComments:l=!1,readOnly:s=!1,...d}=e,{decorations:c,editor:u}=d,h=(0,p.oR)();return!c.some(e=>e.spec.isAnnotatable)||u.isThumbnail||h?(0,i.jsx)(m.VR,{as:n,className:a,dir:r,style:o,children:t}):(0,i.jsx)(eG,{as:n,className:a,dir:r,style:o,hideComments:l,readOnly:s,...d,children:t})},eG=e=>{var t;let{children:n,decorations:p,editor:w,getPos:j,as:k,className:C,dir:S,style:z,hideComments:I,readOnly:R,node:E}=e,{isConnected:L}=(0,d.u)(),_=(0,b.pl)(p),M=y({editor:w,decorations:p}),N=(0,c.u)("blockReactions"),T=(0,h.UT)("comment"),P=(0,u.GV)(g.mi),O=(0,s.useMemo)(()=>(0,l.Ak)(5),[]),D=(0,u.GV)((0,g.ng)(O)),[F,H]=(0,s.useState)(!1),W=(0,c.u)("debugComments"),B=(0,A.yU)(p),V=B[0]||null,[G,U]=(0,s.useState)(null),K=(0,u.jL)(),q=(0,s.useCallback)(e=>{let t=(null==e?void 0:e.getPos)||j,n=null==e?void 0:e.targetHtml,i=V;if(i)e&&(i=(0,eB.ol)(i,t,n,w));else{var a,r;i=(0,eB.CD)(t,w,n),null===(a=(r=w.commands).createDraftComment)||void 0===a||a.call(r,i)}U(i),K((0,g.mF)({attached:!1}))},[K,w,j,V]),J=(0,s.useCallback)(()=>{var e,t,n,i,a,r;G&&(null==G?void 0:null===(t=G.text)||void 0===t?void 0:null===(e=t.trim())||void 0===e?void 0:e.length)>0?null===(n=(i=w.commands).createDraftComment)||void 0===n||n.call(i,G):null===(a=(r=w.commands).removeDraftComments)||void 0===a||a.call(r,B),U(null)},[B,w,G]),$=(0,s.useRef)(D);$.current=D,(0,s.useEffect)(()=>()=>{$.current&&K((0,g.fw)({isOpen:!1,blockCommentId:O,viewingCommentId:null}))},[O,K]);let Y=(0,A.Zb)({draftComment:G,clearDraftComment(){var e,t,n,i;G&&(null===(n=(i=w.commands).removeDraftComments)||void 0===n||n.call(i,[G,...B]));let a=(0,eB.CD)(j,w);null===(e=(t=w.commands).createDraftComment)||void 0===e||e.call(t,a),U(a)},editor:w}),Q=(0,A.$w)(p),X=Q.length>0&&!I,Z=G||V,ee=(null==Z?void 0:null===(t=Z.text)||void 0===t?void 0:t.length)>0,[et,en]=(0,v.Mk)(),ei=(0,A.HQ)(p);N||(ei=[]);let ea=ei.length>0,er=P&&!I&&T,eo=(0,f.Xb)()&&(D||X||ea||!!M)||!(0,f.Xb)()&&(en||_||D||X||ea||ee),el=T&&L,es=D||M||F?(0,x.$3)(o.t1.colors.yellow[200],.25):void 0;return(0,i.jsxs)(m.VR,{as:k,style:{...z,position:"relative",backgroundColor:(0,f.Xb)()?void 0:es},className:(0,r.cx)(C,"annotatable-node-view-wrapper",(0,f.Xb)()&&"is-mobile",W?"debug-comments":""),dir:S,ref:et,children:[er&&(0,i.jsx)(eW,{nodeName:E.type.name,isVisible:eo,reactions:ei,blockCommentId:O,userCanComment:el,blockAllowsCommenting:!I&&!R,onCommentDraftUpdate:e=>{let{editor:t}=e;U(e=>e?{...e,json:t.view.state.doc.toJSON(),text:t.view.state.doc.textContent}:e)},cleanupDraftComment:J,createDraftComment:q,editor:w,getPos:j,comments:Q,draftComment:Z,onCommentSave:Y,enableReactions:N,mobileAddCommentPos:M,setIsButtonStackHovered:H}),(0,f.Xb)()&&es?(0,i.jsx)(a.az,{bgColor:es,children:n}):n]})}},45930:(e,t,n)=>{"use strict";n.d(t,{p:()=>p,V:()=>u});var i=n(31085),a=n(80532),r=n(62313),o=n(25420),l=n(14041),s=n(14968),d=n(64130);let c=(0,l.memo)(e=>{let{nodeName:t}=e,n=(0,d.fW)();return(0,i.jsx)(a.jl,{contentEditable:!1,userSelect:"none",insetEnd:0,size:4,transform:"translate(calc(".concat("calc(".concat("gridLayout"===t||"gallery"===t?"-1 * var(--grid-padding)":"0px"," + var(--comment-padding) + 50%)")," * ").concat(n?"-1":"1","),calc(50%)) scale(1)"),position:"absolute",bgGradient:"linear(to-b, yellow.200, yellow.300)",border:"1px solid white",shadow:"0 0 0 1px rgb(0 0 0 / 10%)",className:"block-comments-circle",zIndex:"1"})});c.displayName="BlockCommentsCircle";let u="comments-wrapper",p=(0,l.forwardRef)(function(e,t){let{nodeName:n,isPopupOpen:l,onKeyDown:d,buttonRef:p,isMobile:h,hasCommentsOrReactions:m,children:g,isEmpty:x,...f}=e;return(0,i.jsxs)(a.az,{ref:t,contentEditable:!1,suppressContentEditableWarning:!0,pointerEvents:"none","data-comments-wrapper":!0,"data-is-popup-open":l,className:u,alignSelf:"start",onKeyDown:d,"data-print-hidden":!0,children:[!x&&!h&&(0,i.jsx)(c,{nodeName:n}),(0,i.jsx)(r.z,{contentEditable:!1,suppressContentEditableWarning:!0,...h?m?{pt:4}:{}:{position:"absolute",ms:"100%",top:0,height:"100%",align:"flex-start"},className:"controls-wrapper controls-wrapper__".concat(n),children:(0,i.jsx)(o.s,{direction:"row",ref:p,contentEditable:!1,suppressContentEditableWarning:!0,transitionProperty:"common",transitionDuration:"fast",zIndex:l?s.$.commentsStackOpen:s.$.commentsStack,"data-controls-toggle-button":!0,ms:[0,"-17px"],...f,children:g})})]})})},34323:(e,t,n)=>{"use strict";n.d(t,{Pj:()=>p,Vv:()=>c,y3:()=>u});var i=n(31085),a=n(25420),r=n(9104),o=n(64130),l=n(87825),s=n(14968),d=n(84003);let c="block-comments-container",u="2xl",p=e=>{let{offsetFromTop:t,children:n}=e,p=(0,o.fW)();return(0,i.jsx)(r.L8,{isDark:!1,force:!0,children:(0,i.jsx)(a.s,{contentEditable:!1,suppressContentEditableWarning:!0,color:"gray.900",className:c,direction:"column",bg:"white",borderRadius:"xl",shadow:"xl",overflowY:"auto",transitionProperty:"common",transitionDuration:"normal",zIndex:s.$.commentsPopup,bottom:{top:"0px",[u]:"auto"},top:{top:"0px",[u]:"auto"},insetEnd:{base:"44px",[u]:0},width:{base:d.iq,[u]:d.iq},maxW:{base:"90vw",md:"80vw",[u]:d.iq},transform:{base:"translate(0, ".concat(t,"px)"),[u]:"translate(calc(".concat(p?"-100% - 10px":"100% + 10px","), 0)")},wordBreak:"break-word",height:"fit-content",maxHeight:"calc(".concat(l.bc," - 8em)"),position:"absolute",children:n})})}},4912:(e,t,n)=>{"use strict";n.d(t,{BW:()=>d,J2:()=>r,jj:()=>s,uP:()=>l}),n(87809);var i=n(87835),a=n.n(i);let r=(e,t)=>{for(let n of e){if(n.id===t)return t;for(let e of n.replies||[])if(e.id===t)return n.id}return null},o=e=>{let{reactions:t,emoji:n,user:i}=e,a=t.find(e=>e.emoji===n);return a&&a.reactions.find(e=>{var t;return e.emoji===n&&(null===(t=e.users)||void 0===t?void 0:t.find(e=>e.id===(null==i?void 0:i.id)))})||null},l=e=>{let{reactions:t,emoji:n,user:i}=e;return!!o({reactions:t,emoji:n,user:i})},s=e=>{let{reactions:t,emoji:n}=e,i=t.find(e=>e.emoji===n);return i&&i.reactions.find(e=>e.emoji===n)||null},d=e=>a()(e.reactions.flatMap(e=>e.users),"id")},78358:(e,t,n)=>{"use strict";n.d(t,{h:()=>ev});var i=n(31085),a=n(32202),r=n(61778),o=n(3706),l=n(56824),s=n(25420),d=n(35687),c=n(80532),u=n(27559),p=n(62313),h=n(48574),m=n(20501),g=n(24221),x=n(95640),f=n(12327),v=n(14041),b=n(32133),y=n(50877),w=n(80352),j=n(45390),k=n(9335),C=n(84003),S=n(32262),A=n(82354),z=n(77646),I=n(5933),R=n(95580),E=n(19463),L=n(4013),_=n(44507),M=n(92405),N=n(14e3),T=n(65202),P=n(9021),O=n(28478),D=n(9104),F=n(57882),H=n(81112),W=n(59707);let B=e=>{let{docId:t,cardId:n,commentId:i,parentCommentId:a,targetType:r}=e,[o]=(0,y.nkJ)(),[l]=(0,y.eaJ)();function s(e,o,l,s){let d={targetId:r===y.yKx.Comment?i:n,docId:t,emoji:o,cardId:n};if("addReaction"===e&&(d={...d,targetType:r}),r===y.yKx.Comment)return{variables:{reactionInput:d},update:(n,r)=>{let{data:o}=r;n.writeFragment({id:"Doc:".concat(t),fragment:y.U$g,fragmentName:"DocCommentsUpdate",data:{comments:[a?{id:a,replies:[{id:i,reactions:[o[e]],__typename:"Comment"}],reactions:[],__typename:"Comment"}:{id:i,replies:[],reactions:[o[e]],__typename:"Comment"}]}})},optimisticResponse:{[e]:{commentId:i,count:l,emoji:o,users:s,cardId:n,__typename:"Reaction"}}};console.error("[useReactionUpdate] Invalid targetType: ".concat(r))}return{addReactionFn:(e,t,n)=>{o(s("addReaction",e,t,n))},removeReactionFn:(e,t,n)=>{l(s("removeReaction",e,t,n))}}};var V=n(31201),G=n(40173),U=n(2250),K=n(55276),q=n(83858),J=n(52609);let $=(e,t)=>e===t||null!=e.parentElement&&$(e.parentElement,t),Y=e=>{let{setPopperElement:t,onPopoverClose:n,handleReactionClick:a,popperElement:r,openerElement:o,usePortal:l,isMobile:s,placement:d,...u}=e;(0,V.j)({ref:{current:r},handler(e){o&&$(e.target,o)||n()}});let p=(0,i.jsx)(c.az,{mx:s?0:3,mt:s?0:"-110px",shadow:"lg",bg:"white",p:"0",w:"auto",minW:"0px",zIndex:"tooltip","data-target-name":"reaction-emoji-picker",ref:t,...u,children:(0,i.jsx)(J.pP,{perLine:s?9:12,handlePick:e=>{a(e.id),n()},shouldFocusSearch:!(0,_.Xb)()})});return l?(0,i.jsx)(G.Z,{children:p}):p},Q=e=>{let{size:t,colorScheme:n,handleReactionClick:a,placement:r,usePortal:o=!0}=e,[l]=(0,U.U)(["(max-width: 840px)","(min-width: 841px)"]),{isOpen:s,onToggle:d,onClose:u}=(0,K.j)(),[p,h]=(0,v.useState)(!1),[b,y]=(0,v.useState)(null),[w,j]=(0,v.useState)(null),{styles:k,attributes:C,forceUpdate:S}=(0,q.E)(b,w,{placement:l?"auto":"".concat(r,"-start"),strategy:"fixed"});return(0,v.useEffect)(()=>{S&&setTimeout(()=>{S()},0)},[S]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(D.Tz,{placement:ee,label:(0,i.jsx)(x.x6,{id:"9OEgyT"}),isOpen:p,children:(0,i.jsx)(c.az,{display:"flex",onMouseEnter:()=>{h(!0)},onMouseLeave:()=>h(!1),children:(0,i.jsx)(P.K,{colorScheme:n,float:"inline-start","aria-label":f.Ru._({id:"9OEgyT"}),variant:"ghost",onClick:e=>{d(),e.stopPropagation()},size:t||"sm",ref:y,isRound:!0,icon:(0,i.jsx)(g.g,{icon:m.Q3O})})})}),s&&(0,i.jsx)(Y,{usePortal:o,setPopperElement:j,onPopoverClose:u,handleReactionClick:a,popperElement:w,isPopoverOpen:s,openerElement:b,style:k.popper,isMobile:l,placement:r,...C.popper})]})};var X=n(80853);let Z=e=>{let{colorScheme:t,size:n,emoji:a,label:o,count:s,hasSelfReacted:d,handleReactionClick:u,readOnly:p}=e,{colorMode:h}=(0,l.G6)(),m="light"===h,g=(0,v.useCallback)(e=>{p||u(a,e)},[a,u,p]);return(0,i.jsx)(D.Tz,{placement:ee,label:(0,i.jsxs)(c.az,{alignContent:"center",children:[o,!p&&(0,i.jsx)(r.E,{display:"block",color:m?"gray.500":"gray.700",children:d?(0,i.jsx)(x.x6,{id:"fb/FjL"}):(0,i.jsx)(x.x6,{id:"AG3H1y"})})]}),children:(0,i.jsxs)(X.$,{cursor:p?"default":"cursor","data-testid":"reaction-button-".concat(a),size:n||"sm",color:m?"gray.500":"gray.300",bg:d?m?"gray.100":"gray.700":"none",borderWidth:"1px",borderStyle:"solid",colorScheme:t,borderColor:d?m?"gray.200":"gray.500":"transparent",_hover:{bg:m?"gray.200":"gray.600"},variant:"ghost",borderRadius:"full",px:2,onClick:g,children:[(0,i.jsx)(J.mY,{emojiId:a,fontSize:"sm"===n?"lg":"sm"}),(0,i.jsx)(r.E,{as:"span",fontSize:n,ms:1.5,children:s})]})})},ee="bottom",et=e=>{let{size:t,colorScheme:n,placement:a="right",usePortal:o,reactions:l,docId:d,cardId:c,commentId:u,parentCommentId:p,targetType:h,readOnly:f,innerPaddingY:v,...b}=e,{addReactionFn:w,removeReactionFn:j}=B({docId:d,commentId:u,parentCommentId:p,cardId:c,targetType:h}),{user:k}=(0,F.ur)(),C=(null==l?void 0:l.reduce((e,t)=>(t.count&&(e[t.emoji]=t),e),{}))||{},S=!f&&h===y.yKx.Card&&!C.heart,A=Object.keys(C).length>0,z=(e,t)=>{var n,i,a,r,o,l;if(!(h===y.yKx.Comment&&u||h===y.yKx.Card&&c))throw Error("[Reactions.handleReactionClick] Invalid targetType. Args: targetType: ".concat(h,", commentId: ").concat(u,", cardId: ").concat(c));if(null===(i=C[e])||void 0===i?void 0:null===(n=i.users.find(e=>e.id===(null==k?void 0:k.id)))||void 0===n?void 0:n.id){let t=(null==C?void 0:null===(a=C[e])||void 0===a?void 0:a.count)-1,n=(null==C?void 0:null===(r=C[e])||void 0===r?void 0:r.users)?C[e].users.filter(e=>e.id!==(null==k?void 0:k.id)):[];j(e,t,n)}else{let t=(null==C?void 0:null===(o=C[e])||void 0===o?void 0:o.count)?C[e].count+1:1,n=(null==C?void 0:null===(l=C[e])||void 0===l?void 0:l.users)?C[e].users.concat(k):[k];w(e,t,n)}null==t||t.stopPropagation()};return(0,i.jsxs)(s.s,{direction:"row",cursor:"default",contentEditable:!1,onMouseDown:W.Fw,mb:v?"-".concat(v/1.5,"rem"):void 0,...b,children:[S&&(0,i.jsx)(D.Tz,{label:(0,i.jsx)(x.x6,{id:"W9FRBT"}),placement:ee,children:(0,i.jsx)(P.K,{colorScheme:n,float:"inline-start","aria-label":"",variant:"ghost",onClick:e=>{z("heart",e)},size:t,isRound:!0,mr:2,icon:(0,i.jsx)(g.g,{icon:m.qcK})})}),!f&&(0,i.jsx)(Q,{size:t,colorScheme:n,handleReactionClick:z,usePortal:o,placement:a}),A&&(0,i.jsx)(O.B,{spacing:"sm"===t?2:1,mr:2,className:"reactions-row",children:A&&Object.entries(C).map(e=>{let[a,o]=e,l=null==o?void 0:o.users,s=!!(null==l?void 0:l.find(e=>(null==e?void 0:e.id)===(null==k?void 0:k.id))),d=(0,H.gj)({users:l,selfUserId:null==k?void 0:k.id});return(0,i.jsx)(Z,{colorScheme:n,size:t,emoji:a,readOnly:f,label:(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(x.x6,{id:"mRnNF/",values:{usersLabel:d,emoji:a},components:{0:(0,i.jsx)(r.E,{as:"span",color:"gray.300"})}})}),count:null==l?void 0:l.length,hasSelfReacted:s,handleReactionClick:z},a)})})]})},en=v.memo(e=>{let{docId:t,reactions:n,cardId:a,commentId:r,size:o,parentCommentId:l,placement:s="right",usePortal:d=!0,userCanComment:c,...u}=e;return(0,i.jsx)(et,{size:o,cardId:a,usePortal:d,placement:s,reactions:n,parentCommentId:l,docId:t,commentId:r,targetType:y.yKx.Comment,readOnly:!c,...u})});var ei=n(6201),ea=n(78872),er=n(18201),eo=n(63341),el=n(18528),es=n(72821),ed=n(33683),ec=n(81575),eu=n(56005),ep=n.n(eu),eh=n(13166);let em=()=>({[y.EB6.Open]:{label:f.Ru._({id:"9ggh96"}),icon:m.SGM,successMessage:f.Ru._({id:"1INZuT"})},[y.EB6.Closed]:{label:f.Ru._({id:"pL38RI"}),icon:m.RVf,successMessage:f.Ru._({id:"gieGvY"})}}),eg=e=>{let{status:t,handleCommentStatusUpdate:n}=e;return(0,i.jsx)(D.Tz,{label:em()[t].label,"aria-label":em()[t].label,children:(0,i.jsx)(P.K,{variant:"ghost",size:"sm",borderRadius:"full",isDisabled:!1,"aria-label":em()[t].label,icon:(0,i.jsx)(g.g,{icon:em()[t].icon}),onClick:()=>n(t)})})},ex=e=>{let{comment:t,selfUser:n,isInPanel:o,isSourceContentAvailable:u,showCopyCommentLink:v,showLinkToTargetContent:b,hasCommentBeenUpdated:w,onTargetClick:j,commentUrl:k,isReply:C,userCanComment:S,handleCommentStatusUpdate:A,toastPosition:z,isEditing:I,handleEditCommentClick:R,handleDeleteCommentClick:E}=e,{user:L,createdTime:_,updatedTime:M,status:N=y.EB6.Open}=t,{email:T,displayName:O,profileImageUrl:F}=L,H=(null==n?void 0:n.id)===(null==L?void 0:L.id),{onCopy:W}=(0,ea.i)(k),B=(0,l.dU)("red.500","red.300"),V=(0,a.d)();return(0,i.jsxs)(p.z,{spacing:2,align:"top",mb:3,_before:o?{content:"''",position:"absolute",w:"9px",h:"9px",mt:"15px",insetStart:C?"12px":"36px",bg:"gray.100",borderRadius:"full"}:{},children:[(0,i.jsx)(D.Tz,{label:T,"aria-label":T,children:(0,i.jsx)(h.e,{mt:1,size:"sm",name:O,src:F,ignoreFallback:!0})}),(0,i.jsxs)(d.B,{align:"center",alignItems:"flex-start",spacing:0,mb:1,children:[(0,i.jsxs)(r.E,{fontWeight:"600",mb:0,fontSize:"sm",children:[O," ",H?(0,i.jsx)(x.x6,{id:"dDUgzP"}):null]}),(0,i.jsx)(s.s,{direction:"row",w:"100%",alignItems:"flex-start",children:(0,i.jsx)(c.az,{flex:"1",children:(0,i.jsx)(D.Tz,{isDisabled:!w,label:"Updated ".concat((0,eh.OG)(M)),placement:"top",children:(0,i.jsxs)(p.z,{children:[(0,i.jsx)(r.E,{my:"0 !important",className:"comment-date",fontSize:"xs",color:"gray.500",children:ep()((0,eh.OG)(_))}),w&&(0,i.jsx)(c.az,{color:"gray.500",children:(0,i.jsx)(g.g,{size:"xs",icon:m.ml2})})]})})})})]}),(0,i.jsx)(er.h,{}),(0,i.jsxs)(p.z,{spacing:1,children:[b&&(0,i.jsx)(D.Tz,{label:u?(0,i.jsx)(x.x6,{id:"LmLruJ"}):(0,i.jsx)(x.x6,{id:"/oHV5h"}),shouldWrapChildren:!0,children:(0,i.jsx)(P.K,{size:"sm",borderRadius:"full",variant:"ghost",isDisabled:!u,"aria-label":u?f.Ru._({id:"LmLruJ"}):f.Ru._({id:"/oHV5h"}),onClick:j,icon:(0,i.jsx)(g.g,{icon:m.vh1})})}),!C&&S&&(0,i.jsx)(eg,{status:N,handleCommentStatusUpdate:()=>A(t.status)}),(0,i.jsxs)(eo.W,{isLazy:!0,children:[(0,i.jsx)(el.I,{as:P.K,size:"sm",variant:"ghost",borderRadius:"full","data-testid":"comment-header-menu",icon:(0,i.jsx)(g.g,{fixedWidth:!0,icon:m.vHW}),children:(0,i.jsx)(x.x6,{id:"7L01XJ"})}),(0,i.jsx)(G.Z,{children:(0,i.jsxs)(es.c,{zIndex:"modal","data-testid":"comment-header-menulist",children:[v&&(0,i.jsx)(ed.D,{icon:(0,i.jsx)(g.g,{icon:m.CQO}),onClick:()=>{W(),V({title:f.Ru._({id:"h5GS+N"}),status:"success",duration:3e3,position:z})},children:(0,i.jsx)(x.x6,{id:"qhJCCi"})}),S&&!I&&H&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ec.N,{}),(0,i.jsx)(ed.D,{icon:(0,i.jsx)(g.g,{icon:m.MT7}),onClick:R,children:(0,i.jsx)(x.x6,{id:"ePK91l"})}),(0,i.jsx)(ed.D,{icon:(0,i.jsx)(g.g,{icon:m.yLS}),color:B,onClick:()=>{E()},"data-testid":"delete-thread",children:C?(0,i.jsx)(x.x6,{id:"FjzXBu"}):(0,i.jsx)(x.x6,{id:"xOviNB"})})]})]})})]})]})]})};var ef=n(4399);let ev=(0,v.memo)(e=>{let{comment:t,editor:n,selfUser:P,docId:O,commentIdToHighlight:D,userCanComment:F,instanceType:H,editorMode:W,isRootComment:B=!1,onClose:V,closePopup:G,...U}=e,K="feed"===H,q="drawer"===H,J=(0,_.Xb)()?"bottom":"top",{content:$,targetHtml:Y,targetId:Q,createdTime:X,updatedTime:Z,id:ee,replies:et,reactions:ea}=t,er=(0,b.wA)(),{initialDraftReply:eo,updateLocalDraftReply:el,hasLocalDraftReply:es}=(0,ei.p_)(ee),ed=(0,v.useRef)(new L.c),ec=D===ee,eu=(0,M.yO)({docId:O,id:ee}),ep=(0,v.useRef)(null),[eh,eg]=(0,v.useState)(!1),[eb,ey]=(0,v.useState)(B);(0,v.useEffect)(()=>{es&&!eb&&ey(!0)},[es,eb]);let[ew]=(0,y.eRM)(),[ej]=(0,y.DNM)(),[ek]=(0,y.roT)(),[eC]=(0,y.Ekg)(),eS=(0,a.d)(),eA=(0,w.O2)("editor"),ez=(0,v.useCallback)(()=>{eg(!0)},[]),eI=(0,v.useCallback)(()=>{el(null)},[el]),eR=[.25,.1,.25,1];(0,v.useLayoutEffect)(()=>{ec&&ep.current&&eA.scrollElementIntoView({element:ep.current})},[eA,ec]);let eE=e=>{let t=e===y.EB6.Open?y.EB6.Closed:y.EB6.Open,n={id:ee,docId:O,status:t};ek({variables:{input:n},update:(e,t)=>{let{data:n}=t,i={id:"Doc:".concat(O),fragment:E.Mi,fragmentName:"DocCommentsUpdate",data:{comments:[null==n?void 0:n.updateCommentStatus]}};e.writeFragment(i)},optimisticResponse:{updateCommentStatus:{...n,__typename:"Comment",updatedTime:new Date().toISOString()}}}).then(()=>{eS({title:(0,i.jsxs)(r.E,{children:[em()[e].successMessage,"."," ",(0,i.jsx)(o.N,{textDecoration:"underline",onClick:()=>eE(t),children:f.Ru._({id:"9uI/rE"})})]}),status:"success",duration:5e3,isClosable:!1,position:J})}).catch(e=>{console.error("[CommentComponent]: Error changing comment status",e),eS({title:f.Ru._({id:"+Q5eww",values:{0:e.message}}),status:"error",isClosable:!0,position:J})}).finally(()=>{"popup"===H&&G&&G(!0)})},eL=(0,l.dU)("yellow.100","yellow.800"),e_=T.q.getState(n.state),eM=(0,v.useMemo)(()=>null==e_?void 0:e_.annotations.find(e=>e.id===Q),[null==e_?void 0:e_.annotations,Q]),{pos:eN}=eM||{},eT=!!(null==eM?void 0:eM.pos),eP="notification"!==H&&t.id!==C.se,eO=("notification"===H||"feed"===H)&&eN!==C.S5,eD=(0,v.useCallback)(e=>{var t;if(!(!Q||!eM||!eN||(null==e?void 0:null===(t=e.target)||void 0===t?void 0:t.closest('[data-target-name="comment-target-expand-button"]')))){if("notification"===H)k.LF.emit(k.DN.OPEN_POPUP_COMMENT,{commentId:ee,highlightComment:!0});else if("feed"===H){let e=A.M2,t=(0,R.jB)(n,eN);if(W===N.w.DOC_VIEW)(0,S.Ib)({pos:eN,editor:n});else if(W===N.w.SLIDE_VIEW){let[t]=(0,R.TK)(n.state.doc.resolve(eN),z.jg);n.commands.spotlightCardById(t.node.attrs.id),er((0,I.mF)({attached:!1})),e=A.y0}(0,_.Xb)()&&V&&setTimeout(V,300),eA.scrollElementIntoView({element:t,delay:e})}}},[n,eA,Q,H,ee,eM,eN,W,er,V]),eF=(0,v.useMemo)(()=>new Date(Z).getTime()-new Date(X).getTime()>100,[Z,X]),eH=!!t.commentId,eW=!!et&&et.length>0;return(0,i.jsxs)(s.s,{flexDir:"column",ref:ep,id:"comment-".concat(ee),className:"comment highlight-mask","data-target-id":"comment-".concat(ee),borderRadius:ec?"md":"0px",position:"relative",borderBottomWidth:B?"1px":"0px",borderBottomColor:"gray.200",_after:K&&eW?{content:"''",position:"absolute",w:"9px",h:"9px",insetStart:"36px",bottom:9,bg:"gray.100",borderRadius:"full",transitionProperty:"common",transitionDuration:"normal"}:{},_before:eW&&K?{content:"''",position:"absolute",w:"3px",top:7,bottom:9,insetStart:"39px",bg:"gray.100",borderRadius:"full"}:{},...U,overflowY:"hidden",children:[(0,i.jsxs)(d.B,{backgroundColor:ec?eL:"auto",transitionProperty:"border, background",transitionDuration:"normal",transitionTimingFunction:"ease",role:"group",spacing:8,children:[(0,i.jsxs)(c.az,{ps:eH&&K?10:0,children:[(0,i.jsx)(ex,{isInPanel:K,comment:t,selfUser:P,isSourceContentAvailable:eT,showCopyCommentLink:eP,showLinkToTargetContent:eO,hasCommentBeenUpdated:eF,onTargetClick:eD,commentUrl:eu,isReply:eH,userCanComment:F,handleCommentStatusUpdate:eE,toastPosition:J,isEditing:eh,handleEditCommentClick:ez,handleDeleteCommentClick:()=>{let e=!!t.commentId;eC({variables:{id:ee},update:(n,i)=>{let{data:a}=i;n.writeFragment({id:"Doc:".concat(O),fragment:E.Mi,fragmentName:e?"DocRepliesRemove":"DocCommentsRemove",data:{comments:[e?{id:t.commentId,replies:[null==a?void 0:a.archiveComment],__typename:"Comment"}:null==a?void 0:a.archiveComment]}})},optimisticResponse:{archiveComment:{id:ee,__typename:"Comment",archived:!0}}}),!e&&t.targetId&&n.commands.deleteAnnotation(t.targetId),"popup"===H&&G&&G(!0),eS({title:f.Ru._({id:"Ho/Jvc"}),status:"success",duration:5e3,isClosable:!1,position:J})}}),(0,i.jsxs)(c.az,{ps:eW&&K?10:0,overflowY:"hidden",children:[Y&&Y.length&&(0,i.jsx)(ef.s,{targetHtml:Y,onTargetClick:eD,isSourceContentAvailable:eT,instanceType:H}),(0,i.jsx)(j.B,{initialContent:$,editable:eh,onCancelEditingClick:()=>eg(!1),saveButtonText:(0,i.jsx)(x.x6,{id:"yY7Bil"}),saveButtonIcon:(0,i.jsx)(g.g,{icon:m.e68}),onCommentSave:e=>{let n=!!t.commentId,i={id:ee,docId:O,content:e};ej({variables:{input:i},update:(e,i)=>{let{data:a}=i,r={id:"Doc:".concat(O),fragment:E.Mi,fragmentName:n?"DocRepliesUpdate":"DocCommentsUpdate",data:{comments:[n?{id:t.commentId,replies:[null==a?void 0:a.updateComment],__typename:"Comment"}:null==a?void 0:a.updateComment]}};e.writeFragment(r)},optimisticResponse:{updateComment:{...i,__typename:"Comment",updatedTime:new Date().toISOString()}}}),eS({title:f.Ru._({id:"kibWwZ"}),status:"success",duration:5e3,isClosable:!1,position:J}),eg(!1)}}),!eh&&(0,i.jsx)(en,{mt:2,docId:O,cardId:t.cardId,commentId:t.id,parentCommentId:t.commentId,reactions:ea,size:"sm",placement:"right",usePortal:!0,userCanComment:F})]})]}),et&&et.length>0&&et.map(e=>(0,i.jsx)(ev,{instanceType:H,userCanComment:F,commentIdToHighlight:D,comment:e,docId:O,selfUser:P,editor:n,editorMode:W,ps:0,p:0,pb:0},null==e?void 0:e.id))]}),F&&(0,i.jsxs)(u.S,{in:eb&&!eh,unmountOnExit:!0,transition:{enter:{when:"afterChildren",height:{duration:.3,ease:eR},opacity:{duration:.4,ease:eR}},exit:{when:"beforeChildren",height:{duration:.2,ease:eR},opacity:{duration:.3,ease:eR}}},children:[q&&(0,i.jsxs)(p.z,{align:"center",mb:3,pt:6,children:[(0,i.jsx)(h.e,{mt:1,size:"sm",name:null==P?void 0:P.displayName,src:null==P?void 0:P.profileImageUrl,ignoreFallback:!0}),(0,i.jsx)(d.B,{align:"center",alignItems:"flex-start",spacing:0,mb:1,children:(0,i.jsx)(r.E,{fontWeight:"600",mb:0,fontSize:"sm",children:(0,i.jsx)(x.x6,{id:"866PMb",values:{0:null==P?void 0:P.displayName}})})})]}),(0,i.jsx)(j.B,{ps:K&&eW?8:0,pt:q?0:6,initialContent:(null==eo?void 0:eo.json)||"",clearContentOnSave:!0,editable:!0,saveButtonText:(0,i.jsx)(x.x6,{id:"ImOQa9"}),saveButtonIcon:(0,i.jsx)(g.g,{icon:m.Eze}),placeholder:f.Ru._({id:"ImOQa9"}),onCommentSave:e=>{let n={targetId:t.targetId,commentId:ee,docId:O,content:e,cardId:t.cardId};ew({variables:{input:n},update:(e,t)=>{let{data:n}=t;e.writeFragment({id:"Doc:".concat(O),fragment:E.Mi,fragmentName:"DocRepliesCreate",data:{comments:[{id:ee,replies:[null==n?void 0:n.createComment],__typename:"Comment"}]}})},optimisticResponse:{createComment:{id:C.se,__typename:"Comment",...n,user:P,archived:!1,reactions:[],createdTime:new Date().toISOString(),updatedTime:new Date().toISOString()}}}),ey(!1),el(null),er((0,I.zq)({id:ee})),eS({title:f.Ru._({id:"yPok8v"}),status:"success",duration:5e3,isClosable:!1,position:J})},onCancelEditingClick:eI,onUpdate:e=>{let{editor:t}=e;el({commentId:ee,json:t.view.state.doc.toJSON(),text:t.view.state.doc.textContent})},onCreate:e=>{ed.current.resolve(e)},alwaysShowButtons:q,shouldFocus:"popup"===H&&!(0,_.Xb)()})]})]})})},37881:(e,t,n)=>{"use strict";n.d(t,{W:()=>o});var i=n(31085),a=n(70323),r=n(19893);let o=e=>{let{accessLink:t,doc:n,className:o,showDivider:l=!0}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.jI,{accessLink:t,doc:n,p:6,spacing:4,className:o}),l&&(0,i.jsx)(a.c,{})]})}},4399:(e,t,n)=>{"use strict";n.d(t,{s:()=>x});var i=n(31085),a=n(25420),r=n(80532),o=n(9021),l=n(20501),s=n(24221),d=n(9104),c=n(95640),u=n(12327),p=n(89897),h=n.n(p),m=n(14041),g=n(35015);let x=e=>{let{targetHtml:t,onTargetClick:n,isSourceContentAvailable:p,instanceType:x}=e,[f,v]=(0,m.useState)(!1),[b,y]=(0,m.useState)(!1),w=(0,m.useRef)(null),j=(0,g.EC)(),k=f?l.AeV:l.DqM,C=f?u.Ru._({id:"vLyv1R"}):u.Ru._({id:"fMPkxb"});return(0,m.useEffect)(()=>{var e;w.current&&y(!(!f&&w.current.scrollHeight<=(null===(e=w.current)||void 0===e?void 0:e.clientHeight)))},[f]),(0,i.jsxs)(a.s,{className:"block-target-html",ps:3,mb:2,borderInlineStartWidth:"4px",borderInlineStartStyle:"solid",borderInlineStartColor:"yellow.200",direction:"row",alignItems:"flex-end",cursor:p&&"feed"===x?"pointer":"auto",onClick:n,children:[(0,i.jsx)(d.Tz,{label:(0,i.jsx)(c.x6,{id:"/oHV5h"}),isDisabled:!("feed"===x&&!p),portalProps:{containerRef:j},children:(0,i.jsx)(r.az,{flex:1,ms:-3,ps:3,w:"100%",fontSize:"sm",noOfLines:f?void 0:3,dangerouslySetInnerHTML:{__html:t?h().sanitize(t):""},ref:w,_hover:{bgColor:"feed"===x?p?"yellow.100":"gray.100":void 0}})}),b&&(0,i.jsx)(d.Tz,{label:C,portalProps:{containerRef:j},children:(0,i.jsx)(o.K,{variant:"ghost",size:"xs","aria-label":C,icon:(0,i.jsx)(s.g,{icon:k}),onClick:()=>{v(e=>!e)},"data-target-name":"comment-target-expand-button",isRound:!0})})]})}},39225:(e,t,n)=>{"use strict";n.d(t,{h:()=>m});var i=n(31085),a=n(25420),r=n(62313),o=n(48574),l=n(35687),s=n(61778),d=n(95640),c=n(12327),u=n(45390),p=n(44507),h=n(4399);let m=e=>{let{draftComment:t,showUser:n=!0,showBorder:m=!0,user:g,onCommentDraftUpdate:x,onCommentSave:f,commentIdToHighlight:v,alwaysShowButtons:b=!1,...y}=e;return(0,i.jsxs)(a.s,{direction:"column",...y,children:[n&&(0,i.jsxs)(r.z,{mb:3,pt:3,children:[(0,i.jsx)(o.e,{src:null==g?void 0:g.profileImageUrl,size:"sm"}),(0,i.jsx)(l.B,{children:(0,i.jsx)(s.E,{fontWeight:"bold",fontSize:"sm",children:(0,i.jsx)(d.x6,{id:"866PMb",values:{0:null==g?void 0:g.displayName}})})})]}),t&&(null==t?void 0:t.targetHtml)&&(0,i.jsx)(h.s,{targetHtml:t.targetHtml}),(0,i.jsx)(u.B,{onUpdate:x,initialContent:(null==t?void 0:t.json)||null,clearContentOnSave:!0,editable:!0,saveButtonText:(0,i.jsx)(d.x6,{id:"26iNma"}),placeholder:c.Ru._({id:"UkDQUD"}),onCommentSave:f,showBorder:m,shouldFocus:!!(!(0,p.mG)()&&!v),alwaysShowButtons:b})]})}},79246:(e,t,n)=>{"use strict";n.d(t,{CD:()=>o,ol:()=>l,tq:()=>s});var i=n(96712),a=n(2156),r=n(76241);let o=(e,t,n)=>({targetId:a.D.generate(),targetHtml:n,json:null,text:"",relativePos:(0,i.JO)(t.state,e())}),l=(e,t,n,a)=>({...e,targetHtml:n,relativePos:(0,i.JO)(a.state,t())}),s=(e,t)=>Object.values(r._.getState(e.state).draftComments).filter(n=>(0,i.d_)(e.state,n.relativePos)===t)},6201:(e,t,n)=>{"use strict";n.d(t,{$w:()=>E,HQ:()=>P,Zb:()=>_,f0:()=>N,hx:()=>M,p_:()=>T,yU:()=>L});var i=n(32202),a=n(12327),r=n(13236),o=n(87809),l=n.n(o),s=n(40074),d=n.n(s),c=n(66652),u=n.n(c),p=n(46343),h=n.n(p),m=n(14041),g=n(32133),x=n(50877),f=n(64225),v=n(9335),b=n(5933),y=n(40201),w=n(19534),j=n(96712),k=n(57882),C=n(19463),S=n(44507),A=n(4912);let z=(0,S.Xb)()?"bottom":"top";function I(e){return e?e.reduce((e,t)=>(t.targetId&&(e[t.targetId]?e[t.targetId].push(t):e[t.targetId]=[t]),e),{}):null}let R=e=>e.filter(e=>!!e.spec.isAnnotation),E=e=>(0,f.GV)(t=>{let n=(0,b.Jo)(t),i=I(((null==n?void 0:n.comments)||[]).filter(e=>e.status===x.EB6.Open));if(!i)return[];let a=R(e);return u()(a,e=>{let{spec:t}=e;return i[t.id]}).filter(Boolean)},h()),L=e=>e.filter(e=>!!e.spec.isDraftComment).map(e=>e.spec.comment),_=e=>{let{draftComment:t,clearDraftComment:n,editor:o}=e,[l]=(0,x.eRM)(),s=(0,i.d)(),d=o.gammaDocId,{user:c}=(0,k.ur)();return e=>{var i;if(!t)return;let{relativePos:u,targetId:p}=t,h=(0,j.d_)(o.state,u);if(!h)throw Error("Could not save comment, null pos from relativePos");let m=(0,r.eL)(o.state.doc.resolve(h),w.jg),g=o.view.state.doc.nodeAt(h),f=t.targetHtml||(0,y.Lo)(g,["footnote","footnoteLabel","cardNotes"]),v=t.targetHtml||(0,y.V6)(g,["footnote","footnoteLabel","cardNotes"]);o.commands.addAnnotation({id:p,pos:h});let b={targetId:p,docId:d,cardId:null==m?void 0:null===(i=m.node)||void 0===i?void 0:i.attrs.id,content:e,targetHtml:f,targetText:v};l({variables:{input:b},update:(e,t)=>{let{data:n}=t;e.writeFragment({id:"Doc:".concat(d),fragment:C.Mi,fragmentName:"DocCommentsCreate",data:{comments:[null==n?void 0:n.createComment]}})},optimisticResponse:{createComment:{id:"temp-id",commentId:"",__typename:"Comment",...b,content:JSON.parse(JSON.stringify(e)),user:c,archived:!1,reactions:[],replies:[],status:x.EB6.Open,createdTime:new Date().toISOString(),updatedTime:new Date().toISOString()}}}),s({title:a.Ru._({id:"4kSebh"}),status:"success",duration:5e3,isClosable:!1,position:z}),n()}},M=(e,t)=>{(0,m.useEffect)(()=>{let n=!0,i=i=>{let{selectionPos:a,parentPos:r,text:o}=i;n&&e()===r&&t({targetHtml:o,getPos:()=>a})};return v.LF.on(v.DN.CREATE_COMMENT_FROM_SELECTION,i),()=>{v.LF.on(v.DN.CREATE_COMMENT_FROM_SELECTION,i),n=!1}},[e,t])},N=e=>{let{showComment:t,comments:n,blockAllowsCommenting:i,highlightDuration:a=4e3}=e,[r,o]=(0,m.useState)(null);return(0,m.useEffect)(()=>{let e=!0,r=r=>{let{commentId:l,highlightComment:s=!1}=r;if(!e||!i)return;let d=(0,A.J2)(n,l);d&&(t(d),s&&(o(l),setTimeout(()=>{e&&o(null)},a)))};return v.LF.on(v.DN.OPEN_POPUP_COMMENT,r),()=>{v.LF.off(v.DN.OPEN_POPUP_COMMENT,r),e=!1}},[n,i,a,t]),r},T=e=>{let t=(0,g.wA)(),n=(0,f.GV)((0,b.iZ)(e)),i=(0,m.useRef)(null),[a,r]=(0,m.useState)(!1),o=(0,m.useCallback)(e=>{i.current=e,r(!!e)},[]),l=(0,m.useCallback)(()=>{i.current=n,r(!!n)},[n]),s=(0,m.useCallback)(()=>{var n;if(!i.current||!(null===(n=i.current.text)||void 0===n?void 0:n.length)){t((0,b.zq)({id:e}));return}t((0,b.rR)({id:e,reply:i.current}))},[e,t]),d=(0,m.useRef)(s);return(0,m.useEffect)(()=>{d.current=s},[s]),(0,m.useEffect)(()=>(l(),()=>{d.current()}),[]),{hasLocalDraftReply:a,initialDraftReply:i.current,updateLocalDraftReply:o}},P=e=>(0,f.GV)(t=>{let n=(0,b.Jo)(t),i=I((null==n?void 0:n.reactions)||[]);if(!i)return[];let a=R(e),r=u()(a,e=>{let{spec:t}=e;return i[t.id]}).filter(Boolean),o=l()(r,"emoji"),s=[];for(let[e,t]of Object.entries(o)){let n=t.reduce((e,t)=>e+t.count,0);s.push({emoji:e,count:n,reactions:t})}return d()(s.filter(e=>e.count>0),"count").reverse()},h())},84003:(e,t,n)=>{"use strict";n.d(t,{Ey:()=>o,S5:()=>a,iq:()=>i,se:()=>r});let i="350px",a=1,r="temp-id",o=128},17119:(e,t,n)=>{"use strict";n.d(t,{CS:()=>u,Q4:()=>m,Ti:()=>c,U5:()=>g,Vo:()=>h,cE:()=>d,ek:()=>v,es:()=>x,nh:()=>f,rV:()=>p});var i=n(3583),a=n(54107),r=n(13236),o=n(77646),l=n(46896),s=n(65202);let d=e=>(0,o.jg)(e)||(0,o.sw)(e)||(0,l.p8)(e),c=(e,t)=>!(0,o.jg)(e)&&!(0,o.sw)(e)&&d(t),u=(e,t)=>{let n=null;return t.state.doc.descendants((t,i,a)=>{if(i>0&&!d(a)&&!d(t))return!1;!(0,o.jg)(t)&&d(a)&&e>=i&&e<i+t.nodeSize&&(n={node:t,pos:i,end:i+t.nodeSize})}),n},p=e=>{if(d(e.parent))return{pos:e.pos,node:e.nodeAfter};for(let t=e.depth;t>0;t--){let n=e.node(t);if(d(e.node(t-1)))return{pos:t>0?e.before(t):0,node:n}}return null},h=e=>{let{pos:t,from:n,to:i,editor:a}=e,{state:l}=a,d=s.q.getState(l);if(!d)return null;let c=(0,r.eL)(a.state.doc.resolve(t),o.jg),u=d.getAnnotationsBetween(l,n,i),p=c?d.getAnnotationsBetween(l,c.pos,c.pos+c.node.nodeSize).filter(e=>!u.find(t=>t.id===e.id)):[];return{inBlock:u,inCard:p,origNodePos:t}},m=e=>{let{dropPos:t,dropNode:n,dragging:r,side:o,tr:l,view:d}=e,c=s.q.getState(d.state);if(!c)return[];let u=c.getAnnotationsBetween(d.state,t,t+n.nodeSize),p=r.inBlock,h="left"===o?r.origNodePos:t,m="left"===o?t:r.origNodePos,{doc:g,type:x,binding:f}=i.pJ.getState(d.state),v=l.mapping.map(t),b=(e,t)=>n=>{let{id:i,relativePos:r}=n,o=(0,a.bL)(g,x,r,f.mapping);return null==o?null:{id:i,newPos:v+(o-e)+t}},y=[...("left"===o?p:u).map(b(h,1)).filter(e=>!!e),...("left"===o?u:p).map(b(m,2)).filter(e=>!!e)],w=r.inCard.filter(e=>{let{id:t}=e;return!y.find(e=>e.id===t)}).map(e=>{let{id:t,pos:n}=e,i=l.mapping.map(n);return n===i?null:{newPos:i,id:t}}).filter(e=>!!e);return[...y,...w]},g=e=>{let{dropPos:t,dropNode:n,dragging:r,side:o,tr:l,view:d,leftContentSize:c}=e,u=s.q.getState(d.state);if(!u)return[];let p=u.getAnnotationsBetween(d.state,t,t+n.nodeSize),h=r.inBlock,m="left"===o?r.origNodePos:t,g="left"===o?t:r.origNodePos,{doc:x,type:f,binding:v}=i.pJ.getState(d.state),b=l.mapping.map(t),y=(e,t)=>n=>{let{id:i,relativePos:r}=n,o=(0,a.bL)(x,f,r,v.mapping);return null==o?null:{id:i,newPos:b+(o-e)+t}},w=[...("left"===o?h:p).map(y(m,2)).filter(e=>!!e),...("left"===o?p:h).map(y(g,4+c)).filter(e=>!!e)],j=r.inCard.filter(e=>{let{id:t}=e;return!w.find(e=>e.id===t)}).map(e=>{let{id:t,pos:n}=e,i=l.mapping.map(n);return n===i?null:{newPos:i,id:t}}).filter(e=>!!e);return[...w,...j]},x=e=>{let{contentPos:t,contentEnd:n,insertPos:r,editor:o}=e,l=s.q.getState(o.state);if(!l)return[];let{state:d}=o,c=l.getAnnotationsBetween(d,t,n),{doc:u,type:p,binding:h}=i.pJ.getState(o.view.state);return c.map(e=>{let{id:n,relativePos:i}=e,o=(0,a.bL)(u,p,i,h.mapping);return null==o?null:{id:n,newPos:r+(o-t)}}).filter(e=>!!e)},f=e=>{let t,{dropPos:n,dragging:r,cardWrapOffset:o,tr:l,view:d}=e;if(!s.q.getState(d.state))return[];let{doc:c,type:u,binding:p}=i.pJ.getState(d.state),h=l.mapping.map(n,-1),m=r.inBlock.map((t=r.origNodePos,e=>{let{id:n,relativePos:i}=e,r=(0,a.bL)(c,u,i,p.mapping);return null==r?null:{id:n,newPos:h+(r-t)+o}})).filter(e=>!!e),g=r.inCard.filter(e=>{let{id:t}=e;return!m.find(e=>e.id===t)}).map(e=>{let{id:t,pos:n}=e,i=l.mapping.map(n);return n===i?null:{newPos:i,id:t}}).filter(e=>!!e);return[...m,...g]},v=e=>{let{pos:t,tr:n,editor:i}=e,a=s.q.getState(i.view.state);if(!a)return[];let r=i.state.doc.resolve(t);return r.nodeAfter?a.getAnnotationsBetween(i.state,t,t+r.nodeAfter.nodeSize).map(e=>{let{id:i,pos:a}=e;return{id:i,newPos:a===t?n.mapping.map(a+1)-1:n.mapping.map(a)}}):[]}},47687:(e,t,n)=>{"use strict";n.d(t,{a:()=>m,h:()=>g});var i=n(81313),a=n(13236),r=n(81570),o=n(73686),l=n(35002),s=n(95580);class d extends r.k_{removeOverlappingDecorations(e,t){let n=this.getDecorationsRanges(t),i=e.find(n.from,n.to).filter(e=>n.hasRange(e));return e.remove(i)}getDecorationsRanges(e){let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,i=new Set;return e.forEach(e=>{let{from:a,to:r}=e;a<t&&(t=a),r>n&&(n=r),i.add("".concat(a,":").concat(r))}),{from:t,to:n,hasRange:e=>{let{from:t,to:n}=e;return i.has("".concat(t,":").concat(n))}}}decorateDoc(e){let t=[];return e.descendants(this.decorateNode.bind(this,t)),o.zF.create(e,t)}processStep(e,t,n,i){let a=t.doc,r=t.mapping.slice(i+1),o=r.map("from"in e?e.from:e.pos),l="to"in e?r.map(e.to):o,s="slice"in e?e.slice.content.size:0;a.descendants((e,t,i,a)=>!(t+e.nodeSize<o)&&!(t>l+s)&&("document"===e.type.name||!i||this.decorateNode(n,e,t,i,a)))}constructor({key:e,decorateNode:t,options:n={}}){super({key:e,state:{init(e,t){let{doc:n}=t;return{decorations:this.decorateDoc(n)}},apply(e,t){var i,a;let r=null===(i=n.processEntireDoc)||void 0===i?void 0:i.call(n),o=null!==(a=n.shouldProcessStep)&&void 0!==a?a:s.Be,l=t.decorations;if(!e.steps.length&&!r)return{...t,decorations:l.map(e.mapping,e.doc)};if(r||(0,s.R3)(e))return{...t,decorations:this.decorateDoc(e.doc)};let d=[];e.steps.forEach((t,n)=>{if(o(t))return this.processStep(t,e,d,n)});let c=this.removeOverlappingDecorations(l.map(e.mapping,e.doc),d).add(e.doc,d);return{...t,decorations:c}}},props:{decorations:t=>{var n;return null===(n=e.getState(t))||void 0===n?void 0:n.decorations}}}),this.decorateNode=t}}var c=n(19534),u=n(17119),p=n(42849);function h(e,t,n,a,r){if((0,u.cE)(a)&&e.push(o.NZ.node(n,n+t.nodeSize,{},{isAnnotatable:!0})),(0,c.CD)(t))e.push(o.NZ.node(n,n+t.nodeSize,{class:(0,i.cx)("block","block-".concat(t.type.name),0===r&&"first-block",r===a.childCount-1&&"last-block")})),0===r&&((0,c.jg)(a)||(0,p.Eg)(a))&&e.push(o.NZ.node(n,n+t.nodeSize,{class:"first-block-in-card"},{isFirstBlockInCard:!0}));else{if(!t.isLeaf&&!t.isBlock)return!1;e.push(o.NZ.node(n,n+t.nodeSize,{class:"node-".concat(t.type.name)}))}return!0}let m=a.YY.create({name:"blockClass",addOptions:()=>({blockClass:"block"}),addProseMirrorPlugins:()=>[new d({key:new r.hs("blockClass"),decorateNode:h,options:{processEntireDoc:()=>!l.of.get("useTransactionBlockPlugin")}})]}),g=e=>!!e.find(e=>e.spec.isFirstBlockInCard)},65056:(e,t,n)=>{"use strict";n.d(t,{Q2:()=>d,mM:()=>u});var i=n(13236),a=n(81570),r=n(29097),o=n(98371),l=n(95580),s=n(71780);let d=new a.hs("menuBubble");class c{initialize(e){let{element:t,tippyOptions:n,panelLifecycle:i,onHide:a,targetElement:r}=e;if(!t){console.warn("[BubbleMenuView] initialize. No element provided");return}this.onHide=a,this.element=t,this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.view.dom.addEventListener("dragend",this.dragendHandler),this.view.dom.addEventListener("drop",this.dragendHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.createTooltip(n,r),this.element.style.visibility="visible",document.addEventListener("mousedown",this.mousedownDocumentHandler,!0),document.addEventListener("mouseup",this.mouseupDocumentHandler,!0),this.boundHideHandler=this.hide.bind(this),s.q.on("hide",this.boundHideHandler),i&&(this.cleanupPanelLifecycle=i.on("resize",()=>{var e;null===(e=this.tippy.popperInstance)||void 0===e||e.update()}))}createTooltip(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t||this.view.dom.parentElement;this.tippy=(0,r.Ay)(n,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle",...e}),this.editor.commands.command(e=>{let{tr:t}=e;return t.setMeta(d,{tippyInstance:this.tippy}),!0})}update(e,t){let n=t&&d.getState(t),a=d.getState(e.state),{state:r,composing:s}=e,{doc:c,selection:u}=r,h=t&&t.doc.eq(c)&&t.selection.eq(u)&&this.isEditable===this.editor.isEditable&&(null==n?void 0:n.forceHide)===a.forceHide;if(!this.element){if(!a.element)return;this.initialize(a)}if(this.isEditable=this.editor.isEditable,!this.editor.isEditable||!0===a.forceHide){this.hide();return}if(s||h)return;let{empty:m,ranges:g}=u,x=Math.min(...g.map(e=>e.$from.pos)),f=Math.max(...g.map(e=>e.$to.pos)),v=!c.textBetween(x,f).length&&(0,i.eE)(e.state.selection);if(m||v){let e=u.$anchor.marks().some(e=>"link"===e.type.name)||"button"===u.$anchor.parent.type.name,t=(0,i.Nx)(c,{from:x,to:f},e=>"emoji"===e.type.name);if(!e&&(null==t?void 0:t.length)===0){this.hide();return}}this.tippy.setProps({getReferenceClientRect:()=>{if(!(0,i.BQ)(e.state.selection))return(0,i.MG)(e,x,f);let t=e.nodeDOM(x);return t&&(0,o.sb)(t)?(p(t,".drag-handle")||p(t,"[data-content-reference]")||t).getBoundingClientRect():(0,i.MG)(e,x,f)}}),!this.isMouseDownOutsideMenu&&(0,l.We)(this.editor)&&this.show()}show(){this.tippy.show(),document.body.classList.add("formatting-menu-open")}hide(){this.onHide&&"function"==typeof this.onHide&&this.onHide(),this.tippy.hide(),document.body.classList.remove("formatting-menu-open")}destroy(){var e,t;null===(e=this.tippy)||void 0===e||e.destroy(),null===(t=this.element)||void 0===t||t.removeEventListener("mousedown",this.mousedownHandler),document.removeEventListener("mousedown",this.mousedownDocumentHandler,!0),document.removeEventListener("mouseup",this.mouseupDocumentHandler,!0),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler),this.boundHideHandler&&s.q.off("hide",this.boundHideHandler),this.cleanupPanelLifecycle&&this.cleanupPanelLifecycle()}constructor({editor:e,view:t}){this.preventHide=!1,this.mousedownDocumentHandler=e=>{this.element.contains(e.target)?this.isMouseDownOutsideMenu=!1:this.isMouseDownOutsideMenu=!0},this.mouseupDocumentHandler=()=>{this.isMouseDownOutsideMenu=!1,this.update(this.editor.view)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.dragendHandler=()=>{this.isMouseDownOutsideMenu=!1,setTimeout(()=>this.update(this.editor.view))},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=e=>{var t;let{event:n}=e;if(this.preventHide){this.preventHide=!1;return}(null==n?void 0:n.relatedTarget)&&(null===(t=this.element.parentNode)||void 0===t?void 0:t.contains(n.relatedTarget))||this.hide()},this.editor=e,this.isEditable=e.isEditable,this.view=t}}let u=i.YY.create({name:"bubbleMenu",addCommands:()=>({forceHideBubbleMenu:e=>t=>{let{tr:n}=t;return n.setMeta(d,{forceHide:e}),!0},refreshBubbleMenu:()=>e=>{var t;let{state:n}=e,{tippyInstance:i}=d.getState(n);return null==i||null===(t=i.popperInstance)||void 0===t||t.forceUpdate(),!0}}),addProseMirrorPlugins(){let{editor:e}=this;return[new a.k_({key:d,state:{init:()=>({element:null,forceHide:!1,onHide:()=>{},tippyOptions:{},tippyInstance:null}),apply(e,t){let n=e.getMeta(d);return n?{...t,...n}:t}},view:t=>new c({view:t,editor:e})})]}}),p=(e,t)=>{let n=e.querySelector(t),i=e.querySelector("[data-node-view-wrapper]");return n&&i&&(0,o.xX)(n,e,e=>e.hasAttribute("data-node-view-wrapper"))===i?n:null}},71780:(e,t,n)=>{"use strict";n.d(t,{q:()=>i});let i=new(n(36832)).b},16262:(e,t,n)=>{"use strict";n.d(t,{A3:()=>l,Tg:()=>o,_w:()=>r,i:()=>s});var i=n(20501),a=n(12327);let r=()=>({note:{name:a.Ru._({id:"KiJn9B"}),commandName:()=>a.Ru._({id:"Cq+sLh"}),description:a.Ru._({id:"ooy/OF"}),icon:i.jyJ,colorScheme:"accent"},info:{name:a.Ru._({id:"CE+M2e"}),commandName:()=>a.Ru._({id:"1E4ojF"}),description:a.Ru._({id:"NfbNtV"}),icon:i.iW_,colorScheme:"blue"},warning:{name:a.Ru._({id:"r6y+jM"}),commandName:()=>a.Ru._({id:"xb1fsI"}),icon:i.JAe,description:a.Ru._({id:"tpYgEx"}),colorScheme:"yellow"},caution:{name:a.Ru._({id:"VvjZ7K"}),commandName:()=>a.Ru._({id:"tC/T1p"}),description:a.Ru._({id:"nbib7S"}),icon:i.rfe,colorScheme:"red"},success:{name:a.Ru._({id:"zzDlyQ"}),commandName:()=>a.Ru._({id:"Vv+D/T"}),description:a.Ru._({id:"pqvop4"}),icon:i.SGM,colorScheme:"green"},question:{name:a.Ru._({id:"bfgr/e"}),commandName:()=>a.Ru._({id:"Ev0Vqt"}),description:a.Ru._({id:"IsUqRH"}),icon:i.wRm,colorScheme:"gray"}}),o=e=>r()[e]||r().note,l=()=>Object.entries(r()).map(e=>{let[t,{commandName:n,icon:i}]=e;return{key:"calloutBox-".concat(t),name:n,nodeName:"calloutBox",icon:i,shortcut:"/".concat(t),keywords:["callout","box"],execute:e=>e.chain().focus().insertContent([{type:"calloutBox",attrs:{variant:t},content:[{type:"paragraph"}]}]).run()}}),s=()=>Object.fromEntries(Object.keys(r()).map(e=>["calloutBox-".concat(e),{type:"calloutBox",attrs:{variant:e},content:[{type:"paragraph"}]}]))},34821:(e,t,n)=>{"use strict";n.d(t,{q:()=>i});let i=e=>"calloutBox"===e.type.name},58432:(e,t,n)=>{"use strict";n.d(t,{Y:()=>en});var i=n(99070),a=n(31085),r=n(56824),o=n(25420),l=n(74727),s=n(80853),d=n(94259),c=n(61778),u=n(18651),p=n(80532),h=n(20501),m=n(24221),g=n(95640),x=n(14041),f=n(15355),v=n(71197),b=n(86984),y=n(65184),w=n(64225),j=n(7441),k=n(55090),C=n(39087),S=n(35459),A=n(2696),z=n(87122),I=n(26190),R=n(13236),E=n(14452),L=n(63587),_=n(65449),M=n(87064),N=n(21450),T=n(19717),P=n(57267),O=n(43125),D=n(5933),F=n(57882),H=n(42849),W=n(59710),B=n(370);let V=(e,t)=>{let n=e.node.attrs,i=t.content.find(e=>"cardAccentLayoutItem"===e.type);return i&&"none"!==n.background.type&&(i.attrs={...i.attrs,...n}),t},G=e=>{var t;let{editor:n,start:i,cardId:a,card:r}=e,o=(0,w.GV)(D.Jo),l=(0,w.GV)(D.SJ),s=(0,O.lI)(n),d=(0,O.zK)(s),c=n.state.doc.resolve(i),[u]=(0,x.useState)(r),p=(0,w.CU)(),h=(0,w.GV)((0,I.dJ)(a)),m=(0,w.GV)((0,I.gR)(a)),g=(0,w.GV)((0,I.rT)(a)),f=(0,w.jL)(),[v,b]=(0,x.useState)(null),y=(0,w.GV)(D.Uu),j=(null==o?void 0:o.organization)?(0,F.bs)(o.organization.id):void 0,k=(null==j?void 0:j.id)||(null==o?void 0:null===(t=o.organization)||void 0===t?void 0:t.id),{imageProvider:C,imageModel:S,imageStyle:A}=(0,W.V)(),_=(0,x.useCallback)(async e=>{let{variantsWithHtml:t,docId:n}=e,i=[...t];for(let e=0;e<t.length;e++){let a=t[e];if(!a||!a.isGenerating||!a.html||!k)continue;let s=await (0,N.Lm)(a.html,{docFormatKey:d,loadImages:!1,context:{workspaceId:k,docId:n},imageOptions:{provider:C,model:S,generateStyle:A},theme:l});s.attrs=(0,z.p5)(null==r?void 0:r.attrs,s.attrs);let u=(0,H.l0)(c).accent;if(u&&(s=V(u,s)),"placeholder"!==C&&o){let e=(0,R._w)((0,P.C)());await (0,N.ST)(s,e,{docId:o.id,workspaceId:k})}i[e]={...a,card:s,isGenerating:!1}}return i},[k,d,C,S,A,l,null==r?void 0:r.attrs,c,o]),B=(0,x.useCallback)(e=>{if(!o){console.error("[GenerateCardLayoutVariants] Cannot generate variants. Card or workspace unknown");return}let t=(0,E.dg)(e),[i,...r]=(0,I.dJ)(a)(p.getState()),l=[],s=r.map((e,n)=>{let i=t[n]||null,a={...e,html:e.html?e.html:i};return i&&!e.html&&l.push(a),a});f((0,I.bL)({cardId:a,variants:[i,...s]})),_({variantsWithHtml:l,docId:o.id}).then(e=>{let i=(0,I.dJ)(a)(p.getState()).map(t=>{let n=e.find(e=>e.id===t.id);return n?{...t,...n}:t});if(f((0,I.bL)({cardId:a,variants:i})),1===t.length){f((0,I.Ye)({cardId:a,selectedVariantId:i[1].id}));try{(0,z.ck)(n,a,{...i[1].card,attrs:{...i[1].card.attrs,id:a}})}catch(e){console.error("[GenerateCardLayoutVariants] Error replacing card with variant",e)}}})},[a,f,o,n,_,p]),G=(0,x.useCallback)(async()=>{if(!u||!k){console.error("[GenerateCardLayoutVariants] Cannot generate variants. Card or workspace unknown");return}f((0,I.Z_)({card:u,docSettings:y}));try{let e=(0,L.K)(n,u),t=(0,M.$F)();b(t);let i=U({onContent:B,inputHtml:e,format:d,imageProvider:C||"none",workspaceId:k,aiInteractionId:t});(0,T.w)("editCard",j,t),await i}catch(e){console.error("[GenerateCardLayoutVariants] Error generating card variants",e)}},[u,k,f,y,n,B,d,C,j]),K=(0,x.useCallback)(()=>{let e=h.find(e=>"original"===e.id);e&&(f((0,I.Ye)({cardId:a,selectedVariantId:e.id})),(0,z.ck)(n,a,e.card))},[n,a,h,f]);return{generateCardLayoutVariants:G,variants:h,selectedVariantId:m,setSelectedVariantId:I.Ye,revertToOriginalCard:K,interactionId:v,editorContent:g}},U=e=>{let{onContent:t,inputHtml:n,format:i,imageProvider:a,workspaceId:r,aiInteractionId:o}=e,{promise:l}=(0,_.i4)({promptKey:"GenerateCardLayoutVariants",opts:{onContent:t},variables:{inputHtml:n,request:"I dont like this template. Try a different layout or visualization. You can rephrase the text to fit a new template, but don't alter the original voice or make up new details.",format:i,numberOfVariants:B.M,imageProvider:a},workspaceId:r,interactionId:o});return l};var K=n(55746),q=n(21325),J=n(1935),$=n(15890);let Y=x.memo(e=>{let{item:t,isSelected:n,onClick:i,label:r,interactionId:l}=e,s=t.isGenerating,{ref:d,width:c}=(0,J.Lh)();return(0,a.jsxs)(o.s,{ref:d,direction:"column",onClick:i,cursor:"pointer",position:"relative",w:"100%",my:2,css:{"--editor-width":"".concat(c&&1!==c?c:365,"px"),"--line-thickness":"1px"},minHeight:"150px",children:[s&&(0,a.jsx)(Q,{}),(0,a.jsxs)(o.s,{borderRadius:"md",border:"1px solid",borderColor:n?"trueblue.500":"gray.200",outline:n?"1px solid var(--chakra-colors-trueblue-500)":"none",_hover:{borderColor:n?"trueblue.600":"trueblue.300"},boxShadow:"md",overflow:"hidden",role:"group",visibility:s?"hidden":"visible",height:s?"0px":"auto",transitionProperty:"height border",transitionDuration:"0.2s",children:[(0,a.jsx)(o.s,{position:"absolute",top:4,insetEnd:4,bgColor:"trueblue.50",color:"trueblue.600",borderRadius:"md",px:2,py:1,zIndex:B.Ob,fontSize:"xs",border:"1px solid",borderColor:"trueblue.200",children:r}),"original"!==t.id&&(0,a.jsx)(o.s,{position:"absolute",insetEnd:4,bottom:4,zIndex:B.Ob,opacity:0,transitionProperty:"opacity",transitionDuration:"0.2s",_groupHover:{opacity:1},children:(0,a.jsx)($.E,{interactionId:l||"",operation:"layout.different",RatingButtons:K.Ep})}),(0,a.jsx)(q.N,{cardId:t.id})]})]})});Y.displayName="VariantCard";let Q=()=>(0,a.jsx)(o.s,{position:"absolute",inset:0,zIndex:1,w:"100%",h:"150px",minHeight:"150px",borderRadius:"md",align:"center",justify:"center",mb:4,children:(0,a.jsxs)(o.s,{bg:"gradient.secondary-light",h:"100%",borderRadius:"md",mx:4,align:"center",justify:"center",children:[(0,a.jsx)(u._,{src:"/images/ai_sparkle_small.gif",alt:"AI sparkles",objectFit:"cover",width:282,height:280,boxSize:"45px",zIndex:1}),(0,a.jsx)(p.az,{bg:"gradient.secondary-light",bgSize:"cover",bgPosition:"center center",borderRadius:"inherit",pos:"absolute",inset:0,pointerEvents:"none",w:"100%",zIndex:0})]})}),X=Object.assign(e=>{let{selectedCardRange:t,closePanel:n,cardId:i,editor:r}=e;return((0,A.lC)(r,!0),(0,x.useEffect)(()=>{var e;let i=null==r?void 0:null===(e=r.state.selection)||void 0===e?void 0:e.from,{from:a,to:o}=t||{};if(!a||!o||!i){n();return}i===a||i>a&&i<o||n()},[null==r?void 0:r.state.selection,t,n]),r&&i&&t)?(0,a.jsx)(Z,{closePanel:n,editor:r,selectedCardPos:t.from,selectedCardId:i}):null},{panelPosition:"right",panelName:"CardLayoutVariants",canCollapse:!1,minWidth:400}),Z=x.memo(e=>{let{closePanel:t,editor:n,selectedCardPos:i,selectedCardId:u}=e,p=(0,w.GV)((0,I.dJ)(u)),C=(0,w.GV)((0,I.gR)(u)),S=(0,w.GV)((0,I.rT)(u)),A=(0,w.jL)(),R=(0,v.tO)(void 0,"editCard",k.VV.GAMMA_UPSELL_CALLOUT_AI_CREDITS_GENERATE_CARD),E=n.view.state.doc.nodeAt(null!=i?i:0),{generateCardLayoutVariants:L,revertToOriginalCard:_,interactionId:M}=G({editor:n,start:null!=i?i:0,cardId:u,card:E}),N=(0,x.useMemo)(()=>p.some(e=>e.isGenerating),[p]),T=(0,x.useCallback)(async()=>{if(!R()){t();return}await L()},[R,L,t]);(0,x.useEffect)(()=>{T()},[]),(0,x.useEffect)(()=>()=>{C&&(null===j.z||void 0===j.z||j.z.track(k.VV.AI_CARD_VARIATION_KEPT,{cardId:u,variantId:C,isOriginal:"original"===C,interactionId:M,source:"layout-panel"}))},[u,C,M,p]);let P={bgColor:(0,r.dU)("white","gray.900"),textColor:(0,r.dU)("gray.900","white")},O=(0,x.useCallback)(e=>{let t=p.find(t=>t.id===e);t&&(A((0,I.Ye)({cardId:u,selectedVariantId:t.id})),(0,z.ck)(n,u,t.card))},[u,p,n,A]),D={dropdownBgColor:(0,r.dU)("blackAlpha.100","whiteAlpha.100"),dropdownBgHoverColor:(0,r.dU)("blackAlpha.300","whiteAlpha.300"),dropdownTextColor:(0,r.dU)("gray.900","white")};return(0,a.jsx)(b.Z,{bgColor:P.bgColor,w:"100%",pt:4,children:(0,a.jsxs)(o.s,{direction:"column",overflowX:"hidden",w:"100%",h:"100%",children:[(0,a.jsxs)(o.s,{position:"relative",pb:1,px:4,children:[(0,a.jsx)(o.s,{flex:1,children:(0,a.jsx)(y.N,{children:(0,a.jsx)(g.x6,{id:"jVFRe1"})})}),(0,a.jsxs)(l.e,{spacing:0,children:["original"!==C&&(0,a.jsx)(s.$,{size:"sm",onClick:_,variant:"ghost",leftIcon:(0,a.jsx)(m.g,{icon:h.LxC,size:"sm"}),children:(0,a.jsx)(g.x6,{id:"9uI/rE"})}),(0,a.jsx)(d.J,{onClick:t})]})]}),!N&&(0,a.jsxs)(o.s,{px:4,gap:2,pb:2,align:"center",children:[(0,a.jsx)(c.E,{fontSize:"xs",color:"gray.500",children:(0,a.jsx)(g.x6,{id:"GhS4Yn"})}),(0,a.jsxs)(s.$,{size:"xs",leftIcon:(0,a.jsx)(m.g,{icon:h.rhK}),textAlign:"start",bgColor:D.dropdownBgColor,color:D.dropdownTextColor,borderRadius:"md",px:2,_hover:{bgColor:D.dropdownBgHoverColor},onClick:()=>{T()},children:[(0,a.jsx)(g.x6,{id:"fMPkxb"}),(0,a.jsx)(f.G,{type:"editCard",colorScheme:"blackAlpha",color:"blackAlpha.600",fontSize:"xs",ms:2,px:0})]})]}),(0,a.jsx)(ee,{variants:p,editorContent:S,handleSelectVariant:O,selectedVariantId:C,interactionId:M,anyVariantsGenerating:N})]})})}),ee=x.memo(e=>{let{variants:t,editorContent:n,handleSelectVariant:i,selectedVariantId:r,interactionId:l,anyVariantsGenerating:s}=e;return n?(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(o.s,{overflowY:"auto",direction:"column",h:"100%",flex:1,children:[s&&(0,a.jsxs)(o.s,{px:4,py:2,borderRadius:"md",align:"center",gap:1,color:"deepocean.900",fontWeight:"bold",alignItems:"center",children:[(0,a.jsx)(c.E,{fontSize:"xs",children:(0,a.jsx)(g.x6,{id:"yARg1X"})}),(0,a.jsx)(u._,{src:"/images/ai_sparkle_small.gif",alt:"AI sparkles",objectFit:"cover",width:282,height:280,boxSize:"20px",zIndex:1})]}),(0,a.jsx)(p.az,{h:"100%",overflowY:"auto",children:(0,a.jsx)(C.q,{initialContent:n,children:(0,a.jsx)(et,{variants:t,interactionId:l,selectedVariantId:r,handleSelectVariant:i})})})]})}):null});ee.displayName="CardLayoutVariantsList";let et=x.memo(e=>{let{variants:t,interactionId:n,selectedVariantId:i,handleSelectVariant:r}=e,{editor:l}=(0,S.U)();return(0,x.useEffect)(()=>{t.forEach(e=>{if(!l||e.isGenerating)return;let t={...e.card,attrs:{...e.card.attrs,id:e.id}};(0,z.ck)(l,e.id,t)})},[t,l]),(0,a.jsx)(o.s,{direction:"column",w:"100%",px:4,children:t.map(e=>(0,a.jsx)(Y,{interactionId:n,label:"original"===e.id?(0,a.jsx)(o.s,{children:(0,a.jsx)(c.E,{children:(0,a.jsx)(g.x6,{id:"HxF6Fk"})})}):(0,a.jsxs)(o.s,{align:"center",gap:1,children:[(0,a.jsx)(m.g,{icon:h.p7g,size:"xs"}),(0,a.jsx)(c.E,{children:(0,a.jsx)(g.x6,{id:"isRobC"})})]}),item:e,isSelected:i===e.id,onClick:()=>{r(e.id)}},e.id))})});et.displayName="CardLayoutVariantsPreviewList";let en=()=>{let{togglePanel:e,isPanelOpen:t}=(0,i.ww)(X);return{toggleCardLayoutVariantsPanel:e,isCardLayoutVariantsPanelOpen:t}}},61409:(e,t,n)=>{"use strict";n.d(t,{q:()=>i});let i=10},77633:(e,t,n)=>{"use strict";n.d(t,{B:()=>d,s:()=>s});var i=n(82438),a=n.n(i),r=n(69086),o=n(14691),l=n(61409);let s=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.q;return a()([e,...t]).slice(0,n)},d=e=>{try{let t=r.x.getItem(o.E.recentlyUsedCardTemplateIds),n=t?JSON.parse(t):[];if(Array.isArray(n)&&n.every(e=>"string"==typeof e)){let t=s(e,n);r.x.setItem(o.E.recentlyUsedCardTemplateIds,JSON.stringify(t))}}catch(e){}}},14661:(e,t,n)=>{"use strict";n.d(t,{Ed:()=>h,bI:()=>u,eW:()=>p});var i=n(31085),a=n(74727),r=n(9021),o=n(80532),l=n(25420),s=n(9104),d=n(49964),c=n(68109);let u=["blank","top","left","right","behind"],p=e=>{let{layout:t,editor:n,getPos:o,edgeLayoutsEnabled:l}=e,p=(0,c._)(n,o()),m=u.filter(e=>l||["blank","behind"].includes(e));return(0,i.jsx)(a.e,{mb:2,dir:"ltr",children:m.map(e=>{let n=(0,d.Nu)(e);return(0,i.jsx)(s.Tz,{label:n,placement:"top",children:(0,i.jsx)(r.K,{"aria-label":n,flex:1,variant:"plain",size:"md",onClick:()=>p(e),icon:(0,i.jsx)(h,{layout:e,isSelected:t===e}),boxShadow:"none",background:t===e?"trueblue.50":"white"})},e)})})},h=e=>{let{layout:t,isSelected:n}=e,a=n?"trueblue.400":"gray.300",r=null;return"top"===t?r=(0,i.jsx)(o.az,{height:"0.375rem",width:"100%",background:a}):"left"===t?r=(0,i.jsxs)(l.s,{height:"100%",minH:"100%",children:[(0,i.jsx)(o.az,{width:"0.625rem",minH:"100%",background:a}),(0,i.jsx)(o.az,{flex:"1",minH:"100%"})]}):"right"===t&&(r=(0,i.jsxs)(l.s,{height:"100%",minH:"100%",children:[(0,i.jsx)(o.az,{flex:"1",minH:"100%"}),(0,i.jsx)(o.az,{width:"0.625rem",minH:"100%",background:a})]})),(0,i.jsx)(o.az,{boxSizing:"border-box",height:"1.25rem",width:"1.75rem",border:"2px solid",borderRadius:"sm",borderColor:a,background:"behind"===t?a:"none",children:r})}},44751:(e,t,n)=>{"use strict";n.d(t,{Q:()=>s});var i=n(64225),a=n(1771),r=n(5933),o=n(38684),l=n(26813);let s=e=>{var t;let{editor:n,attrs:s,getPos:d}=e,c=(0,i.GV)(r.SJ);return{currentColor:(0,o.gK)(null===(t=s.container)||void 0===t?void 0:t.background),themeCardColor:(0,a.Oq)(c),setCardColor:e=>{let{container:t}=s,i=e?{background:{type:l.h.COLOR,color:{hex:e}}}:{background:void 0};void 0!==t.isDark&&(i.isDark=void 0),n.commands.updateNestedAttributesAtPos(d(),{container:{...t,...i}})}}}},68109:(e,t,n)=>{"use strict";n.d(t,{_:()=>o});var i=n(14041),a=n(10458),r=n(94562);let o=(e,t)=>{let n=(0,r.F)(),o=(0,a.st)();return(0,i.useCallback)(i=>{"blank"===i?e.commands.setCardLayout(t,i):e.commands.setCardLayout(t,i,n),null==o||o.track(a.VV.CARD_LAYOUT_UPDATED,{source:"card-styling-menu",layout:i})},[e,t,n,o])}},71957:(e,t,n)=>{"use strict";n.d(t,{G:()=>A,O:()=>S});var i=n(31085),a=n(55276),r=n(14608),o=n(59742),l=n(9746),s=n(65446),d=n(34363),c=n(62313),u=n(18201),p=n(18658),h=n(90290),m=n(69648),g=n(95640),x=n(14041),f=n(86416),v=n(64225),b=n(46511),y=n(40351),w=n(36830),j=n(26813),k=n(24293),C=n(94984);let S=()=>{let{isOpen:e,onOpen:t,onClose:n}=(0,a.j)(),[i,r]=(0,x.useState)(0),o=(0,x.useCallback)(e=>{t(),r(e)},[t]),l=(0,v.jL)();return{openBackgroundTab:(0,x.useCallback)(function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];e&&l((0,C.lj)()),o(0)},[l,o]),openStylesTab:(0,x.useCallback)(()=>{o(1)},[o]),isOpen:e,onClose:n,tabIndex:i,setTabIndex:r}},A=(0,x.memo)(function(e){let{editor:t,isOpen:n,onClose:a,background:v,updateNestedAttributes:C,tabIndex:S,setTabIndex:A,backFrom:z,isAccentImageDrawer:I=!1}=e,R=(0,w.N)(t),E=(0,x.useCallback)(()=>{0!==S&&A(0),a()},[a,S,A]),L=(0,b.o)(),_=I?k.lK.accentImage():k.lK.cardBackground(),M=(0,x.useCallback)(e=>!I||e.backgroundType!==j.h.NONE,[I]);return(0,i.jsxs)(r._,{trapFocus:!1,isOpen:n,placement:"right",onClose:E,size:L,blockScrollOnMount:!1,children:[(0,i.jsx)(o.m,{background:"none"}),(0,i.jsxs)(l.z,{onKeyDown:R,"data-in-editor-focus":!0,"data-edit-background-drawer":!0,"data-testid":"card-style-drawer",children:[(0,i.jsx)(s.s,{}),(0,i.jsx)(d.r,{fontSize:"x-large",children:(0,i.jsxs)(c.z,{me:7,children:[(0,i.jsx)(g.x6,{id:"xYilR2"}),(0,i.jsx)(u.h,{}),v.type===j.h.IMAGE&&v.image&&I&&(0,i.jsx)(f.V,{onClick:E,image:v.image,backFrom:z})]})}),(0,i.jsx)(p.c,{overflowX:"hidden",sx:{scrollbarGutter:"stable"},display:"flex",flexDirection:"column",pt:0,children:(0,i.jsx)(y.A,{editor:t,updateNestedAttributes:C,background:v,defaultMessage:(0,i.jsxs)(h.F,{children:[(0,i.jsx)(m._,{}),_]}),isDark:!1,isValidSource:M})})]})]})})},7225:(e,t,n)=>{"use strict";n.d(t,{H0:()=>c,Jz:()=>s,Kn:()=>d});var i=n(20501),a=n(12327),r=n(87809),o=n.n(r),l=n(35002);let s=[{key:"rephrase.better",label:()=>a.Ru._({id:"WLqWVj"}),instructions:"Improve the writing",icon:i.xXs,group:"writing",loadingMessage:()=>a.Ru._({id:"OxbbYn"}),variationName:()=>a.Ru._({id:"5j51A1"}),completionMessage:()=>a.Ru._({id:"EF1nyz"})},{key:"edit.spelling",label:()=>a.Ru._({id:"kIRRvo"}),instructions:"Fix spelling & grammar",icon:i.e68,group:"writing",loadingMessage:()=>a.Ru._({id:"vLjsO9"}),variationName:()=>a.Ru._({id:"MRZxAn"}),completionMessage:()=>a.Ru._({id:"3G04Qf"})},{key:"edit.translate",label:()=>a.Ru._({id:"pi8x/S"}),instructions:"",icon:i.mh,group:"writing",loadingMessage:()=>a.Ru._({id:"aKSJTV"}),variationName:()=>a.Ru._({id:"a/ppJp"}),completionMessage:()=>a.Ru._({id:"a/ppJp"})},{key:"rephrase.expand",label:()=>a.Ru._({id:"rRLXT4"}),instructions:"Make this longer",icon:i.ckx,group:"writing",loadingMessage:()=>a.Ru._({id:"Q+x/E4"}),variationName:()=>a.Ru._({id:"pvJgUJ"}),completionMessage:()=>a.Ru._({id:"jgdqxQ"})},{key:"rephrase.condense",label:()=>a.Ru._({id:"xTY2A5"}),instructions:"Make this more concise. Dont change the layout or images, only change the writing within the existing template.",icon:i.Nby,group:"writing",loadingMessage:()=>a.Ru._({id:"BjuYlr"}),variationName:()=>a.Ru._({id:"Q7U9iz"}),completionMessage:()=>a.Ru._({id:"l7sxzR"})},{key:"rephrase.simplify",label:()=>a.Ru._({id:"Lx/Sd1"}),instructions:"Simplify the language",icon:i.vq5,group:"writing",loadingMessage:()=>a.Ru._({id:"AAhoH1"}),variationName:()=>a.Ru._({id:"nvmoB1"}),completionMessage:()=>a.Ru._({id:"5xpG46"})},{key:"rephrase.specifics",label:()=>a.Ru._({id:"u6rs0A"}),instructions:"Rewrite this to be more specific. Use the previous text and the outline for context. If you don't have enough details, make them up.",icon:i.g0Y,group:"writing",loadingMessage:()=>a.Ru._({id:"HW6L/y"}),variationName:()=>a.Ru._({id:"PRHEO1"}),completionMessage:()=>a.Ru._({id:"dib9YI"})},{key:"rephrase.bullets",label:()=>a.Ru._({id:"5bPd7Z"}),instructions:"Rewrite this information in a bullet format, using UL/OL/LI tags not the BULLETS block. Do not remove or add any new information.",template:"bullets",icon:i.ITF,group:"writing",loadingMessage:()=>a.Ru._({id:"+cj1qu"}),variationName:()=>a.Ru._({id:"RYtHky"})},{key:"rephrase.sections",label:()=>a.Ru._({id:"5J92Ft"}),instructions:"Break this information into multiple parts with different headings. Make sure each heading describes the content below it. Do not remove or add any new information, and try to preserve other formatting and images.",icon:i.AmE,group:"writing",loadingMessage:()=>a.Ru._({id:"+cj1qu"}),variationName:()=>a.Ru._({id:"R4OWFD"})},{key:"rephrase.summary",label:()=>a.Ru._({id:"t+4LyJ"}),instructions:"Understand the content of the slide and place a summary at the start of the slide that captures key points for the user to grasp on a high level. The content of the summary should be concise and must not come close to or exceed the level of content of the rest of the slide. The summary should be placed in a blockquote element.",icon:i.R9H,group:"writing",loadingMessage:()=>a.Ru._({id:"3NNCjl"}),variationName:()=>a.Ru._({id:"3eR5HO"})},{key:"layout.different",label:()=>a.Ru._({id:"gyYxFM"}),instructions:"I dont like this template. Try a different layout or visualization. You can rephrase the text to fit a new template, but don't alter the original voice or make up new details.",icon:i.i7d,group:"layout",loadingMessage:()=>a.Ru._({id:"cEGrM6"}),variationName:()=>a.Ru._({id:"kLEOtI"}),checkEnabled:()=>!l.of.get("generateCardLayoutVariants")},{key:"layout.visual",label:()=>a.Ru._({id:"gcHjj/"}),instructions:"I want to make this content more visual. Make up new images to illustrate the concepts. You can rephrase the text to fit the new template, but don't alter the original voice or make up new details",template:"imagesWithText",icon:i.Si7,group:"layout",loadingMessage:()=>a.Ru._({id:"hMtOFm"}),variationName:()=>a.Ru._({id:"p0QPRq"})},{key:"layout.addImage",label:()=>a.Ru._({id:"LfOSf5"}),instructions:"Make up a new image to illustrate the concepts. If there is already a primary image or a placeholder, keep it. Regardless, add a new image using an image-layout or COLUMNS. Keep the rest of my content and formatting the same. Don't change layout blocks or make up new details. Do not remove any of the text!",icon:i.Cyq,group:"layout",loadingMessage:()=>a.Ru._({id:"hMtOFm"}),variationName:()=>a.Ru._({id:"2ap0Xm"})},{key:"layout.replaceImage",label:()=>a.Ru._({id:"LJrP+M"}),instructions:"Remove all existing images and add a new image for each removed image that matches the content of the card. You can rephrase the text to fit the new template, but don't alter the original voice or make up new details. Do not remove any of the text!",icon:i.yvG,group:"layout",loadingMessage:()=>a.Ru._({id:"hMtOFm"}),variationName:()=>a.Ru._({id:"KH0ZqR"})},{key:"layout.timeline",label:()=>a.Ru._({id:"UrX5Wc"}),instructions:"Reformat this as a timeline",template:"timeline",icon:i.v6v,group:"layout",loadingMessage:()=>a.Ru._({id:"+tf05m"}),variationName:()=>a.Ru._({id:"cklVjM"}),checkEnabled:()=>!l.of.get("generateCardLayoutVariants")}],d=o()(s,"group"),c=[{key:"writing",label:()=>a.Ru._({id:"4kJRen"})},{key:"layout",label:()=>l.of.get("generateCardLayoutVariants")?a.Ru._({id:"an5hVd"}):a.Ru._({id:"rdU729"})}]},33617:(e,t,n)=>{"use strict";n.d(t,{i:()=>q,u:()=>J});var i=n(31085),a=n(11718),r=n(31201),o=n(63341),l=n(18528),s=n(80853),d=n(40173),c=n(72821),u=n(28478),p=n(80532),h=n(48637),m=n(25420),g=n(61778),x=n(76166),f=n(35436),v=n(33683),b=n(62313),y=n(18201),w=n(12917),j=n(3040),k=n(24221),C=n(9104),S=n(95640),A=n(12327),z=n(14041),I=n(55576),R=n(53898),E=n(71797),L=n(91559),_=n(15355),M=n(71197),N=n(35002),T=n(9138),P=n(64225),O=n(10458),D=n(35147),F=n(86186),H=n(85452),W=n(24293),B=n(7225),V=n(20501),G=n(58432);let U=(0,z.memo)(e=>{let{editor:t,getPos:n,onClose:a}=e,{toggleCardLayoutVariantsPanel:r,isCardLayoutVariantsPanelOpen:o}=(0,G.Y)(),l=(0,z.useCallback)(()=>{o&&r({override:"closed"});let e=t.state.doc.nodeAt(n());e&&(t.commands.selectNodeAtPos(n()),r({override:"open",isResizable:!1,props:{cardId:e.attrs.id,selectedCardRange:{from:n(),to:n()+e.nodeSize},editor:t}}),a())},[t,n,a,r,o]);return(0,i.jsx)(s.$,{variant:"plain",size:"xs",onClick:l,children:(0,i.jsxs)(m.s,{align:"center",gap:1,children:[(0,i.jsx)(k.g,{icon:V.p7g,fixedWidth:!0}),(0,i.jsx)(S.x6,{id:"3MMiDG"}),(0,i.jsx)(_.G,{type:"editCard",colorScheme:"blackAlpha",color:"blackAlpha.600",fontSize:"xs",ps:0,ms:1})]})})});U.displayName="TryNewLayoutButton";var K=n(87122);let q=e=>{let{attrs:t,editor:n,getPos:p}=e,h=t.id,m=!!(0,P.GV)(D.Gd),{isTranslateCardOpen:g,onTranslateCardOpen:x,onTranslateCardClose:f,startTranslation:v}=(0,K.XO)({cardId:h}),b=(0,P.GV)((0,T.iZ)("chat")),{color:y,bg:A,hoverColor:I,hoverBg:_,borderColor:B}=(0,F.Nb)(),V=(0,z.useRef)(null),{status:G,editCard:U}=(0,K.S6)({editor:n,getPos:p,cardId:t.id}),q="loading"===G,$=(0,M.tO)(void 0,"editCard",O.VV.GAMMA_UPSELL_CALLOUT_AI_CREDITS_GENERATE_CARD),Y=(0,z.useCallback)(e=>{var t;if($()){if((null===(t=e.operation)||void 0===t?void 0:t.key)==="edit.translate"){x();return}U(e)}},[$,U,x]),Q=(0,P.jL)(),X=(0,P.GV)((0,H.C_)(t.id,"editWithAI")),Z=(0,z.useCallback)(()=>{Q((0,H.md)())},[Q]),ee=(0,z.useCallback)(()=>{Q((0,H.CM)({cardId:t.id,menuType:"editWithAI"}))},[Q,null==t?void 0:t.id]);(0,r.j)({ref:V,handler:e=>{if(!X)return;let n=e.target;null!=n&&n.closest('[data-card-ai-edit-menu-trigger="'.concat(t.id,'"]'))||Z()}});let et=(0,z.useRef)(null),en=(0,N.u)("editCard2"),{isInOfflineMode:ei}=(0,L.u)();return en?(0,i.jsxs)(C.L8,{isDark:!1,children:[(0,i.jsxs)(o.W,{isLazy:!0,onClose:Z,onOpen:ee,isOpen:X,closeOnBlur:!1,initialFocusRef:et,children:[(0,i.jsx)(C.Tz,{label:(0,i.jsx)(S.x6,{id:"EVnzPs"}),placement:"top",shouldWrapChildren:!0,children:(0,i.jsxs)(l.I,{as:s.$,isActive:X,isDisabled:ei,"data-guider-highlight":"edit-with-ai-button","data-card-ai-edit-menu-trigger":t.id,height:W.PN,fontWeight:"900",alignItems:"center",fontFamily:"body",display:"flex",backdropFilter:"blur(8px)",borderRadius:"sm",borderColor:B,color:y,boxShadow:"sm",cursor:"pointer",fontSize:"14px",bg:A,px:.5,_hover:{color:I,background:_},isLoading:q,pointerEvents:"auto",children:[(0,i.jsx)(k.g,{icon:j.p7g,fixedWidth:!0}),(0,i.jsx)(a.D,{})]})}),(0,i.jsx)(d.Z,{children:(0,i.jsxs)(c.c,{"data-card-ai-menu":!0,minWidth:"320px",width:"fit-content",maxWidth:"min(360px, 80vw)",fontFamily:"body",fontSize:"md",border:"none","data-card-ai-edit-menu-trigger":t.id,maxH:"60vh",display:"flex",flexDirection:"column",children:[(0,i.jsx)(J,{editCardIfAllowed:Y,onClose:Z,firstItemRef:V,inputRef:et,isDisabled:q,pb:"10%",getPos:p,editor:n}),(0,i.jsx)(u.B,{px:5,py:3,bg:"gray.100",mx:-2,mb:-2,justify:"center",alignItems:"center",borderBottomRadius:"xl",children:(0,i.jsx)(u.Q,{children:(0,i.jsx)(s.$,{onClick:()=>{n.commands.selectInsideCardBody(p()),b||R.R.emit("toggle",{}),Z()},variant:"link",size:"sm",colorScheme:"gray",my:0,leftIcon:(0,i.jsx)(k.g,{icon:w.Y$q}),children:(0,i.jsx)(S.x6,{id:"mw/rmM"})})})})]})})]}),g&&(0,i.jsx)(E.Q,{isSite:m,isFullDoc:!1,onClose:f,startTranslation:v})]}):null},J=(0,z.memo)(e=>{let{editCardIfAllowed:t,onClose:n,firstItemRef:a,inputRef:r,isDisabled:o,groups:l=["writing","layout"],showCreditCosts:s=!0,opacityFadeUpsell:d=!1,getPos:c,editor:u,...w}=e,C="-webkit-gradient(linear, left top, left bottom, from(rgba(0,0,0,1)), to(rgba(0,0,0,0)))",z=(0,N.u)("generateCardLayoutVariants");return(0,i.jsxs)(p.az,{px:.5,pt:.5,flex:1,overflowY:"auto",style:d?{WebkitMaskImage:C,maskImage:C}:l.length>1?{maskImage:"linear-gradient(to bottom, transparent, black 0%, black 90%, transparent)"}:void 0,...w,children:[(0,i.jsx)(h.r,{children:(0,i.jsxs)(m.s,{justify:"space-between",align:"center",mb:2,children:[(0,i.jsx)(g.E,{fontSize:"sm",children:(0,i.jsx)(S.x6,{id:"sdosNK"})}),z&&c&&(0,i.jsx)(U,{editor:u,getPos:c,onClose:n})]})}),(0,i.jsx)(h.r,{children:(0,i.jsxs)(x.M,{size:"sm",mb:2,children:[(0,i.jsx)(f.W,{fontSize:"sm",color:"orchid.300",children:(0,i.jsx)(k.g,{icon:j.p7g})}),(0,i.jsx)(I._,{initialHeight:"32px",ref:r,paddingInlineStart:9,py:1.5,borderRadius:"xl",maxLength:300,isDisabled:o,onKeyDown:e=>{var i,l;if(!o){if("Enter"===e.key&&!e.shiftKey){e.preventDefault(),e.stopPropagation();let i=null===(l=r.current)||void 0===l?void 0:l.value;if(!i)return;t({instructions:i}),n()}"ArrowDown"===e.key&&(null===(i=r.current)||void 0===i?void 0:i.value.length)===0&&(e.preventDefault(),e.stopPropagation(),a.current&&a.current.focus())}},placeholder:A.Ru._({id:"vKZEFh"})})]})}),B.H0.map((e,r)=>{let o=B.Kn[e.key];return o&&0!==o.length&&l.includes(e.key)?(0,i.jsx)(h.r,{title:e.label(),children:o.map((e,o)=>e.checkEnabled&&!e.checkEnabled()?null:(0,i.jsx)(v.D,{icon:(0,i.jsx)(k.g,{icon:e.icon,fixedWidth:!0}),onClick:()=>{t({operation:e}),n()},ref:0===o&&0===r?a:null,children:(0,i.jsxs)(b.z,{children:[(0,i.jsx)(g.E,{children:e.label()}),s&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(y.h,{}),(0,i.jsx)(_.G,{type:"editCard",colorScheme:"blackAlpha",color:"blackAlpha.600",fontSize:"sm"})]})]})},e.key))},e.key):null})]})});J.displayName="EditCardAIMenuGroups"},15890:(e,t,n)=>{"use strict";n.d(t,{E:()=>s});var i=n(31085),a=n(95640),r=n(14041),o=n(55746),l=n(87064);let s=e=>{let{interactionId:t,operation:n,instructions:a,template:s,RatingButtons:c=o.LW}=e,[u,p]=(0,r.useState)(null),h=(0,r.useCallback)((e,i,r)=>{(0,l.pS)({feedback:i,tags:r,rating:e,interactionId:t,instructions:a,operation:n,template:s})},[t,a,n,s]),m=(0,r.useCallback)(e=>{p(e),(0,l.D8)({rating:e,interactionId:t,operation:n,template:s,instructions:a})},[t,n,s,a]);return(0,i.jsx)(o.f3,{rating:u||void 0,setRating:m,RatingButtons:c,feedbackTags:d,trackFeedback:h})},d=[{key:"wrong-language",label:(0,i.jsx)(a.x6,{id:"R2Ly6h"})},{key:"wrong-layout",label:(0,i.jsx)(a.x6,{id:"moXJSM"})},{key:"wrong-content",label:(0,i.jsx)(a.x6,{id:"AgLuGi"})},{key:"wrong-images",label:(0,i.jsx)(a.x6,{id:"IAt1qK"})},{key:"too-similar",label:(0,i.jsx)(a.x6,{id:"Np7sCV"})},{key:"too-different",label:(0,i.jsx)(a.x6,{id:"/wLn3u"})},{key:"instructions",label:(0,i.jsx)(a.x6,{id:"Tq32Jp"})},{key:"other",label:(0,i.jsx)(a.x6,{id:"/IX/7x"})}]},59710:(e,t,n)=>{"use strict";n.d(t,{V:()=>s});var i=n(35002),a=n(37049),r=n(64225),o=n(90854),l=n(5933);let s=()=>{var e,t,n,s,d,c;let u=(0,r.GV)(l.Jo),p=(0,r.GV)(l.SJ),h=(0,a.R5)(null==u?void 0:null===(t=u.docGenerateInput)||void 0===t?void 0:null===(e=t.settings)||void 0===e?void 0:e.imageModel),m=(null==u?void 0:null===(s=u.docGenerateInput)||void 0===s?void 0:null===(n=s.settings)||void 0===n?void 0:n.imageProvider)||i.of.get("aiGeneratorDefaultImageProvider"),g=null==u?void 0:null===(c=u.docGenerateInput)||void 0===c?void 0:null===(d=c.settings)||void 0===d?void 0:d.imageStyle;return!g&&"aiGenerated"===m&&p&&(g=(0,o.xI)(p)),{imageProvider:m,imageModel:h,imageStyle:g}}},87122:(e,t,n)=>{"use strict";n.d(t,{S6:()=>E,XO:()=>_,ck:()=>L,p5:()=>R});var i=n(12327),a=n(13236),r=n(69e3),o=n(14041),l=n(14452),s=n(63587),d=n(65449),c=n(87064),u=n(21450),p=n(76546),h=n(33630),m=n(45214),g=n(19717),x=n(35002),f=n(90754),v=n(78821),b=n(64225),y=n(26768),w=n(43125),j=n(5933),k=n(57882),C=n(77646),S=n(48984),A=n(7225),z=n(59710);let I=()=>{let{generate:e}=(0,d.pt)("EditCard",{}),{generate:t}=(0,d.pt)("TranslateCard",{});return(0,o.useCallback)((n,i)=>(null==i?void 0:i.key)==="edit.translate"?t({...n,variables:{...n.variables,language:n.variables.request}}):e(n),[e,t])},R=(e,t)=>({...e,layout:t.layout,layoutTemplateColumns:t.layout!==e.layout?t.layoutTemplateColumns:e.layoutTemplateColumns}),E=e=>{let{editor:t,getPos:n,cardId:a}=e,r=I(),d=(0,b.GV)(j.Jo),p=(0,b.GV)(j.SJ),f=(0,b.CU)(),C=(0,b.GV)((0,m.wQ)(a)),E=(0,w.lI)(t),_=(0,w.zK)(E),{imageProvider:M,imageModel:N,imageStyle:T}=(0,z.V)(),P=(0,o.useCallback)(async e=>{let t=e.instructions?e.instructions:e.operation?e.operation.instructions:"",{previous:n,inputHtml:i,operation:o}=e;if(!d||!d.organization)throw Error("Doc or organization not found");let s=(0,c.$F)(),h=performance.now(),m=(0,y.u)(f),b={interface:"edit-card",interactionId:s,inputContent:i,inputMessage:t,inputData:{custom:!!o,operation:null==o?void 0:o.key,operationGroup:null==o?void 0:o.group,format:_,imageProvider:M},product:(0,v.A4)(d.organization),docId:d.id,cardId:a},w=(0,k.bs)(d.organization.id);try{let{promise:e}=r({workspaceId:(null==w?void 0:w.id)||d.organization.id,variables:{inputHtml:i,request:t,format:_,outline:m,previousHtml:n,template:null==o?void 0:o.template,imageProvider:M,model:x.of.get("editCardModel"),reasoningEffort:x.of.get("editCardReasoningEffort")},interactionId:s},o);(0,c.rl)(b);let a=await e,f=(0,l.DB)(a),v=await (0,u.Lm)(f,{docFormatKey:_,loadImages:!1,context:{workspaceId:(null==w?void 0:w.id)||d.organization.id,docId:d.id,interactionId:s},removeImagesFromLayouts:!1,imageOptions:{provider:M,model:N,generateStyle:T},theme:p});return(0,c.Yh)({...b,outputContent:f,outputMessage:a.replace(f,"[outputContent]"),latency:performance.now()-h}),(0,g.w)("editCard",w,s),{output:v,interactionId:s}}catch(e){throw(0,c.tB)({...b,errorMessage:e.message,errorCode:e.code,errorName:e.name,errorStack:e.stack,outputMessage:"Error editing card",latency:performance.now()-h}),e}},[_,d,f,a,r,p,M,N,T]),O=(0,o.useCallback)(async e=>{let{instructions:r,operation:o}=e,l=n(),d=t.view.state.doc.nodeAt(l);if(!d){console.error("[AICard] Cannot append card. Node unknown");return}try{var c,u;f.dispatch((0,m.Ic)({cardId:a,suggestions:{status:"loading",loadingMessage:null==o?void 0:null===(c=o.loadingMessage)||void 0===c?void 0:c.call(o),variants:[]}}));let e=(0,S.qe)(t,l),n=(0,s.K)(t,d),{output:p,interactionId:h}=await P({instructions:r,operation:o,inputHtml:n,previous:e});p.attrs=R(d.attrs,p.attrs),L(t,a,p),f.dispatch((0,m.Ic)({cardId:a,suggestions:{status:"done",interactionId:h,selected:"v1",operation:o,instructions:r,variants:[{label:i.Ru._({id:"HxF6Fk"}),isOriginal:!0,id:"original",card:d.toJSON()},{label:(null==o?void 0:null===(u=o.variationName)||void 0===u?void 0:u.call(o))||i.Ru._({id:"YledUl"}),isOriginal:!1,id:"v1",card:p}]}}))}catch(e){console.error("[EditCard] Error regenerating card",e),f.dispatch((0,m.Ic)({cardId:a,suggestions:{status:"error",variants:[]}}))}},[P,t,n,f,a]);return(0,o.useEffect)(()=>h.R.on("translate",e=>{let{type:t,cardId:n,language:i}=e,r=A.Jz.find(e=>"edit.translate"===e.key);"card"===t&&n===a&&r&&O({instructions:"".concat(i.englishName," (").concat(i.key,")"),operation:r})}),[a,O]),{editCard:O,status:C}},L=(e,t,n)=>{let i=(0,a.xe)(e.state.doc,e=>(0,C.jg)(e)&&e.attrs.id===t)[0];if(!i){console.warn("[useGenerateCard] Card not found. It may have been deleted while generating.");return}e.chain().setMeta("isEditCardVariant",!0).setMeta("cardNotesHandled",!0).insertContentAt({from:i.pos,to:i.pos+i.node.nodeSize},n).selectInsideCardBody(i.pos).run();let o=r.bP.fromJSON(e.state.schema,n),l=(0,j.SJ)((0,b.KA)().getState());(0,p.de)(e,o,l)},_=e=>{let{cardId:t}=e,{isOpen:n,onClose:i,onOpen:a}=(0,f.E)({id:"TranslateCardDisclosure"}),r=(0,o.useCallback)(e=>{h.R.emit("translate",{type:"card",cardId:t,language:e}),i()},[t,i]);return{isTranslateCardOpen:n,onTranslateCardOpen:a,onTranslateCardClose:i,startTranslation:r}}},50336:(e,t,n)=>{"use strict";n.d(t,{W:()=>c,s:()=>u});var i=n(12327);let a={src:"/_next/static/media/Title-with-2-Column-Image-Left.a898abf9.svg",height:47,width:92,blurWidth:0,blurHeight:0},r={src:"/_next/static/media/Title-with-3-boxes.8a28c3c6.svg",height:49,width:91,blurWidth:0,blurHeight:0},o={src:"/_next/static/media/Title-with-3-images.172b44a3.svg",height:69,width:92,blurWidth:0,blurHeight:0},l={src:"/_next/static/media/Title-with-Bullets.066ad97e.svg",height:55,width:92,blurWidth:0,blurHeight:0},s={src:"/_next/static/media/Title-with-text.2a88d207.svg",height:45,width:92,blurWidth:0,blurHeight:0},d={src:"/_next/static/media/Title-with-timeline.5a8d1065.svg",height:63,width:91,blurWidth:0,blurHeight:0},c=()=>[{name:i.Ru._({id:"RYtHky"}),key:"bullets",image:l},{name:i.Ru._({id:"m2tQ9E"}),key:"paragraphs",image:s},{name:i.Ru._({id:"2abZdy"}),key:"twoColImage",image:a},{name:i.Ru._({id:"cklVjM"}),key:"timeline",image:d},{name:i.Ru._({id:"cDxTeG"}),key:"imagesWithText",image:o},{name:i.Ru._({id:"61H/21"}),key:"boxes",image:r}],u=["bullets","paragraphs","twoColImage","sideImageWithText","timeline","imagesWithText","boxes","arrows","columns","pyramid","bigBullets","icons","chart"]},48984:(e,t,n)=>{"use strict";n.d(t,{ay:()=>R,ds:()=>I,qe:()=>E});var i=n(13236),a=n(50933),r=n.n(a),o=n(69e3),l=n(14041),s=n(65449),d=n(74109),c=n(87064),u=n(21450),p=n(76546),h=n(18405),m=n(91559),g=n(19717),x=n(35002),f=n(78821),v=n(64225),b=n(26768),y=n(39848),w=n(43125),j=n(5933),k=n(27042),C=n(77646),S=n(59710),A=n(50336);let z={language:"English (US)",textAmount:"md",tone:"",audience:"",format:"deck",imageProvider:"aiGenerated"},I=e=>{var t,n;let{editor:a,getPos:d,theme:m,input:y,randomTemplate:w=!1}=e,{generate:I}=(0,s.pt)("GenerateCard",{}),R=(0,v.GV)(j.Jo),L=R.organization.id,_=(0,v.GV)((0,k.$E)(L)),[M,N]=(0,l.useState)(!1),T=(0,v.CU)(),{imageProvider:P,imageModel:O,imageStyle:D}=(0,S.V)(),F=(0,l.useCallback)(async e=>{if(!R||!R.organization)throw Error("Doc or organization not found");let{instructions:t="",template:n,input:i="",settings:a,interactionId:r}=e,o=performance.now(),l=(0,b.u)(T),s={...z,...a,editorMode:"structured",textMode:"generate",input:i,instructions:t,template:n,previous:e.context,outline:l,model:x.of.get("generateDeckFastModel")},d={interface:"add-card",interactionId:r,inputContent:i,inputMessage:t,inputData:{...a,template:n},product:(0,f.A4)(R.organization),docId:R.id};(0,c.rl)(d);let{promise:p}=I({workspaceId:_.id,variables:s,interactionId:r}),h=await p,v=await (0,u.Lm)(h,{docFormatKey:s.format,loadImages:!1,theme:m,context:{workspaceId:_.id,docId:R.id,interactionId:r},imageOptions:{provider:P,model:O,generateStyle:D},preserveLayouts:!0});return(0,c.Yh)({...d,outputContent:h,latency:performance.now()-o}),(0,g.w)("generateCard",_,r),v},[I,R,m,T,_,P,O,D]),{template:H,settings:W}=y,B=(0,h.xt)(W.locale||(null==R?void 0:null===(n=R.docGenerateInput)||void 0===n?void 0:null===(t=n.settings)||void 0===t?void 0:t.locale)||"en");return{isGenerating:M,getContextAndGenerate:(0,l.useCallback)(async e=>{if(!a)return;let t=d(),n=a.view.state.doc.nodeAt(t);if(!n){console.error("[AICard] Cannot append card. Node unknown");return}let l=E(a,t);N(!0);try{let s=(0,c.$F)(),d=await F({input:e,template:H||(w?r()(A.s):void 0),context:l,settings:{language:B.englishName},interactionId:s});d.attrs={...n.attrs,...d.attrs,container:{...n.attrs.container,...d.attrs.container},generatorInput:{...n.attrs.generatorInput,prompt:e,template:H,settings:W,status:"done",interactionId:s}};let u=(0,i.xe)(a.state.doc,e=>(0,C.jg)(e)&&e.attrs.id===n.attrs.id)[0];if(!u){console.warn("[useGenerateCard] Card not found. It may have been deleted while generating.");return}a.chain().insertContentAt({from:u.pos,to:u.pos+u.node.nodeSize},d).setMeta("isGenerateCard",!0).selectInsideCardBody(t).run();let h=o.bP.fromJSON(a.state.schema,d);(0,p.de)(a,h,m)}catch(e){console.error("[GenerateCard] Error generating card",e)}N(!1)},[a,d,F,H,w,B.englishName,W,m]),updateInput:(0,l.useCallback)(e=>{let t=d(),n=a.view.state.doc.nodeAt(t);(null==n?void 0:n.attrs.generatorInput)&&a.commands.updateNestedAttributesAtPos(t,{generatorInput:e})},[a,d]),locale:B}},R=(e,t)=>{let{isInOfflineMode:n}=(0,m.u)(),[i,a]=(0,l.useState)([]),[r,o]=(0,l.useState)("ready"),{generate:d}=(0,s.pt)("SuggestCardTopics",{onStart(){o("generating"),a([])},onContent(e){a(e.split("\n").filter(Boolean))},onComplete(e){a(e.split("\n").filter(Boolean)),o("done")},onError(e){console.error("Error generating suggestions",e),o("error")},timeout:3e4}),c=(0,v.GV)(j.Jo),u=c.organization.id,p=(0,v.GV)((0,k.$E)(u)),h=(0,w.lI)(e),g=(0,w.zK)(h),x=(0,v.CU)();return(0,l.useEffect)(()=>{if(!n&&t&&"ready"===r){let e=(0,b.u)(x);e.trim().split("\n").length<3||d({variables:{outline:e,format:g},workspaceId:p.id})}},[r,d,n,t,x,g,c,p]),{suggestions:i,generateSuggestionsStatus:r}},E=(e,t)=>{let n=(0,y.s6)(e.state.doc,Math.max(t-2e3,0),t),i=(0,d.p9)(n).slice(-500);return(0,d.$0)(i)}},42717:(e,t,n)=>{"use strict";n.d(t,{O:()=>i});let i={prompt:"",template:null,settings:{},status:"ready"}},24293:(e,t,n)=>{"use strict";n.d(t,{PN:()=>r,fJ:()=>a,lK:()=>o});var i=n(12327);let a="card-layout",r="25px",o={accentImage:()=>i.Ru._({id:"YXjp37"}),cardBackground:()=>i.Ru._({id:"yYiJkI"})}},89932:(e,t,n)=>{"use strict";n.d(t,{c:()=>u});var i=n(31085),a=n(74727),r=n(9021),o=n(20501),l=n(24221),s=n(9104),d=n(12327);let c=[{key:"start",name:()=>d.Ru._({id:"Xl2IZ9"}),icon:o.jot,description:()=>d.Ru._({id:"N0rIpR"})},{key:"center",name:()=>d.Ru._({id:"7FOGnf"}),icon:o.nr0,description:()=>d.Ru._({id:"3JV7Yt"})},{key:"end",name:()=>d.Ru._({id:"H0UcZG"}),icon:o.yHR,description:()=>d.Ru._({id:"LcSMtc"})}],u=e=>{let{defaultAlignment:t,alignment:n,setAlignment:o}=e;return(0,i.jsx)(a.e,{isAttached:!0,size:"sm",display:"flex",children:c.map(e=>{let a=n||e.key!==t?e.key===n?"trueblue.100":void 0:"trueblue.50";return(0,i.jsx)(s.Tz,{label:(0,i.jsx)(s.c8,{label:e.name(),description:e.description()}),placement:"top",children:(0,i.jsx)(r.K,{"aria-label":e.name(),px:"2.5",boxShadow:"none",icon:(0,i.jsx)(l.g,{icon:e.icon}),variant:"plain",bg:a,onClick:()=>{o(e.key)}})},e.key)})})}},42215:(e,t,n)=>{"use strict";n.d(t,{N:()=>R,S:()=>E});var i=n(13236),a=n(46108),r=n.n(a),o=n(46343),l=n.n(o),s=n(25715),d=n(81570),c=n(10458),u=n(48192),p=n(66159),h=n(1098),m=n(26813),g=n(95580),x=n(20277),f=n(68566),v=n(45709),b=n(19534),y=n(13487),w=n(17119),j=n(42849),k=n(12554),C=n(82354),S=n(91100),A=n(77646),z=n(61201);let I=/^(\*\*\*)/,R=i.YY.create({name:"cardCommands",addCommands:()=>({resetCardSettings:e=>t=>{let{state:n,dispatch:i,chain:a}=t;if(!i)return!0;let r=a();return n.doc.descendants((t,n)=>{(0,b.jg)(t)&&r.updateNestedAttributesAtPos(n,e)}),!0},splitCardAtSelection:()=>e=>(E(e),!0),insertNestedCard:()=>e=>{let{state:t,chain:n,dispatch:i,editor:a}=e;if(!i)return!0;let{from:r,$from:o}=t.selection;return n().insertContentAndSelect((0,v.G)().insertCardInside).command(e=>{let{tr:t}=e,n=(0,w.ek)({editor:a,pos:r-o.parentOffset-1,tr:t});return n.length&&requestAnimationFrame(()=>{var e,t;null===(e=(t=a.commands).moveAnnotations)||void 0===e||e.call(t,n)}),!0}).run(),!0},convertToNestedCard:()=>e=>{let{state:t,dispatch:n,commands:i}=e;if(!n)return!0;let a=(0,s.Im)(t.schema.nodes[z.Zp.name])(t,n);return i.selectInsertedNode(),a},unnestCard:e=>t=>{let{state:n,dispatch:a,chain:r,tr:o}=t,l=n.doc.nodeAt(e);if(!l||!(0,b.jg)(l))return!1;if(!a)return!0;let s=(0,S.IV)(o,e);if(!s)return!1;let d=o.doc.resolve(e),c=(0,i.eL)(d,b.jg),u=(0,k.PD)(d),p=null;u&&(p=c?(0,S.XC)(n.doc,c.pos,!0):null);let h=e+l.nodeSize,m=r();if(p&&u&&c){let e=(0,k.eh)(c.node)?u.node.content:u.node;m.insertContentAt(p,e.toJSON()).setMeta("cardNotesHandled",!0)}return m.insertContentAt({from:e,to:h},s.node.toJSON().content).selectInsertedNode().command(t=>{let{tr:n}=t;return n.setMeta("annotationEvent",{type:"merge-cards",contentPos:s.pos,insertPos:e}),!0}).run(),!0},mergeCardsAtPos:e=>t=>{let{tr:n}=t,i=n.doc.nodeAt(e);return!!(i&&(0,b.jg)(i))&&(0,S.c9)(e,n)},mergeCardsOnDelete:e=>t=>{let{tr:n,state:a,dispatch:r}=t;if(!r)return!0;let{selection:o}=a,l=(0,i.KP)(b.jg)(o);if(!l||!o.empty)return!1;try{if(!(0,S.jF)(o,e))return!1;return e?(0,S.Uc)(l.pos,n,a):(0,S.c9)(l.pos,n)}catch(e){return console.debug("[CardCommands] mergeCardsOnDelete failed",e),!1}},insertCardAfter:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,v.G)().insertCardInside;return t=>{let{state:n,chain:a,dispatch:r}=t;if(!r)return!0;let{selection:o}=n,l=(0,i.KP)(b.jg)(o);if(!l)return!0;let{pos:s,node:d}=l,c=s+d.nodeSize;return a().insertContentAt(c,e).selectInsertedNode().scrollIntoView().run(),!0}},deleteCardIfEmpty:e=>t=>{let{tr:n,dispatch:i,state:a}=t;if(!i)return!0;let r=!1,{from:o,to:l}=a.selection;return a.doc.nodesBetween(o,l,(t,i)=>{if((0,b.jg)(t)&&(0,z.ey)(t)&&i>C.$x){let a=n.doc.resolve(i).depth>1;n.deleteRange(i,i+t.nodeSize);let o=(0,f.n)(n.doc.resolve(i+(a?0:e?1:-1)),e?1:-1);o&&n.setSelection(o),r=!0}}),r},deleteCard:e=>t=>{let{state:n,dispatch:i,tr:a}=t;if(!i)return!0;let r=n.doc.resolve(e),o=r.depth>1,l=r.nodeAfter;if(!l||!(0,b.jg)(l))return console.error("[CardExtension.deleteCard] Cannot delete card. Node unknown"),!1;a.delete(e,e+l.nodeSize);let s=(0,f.n)(a.doc.resolve(e-(o?0:1)),-1);return s&&a.setSelection(s),!0},duplicateCard:e=>t=>{let{state:n,chain:i,editor:a}=t,o=n.doc.nodeAt(e);if(!o||!(0,b.jg)(o))return console.error("[CardExtension.duplicateCard] Cannot duplicate card. Node unknown"),!1;let l=e+o.nodeSize,s=(0,y.RE)(r()(o.toJSON()));return i().insertContentAt(l,s,{updateSelection:!1}).command(e=>{let{tr:t}=e;return t.setMeta(h._,!0),!0}).run(),setTimeout(()=>{a.chain().selectInsideNodeAtPos(l).focus().run()},200),!0},rearrangeCards:e=>{let{from:t,to:n,position:i}=e;return e=>{let a,{view:r,state:o,tr:l}=e,s=o.doc.resolve(n),c=o.doc.resolve(t),u=c.pos+c.nodeAfter.nodeSize,p=new d.nh(c),h=p.content();if((a="below"===i?s.pos+s.nodeAfter.nodeSize:"above"===i?s.pos:s.pos+s.nodeAfter.nodeSize-1)===c.pos)return l.setMeta("preventDispatch",!0),!0;l.delete(p.from,p.to);let m=l.mapping.map(a);l.replaceRangeWith(m,m,h.content.firstChild);let g=l.doc.resolve(m+1);l.setSelection(new d.nh(g));let x={type:"move",insertPos:m,insertPosRaw:a,pos:c.pos,end:u};return l.setMeta("annotationEvent",x).setMeta("rearrangeCards",!0),r.focus(),!0}},rearrangeCardsById:(e,t,n)=>i=>{var a;let{dispatch:r,tr:o,editor:s}=i;if(!r)return!0;let d=(0,A.aJ)(s.state.doc);if(!d)return!1;let u=d.map(e=>e.node.attrs.id),h=t.filter(e=>u.includes(e)).map(e=>d.find(t=>t.node.attrs.id===e)).filter(e=>!!e),m=h.map(e=>({pos:e.pos,id:e.node.attrs.id})).filter(e=>{let{id:t}=e;return t&&"string"==typeof t}),g=null===(a=h[0])||void 0===a?void 0:a.node.attrs.id;if(!g)return!0;let x=Math.max(e.findIndex(e=>e===g),0),f=e[x-1],v=d.find(e=>e.node.attrs.id===f),b=x>0&&v?v.pos+v.node.nodeSize:d[x].pos;if(void 0===b)return!0;[...h].reverse().forEach(e=>{e&&o.replaceWith(b,b,e.node)}),h.forEach(e=>{if(!e)return;let t=o.mapping.map(e.pos);o.delete(t,t+e.node.nodeSize)});let y=(0,A.aJ)(o.doc);if(!y)return!0;let w=y.map(e=>({pos:e.pos,id:e.node.attrs.id})).filter(e=>{let{id:n}=e;return t.includes(n)}),j=w.map(e=>{var t;let{id:n,pos:i}=e,a=null===(t=m.find(e=>e.id===n))||void 0===t?void 0:t.pos;return a?{id:n,oldPos:a,newPos:i}:null}).filter(e=>!!e);return o.setMeta("annotationEvent",{type:"rearrange-cards",rearrangedCardPositions:j,insertPos:b}).setMeta("rearrangeCards",!0).setMeta(p.G,!0),l()(w,m)||c.zS.trackDocEvent(c.VV.CARDS_REORDERED,{card_count:t.length,method:(null==n?void 0:n.viewPreference)==="film"?"filmstrip":"list-view"}),!0},updateThemeAccentImages:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return n=>{let{editor:i,commands:a}=n,r=!e||0===e.length,o=0;return i.state.doc.descendants((n,i)=>{let l=(0,j.wL)(n);if(l||(0,b.jg)(n)){let s=l&&n.attrs.background.type===m.h.NONE;(n.attrs.background.source===u.j||t&&l||s)&&(r?a.updateAttributesAtPos(i,{background:{type:l?m.h.NONE:void 0}}):(a.updateNestedAttributesAtPos(i,{background:e[o%e.length]}),o++))}}),!0}},deleteCardsById:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return n=>{let{editor:a,dispatch:r,tr:o}=n;if(!r)return!0;let l=(0,i.xe)(a.state.doc,t=>(0,b.jg)(t)&&e.includes(t.attrs.id));if(!l.length)return!1;let s=l.map((e,t)=>({pos:e.pos,cardIndex:t}));l.forEach(e=>{let{node:t,pos:n}=e;o=o.delete(o.mapping.map(n),o.mapping.map(n+t.nodeSize))});let d=l[0].pos,c=(0,x.s)(o.doc.resolve(d));return c&&(o=o.setSelection(c)),t&&o.setMeta("annotationEvent",{type:"filmstrip-cut",deleted:s}),o.setMeta(p.G,!0),!0}},deleteCardsAfter:e=>t=>{let{editor:n,dispatch:i,commands:a}=t;if(!i)return!0;let r=(0,g.GY)(n.state.doc.firstChild,e=>(0,b.jg)(e)).map(e=>e.node.attrs.id);if(null===e)return a.deleteCardsById(r);let o=r.indexOf(e),l=o>-1?r.slice(o+1):[];return 0===l.length||a.deleteCardsById(l)},selectInsideNextCard:e=>t=>{let{state:n,dispatch:i,commands:a}=t;if(!i)return!0;let{selection:r}=n,o=(0,g.IV)(r.$from,b.jg)[0];if(!o||!r.empty)return!1;let l=n.doc.resolve(o.pos),s=l.index();if(e){if(s===l.parent.childCount-1)return!1;a.selectInsideNodeAtPos(o.pos+o.node.nodeSize)}else{if(0===s)return!1;let e=l.posAtIndex(s-1);a.selectInsideNodeAtPos(e,-1)}return!0}}),addInputRules:()=>[new i.fV({find:I,handler:e=>{let{state:t,range:n}=e,{tr:i}=t;E({tr:i.deleteRange(n.from,n.to),dispatch:!0})}})]}),E=e=>{let{tr:t,dispatch:n}=e;if(!n)return;let a=(0,i.KP)(b.jg)(t.selection);if(!a){console.error("Couldn't find parent card while splitting",t.selection);return}let{accent:r,body:o}=(0,j.dg)(t,a.pos);r&&o&&r.pos>o.pos&&(t.delete(r.pos,r.pos+r.node.nodeSize),t.insert(o.pos,r.node));let{selection:l}=t,{$from:s}=l,d=l.$from.parentOffset,c=l.from-d-1,u=l.$from.node().content.size-l.$from.parentOffset;t.setMeta(h._,!0),t.setMeta("annotationEvent",{type:"split-card",splitPos:s.before()});let{node:p,depth:m}=a,{type:g,attrs:v}=p,y=s.depth-m+1,w=(0,k.PD)(t.doc.resolve(a.pos));t.split(s.pos,y,[{type:g,attrs:{...v,layout:"blank"}}]);let S=(0,x.t)(t,C.Qs).pos,A=t.doc.nodeAt(S).childCount;if(0===d&&(t.delete(c,c+t.doc.nodeAt(c).nodeSize),S=t.steps[t.steps.length-1].getMap().map(S)),0===u&&A>1){let e=S+1,n=t.doc.nodeAt(e);n&&!("cardNotes"===n.type.name||"cardLayoutItem"===n.type.name)&&t.delete(e,e+n.nodeSize)}let z=(0,k.PD)(t.doc.resolve(S));z&&t.delete(z.pos,z.pos+z.node.nodeSize);let I=(0,f.n)(t.doc.resolve(S+1)),R=t.doc.nodeAt(a.pos),E=R&&a.pos+R.nodeSize-1;if(E&&w){let e=w.node;t.insert(E,e),t.setMeta("cardNotesHandled",!0)}I&&t.setSelection(I).scrollIntoView()}},44428:(e,t,n)=>{"use strict";n.d(t,{QJ:()=>f,Jl:()=>x});var i=n(56154),a=n(13236),r=n(81570),o=n(11329),l=n(10458),s=n(43873),d=n(46343),c=n.n(d),u=n(5933),p=n(95580),h=n(19534);let m=e=>{let t=[],n={tree:{},parents:{},treeArray:[]};return e.doc.descendants((i,a)=>{if(!(0,h.jg)(i))return;let r=e.doc.resolve(a),o=i.attrs.id;t.push(o);let l=(0,p.TK)(r,h.jg).reverse().map(e=>{let{node:t}=e;return t.attrs.id}),s=[...l,o];s.reduce((e,t)=>(e[t]=e[t]||{},e[t]),n.tree),n.parents[o]=l,s.reduce((e,t)=>{let n=e.find(e=>e.id===t);return n?n.children:(e.push({id:o,children:[]}),e)},n.treeArray)}),{cardIds:t,cardIdMap:n}};class g{compute(e){let t=m(e);c()(this.value,t)||(this.hasChanges=!0);let n=t.cardIds.filter(Boolean),i=n.filter((e,t)=>n.includes(e,t+1));return this.duplicateCardIds=i.filter(e=>!this.duplicateCardIds.includes(e)),this.value=t,this}apply(e,t){return e.docChanged&&this.compute(t),this}processChanges(e){this.hasChanges&&this.value&&e((0,u.t0)(this.value)),this.hasChanges=!1}constructor(){this.hasChanges=!1,this.duplicateCardIds=[],this.value=null}}let x=new r.hs("cardIds"),f=a.YY.create({name:"cardIds",priority:s.y.CardIds,addOptions:()=>({enabled:!0}),addProseMirrorPlugins(){return this.options.enabled?[new r.k_({key:x,state:{init:()=>new g,apply:(e,t,n,i)=>t.apply(e,i)},appendTransaction:(e,t,n)=>{var a;let r=x.getState(n);if(!(null==r?void 0:null===(a=r.value)||void 0===a?void 0:a.cardIds))return null;if(e.some(e=>e.docChanged)&&r.duplicateCardIds.length&&!this.editor.isThumbnail){let t={duplicateIds:JSON.stringify(r.duplicateCardIds),transactions:JSON.stringify(v(e)),isThumbnail:this.editor.isThumbnail};null===l.zS||void 0===l.zS||l.zS.track(l.ng.DUPLICATE_CARD_IDS,{...t}),i.Cp("[generateCardIdMap] Duplicate cardIds detected. This is unexpected and will cause spotlight issues. Additional metadata:",{extra:t})}return null}})]:[]}}),v=e=>e.map(e=>{let t=e.steps.map(e=>{if(e instanceof o.Ln||e instanceof o.Wg){var t,n,i;let a=(null===(n=e.slice.toJSON())||void 0===n?void 0:null===(t=n.content)||void 0===t?void 0:t[0])||{},r={type:a.type,attrs:a.attrs,contentLength:null===(i=a.content)||void 0===i?void 0:i.length};return{name:e.constructor.name,from:e.from,to:e.to,sliceContentSimple:r}}return e instanceof o.q4?{name:e.constructor.name,pos:e.pos,attr:e.attr}:{name:e.constructor.name}}),n=Object.fromEntries(Object.entries(e.meta).map(e=>{let[t,n]=e;if("annotationEvent"===t){var i,a,r,o,l;return[t,{type:n.type,droppedBlockPos:n.droppedBlockPos,dragging:{inBlockLength:null===(a=n.dragging)||void 0===a?void 0:null===(i=a.inBlock)||void 0===i?void 0:i.length,inCardLength:null===(o=n.dragging)||void 0===o?void 0:null===(r=o.inCard)||void 0===r?void 0:r.length,origNodePos:null===(l=n.dragging)||void 0===l?void 0:l.origNodePos}}]}return"uiEvent"===t?[t,n]:[t,"object"==typeof n?"object":n]}));return{stepsData:t,docChanged:e.docChanged,selection:{from:e.selection.from,to:e.selection.to},selectionSet:e.selectionSet,metaData:n}})},29383:(e,t,n)=>{"use strict";n.d(t,{R:()=>i});let i=new(n(36832)).b},49964:(e,t,n)=>{"use strict";n.d(t,{JH:()=>u,Nu:()=>h,jh:()=>c,kB:()=>p});var i=n(12327),a=n(13236),r=n(56005),o=n.n(r),l=n(26813),s=n(19534),d=n(42849);let c=(e,t)=>{var n,i;let{background:a,fitType:r}=e,{allowFit:o}=(0,d.lH)(t);return o?r||((null==a?void 0:null===(i=a.image)||void 0===i?void 0:null===(n=i.meta)||void 0===n?void 0:n.has_transparency)?"fit":"fill"):"fill"},u=(e,t)=>{var n;let{allowFit:i}=(0,d.lH)(t);return i&&(null===(n=e.background)||void 0===n?void 0:n.type)===l.h.IMAGE},p=(e,t,n)=>{let i=(0,a.eL)(e.state.doc.resolve(t),s.jg);t&&(n?e.commands.updateAttributesAtPos(t,{background:{type:l.h.NONE}}):(null==i?void 0:i.pos)&&(e.commands.setCardLayout(i.pos,"blank"),e.commands.selectInsideCardBody(i.pos)))},h=e=>"blank"===e?i.Ru._({id:"6JcK6b"}):"behind"===e?i.Ru._({id:"SQOVlA"}):i.Ru._({id:"T8aKxO",values:{0:o()(e)}})},31485:(e,t,n)=>{"use strict";n.d(t,{Bn:()=>j,OX:()=>w,jV:()=>y});var i=n(13236),a=n(81570),r=n(11329),o=n(73686),l=n(17303),s=n(64225),d=n(80245),c=n(26813),u=n(95580),p=n(1279),h=n(20379),m=n(20265),g=n(93090),x=n(77646),f=n(3756),v=n(15333),b=n(42849);let y=new a.hs("cardLayoutPlugin"),w=e=>new a.k_({key:y,state:{init:()=>({draggingData:null}),apply:(e,t)=>t},filterTransaction:(e,t)=>{if(!e.docChanged||!((0,i.BQ)(t.selection)&&(0,x.sw)(t.selection.node))||e.steps.every(e=>e instanceof r.q4)||e.getMeta("imageUploadUpdateAttrs")||e.steps.every(t=>{if(!(t instanceof r.Ln))return!1;let n=e.before.nodeAt(t.from);if(!n||!(0,b.wL)(n))return!1;let i=t.slice.content;return 1===i.childCount&&(0,b.wL)(i.firstChild)}))return!0;let n=(0,d.A)(e).every(t=>{let n=e.before.nodeAt(t.oldStart);return!n||!(0,x.sw)(n)});return n||console.warn("[CardLayoutPlugin] blocking transaction with CardLayoutItem selected"),n},appendTransaction:(t,n,a)=>{if(!(t.some(e=>e.docChanged)&&!n.doc.eq(a.doc))||!(0,h.e)(e.state.doc).cardLayoutsEnabled)return;let r=a.tr,o=(0,i.T7)(n.doc,t);if((0,d.A)(o).forEach(t=>{let n={from:t.newStart,to:t.newEnd};(0,i.Nx)(a.doc,n,e=>"card"===e.type.name).forEach(t=>{let{pos:i}=t;if(i<n.from)return;let a=r.mapping.map(i),o=r.doc.nodeAt(a);if(!o)return;let l=(0,b.lH)(o.attrs.layout);(0,b.Fm)(r,a,e.schema,l)})}),r.docChanged)return r},props:{handleDOMEvents:{dragstart:(t,n)=>(0,v.Po)(e,t,n),drop(t,n){let i=t.state.tr,a=(0,v.ZL)(t,n);if(a&&a.isImageUpload){n.preventDefault();let r=a.pos;(0,f.c)(e,i,r,a.layout);let{accent:o}=(0,b.dg)(i,r);if(!o)throw Error("Could not find accent after setting card layout=".concat(a.layout," at pos=").concat(a.pos));return(0,m.TH)(e,i,a.file,o.pos),t.dispatch(i),!0}let r=(0,v.nA)(t,n);if(r&&r.isImageUpload)return n.preventDefault(),(0,m.TH)(e,i,r.file,r.pos),t.dispatch(i),!0;let o=(0,v.aI)(e,t,n),l=y.getState(t.state);return o&&l&&(l.draggingData={removeLayoutFromCardId:o.node.attrs.id}),!1}},handlePaste:(t,n,i)=>{let{selection:r}=t.state;if(!(r instanceof a.nh&&(0,b.wL)(r.node)))return!1;let o=(0,g.bC)(e,n,i),l=(0,p.H)(i);if(l&&"image"!==l.type.name||!o)return!1;let s=o.attrs||(null==l?void 0:l.attrs);return e.commands.updateNestedAttributesAtPos(r.from,{background:{image:s,type:c.h.IMAGE,source:null==s?void 0:s.source}}),o.upload(),!0},handleDrop(t,n,i){let a=t.state.tr,r=(0,v.f0)(e,a,t,n,i),o=(0,v.vR)(t,a,n,i);return(!!r||!!o)&&((0,v.zZ)(e,a),t.dispatch(a),!0)},decorations:e=>{let{doc:t}=e,n=[];return t.descendants((e,i)=>{if("card"===e.type.name){let a=t.resolve(i),r=(0,u.TK)(a,x.jg).map(e=>e.node),d=(0,l.uw)((0,s.KA)().getState()),c=(0,b.zr)({parentCards:r,layout:e.attrs.layout,isMobileDevice:d});e.forEach((t,i)=>{let l=a.pos+i+1;if(!(0,x.sw)(t))return;let s={cardId:e.attrs.id,isCardLayoutDecoration:!0,layout:c,cardSize:e.attrs.cardSize,isNested:r.length>=1};n.push(o.NZ.node(l,l+t.nodeSize,{"data-layout-item-id":t.attrs.itemId},s))})}}),o.zF.create(t,n)}}}),j=e=>{let t=e.find(e=>e.spec.isCardLayoutDecoration);return null==t?void 0:t.spec}},3756:(e,t,n)=>{"use strict";n.d(t,{c:()=>r});var i=n(26813),a=n(42849);let r=(e,t,n,r,o)=>{let l=t.doc.nodeAt(n);if((null==l?void 0:l.type.name)!=="card")return!1;let s=l.attrs,d=(0,a.lH)(r);if((0,a.Fm)(t,n,e.schema,d),r===s.layout)return!0;t.setNodeAttribute(n,"layout",r);let{accent:c}=(0,a.dg)(t,n);if(o&&c&&c.node.attrs.background.type===i.h.NONE){let e=o();e&&t.setNodeAttribute(c.pos,"background",e)}let{layoutTemplateColumns:u}=l.attrs,p=s.layout;return u&&("left"===p&&"right"===r||"right"===p&&"left"===r)&&t.setNodeAttribute(n,"layoutTemplateColumns",u.split(" ").reverse().join(" ")),!0}},15333:(e,t,n)=>{"use strict";n.d(t,{Po:()=>C,ZL:()=>y,aI:()=>v,f0:()=>k,nA:()=>x,vR:()=>f,zZ:()=>b});var i=n(13236),a=n(81570),r=n(80917),o=n(26813),l=n(95580),s=n(19534),d=n(17539),c=n(1279),u=n(93090),p=n(77646),h=n(3756),m=n(31485),g=n(42849);let x=(e,t,n)=>{let i=e.posAtCoords({left:t.clientX,top:t.clientY});if(!i||i.inside<0)return null;let{doc:a}=e.state,{inside:r}=i,p=a.resolve(r),h=(0,l.IV)(p,g.wL),m=(0,l.IV)(p,s.jg)[0],x=n&&(0,c.H)(n),f=(0,l.q0)(r,e);if(0===h.length||!f||!m)return null;if(!x){let e=(0,u.p$)(t).filter(e=>(0,d.u3)(e.type));return 1!==e.length?null:{pos:r,rect:f,isImageUpload:!0,file:e[0]}}return x&&"image"===x.type.name?{pos:r,rect:f,isImageUpload:!1,background:{type:o.h.IMAGE,source:x.attrs.source,image:x.attrs}}:null},f=(e,t,n,i)=>{let a;try{if(!(a=x(e,n,i)))return!1}catch(e){return console.error("(caught) [CardLayoutPlugin] handleDrop checkGalleryDropTarget error:",e),!1}return!!a&&!a.isImageUpload&&(t.setNodeAttribute(a.pos,"background",a.background),t.deleteSelection(),!0)},v=(e,t,n)=>{var i,a;let r=t.posAtCoords({left:n.clientX,top:n.clientY});if(!r||r.inside<0)return null;let{doc:o}=t.state,{inside:d}=r,c=o.resolve(d),u=(0,l.IV)(c,s.jg)[0];if(!u)return null;let h=null===(a=t.dragging)||void 0===a?void 0:null===(i=a.accentImage)||void 0===i?void 0:i.cardId;if(!h)return null;let m=h===u.node.attrs.id;return c.nodeAfter&&(0,g.wL)(c.nodeAfter)&&m?null:(0,p.W0)(e,h)},b=(e,t)=>{var n;let a=m.jV.getState(e.state);if(null==a?void 0:null===(n=a.draggingData)||void 0===n?void 0:n.removeLayoutFromCardId){let n=a.draggingData.removeLayoutFromCardId;a.draggingData=null;let r=(0,i.xe)(t.doc,e=>(0,s.jg)(e)&&e.attrs.id===n)[0];return!!r&&(0,h.c)(e,t,r.pos,"blank")}return!1},y=(e,t,n)=>{let i=e.posAtCoords({left:t.clientX,top:t.clientY});if(!i||i.inside<0)return null;let{doc:a}=e.state,{inside:r}=i,p=a.resolve(r),h=a.nodeAt(r),m=(null==h?void 0:h.type.name)==="cardLayoutItem";if(!h||!m)return null;let[g,...x]=(0,l.IV)(p,s.jg),f=n&&(0,c.H)(n),v=(0,l.q0)(r,e);if(!g||!v||x.length>0)return null;let b=g.node.attrs,y="blank"===b.layout?j(t,v):"behind"===b.layout?w(t,v):null;if(!y)return null;if(!f){let e=(0,u.p$)(t).filter(e=>(0,d.u3)(e.type));return 1!==e.length?null:{pos:g.pos,isImageUpload:!0,file:e[0],...y}}return f&&"image"===f.type.name?{pos:g.pos,...y,isImageUpload:!1,background:{type:o.h.IMAGE,source:f.attrs.source,image:f.attrs}}:null},w=(e,t)=>e.clientY<t.top+80||e.clientX<t.left+80||e.clientX>t.right-80?{layout:"behind",rect:t}:null,j=(e,t)=>{let n,i=t,a=Math.min(t.height/3,100),r=t.left+40,o=t.right-40;if(e.clientX<r)n="left",i={...t.toJSON(),left:t.left,right:t.left+t.width/3,top:t.top,bottom:t.bottom};else if(e.clientX>o)n="right",i={...t.toJSON(),right:t.right,left:t.right-t.width/3,top:t.top,bottom:t.bottom};else{if(!(e.clientY<t.top+a))return null;n="top",i={...t.toJSON(),left:t.left,right:t.right,top:t.top,bottom:t.top+Math.min(t.height/3,200)}}return{rect:i,layout:n}},k=(e,t,n,r,o)=>{var l;let d;try{if(!(d=y(n,r,o)))return!1}catch(e){return console.error("(caught) [handleImageDropCreateAccent] handleDrop checkCreateCardAccentDropTarget error:",e),!1}if(!d||d.isImageUpload||!d.layout)return!1;let c=d.background;t.deleteSelection();let u=t.doc.resolve(t.mapping.map(d.pos)),p=u.nodeAfter&&"card"===u.nodeAfter.type.name?u.pos:null===(l=(0,i.eL)(u,s.jg))||void 0===l?void 0:l.pos;if(!p)return!1;(0,h.c)(e,t,p,d.layout);let{accent:m}=(0,g.dg)(t,p);return!!m&&(t.setNodeAttribute(m.pos,"background",c),t.setSelection(a.nh.create(t.doc,m.pos)),!0)},C=(e,t,n)=>{if(!n.target)return;let i=t.posAtDOM(n.target,0);if(!i||i<0)return;let a=(0,p.Oq)(e,i),l=t.state.doc.nodeAt(i);if(!l||!(0,g.wL)(l))return;if(l.attrs.background.type===o.h.NONE)return n.preventDefault(),n.stopPropagation(),!0;let s=e.view.domAtPos(i).node;if(s&&n.dataTransfer){let e=s.querySelector("[data-content-reference]");if(e){let t=e.cloneNode(!0);t.style.width="18em",t.style.height="10em",t.style.borderRadius=".375em";let i=document.createElement("div");i.style.position="absolute",i.style.top="-9999px",i.style.left="-9999px",document.body.appendChild(i),i.appendChild(t),n.dataTransfer.clearData(),n.dataTransfer.effectAllowed="move",n.dataTransfer.setData("text/html",t.innerHTML),n.dataTransfer.setData("text/plain",t.textContent||""),n.dataTransfer.setDragImage(t,0,0),setTimeout(()=>{document.body.removeChild(i)},0)}}return(0,r.f)(e,{type:"image",attrs:{...l.attrs.background.image,source:l.attrs.background.source}}),t.dragging.accentImage={cardId:null==a?void 0:a.node.attrs.id},!0}},42849:(e,t,n)=>{"use strict";n.d(t,{Eg:()=>y,Fm:()=>f,OH:()=>v,dg:()=>h,in:()=>d,l0:()=>p,lH:()=>u,o_:()=>w,sP:()=>l,tZ:()=>c,wL:()=>b,zr:()=>s});var i=n(26813),a=n(95580),r=n(77646),o=n(32570);let l=e=>["left","right"].includes(e),s=e=>{let{layout:t,parentCards:n,isMobileDevice:i}=e;return i&&"left"===t?"mobileLeft":i&&"right"===t?"mobileRight":l(t)&&d(n)?"blank":t},d=e=>e.some(e=>l(e.attrs.layout)),c=e=>{let t=u(e),n={};return Object.entries(t.items).forEach(e=>{var t;let[i,a]=e,r=null!==(t=null==a?void 0:a.style)&&void 0!==t?t:{gridArea:i};n['> [data-layout-item-id="'.concat(i,'"]')]=r}),n},u=e=>o.qA[null!=e?e:"blank"]||o.qA.blank,p=e=>{let t={},n=e.pos,i=e.nodeAfter;return i?i.descendants((e,i)=>{if(!(0,r.sw)(e))return!1;t[e.attrs.itemId]={node:e,pos:n+1+i}}):console.error("[getCardLayoutItems] could not find card node at pos ".concat(n)),t},h=(e,t)=>p(e.doc.resolve(t)),m=(e,t,n)=>{let i=e.doc.resolve(t.pos+1),a=i.blockRange(e.doc.resolve(i.end()));a&&e.wrap(a,[{type:n.nodes.cardLayoutItem}]).setMeta("annotationEvent",{type:"wrap-nodes",start:a.start,end:a.end,level:1})},g=(e,t,n,i)=>{let a=n.nodes.cardLayoutItem.createAndFill({itemId:"body",...i});e.insert(t+1,a)},x=(e,t,n,a)=>{let r=n.nodes.cardAccentLayoutItem.createAndFill({itemId:"accent",background:{type:i.h.NONE},...a});e.insert(t+1,r)},f=(e,t,n,i)=>{let a=e.doc.nodeAt(t),r=h(e,t);if(0===Object.keys(r).length){m(e,{node:a,pos:t},n),i.items.accent&&x(e,t,n);return}i.items.body&&!r.body&&g(e,t,n),i.items.accent&&!r.accent?x(e,t,n):r.accent&&"cardLayoutItem"===r.accent.node.type.name&&v(e,r.accent.pos,r.accent.node,n)},v=(e,t,n,i)=>{e.replaceRangeWith(t,t+n.nodeSize,i.nodes.cardAccentLayoutItem.createAndFill({...n.attrs}))},b=e=>"cardAccentLayoutItem"===e.type.name&&"accent"===e.attrs.itemId,y=e=>"cardLayoutItem"===e.type.name&&"body"===e.attrs.itemId,w=e=>{let t=(0,a.GY)(e,b)[0];if(t)return t.node.attrs.background}},16737:(e,t,n)=>{"use strict";n.d(t,{E:()=>s});var i=n(31085),a=n(80532),r=n(20501),o=n(3040),l=n(24221);let s=(0,n(14041).memo)(e=>{let{isLocked:t,isDark:n=!1}=e;return(0,i.jsxs)(a.az,{as:"span",className:"fa-layers fa-fw",children:[(0,i.jsx)(l.g,{icon:r.CQO}),t&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.g,{icon:o.GEE,color:n?"var(--chakra-colors-gray-900)":"var(--chakra-colors-gray-50)",transform:"shrink-3 right-6 down-6"}),(0,i.jsx)(l.g,{icon:o.DW4,transform:"shrink-8 right-6 down-6"})]})]})});s.displayName="CardLinkIcon"},22762:(e,t,n)=>{"use strict";n.d(t,{K:()=>o});var i=n(73893),a=n(64225),r=n(5933);let o=()=>{var e,t;let n=(0,a.GV)(r.Jo);if(!n)return!1;let o=i.$.SHARE_TOKEN,l=null===(e=n.accessLinks)||void 0===e?void 0:e.some(e=>""===e.token),s=null===(t=n.accessLinks)||void 0===t?void 0:t.some(e=>null===e.permission);return!!o||!!l&&!s}},12554:(e,t,n)=>{"use strict";n.d(t,{I5:()=>u,NO:()=>p,PD:()=>c,eh:()=>d,ni:()=>l,o_:()=>h});var i=n(81570),a=n(3756),r=n(32262),o=n(77646);let l=(e,t)=>{var n;let i=e.state.doc.nodeAt(t);if(!i||(null===(n=i.lastChild)||void 0===n?void 0:n.type.name)==="cardNotes")return;let r=t+i.nodeSize-1,l={type:"cardNotes",content:[{type:"paragraph"}]};if(i.firstChild&&(0,o.sw)(i.firstChild))e.chain().insertContentAt({from:r,to:r},{type:"cardNotes",content:[{type:"paragraph"}]},{updateSelection:!1}).noUndo().run();else{e.chain().command(n=>{let{tr:i}=n;(0,a.c)(e,i,t,"blank");let o=i.mapping.map(r);return i.insert(o,e.schema.nodeFromJSON(l)),!0}).noUndo().run();return}},s=e=>"cardNotes"===e.type.name,d=e=>null!==e.lastChild&&s(e.lastChild),c=e=>{let t=null;return e.nodeAfter.descendants((n,i)=>!s(n)||(t={node:n,pos:i+e.pos+1},!1)),t},u=(e,t,n)=>{let a=(0,r.hT)(e.state.doc,t);if(!a||!a.pos||n&&a.node.attrs.id!==n)return!1;let o=e.state.doc.resolve(a.pos).pos,l=o+a.node.nodeSize,{selection:s}=e.state,d=s instanceof i.U3?s.to<l:s.to<=l;return s.from>=o&&d},p=e=>"cardNotes"==e.schema.topNodeType.name,h=e=>{if(0===e.childCount)return!0;let t=!1;return e.content.nodesBetween(0,e.content.size,e=>!e.isAtom||!!e.isText||(t=!0,!1)),0===e.textContent.trim().length&&!t}},14250:(e,t,n)=>{"use strict";n.d(t,{qc:()=>b,tg:()=>y});var i=n(13236),a=n(81570),r=n(73686),o=n(17303),l=n(64225),s=n(63723),d=n(38684),c=n(95580),u=n(17119),p=n(42849),h=n(32262),m=n(12554);n(82354);var g=n(77646);class x{constructor(e=null){this.dragging=e}}let f=new a.hs("cardPlugin"),v=["card","calloutBox","image","cardLayoutItem","cardAccentLayoutItem","cardNotes","chart","smartLayoutCell"],b=e=>new a.k_({key:f,state:{init:()=>new x,apply:(e,t)=>t},props:{decorations:e=>{let{doc:t}=e,n=[];return t.descendants((e,i,a,u)=>{if(v.includes(e.type.name)){var h,x,f,b,y;let v=t.resolve(i),w=(0,c.TK)(v,g.jg).map(e=>e.node),j=(0,g.kj)(w,"width"),k=(0,g.jg)(e)?w.length:w.length-1,C=k>0,S=!C&&u===a.childCount-1,A=!!(e.firstChild&&(0,g.sw)(e.firstChild)),z=(0,p.o_)(e),I=(null==z?void 0:z.type)==="none",R=null==z?void 0:null===(h=z.mask)||void 0===h?void 0:h.effect,E=(0,d.gK)((0,g.jg)(e)?null===(x=e.attrs.container)||void 0===x?void 0:x.background:null===(b=w[0])||void 0===b?void 0:null===(f=b.attrs.container)||void 0===f?void 0:f.background),L=E?(0,s.$p)(E):void 0,_=(0,o.uw)((0,l.KA)().getState()),M=(0,p.zr)({layout:e.attrs.layout,parentCards:w,isMobileDevice:_}),N=null!==e.lastChild&&(0,m.eh)(e),T=N&&!(0,m.o_)(e.lastChild),P={isCardDecoration:!0,nestedDepth:k,isNested:C,isFirstCard:!C&&0===u,isLastCard:S,hasLayoutItem:A,hasNoAccentBackground:I,cardAccentBackgroundMaskEffect:R,isCardDark:L,cardColorOverride:E,displayLayout:M,insideSideLayout:(0,p.in)(w),parentCardId:null===(y=w[0])||void 0===y?void 0:y.attrs.id,inheritContainerWidth:j,hasCardNotesNode:N,hasNonEmptyCardNotes:T};n.push(r.NZ.node(i,i+e.nodeSize,{},P))}}),n.length>0?r.zF.create(t,n):r.zF.empty},handleDOMEvents:{drop(e){var t;let n=null===(t=e.dragging)||void 0===t?void 0:t.annotations,i=f.getState(e.state);if(!i)return!1;i.dragging=n}},handleDrop:(t,n,i)=>{var a;let r=f.getState(t.state),o=null==r?void 0:r.dragging;r&&(r.dragging=null);let l=(0,h.M7)(t,n,i);if(!l)return!1;let s=i.content.toJSON();if(!s)return!1;let d=(null===(a=s[0])||void 0===a?void 0:a.type)==="card";if(d&&o)return e.commands.rearrangeCards({from:o.origNodePos,to:l.pos,position:"above"});let c=d?s:{type:"card",content:s},{selection:p}=t.state,m=!p.empty;try{return e.chain().insertContentAt(l.pos,c,{updateSelection:!1}).command(n=>{let{tr:i}=n;if(m&&i.deleteSelection(),o){let n=(0,u.nh)({view:t,tr:i,cardWrapOffset:d?0:1,dragging:o,dropPos:l.pos});requestAnimationFrame(()=>{var t,i;null===(t=(i=e.commands).moveAnnotations)||void 0===t||t.call(i,n)})}return!0}).focusMapped(l.pos,1).run()}catch(e){return console.error("(caught) [Cardplugin] handleDrop error:",e),!0}},handlePaste:(t,n,a)=>{var r;let o=a.content.toJSON();if(!o)return!1;if((null===(r=o[0])||void 0===r?void 0:r.type)==="card"){let r=t.state.selection,o=(0,i.KP)(g.jg)(r);if(o){n.preventDefault();let t=o.pos+o.node.nodeSize;return e.commands.insertContentAt(t,a.content.toJSON()),!0}}return!1}}}),y=e=>{let t=e.find(e=>e.spec.isCardDecoration);return t?t.spec:{isNested:!1,hasLayoutItem:!1,nestedDepth:0,isFirstCard:!1,isCardDecoration:!0,isLastCard:!1,displayLayout:"blank",insideSideLayout:!1,hasNoAccentBackground:!0,hasCardNotesNode:!1,hasNonEmptyCardNotes:!1}}},6303:(e,t,n)=>{"use strict";n.d(t,{z:()=>d});var i=n(31085),a=n(74727),r=n(80853),o=n(9104),l=n(12327);let s=[{key:"sm",name:()=>l.Ru._({id:"58+81B"}),buttonText:()=>l.Ru._({id:"ZQA8ce"}),description:()=>l.Ru._({id:"LX+k3Q"})},{key:"md",name:()=>l.Ru._({id:"ovBPCi"}),buttonText:()=>l.Ru._({id:"Tmu3kA"}),description:()=>l.Ru._({id:"Of2q2s"})},{key:"lg",name:()=>l.Ru._({id:"I5S9ZE"}),buttonText:()=>l.Ru._({id:"SMwD6s"}),description:()=>l.Ru._({id:"nRirkB"})}],d=e=>{let{contentWidth:t,defaultContentWidth:n,setWidth:l,allowedWidths:d=["sm","md","lg"]}=e;return(0,i.jsx)(a.e,{isAttached:!0,size:"sm",display:"flex",children:s.filter(e=>d.includes(e.key)).map(e=>{let a=t||e.key!==n?e.key===t?"trueblue.100":void 0:"trueblue.50";return(0,i.jsx)(o.Tz,{label:(0,i.jsx)(o.c8,{label:e.name(),description:e.description()}),placement:"top",children:(0,i.jsx)(r.$,{"aria-label":e.name(),px:"2.5",boxShadow:"none",variant:"plain",bg:a,onClick:()=>{l(e.key)},children:e.buttonText()})},e.key)})})}},63751:(e,t,n)=>{"use strict";n.d(t,{AF:()=>a,HY:()=>o,Hb:()=>u,IM:()=>h,Ri:()=>s,St:()=>p,Vy:()=>g,YW:()=>c,_0:()=>d,br:()=>x,cK:()=>r,jN:()=>i,lA:()=>m,rN:()=>l,s5:()=>f});let i=3.5,a=1.5,r=2.75,o=1.5,l=2.25,s=2,d=1,c=2,u=.5,p=8,h=.5,m=60,g=95,x=115,f=47.5},85888:(e,t,n)=>{"use strict";n.d(t,{P:()=>d,S:()=>s});var i=n(2940),a=n.n(i),r=n(22544),o=n(63751),l=n(1667);let s=e=>{var t;let{theme:n,fontSize:i,isMobileDevice:a,contentWidth:r,nestedDepth:s=0}=e,d=(0,l.Qo)(i||"md"),c="lg"===r?o.br:"sm"===r?o.lA:o.Vy,u=null!==(t=n.config.fontSize)&&void 0!==t?t:1,p=u*d,h=c*(o.IM/u)/d,m=(0,l._F)(s);return{baseFontSize:p,contentWidthEms:h,themeFontSize:u,cardWidthEms:h+2*(0,l.mn)({isMobileDevice:a,numericFontSize:d})+2*m}},d=a()(e=>{let{isPresentMode:t,isNested:n,nestedDepth:i,isFullBleed:a,isThumbnail:o,theme:l,cardDimensions:d,defaultContentWidth:m,contentWidth:g,showPresentBackdrop:x,isMobileDevice:f,docZoomLevel:v,fontSize:b,cardFontScale:y=1}=e,{baseFontSize:w,contentWidthEms:j,cardWidthEms:k}=s({theme:l,fontSize:b,isMobileDevice:f,contentWidth:null!=g?g:m,nestedDepth:i});return{...(t||o?d.aspectRatio&&!r.LD?h:p:f?u:c)({baseFontSize:w,contentWidthEms:j,cardWidthEms:k,cardAspectRatio:d.aspectRatio,showPresentBackdrop:x,isNested:n,isFullBleed:a,isThumbnail:o,docZoomLevel:v,nestedDepth:i,cardFontScale:y})}}),c=e=>{let{cardWidthEms:t,cardAspectRatio:n,isNested:i,baseFontSize:a,docZoomLevel:r,cardFontScale:o,contentWidthEms:l}=e;return{"--font-size":"calc(".concat(a," * var(--card-font-scale, 1) * var(--editor-font-size, 1rem) * ").concat(r," * var(--viewport-scale-factor, 1.125))"),"--card-font-scale":"".concat(o||1),"--card-width":"calc(".concat(t,"em / var(--card-font-scale, 1))"),"--card-min-height":n&&!i?"calc(min(var(--card-width), var(--editor-width)) / ".concat(n,")"):"0px","--max-content-width":"calc(".concat(l,"em / var(--card-font-scale, 1))"),"--card-max-width":"var(--editor-width)","--media-scale":"min(1, var(--card-font-scale, 1))"}},u=e=>{let{cardWidthEms:t,baseFontSize:n,isNested:i,cardAspectRatio:a}=e;return{"--font-size":"".concat(n,"rem"),"--card-width":"".concat(t,"em"),"--card-min-height":a&&!i?"calc(min(var(--card-width), var(--editor-width)) / ".concat(a,")"):"0px","--card-max-width":"var(--editor-width)","--media-scale":"1"}},p=e=>{let{contentWidthEms:t,cardWidthEms:n,showPresentBackdrop:i,isFullBleed:a,baseFontSize:o,isNested:l,isThumbnail:s}=e,d=r.rS||r.GC?"calc(".concat(o,"rem * var(--viewport-scale-factor, 1.125))"):"calc(var(--zoom-level) * clamp(".concat(s?"0rem":"1rem",", var(--card-max-width) / ").concat(n,", 3vh))"),c=!i||a;return{"--font-size":d,"--card-width":c?"var(--editor-width)":"".concat(n,"em"),"--card-max-width":"calc(var(--editor-width) - 2 * var(--card-outer-padding-x))","--card-min-height":s?"var(--thumbnail-min-height, 0px)":c&&!l?"100vh":"0vh","--max-content-width":"calc(".concat(1.15*t,"em / var(--zoom-level))"),"--media-scale":"1"}},h=e=>{let{cardAspectRatio:t,cardWidthEms:n,isNested:i,cardFontScale:a}=e,o=r.rS||r.GC?"calc(var(--card-max-width) / ".concat(t,")"):"calc(100vh - 2 * var(--card-outer-padding-y))",l="min(var(--card-max-width), calc(var(--card-max-height) * ".concat(t,"))"),s=i?"0px":"calc(".concat(l," / ").concat(t,")"),d="calc(var(--zoom-level) * var(--card-font-scale, 1) * ".concat(l," / ").concat(n,")");return{"--card-width":l,"--card-font-scale":"".concat(a||1),"--font-size":d,"--card-max-width":"calc(var(--editor-width) - 2 * var(--card-outer-padding-x))","--card-max-height":o,"--card-min-height":s,"--media-scale":"min(1, var(--card-font-scale, 1))"}}},1667:(e,t,n)=>{"use strict";n.d(t,{Qo:()=>s,X6:()=>c,_F:()=>d,mn:()=>l,ng:()=>u});var i=n(2940),a=n.n(i),r=n(82354),o=n(63751);let l=e=>{let{isMobileDevice:t,numericFontSize:n}=e;return(t?o.AF:o.jN)/n},s=e=>"sm"===e?.875:"lg"===e?1.25:1,d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e*r.P},c=a()(e=>e?{"--top-accent-height-sm":"4.125em","--top-accent-height-md":"8em","--top-accent-height-lg":"12.375em","--top-accent-height":"var(--top-accent-height-md)","--behind-accent-height":"12em"}:{"--top-accent-height-sm":"6.25em","--top-accent-height-md":"12.5em","--top-accent-height-lg":"18.75em","--top-accent-height":"var(--top-accent-height-md)","--behind-accent-height":"24em"}),u=a()(e=>{let{isPresentMode:t,isNested:n,isFullBleed:i,displayFullBleed:a,isThumbnail:r,isMobileDevice:l,attrs:s}=e,d="none"!==s.background.type&&!n,c=r?"em":t?"rem":"em",u=a||n?"0px":l?"".concat(o.Hb).concat(c):"".concat(o.YW).concat(c),p="calc(var(--card-outer-padding-x) + ".concat(i||n?"0px":"var(--doc-padding-left, 0px)"," + ").concat(t?"var(--present-padding-left, 0px)":"0px",")"),h="calc(var(--card-outer-padding-x) + ".concat(i||n?"0px":"var(--doc-padding-right, 0px)"," + ").concat(t?"var(--present-padding-right, 0px)":"0px",")");return{outerPaddingX:u,outerPaddingY:a||n?"0px":l?"".concat(o._0/2).concat(c):!d||t||r?"".concat(o.Ri).concat(c):"".concat(o.St).concat(c),outerPaddingLeft:p,outerPaddingRight:h}})},22267:(e,t,n)=>{"use strict";n.d(t,{F:()=>s});var i=n(31085),a=n(9021),r=n(35687),o=n(61778),l=n(9104);let s=e=>{let{isDark:t,templateIcon:n,tooltip:s,label:d,isSelected:c,onClick:u,...p}=e;return(0,i.jsx)(l.Tz,{label:s,placement:"top",children:(0,i.jsx)(a.K,{onClick:u,icon:(0,i.jsxs)(r.B,{maxW:"100%",alignItems:"center",children:[n,d&&(0,i.jsx)(o.E,{maxW:"100%",w:"100%",fontSize:"xs",overflow:"hidden",textOverflow:"ellipsis",overflowX:"hidden",whiteSpace:"nowrap",textAlign:"left",children:d})]}),h:"auto",textShadow:"none",variant:"plain",p:2,flex:"1",w:"100%",cursor:"pointer",textAlign:"center",transition:"all 300ms ease",border:"1px solid",bg:t?c?"trueblue.900":"whiteAlpha.50":c?"trueblue.50":"blackAlpha.50",borderRadius:"md",boxShadow:"sm",borderColor:t?c?"trueblue.300":"whiteAlpha.100":c?"trueblue.500":"blackAlpha.100",color:t?c?"trueblue.200":"gray.400":c?"trueblue.500":"gray.500",_hover:{bg:t?c?"whiteAlpha.100":"whiteAlpha.200":c?"trueblue.100":"trueblue.50",borderColor:t?"trueblue.200":c?"trueblue.500":"trueblue.200"},position:"relative","aria-label":s,...p})})}},41737:(e,t,n)=>{"use strict";n.d(t,{R:()=>g});var i=n(31085),a=n(56824),r=n(35687),o=n(46882),l=n(80532),s=n(9104),d=n(95640),c=n(14041),u=n(91559),p=n(96964),h=n(75551),m=n(73459);let g=(0,c.memo)(function(e){let{editor:t,appendCard:n}=e,{isInOfflineMode:c}=(0,u.u)(),g={bgColor:(0,a.dU)("gray.50","blackAlpha.900")};return(0,i.jsx)(r.B,{p:2,bg:g.bgColor,children:(0,m.D)().map(e=>{let{subcategory:a,items:u}=e,m=u.filter(e=>t&&!(0,p.gT)(t,e,!1,c));if(0!==m.length)return(0,i.jsxs)(r.B,{spacing:1,children:[(0,i.jsx)(s._x,{flex:"1",textAlign:"left",children:a}),(0,i.jsx)(o.x,{gap:"1.5",gridTemplateColumns:"1fr 1fr 1fr",children:m.map(e=>(0,i.jsx)(s.Tz,{label:(0,i.jsx)(d.x6,{id:"BPbkIF"}),placement:"top",children:(0,i.jsx)(l.az,{cursor:"pointer",onClick:()=>{n(e.key)},borderRadius:"xl",_hover:{boxShadow:"lg"},transitionProperty:"box-shadow",transitionDuration:"normal",children:(0,i.jsx)(h.Z,{item:e})})},e.key))})]},a)})})})},4616:(e,t,n)=>{"use strict";n.d(t,{g:()=>l});var i=n(12327);let a=()=>[{id:"basic",name:()=>i.Ru._({id:"0wJVK+"}),templateIds:["blankCard","titleWith2ColumnImageLeft","titleWith2ColumnImageRight","titleWith2ColumnContent","titleWith2ColumnContentAndHeadings","titleWith3ColumnContent","titleWith3ColumnContentAndHeadings","titleWith4ColumnContent","titleWithBullets","titleWithBulletsAndImage"]},{id:"cardLayouts",name:()=>i.Ru._({id:"125H9i"}),templateIds:["accentLeft","accentRight","accentTop","accentRightFit","accentLeftFit","accentBackground"]},{id:"images",name:()=>i.Ru._({id:"an5hVd"}),templateIds:["titleWith2ImageColumns","titleWith3ImageColumns","titleWith4ImageColumns","titleWith3ImagesWithText","imageGallery","titleWithTeamPhotos"]},{id:"collections",name:()=>i.Ru._({id:"MISW12"}),templateIds:["titleWithTextBoxes","titleWithTimeline","titleWithLargeBulletList","titleWithIconsWithText","titleWithSmallIconsAndText","titleWithArrows"]},{id:"data",name:()=>i.Ru._({id:"+60MiA"}),templateIds:["titleWithColumnChart","titleWithBarChart","titleWithLineChart","titleWithPieChart","titleWithDonutChart","titleWithStats","barStatsWithText","titleWithCircleStats","titleWith3RowTable"]},{id:"embeds",name:()=>i.Ru._({id:"aTofd0"}),templateIds:["titleWithYouTubeEmbed","titleWithWebpageEmbed"]},{id:"progressiveDisclosure",name:()=>i.Ru._({id:"rd7L5e"}),templateIds:["titleWith3NestedCards","titleWith3Toggles"]},{id:"pyramid",name:()=>i.Ru._({id:"96Rp0u"}),templateIds:["funnelWithText","steppedPyramidWithText","pyramidWithTitleAndTextOutside","leftSteppedPyramidWithTitleAndTextOutside"]},{id:"calls-to-action",name:()=>i.Ru._({id:"gm+qKB"}),templateIds:["titleWithContentAndButton"]},{id:"misc",name:()=>i.Ru._({id:"RDie0n"}),templateIds:["titleCard","titleWithGif","titleWithDiagram"]},{id:"cardPlaceholder",name:()=>i.Ru._({id:"hx1ePY"}),templateIds:["titleWith2ColumnImageLeft","titleWith2ColumnContent","accentRight","titleWith3ImageColumns"]}],r=["basic","cardLayouts","images","collections","charts","pyramid","data","embeds","progressiveDisclosure","calls-to-action","misc"],o={default:r,insertWidget:r,modal:r,placeholder:["cardPlaceholder"]},l=e=>o[e].map(e=>a().find(t=>t.id===e)).filter(e=>!!e)},73459:(e,t,n)=>{"use strict";n.d(t,{D:()=>s,h:()=>l});var i=n(12917),a=n(4616),r=n(51436);let o={blankCard:"/new"},l=()=>(0,r.st)().reduce((e,t)=>{let{id:n,name:a,jsonContent:r}=t;return e[n]={type:"cardTemplate",key:n,nodeName:"card",name:a,...o[n]&&{shortcut:o[n]},icon:i.Qyz,execute:e=>{e.commands.insertContentAndSelect(r)}},e},{}),s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return(0,a.g)(e).map(e=>{let{name:t,templateIds:n}=e,i=n.map(e=>l()[e]);return{subcategory:t(),items:i}})}},37570:(e,t,n)=>{"use strict";n.d(t,{dG:()=>$,LK:()=>Q});var i=n(31085),a=n(80532),r=n(14041);let o=function(e,t){var n;let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!t||!t.type)return(0,i.jsx)(r.Fragment,{},s);if("text"===t.type)return(0,i.jsx)(r.Fragment,{},"text-".concat(s));let d=e.nodes[t.type];if(!d)return(0,i.jsx)(r.Fragment,{});let c=null===(n=t.content)||void 0===n?void 0:n.map((n,i)=>o(e,n,t,l+1,i));return r.createElement(d.component,{key:"".concat(d.type,"-").concat(s),node:t,depth:l,parent:a,index:s},c)};var l=n(35687),s=n(62313);let d=e=>{let{children:t,orientation:n="vertical",...a}=e,r="vertical"===n?l.B:s.z;return(0,i.jsx)(r,{spacing:"var(--block-spacing)",...a,children:t})},c=e=>(0,i.jsx)(a.az,{bg:"var(--main-color)",h:"var(--paragraph-height)",w:"100%",borderRadius:"var(--text-border-radius)",...e}),u=e=>{let{style:t="solid",children:n,...a}=e;return(0,i.jsx)(d,{w:"100%",bg:"solid"===t?"var(--main-color)":"transparent",minH:"2em",borderRadius:"var(--box-border-radius)",border:"outline"===t?"var(--border-width) solid var(--main-color)":"none",...a,children:n&&n})};var p=n(25420),h=n(35789),m=n(20501),g=n(24221);let x=e=>{let{iconSize:t="2x",icon:n,...a}=e;return(0,i.jsx)(h.o,{minH:"4em",bg:"var(--box-background-color)",color:"var(--accent-color)",borderRadius:"var(--box-border-radius)",...a,children:n||(0,i.jsx)(g.g,{icon:m.Cyq,size:t})})},f={top:{grid:{gridTemplateColumns:"1fr",gridTemplateRows:"auto 1fr",gridTemplateAreas:'"accent" "body"'},items:{accent:{type:"accent"},body:{type:"body"}},allowFit:!1},behind:{grid:{gridTemplateColumns:"1fr",gridTemplateRows:"auto"},items:{accent:{type:"accent",style:{gridArea:"1 / 1"}},body:{type:"body",style:{gridArea:"1 / 1",zIndex:1}}},allowFit:!1},blank:{grid:{gridTemplateColumns:"1fr",gridTemplateRows:"1fr",gridTemplateAreas:'"body"'},items:{body:{type:"body"}},allowFit:!1},left:{grid:{gridTemplateColumns:"".concat(37.5,"% ").concat(62.5,"%"),gridTemplateRows:"auto ",gridTemplateAreas:'"accent body"'},items:{accent:{type:"accent"},body:{type:"body"}},allowFit:!0},right:{grid:{gridTemplateColumns:"".concat(62.5,"% ").concat(37.5,"%"),gridTemplateRows:"auto",gridTemplateAreas:'"body accent"'},items:{accent:{type:"accent"},body:{type:"body"}},allowFit:!0}},v=e=>f[null!=e?e:"blank"]||f.blank,b=e=>{var t;let{node:n}=e;return(null===(t=n.attrs)||void 0===t?void 0:t.itemId)==="accent"?(0,i.jsx)(w,{...e}):(0,i.jsx)(y,{...e})},y=e=>{let{node:t,children:n}=e;return(0,i.jsx)(d,{className:"thumbnail-node-".concat(t.type),spacing:"1em",p:"1em",alignSelf:"center","data-testid":"card-layout-thumbnail",children:n})},w=e=>{var t;let{node:n,parent:a}=e,r=n.attrs,o=null==a?void 0:a.attrs,l=v(null!==(t=null==o?void 0:o.layout)&&void 0!==t?t:"blank");if(!((null==r?void 0:r.itemId)&&l.items[r.itemId]))return null;let s=l.allowFit&&(null==r?void 0:r.fitType)==="fit";return(0,i.jsx)(p.s,{className:"thumbnail-node-".concat(n.type),children:s?(0,i.jsx)(p.s,{flexDirection:"column",justifyContent:"center",alignItems:"center",bg:"var(--box-background-color)",flex:1,h:"100%",children:(0,i.jsx)(x,{w:"70%",minH:"55%",bg:"var(--main-color)"})}):(0,i.jsx)(x,{w:"100%",h:"auto",borderRadius:"none"})})};var j=n(81313);let k=e=>{var t,n,r,o,l;let{node:s,isCollapsed:d=!1,children:u}=e,h=s.attrs,m=v(null!==(r=null==h?void 0:h.layout)&&void 0!==r?r:"blank"),g=m.items;return(0,i.jsx)(p.s,{className:(0,j.cx)("thumbnail-node-".concat(s.type),d&&"collapsed"),"data-testid":"card-thumbnail",minH:d?"2.5em":"var(--card-template-min-height)",w:d?"100%":"var(--card-template-width)",h:"auto",border:"2px solid",borderColor:"var(--main-color)",borderRadius:"base",flexDirection:"column",overflow:"hidden",children:(0,i.jsxs)(p.s,{flexDirection:"column",fontSize:"".concat(.375,"em"),flex:1,justifyContent:"center",children:[!d&&(0,i.jsx)(a.az,{display:"grid",flex:1,sx:{...m.grid,...g.body?{"> .thumbnail-node-cardLayoutItem":null!==(o=null===(t=g.body)||void 0===t?void 0:t.style)&&void 0!==o?o:{gridArea:"body"}}:{},...g.accent?{"> .thumbnail-node-cardAccentLayoutItem":null!==(l=null===(n=g.accent)||void 0===n?void 0:n.style)&&void 0!==l?l:{gridArea:"accent"}}:{}},children:u}),d&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(c,{w:"50%",mx:"1em",h:"2em",borderRadius:"calc(var(--text-border-radius) * 2)"})})]})})},C={bar:m.s67,pie:m.W1p,line:m.gK3,donut:m.oDg,"horizontal-bar":m.Mkm};var S=n(46882),A=n(18733),z=n(1087),I=n(15672),R=n(95905);let E=e=>({"--flex-align":(0,R.lI)(e)}),L=e=>({["& .thumbnail-node-paragraph > div:nth-of-type(1n+".concat(e+1,")")]:{display:"none"}});var _=n(1906);let M=e=>{let{children:t,...n}=e;return(0,i.jsx)(a.az,{boxSize:"var(--bullet-size)",borderRadius:"0.25em",bg:"var(--main-color)",...n,children:t})},N="0.5em";var T=n(3040),P=n(54979);let O={xs:"sm",sm:"sm",md:"lg",lg:"xl",xl:"2x",full:"2x"},D=e=>{var t,n,a,r,o,l,s,c,u;let{node:h,parent:m,children:f}=e,v=E(null!==(c=null==m?void 0:null===(n=m.attrs)||void 0===n?void 0:null===(t=n.options)||void 0===t?void 0:t.horizontalAlign)&&void 0!==c?c:"center"),b=null!==(u=null==m?void 0:null===(r=m.attrs)||void 0===r?void 0:null===(a=r.options)||void 0===a?void 0:a.imageShape)&&void 0!==u?u:"square",y=P.z[b],w=(null==m?void 0:null===(o=m.attrs)||void 0===o?void 0:o.variantKey)==="iconsText",j=(null==m?void 0:null===(s=m.attrs)||void 0===s?void 0:null===(l=s.options)||void 0===l?void 0:l.shapeSize)||"lg",k=L(2);return(0,i.jsxs)(p.s,{className:"thumbnail-node-".concat(h.type),gap:"var(--block-spacing)",flexDirection:"column",children:[w?(0,i.jsx)(x,{minH:"0",icon:(0,i.jsx)(g.g,{icon:T.yy,size:O[j]||"lg"}),bg:w?"none":void 0}):(0,i.jsx)(x,{minH:"2em",minW:"2em",sx:y}),(0,i.jsx)(d,{css:v,sx:w?void 0:k,children:f})]})},F=e=>{var t;let{node:n,children:a}=e,r=(null===(t=n.attrs)||void 0===t?void 0:t.variantKey)==="iconsText";return(0,i.jsx)(I.r,{rowGap:"1.5em",columnGap:"1.5em",columns:r?4:3,children:a})};var H=n(61778);let W="0.25em",B=e=>{let{node:t}=e;return(0,i.jsx)(p.s,{className:"thumbnail-node-".concat(t.type),bg:"var(--main-color)",h:"1.25em"})},V=e=>{let{isFunnel:t=!1,children:n}=e;return(0,i.jsx)(I.r,{columns:1,autoRows:"1fr",gap:W,pos:"relative",mx:"auto",w:"min(100%, calc((var(--card-template-width) * 0.5) / ".concat(.375,"))"),clipPath:t?"polygon(50% 100%, 0 0, 100% 0)":"polygon(50% 0%, 0% 100%, 100% 100%)",children:n})},G=(e,t)=>Math.floor(33+67/(t-1)*e),U={bullets:{Cell:e=>{let{node:t,children:n}=e;return(0,i.jsxs)(p.s,{className:"thumbnail-node-".concat(t.type),pos:"relative",align:"flex-start",gap:"1em",flex:"1 1 auto",w:"calc(".concat(50,"% - ").concat("1em",")"),children:[(0,i.jsx)(M,{}),(0,i.jsx)(d,{flex:"1",children:n})]})},Wrapper:e=>{let{children:t}=e;return(0,i.jsx)(p.s,{gap:"1em",wrap:"wrap",children:t})}},timeline:{Cell:e=>{var t,n;let{node:r,parent:o,children:l}=e,s=(null==o?void 0:null===(n=o.attrs)||void 0===n?void 0:null===(t=n.options)||void 0===t?void 0:t.orientation)==="horizontal",c="".concat(2,"em");return(0,i.jsxs)(p.s,{className:"thumbnail-node-".concat(r.type),pos:"relative",...s?{gridColumn:"span 2",gridRow:3,align:"flex-start",justify:"center",pt:c}:{gridRow:"span 2",gridColumn:3,align:"flex-start",pl:c},orientation:"horizontal",align:"start",children:[(0,i.jsx)(M,{pos:"absolute",...s?{top:0,transform:"translateY(-50%)"}:{left:0,transform:"translateX(-50%)"},children:(0,i.jsx)(a.az,{position:"absolute",zIndex:"-1",bg:"var(--main-color)",...s?{height:"".concat(1,"em"),width:"var(--border-width)",left:"50%",top:"100%",transform:"translateX(-50%)"}:{width:"".concat(1,"em"),height:"var(--border-width)",top:"50%",transform:"translateY(-50%)",left:"100%"}})}),(0,i.jsx)(d,{flex:"1",children:l})]})},Wrapper:e=>{var t,n;let{children:r,node:o}=e,l=(null===(n=o.attrs)||void 0===n?void 0:null===(t=n.options)||void 0===t?void 0:t.orientation)==="horizontal",s=l?(0,i.jsx)(a.az,{gridRow:2,gridColumn:1,children:(0,i.jsx)(a.az,{position:"absolute",height:"var(--border-width)",width:"100%",left:"0",right:"0",bg:"var(--main-color)"})}):(0,i.jsx)(h.o,{gridColumn:2,gridRow:1,children:(0,i.jsx)(a.az,{position:"absolute",width:"var(--border-width)",top:"0",bottom:"0",bg:"var(--main-color)"})});return(0,i.jsxs)(S.x,{...l?{templateRows:"auto 0px auto",autoColumns:"1fr",justifyContent:"center",columnGap:"1em",mt:"var(--bullet-size)"}:{templateColumns:"0px 0px 1fr",autoRows:"auto",justifyContent:"center",rowGap:"1em",ml:"var(--bullet-size)"},pos:"relative","data-testid":"timeline-thumbnail",children:[s,r]})}},imagesText:{Cell:D,Wrapper:F},textBoxes:{Cell:e=>{var t,n;let{node:a,parent:r,children:o}=e,l=E((null==r?void 0:null===(n=r.attrs)||void 0===n?void 0:null===(t=n.options)||void 0===t?void 0:t.horizontalAlign)||"center");return(0,i.jsx)(u,{className:"thumbnail-node-".concat(a.type),bg:"var(--box-background-color)",p:"var(--box-padding)",css:l,children:o})},Wrapper:e=>{let{children:t}=e;return(0,i.jsx)(p.s,{gap:"var(--block-spacing)",children:t})}},stats:{Cell:e=>{var t,n,a;let{children:r,node:o,parent:l}=e,s=E((null==l?void 0:null===(n=l.attrs)||void 0===n?void 0:null===(t=n.options)||void 0===t?void 0:t.horizontalAlign)||"center");return(0,i.jsxs)(d,{className:"thumbnail-node-".concat(o.type),align:"center",justify:"start",children:[(0,i.jsx)(H.E,{color:"var(--accent-color)",fontSize:"1.5em",children:(null===(a=o.attrs)||void 0===a?void 0:a.label)||"X%"}),(0,i.jsx)(d,{w:"100%",css:s,children:r})]})},Wrapper:e=>{let{children:t,parent:n}=e,a=(null==n?void 0:n.type)==="gridCell"?1:3;return(0,i.jsx)(I.r,{columns:a,columnGap:"1.5em",rowGap:"1.5em",children:t})}},barStats:{Cell:e=>{var t,n,r;let{node:o,parent:l,children:s}=e,c=(0,_.dD)({label:(null===(t=o.attrs)||void 0===t?void 0:t.label)||null}),u=E((null==l?void 0:null===(r=l.attrs)||void 0===r?void 0:null===(n=r.options)||void 0===n?void 0:n.horizontalAlign)||"center");return(0,i.jsxs)(d,{className:"thumbnail-node-".concat(o.type),align:"center",justify:"start",children:[(0,i.jsxs)(d,{borderRadius:"calc(var(--box-border-radius) / 2)",overflow:"hidden",orientation:"horizontal",flex:1,w:"100%",bg:"var(--main-color)",children:[(0,i.jsx)(a.az,{w:"100%",bg:"var(--accent-color)",pos:"relative",h:"1.25em",children:(0,i.jsx)(a.az,{pos:"absolute",inset:0})}),(0,i.jsx)(a.az,{w:"".concat(100*c,"%"),pos:"relative"})]}),(0,i.jsx)(d,{w:"100%",css:u,children:s})]})},Wrapper:e=>{let{children:t,parent:n}=e,a=(null==n?void 0:n.type)==="gridCell"?1:2;return(0,i.jsx)(I.r,{columns:a,columnGap:"1.5em",rowGap:"1em",children:t})}},staircase:{Cell:e=>{var t,n;let{node:a,parent:r,index:o}=e,l=G(o,null!==(n=null==r?void 0:null===(t=r.content)||void 0===t?void 0:t.length)&&void 0!==n?n:1);return(0,i.jsx)(p.s,{className:"thumbnail-node-".concat(a.type),borderRadius:"2px",bg:"var(--main-color)",h:"1.25em",w:"".concat(l,"%")})},Wrapper:e=>{var t,n,a;let{node:r,children:o}=e,l=null!==(a=null==r?void 0:null===(n=r.attrs)||void 0===n?void 0:null===(t=n.options)||void 0===t?void 0:t.horizontalAlign)&&void 0!==a?a:"center",s=(0,R.lI)(l);return(0,i.jsx)(d,{align:s,gap:W,mx:"auto",w:"min(100%, calc((var(--card-template-width) * 0.5) / ".concat(.375,"))"),children:o})}},pyramid:{Cell:B,Wrapper:V},funnel:{Cell:e=>(0,i.jsx)(B,{...e}),Wrapper:e=>{let{children:t,...n}=e;return(0,i.jsx)(V,{isFunnel:!0,...n,children:t})}},circleStats:{Cell:e=>{var t,n,r,o;let{node:l,parent:s,children:c}=e,u=(0,R.lI)((null==s?void 0:null===(n=s.attrs)||void 0===n?void 0:null===(t=n.options)||void 0===t?void 0:t.horizontalAlign)||"center"),h=(0,_.dD)({label:null!==(o=null===(r=l.attrs)||void 0===r?void 0:r.label)&&void 0!==o?o:"50"});return(0,i.jsxs)(p.s,{className:"thumbnail-node-".concat(l.type),gap:"var(--block-spacing)",flexDirection:"column",children:[(0,i.jsx)(a.az,{display:"flex",justifyContent:"center",alignItems:"center",position:"relative",w:"80%",alignSelf:"center",aspectRatio:"1 / 1",_before:{content:'""',position:"absolute",top:"0",left:"0",right:"0",bottom:"0",borderRadius:"50%",background:"conic-gradient(var(--accent-color) ".concat(100*h,"%, var(--main-color) 0 ").concat((100-h)*100,"%)"),zIndex:1},_after:{content:'""',position:"absolute",top:N,left:N,right:N,bottom:N,background:"var(--card-background)",borderRadius:"50%",zIndex:2},children:(0,i.jsx)(a.az,{zIndex:"100",bg:"var(--main-color)",h:"0.5em",pos:"absolute",borderRadius:"var(--text-border-radius)",w:"40%"})}),(0,i.jsx)(d,{css:u,children:c})]})},Wrapper:e=>{let{children:t}=e;return(0,i.jsx)(I.r,{gap:"1.5em",columns:3,children:t})}},arrows:{Cell:e=>{var t,n,r,o;let{node:l,parent:s,children:c}=e,u=E((null==s?void 0:null===(n=s.attrs)||void 0===n?void 0:null===(t=n.options)||void 0===t?void 0:t.horizontalAlign)||"left"),h=(null==s?void 0:null===(o=s.attrs)||void 0===o?void 0:null===(r=o.options)||void 0===r?void 0:r.orientation)==="vertical";return(0,i.jsxs)(p.s,{className:"thumbnail-node-".concat(l.type),gap:"var(--block-spacing)",flexDirection:h?"row":"column",children:[(0,i.jsx)(a.az,{width:h?"1.5em":"100%",height:h?"100%":"1.25em",bg:"var(--accent-color)",clipPath:h?"polygon(50% 10%, 100% 0, 100% 90%, 50% 100%, 0 90%, 0% 0%)":"polygon(90% 0, 100% 50%, 90% 100%, 0% 100%, 10% 50%, 0% 0%)"}),(0,i.jsx)(d,{flex:1,css:u,p:"0.5em",px:h?0:"0.5em",pt:h?void 0:0,children:c})]})},Wrapper:e=>{var t,n;let{node:a,children:r}=e,o=(null===(n=a.attrs)||void 0===n?void 0:null===(t=n.options)||void 0===t?void 0:t.orientation)==="vertical";return(0,i.jsx)(I.r,{columns:o?1:3,rowGap:o?void 0:"1.5em",children:r})}},iconsText:{Cell:D,Wrapper:F}},K=e=>{let{children:t}=e;return(0,i.jsx)(u,{p:"var(--box-padding)",bg:"var(--box-background-color)",w:"100%",children:t})},q=e=>{let{children:t}=e;return(0,i.jsx)(u,{p:"var(--box-padding)",bg:"var(--box-background-color)",w:"100%",children:t})},J={nodes:{card:{type:"card",component:e=>{let{depth:t,...n}=e;return t>2?(0,i.jsx)(i.Fragment,{}):t>1?(0,i.jsx)(k,{...n,isCollapsed:!0}):(0,i.jsx)(k,{...n})}},cardLayoutItem:{type:"cardLayoutItem",component:b},cardAccentLayoutItem:{type:"cardAccentLayoutItem",component:b},title:{type:"title",component:e=>{let{node:t}=e;return(0,i.jsx)(a.az,{className:"thumbnail-node-".concat(t.type),w:"50%",bg:"var(--main-color)",h:"".concat((0,A.o)("title").size/2,"em"),borderRadius:"var(--text-border-radius)"})}},paragraph:{type:"paragraph",component:e=>{let{node:t}=e;return(0,i.jsxs)(l.B,{className:"thumbnail-node-".concat(t.type),"data-testid":"paragraph-thumbnail",spacing:"var(--line-spacing)",align:"var(--flex-align)",children:[(0,i.jsx)(c,{}),(0,i.jsx)(c,{}),(0,i.jsx)(c,{w:"85%"})]})}},heading:{type:"heading",component:e=>{var t;let{node:n}=e;return(0,i.jsx)(a.az,{className:"thumbnail-node-".concat(n.type),"data-testid":"heading-thumbnail",bg:"var(--main-color)",h:"".concat((0,A.o)((0,A.bZ)(null===(t=n.attrs)||void 0===t?void 0:t.level)).size/2,"em"),borderRadius:"var(--text-border-radius)"})}},bullet:{type:"bullet",component:e=>{let{node:t}=e;return(0,i.jsxs)(d,{className:"thumbnail-node-".concat(t.type),orientation:"horizontal",align:"start",pl:"0.5em",color:"var(--main-color)",children:[(0,i.jsx)(a.jl,{size:"var(--block-spacing)",bg:"var(--main-color)"}),(0,i.jsx)(d,{orientation:"horizontal",flex:"1",children:(0,i.jsx)(c,{w:"75%"})})]})}},gridLayout:{type:"gridLayout",component:e=>{var t,n;let{node:a,children:r}=e;return(0,i.jsx)(S.x,{className:"thumbnail-node-".concat(a.type),templateColumns:"repeat(".concat((null===(n=a.attrs)||void 0===n?void 0:null===(t=n.colWidths)||void 0===t?void 0:t.length)||2,", 1fr)"),gap:"var(--block-spacing)",children:r})}},gridCell:{type:"gridCell",component:e=>{var t;let{node:n,children:a}=e,r=null===(t=n.attrs)||void 0===t?void 0:t.verticalAlign;return(0,i.jsx)(d,{className:"thumbnail-node-".concat(n.type),justifyContent:r,flex:1,children:a})}},image:{type:"image",component:e=>{let{node:t}=e;return(0,i.jsx)(x,{className:"thumbnail-node-".concat(t.type)})}},mediaPlaceholder:{type:"mediaPlaceholder",component:e=>{var t;let{node:n}=e,a=n.attrs,r=null==a?void 0:a.source,o=r&&(null===(t=z.Dc[r])||void 0===t?void 0:t.icon)||null;return(0,i.jsx)(x,{className:"thumbnail-node-".concat(n.type),icon:o?(0,i.jsx)(g.g,{icon:o,size:"2x"}):void 0})}},buttonGroup:{type:"buttonGroup",component:e=>{let{node:t,children:n}=e;return(0,i.jsx)(d,{className:"thumbnail-node-".concat(t.type),orientation:"horizontal",children:n})}},button:{type:"button",component:e=>{var t;let{node:n}=e,a=(null===(t=n.attrs)||void 0===t?void 0:t.variant)||"solid";return(0,i.jsx)(u,{className:"thumbnail-node-".concat(n.type),minH:"1.5em",w:"25%",style:a})}},gallery:{type:"gallery",component:e=>{let{node:t}=e;return(0,i.jsxs)(u,{className:"thumbnail-node-".concat(t.type),display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",bg:"var(--box-background-color)",p:"0.5em",children:[(0,i.jsx)(x,{flex:2,minH:"3.5em",bg:"var(--main-color)",iconSize:"xl"}),(0,i.jsx)(x,{flex:1,minH:"3.5em",bg:"var(--main-color)",iconSize:"xl"}),(0,i.jsx)(x,{flex:2,minH:"3.5em",bg:"var(--main-color)",iconSize:"xl"})]})}},toggle:{type:"toggle",component:e=>{let{node:t,children:n}=e;return(0,i.jsx)(a.az,{className:"thumbnail-node-".concat(t.type),pl:"0.5em","data-open":"false",sx:{'&[data-open="false"]':{"> :not(:first-of-type)":{display:"none"}}},children:n})}},toggleSummary:{type:"toggleSummary",component:e=>{let{node:t}=e;return(0,i.jsxs)(d,{className:"thumbnail-node-".concat(t.type),orientation:"horizontal",color:"var(--main-color)",maxH:"1em",children:[(0,i.jsx)(g.g,{icon:T.fU5,size:"xl"}),(0,i.jsx)(c,{w:"75%"})]})}},smartLayout:{type:"smartLayout",component:e=>{var t,n;let{node:a,children:r,...o}=e,l=q;if(null===(t=a.attrs)||void 0===t?void 0:t.variantKey){let e=null===(n=U[a.attrs.variantKey])||void 0===n?void 0:n.Wrapper;e&&(l=e)}return(0,i.jsx)(S.x,{className:"thumbnail-node-".concat(a.type),gridTemplateColumns:"100%",children:(0,i.jsx)(l,{node:a,...o,children:r})})}},smartLayoutCell:{type:"smartLayoutCell",component:e=>{var t,n;let{children:a,parent:r,...o}=e,l=K;if(r&&(null===(t=r.attrs)||void 0===t?void 0:t.variantKey)){let e=null===(n=U[r.attrs.variantKey])||void 0===n?void 0:n.Cell;e&&(l=e)}return(0,i.jsx)(l,{parent:r,...o,children:a})}},diagram:{type:"diagram",component:e=>{let{node:t}=e;return(0,i.jsx)(x,{className:"thumbnail-node-".concat(t.type),icon:(0,i.jsx)(g.g,{icon:m.qTS,size:"2x"})})}},chart:{type:"chart",component:e=>{var t;let{node:n}=e;return(0,i.jsx)(x,{className:"thumbnail-node-".concat(n.type),icon:(0,i.jsx)(g.g,{icon:C[(null===(t=n.attrs)||void 0===t?void 0:t.chartType)||"bar"],size:"2x"})})}},table:{type:"table",component:e=>{let{node:t,children:n}=e;return(0,i.jsx)(a.az,{flex:1,className:"thumbnail-node-".concat(t.type),bg:"var(--box-background-color)",borderRadius:"var(--text-border-radius)",p:"0.25em",children:(0,i.jsx)(a.az,{border:"1px solid var(--main-color)",borderRadius:"var(--text-border-radius)",children:n})})}},tableRow:{type:"tableRow",component:e=>{let{node:t,children:n}=e;return(0,i.jsx)(p.s,{className:"thumbnail-node-".concat(t.type),borderBottom:"1px solid var(--main-color)",sx:{"&:last-of-type  ":{borderBottom:"none"}},children:n})}},tableCell:{type:"tableCell",component:e=>{let{node:t}=e;return(0,i.jsx)(a.az,{flex:1,className:"thumbnail-node-".concat(t.type),height:"1em",borderRight:"1px solid var(--main-color)",sx:{"&:last-of-type":{borderRight:"none"}}})}}}},$={md:"6em",lg:"8em"},Y={md:"4em",lg:"5em"},Q=e=>{let{content:t,isDark:n,size:r="md",...l}=e;return(0,i.jsx)(a.az,{css:{"--box-background-color":n?"var(--chakra-colors-gray-600)":"var(--chakra-colors-gray-100)","--main-color":n?"var(--chakra-colors-gray-500)":"var(--chakra-colors-gray-200)","--accent-color":n?"var(--chakra-colors-gray-300)":"var(--chakra-colors-gray-400)","--box-border-radius":"0.5em","--box-padding":"0.75em","--text-border-radius":"0.25em","--block-spacing":"0.75em","--bullet-size":"1em","--line-spacing":"calc(1 / 3 * 1em)","--paragraph-height":"0.5em","--border-width":"0.25em","--card-template-width":$[r],"--card-template-min-height":Y[r],"--card-background":n?"var(--chakra-colors-gray-700)":"white"},bg:"var(--card-background)",h:"auto",...l,children:o(J,t)})}},51436:(e,t,n)=>{"use strict";n.d(t,{iT:()=>l,l2:()=>u,s2:()=>d,st:()=>s,wz:()=>c});var i=n(12327),a=n(32899),r=n(4616),o=n(79194);let l=()=>{let e=()=>i.Ru._({id:"6MDj8K"});return{blankCard:{id:"blankCard",createdBy:null,name:()=>i.Ru._({id:"UQOvxZ"}),description:()=>i.Ru._({id:"V7lf6B"}),jsonContent:o.w.card([o.w.heading()]),keywords:["blank"]},titleWithBullets:{id:"titleWithBullets",name:()=>i.Ru._({id:"jzSy62"}),createdBy:null,description:()=>i.Ru._({id:"605WM6"}),jsonContent:o.w.card([o.w.heading(),o.w.bullet(),o.w.bullet(),o.w.bullet(),o.w.bullet()]),keywords:["heading","bullets"]},titleWithBulletsAndImage:{id:"titleWithBulletsAndImage",name:()=>i.Ru._({id:"ciw/iY"}),createdBy:null,description:()=>i.Ru._({id:"kTU/Ne"}),jsonContent:o.w.card([o.w.heading(),o.w.columns([[o.w.bullet(),o.w.bullet(),o.w.bullet(),o.w.bullet()],[o.w.mediaPlaceholder()]])]),keywords:["heading","bullets"]},titleWith2ColumnContent:{id:"titleWith2ColumnContent",createdBy:null,name:()=>i.Ru._({id:"uVQ8y8"}),description:()=>i.Ru._({id:"pRDCBH"}),jsonContent:o.w.card([o.w.heading(),o.w.columns([[o.w.paragraph(e())],[o.w.paragraph(e())]])]),keywords:["title","2 column","split","paragraph"]},titleWith2ColumnContentAndHeadings:{id:"titleWith2ColumnContentAndHeadings",createdBy:null,name:()=>i.Ru._({id:"/ESRO3"}),description:()=>i.Ru._({id:"acTyiC"}),jsonContent:o.w.card([o.w.heading(),o.w.columns([[o.w.h3(),o.w.paragraph(e())],[o.w.h3(),o.w.paragraph(e())]])]),keywords:["title","2 column","split","paragraph"]},titleWith3ColumnContent:{id:"titleWith3ColumnContent",createdBy:null,name:()=>i.Ru._({id:"YmAqYT"}),description:()=>i.Ru._({id:"od0FQb"}),jsonContent:o.w.card([o.w.heading(),o.w.columns([[o.w.paragraph(e())],[o.w.paragraph(e())],[o.w.paragraph(e())]])]),keywords:["heading","3 column","paragraph"]},titleWith3ColumnContentAndHeadings:{id:"titleWith3ColumnContentAndHeadings",createdBy:null,name:()=>i.Ru._({id:"3tQQ39"}),description:()=>i.Ru._({id:"Yno39F"}),jsonContent:o.w.card([o.w.heading(),o.w.columns([[o.w.h4(),o.w.paragraph(e())],[o.w.h4(),o.w.paragraph(e())],[o.w.h4(),o.w.paragraph(e())]])]),keywords:["heading","3 column","paragraph"]},titleWith4ColumnContent:{id:"titleWith4ColumnContent",createdBy:null,name:()=>i.Ru._({id:"+a/yD6"}),description:()=>i.Ru._({id:"h5ySm8"}),jsonContent:o.w.card([o.w.heading(),o.w.columns([[o.w.paragraph(e())],[o.w.paragraph(e())],[o.w.paragraph(e())],[o.w.paragraph(e())]])]),keywords:["heading","4 column","paragraph"]},titleWith2ColumnImageLeft:{id:"titleWith2ColumnImageLeft",createdBy:null,name:()=>i.Ru._({id:"6edF/U"}),description:()=>i.Ru._({id:"SzGG7G"}),jsonContent:o.w.card([o.w.columns([[o.w.mediaPlaceholder()],[o.w.heading(),o.w.paragraph(e())]],{cellAttrs:{verticalAlign:"center"}})]),keywords:["title","2 column","image","left"]},titleWith2ColumnImageRight:{id:"titleWith2ColumnImageRight",createdBy:null,name:()=>i.Ru._({id:"afp0nb"}),description:()=>i.Ru._({id:"M7cuHB"}),jsonContent:o.w.card([o.w.columns([[o.w.heading(),o.w.paragraph(e())],[o.w.mediaPlaceholder()]],{cellAttrs:{verticalAlign:"center"}})]),keywords:["title","2 column","image","right"]},titleWith2ImageColumns:{id:"titleWith2ImageColumns",createdBy:null,name:()=>i.Ru._({id:"oVMU3f"}),description:()=>i.Ru._({id:"sqVSP2"}),jsonContent:o.w.card([o.w.heading(),o.w.columns([[o.w.mediaPlaceholder(),o.w.h3(),o.w.paragraph(e())],[o.w.mediaPlaceholder(),o.w.h3(),o.w.paragraph(e())]])]),keywords:["heading","2 column","image"]},titleWith3ImageColumns:{id:"titleWith3ImageColumns",createdBy:null,name:()=>i.Ru._({id:"ZjjVJt"}),description:()=>i.Ru._({id:"kmtZuD"}),jsonContent:o.w.card([o.w.heading(),o.w.columns([[o.w.mediaPlaceholder(),o.w.h4(),o.w.paragraph(e())],[o.w.mediaPlaceholder(),o.w.h4(),o.w.paragraph(e())],[o.w.mediaPlaceholder(),o.w.h4(),o.w.paragraph(e())]])]),keywords:["heading","3 column","paragraph","image"]},titleWith4ImageColumns:{id:"titleWith4ImageColumns",createdBy:null,name:()=>i.Ru._({id:"Re1S+b"}),description:()=>i.Ru._({id:"+x8oem"}),jsonContent:o.w.card([o.w.heading(),o.w.columns([[o.w.mediaPlaceholder(),o.w.h4(),o.w.paragraph(e())],[o.w.mediaPlaceholder(),o.w.h4(),o.w.paragraph(e())],[o.w.mediaPlaceholder(),o.w.h4(),o.w.paragraph(e())],[o.w.mediaPlaceholder(),o.w.h4(),o.w.paragraph(e())]])]),keywords:["heading","4 column","image"]},titleWith3ImagesWithText:{id:"titleWith3ImagesWithText",createdBy:null,name:()=>i.Ru._({id:"cDxTeG"}),description:()=>i.Ru._({id:"rwJuIz"}),jsonContent:o.w.card([o.w.heading(),o.w.smartLayout("imagesText",[o.w.smartLayoutCell([o.w.h3(i.Ru._({id:"HX5SVx"})),o.w.paragraph(e())]),o.w.smartLayoutCell([o.w.h3(i.Ru._({id:"HX5SVx"})),o.w.paragraph(e())]),o.w.smartLayoutCell([o.w.h3(i.Ru._({id:"HX5SVx"})),o.w.paragraph(e())])],{options:{cellSize:10,shapeSize:"full",horizontalAlign:"left",imageShape:"square"}})]),keywords:["heading","image","layout"]},imageGallery:{id:"imageGallery",createdBy:null,name:()=>i.Ru._({id:"Oho0T7"}),description:()=>i.Ru._({id:"H87HG1"}),jsonContent:o.w.card([o.w.heading(),o.w.gallery([o.w.mediaPlaceholder({source:"image.custom"}),o.w.mediaPlaceholder({source:"image.custom"}),o.w.mediaPlaceholder({source:"image.custom"})])]),keywords:["heading","gallery","image"]},titleWithTeamPhotos:{id:"titleWithTeamPhotos",createdBy:null,name:()=>i.Ru._({id:"+kQMBP"}),description:()=>i.Ru._({id:"tt2nIz"}),jsonContent:o.w.card([o.w.heading(),o.w.smartLayout("imagesText",[o.w.smartLayoutCell([o.w.h3(i.Ru._({id:"6YtxFj"})),o.w.paragraph(i.Ru._({id:"GDvlUT"})),o.w.paragraph(i.Ru._({id:"Nu4oKW"}),{fontSize:"sm"})]),o.w.smartLayoutCell([o.w.h3(i.Ru._({id:"6YtxFj"})),o.w.paragraph(i.Ru._({id:"GDvlUT"})),o.w.paragraph(i.Ru._({id:"Nu4oKW"}),{fontSize:"sm"})]),o.w.smartLayoutCell([o.w.h3(i.Ru._({id:"6YtxFj"})),o.w.paragraph(i.Ru._({id:"GDvlUT"})),o.w.paragraph(i.Ru._({id:"Nu4oKW"}),{fontSize:"sm"})])],{options:{cellSize:10,shapeSize:"full",horizontalAlign:"center",imageShape:"circle"}})]),keywords:["heading","image","team"]},accentRight:{id:"accentRight",createdBy:null,name:()=>i.Ru._({id:"Czo70+"}),description:()=>i.Ru._({id:"x5nYRE"}),jsonContent:o.w.card([o.w.heading(),o.w.paragraph(e())],{layout:"right"}),keywords:["accent"]},accentRightFit:{id:"accentRightFit",createdBy:null,name:()=>i.Ru._({id:"1BvkHE"}),description:()=>i.Ru._({id:"oItvxV"}),jsonContent:o.w.card([o.w.heading(),o.w.paragraph(e())],{layout:"right"},{fitType:"fit"}),keywords:["accent"]},accentLeft:{id:"accentLeft",createdBy:null,name:()=>i.Ru._({id:"5HMSY5"}),description:()=>i.Ru._({id:"c/I4N2"}),jsonContent:o.w.card([o.w.heading(),o.w.paragraph(e())],{layout:"left"}),keywords:["accent"]},accentLeftFit:{id:"accentLeftFit",createdBy:null,name:()=>i.Ru._({id:"bGTdlK"}),description:()=>i.Ru._({id:"r4fLNa"}),jsonContent:o.w.card([o.w.heading(),o.w.paragraph(e())],{layout:"left"},{fitType:"fit"}),keywords:["accent"]},accentTop:{id:"accentTop",createdBy:null,name:()=>i.Ru._({id:"BUdX7X"}),description:()=>i.Ru._({id:"QuKih6"}),jsonContent:o.w.card([o.w.heading(),o.w.paragraph(e())],{layout:"top"}),keywords:["accent"]},accentBackground:{id:"accentBackground",createdBy:null,name:()=>i.Ru._({id:"CDFCZ5"}),description:()=>i.Ru._({id:"uFWjQ5"}),jsonContent:o.w.card([o.w.heading(),o.w.paragraph(e())],{layout:"behind"}),keywords:["accent"]},titleWith3NestedCards:{id:"titleWith3NestedCards",createdBy:null,name:()=>i.Ru._({id:"ORoO1f"}),description:()=>i.Ru._({id:"J89hiV"}),jsonContent:o.w.card([o.w.heading(),o.w.card([o.w.heading(),o.w.paragraph()]),o.w.card([o.w.heading(),o.w.paragraph()]),o.w.card([o.w.heading(),o.w.paragraph()])]),keywords:["heading","nested","card"]},titleWith3Toggles:{id:"titleWith3Toggles",createdBy:null,name:()=>i.Ru._({id:"Sf3ASu"}),description:()=>i.Ru._({id:"58JI2k"}),jsonContent:o.w.card([o.w.heading(),o.w.toggle([o.w.paragraph(e())]),o.w.toggle([o.w.paragraph(e())]),o.w.toggle([o.w.paragraph(e())])]),keywords:["heading","toggle"]},titleWithTimeline:{id:"titleWithTimeline",createdBy:null,name:()=>i.Ru._({id:"cklVjM"}),description:()=>i.Ru._({id:"Wdyt2J"}),jsonContent:o.w.card([o.w.heading(),o.w.smartLayout("timeline",[o.w.smartLayoutCell([o.w.h3(i.Ru._({id:"HX5SVx"})),o.w.paragraph(e())]),o.w.smartLayoutCell([o.w.h3(i.Ru._({id:"HX5SVx"})),o.w.paragraph(e())]),o.w.smartLayoutCell([o.w.h3(i.Ru._({id:"HX5SVx"})),o.w.paragraph(e())])],{options:{orientation:"vertical",twoSided:!1}})]),keywords:["heading","timeline"]},titleWithLargeBulletList:{id:"titleWithLargeBulletList",createdBy:null,name:()=>i.Ru._({id:"F5uDGO"}),description:()=>i.Ru._({id:"g1FTqD"}),jsonContent:o.w.card([o.w.heading(),o.w.smartLayout("bullets",[o.w.smartLayoutCell([o.w.h3(i.Ru._({id:"HX5SVx"})),o.w.paragraph(e())]),o.w.smartLayoutCell([o.w.h3(i.Ru._({id:"HX5SVx"})),o.w.paragraph(e())]),o.w.smartLayoutCell([o.w.h3(i.Ru._({id:"HX5SVx"})),o.w.paragraph(e())]),o.w.smartLayoutCell([o.w.h3(i.Ru._({id:"HX5SVx"})),o.w.paragraph(e())])],{options:{cellSize:20}})]),keywords:["heading","bullet","list"]},titleWithIconsWithText:{id:"titleWithIconsWithText",createdBy:null,name:()=>i.Ru._({id:"joUkNe"}),description:()=>i.Ru._({id:"DHZYRd"}),jsonContent:o.w.card([o.w.heading(),o.w.smartLayout("iconsText",[o.w.smartLayoutCell([o.w.h3(i.Ru._({id:"HX5SVx"})),o.w.paragraph(e())]),o.w.smartLayoutCell([o.w.h3(i.Ru._({id:"HX5SVx"})),o.w.paragraph(e())]),o.w.smartLayoutCell([o.w.h3(i.Ru._({id:"HX5SVx"})),o.w.paragraph(e())]),o.w.smartLayoutCell([o.w.h3(i.Ru._({id:"HX5SVx"})),o.w.paragraph(e())])],{options:{cellSize:10,shapeSize:"md",horizontalAlign:"center"}})]),keywords:["heading","icons"]},titleWithSmallIconsAndText:{id:"titleWithSmallIconsAndText",createdBy:null,name:()=>i.Ru._({id:"AhHG+7"}),description:()=>i.Ru._({id:"L8/5yN"}),jsonContent:o.w.card([o.w.heading(),o.w.smartLayout("iconsText",[o.w.smartLayoutCell([o.w.h3(i.Ru._({id:"HX5SVx"})),o.w.paragraph(e())]),o.w.smartLayoutCell([o.w.h3(i.Ru._({id:"HX5SVx"})),o.w.paragraph(e())]),o.w.smartLayoutCell([o.w.h3(i.Ru._({id:"HX5SVx"})),o.w.paragraph(e())]),o.w.smartLayoutCell([o.w.h3(i.Ru._({id:"HX5SVx"})),o.w.paragraph(e())])],{options:{cellSize:10,shapeSize:"sm",horizontalAlign:"left"}})]),keywords:["heading","icons"]},titleWithTextBoxes:{id:"titleWithTextBoxes",createdBy:null,name:()=>i.Ru._({id:"b7qbjN"}),description:()=>i.Ru._({id:"Cg0xBG"}),jsonContent:o.w.card([o.w.heading(),o.w.smartLayout("textBoxes",[o.w.smartLayoutCell([o.w.h3(i.Ru._({id:"HX5SVx"})),o.w.paragraph(e())]),o.w.smartLayoutCell([o.w.h3(i.Ru._({id:"HX5SVx"})),o.w.paragraph(e())]),o.w.smartLayoutCell([o.w.h3(i.Ru._({id:"HX5SVx"})),o.w.paragraph(e())])],{options:{cellSize:15}})]),keywords:["heading","boxes"]},titleWithArrows:{id:"titleWithArrows",createdBy:null,name:()=>i.Ru._({id:"YUGjgn"}),description:()=>i.Ru._({id:"SnGUtD"}),jsonContent:o.w.card([o.w.heading(),o.w.smartLayout("arrows",[o.w.smartLayoutCell([o.w.h3(i.Ru._({id:"HX5SVx"})),o.w.paragraph(e())]),o.w.smartLayoutCell([o.w.h3(i.Ru._({id:"HX5SVx"})),o.w.paragraph(e())]),o.w.smartLayoutCell([o.w.h3(i.Ru._({id:"HX5SVx"})),o.w.paragraph(e())])],{options:{cellSize:10}})]),keywords:["arrows","process","sequence","flow"]},titleWithColumnChart:{id:"titleWithColumnChart",createdBy:null,name:()=>i.Ru._({id:"kaIve5"}),description:()=>i.Ru._({id:"EE/H36"}),jsonContent:o.w.card([o.w.heading(),o.w.columnChart()]),keywords:["heading","chart","column chart"],featureFlag:"enableCharts"},titleWithBarChart:{id:"titleWithBarChart",createdBy:null,name:()=>i.Ru._({id:"JXpNuP"}),description:()=>i.Ru._({id:"2s/J1+"}),jsonContent:o.w.card([o.w.heading(),o.w.barChart()]),keywords:["heading","chart","bar chart"],featureFlag:"enableCharts"},titleWithLineChart:{id:"titleWithLineChart",createdBy:null,name:()=>i.Ru._({id:"Kt/Lzz"}),description:()=>i.Ru._({id:"eRabUB"}),jsonContent:o.w.card([o.w.heading(),o.w.lineChart()]),keywords:["heading","chart","line chart"],featureFlag:"enableCharts"},titleWithPieChart:{id:"titleWithPieChart",createdBy:null,name:()=>i.Ru._({id:"5+y+OQ"}),description:()=>i.Ru._({id:"zIzb1A"}),jsonContent:o.w.card([o.w.heading(),o.w.pieChart()]),keywords:["heading","chart","pie chart"],featureFlag:"enableCharts"},titleWithDonutChart:{id:"titleWithDonutChart",createdBy:null,name:()=>i.Ru._({id:"DNipMm"}),description:()=>i.Ru._({id:"MWtClR"}),jsonContent:o.w.card([o.w.heading(),o.w.donutChart()]),keywords:["heading","chart","donut chart"],featureFlag:"enableCharts"},titleWithStats:{id:"titleWithStats",createdBy:null,name:()=>i.Ru._({id:"w0arAq"}),description:()=>i.Ru._({id:"YEhR/1"}),jsonContent:o.w.card([o.w.heading(),o.w.smartLayout("stats",[o.w.smartLayoutCell([o.w.h3(i.Ru._({id:"nH8BJ4"})),o.w.paragraph(e())],{label:"25%"}),o.w.smartLayoutCell([o.w.h3(i.Ru._({id:"nH8BJ4"})),o.w.paragraph(e())],{label:"3/4"}),o.w.smartLayoutCell([o.w.h3(i.Ru._({id:"nH8BJ4"})),o.w.paragraph(e())],{label:"50"})],{options:{cellSize:15,shapeSize:"lg"}})]),keywords:["heading","stats"]},barStatsWithText:{id:"barStatsWithText",createdBy:null,name:()=>i.Ru._({id:"LYRXtx"}),description:()=>i.Ru._({id:"DgfiYp"}),jsonContent:o.w.card([o.w.heading(),o.w.smartLayout("barStats",[o.w.smartLayoutCell([o.w.h3(i.Ru._({id:"nH8BJ4"})),o.w.paragraph(e())],{label:"25%"}),o.w.smartLayoutCell([o.w.h3(i.Ru._({id:"nH8BJ4"})),o.w.paragraph(e())],{label:"3/4"})],{options:{cellSize:20}})]),keywords:["heading","stats"]},titleWithCircleStats:{id:"titleWithCircleStats",createdBy:null,name:()=>i.Ru._({id:"mvpFPS"}),description:()=>i.Ru._({id:"9AzsRa"}),jsonContent:o.w.card([o.w.heading(),o.w.smartLayout("circleStats",[o.w.smartLayoutCell([o.w.h3(i.Ru._({id:"HX5SVx"})),o.w.paragraph(e())],{label:"25%"}),o.w.smartLayoutCell([o.w.h3(i.Ru._({id:"HX5SVx"})),o.w.paragraph(e())],{label:"1/3"}),o.w.smartLayoutCell([o.w.h3(i.Ru._({id:"HX5SVx"})),o.w.paragraph(e())],{label:"75"})],{options:{cellSize:10,horizontalAlign:"center"}})]),keywords:["arrows","process","sequence","flow"]},titleWith3RowTable:{id:"titleWith3RowTable",createdBy:null,name:()=>i.Ru._({id:"aDo58o"}),description:()=>i.Ru._({id:"2ZoOCu"}),jsonContent:o.w.card([o.w.heading(),o.w.table([o.w.tableRow([o.w.tableCell([o.w.paragraph()]),o.w.tableCell([o.w.paragraph()]),o.w.tableCell([o.w.paragraph()])]),o.w.tableRow([o.w.tableCell([o.w.paragraph()]),o.w.tableCell([o.w.paragraph()]),o.w.tableCell([o.w.paragraph()])]),o.w.tableRow([o.w.tableCell([o.w.paragraph()]),o.w.tableCell([o.w.paragraph()]),o.w.tableCell([o.w.paragraph()])])])]),keywords:["heading","table"]},funnelWithText:{id:"funnelWithText",createdBy:null,name:()=>i.Ru._({id:"ETqzyH"}),description:()=>i.Ru._({id:"GxaYRj"}),jsonContent:o.w.card([o.w.heading(),o.w.columns([[o.w.smartLayout("funnel",[o.w.smartLayoutCell([o.w.h3()]),o.w.smartLayoutCell([o.w.h3()]),o.w.smartLayoutCell([o.w.h3()]),o.w.smartLayoutCell([o.w.h3()])],{options:{numbered:!0,outsideText:!1}})],[o.w.h2(),o.w.paragraph(e())]],{cellAttrs:{verticalAlign:"center"}})]),keywords:["heading","funnel"]},steppedPyramidWithText:{id:"steppedPyramidWithText",createdBy:null,name:()=>i.Ru._({id:"6xmZsQ"}),description:()=>i.Ru._({id:"GqW7Xg"}),jsonContent:o.w.card([o.w.heading(),o.w.columns([[o.w.smartLayout("staircase",[o.w.smartLayoutCell([o.w.h3()]),o.w.smartLayoutCell([o.w.h3()]),o.w.smartLayoutCell([o.w.h3()]),o.w.smartLayoutCell([o.w.h3()])],{options:{outsideText:!1,horizontalAlign:"center"}})],[o.w.h2(),o.w.paragraph(e())]],{cellAttrs:{verticalAlign:"center"}})]),keywords:["heading","pyramid","stepped","staircase"]},leftSteppedPyramidWithTitleAndTextOutside:{id:"leftSteppedPyramidWithTitleAndTextOutside",createdBy:null,name:()=>i.Ru._({id:"6j13ZR"}),description:()=>i.Ru._({id:"JGF7vo"}),jsonContent:o.w.card([o.w.heading(),o.w.smartLayout("staircase",[o.w.smartLayoutCell([o.w.h3()]),o.w.smartLayoutCell([o.w.h3()]),o.w.smartLayoutCell([o.w.h3()])],{options:{outsideText:!1,horizontalAlign:"left"}})]),keywords:["heading","pyramid","stepped","staircase"]},pyramidWithTitleAndTextOutside:{id:"pyramidWithTitleAndTextOutside",createdBy:null,name:()=>i.Ru._({id:"l1mM+L"}),description:()=>i.Ru._({id:"L0QPEt"}),jsonContent:o.w.card([o.w.heading(),o.w.smartLayout("pyramid",[o.w.smartLayoutCell([o.w.h3()]),o.w.smartLayoutCell([o.w.h3()]),o.w.smartLayoutCell([o.w.h3()])],{options:{numbered:!0,outsideText:!0}})]),keywords:["heading","pyramid"]},titleWithContentAndButton:{id:"titleWithContentAndButton",name:()=>i.Ru._({id:"FJJPAA"}),createdBy:null,description:()=>i.Ru._({id:"itiMvE"}),jsonContent:o.w.card([o.w.heading(),o.w.paragraph(e()),o.w.buttons([o.w.button(i.Ru._({id:"uWe4QF"}),{variant:"solid"}),o.w.button(i.Ru._({id:"zwWKhA"}),{variant:"outline"})])]),keywords:["button","heading","paragraph"]},titleWithYouTubeEmbed:{id:"titleWithYouTubeEmbed",createdBy:null,name:()=>i.Ru._({id:"D1Tqqj"}),description:()=>i.Ru._({id:"s0st+i"}),jsonContent:o.w.card([o.w.heading(),o.w.mediaPlaceholder({source:"video.youtube"})]),keywords:["heading","embed","video"]},titleWithWebpageEmbed:{id:"titleWithWebpageEmbed",createdBy:null,name:()=>i.Ru._({id:"8FOKyw"}),description:()=>i.Ru._({id:"0ngLOJ"}),jsonContent:o.w.card([o.w.heading(),o.w.mediaPlaceholder({source:"embed.custom"})]),keywords:["heading","embed","webpage"]},titleCard:{id:"titleCard",createdBy:null,name:()=>i.Ru._({id:"5U/oBM"}),description:()=>i.Ru._({id:"rYur7N"}),jsonContent:o.w.card([o.w.title(),o.w.h2()]),keywords:["title"]},titleWithGif:{id:"titleWithGif",createdBy:null,name:()=>i.Ru._({id:"wRkP2d"}),description:()=>i.Ru._({id:"kHFDdm"}),jsonContent:o.w.card([o.w.heading(),o.w.mediaPlaceholder({source:"image.giphy"})]),keywords:["heading","embed","webpage"]},titleWithDiagram:{id:"titleWithDiagram",createdBy:null,name:()=>i.Ru._({id:"i+ShMB"}),description:()=>i.Ru._({id:"6i4/hD"}),jsonContent:o.w.card([o.w.heading(),o.w.diagram()]),keywords:["heading","diagram"],featureFlag:"tldraw2"}}},s=()=>Object.values(l()),d=()=>s().reduce((e,t)=>(e[t.id]=t.jsonContent,e),{}),c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return(0,r.g)(e).map(e=>{let{name:t,templateIds:n}=e,i=n.map(e=>l()[e]);return{subcategory:t(),items:i}})},u=(e,t,n)=>{try{if(t.featureFlag&&!a.of.get(t.featureFlag)||(null==n?void 0:n(t)))return!0;return!1}catch(e){return!0}}},4381:(e,t,n)=>{"use strict";n.d(t,{a:()=>l});var i=n(64225),a=n(55037),r=n(5933),o=n(14250);let l=e=>{let t=(0,i.GV)(r.SJ),{cardColorOverride:n}=(0,o.tg)(e),{cardColorSolid:l,bodyColorSolid:s,primaryColorSolid:d,isCardDark:c}=(0,a.Dh)(t,n);return{theme:t,isDark:c,cardColor:l,bodyColor:s,primaryColor:d}}},24008:(e,t,n)=>{"use strict";n.d(t,{f:()=>g});var i=n(64225),a=n(82257),r=n(2696),o=n(5933),l=n(14e3),s=n(43125),d=n(51183),c=n(12408),u=n(32429),p=n(14250),h=n(4381),m=n(92776);let g=e=>{var t;let{node:n,decorations:s,editor:g}=e,f=n.attrs,{id:v,previewContent:b}=f,y=(0,r.FX)(),w=(0,a.oR)(),j=g.isThumbnail,k=(0,i.GV)(o.jO),[C,S]=(0,m.E)(v),A=(0,i.GV)(o.mA)?l.w.DOC_PREVIEW:"doc"===C?l.w.DOC_VIEW:l.w.SLIDE_VIEW,z=(0,i.GV)(e=>(0,o.nD)(e,A)),I=A===l.w.SLIDE_VIEW,R=(0,i.GV)(o.eo),E=(0,i.GV)(o.We),L=(0,i.GV)(o.yh),_=(0,i.GV)((0,o.tC)(v)),M=(0,c.Ms)(s),N=(0,i.GV)((0,o.WS)(v)),T=(0,d.A3)(s),{isNested:P,nestedDepth:O,isFirstCard:D,isLastCard:F,inheritContainerWidth:H,displayLayout:W,insideSideLayout:B,cardAccentBackgroundMaskEffect:V,hasLayoutItem:G,hasNonEmptyCardNotes:U}=(0,p.tg)(s),{theme:K,isDark:q}=(0,h.a)(s),{cardDimensions:J,defaultFullBleed:$,defaultContentWidth:Y,presentBackdrop:Q=!1,verticalAlign:X,fontSize:Z,scaleContentToFit:ee}=x(g),et=(0,u.iI)(J),en="default"===f.cardSize?"full"===$:"full"===f.cardSize,ei=f.verticalAlign||X||et.defaultVerticalAlign,ea=I&&!P&&!!et.aspectRatio&&!Q,er=null!==(t=f.container.width)&&void 0!==t?t:H;return{hasNonEmptyCardNotes:U,isCollapsed:N,isEditable:z,isFirstCard:D,isFocused:M,isExpandableSelected:T,isLastCard:F,isLetterboxed:ea,isMobileDevice:y,isNested:P,isPresenting:"doc"!==C&&"presentCollapsed"!==C,isPresentingCurrent:"presentCurrent"===C,isPresentingParent:"presentParent"===C,isPresentMode:I,isPublished:w,isStatic:k,isDark:q,isThumbnail:j,mode:A,nestedDepth:O,presentVariant:C,prevPresentVariant:S,previewContent:b,theme:K,attrs:f,cardId:v,isFullBleed:en,displayFullBleed:j||!P&&(en||I&&!Q),defaultContentWidth:Y,contentWidth:er,verticalAlign:ei,isWideContent:(null!=er?er:Y)==="lg",displayLayout:W,insideSideLayout:B,cardAccentBackgroundMaskEffect:V,cardDimensions:et,cardDimensionsKey:J,showPresentBackdrop:Q,hasLayoutItem:G,userZoomLevel:R,docZoomLevel:E,fontSize:Z,docZoomToFit:L,scaleContentToFit:ee,isCommentOpenOnCard:_}},x=e=>{let t=(0,i.GV)(o.Uu);if(e.isStatic)try{return(0,s.lI)(e).settings}catch(e){console.error("[caught] useDocSettings: ".concat(e))}return t}},94562:(e,t,n)=>{"use strict";n.d(t,{F:()=>s});var i=n(50933),a=n.n(i),r=n(14041),o=n(64225),l=n(5933);let s=()=>{let e=(0,o.GV)(l.SJ);return(0,r.useCallback)(()=>a()(e.config.accentBackgrounds),[e])}},92776:(e,t,n)=>{"use strict";n.d(t,{E:()=>c});var i=n(14041),a=n(22844),r=n(35002),o=n(64225),l=n(5933),s=n(14e3),d=n(69646);n(82354);let c=e=>{let t=(0,i.useRef)("doc"),n=(0,o.CU)(),c=(0,o.GV)(a.NG),u=(0,o.GV)(n=>{let i=(0,l.$i)(n)||"",a=(0,l.Ev)(n),o=(0,l.bO)(n),d=(0,l.wC)(n),u=a.parents[i]||[],p=u.reduce((e,t)=>e[t],a.tree),h=o.includes(i),m=d===s.w.SLIDE_VIEW;if(m&&!h||!m&&h)return t.current;if(!m&&!h)return"doc";let g=o.filter(e=>p[e]&&!(null==c?void 0:c[e])),x=e=>p[e]?g.indexOf(e)-g.indexOf(i):1/0,f=x(e),v=u.indexOf(e)>-1,b=g.some(t=>p[t][e]&&1>=Math.abs(x(t))),y=i===e,w=r.of.get("presentModeFlat"),j=a.parents[e];if(!j)return t.current;let k=j.includes(i);return b||w&&k?"presentCollapsed":v?"presentParent":y?"presentCurrent":-1===f?"presentPrev":1===f?"presentNext":"doc"});return(0,i.useEffect)(()=>{t.current=u;let i=n.getState();if((0,l.e4)(i))return;let a=r.of.get("presentModeFlat");"presentCollapsed"!==u||a?["presentParent","presentCurrent","presentPrev","presentNext"].includes(u)&&(0,d.wE)(e,!1):(0,d.wE)(e,!0)},[n,u,e]),[u,t.current]}},61201:(e,t,n)=>{"use strict";n.d(t,{Zp:()=>nE,ey:()=>nI});var i=n(5377),a=n(13236),r=n(81570),o=n(45214),l=n(952),s=n(64225),d=n(77646),c=n(58599),u=n(11081),p=n(95580),h=n(26884),m=n(43873),g=n(90406),x=n(29362),f=n(69646),v=n(42849),b=n(14139),y=n(20379);let w=!1;var j=n(14250),k=n(82354),C=n(31085),S=n(14041),A=n(2696),z=n(5933),I=n(22544),R=n(2600),E=n(61778),L=n(62313),_=n(18201),M=n(81313),N=n(9104),T=n(95640),P=n(22791),O=n(6027),D=n(35002),F=n(5159),H=n(1771),W=n(28895),B=n(5434),V=n(4468),G=n(14968),U=n(91725),K=n(87643),q=n(25420),J=n(80532),$=n(99100);let Y=e=>{let{cardId:t,...n}=e,[i,a]=(0,S.useState)(0),[r,o]=(0,S.useState)(!1),[l,s]=(0,S.useState)(0);return(0,S.useEffect)(()=>{let e=$.t.on("cardViewed",e=>{let{cardId:n,interval:i}=e;t===n&&a(e=>e+i)}),n=$.t.on("flush",e=>{let{viewed:n}=e;a(0),n[t]&&(o(!0),s(n[t]),setTimeout(()=>o(!1),2e3))});return()=>{e(),n()}},[t]),(0,C.jsxs)(J.az,{...n,bg:r?"#c3313a":"#f5ae00",children:[!r&&(0,C.jsxs)(J.az,{children:["time on card: ",Math.floor(i/1e3),"s"]}),r&&(0,C.jsxs)(J.az,{children:["Tracked View: ",l,"s"]})]})},Q=e=>{let t=(0,s.GV)(D.Gm),{getPos:n,node:i}=e,{id:a}=i.attrs;return t?(0,C.jsxs)(q.s,{left:8,top:2,zIndex:"overlay",position:"absolute",pointerEvents:"none",opacity:.5,contentEditable:!1,children:[(0,C.jsx)(J.az,{bg:"yellow",px:2,mr:2,borderRadius:"md",children:a}),(0,C.jsxs)(J.az,{bg:"trueblue.200",px:2,mr:2,borderRadius:"md",children:["f:",n()," t:",n()+i.nodeSize]}),(0,C.jsx)(Y,{cardId:a,px:2,borderRadius:"md"})]}):null};var X=n(11718),Z=n(31201),ee=n(19098),et=n(64444),en=n(80853),ei=n(40173),ea=n(93185),er=n(32202),eo=n(3706),el=n(35687),es=n(70323),ed=n(28478),ec=n(20501),eu=n(24221),ep=n(67965),eh=n(12327),em=n(76598),eg=n(76146),ex=n(33854),ef=n(70338),ev=n(48226),eb=n(9335),ey=n(26813),ew=n(59707),ej=n(86186),ek=n(21696),eC=n(89932),eS=n(5366),eA=n(9021),ez=n(29383);let eI=e=>{let{icon:t,customIcon:n,label:i,children:a,...r}=e;return(0,C.jsxs)(el.B,{direction:"row",spacing:4,alignItems:"center",...r,children:[t&&(0,C.jsx)(eu.g,{fixedWidth:!0,icon:t}),n&&n,(0,C.jsx)(E.E,{children:i}),(0,C.jsx)(_.h,{}),a]})},eR=e=>{let{editor:t,accentPos:n,cardId:i,hasAccentImage:a,isBehindLayout:r}=e,o=(0,S.useCallback)(()=>{n&&t.commands.updateAttributesAtPos(n,{background:{type:ey.h.NONE}})},[t,n]),l=(0,S.useCallback)(()=>{ez.R.emit("toggleEditBackgroundDrawer",{openDrawer:!0,cardId:i})},[i]);return(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(eI,{label:r?(0,C.jsx)(T.x6,{id:"23c2Uw"}):(0,C.jsx)(T.x6,{id:"e5Sy/T"}),icon:ec.Cyq,children:(0,C.jsx)(L.z,{spacing:1,children:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(en.$,{size:"sm",variant:"link",onClick:l,colorScheme:"trueblue",children:a?(0,C.jsx)(T.x6,{id:"ePK91l"}):(0,C.jsx)(T.x6,{id:"PNapeY"})}),a&&(0,C.jsx)(N.Tz,{label:(0,C.jsx)(T.x6,{id:"sGYCGx"}),placement:"top",children:(0,C.jsx)(eA.K,{"aria-label":eh.Ru._({id:"sGYCGx"}),size:"sm",variant:"link",onClick:o,colorScheme:"red",icon:(0,C.jsx)(eu.g,{icon:ec.K3F})})})]})})})})},eE=e=>{let{editor:t,getPos:n,onAddOrEditClick:i,isDisabled:a,hasBackdrop:r}=e,o=(0,S.useCallback)(()=>{t.commands.updateAttributesAtPos(n(),{background:{type:ey.h.NONE}})},[t,n]);return(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)(eI,{icon:ec.pt,label:(0,C.jsx)(T.x6,{id:"ANn8Qe"}),color:a?"gray.500":void 0,children:[a&&(0,C.jsx)(N.Tz,{placement:"top",label:(0,C.jsx)(T.x6,{id:"ZnOCf5"}),isDisabled:!a,children:(0,C.jsx)(eu.g,{fixedWidth:!0,icon:ec.k6j})}),(0,C.jsx)(L.z,{spacing:1,children:!a&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(en.$,{size:"sm",variant:"link",onClick:i,colorScheme:"trueblue",children:r?(0,C.jsx)(T.x6,{id:"ePK91l"}):(0,C.jsx)(T.x6,{id:"PNapeY"})}),r&&(0,C.jsx)(N.Tz,{label:(0,C.jsx)(T.x6,{id:"IfZ6hd"}),placement:"top",children:(0,C.jsx)(eA.K,{"aria-label":eh.Ru._({id:"IfZ6hd"}),size:"sm",variant:"link",onClick:o,colorScheme:"red",icon:(0,C.jsx)(eu.g,{icon:ec.K3F})})})]})})]})})};var eL=n(63341),e_=n(18528),eM=n(72821),eN=n(48310),eT=n(33473),eP=n(55037),eO=n(43909),eD=n(38684);n(17539);let eF=[{label:()=>eh.Ru._({id:"37VL/A"}),value:"frosted"},{label:()=>eh.Ru._({id:"W4wYdx"}),value:"faded"},{label:()=>eh.Ru._({id:"siC4v8"}),value:"none"}],eH=e=>{var t,n;let{editor:i,accentPos:a,accentBackground:r,effect:o}=e,l=(0,S.useCallback)(e=>{if(!a||!r)return;let t={background:{mask:{...r.mask,effect:e}}};i.commands.updateNestedAttributesAtPos(a,t)},[i,r,a]),s=null!=o?o:eS.$.effect,d=null!==(n=null===(t=eF.find(e=>e.value===o))||void 0===t?void 0:t.label())&&void 0!==n?n:(0,C.jsx)(T.x6,{id:"xg0y9o"});return(0,C.jsx)(eI,{label:(0,C.jsx)(T.x6,{id:"u4YODQ"}),icon:ec.B2J,children:(0,C.jsxs)(eL.W,{isLazy:!0,children:[(0,C.jsx)(e_.I,{as:en.$,variant:"plain",size:"sm",minW:"128px",boxShadow:"none",textAlign:"left",rightIcon:(0,C.jsx)(X.D,{}),children:d}),(0,C.jsx)(eM.c,{children:(0,C.jsx)(eN.i,{value:s,type:"radio",onChange:l,children:eF.map(e=>{let{value:t,label:n}=e;return(0,C.jsx)(eT.k,{value:t,children:n()},t)})})})]})})};var eW=n(31549),eB=n(49624),eV=n(44751);let eG=e=>{let{editor:t,attrs:n,getPos:i}=e,{setCardColor:a,currentColor:r,themeCardColor:o}=(0,eV.Q)({editor:t,attrs:n,getPos:i});return(0,C.jsx)(eI,{icon:ec.wIs,label:"behind"===n.layout?(0,C.jsx)(T.x6,{id:"cA3hQ0"}):(0,C.jsx)(T.x6,{id:"9d2iLQ"}),children:(0,C.jsxs)(eL.W,{isLazy:!0,children:[(0,C.jsx)(eW.v,{color:null!=r?r:o,isDefaultColor:void 0===r}),(0,C.jsx)(eM.c,{overflow:"hidden",children:(0,C.jsx)(eB.b,{currentColor:null!=r?r:o,setColor:a,source:"CardColor"})})]})})};var eU=n(6303);let eK=e=>{let{editor:t,getPos:n,contentWidth:i}=e,{defaultContentWidth:a}=(0,s.GV)(z.Uu),r=(0,S.useCallback)(e=>{t.commands.updateNestedAttributesAtPos(n(),{container:{width:e}})},[t,n]);return(0,C.jsx)(eI,{icon:ec.So7,label:(0,C.jsx)(T.x6,{id:"cPp+Ef"}),children:(0,C.jsx)(eU.z,{setWidth:r,contentWidth:i,defaultContentWidth:a,allowedWidths:["md","lg"]})})};var eq=n(59835);let eJ=e=>{let{editor:t,getPos:n,isFullWidth:i}=e,a=(0,S.useCallback)(()=>{t.commands.updateAttributesAtPos(n(),{cardSize:i?"contained":"full"})},[t,n,i]);return(0,C.jsx)(eI,{icon:ec.Cpz,label:(0,C.jsx)(T.x6,{id:"BquNv8"}),children:(0,C.jsx)(eq.d,{isChecked:i,onChange:a})})};var e$=n(14661),eY=n(3040),eQ=n(89240);let eX=e=>{let{hasCardMarginElements:t,onAddOrEditClick:n,isHidden:i}=e;return(0,C.jsx)(eI,{customIcon:(0,C.jsx)(eQ.m,{}),label:(0,C.jsx)(T.x6,{id:"JQFgkZ"}),children:(0,C.jsx)(en.$,{size:"sm",variant:"link",onClick:n,colorScheme:"trueblue",rightIcon:i&&t?(0,C.jsx)(N.Tz,{label:(0,C.jsx)(T.x6,{id:"cLtZBl"}),placement:"top",shouldWrapChildren:!0,children:(0,C.jsx)(J.az,{as:"span",color:"red.600",cursor:"help",children:(0,C.jsx)(eu.g,{icon:eY.k6j})})}):void 0,children:(0,C.jsx)(T.x6,{id:"ePK91l"})})})};var eZ=n(85452),e0=n(24293),e1=n(71957);let e2=(0,S.memo)(e=>{var t,n;let{editor:i,getPos:a,attrs:r,accentBackgroundMaskEffect:o,displayLayout:l,insideSideLayout:d,isNested:c,isFullBleed:u,contentWidth:p,cardDimensionsKey:h,editBackdrop:m,onOpenCardMarginsModal:g}=e,x=(0,s.jL)(),f=(0,S.useCallback)(()=>{x((0,eZ.md)())},[x]),{verticalAlign:b,presentBackdrop:y}=(0,s.GV)(z.Uu),{setBackgroundDrawerSourceKeyAction:w}=(0,ek.B)(),j={};try{j=(0,v.l0)(i.state.doc.resolve(a()))}catch(e){console.error("[CardStylingMenuInner] could not get layout items for card ".concat(r.id,": ").concat(e))}let k=(0,er.d)(),A=(null===(t=j.accent)||void 0===t?void 0:t.pos)||null,I=null===(n=j.accent)||void 0===n?void 0:n.node.attrs.background,R=I&&I.type!==ey.h.NONE,_="none"!==r.background.type,M="default"!==r.cardSize||_||R||r.container.width||r.container.background||"blank"!==l||r.verticalAlign,N="behind"===l&&R&&(0,eS.dY)(I),P=(0,s.GV)(z.Jq),O=(0,ex.u)("cardMarginElements")&&"webpage"!==P,{cardMarginSettings:D}=(0,s.GV)(z.Uu),F=!(0,eg.Nk)(D),{areElementsCurrentlyHiddenBySettings:H}=(0,em.j)(r),W="fluid"===h||p,B="fluid"===h||_||y,V=(0,S.useCallback)(()=>{let e={};_&&(e.background={type:ey.h.NONE,source:void 0}),e.cardSize=void 0,e.verticalAlign=void 0,e.container={...r.container,width:void 0},r.container.background&&(e.container={...r.container,background:void 0}),"blank"!==l&&(e.layout="blank"),A?i.chain().updateAttributesAtPos(a(),e).updateNestedAttributesAtPos(A,{background:{type:ey.h.NONE}}).run():i.commands.updateAttributesAtPos(a(),e);let t=eh.Ru._({id:"rQHMjX"}),n=eh.Ru._({id:"9uI/rE"}),o=k({title:(0,C.jsxs)(L.z,{children:[(0,C.jsx)(E.E,{children:t}),(0,C.jsx)(eo.N,{textDecoration:"underline",onClick:()=>{(0,ep.tN)(i.state),k.close(o)},children:n})]}),status:"info",duration:3e3,position:"top"})},[_,r.container,l,A,i,a,k]);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(el.B,{spacing:4,p:4,children:[(0,C.jsx)(e$.eW,{editor:i,layout:l,getPos:a,edgeLayoutsEnabled:!d}),"blank"!==l&&(0,C.jsx)(eR,{editor:i,accentPos:A,cardId:r.id,hasAccentImage:!!R,isBehindLayout:"behind"===l}),N&&(0,C.jsx)(eH,{editor:i,accentBackground:I,accentPos:A,effect:o}),(0,C.jsx)(eG,{editor:i,attrs:r,getPos:a}),!c&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(es.c,{my:"1"}),(0,C.jsx)(eJ,{editor:i,getPos:a,isFullWidth:u}),(0,C.jsx)(eI,{icon:ec.ecg,label:(0,C.jsx)(T.x6,{id:"vUBA/H"}),children:(0,C.jsx)(eC.c,{defaultAlignment:b,alignment:r.verticalAlign,setAlignment:e=>{i.commands.updateAttributesAtPos(a(),{verticalAlign:e})}})}),W&&(0,C.jsx)(eK,{editor:i,getPos:a,contentWidth:p}),B&&(0,C.jsx)(eE,{editor:i,getPos:a,onAddOrEditClick:()=>{w(ef.L),m(!1)},hasBackdrop:_,isDisabled:u}),O&&(0,C.jsx)(eX,{hasCardMarginElements:F,isHidden:H,onAddOrEditClick:()=>{g(),f()}})]})]}),(0,C.jsxs)(ed.B,{px:5,py:3,bg:"gray.100",mx:-1,mb:-1,justify:M?"space-between":"center",alignItems:"center",borderBottomRadius:"xl",children:[M&&(0,C.jsx)(ed.Q,{children:(0,C.jsx)(en.$,{onClick:V,variant:"link",size:"sm",colorScheme:"gray",my:0,leftIcon:(0,C.jsx)(eu.g,{icon:ec.ub2}),children:(0,C.jsx)(T.x6,{id:"6hU6uw"})})}),(0,C.jsx)(ed.Q,{children:(0,C.jsx)(en.$,{onClick:()=>{f(),eb.LF.emit(eb.DN.OPEN_PAGE_SETUP,"cards")},variant:"link",size:"sm",colorScheme:"gray",my:0,leftIcon:(0,C.jsx)(eu.g,{icon:ec.BH7}),children:(0,C.jsx)(T.x6,{id:"fvaOtb"})})})]})]})}),e4=(0,S.memo)(e=>{let{attrs:t,editor:n,getPos:i,onOpenCardMarginsModal:a}=e,{color:r,bg:o,hoverColor:l,hoverBg:d,borderColor:c}=(0,ej.Nb)(),u=(0,S.useRef)(null),p=(0,s.GV)((0,eZ.C_)(t.id,"styling")),h=(0,s.jL)(),m=(0,S.useCallback)(()=>{h((0,eZ.md)())},[h]),g=(0,S.useCallback)(()=>{h((0,eZ.CM)({cardId:t.id,menuType:"styling"}))},[h,null==t?void 0:t.id]),{openBackgroundTab:x,...f}=(0,e1.O)(),v=(0,S.useCallback)(e=>{(0,ev.e)(n,i(),e)},[n,i]);return(0,Z.j)({ref:u,handler:e=>{if(!p)return;let n=e.target;if(n&&n instanceof Element){var i;let e=n.closest('[data-card-styles-menu-trigger="'.concat(t.id,'"]')),a=!!(null===(i=n.closest(".chakra-modal__content-container"))||void 0===i?void 0:i.querySelector("[data-edit-background-drawer]")),r=!!n.closest("[data-media-drawer-menu]");if(e||a||r)return}m()}}),(0,C.jsxs)(N.L8,{isDark:!1,children:[(0,C.jsx)(L.z,{spacing:1,onClick:ew.dG,contentEditable:!1,pointerEvents:"auto",children:(0,C.jsxs)(ee.A,{isLazy:!0,returnFocusOnClose:!1,isOpen:p,onClose:m,closeOnBlur:!1,children:[(0,C.jsx)(N.Tz,{label:(0,C.jsx)(T.x6,{id:"F153E+"}),placement:"top",shouldWrapChildren:!0,children:(0,C.jsx)(et.W,{children:(0,C.jsxs)(en.$,{"data-card-styles-menu-trigger":t.id,height:e0.PN,fontWeight:"900",alignItems:"center",fontFamily:"body",display:"flex",backdropFilter:"blur(8px)",borderRadius:"sm",borderColor:c,color:r,boxShadow:"sm",cursor:"pointer",fontSize:"14px",bg:o,px:.5,_hover:{color:l,background:d},onClick:g,children:[(0,C.jsx)(eu.g,{icon:ec.fyG,fixedWidth:!0}),(0,C.jsx)(X.D,{})]})})}),(0,C.jsx)(ei.Z,{children:(0,C.jsx)(ea.h,{"data-card-styles-menu":!0,ref:u,minWidth:"320px",width:"fit-content",maxWidth:"min(360px, 80vw)",fontFamily:"body",fontSize:"md",border:"none",children:(0,C.jsx)(e2,{...e,editBackdrop:x,onOpenCardMarginsModal:a})})})]})}),(0,C.jsx)(e1.G,{editor:n,updateNestedAttributes:v,background:t.background,container:t.container,...f})]})});var e5=n(33617),e6=n(56824),e3=n(74727),e8=n(10458),e7=n(15890),e9=n(87122);let te=e=>{let{suggestions:t,cardId:n,isDark:i,editor:a}=e,{color:r,bg:l}=(0,ej.Nb)(),d=(0,ej.wP)(),{status:c,variants:u,selected:p,loadingMessage:h,interactionId:m,instructions:g,operation:x}=t,f=(0,s.jL)(),v=(0,S.useCallback)((e,t)=>{f((0,o.S6)({cardId:n,variantId:e})),(0,e9.ck)(a,n,t)},[f,n,a]),b=(0,e8.st)(),y=(0,S.useCallback)(()=>{var e;null==b||b.track(e8.VV.AI_CARD_VARIATION_KEPT,{cardId:n,variantId:p,isOriginal:null===(e=u.find(e=>e.id===p))||void 0===e?void 0:e.isOriginal,interactionId:m,source:"button"}),f((0,o.YB)({cardId:n}))},[f,n,p,b,u,m]),w=(0,e6.dU)("trueblue.500","trueblue.100"),j=(0,e6.dU)("trueblue.50","gray.700"),k=(0,e6.dU)("red.100","red.700"),A=(0,e6.dU)("red.500","red.100");return(0,C.jsx)(L.z,{contentEditable:!1,userSelect:"none",align:"center",position:"absolute",left:"50%",transform:"translateX(-50%)",marginLeft:-3,pointerEvents:"auto",spacing:2,children:"loading"===c?(0,C.jsxs)(L.z,{borderWidth:"1px",...d,pointerEvents:"none",children:[(0,C.jsx)(eu.g,{icon:eY.p7g}),(0,C.jsxs)(E.E,{children:[h||(0,C.jsx)(T.x6,{id:"RQqcwV"}),"..."]})]}):"error"===c?(0,C.jsxs)(L.z,{borderWidth:"1px",...d,_hover:{},bg:k,color:A,children:[(0,C.jsx)(eu.g,{icon:ec.QJT}),(0,C.jsx)(E.E,{children:(0,C.jsx)(T.x6,{id:"nwtY4N"})}),(0,C.jsx)(eA.K,{"aria-label":eh.Ru._({id:"yz7wBu"}),size:"xs",minW:4,minH:4,h:4,isRound:!0,variant:"ghost",onClick:y,icon:(0,C.jsx)(eu.g,{icon:ec.GRI}),colorScheme:i?"white":"blackAlpha"})]}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(e3.e,{spacing:"-1px",children:[u.map(e=>(0,C.jsx)(en.$,{...d,color:p===e.id?w:r,bg:p===e.id?j:l,variant:p===e.id?"plainSelected":"plain",onClick:()=>v(e.id,e.card),position:"relative",children:e.label},e.id)),(0,C.jsx)(N.Tz,{label:(0,C.jsx)(T.x6,{id:"MuX+Gc"}),placement:"top",children:(0,C.jsx)(eA.K,{...d,icon:(0,C.jsx)(eu.g,{icon:eY.e68}),"aria-label":eh.Ru._({id:"MuX+Gc"}),onClick:y})})]}),m&&(0,C.jsx)(e7.E,{interactionId:m,operation:null==x?void 0:x.key,template:null==x?void 0:x.template,instructions:g})]})})};var tt=n(43342),tn=n(15355),ti=n(71197),ta=n(32849),tr=n(58432),to=n(48984),tl=n(42717);let ts=e=>{let{theme:t,editor:n,getPos:i,updateAttributes:a,input:r}=e,o=(0,D.u)("generateCardLayoutVariants"),{getContextAndGenerate:l,isGenerating:s}=(0,to.ds)({theme:t,editor:n,getPos:i,input:r,randomTemplate:!0}),d=(0,ti.tO)(()=>l(r.prompt),"generateCard",e8.VV.GAMMA_UPSELL_CALLOUT_AI_CREDITS_GENERATE_CARD),c=(0,ej.wP)(),u=(0,ta.ez)("unlimited_credits"),{toggleCardLayoutVariantsPanel:p,isCardLayoutVariantsPanelOpen:h}=(0,tr.Y)(),m=(0,S.useCallback)(()=>{if(!o)return;h&&p({override:"closed"});let e=n.state.doc.nodeAt(i());e&&(n.commands.selectNodeAtPos(i()),p({override:"open",isResizable:!1,props:{cardId:e.attrs.id,selectedCardRange:{from:n.state.selection.from,to:n.state.selection.from+e.nodeSize},editor:n}}))},[n,i,p,h,o]);return(0,C.jsx)(L.z,{contentEditable:!1,userSelect:"none",align:"center",position:"absolute",left:"50%",transform:"translateX(-50%)",marginLeft:-3,pointerEvents:"auto",children:s?(0,C.jsx)(J.az,{px:4,children:(0,C.jsx)(tt.y,{size:"xs",color:"purple.500"})}):(0,C.jsxs)(L.z,{spacing:2,children:[(0,C.jsx)(N.Tz,{label:(0,C.jsx)(T.x6,{id:"K1Ro+T"}),placement:"top",children:(0,C.jsx)(en.$,{...c,leftIcon:(0,C.jsx)(eu.g,{icon:eY.CeG}),"aria-label":eh.Ru._({id:"K1Ro+T"}),onClick:()=>a({layoutTemplateColumns:null,generatorInput:{...tl.O,prompt:r.prompt}}),children:(0,C.jsx)(T.x6,{id:"550oRP"})})}),o?(0,C.jsx)(en.$,{...c,leftIcon:(0,C.jsx)(eu.g,{icon:eY.p7g}),onClick:()=>{m(),a({generatorInput:null})},children:(0,C.jsxs)(L.z,{spacing:.5,alignItems:"center",justifyContent:"center",children:[(0,C.jsx)(E.E,{children:(0,C.jsx)(T.x6,{id:"SiSG+p"})}),!u&&(0,C.jsx)(tn.G,{type:"generateCard",ml:0,color:"gray.500"})]})}):(0,C.jsxs)(e3.e,{spacing:"-1px",children:[(0,C.jsx)(N.Tz,{label:(0,C.jsxs)(R.T,{spacing:.5,pb:1,children:[(0,C.jsx)(E.E,{children:(0,C.jsx)(T.x6,{id:"SiSG+p"})}),!u&&(0,C.jsx)(tn.G,{type:"generateCard",ml:0})]}),placement:"top",children:(0,C.jsx)(eA.K,{...c,icon:(0,C.jsx)(eu.g,{icon:eY.VH5}),onClick:d,"aria-label":eh.Ru._({id:"KDw4GX"})})}),(0,C.jsx)(N.Tz,{label:(0,C.jsx)(T.x6,{id:"fyn0X5"}),placement:"top",children:(0,C.jsx)(eA.K,{...c,icon:(0,C.jsx)(eu.g,{icon:eY.e68}),"aria-label":eh.Ru._({id:"fyn0X5"}),onClick:()=>{a({generatorInput:null}),p({override:"closed"})}})})]}),r.interactionId&&(0,C.jsx)(e7.E,{interactionId:r.interactionId,operation:"generate-card",template:r.template,instructions:r.prompt})]})})};var td=n(83292),tc=n(15428),tu=n(79428);function tp(){let e=(0,td._)(["\n  0% {\n    margin-inline: 0;\n  }\n  100% {\n    margin-inline: var(--nested-card-margin);\n  }\n"]);return tp=function(){return e},e}let th=(0,tc.i7)(tp()),tm=e=>{let{attrs:t,isFullBleed:n,displayFullBleed:i,isNested:a,isPresentMode:r,isEditable:o,isFocused:l,isDark:s,isLetterboxed:d,showPresentBackdrop:c,isCommentOpenOnCard:u,theme:p,children:h}=e,{id:m,container:g}=t,x=(0,eO.NC)(p,g),f=i?tu.xE:tu.CO,v=r&&!a,b=(0,eP.ZI)(p,g.background?x:void 0),y=n?{width:a||d?"var(--card-width)":"100%"}:{zIndex:a?u?G.$.nestedCardBodyWithComment:G.$.nestedCardBody:void 0,width:"var(--card-width)"},w=v?{minW:c||d?"auto":"100%",minH:"var(--card-min-height)",my:"auto"}:{minW:"0%",minH:"var(--card-min-height)"},j=I.D1?0:k.M2;return(0,C.jsxs)(q.s,{className:(0,M.cx)(k.p$),"data-card-body":m,"data-selection-ring":!0,"data-guider-highlight":"card-body","data-letterboxed":d?"true":void 0,"data-content-reference":!0,"data-testid":"card-body","data-hide-comments":r,fontSize:"var(--font-size)",animation:a?"".concat(th," ").concat(j,"ms ease-out forwards"):void 0,position:"relative",...y,...w,maxW:"var(--card-max-width)",css:{"--grid-outline-color":s?"var(--chakra-colors-gray-700)":"var(--chakra-colors-gray-200)",...b,"--card-border-radius":i?0:b["--card-border-radius"]},justify:"center",borderRadius:"var(--card-border-radius)",ps:n&&!a?"var(--doc-padding-left)":void 0,pe:n&&!a?"var(--doc-padding-right)":void 0,_hover:o&&i&&!l?{"> .card-body-background":{outline:"2px solid var(--grid-outline-color)"}}:void 0,outline:d?"max(50vw, 50vh) solid black":void 0,children:[(0,C.jsx)(J.az,{position:"absolute",inset:"0",sx:f,className:"card-body-background",borderRadius:"inherit",contentEditable:!1,zIndex:r?-1:void 0,outline:l?"2px solid var(--chakra-ring-color)":void 0,outlineOffset:n&&!r?"-2px":void 0,border:a&&"0em"===b["--card-border-width"]?"1px solid var(--neutral-border-color)":void 0,"data-export-master":!!i||void 0}),(0,C.jsx)(N.L8,{isDark:s,children:h})]})};var tg=n(91559),tx=n(64130),tf=n(77256),tv=n(66159),tb=n(41737),ty=n(88459),tw=n(27649);let tj=(0,S.memo)(function(e){let{editor:t,getPos:n,display:i,isNested:a}=e,r=(0,tx.fW)(),{isInOfflineMode:o}=(0,tg.u)(),l=(0,A.FX)(),s=(0,D.u)("aiRewrite")&&!l,d=(0,S.useCallback)(e=>{let i=n(),a=t.view.state.doc.nodeAt(i);if(!a){console.error("[CardDivider] Cannot append card. Node unknown");return}let r=i+a.nodeSize,o="aiCardAfter"===e?e8.oU.CARD_DIVIDER_AI:e?e8.oU.CARD_DIVIDER_DROPDOWN:e8.oU.CARD_DIVIDER,{cardToAdd:l,command:s}=(0,ty.j)(e);(0,tf.Jb)(s,o),t.chain().insertContentAt(r,(0,tw.iM)(l)).command(e=>{let{tr:t}=e;return t.setMeta(tv.G,!0),!0}).focus().selectInsertedNode().run()},[t,n]),c=(0,e6.dU)("gray.100","gray.700"),u=(0,e6.dU)(!1,!0),p=(0,D.u)("addCard2");return(0,C.jsx)(eL.W,{isLazy:!0,children:e=>{let{isOpen:n}=e;return(0,C.jsx)(q.s,{contentEditable:!1,suppressContentEditableWarning:!0,className:"card-divider","data-is-nested-card":String(a),position:"absolute",zIndex:G.$.cardDivider,bottom:-4,w:"100%",justify:"center",align:"center",display:i,opacity:n?1:0,transitionProperty:"opacity",transitionDuration:"normal","data-print-hidden":!0,"data-id":"card-divider",children:(0,C.jsxs)(e3.e,{size:"sm",isAttached:!0,"data-guider-highlight":"add-card-button",className:"card-divider-button-group",variant:"plain",shadow:"md",borderRadius:"md",opacity:"1",transitionProperty:"opacity",transitionDuration:"normal",dir:r?"rtl":"ltr",children:[(0,C.jsx)(N.Tz,{label:(0,C.jsx)(T.x6,{id:"7iE+3N"}),children:(0,C.jsx)(eA.K,{className:"insert-card-button",variant:"plain","aria-label":eh.Ru._({id:"g+7nXG"}),icon:(0,C.jsx)(eu.g,{icon:eY.QLR}),onClick:()=>d(),onMouseDown:ew.JL,size:"sm",shadow:"none",borderRadius:"md",minW:12,transitionProperty:"none",borderColor:c})}),s&&(0,C.jsx)(N.Tz,{label:(0,C.jsx)(T.x6,{id:"kLZLXX"}),children:(0,C.jsx)(eA.K,{className:"insert-ai-card-button",variant:"plain","aria-label":eh.Ru._({id:"g+7nXG"}),icon:(0,C.jsx)(L.z,{spacing:0,opacity:o?.3:1,children:(0,C.jsx)(eu.g,{icon:eY.p7g})}),onClick:()=>{if(!o){if(p){d("aiCardAfter");return}eb.LF.emit("queueDesignPartnerTask",{message:eh.Ru._({id:"JoMQgx",values:{placeholder:""}}),submit:!1})}},onMouseDown:ew.JL,size:"sm",shadow:"none",minW:12,transitionProperty:"none",borderColor:c,borderRadius:"md",borderInlineStart:"none",borderInlineEndRadius:"none",tabIndex:o?-1:void 0,pointerEvents:o?"none":"auto"})}),(0,C.jsxs)(ee.A,{placement:"end",isLazy:!0,closeOnBlur:!0,closeOnEsc:!0,children:[(0,C.jsx)(N.Tz,{label:(0,C.jsx)(T.x6,{id:"UgOs5x"}),shouldWrapChildren:!0,children:(0,C.jsx)(et.W,{children:(0,C.jsx)(eA.K,{"aria-label":"Add from template",size:"sm",shadow:"none",borderColor:c,icon:(0,C.jsx)(X.D,{}),fontSize:"lg",fontWeight:"500",borderRadius:"md",borderInlineStart:"none",borderInlineStartRadius:"none","data-guider-highlight":"add-card-template-button",transitionProperty:"none",onMouseDown:ew.JL})})}),(0,C.jsx)(ei.Z,{children:(0,C.jsx)(ea.h,{shadow:"xl",maxH:"90vh",overflowY:"scroll",w:"400px",p:"0",borderColor:u?c:void 0,children:(0,C.jsx)(tb.R,{editor:t,appendCard:d})})})]})]})})}})});var tk=n(91151);let tC=e=>{let{isNested:t,isMobileDevice:n,cardMarginSettings:i,isClearBackground:a,cardAttrs:r}=e,o=(0,s.GV)(z.Jq),{areElementsCurrentlyHiddenBySettings:l}=(0,em.j)(r);return n||t||(0,eg.Nk)(i)||a||"webpage"===o||l},tS=e=>{let{isNested:t,isMobileDevice:n,isClearBackground:i,cardAttrs:a}=e,{cardMarginSettings:r}=(0,s.GV)(z.Uu),o=tC({isNested:t,cardMarginSettings:r,isMobileDevice:n,isClearBackground:i,cardAttrs:a}),l=!!r.topRight;return!o&&l};var tA=n(28997),tz=n(22071),tI=n(32429);let tR=e=>{let{isFocused:t}=e;return(0,C.jsx)(J.az,{position:"absolute",inset:"0",pointerEvents:"none",overflow:"hidden",display:{base:"none",lg:"block"},opacity:t?1:0,className:"card-height-guide",children:(0,C.jsxs)(J.az,{position:"absolute",top:"var(--card-min-height)",insetStart:"0",w:"100%",h:"1px",borderBottom:"2px dashed",borderBottomColor:"var(--body-color)",opacity:"0.25",children:[(0,C.jsx)(tE,{insetStart:0}),(0,C.jsx)(tE,{insetEnd:0})]})})},tE=e=>{let{cardDimensions:t}=(0,s.GV)(z.Uu),{label:n}=(0,tI.iI)(t);return(0,C.jsx)(N.Tz,{placement:"top",w:"250px",label:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(E.E,{children:["Your content is too tall to fit the ",n()," size, so it may shrink or overflow when presenting or exporting."]}),(0,C.jsx)(E.E,{color:"gray.500",children:(0,C.jsx)(T.x6,{id:"yrOr7z"})})]}),children:(0,C.jsx)(J.az,{position:"absolute",w:"var(--card-inner-padding-x)",h:"".concat(20,"px"),top:"-".concat(10,"px"),pointerEvents:"auto",cursor:"help",...e})})};var tL=n(62230),t_=n(2219),tM=n(76166),tN=n(22938),tT=n(27559),tP=n(70403),tO=n(55576),tD=n(11070),tF=n(24460),tH=n(33916);let tW={src:"/_next/static/media/Stars-2.48f5ca51.svg"};var tB=n(92667),tV=n(15672),tG=n(18651),tU=n(12917),tK=n(39286),tq=n(22267),tJ=n(50336);let t$=e=>{let{isDark:t,selectedTemplate:n,setSelectedTemplate:i,isDisabled:a}=e,r=(0,tJ.W)(),o=t?"invert(.8) brightness(1.2)":"invert(0)",l=t?"invert(.8) brightness(2)":"invert(0)";return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(E.E,{color:"text.default",fontSize:"sm",fontWeight:"normal",children:(0,C.jsx)(T.x6,{id:"hQDrYd"})}),(0,C.jsxs)(tV.r,{spacing:2,columns:[2,3,5,r.length+1],children:[(0,C.jsx)(tq.F,{isDark:t,templateIcon:(0,C.jsx)(eu.g,{icon:tU.swh,fixedWidth:!0,size:"lg"}),label:(0,C.jsx)(T.x6,{id:"wtGmzA"}),tooltip:eh.Ru._({id:"zopynZ",values:{GAMMA_PROPER_NOUN:tK.On}}),isSelected:null===n,onClick:()=>i(null),isDisabled:a}),r.map(e=>{let{key:r,image:s,name:d}=e,c=r===n;return(0,C.jsx)(tq.F,{isDark:t,templateIcon:(0,C.jsx)(tG._,{src:s.src,filter:c?l:o,bg:"white"}),tooltip:d,isSelected:c,onClick:()=>i(r),isDisabled:a},r)})]})]})},tY=e=>{let{theme:t,handle:n,editor:i,getPos:a,input:r,displayFullBleed:o,isFocused:l}=e,{isInOfflineMode:s}=(0,tg.u)(),{isGenerating:d,getContextAndGenerate:u,updateInput:p,locale:h}=(0,to.ds)({theme:t,editor:i,getPos:a,input:r}),m=(0,tB.lW)(p,500),{prompt:g,template:x}=r,[f,v]=(0,S.useState)(g),b=(0,ti.tO)(()=>{p({prompt:f}),u(f)},"generateCard",e8.VV.GAMMA_UPSELL_CALLOUT_AI_CREDITS_GENERATE_CARD),y=(0,e6.dU)(!1,!0),w=(0,S.useRef)(null),{suggestions:j,generateSuggestionsStatus:k}=(0,to.ay)(i,l);return((0,S.useEffect)(()=>{l&&w.current&&setTimeout(()=>{var e;null===(e=w.current)||void 0===e||e.focus()})},[l]),d)?(0,C.jsxs)(q.s,{position:"relative",maxW:"100%",w:"var(--card-width)",minH:32,contentEditable:"false",justify:"center",direction:"column",p:"var(--card-inner-padding)",children:[n,(0,C.jsxs)(el.B,{zIndex:1,w:"100%",children:[(0,C.jsx)(tL.E,{height:"3em",w:"33%",mb:4}),(0,C.jsx)(tL.E,{height:"1.5em"}),(0,C.jsx)(tL.E,{height:"1.5em"}),(0,C.jsx)(tL.E,{height:"1.5em"}),(0,C.jsx)(tL.E,{height:"1.5em",w:"75%"})]})]}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(c.$p,{style:{position:"absolute",opacity:0}}),(0,C.jsxs)(q.s,{contentEditable:"false",w:"var(--card-width)",maxW:"100%",minH:32,position:"relative",borderRadius:o?"none":"var(--card-border-radius)",p:"var(--card-inner-padding)",direction:"column",justify:"center",m:"-1px",fontFamily:"body",onMouseDown:e=>{!(e.target instanceof HTMLElement&&e.target.closest(".drag-handle"))&&(e.preventDefault(),w.current&&w.current===document.activeElement?w.current.blur():i.view.hasFocus()&&i.commands.blur())},children:[(0,C.jsx)(J.az,{bg:y?"gradient.secondary-dark":"gradient.secondary-light",bgSize:"cover",bgPosition:"center center",borderRadius:"inherit",pos:"absolute",inset:0,pointerEvents:"none",w:o?"var(--editor-width)":void 0,insetStart:o?"calc(50% - var(--doc-padding-left, 0px) / 2 + var(--doc-padding-right, 0px) / 2)":void 0,transform:o?"translateX(-50%)":void 0}),n,(0,C.jsx)(J.az,{position:"absolute",zIndex:0,pointerEvents:"none",inset:0,bgImage:"url(".concat(tW.src,")"),bgRepeat:"repeat",bgPosition:"center center",sx:{animation:"".concat(tD.K," 180s linear infinite"),maskImage:"linear-gradient(to left, rgba(0,0,0,.75), transparent, rgba(0,0,0,.75))",maskRepeat:"repeat",maskSize:"140px"},opacity:y?.2:1}),(0,C.jsx)(eA.K,{position:"absolute",top:2,insetEnd:2,variant:"ghost",colorScheme:y?"gray":"blackAlpha",isRound:!0,size:"sm","aria-label":eh.Ru._({id:"DIQZR1"}),icon:(0,C.jsx)(eu.g,{fixedWidth:!0,icon:ec.GRI}),onClick:()=>{m.cancel(),i.commands.deleteCard(a())}}),(0,C.jsxs)(el.B,{spacing:4,pos:"relative",zIndex:1,maxWidth:"100%",children:[(0,C.jsxs)(L.z,{justify:"end",flexWrap:"wrap",children:[(0,C.jsx)(t_.D,{fontWeight:700,fontSize:"2xl",color:y?"white":"deepocean.950",children:(0,C.jsx)(T.x6,{id:"8e1wQN"})}),(0,C.jsx)(_.h,{}),(0,C.jsx)(tH.f,{modalId:"ai-credits-modal-generate-card",variant:"ghost",isDark:y,justify:"flex-end",segmentEvent:e8.VV.GAMMA_UPSELL_CALLOUT_AI_CREDITS_GENERATE_CARD}),(0,C.jsx)(tF.j,{locale:h,setLocale:e=>p({settings:{locale:e}}),buttonProps:{variant:"plain",size:"sm",textAlign:"left",w:["100%","100%","auto"],isDisabled:s}})]}),(0,C.jsxs)(tM.M,{color:y?"white":"gray.800",bg:y?"blackAlpha.900":"white",boxShadow:"sm",border:"none",borderRadius:"md",display:"flex",alignItems:"start",gap:"0",onMouseDown:ew.dG,_focusWithin:{boxShadow:"var(--chakra-shadows-sm), var(--chakra-shadows-outline)"},transitionProperty:"box-shadow",transitionDuration:"normal",children:[(0,C.jsx)(tO._,{ref:w,"data-in-editor-focus":!0,fontWeight:"500",border:"none",fontSize:"lg",initialHeight:"4rem",placeholder:eh.Ru._({id:"BiLwIi"}),value:f,isDisabled:s,onChange:e=>{v(e.target.value),m({prompt:e.target.value})},onKeyDown:e=>{e.shiftKey||("Enter"===e.key?b():"ArrowDown"!==e.key||f?"ArrowUp"!==e.key||f||i.chain().focus(a()).selectInsideNextCard(!1).run():i.chain().focus(a()).selectInsideNextCard(!0).run())},_focus:{boxShadow:"none"},_focusVisible:{boxShadow:"none"},p:5}),(0,C.jsx)(tN.r0,{h:"100%",border:"none",color:y?"white":"gray.800",bg:y?"blackAlpha.900":"white",p:3,ps:0,alignItems:"end",display:["none","none","flex"],children:(0,C.jsxs)(en.$,{px:3,"aria-label":"Generate card",isDisabled:!f||s,onClick:b,onMouseDown:ew.Fw,children:[(0,C.jsx)(tn.G,{type:"generateCard",ms:0,me:2,color:"currentcolor"}),(0,C.jsx)(eu.g,{icon:eY.fmP})]})})]}),(0,C.jsxs)(en.$,{variant:"solid","aria-label":"Generate card",isDisabled:!f,onClick:b,onMouseDown:ew.Fw,display:["flex","flex","none"],leftIcon:(0,C.jsx)(eu.g,{icon:eY.fmP}),children:[(0,C.jsx)(T.x6,{id:"ziAjHi"}),(0,C.jsx)(tn.G,{type:"generateCard",ms:0,me:2})]}),(0,C.jsx)(tT.S,{in:!f&&!s&&(j.length>0||"generating"===k),children:(0,C.jsxs)(L.z,{direction:["column","row"],spacing:2,wrap:"wrap",children:[null==j?void 0:j.map((e,t)=>(0,C.jsx)(en.$,{leftIcon:(0,C.jsx)(eu.g,{icon:eY._$C}),onClick:()=>{v(e),p({prompt:e})},borderRadius:"full",variant:"ghost",bg:y?"whiteAlpha.100":"blackAlpha.100",color:y?"whiteAlpha.800":"blackAlpha.800",_hover:{bg:y?"whiteAlpha.300":"blackAlpha.300"},colorScheme:y?"whiteAlpha":"blackAlpha",size:"xs",isTruncated:!0,flexShrink:0,children:e},t)),"generating"===k&&(0,C.jsxs)(tP.vw,{variant:"subtle",colorScheme:y?"whiteAlpha":"blackAlpha",color:y?"whiteAlpha.500":"blackAlpha.500",children:[(0,C.jsx)(tP.Vz,{boxSize:"12px",as:tt.y}),(0,C.jsx)(tP.d1,{children:(0,C.jsx)(T.x6,{id:"AUV+TY"})})]})]})}),(0,C.jsx)(t$,{isDark:y,selectedTemplate:x,setSelectedTemplate:e=>p({template:e}),isDisabled:s})]})]})]})},tQ=e=>{let{displayLayout:t,children:n,isExpandableSelected:i,isFocused:a,displayFullBleed:r,isPresentMode:o,isEditable:l,isNested:s,isMobileDevice:d,attrs:c,hasLayoutItem:u,cardAccentBackgroundMaskEffect:p,onDoubleClick:h,cardDimensions:m,theme:g,handle:x,editor:f,getPos:b,updateAttributes:y}=e,w="behind"==t&&"none"===p,j=tS({isNested:s,isMobileDevice:d,isClearBackground:w,cardAttrs:c}),S=(0,tk.U)(!d);if(c.generatorInput&&"done"!==c.generatorInput.status&&l)return(0,C.jsx)(tY,{theme:g,handle:x,editor:f,getPos:b,input:c.generatorInput,updateAttributes:y,displayFullBleed:r,isFocused:a});let A=(0,v.lH)(t),z=(0,v.tZ)(t),I=c.layoutTemplateColumns,R=c.layoutTemplateRows,E=(0,tA.X)(g)&&o&&!s&&"right"!==t&&"top"!==t&&!w&&!j&&!S,L=l&&m.aspectRatio&&!s&&(!c.fontScale||c.fontScale===k.o5);return(0,C.jsxs)(J.az,{className:(0,M.cx)(e0.fJ,i&&"expandable-selected"),onDoubleClick:h,w:"var(--card-width)",maxW:"100%",position:"relative",spellCheck:a,cursor:"auto",color:"var(--body-color)",sx:{["> .".concat(k._P)]:{padding:u?void 0:"var(--card-inner-padding)",counterReset:"footnote",'> [data-node-view-content-inner="card"]':{...u?{display:"grid",alignItems:"stretch",justifyContent:"stretch",minH:"100%",transitionDuration:"".concat(k.M2,"ms"),transitionProperty:"grid-template-rows, grid-template-columns, min-height",...A.grid,...I&&"top"!==t&&A.allowResizing&&{gridTemplateColumns:I},...R&&"top"===t&&A.allowResizing&&{gridTemplateRows:R},...z}:{display:"block",mx:"auto",maxW:"var(--max-content-width)",width:"100%",boxSizing:"border-box",minW:0},"> .node-cardLayoutItem":{"> [data-node-view-wrapper]":{"> .card-layout-cell-bg":{"> [data-node-view-content]":{"> [data-node-view-content-inner]":{maxWidth:"var(--max-content-width)",margin:"auto",paddingRight:E?tX:void 0},padding:"var(--card-inner-padding)"}}}}}},_hover:{"> .card-height-guide":{opacity:1}}},children:[x,n,L&&(0,C.jsx)(tR,{isFocused:a}),E&&(0,C.jsx)(tz.e5,{})]})},tX="\n  max(\n    0px,\n    calc(\n      var(--logo-push-x) -\n      max(\n        calc((var(--card-width) - var(--max-content-width)) / 2),\n        var(--card-inner-padding-x)\n      )\n    )\n  )\n";var tZ=n(15750);let t0=(e,t)=>{if(!e||!t)return null;let n=t.indexOf(e);return -1===n?null:n+1},t1=(e,t)=>{let n=(0,eg.cP)("top",e)?"top":"bottom",i=t["".concat(n,"Center")],a=t["".concat(n,"Left")],r=t["".concat(n,"Right")],o=(0,eg.cP)("center",e);return i?!i||!!a||!!r||o:!o},t2=(e,t)=>{switch(e){case"right":return(0,eg.cP)("right",t)||(0,eg.cP)("center",t);case"left":return(0,eg.cP)("left",t)||(0,eg.cP)("center",t);case"top":return(0,eg.cP)("top",t);default:return!1}},t4=e=>{let t={minAspect:1,maxAspect:4.5,minHeight:50,maxHeight:85};if(e<=t.minAspect)return t.maxHeight;let n=(Math.min(e,t.maxAspect)-t.minAspect)/(t.maxAspect-t.minAspect);return n<0||isNaN(n)?t.maxHeight:Math.round(10*(t.maxHeight-n*(t.maxHeight-t.minHeight)))/10},t5=e=>{let{element:t,position:n,cardId:i,cardDisplayLayout:a,shouldStretch:r}=e,o=(0,s.GV)(z.uF),l=t2(a,n),{flex:d,text:c}=(0,eg.o)(n),{logoSrc:u,logoImage:p}=(0,tZ.G)(),h=(0,S.useMemo)(()=>{var e,t;return t4(null!==(t=null==p?void 0:null===(e=p.meta)||void 0===e?void 0:e.aspect_ratio)&&void 0!==t?t:1)},[p]);return(0,C.jsxs)(q.s,{visibility:l?"hidden":"visible",css:{"--element-height":"calc(var(--margin-height) * 0.8)"},h:"var(--element-height)",flex:r?1:void 0,alignItems:"center",justifyContent:d,children:[((null==t?void 0:t.type)==="text"||(null==t?void 0:t.type)==="cardNumbers")&&(0,C.jsxs)(E.E,{fontSize:"calc(0.7em / var(--media-scale))",px:"calc(1em / var(--media-scale))",opacity:.65,noOfLines:1,fontFamily:"var(--body-font)",color:"var(--body-color)",fontWeight:"var(--body-font-weight)",textAlign:c,children:["cardNumbers"===t.type&&t0(i,o)||"","text"===t.type&&t.content]}),(null==t?void 0:t.type)==="themeLogo"&&u&&(0,C.jsx)(tG._,{src:u,h:"".concat(h,"%"),px:"calc((var(--element-height) * (1 - ".concat(h," / 100) / 2) / var(--media-scale))")})]})},t6=e=>{let{cardNode:t,isNested:n,isMobileDevice:i,displayLayout:a,cardAccentBackgroundMaskEffect:r}=e,o=null==t?void 0:t.attrs,{cardMarginSettings:l}=(0,s.GV)(z.Uu),{hideFromFirst:d,hideFromLast:c,...u}=l,p=tC({isNested:n,cardMarginSettings:l,isMobileDevice:i,isClearBackground:"behind"===a&&"none"===r,cardAttrs:o}),h=(0,s.GV)(z.SJ),m=null==h?void 0:h.config.roundness;return p?null:(0,C.jsxs)(J.az,{dir:"ltr",css:{"--margin-offset":"calc(".concat("xl"===m?.75:"lg"===m?.7:.65,"em / var(--media-scale))"),"--margin-height":"calc(var(--card-margin-height) - var(--margin-offset))"},children:[(0,C.jsx)(L.z,{"data-card-margin-elements":"top",position:"absolute",pointerEvents:"none",justifyContent:"space-between",alignItems:"flex-start",h:"var(--margin-height)",top:"var(--margin-offset)",insetStart:"var(--margin-offset)",insetEnd:"var(--margin-offset)",children:["topLeft","topCenter","topRight"].map(e=>(0,C.jsx)(t5,{element:u[e],position:e,cardId:null==t?void 0:t.attrs.id,cardDisplayLayout:a,shouldStretch:t1(e,u)},e))}),(0,C.jsx)(L.z,{"data-card-margin-elements":"bottom",position:"absolute",pointerEvents:"none",justifyContent:"space-between",alignItems:"flex-end",h:"var(--margin-height)",bottom:"var(--margin-offset)",insetStart:"var(--margin-offset)",insetEnd:"var(--margin-offset)",children:["bottomLeft","bottomCenter","bottomRight"].map(e=>(0,C.jsx)(t5,{element:u[e],position:e,cardId:null==t?void 0:t.attrs.id,cardDisplayLayout:a,shouldStretch:t1(e,u)},e))})]})};var t3=n(85303),t8=n(94445),t7=n(12554);let t9=e=>{let{hasNotes:t,isReadonly:n}=e;return t?n?(0,C.jsx)(T.x6,{id:"nqt+Fj"}):(0,C.jsx)(T.x6,{id:"+kQy/G"}):n?null:(0,C.jsx)(T.x6,{id:"GquPwe"})},ne=e=>{let{cardId:t,decorations:n,editor:i,getPos:a,hasNonEmptyCardNotes:r,isReadonly:o,...l}=e,d=(0,S.useCallback)(()=>{let e=a();if(!o){let{hasCardNotesNode:t}=(0,j.tg)(n);t||(0,t7.ni)(i,e)}let r=(0,s.KA)(),l=(0,t8.Ix)(r.getState());t3.R.emit("toggle",{clickedCardId:t,activeNotesCardId:l}),(0,t7.I5)(i,e)||i.commands.selectInsideNodeAtPos(e)},[t,n,o,i,a]),{color:c,bg:u,hoverColor:p,hoverBg:h,borderColor:m}=(0,ej.Nb)();return(0,C.jsx)(N.Tz,{label:(0,C.jsx)(t9,{hasNotes:r,isReadonly:o}),placement:"top",children:(0,C.jsx)(en.$,{height:e0.PN,fontWeight:"900",alignItems:"center",fontFamily:"body",display:"flex",backdropFilter:"blur(8px)",borderRadius:"sm",borderColor:m,color:c,boxShadow:"sm",cursor:"pointer",pointerEvents:"auto",fontSize:"14px",bg:u,minW:"auto",px:2,_hover:{color:p,background:h},onMouseDown:ew.Fw,onClick:d,...l,children:(0,C.jsx)(J.az,{as:"span",display:"inline-flex",children:(0,C.jsx)(eu.g,{icon:r?eY.hZM:ec.hZM})})})})};var nt=n(85888),nn=n(63751),ni=n(1667);let na=e=>{let t,{isPresentMode:n,isNested:i,isFullBleed:a,displayFullBleed:r,isThumbnail:o,isMobileDevice:l,attrs:d,fontSize:c,nestedDepth:u}=e,{outerPaddingX:p,outerPaddingY:h,outerPaddingLeft:m,outerPaddingRight:g}=(0,ni.ng)({isPresentMode:n,isNested:i,isFullBleed:a,displayFullBleed:r,isThumbnail:o,isMobileDevice:l,attrs:d}),x=(0,ni.Qo)(c||"md"),f=(0,ni.mn)({isMobileDevice:l,numericFontSize:x}),v=f+(0,ni._F)(u),b=(0,tk.U)(),{cardMarginSettings:y}=(0,s.GV)(z.Uu),w=(0,eg.Nk)(y)?0:b?.75:.25,j=nn.cK+w;return t=n||o?nn.cK+w:l?i?nn.rN:nn.HY+(a?nn._0:0):nn.cK+(a?Math.max(nn.Ri,w):w),(0,S.useMemo)(()=>({"--card-inner-padding-x":"calc(".concat(f,"em / var(--card-font-scale, 1))"),"--card-inner-padding-y":"calc(".concat(t,"em / var(--card-font-scale, 1))"),"--card-margin-height":"calc(".concat(j,"em / var(--card-font-scale, 1))"),"--card-inner-padding":"var(--card-inner-padding-y) var(--card-inner-padding-x)","--card-outer-padding-left":m,"--card-outer-padding-right":g,"--card-outer-padding-x":p,"--card-outer-padding-y":h,"--comment-padding":"".concat(v,"em"),"--nested-card-margin":"calc(-1 * var(--comment-padding))"}),[v,f,t,m,g,p,h,j])},nr=e=>{let{attrs:t,children:n,presentVariant:i,isPresentMode:a,isDark:r,isNested:o,isThumbnail:l,isFullBleed:d,displayFullBleed:c,isMobileDevice:u,fontSize:p,nestedDepth:h,theme:m,cardDimensions:g,showPresentBackdrop:x,userZoomLevel:f,verticalAlign:v,defaultContentWidth:b,contentWidth:y,docZoomLevel:w}=e,j=na({isPresentMode:a,isNested:o,isFullBleed:d,displayFullBleed:c,isThumbnail:l,isMobileDevice:u,attrs:t,fontSize:p,nestedDepth:h}),S=(0,ni.X6)(u),A=(0,nt.P)({isPresentMode:a,isNested:o,nestedDepth:h,isFullBleed:d,isThumbnail:l,theme:m,cardDimensions:g,defaultContentWidth:b,contentWidth:y,showPresentBackdrop:x,isMobileDevice:u,fontSize:p,docZoomLevel:w,cardFontScale:t.fontScale}),{background:R,id:E}=t,L=(0,s.GV)(z.b6),_=o||l?void 0:(0,eD.FD)(R,r);return(0,C.jsx)(q.s,{onDragOver:ew.JO,top:0,left:0,position:"relative",width:"100%",height:"100%",alignItems:"center",justifyContent:"center",cursor:"default","data-animate-value":i,fontSize:"var(--editor-font-size, 1rem)",py:"var(--card-outer-padding-y)",pl:"var(--card-outer-padding-left)",pr:"var(--card-outer-padding-right)","data-card-id":E,"data-card-scroll-element":!0,overflow:a&&!o?"hidden auto":void 0,sx:{scrollbarGutter:!a||o||I.D1?void 0:"stable"},margin:"0 auto",className:(0,M.cx)(k.QJ,"card-expanded",a&&k.WZ,a&&"card-present-mode card-present-mode--".concat(i)),transitionProperty:"transform, padding",transitionDuration:"".concat(L?k.y0:0,"ms"),..._,css:{...j,...S,...A,"--zoom-level":f,"--card-vertical-align":v},children:n})};nr.displayName="CardContainer";var no=n(35015),nl=n(44507);let ns=(0,C.jsx)(eu.g,{icon:ec.rMD}),nd=(0,S.memo)(function(e){let{cardId:t,getPos:n,editor:i,isNested:r,isCollapsed:o,isPresentMode:l,isEditable:s,isDark:c,top:u}=e,p=(0,e8.st)(),h=(0,S.useCallback)(()=>{if(l&&!s)i.commands.spotlightCollapseCard(n());else{(0,f.wE)(t,!0);let{selection:e}=i.state,r=(0,a.KP)(d.jg)(e);r&&r.node.attrs.id===t&&i.commands.selectNodeAtPos(n())}null==p||p.track(e8.VV.CARD_COLLAPSED,{method:"collapse_button",is_present_mode:!1})},[i,n,p,t,s,l]),m=(0,no.EC)(),g=(0,S.useMemo)(()=>(0,C.jsx)(N.Tz,{label:(0,C.jsx)(T.x6,{id:"kBUgVh"}),placement:"top",portalProps:{containerRef:m},children:(0,C.jsx)(eA.K,{variant:"ghost",size:"sm",paddingInlineStart:(0,nl.Xb)()?6:0,paddingInlineEnd:(0,nl.Xb)()?2:0,onClick:h,onMouseDown:ew.Fw,colorScheme:"gray",isRound:!0,"aria-label":eh.Ru._({id:"H86f9p"}),"data-collapse-card-button":!0,icon:ns,color:c?"gray.300":"gray.600"})}),[h,m,c]),x=(0,S.useMemo)(()=>(0,C.jsx)(en.$,{size:"sm",variant:"ghost",position:"absolute",zIndex:2,bottom:[1,3],right:[2,4],rightIcon:(0,C.jsx)(eu.g,{icon:ec.w2A}),colorScheme:"gray","data-collapse-card-button":!0,onMouseDown:ew.Fw,onClick:h,fontWeight:"normal",color:c?"gray.300":"gray.600",children:(0,C.jsx)(T.x6,{id:"H86f9p"})}),[h,c]);return(0,C.jsxs)(q.s,{contentEditable:!1,onClick:ew.dG,className:"manage-card-controls","data-print-hidden":!0,transitionProperty:"common",transitionDuration:"normal",display:"inherit",fontFamily:"body",sx:{"[data-collapse-card-button]":{visibility:r&&!o?"visible":"hidden"}},children:[(0,C.jsx)(L.z,{spacing:1,position:"absolute",top:u||[1,3],insetInlineEnd:[2,4],zIndex:2,children:g}),r&&!o&&x]})});var nc=n(24008),nu=n(86724),np=n(14691);let nh=()=>{let e=(0,er.d)(),[t,n]=(0,nu.M)(np.E.hasSeenPresentModeDblClickNotification,!1),i=(0,s.GV)(z.VJ);return{onDoubleClick:(0,S.useCallback)(()=>{if(!i||t)return;let a=new Date,r=new Date("2024-08-15");a.getTime()>r.getTime()||(n(!0),e({title:(0,C.jsx)(T.x6,{id:"xtaPrg"}),status:"info",position:"bottom",duration:3e3,isClosable:!0}))},[i,t,n,e])}},nm=e=>{let{getPos:t,editor:n,decorations:i}=e,a=(0,nc.f)(e),{isPresentMode:r,isNested:l,isFocused:d,isEditable:u,isMobileDevice:p,cardAccentBackgroundMaskEffect:h,cardId:m,isFullBleed:g,hasNonEmptyCardNotes:x}=a,f=(0,D.u)("realUserMetrics");(0,F.XX)(f,m,a.presentVariant,a.prevPresentVariant);let v=(0,V.JL)(i),b=(0,K.b0)(i),y=(0,s.GV)((0,eZ.C_)(m,"styling")),w=(0,s.GV)((0,eZ.C_)(m,"editWithAI")),j=v||b||d,S=u&&(j||w||y),A=!l&&!n.isThumbnail&&!n.isStatic&&!p&&!n.shouldUsePublishedVersion&&!r&&(x||u&&j),z=(0,s.GV)((0,o.qw)(m)),{onDoubleClick:I}=nh(),{isCardMarginsModalOpen:q,onCloseCardMarginsModal:J,onOpenCardMarginsModal:$}=(0,O.g)();return(0,C.jsx)(B.u,{as:"div",style:{minHeight:r&&!l?"100vh":0},hideComments:!0,...e,children:(0,C.jsxs)(nr,{...a,children:[(0,C.jsx)(tm,{...a,children:(0,C.jsxs)(tQ,{...a,...e,onDoubleClick:I,handle:(0,C.jsx)(U.A,{...e,"data-testid":"card-drag-handle",zIndex:G.$.cardButtons,insetInlineStart:2,top:3,width:"18px",height:e0.PN,label:(0,C.jsxs)(R.T,{spacing:0,children:[(0,C.jsx)(E.E,{color:"gray.400",children:(0,C.jsx)(T.x6,{id:"63lY3K",components:{0:(0,C.jsx)(E.E,{color:"white",as:"span"})}})}),(0,C.jsx)(E.E,{color:"gray.400",children:(0,C.jsx)(T.x6,{id:"COhrZ5",components:{0:(0,C.jsx)(E.E,{color:"white",as:"span"})}})})]})}),children:[(0,C.jsx)(Q,{...e}),(0,C.jsxs)(L.z,{pos:"absolute",insetInlineStart:8,insetInlineEnd:2.5,zIndex:G.$.cardButtons,top:3,align:"start",contentEditable:!1,pointerEvents:"none",spacing:1.5,children:[S&&(0,C.jsx)(e4,{editor:n,getPos:t,...a,accentBackgroundMaskEffect:h,onOpenCardMarginsModal:$}),S&&(0,C.jsx)(e5.i,{...e,...a}),(0,C.jsx)(_.h,{}),u?z?(0,C.jsx)(te,{...e,...a,isDark:a.isDark,isInteracting:j,suggestions:z}):a.attrs.generatorInput?(0,C.jsx)(ts,{...e,...a,isDark:a.isDark,input:a.attrs.generatorInput,isInteracting:j}):null:null,(0,C.jsx)(_.h,{}),A&&(0,C.jsx)(ne,{editor:n,cardId:m,decorations:i,getPos:t,hasNonEmptyCardNotes:x,isReadonly:!u})]}),(0,C.jsx)(c.$p,{dir:"ltr",className:(0,M.cx)(k._P,d&&"is-focused",l&&"is-nested",(r||g)&&"is-full-width",g&&!l&&!r&&"is-borderless",a.isDark&&"is-dark")}),(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(t6,{cardNode:e.node,...a}),q&&(0,C.jsx)(P.v,{editor:n,cardNode:e.node,getPos:t,isOpen:q,onClose:J})]}),l&&(0,C.jsx)(nd,{top:[1,3],...a,...e})]})}),(0,C.jsx)(W.A,{children:(0,C.jsx)(N.L8,{isDark:(0,H.Mw)(a.theme),children:(0,C.jsx)(tj,{display:!u||l||r?"none":"flex",editor:n,getPos:t,isNested:l})})})]})})};var ng=n(15072),nx=n(50923),nf=n(55090),nv=n(70605),nb=n(77654),ny=n(44018),nw=n(61077),nj=n(51183),nk=n(93765);let nC=(0,S.memo)(e=>{let{decorations:t,editor:n,getPos:i,node:a}=e,r=(0,nx.st)(),o=(0,s.jL)(),{cardId:l,isPresentMode:d,isEditable:c,isMobileDevice:u}=(0,nc.f)(e),{title:p,text:h}=(0,ng.d)({editor:n,node:a,cardId:l}),{previewContent:m}=e.node.attrs,g=""===m,x=null==p?void 0:p.replaceAll(ny.n,e=>'<span class="emoji">'.concat(e,"</span>")),v=(0,s.GV)(z.SJ),b=(0,nk.bh)("h4",v),y=(0,nj.A3)(t),w=(0,S.useCallback)(e=>{e.stopPropagation(),d&&!c?(o((0,z.mF)({attached:!1})),n.commands.descendIntoCurrentCard(i(),"push"),null==r||r.track(nf.VV.CARD_EXPANDED,{is_present_mode:!0,method:"click"})):((0,f.wE)(l,!1),setTimeout(()=>{if(!c||n.isDestroyed)return;let e=i();n.commands.selectInsideNodeAtPos(e)},50),null==r||r.track(nf.VV.CARD_EXPANDED,{is_present_mode:!1,method:"click"}))},[l,d,c,o,n,i,r]),j=g||!(null==h?void 0:h.trim());return(0,C.jsxs)(B.u,{...e,children:[(0,C.jsx)(U.A,{...e,"data-testid":"card-drag-handle",handlePlacement:"outside"}),(0,C.jsxs)(J.az,{mb:"0.25em",position:"relative",contentEditable:!1,userSelect:"none",role:"group","data-card-id":l,"data-export-as-image":!0,children:[(0,C.jsxs)(e3.e,{position:"absolute",insetInlineEnd:"0.75em",top:"0.75em","data-print-hidden":!0,variant:"unstyled",colorScheme:"gray",fontFamily:"body","data-thumbnail-hidden":!0,children:[c&&(0,C.jsx)(nS,{hidePreview:g,...e}),(0,C.jsx)(nA,{onClick:w})]}),(0,C.jsxs)(J.az,{cursor:"pointer",className:(0,M.cx)(k.QJ,"card-collapsed",y&&"expandable-selected"),_groupHover:nv.uQ,...nv.zQ,paddingX:u?"1em":"1.5em",paddingY:"1em",onClick:w,"data-collapsed-card":!0,"data-selection-ring":!0,"data-selection-background":!0,"data-content-reference":!0,sx:{backgroundColor:"var(--clickable-background-color)",boxShadow:"var(--card-border-shadow, 0px 0px 0px 1px var(--neutral-border-color)), var(--card-box-shadow, var(--clickable-shadow))",borderRadius:"calc(var(--card-border-radius) / 2)","@media print":{boxShadow:"none",border:"var(--card-border, 1px solid var(--neutral-border-color))"}},children:[(0,C.jsx)(E.E,{sx:b,noOfLines:1,marginInlineEnd:"1.75em",mb:"0.375em",className:(0,M.cx)(nb.U6),children:x?(0,C.jsx)(E.E,{as:"span",dangerouslySetInnerHTML:{__html:nw.W.sanitize(x)}}):p||(0,C.jsx)(E.E,{as:"span",color:"gray.400",children:(0,C.jsx)(T.x6,{id:"gLDJuJ"})})}),(0,C.jsxs)(L.z,{color:"var(--body-color-muted)",children:[(0,C.jsx)(E.E,{noOfLines:1,fontFamily:j?"body":void 0,fontSize:"0.9em",children:j?(0,C.jsx)(T.x6,{id:"4m3nxQ"}):h}),g&&(0,C.jsx)(eu.g,{icon:ec.Jt$,size:"sm"})]})]})]})]})});nC.displayName="CollapsedCard";let nS=e=>{let{hidePreview:t,updateAttributes:n}=e,i=(0,s.GV)(z.cS),a=(0,S.useCallback)(e=>{n&&(n({previewContent:t?null:""}),e.stopPropagation())},[n,t]);return(0,C.jsx)(en.$,{opacity:0,zIndex:i?0:1,transitionProperty:"opacity",transitionDuration:"normal",_groupHover:{opacity:1},sx:nv.Up,fontSize:"0.7em",onClick:a,className:nv.Gx,children:t?(0,C.jsx)(T.x6,{id:"fsyAH8"}):(0,C.jsx)(T.x6,{id:"Po0vX/"})})},nA=e=>{let{onClick:t}=e,n=(0,s.GV)(z.cS);return(0,C.jsxs)(en.$,{"aria-label":eh.Ru._({id:"JjrOSL"}),className:nv.Gx,onClick:t,sx:nv.Up,zIndex:n?0:1,fontSize:"0.7em","data-testid":"expand-card-button",children:[(0,C.jsx)(eu.g,{icon:ec.vQu,fontSize:"0.9em"}),(0,C.jsx)(E.E,{as:"span",_groupHover:{opacity:1,display:"inline"},opacity:"0",display:"none",marginInlineStart:2,children:(0,C.jsx)(T.x6,{id:"1A3EXy"})})]})},nz=e=>{let{editor:t,node:n}=e,{id:i}=n.attrs,a=(0,s.GV)((0,z.WS)(i)),r=(0,s.GV)(z.nD),o=(0,A.UT)("edit"),l=null==t?void 0:t.isThumbnail,{isStatic:d}=t;return!n.attrs.hidden||I.D1||l||d||r&&o?a?(0,C.jsx)(nC,{...e}):(0,C.jsx)(nm,{...e}):null};(()=>{if(w)return;let e=b.n.valid;b.n.valid=t=>{if(!(0,y.e)(t.doc).cardLayoutsEnabled)return e(t);let n=e(t);return!(n&&(t.nodeAfter&&(0,d.sw)(t.nodeAfter)||t.nodeBefore&&(0,d.sw)(t.nodeBefore)))&&n},w=!0})();let nI=e=>{if((0,p.Op)(e)||1===e.childCount&&(0,p.Op)(e.firstChild))return!0;if("blank"!==e.attrs.layout)return!1;let t=(0,d.dT)(e);if(0===t.length)return!1;let n=t.find(e=>"body"===e.attrs.itemId);return!!n&&1===n.childCount&&(0,p.Op)(n.firstChild)},nR=e=>{let{newNode:t,newDecorations:n,oldNode:i,oldDecorations:a,updateProps:r}=e,o=JSON.stringify(t.attrs)!==JSON.stringify(i.attrs),l=(0,x.w_)(a,n),s=nI(t)!==nI(i);return(o||l||s)&&(console.debug("[cardUpdateFn] Card ".concat(t.attrs.id," updateProps will be called:"),{oldDecorations:a,newDecorations:n,decorationsChanged:l}),r()),!0},nE=a.bP.create({name:k.Qs,content:"(block | cardBlock)+ | cardLayoutItemGroup{1,2} cardNotes?",group:"cardBlock",defining:!1,isolating:!0,selectable:!1,draggable:!0,priority:m.y.Card,containerHandle:!0,imageKeyPath:"background.image",expandable:!0,addNodeView(){return(0,c.gu)(nz,{update:nR,ignoreMutation:e=>{let{mutation:t}=e,n=this.editor.state.selection,i=t.target instanceof HTMLElement?t.target:t.target.parentElement,a="selection"!==t.type&&nL(i),o="selection"===t.type&&n instanceof r.nh&&(0,g.Bv)(n.node);return!!a||!!o}})},addProseMirrorPlugins(){return[(0,j.qc)(this.editor)]},addOptions:()=>({isStatic:!1}),addAttributes:()=>({id:{},previewContent:{default:null},background:{default:u.SS,...(0,p.tb)("background")},container:{default:{},...(0,p.tb)("container")},cardSize:{default:"default"},layout:{default:"blank",parseHTML:e=>e.getAttribute("image-layout")||e.getAttribute("layout")||"blank"},layoutTemplateColumns:{default:null},layoutTemplateRows:{default:null},verticalAlign:{default:null},generatorInput:{default:null,...(0,p.tb)("generatorInput")},fontScale:{default:null},cardMarginSettings:{default:{},...(0,p.tb)("cardMarginSettings")},hidden:{default:!1}}),addExtensions(){return[tw.$b.configure({callback:(e,t,n)=>{0!==t.length&&t.forEach(e=>{let{val:t}=e;console.debug("[Card.UniqueCardId] New card id(".concat(t,") created. Will be created in postgres through content service.")),(0,f.wV)(t)})},types:[this.name]})]},addCommands:()=>({}),parseHTML(){return[{tag:"div[class=gamma-card]"},{tag:"section",getAttrs:n_()},{tag:"card[bookmark]",getAttrs:(0,h.Ll)(this.storage),getContent:(0,h.cn)(this.storage)}]},renderHTML(e){let{HTMLAttributes:t}=e;return["div",(0,a.KV)(t,{class:"gamma-card"}),0]},addStorage:h.xu,renderHTMLforAI(e){let{node:t}=e,n=(0,f.Wq)(t.attrs.id),a=(0,o.hn)((0,s.KA)().getState());if(!1===n||a)return["section",{"image-layout":t.attrs.layout},0];let r=(0,h.vL)(this.storage,t),d=(0,i.getCardTitle)(t.toJSON()),c=(0,v.o_)(t);return["card",{bookmark:r,title:d,accentPosition:t.attrs.layout,accentImage:(null==c?void 0:c.image)?(0,l.ve)(c.image):void 0}]}}),nL=e=>{var t;return(null==e?void 0:e.parentElement)&&(e.classList.contains(k.QJ)||(null===(t=e.parentElement.closest(".".concat(k._P,", .").concat(k.QJ)))||void 0===t?void 0:t.classList.contains(k.QJ)))},n_=()=>e=>({id:e.getAttribute("id")||tw.Yv.generate()})},91100:(e,t,n)=>{"use strict";n.d(t,{IV:()=>p,Uc:()=>c,XC:()=>g,c9:()=>u,jF:()=>x});var i=n(13236),a=n(14139),r=n(95580),o=n(68566),l=n(42849),s=n(12554),d=n(77646);let c=(e,t,n)=>{let i=t.doc.resolve(e),r=t.doc.nodeAt(e),l=e+i.nodeAfter.nodeSize,c=t.doc.resolve(l),u=t.doc.nodeAt(l);if(!u||!(0,d.jg)(u))return!1;let h=r&&(0,s.eh)(r),x=(0,s.eh)(u),f=null;x&&(f=h?g(t.doc,i.pos,!0):r?i.pos+r.nodeSize-1:null);let v=p(t,l);if(!v)return!1;t.delete(l,l+u.nodeSize);let b=m(t,e,!0);if(f&&x){let e=(0,s.PD)(c);if(e){let n=h?e.node.content:e.node;t.insert(f,n),t.setMeta("cardNotesHandled",!0)}}t.insert(b,v.node.content);let y={type:"merge-cards",contentPos:v.pos,insertPos:b};if(t.setMeta("annotationEvent",y),n.selection instanceof a.n){let e=(0,o.n)(t.doc.resolve(b));e&&t.setSelection(e)}return!0},u=(e,t)=>{let n=t.doc.resolve(e);if(!n.nodeBefore)return!1;let i=e-n.nodeBefore.nodeSize,a=t.doc.nodeAt(i);if(!a||!(0,d.jg)(a))return!1;let r=(0,s.eh)(a),l=n.nodeAfter&&(0,s.eh)(n.nodeAfter),c=null;l&&(c=r?g(t.doc,i,!0):i+a.nodeSize-1);let u=p(t,e);if(!u)return!1;t.delete(e,e+n.nodeAfter.nodeSize);let h=m(t,i,!0);if(c&&l){let e=(0,s.PD)(n);if(e){let n=r?e.node.content:e.node;t.insert(c,n),t.setMeta("cardNotesHandled",!0)}}t.insert(h,u.node.content);let x=(0,o.n)(t.doc.resolve(h));x&&t.setSelection(x);let f={type:"merge-cards",contentPos:u.pos,insertPos:h};return t.setMeta("annotationEvent",f),!0},p=(e,t)=>{let n=(0,l.dg)(e,t);return 0===Object.entries(n).length?{node:e.doc.nodeAt(t),pos:t}:n.body||null},h=e=>{let t=(0,r.IV)(e,e=>"cardLayoutItem"===e.type.name&&"body"===e.attrs.itemId||"card"===e.type.name);return 0===t.length?null:t[0]},m=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=(0,l.dg)(e,t),a=e.doc.resolve(t);if(0===Object.entries(i).length)return n?a.doc.resolve(a.start(a.depth+1)).end():t+1;if(!i.body)throw Error("Could not find card body at cardPos=".concat(t));let r=e.doc.resolve(i.body.pos);return n?r.doc.resolve(r.start(r.depth+1)).end():r.pos+1},g=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=e.resolve(t),a=(0,s.PD)(i);if(!a)return null;let r=e.resolve(a.pos);return n?r.doc.resolve(r.start(r.depth+1)).end():r.pos+1},x=(e,t)=>{if(!e.empty)return!1;let n=e instanceof a.n;if(!(0,i.eE)(e)&&!n)return!1;let{from:r,$from:o}=e;if(!t&&0!==o.parentOffset||t&&o.parentOffset!==o.parent.content.size)return!1;let l=h(o);if(!l)return!1;if(n)return t?r===l.pos+l.node.nodeSize-1:r===l.pos+1;let s=["paragraph","heading","title"],c=!0;for(let e=o.depth;e>0;e--){let t=o.node(e);if("card"===t.type.name||(0,d.sw)(t))break;if(!s.includes(t.type.name)){c=!1;break}}return!!c&&(t?r===l.pos+l.node.nodeSize-2:r===l.pos+2)}},88459:(e,t,n)=>{"use strict";n.d(t,{j:()=>r});var i=n(45709),a=n(73459);let r=e=>{let t=(0,a.h)(),n=(0,i.G)().blankCard;return e&&(n=(0,i.G)()[e]),{cardToAdd:n,command:"aiCardAfter"===e?{key:"aiCardAfter",nodeName:"card"}:e?t[e]:t.blankCard}}},27649:(e,t,n)=>{"use strict";n.d(t,{$b:()=>h,Yv:()=>c,iM:()=>p});var i=n(99742),a=n(69e3),r=n(81570),o=n(35002),l=n(387),s=n(1098),d=n(82354);let c={generate:(0,i.d_)("0123456789abcdefghijklmnopqrstuvwxyz",15)},u=new r.hs("UniqueCardId"),p=e=>{let t=e=>{var n;return null===(n=e.content)||void 0===n?void 0:n.map(e=>{if(!e.content||e.type!==d.Qs)return e;let n={...e,attrs:{...e.attrs,id:c.generate()}};return n.content=t(n),n})};return Object.assign({},e,{content:t(e)})},h=s.S.extend({name:"UniqueCardId"}).configure({attributeName:"id",initialValue:()=>c.generate(),syncWithFilmstrip:()=>o.of.get("transactionalFilmstrip"),filterTransaction:l.kz,pluginKey:u,transformPasted:(e,t,n)=>{let{types:i,initialValue:r,attributeName:o}=t,l={},s=e=>{let t=[];return e.forEach(e=>{if(e.isText){t.push(e);return}if(!i.includes(e.type.name)){t.push(e.copy(s(e.content)));return}let n=r(),a=e.type.create({...e.attrs,[o]:n},s(e.content),e.marks);e.type.name===d.Qs&&(l={...l,[e.attrs.id]:n}),t.push(a)}),a.FK.from(t)},c=e=>{let t=[];return e.forEach(e=>{if(e.isText){t.push(e);return}if("cardMention"===e.type.name){let i=l[e.attrs.id];if(i){let a=e.type.create({...e.attrs,...i?{id:i}:{},docId:n});t.push(a)}else t.push(e);return}t.push(e.copy(c(e.content)))}),a.FK.from(t)},u=c(s(e.content));return new a.Ji(u,e.openStart,e.openEnd)}})},83272:(e,t,n)=>{"use strict";n.d(t,{z:()=>V});var i=n(31085),a=n(35687),r=n(74727),o=n(9021),l=n(59835),s=n(70323),d=n(25420),c=n(80853),u=n(20501),p=n(24221),h=n(9104),m=n(95640),g=n(12327),x=n(84511),f=n(35002),v=n(59392),b=n(95905),y=n(62313),w=n(61778),j=n(18201),k=n(80532);let C=e=>{let{label:t,control:n,icon:a}=e;return(0,i.jsxs)(y.z,{spacing:4,children:[a,(0,i.jsx)(w.E,{children:t}),(0,i.jsx)(j.h,{}),(0,i.jsx)(k.az,{children:n})]})};function S(e,t){return function(n,i,a){var r;return t({chartAttributes:{...a,[e]:{...null!==(r=a[e])&&void 0!==r?r:{},[n]:i}}})}}let A=e=>{var t;let{chartType:n,attributes:a,updateAttributes:r}=e,o=a.chartAttributes||{},s=o[n],d=S(n,r);return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(C,{label:g.Ru._({id:"Y7a6MU"}),control:(0,i.jsx)(l.d,{isChecked:null===(t=null==s?void 0:s.axisPullToZero)||void 0===t||t,onChange:e=>d("axisPullToZero",e.target.checked,o)})})})},z=e=>{let{chartType:t="bar",...n}=e;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(A,{chartType:t,...n})})};var I=n(11718),R=n(63341),E=n(18528),L=n(72821),_=n(48310),M=n(33473);let N=e=>{var t;let{attributes:n,updateAttributes:a}=e,r=n.chartAttributes||{},o=r.pie||{},l=S("pie",a),s=null!==(t=o.legendPosition)&&void 0!==t?t:"bottom",d={top:g.Ru._({id:"WWy8TN"}),right:g.Ru._({id:"nOPbWJ"}),bottom:g.Ru._({id:"zsiX7I"}),left:g.Ru._({id:"UlKSMd"})},u=e=>void 0===d[e]?"bottom":e;return(0,i.jsx)(C,{label:g.Ru._({id:"G4H8LE"}),control:(0,i.jsxs)(R.W,{isLazy:!0,children:[(0,i.jsx)(E.I,{as:c.$,variant:"plain",size:"sm",w:40,boxShadow:"none",textAlign:"left",rightIcon:(0,i.jsx)(I.D,{}),sx:{"span:first-of-type":{overflow:"clip",textOverflow:"ellipsis"}},children:d[s]}),(0,i.jsx)(L.c,{zIndex:"modalPopover",children:(0,i.jsx)(_.i,{value:s,type:"radio",onChange:e=>{l("legendPosition",u(Array.isArray(e)?e[0]:e),r)},children:Object.entries(d).map(e=>{let[t,n]=e;return(0,i.jsx)(M.k,{value:t,children:(0,i.jsx)(y.z,{children:(0,i.jsx)(w.E,{children:n})})},t)})})})]})})},T={pie:N,donut:N,line:e=>{let{...t}=e;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(A,{chartType:"line",...t})})},bar:z,"horizontal-bar":e=>(0,i.jsx)(z,{...e,chartType:"horizontal-bar"})};var P=n(14041),O=n(1602),D=n.n(O),F=n(96362),H=n(57799);let W=e=>{let{accentColor:t,selected:n,onChange:a,steps:r=5}=e,o=Array(r).fill(0).map((e,t)=>t),l=(0,P.useMemo)(()=>Object.fromEntries(Object.entries(x.fA).map(e=>{let[n,{label:i}]=e;return[n,{label:i,scale:(0,F.M)(t,o,n)}]})),[t,r]);n&&!l[n]&&(n=void 0);let s=g.Ru._({id:"ovBPCi"});return(0,i.jsx)(C,{icon:(0,i.jsx)(p.g,{icon:u.wIs}),label:g.Ru._({id:"tvmuQ0"}),control:(0,i.jsxs)(R.W,{isLazy:!0,children:[(0,i.jsx)(E.I,{as:c.$,variant:"plain",size:"sm",w:40,boxShadow:"none",textAlign:"left",rightIcon:(0,i.jsx)(I.D,{}),sx:{"span:first-of-type":{overflow:"clip",textOverflow:"ellipsis"}},children:n?l[n].label():s}),(0,i.jsx)(L.c,{zIndex:"modalPopover",children:(0,i.jsx)(_.i,{value:n||"default",type:"radio",onChange:e=>{a("default"===e?void 0:e)},children:Object.entries({default:{...l[x.gb],label:()=>s},...l}).map(e=>{let[a,{label:r,scale:l}]=e;return 1.5>[...l.values()].map(e=>D().readability(e,t)).reduce((e,t)=>Math.max(e,t),0)&&a!==n?null:(0,i.jsx)(M.k,{value:a,children:(0,i.jsxs)(y.z,{children:[(0,i.jsx)(w.E,{children:r()}),(0,i.jsx)(j.h,{}),(0,i.jsx)(B,{scale:l,data:o})]})},a)})})})]})})},B=e=>{let{scale:t,data:n}=e;return(0,i.jsx)(y.z,{spacing:1,children:n.map(e=>(0,i.jsx)(H.V,{color:t.get(e),size:H.E.small,tooltipIsDisabled:!0},e))})},V=e=>{let{attributes:t,updateAttributes:n,accentColor:y,setEditing:w,editor:j}=e,k=T[t.chartType],{data:S}=t,A=(0,f.u)("chartInlineLabels");return(0,i.jsxs)(a.B,{spacing:0,children:[(0,i.jsxs)(a.B,{spacing:4,p:4,children:[(0,i.jsx)(r.e,{mb:2,children:Object.entries(x.XD).map(e=>{let[a,{icon:r,selectedIcon:l,label:s}]=e,d=t.chartType===a;return(0,i.jsx)(h.Tz,{placement:"top",label:s(),children:(0,i.jsx)(o.K,{"aria-label":s(),flex:1,variant:"plain",size:"md",icon:d?l:r,boxShadow:"none",background:d?"trueblue.50":"white",color:d?"trueblue.400":"gray.600",onClick:()=>n({chartType:a})})},"".concat(s()))})}),(0,i.jsx)(W,{accentColor:y,selected:t.colorScheme,steps:5,onChange:e=>{n({colorScheme:e})}}),(0,i.jsx)(C,{icon:(0,i.jsx)(p.g,{icon:u.n2$}),label:g.Ru._({id:"sgzcYD"}),control:(0,i.jsx)(l.d,{isChecked:!t.hideLabels,onChange:e=>n({hideLabels:!e.target.checked})})}),A&&(0,i.jsx)(C,{icon:(0,i.jsx)(p.g,{icon:u.jon}),label:g.Ru._({id:"hw0byi"}),control:(0,i.jsx)(l.d,{isChecked:t.showInlineLabels,onChange:e=>n({showInlineLabels:e.target.checked})})}),j&&(0,i.jsx)(C,{icon:(0,i.jsx)(p.g,{icon:u.ecg}),label:g.Ru._({id:"0j+RGO"}),control:(0,i.jsx)(r.e,{dir:"ltr",spacing:1,size:"sm",children:b.gj.map(e=>{let{name:t,icon:n,checkActive:a,apply:r}=e;if(a&&r)return(0,i.jsx)(v.I,{label:t(),icon:n,onClick:()=>{r(j)},isActive:a(j),my:0},t())})})}),k&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.c,{my:3}),(0,i.jsx)(k,{...e})]})]}),w&&(0,i.jsx)(d.s,{px:5,py:3,bg:"gray.100",alignItems:"center",justify:"center",children:(0,i.jsx)(c.$,{variant:"link",size:"sm",colorScheme:"gray",my:0,leftIcon:(0,i.jsx)(p.g,{icon:u.MT7}),onClick:()=>w(!0),children:S?(0,i.jsx)(m.x6,{id:"BhcOHV"}):(0,i.jsx)(m.x6,{id:"UHoZ5e"})})})]})}},95785:(e,t,n)=>{"use strict";n.d(t,{V:()=>s});var i=n(12917),a=n(12327),r=n(98736),o=n(77256),l=n(98757);let s=()=>[{key:"barChartVertical",name:()=>a.Ru._({id:"kaIve5"}),icon:i.s67,chartType:"bar"},{key:"barChartHorizontal",name:()=>a.Ru._({id:"JXpNuP"}),icon:i.Mkm,chartType:"horizontal-bar"},{key:"lineChart",name:()=>a.Ru._({id:"Kt/Lzz"}),icon:i.gK3,chartType:"line"},{key:"pieChart",name:()=>a.Ru._({id:"5+y+OQ"}),icon:i.W1p,chartType:"pie"},{key:"donutChart",name:()=>a.Ru._({id:"DNipMm"}),icon:i.oDg,chartType:"donut"}].map(e=>({nodeName:"chart",keywords:["graph",e.chartType],featureFlag:"enableCharts",execute:t=>{t.chain().insertChart(e.chartType,!0).editSelectedChart().run()},dragStartFn:t=>{let n=(0,r.r4)();(0,o.fS)(t,{type:"chart",attrs:{chartType:e.chartType,id:n,data:(0,l.$)(e.chartType)||{}}})},dragEndFn:e=>{e.commands.editSelectedChart()},...e}))},1279:(e,t,n)=>{"use strict";n.d(t,{H:()=>r,j:()=>o});var i=n(81570),a=n(68566);function r(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}let o=(e,t,n)=>{if(!n)return!0;let o=r(n),l=o&&e.state.selection instanceof i.nh,s=o?e.state.tr.replaceSelectionWith(o,e.input.shiftKey):e.state.tr.replaceSelection(n),d=(0,a.i)(s);return d?s.setSelection(d):l&&s.setSelection(i.nh.create(s.doc,e.state.selection.from)),e.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}},1712:(e,t,n)=>{"use strict";n.d(t,{Mu:()=>h,kf:()=>g,tE:()=>m});var i=n(13236),a=n(14139),r=n(81570),o=n(95580),l=n(77214),s=n(92405),d=n(68566),c=n(37672),u=n(67408);let p=e=>"gallery"===e.type.name,h=(e,t,n)=>{var c;let h=f(n);if(h.length>0)return h.forEach(t=>{let{mark:n}=t;(0,u.E0)(n)||(0,u.uI)(n.attrs.href,e)}),!1;let g=null===(c=t.clipboardData)||void 0===c?void 0:c.getData("text/plain");if(!g||!m(g))return!1;let{selection:v}=e.state;if(v instanceof r.U3&&!v.empty)return t.preventDefault(),x(e,g),!0;if(g.match(s.D_)||(0,l.Zj)(g))return!1;if(!e.schema.nodes.embed)return(0,u.uI)(g,e),!1;let b=v instanceof a.n,y=v.empty&&["paragraph","heading","title"].includes(v.$from.parent.type.name)&&(0,o.Op)(v.$from.parent),w=p(v.$from.parent),j=(0,i.BQ)(v)&&p(v.node);if(!(y||w||j||b))return!1;let k=v.from-1,C=j?{from:v.to-1,to:v.to-1}:y?{from:k,to:k+v.$from.parent.nodeSize}:{from:v.from,to:v.to};return e.chain().setTextSelection(C).insertEmbedAndFetchMetadata(g,void 0,!0).command(e=>{let{tr:t}=e,n=(0,d.i)(t);return n&&t.setSelection(n),!0}).run(),!0},m=e=>(0,l.Se)(e)&&!e.includes("\n")&&(0,l.AY)(e),g=e=>1===e.content.childCount&&e.content.firstChild.isTextblock&&m(e.content.firstChild.textContent),x=(e,t)=>{e.commands.setMark(c.N.name,{href:t}),(0,u.uI)(t,e)},f=e=>{let t=[];return e.content.descendants((e,n)=>{e.marks.filter(e=>"link"===e.type.name).forEach(e=>{t.push({mark:e,pos:n})})}),t}},96061:(e,t,n)=>{"use strict";n.d(t,{B:()=>b,E:()=>y});var i=n(13236),a=n(40200),r=n.n(a),o=n(69e3),l=n(81570),s=n(12537),d=n(95580),c=n(68566),u=n(65202),p=n(20379),h=n(31948),m=n(1279),g=n(1712),x=n(39848),f=n(95204),v=n(60948);let b=i.YY.create({name:"clipboard",addProseMirrorPlugins(){let e=this.editor,t=e.state.schema,n=null;return[new l.k_({key:new l.hs("clipboard"),appendTransaction(e,t,n){let i=e.find(e=>"cut"===e.getMeta("uiEvent"));if(!i)return null;let a=(0,c.i)(i);return a?n.tr.setSelection(a):null},props:{handleDOMEvents:{drop(e){n=e.dragging,requestAnimationFrame(()=>{n=null})}},clipboardSerializer:{serializeFragment:e=>(0,v.t8)(e,this.editor.schema)},transformPastedHTML:s.V,transformPasted:i=>w(e,(null==n?void 0:n.slice)?i:(0,f.o$)(i,t)),handlePaste:(t,n,i)=>(0,g.Mu)(e,n,i)||(0,x.D1)(e,n)||(0,m.j)(t,n,i)}})]},addCommands(){return{insertMarkdownAt:(e,t)=>n=>{let{state:i,tr:a}=n;try{let n=(0,x.os)(t,i.schema);return a.replaceRange(e.from,e.to,n),!0}catch(e){return console.warn("(caught) [Clipboard] insertMarkdownAt error",e),!1}},basicCut:e=>{let{from:t,to:n}=e;return e=>{let{state:i,tr:a}=e;return y(i.doc.slice(t,n).content,this.editor,!0),a.deleteRange(t,n),!0}},copy:e=>{let{from:t,to:n}=e;return e=>{let{state:i}=e;return y(i.doc.slice(t,n).content,this.editor,!1),!0}}}}}),y=(e,t,n)=>{var i,a,o,l;let s=(0,v.$R)(e,t.schema),d=e.firstChild;if(1===e.childCount&&!n){let e;let t=(null==d?void 0:d.type.name)==="image",n=(null==d?void 0:d.type.name)==="cardAccentLayoutItem"&&(null==d?void 0:null===(o=d.attrs)||void 0===o?void 0:null===(a=o.background)||void 0===a?void 0:a.image),i=(null==d?void 0:d.type.name)==="smartLayoutCell"&&(null==d?void 0:null===(l=d.attrs)||void 0===l?void 0:l.image);t?e=d.attrs.src:n?e=null==d?void 0:d.attrs.background.image.src:i&&(e=null==d?void 0:d.attrs.image.src),e&&(0,h.qp)(e).catch(e=>{console.warn("Image clipboard copy failed, falling back to HTML:",e)})}null===(i=document.getSelection())||void 0===i||i.removeAllRanges(),r()(s,{format:"text/html"});let c=u.q.getState(t.state);return c&&!n&&c.clearCutData(),s},w=(e,t)=>{var n;let i=(0,p.e)(e.state.doc),a=null===(n=t.toJSON())||void 0===n?void 0:n.content;if(!a||"document"!==a[0].type)return t;let r=(0,p.e)(t.content.firstChild);return i.cardLayoutsEnabled&&!r.cardLayoutsEnabled?((0,d.Sn)(a,e=>{"card"===e.type&&(e.content=[{type:"cardLayoutItem",content:e.content}])}),o.Ji.fromJSON(e.schema,{openStart:t.openStart+1,openEnd:t.openEnd+1,content:a})):t}},39848:(e,t,n)=>{"use strict";n.d(t,{D1:()=>s,Yj:()=>u,Z2:()=>m,n_:()=>x,os:()=>d,s6:()=>h,uY:()=>p});var i=n(58586),a=n(92060),r=n(1712),o=n(65208),l=n(60948);let s=(e,t)=>{if(!e.isEditable||!t.clipboardData)return!1;let n=t.clipboardData.getData("text/plain");if(!n||(0,r.tE)(n))return!1;let i=t.clipboardData.getData("text/html");if(null==i?void 0:i.includes("data-pm-slice"))return!1;let{state:a}=e;if(a.selection.$from.parent.type.spec.code){let t=a.tr.insertText(n);return e.view.dispatch(t),!0}let o=t.clipboardData.getData("vscode-editor-data"),l=o?JSON.parse(o):void 0,s=null==l?void 0:l.mode;if(!(!i||"markdown"===s||c(n)))return!1;let{from:d,to:u}=a.selection;return t.preventDefault(),e.commands.insertMarkdownAt({from:d,to:u},n)},d=(e,t,n)=>{let a=i.xI.parse(e),{slice:r}=(0,o.S)(a,t,n,!1);return r},c=e=>{let t=e.match(/^```/gm);if(t&&t.length>1||e.match(/\[[^]+\]\(https?:\/\/\S+\)/gm)||e.match(/\[[^]+\]\(\/\S+\)/gm)||e.match(/^#{1,6}\s+\S+/gm))return!0;let n=e.match(/^\s*[\d-*].\s\S+/gm);return!!(n&&n.length>1||e.match(/^\s*-{3,}\s*$/gm))},u=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f;t&&(a.A.prototype.escape=e=>e);let i=n.turndown(e);return t&&(a.A.prototype.escape=v),i},p=e=>i.xI.parse(e,{}),h=(e,t,n,i,a)=>{try{let r=e.slice(t,n).content,o=(0,l.t8)(r,e.type.schema),s=document.createElement("div");s.appendChild(o);let d=s.innerHTML;return u(d,i,a)}catch(i){return console.error("[caught] rangeToMarkdown: ",t,n,e.nodeSize,i),""}},m=(e,t,n)=>h(e,0,void 0,t,n),g=(e,t)=>{try{return e.getAttribute(t)}catch(e){return null}},x=()=>new a.A({headingStyle:"atx",bulletListMarker:"-",codeBlockStyle:"fenced",hr:"---"}).remove(["style"]).addRule("list",{filter:["ul","ol"],replacement:function(e,t){let n=t.parentNode;return((null==n?void 0:n.nodeName.match(/^(UL|OL)$/i))&&(e="    "+e.replace(/^\n+/,"").replace(/\n+$/,"\n").replace(/\n/gm,"\n    ")),(null==n?void 0:n.nodeName)==="LI"&&n.lastElementChild===t)?"\n"+e:"\n\n"+e+"\n\n"}}).addRule("listItem",{filter:"li",replacement:function(e,t,n){e=e.replace(/^\n+/,"").replace(/\n+$/,"\n").replace(/\n/gm,"\n    ");let i=n.bulletListMarker||"-",a=i+" ",r=t.parentNode,o=g(t,"indent");if(null!==o){let e=parseInt(o,10);!isNaN(e)&&e>0&&(a="    ".repeat(e)+a)}let l=g(t,"variant");if(1===t.children.length&&t.children[0].nodeName.match(/^(UL|OL)$/i)&&t.textContent===t.children[0].textContent)a="    ";else if((null==r?void 0:r.nodeName)==="OL"){let e=r.getAttribute("start"),n=Array.prototype.indexOf.call(Array.prototype.filter.call(r.children,e=>"LI"===e.nodeName),t),o=e?Number(e)+n:n+1;a=a.replace(i,o+".")}else if("numbered"===l){let e=g(t,"start")||1;a=a.replace(i,e+".")}return a+e+(t.nextSibling&&!/\n$/.test(e)?"\n":"")}}),f=x(),v=a.A.prototype.escape},99603:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var i=n(12917),a=n(12327),r=n(46108),o=n.n(r),l=n(77256),s=n(27664);let d={flywheel:{type:"diagram",attrs:{horizontalAlign:"center",shapes:[{x:1024.2205225919886,y:545.3520002984831,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:sBqhkO1gaRDC33E9nLFRf",type:"text",props:{color:"black",size:"m",w:96,text:"",font:"draw",align:"middle",autoSize:!0,scale:1,h:20,growY:27,html:'<h4 class="themed-heading">Two</h4>',shapeColor:null},parentId:"page:page",index:"a4",typeName:"shape"},{x:605.5691768594324,y:545.3520002984831,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:LuxCoSOJiKidTHonK_r3y",type:"text",props:{color:"black",size:"m",w:96,text:"",font:"draw",align:"middle",autoSize:!0,scale:1,h:20,growY:27,html:'<h4 class="themed-heading">Four</h4>',shapeColor:null},parentId:"page:page",index:"a5",typeName:"shape"},{x:811.2936767672497,y:332.49917028373386,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:jNEccTSx5tCosurJ5Ot2M",type:"text",props:{color:"black",size:"m",w:96,text:"",font:"draw",align:"middle",autoSize:!0,scale:1,h:20,growY:27,html:'<h4 class="themed-heading">One</h4>',shapeColor:null},parentId:"page:page",index:"a6",typeName:"shape"},{x:786.7936767672497,y:753.4464458368486,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:OUIb317WtLr7vTROMJmRY",type:"text",props:{color:"black",size:"m",w:145.68119328124112,text:"",font:"draw",align:"middle",autoSize:!1,scale:1,h:20,growY:27,html:'<h4 class="themed-heading">Three</h4>',shapeColor:null},parentId:"page:page",index:"a7",typeName:"shape"},{x:774.4554909171899,y:664.006697053962,rotation:3.141592653589793,isLocked:!1,opacity:1,meta:{},id:"shape:gOmdcWQlSymeyfc0iFv_H",type:"arrow",parentId:"page:page",index:"a8",props:{dash:"solid",size:"m",fill:"solid",color:"black",labelColor:"black",bend:-33.715948517019974,start:{type:"point",x:-143.39749318568477,y:299.6671450013758},end:{type:"point",x:-296.8596898701958,y:124.06206342608016},arrowheadStart:"none",arrowheadEnd:"arrow",text:"",labelPosition:.5,font:"draw",shapeColor:null,strokeWidth:"md"},typeName:"shape"},{x:949.3708512974239,y:475.1522148190538,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:FoSkoOljiovlpXtyepQ0L",type:"arrow",parentId:"page:page",index:"a8G",props:{dash:"solid",size:"m",fill:"solid",color:"black",labelColor:"black",bend:-33.715948517019974,start:{type:"point",x:-165.31582160993514,y:295.60684693665877},end:{type:"point",x:-292.70420767490987,y:127.69426010254801},arrowheadStart:"none",arrowheadEnd:"arrow",text:"",labelPosition:.5,font:"draw",shapeColor:null,strokeWidth:"md"},typeName:"shape"},{x:749.9432407400066,y:507.6958283407593,rotation:4.555309347705199,isLocked:!1,opacity:1,meta:{},id:"shape:xJbFH6GE8sktyfodgK-9d",type:"arrow",parentId:"page:page",index:"a8V",props:{dash:"solid",size:"m",fill:"solid",color:"black",labelColor:"black",bend:-33.715948517019974,start:{type:"point",x:-141.06822675649278,y:304.84894107910753},end:{type:"point",x:-293.7665666504506,y:149.96506626343376},arrowheadStart:"none",arrowheadEnd:"arrow",text:"",labelPosition:.5,font:"draw",shapeColor:null,strokeWidth:"md"},typeName:"shape"},{x:973.8831014746072,y:631.4630835322564,rotation:1.413716694115406,isLocked:!1,opacity:1,meta:{},id:"shape:98AlWuZ3MNJ8HXkw_0SX8",type:"arrow",parentId:"page:page",index:"a9",props:{dash:"solid",size:"m",fill:"solid",color:"black",labelColor:"black",bend:-33.715948517019974,start:{type:"point",x:-138.9882886080492,y:300.5849857402369},end:{type:"point",x:-290.8832143177716,y:128.98965564678986},arrowheadStart:"none",arrowheadEnd:"arrow",text:"",labelPosition:.5,font:"draw",shapeColor:null,strokeWidth:"md"},typeName:"shape"}],assets:[],meta:{},width:420.44444444444446,svg:'<svg direction="ltr" width="530.6513457325561" height="483.94727555311476" viewBox="597.5691768594324 324.49917028373386 530.6513457325561 483.94727555311476" stroke-linecap="round" stroke-linejoin="round" style="background-color: transparent;"><defs></defs><g transform="matrix(1, 0, 0, 1, 1024.2205, 545.352)" opacity="1"><g><foreignObject width="97" height="47"><div data-autosize="true" class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><h4 class="themed-heading">Two</h4></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 605.5692, 545.352)" opacity="1"><g><foreignObject width="97" height="47"><div data-autosize="true" class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><h4 class="themed-heading">Four</h4></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 811.2937, 332.4992)" opacity="1"><g><foreignObject width="97" height="47"><div data-autosize="true" class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><h4 class="themed-heading">One</h4></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 786.7937, 753.4464)" opacity="1"><g><foreignObject width="146" height="47"><div class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><h4 class="themed-heading">Three</h4></div></div></foreignObject></g></g><g transform="matrix(-1, 0, 0, -1, 774.4555, 664.0067)" opacity="1"><g data-shape-type="arrow" style="--stroke-width: 4;"><defs><mask id="shape_gOmdcWQlSymeyfc0iFv_H_clip"><rect x="-396.85968987019567" y="24.0620634260801" width="353.4621966845109" height="375.60508157529574" fill="white"></rect><path d="M -300.40378806246554 133.94585662522945 L -296.8596898701958 124.06206342608016 L -290.0721229701155 132.07323909366693" fill="none" stroke="none"></path></mask></defs><g mask="url(#shape_gOmdcWQlSymeyfc0iFv_H_clip)"><rect x="-100" y="-100" width="353.4621966845109" height="375.60508157529574" fill="transparent" stroke="none"></rect><path d="M-143.39749318568477,299.6671450013758 A218.4976762338476 218.4976762338476 0 0 1 -296.8596898701958,124.06206342608016" fill="none" stroke="#e1e1e1" stroke-width="3.5" stroke-dasharray="none" stroke-dashoffset="none"></path></g><path d="M -300.40378806246554 133.94585662522945 L -296.8596898701958 124.06206342608016 L -290.0721229701155 132.07323909366693" fill="none" stroke="#e1e1e1" stroke-width="3.5"></path></g></g><g transform="matrix(1, 0, 0, 1, 949.3709, 475.1522)" opacity="1"><g data-shape-type="arrow" style="--stroke-width: 4;"><defs><mask id="shape_FoSkoOljiovlpXtyepQ0L_clip"><rect x="-392.70420767491" y="27.694260102547986" width="327.38838606497484" height="367.9125868341108" fill="white"></rect><path d="M -297.41216590820414 137.0796279309049 L -292.70420767490987 127.69426010254801 L -286.93021982833875 136.46415544671538" fill="none" stroke="none"></path></mask></defs><g mask="url(#shape_FoSkoOljiovlpXtyepQ0L_clip)"><rect x="-100" y="-100" width="327.38838606497484" height="367.9125868341108" fill="transparent" stroke="none"></rect><path d="M-165.31582160993514,295.60684693665877 A181.55168626818823 181.55168626818823 0 0 1 -292.70420767490987,127.69426010254801" fill="none" stroke="#e1e1e1" stroke-width="3.5" stroke-dasharray="none" stroke-dashoffset="none"></path></g><path d="M -297.41216590820414 137.0796279309049 L -292.70420767490987 127.69426010254801 L -286.93021982833875 136.46415544671538" fill="none" stroke="#e1e1e1" stroke-width="3.5"></path></g></g><g transform="matrix(-0.1564, -0.9877, 0.9877, -0.1564, 749.9432, 507.6958)" opacity="1"><g data-shape-type="arrow" style="--stroke-width: 4;"><defs><mask id="shape_xJbFH6GE8sktyfodgK-9d_clip"><rect x="-393.7665666504507" y="49.96506626343373" width="352.69833989395795" height="354.88387481567383" fill="white"></rect><path d="M -297.06219035877035 159.93446265304337 L -293.7665666504506 149.96506626343376 L -286.7806279708117 157.80385831095774" fill="none" stroke="none"></path></mask></defs><g mask="url(#shape_xJbFH6GE8sktyfodgK-9d_clip)"><rect x="-100" y="-100" width="352.69833989395795" height="354.88387481567383" fill="transparent" stroke="none"></rect><path d="M-141.06822675649278,304.84894107910753 A192.24158262862494 192.24158262862494 0 0 1 -293.7665666504506,149.96506626343376" fill="none" stroke="#e1e1e1" stroke-width="3.5" stroke-dasharray="none" stroke-dashoffset="none"></path></g><path d="M -297.06219035877035 159.93446265304337 L -293.7665666504506 149.96506626343376 L -286.7806279708117 157.80385831095774" fill="none" stroke="#e1e1e1" stroke-width="3.5"></path></g></g><g transform="matrix(0.1564, 0.9877, -0.9877, 0.1564, 973.8831, 631.4631)" opacity="1"><g data-shape-type="arrow" style="--stroke-width: 4;"><defs><mask id="shape_98AlWuZ3MNJ8HXkw_0SX8_clip"><rect x="-390.8832143177716" y="28.989655646789856" width="351.8949257097224" height="371.59533009344705" fill="white"></rect><path d="M -294.4496119884513 138.86542435887353 L -290.8832143177716 128.98965564678986 L -284.11374656654743 137.01613098563794" fill="none" stroke="none"></path></mask></defs><g mask="url(#shape_98AlWuZ3MNJ8HXkw_0SX8_clip)"><rect x="-100" y="-100" width="351.8949257097224" height="371.59533009344705" fill="transparent" stroke="none"></rect><path d="M-138.9882886080492,300.5849857402369 A211.56192029954403 211.56192029954403 0 0 1 -290.8832143177716,128.98965564678986" fill="none" stroke="#e1e1e1" stroke-width="3.5" stroke-dasharray="none" stroke-dashoffset="none"></path></g><path d="M -294.4496119884513 138.86542435887353 L -290.8832143177716 128.98965564678986 L -284.11374656654743 137.01613098563794" fill="none" stroke="#e1e1e1" stroke-width="3.5"></path></g></g></svg>'}},quadrant:{type:"diagram",attrs:{horizontalAlign:"center",shapes:[{x:1074.82421875,y:229.03125,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:0ok4F6wp2WXfO_JbW55tI",type:"arrow",parentId:"page:page",index:"a1",props:{dash:"solid",size:"m",fill:"solid",color:"black",labelColor:"black",bend:0,start:{type:"point",x:0,y:0},end:{type:"point",x:0,y:400},arrowheadStart:"arrow",arrowheadEnd:"arrow",text:"",labelPosition:.5,font:"draw",shapeColor:null,strokeWidth:"md"},typeName:"shape"},{x:869.5924737463713,y:27.95840719431982,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:lfd5uMWVGIIFlwc_gfUf_",type:"arrow",parentId:"page:page",index:"a2",props:{dash:"solid",size:"m",fill:"solid",color:"black",labelColor:"black",bend:0,start:{type:"point",x:0,y:400},end:{type:"point",x:400,y:400},arrowheadStart:"arrow",arrowheadEnd:"arrow",text:"",labelPosition:.5,font:"draw",shapeColor:null,strokeWidth:"md"},typeName:"shape"},{x:1026.82421875,y:170.3671875,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:c4kLEFg-x_YebbalM4bbJ",type:"text",props:{color:"black",size:"m",w:96,text:"",font:"draw",align:"middle",autoSize:!0,scale:1,h:20,growY:27,html:'<h4 class="themed-heading">Title</h4>',shapeColor:null},parentId:"page:page",index:"a3",typeName:"shape"},{x:1275.47265625,y:404.9296875,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:rr2bWXVlRik_OTR3-Mzxb",type:"text",props:{color:"black",size:"m",w:96,text:"",font:"draw",align:"middle",autoSize:!0,scale:1,h:20,growY:27,html:'<h4 class="themed-heading">Title</h4>',shapeColor:null},parentId:"page:page",index:"a4",typeName:"shape"},{x:770.2109375,y:404.9296875,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:4nADMgFMClNzOAl0NqJsR",type:"text",props:{color:"black",size:"m",w:96,text:"",font:"draw",align:"middle",autoSize:!0,scale:1,h:20,growY:27,html:'<h4 class="themed-heading">Title</h4>',shapeColor:null},parentId:"page:page",index:"a4V",typeName:"shape"},{x:1026.82421875,y:640.79296875,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:pQUKVKJOu78f_j_B0Y1_-",type:"text",props:{color:"black",size:"m",w:96,text:"",font:"draw",align:"middle",autoSize:!0,scale:1,h:20,growY:27,html:'<h4 class="themed-heading">Title</h4>',shapeColor:null},parentId:"page:page",index:"a5",typeName:"shape"}],assets:[],meta:{},width:434.6666666666667,svg:'<svg direction="ltr" width="617.26171875" height="533.42578125" viewBox="762.2109375 162.3671875 617.26171875 533.42578125" stroke-linecap="round" stroke-linejoin="round" style="background-color: transparent;"><defs></defs><g transform="matrix(1, 0, 0, 1, 1074.8242, 229.0313)" opacity="1"><g data-shape-type="arrow" style="--stroke-width: 4;"><defs><mask id="shape_0ok4F6wp2WXfO_JbW55tI_clip"><rect x="-100" y="-100" width="200.00000000000009" height="599.8566231113605" fill="white"></rect><path d="M -5.249999999999997 9.093266739736608 L 0 0 L 5.250000000000001 9.093266739736604" fill="none" stroke="none"></path><path d="M 5.250000000000076 390.7633563716238 L 7.904787935331115e-14 399.8566231113604 L -5.249999999999922 390.76335637162384" fill="none" stroke="none"></path></mask></defs><g mask="url(#shape_0ok4F6wp2WXfO_JbW55tI_clip)"><rect x="-100" y="-100" width="200.00000000000009" height="599.8566231113605" fill="transparent" stroke="none"></rect><path d="M0,0L7.904787935331115e-14,399.8566231113604" fill="none" stroke="#1d1d1d" stroke-width="3.5" stroke-dasharray="none" stroke-dashoffset="none"></path></g><path d="M -5.249999999999997 9.093266739736608 L 0 0 L 5.250000000000001 9.093266739736604" fill="none" stroke="#1d1d1d" stroke-width="3.5"></path><path d="M 5.250000000000076 390.7633563716238 L 7.904787935331115e-14 399.8566231113604 L -5.249999999999922 390.76335637162384" fill="none" stroke="#1d1d1d" stroke-width="3.5"></path></g></g><g transform="matrix(1, 0, 0, 1, 869.5925, 27.9584)" opacity="1"><g data-shape-type="arrow" style="--stroke-width: 4;"><defs><mask id="shape_lfd5uMWVGIIFlwc_gfUf__clip"><rect x="-99.99999999999991" y="299.8566231113604" width="610.4634900072574" height="202.2890625" fill="white"></rect><path d="M 401.39964227952714 396.84505693463564 L 410.46349000725746 402.1456856113604 L 401.34108705332034 407.3448936612464" fill="none" stroke="none"></path><path d="M 9.06384772773043 405.1572517880852 L 7.904787935331115e-14 399.8566231113604 L 9.122402953937236 394.65741506147447" fill="none" stroke="none"></path></mask></defs><g mask="url(#shape_lfd5uMWVGIIFlwc_gfUf__clip)"><rect x="-100" y="-100" width="610.4634900072574" height="202.2890625" fill="transparent" stroke="none"></rect><path d="M410.46349000725746,402.1456856113604L7.904787935331115e-14,399.8566231113604" fill="none" stroke="#1d1d1d" stroke-width="3.5" stroke-dasharray="none" stroke-dashoffset="none"></path></g><path d="M 401.39964227952714 396.84505693463564 L 410.46349000725746 402.1456856113604 L 401.34108705332034 407.3448936612464" fill="none" stroke="#1d1d1d" stroke-width="3.5"></path><path d="M 9.06384772773043 405.1572517880852 L 7.904787935331115e-14 399.8566231113604 L 9.122402953937236 394.65741506147447" fill="none" stroke="#1d1d1d" stroke-width="3.5"></path></g></g><g transform="matrix(1, 0, 0, 1, 1026.8242, 170.3672)" opacity="1"><g><foreignObject width="97" height="47"><div class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><h4 class="themed-heading">Title</h4></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1275.4727, 404.9297)" opacity="1"><g><foreignObject width="97" height="47"><div class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><h4 class="themed-heading">Title</h4></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 770.2109, 404.9297)" opacity="1"><g><foreignObject width="97" height="47"><div class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><h4 class="themed-heading">Title</h4></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1026.8242, 640.793)" opacity="1"><g><foreignObject width="97" height="47"><div class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><h4 class="themed-heading">Title</h4></div></div></foreignObject></g></g></svg>'}},venn:{type:"diagram",attrs:{horizontalAlign:"center",shapes:[{x:1175.87109375,y:508.45703125,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:YuAAYaKmNVXbxRM9Ym0z4",type:"geo",props:{w:394.4375,h:394.4375,geo:"ellipse",color:"black",labelColor:"black",fill:"semi",dash:"solid",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph"></p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"a1",typeName:"shape"},{x:904.79296875,y:508.45703125,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:ywvivjfUEJxH_FT8HCp6E",type:"geo",props:{w:394.4375,h:394.4375,geo:"ellipse",color:"black",labelColor:"black",fill:"semi",dash:"solid",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph"></p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"a2",typeName:"shape"},{x:1040.3320312500002,y:270.0929726013588,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:uoJ_xUvPbDuyBaVh94J02",type:"geo",props:{w:394.4375,h:394.4375,geo:"ellipse",color:"black",labelColor:"black",fill:"semi",dash:"solid",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph"></p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"a3",typeName:"shape"},{x:1092.234375,y:547.42578125,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:W8BtDrKhUUa_fmB-YfrG4",type:"text",props:{color:"black",size:"m",w:108,text:"",font:"draw",align:"middle",autoSize:!0,scale:1,h:20,growY:24,html:'<p class="paragraph">Expensive</p>',shapeColor:null},parentId:"page:page",index:"a4",typeName:"shape"},{x:1282.02734375,y:547.42578125,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:lLHXbsMOmu2pfYDmh7SMV",type:"text",props:{color:"black",size:"m",w:104,text:"",font:"draw",align:"middle",autoSize:!0,scale:1,h:20,growY:24,html:'<p class="paragraph">Take time</p>',shapeColor:null},parentId:"page:page",index:"a5",typeName:"shape"},{x:1185.5507812500002,y:689.046875,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:FJv1W-bQpfCY0dAUn_ezA",type:"text",props:{color:"black",size:"m",w:96,text:"",font:"draw",align:"middle",autoSize:!0,scale:1,h:20,growY:52,html:'<p class="paragraph">Low<br>quality</p>',shapeColor:null},parentId:"page:page",index:"a6",typeName:"shape"},{x:1373.08984375,y:705.67578125,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:tT7vEjVJGLo0tv18nWtJV",type:"text",props:{color:"black",size:"m",w:107,text:"",font:"draw",align:"middle",autoSize:!0,scale:1,h:20,growY:34,html:'<h3 class="themed-heading">Cheap</h3>',shapeColor:null},parentId:"page:page",index:"a7",typeName:"shape"},{x:1017.1328125,y:705.67578125,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:gaQCyTxoxdrsvbDkqQV9C",type:"text",props:{color:"black",size:"m",w:96,text:"",font:"draw",align:"middle",autoSize:!0,scale:1,h:20,growY:34,html:'<h3 class="themed-heading">Fast</h3>',shapeColor:null},parentId:"page:page",index:"a8",typeName:"shape"},{x:1189.5507812500002,y:424.234375,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:VAbhvBq-Ec1CIYnCjzhl2",type:"text",props:{color:"black",size:"m",w:96,text:"",font:"draw",align:"middle",autoSize:!0,scale:1,h:20,growY:34,html:'<h3 class="themed-heading">Good</h3>',shapeColor:null},parentId:"page:page",index:"a9",typeName:"shape"}],assets:[],meta:{},width:431.1111111111111,svg:'<svg direction="ltr" width="681.5156250000002" height="648.2953009459236" viewBox="896.7929687499998 262.3461014527175 681.5156250000002 648.2953009459236" stroke-linecap="round" stroke-linejoin="round" style="background-color: transparent;"><defs></defs><g transform="matrix(1, 0, 0, 1, 1175.8711, 508.457)" opacity="1"><g data-shape-type="geo"><path d="M0,197.21875a197.21875,197.21875,0,1,1,394.4375,0a197.21875,197.21875,0,1,1,-394.4375,0" width="394.4375" height="394.4375" id="shape:YuAAYaKmNVXbxRM9Ym0z4" style="fill-opacity: 0.5; stroke-width: 2;"></path><foreignObject width="394.43750000000017" height="393.93124229728244"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph"></p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 904.793, 508.457)" opacity="1"><g data-shape-type="geo"><path d="M0,197.21875a197.21875,197.21875,0,1,1,394.4375,0a197.21875,197.21875,0,1,1,-394.4375,0" width="394.4375" height="394.4375" id="shape:ywvivjfUEJxH_FT8HCp6E" style="fill-opacity: 0.5; stroke-width: 2;"></path><foreignObject width="394.43750000000017" height="393.93124229728244"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph"></p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1040.332, 270.093)" opacity="1"><g data-shape-type="geo"><path d="M0,197.21875a197.21875,197.21875,0,1,1,394.4375,0a197.21875,197.21875,0,1,1,-394.4375,0" width="394.4375" height="394.4375" id="shape:uoJ_xUvPbDuyBaVh94J02" style="fill-opacity: 0.5; stroke-width: 2;"></path><foreignObject width="394.43750000000017" height="393.93124229728244"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph"></p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1092.2344, 547.4258)" opacity="1"><g><foreignObject width="109" height="44"><div data-autosize="true" class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><p class="paragraph">Expensive</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1282.0273, 547.4258)" opacity="1"><g><foreignObject width="105" height="44"><div data-autosize="true" class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><p class="paragraph">Take time</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1185.5508, 689.0469)" opacity="1"><g><foreignObject width="97" height="72"><div data-autosize="true" class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><p class="paragraph">Low<br>quality</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1373.0898, 705.6758)" opacity="1"><g><foreignObject width="108" height="54"><div data-autosize="true" class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><h3 class="themed-heading">Cheap</h3></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1017.1328, 705.6758)" opacity="1"><g><foreignObject width="97" height="54"><div data-autosize="true" class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><h3 class="themed-heading">Fast</h3></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1189.5508, 424.2344)" opacity="1"><g><foreignObject width="97" height="54"><div data-autosize="true" class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><h3 class="themed-heading">Good</h3></div></div></foreignObject></g></g></svg>'}},calendarWeek:{type:"diagram",attrs:{horizontalAlign:null,shapes:[{x:179.0625,y:119.1171875,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:hF6E8P7CiXiSsRo7LG0FF",type:"geo",props:{w:301.9961468758189,h:873.9095562737236,geo:"rectangle",color:"black",labelColor:"black",fill:"none",dash:"solid",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph"></p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"Zy",typeName:"shape"},{x:495.4840350809791,y:119.1171875,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:taayoSjVZnQxAEAkYzW8F",type:"geo",props:{w:301.9961468758189,h:873.9095562737236,geo:"rectangle",color:"black",labelColor:"black",fill:"none",dash:"solid",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph"></p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"Zz",typeName:"shape"},{x:811.9055701619584,y:119.1171875,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:DogbW2-V83SiEhlezSTF1",type:"geo",props:{w:301.9961468758189,h:873.9095562737236,geo:"rectangle",color:"black",labelColor:"black",fill:"none",dash:"solid",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph"></p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"a0",typeName:"shape"},{x:1128.3271052429373,y:119.1171875,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:SzwGSCVn7h1Uo_B_b-0jU",type:"geo",props:{w:301.9961468758189,h:873.9095562737236,geo:"rectangle",color:"black",labelColor:"black",fill:"none",dash:"solid",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph"></p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"a1",typeName:"shape"},{x:1445.4682141660628,y:119.1171875,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:IAo_g6FQp9YK2JWBCaGMU",type:"geo",props:{w:301.9961468758189,h:873.9095562737236,geo:"rectangle",color:"black",labelColor:"black",fill:"none",dash:"solid",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph"></p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"a2",typeName:"shape"},{x:832.3614242096944,y:134.56584632459914,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:l_vkpYMsSpaE9s3TN_mKw",type:"text",props:{color:"black",size:"m",w:261.08443878034683,text:"Wed",font:"draw",align:"middle",autoSize:!1,scale:1,h:20,growY:34,html:'<h3 class="themed-heading" style="text-align: center">Wed</h3>',shapeColor:null},parentId:"page:page",index:"a5",typeName:"shape"},{x:1148.7829592906733,y:134.56584632459914,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:Cw9jJcIeB18UZCowlxx0A",type:"text",props:{color:"black",size:"m",w:261.08443878034683,text:"Thu",font:"draw",align:"middle",autoSize:!1,scale:1,h:20,growY:34,html:'<h3 class="themed-heading" style="text-align: center">Thu</h3>',shapeColor:null},parentId:"page:page",index:"a6",typeName:"shape"},{x:1465.9240682137988,y:134.56584632459914,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:VvguEUBmR1u7tIdodua_7",type:"text",props:{color:"black",size:"m",w:261.08443878034683,text:"Fri",font:"draw",align:"middle",autoSize:!1,scale:1,h:20,growY:34,html:'<h3 class="themed-heading" style="text-align: center">Fri</h3>',shapeColor:null},parentId:"page:page",index:"a7",typeName:"shape"},{x:204.97813786171344,y:211.51595163729675,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:lqef5zWrrlQl9HENeGEnL",type:"geo",props:{w:250.16487115239204,h:64.78836164651827,geo:"rectangle",color:"black",labelColor:"black",fill:"semi",dash:"solid",size:"m",font:"draw",text:"Meeting with Jon",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph">Meeting with Jon</p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"aD",typeName:"shape"},{x:204.97813786171344,y:605.0019073645135,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:IgEYD45iYr1sSFMoAwbyu",type:"geo",props:{w:250.16487115239204,h:64.78836164651827,geo:"rectangle",color:"black",labelColor:"black",fill:"semi",dash:"solid",size:"m",font:"draw",text:"Team bonding",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph">Team bonding</p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"aDG",typeName:"shape"},{x:204.97813786171344,y:297.31890598073045,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:Qim4eNR90mSPnWlJh468S",type:"geo",props:{w:250.16487115239204,h:64.78836164651827,geo:"rectangle",color:"black",labelColor:"black",fill:"semi",dash:"solid",size:"m",font:"draw",text:"Checking emails",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph">Checking emails</p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"aDV",typeName:"shape"},{x:1154.2427431046506,y:295.64859941977187,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:IL-fsOSVuSRXre2dwItqj",type:"geo",props:{w:250.16487115239204,h:64.78836164651827,geo:"rectangle",color:"black",labelColor:"black",fill:"semi",dash:"solid",size:"m",font:"draw",text:"HR meetings",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph">HR meetings</p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"aDZ",typeName:"shape"},{x:1154.2427431046506,y:379.7812472022469,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:bH7UwVBlNxoEzsh_1zjen",type:"geo",props:{w:250.16487115239204,h:64.78836164651827,geo:"rectangle",color:"black",labelColor:"black",fill:"semi",dash:"solid",size:"m",font:"draw",text:"Onboarding new hire",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph">Onboarding new hire</p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"aDb",typeName:"shape"},{x:521.3996729426926,y:211.51595163729675,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:HAHtaenTwvKec_w0q3MVQ",type:"geo",props:{w:250.16487115239204,h:64.78836164651827,geo:"rectangle",color:"black",labelColor:"black",fill:"semi",dash:"solid",size:"m",font:"draw",text:"Attend CS meeting",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph">Attend CS meeting</p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"aDd",typeName:"shape"},{x:1471.3838520277761,y:379.7812472022469,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:7ONsfQ5KbFBdZuwBMYOXz",type:"geo",props:{w:250.16487115239204,h:64.78836164651827,geo:"rectangle",color:"black",labelColor:"black",fill:"solid",dash:"solid",size:"m",font:"draw",text:"Team happy hour",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph">Team happy hour</p>',shapeColor:"#26A688",strokeWidth:"sm"},parentId:"page:page",index:"aDe",typeName:"shape"},{x:1471.3838520277761,y:211.51595163729675,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:ov9MLbM2hIPHiHbKtLXgq",type:"geo",props:{w:250.16487115239204,h:64.78836164651827,geo:"rectangle",color:"black",labelColor:"black",fill:"semi",dash:"solid",size:"m",font:"draw",text:"Attend CS meeting",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph">Attend CS meeting</p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"aDf",typeName:"shape"},{x:1471.3838520277761,y:295.64859941977187,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:JcWFs24GgyS_MNCWFyy4F",type:"geo",props:{w:250.16487115239204,h:64.78836164651827,geo:"rectangle",color:"black",labelColor:"black",fill:"semi",dash:"solid",size:"m",font:"draw",text:"Office tour",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph">Office tour</p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"aDg",typeName:"shape"},{x:837.8212080236717,y:211.51595163729675,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:avNg2b0XCoj-PSVRH9NqC",type:"geo",props:{w:250.16487115239204,h:64.78836164651827,geo:"rectangle",color:"black",labelColor:"black",fill:"semi",dash:"solid",size:"m",font:"draw",text:"1:1 with Zach",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph">1:1 with Zach</p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"aDh",typeName:"shape"},{x:837.8212080236717,y:297.45150900814224,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:B3hQTKLjKcuwSsT8VwJpR",type:"geo",props:{w:250.16487115239204,h:64.78836164651827,geo:"rectangle",color:"black",labelColor:"black",fill:"semi",dash:"solid",size:"m",font:"draw",text:"Company all hands",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph">Company all hands</p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"aDj",typeName:"shape"},{x:837.8212080236717,y:379.7812472022469,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:Ew3E_uQg_oIqeazf2vqpP",type:"geo",props:{w:251,h:101.34061312191727,geo:"rectangle",color:"black",labelColor:"black",fill:"semi",dash:"solid",size:"m",font:"draw",text:"Bugbashing diagrams V2 with eng team",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph">Bugbashing diagrams V2 with eng team</p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"aDk",typeName:"shape"},{x:837.8212080236717,y:500.13645302107966,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:Fg4fxWRIxgyovffXhHIzF",type:"geo",props:{w:250.16487115239204,h:64.78836164651827,geo:"rectangle",color:"black",labelColor:"black",fill:"semi",dash:"solid",size:"m",font:"draw",text:"Customer call",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph">Customer call</p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"aDkV",typeName:"shape"},{x:1154.2427431046506,y:211.51595163729678,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:VvbN_RGjDdrkdA1f5rsRd",type:"geo",props:{w:250.16487115239204,h:64.78836164651827,geo:"rectangle",color:"black",labelColor:"black",fill:"semi",dash:"solid",size:"m",font:"draw",text:"Vendor call",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph">Vendor call</p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"aDkl",typeName:"shape"},{x:204.97813786171344,y:381.1218603241642,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:2vK8h6FMVleRUW2G9Od19",type:"geo",props:{w:251,h:121.0625,geo:"rectangle",color:"black",labelColor:"black",fill:"semi",dash:"solid",size:"m",font:"draw",text:"Setup a call with our food vendor at the office in SF",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph">Setup a call with our food vendor at the office in SF</p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"aDl",typeName:"shape"},{x:204.97813786171344,y:521.1989530210797,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:9SYkhq44JuzFO637hB390",type:"geo",props:{w:250.16487115239204,h:64.78836164651827,geo:"rectangle",color:"black",labelColor:"black",fill:"solid",dash:"solid",size:"m",font:"draw",text:" Lunch",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph"><span id="hamburger" native="\uD83C\uDF54" class="emoji">\uD83C\uDF54</span> Lunch</p>',shapeColor:"#26A688",strokeWidth:"none"},parentId:"page:page",index:"aDt",typeName:"shape"},{x:515.9398891287151,y:134.56584632459914,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:SDZcV2JidoSxClP0MxiaV",type:"text",props:{color:"black",size:"m",w:261.08443878034683,text:"Tue",font:"draw",align:"middle",autoSize:!1,scale:1,h:20,growY:34,html:'<h3 class="themed-heading" style="text-align: center">Tue</h3>',shapeColor:null},parentId:"page:page",index:"aE",typeName:"shape"},{x:199.518354047736,y:134.56584632459914,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:tSOF89upJLNWmMbbVcY6R",type:"text",props:{color:"black",size:"m",w:261.08443878034683,text:"Mon",font:"draw",align:"middle",autoSize:!1,scale:1,h:20,growY:34,html:'<h3 class="themed-heading" style="text-align: center">Mon</h3>',shapeColor:null},parentId:"page:page",index:"aF",typeName:"shape"}],assets:[{meta:{},id:"asset:1703535279",type:"image",typeName:"asset",props:{name:"Screen Shot 2024-04-10 at 3.37.50 PM.png",src:"https://cdn-staging.gamma.app/QWjS6fBfpt/b63db3d6baac4d469108cf61a4c7ee71/original/Screen-Shot-2024-04-10-at-3.37.50-PM.png",w:2842,h:1550,mimeType:"image/png",isAnimated:!1}},{meta:{},id:"asset:-1866522948",type:"image",typeName:"asset",props:{name:"tldrawFile",src:"https://cdn-staging.gamma.app/QWjS6fBfpt/c494e974b8cc46b8910df2aa1a4051db/original/tldrawFile.png",w:3841,h:2161,mimeType:"image/png",isAnimated:!1}}],meta:{},width:null,svg:'<svg direction="ltr" width="1584.4018610418816" height="889.9095562737236" viewBox="171.0625 111.1171875 1584.4018610418816 889.9095562737236" stroke-linecap="round" stroke-linejoin="round" style="background-color: transparent;"><defs></defs><g transform="matrix(1, 0, 0, 1, 204.9781, 211.516)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L246.1649,0 Q250.1649,0 250.1649,4 L250.1649,60.7884 Q250.1649,64.7884 246.1649,64.7884 L4,64.7884 Q0,64.7884 0,60.7884 L0,4 Q0,0 4,0 " id="shape:lqef5zWrrlQl9HENeGEnL" class="tl-shape-background" style="fill-opacity: 0.75; stroke-width: 0;"></path></g></g><g transform="matrix(1, 0, 0, 1, 204.9781, 605.0019)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L246.1649,0 Q250.1649,0 250.1649,4 L250.1649,60.7884 Q250.1649,64.7884 246.1649,64.7884 L4,64.7884 Q0,64.7884 0,60.7884 L0,4 Q0,0 4,0 " id="shape:IgEYD45iYr1sSFMoAwbyu" class="tl-shape-background" style="fill-opacity: 0.75; stroke-width: 0;"></path></g></g><g transform="matrix(1, 0, 0, 1, 204.9781, 297.3189)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L246.1649,0 Q250.1649,0 250.1649,4 L250.1649,60.7884 Q250.1649,64.7884 246.1649,64.7884 L4,64.7884 Q0,64.7884 0,60.7884 L0,4 Q0,0 4,0 " id="shape:Qim4eNR90mSPnWlJh468S" class="tl-shape-background" style="fill-opacity: 0.75; stroke-width: 0;"></path></g></g><g transform="matrix(1, 0, 0, 1, 1154.2427, 295.6486)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L246.1649,0 Q250.1649,0 250.1649,4 L250.1649,60.7884 Q250.1649,64.7884 246.1649,64.7884 L4,64.7884 Q0,64.7884 0,60.7884 L0,4 Q0,0 4,0 " id="shape:IL-fsOSVuSRXre2dwItqj" class="tl-shape-background" style="fill-opacity: 0.75; stroke-width: 0;"></path></g></g><g transform="matrix(1, 0, 0, 1, 1154.2427, 379.7812)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L246.1649,0 Q250.1649,0 250.1649,4 L250.1649,60.7884 Q250.1649,64.7884 246.1649,64.7884 L4,64.7884 Q0,64.7884 0,60.7884 L0,4 Q0,0 4,0 " id="shape:bH7UwVBlNxoEzsh_1zjen" class="tl-shape-background" style="fill-opacity: 0.75; stroke-width: 0;"></path></g></g><g transform="matrix(1, 0, 0, 1, 521.3997, 211.516)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L246.1649,0 Q250.1649,0 250.1649,4 L250.1649,60.7884 Q250.1649,64.7884 246.1649,64.7884 L4,64.7884 Q0,64.7884 0,60.7884 L0,4 Q0,0 4,0 " id="shape:HAHtaenTwvKec_w0q3MVQ" class="tl-shape-background" style="fill-opacity: 0.75; stroke-width: 0;"></path></g></g><g transform="matrix(1, 0, 0, 1, 1471.3839, 211.516)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L246.1649,0 Q250.1649,0 250.1649,4 L250.1649,60.7884 Q250.1649,64.7884 246.1649,64.7884 L4,64.7884 Q0,64.7884 0,60.7884 L0,4 Q0,0 4,0 " id="shape:ov9MLbM2hIPHiHbKtLXgq" class="tl-shape-background" style="fill-opacity: 0.75; stroke-width: 0;"></path></g></g><g transform="matrix(1, 0, 0, 1, 1471.3839, 295.6486)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L246.1649,0 Q250.1649,0 250.1649,4 L250.1649,60.7884 Q250.1649,64.7884 246.1649,64.7884 L4,64.7884 Q0,64.7884 0,60.7884 L0,4 Q0,0 4,0 " id="shape:JcWFs24GgyS_MNCWFyy4F" class="tl-shape-background" style="fill-opacity: 0.75; stroke-width: 0;"></path></g></g><g transform="matrix(1, 0, 0, 1, 837.8212, 211.516)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L246.1649,0 Q250.1649,0 250.1649,4 L250.1649,60.7884 Q250.1649,64.7884 246.1649,64.7884 L4,64.7884 Q0,64.7884 0,60.7884 L0,4 Q0,0 4,0 " id="shape:avNg2b0XCoj-PSVRH9NqC" class="tl-shape-background" style="fill-opacity: 0.75; stroke-width: 0;"></path></g></g><g transform="matrix(1, 0, 0, 1, 837.8212, 297.4515)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L246.1649,0 Q250.1649,0 250.1649,4 L250.1649,60.7884 Q250.1649,64.7884 246.1649,64.7884 L4,64.7884 Q0,64.7884 0,60.7884 L0,4 Q0,0 4,0 " id="shape:B3hQTKLjKcuwSsT8VwJpR" class="tl-shape-background" style="fill-opacity: 0.75; stroke-width: 0;"></path></g></g><g transform="matrix(1, 0, 0, 1, 837.8212, 379.7812)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L247,0 Q251,0 251,4 L251,97.3406 Q251,101.3406 247,101.3406 L4,101.3406 Q0,101.3406 0,97.3406 L0,4 Q0,0 4,0 " id="shape:Ew3E_uQg_oIqeazf2vqpP" class="tl-shape-background" style="fill-opacity: 0.75; stroke-width: 0;"></path></g></g><g transform="matrix(1, 0, 0, 1, 837.8212, 500.1365)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L246.1649,0 Q250.1649,0 250.1649,4 L250.1649,60.7884 Q250.1649,64.7884 246.1649,64.7884 L4,64.7884 Q0,64.7884 0,60.7884 L0,4 Q0,0 4,0 " id="shape:Fg4fxWRIxgyovffXhHIzF" class="tl-shape-background" style="fill-opacity: 0.75; stroke-width: 0;"></path></g></g><g transform="matrix(1, 0, 0, 1, 1154.2427, 211.516)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L246.1649,0 Q250.1649,0 250.1649,4 L250.1649,60.7884 Q250.1649,64.7884 246.1649,64.7884 L4,64.7884 Q0,64.7884 0,60.7884 L0,4 Q0,0 4,0 " id="shape:VvbN_RGjDdrkdA1f5rsRd" class="tl-shape-background" style="fill-opacity: 0.75; stroke-width: 0;"></path></g></g><g transform="matrix(1, 0, 0, 1, 204.9781, 381.1219)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L247,0 Q251,0 251,4 L251,117.0625 Q251,121.0625 247,121.0625 L4,121.0625 Q0,121.0625 0,117.0625 L0,4 Q0,0 4,0 " id="shape:2vK8h6FMVleRUW2G9Od19" class="tl-shape-background" style="fill-opacity: 0.75; stroke-width: 0;"></path></g></g><g transform="matrix(1, 0, 0, 1, 179.0625, 119.1172)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L297.9961,0 Q301.9961,0 301.9961,4 L301.9961,869.9096 Q301.9961,873.9096 297.9961,873.9096 L4,873.9096 Q0,873.9096 0,869.9096 L0,4 Q0,0 4,0 " id="shape:hF6E8P7CiXiSsRo7LG0FF" style="fill-opacity: 0; stroke-width: 2;"></path><foreignObject width="301.9961468758189" height="873.9095562737236"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph"></p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 495.484, 119.1172)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L297.9961,0 Q301.9961,0 301.9961,4 L301.9961,869.9096 Q301.9961,873.9096 297.9961,873.9096 L4,873.9096 Q0,873.9096 0,869.9096 L0,4 Q0,0 4,0 " id="shape:taayoSjVZnQxAEAkYzW8F" style="fill-opacity: 0; stroke-width: 2;"></path><foreignObject width="301.9961468758189" height="873.9095562737236"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph"></p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 811.9056, 119.1172)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L297.9961,0 Q301.9961,0 301.9961,4 L301.9961,869.9096 Q301.9961,873.9096 297.9961,873.9096 L4,873.9096 Q0,873.9096 0,869.9096 L0,4 Q0,0 4,0 " id="shape:DogbW2-V83SiEhlezSTF1" style="fill-opacity: 0; stroke-width: 2;"></path><foreignObject width="301.9961468758189" height="873.9095562737236"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph"></p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1128.3271, 119.1172)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L297.9961,0 Q301.9961,0 301.9961,4 L301.9961,869.9096 Q301.9961,873.9096 297.9961,873.9096 L4,873.9096 Q0,873.9096 0,869.9096 L0,4 Q0,0 4,0 " id="shape:SzwGSCVn7h1Uo_B_b-0jU" style="fill-opacity: 0; stroke-width: 2;"></path><foreignObject width="301.9961468758189" height="873.9095562737236"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph"></p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1445.4682, 119.1172)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L297.9961,0 Q301.9961,0 301.9961,4 L301.9961,869.9096 Q301.9961,873.9096 297.9961,873.9096 L4,873.9096 Q0,873.9096 0,869.9096 L0,4 Q0,0 4,0 " id="shape:IAo_g6FQp9YK2JWBCaGMU" style="fill-opacity: 0; stroke-width: 2;"></path><foreignObject width="301.9961468758189" height="873.9095562737236"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph"></p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 832.3614, 134.5658)" opacity="1"><g><foreignObject width="262.08443878034683" height="54"><div class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><h3 class="themed-heading" style="text-align: center">Wed</h3></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1148.783, 134.5658)" opacity="1"><g><foreignObject width="262.08443878034683" height="54"><div class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><h3 class="themed-heading" style="text-align: center">Thu</h3></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1465.9241, 134.5658)" opacity="1"><g><foreignObject width="262.08443878034683" height="54"><div class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><h3 class="themed-heading" style="text-align: center">Fri</h3></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 204.9781, 211.516)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L246.1649,0 Q250.1649,0 250.1649,4 L250.1649,60.7884 Q250.1649,64.7884 246.1649,64.7884 L4,64.7884 Q0,64.7884 0,60.7884 L0,4 Q0,0 4,0 " id="shape:lqef5zWrrlQl9HENeGEnL" style="fill-opacity: 0; stroke-width: 2;"></path><foreignObject width="250.16487115239204" height="64.78836164651827"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph">Meeting with Jon</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 204.9781, 605.0019)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L246.1649,0 Q250.1649,0 250.1649,4 L250.1649,60.7884 Q250.1649,64.7884 246.1649,64.7884 L4,64.7884 Q0,64.7884 0,60.7884 L0,4 Q0,0 4,0 " id="shape:IgEYD45iYr1sSFMoAwbyu" style="fill-opacity: 0; stroke-width: 2;"></path><foreignObject width="250.16487115239204" height="64.78836164651827"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph">Team bonding</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 204.9781, 297.3189)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L246.1649,0 Q250.1649,0 250.1649,4 L250.1649,60.7884 Q250.1649,64.7884 246.1649,64.7884 L4,64.7884 Q0,64.7884 0,60.7884 L0,4 Q0,0 4,0 " id="shape:Qim4eNR90mSPnWlJh468S" style="fill-opacity: 0; stroke-width: 2;"></path><foreignObject width="250.16487115239204" height="64.78836164651827"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph">Checking emails</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1154.2427, 295.6486)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L246.1649,0 Q250.1649,0 250.1649,4 L250.1649,60.7884 Q250.1649,64.7884 246.1649,64.7884 L4,64.7884 Q0,64.7884 0,60.7884 L0,4 Q0,0 4,0 " id="shape:IL-fsOSVuSRXre2dwItqj" style="fill-opacity: 0; stroke-width: 2;"></path><foreignObject width="250.16487115239204" height="64.78836164651827"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph">HR meetings</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1154.2427, 379.7812)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L246.1649,0 Q250.1649,0 250.1649,4 L250.1649,60.7884 Q250.1649,64.7884 246.1649,64.7884 L4,64.7884 Q0,64.7884 0,60.7884 L0,4 Q0,0 4,0 " id="shape:bH7UwVBlNxoEzsh_1zjen" style="fill-opacity: 0; stroke-width: 2;"></path><foreignObject width="250.16487115239204" height="64.78836164651827"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph">Onboarding new hire</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 521.3997, 211.516)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L246.1649,0 Q250.1649,0 250.1649,4 L250.1649,60.7884 Q250.1649,64.7884 246.1649,64.7884 L4,64.7884 Q0,64.7884 0,60.7884 L0,4 Q0,0 4,0 " id="shape:HAHtaenTwvKec_w0q3MVQ" style="fill-opacity: 0; stroke-width: 2;"></path><foreignObject width="250.16487115239204" height="64.78836164651827"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph">Attend CS meeting</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1471.3839, 379.7812)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L246.1649,0 Q250.1649,0 250.1649,4 L250.1649,60.7884 Q250.1649,64.7884 246.1649,64.7884 L4,64.7884 Q0,64.7884 0,60.7884 L0,4 Q0,0 4,0 " id="shape:7ONsfQ5KbFBdZuwBMYOXz" style="fill-opacity: 1; --shape-bg-color-override: #26A688; --shape-border-color-override: #3fbfa1ff; stroke-width: 2;"></path><foreignObject width="250.16487115239204" height="64.78836164651827" class="themed-heading-no-gradient" style="--body-color: #fff; --heading-color: #fff; --link-color: #fff; --link-color-inverted: #000; --link-color-hover: #e6e6e6ff;"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph">Team happy hour</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1471.3839, 211.516)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L246.1649,0 Q250.1649,0 250.1649,4 L250.1649,60.7884 Q250.1649,64.7884 246.1649,64.7884 L4,64.7884 Q0,64.7884 0,60.7884 L0,4 Q0,0 4,0 " id="shape:ov9MLbM2hIPHiHbKtLXgq" style="fill-opacity: 0; stroke-width: 2;"></path><foreignObject width="250.16487115239204" height="64.78836164651827"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph">Attend CS meeting</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1471.3839, 295.6486)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L246.1649,0 Q250.1649,0 250.1649,4 L250.1649,60.7884 Q250.1649,64.7884 246.1649,64.7884 L4,64.7884 Q0,64.7884 0,60.7884 L0,4 Q0,0 4,0 " id="shape:JcWFs24GgyS_MNCWFyy4F" style="fill-opacity: 0; stroke-width: 2;"></path><foreignObject width="250.16487115239204" height="64.78836164651827"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph">Office tour</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 837.8212, 211.516)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L246.1649,0 Q250.1649,0 250.1649,4 L250.1649,60.7884 Q250.1649,64.7884 246.1649,64.7884 L4,64.7884 Q0,64.7884 0,60.7884 L0,4 Q0,0 4,0 " id="shape:avNg2b0XCoj-PSVRH9NqC" style="fill-opacity: 0; stroke-width: 2;"></path><foreignObject width="250.16487115239204" height="64.78836164651827"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph">1:1 with Zach</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 837.8212, 297.4515)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L246.1649,0 Q250.1649,0 250.1649,4 L250.1649,60.7884 Q250.1649,64.7884 246.1649,64.7884 L4,64.7884 Q0,64.7884 0,60.7884 L0,4 Q0,0 4,0 " id="shape:B3hQTKLjKcuwSsT8VwJpR" style="fill-opacity: 0; stroke-width: 2;"></path><foreignObject width="250.16487115239204" height="64.78836164651827"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph">Company all hands</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 837.8212, 379.7812)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L247,0 Q251,0 251,4 L251,97.3406 Q251,101.3406 247,101.3406 L4,101.3406 Q0,101.3406 0,97.3406 L0,4 Q0,0 4,0 " id="shape:Ew3E_uQg_oIqeazf2vqpP" style="fill-opacity: 0; stroke-width: 2;"></path><foreignObject width="251" height="101.34061312191727"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph">Bugbashing diagrams V2 with eng team</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 837.8212, 500.1365)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L246.1649,0 Q250.1649,0 250.1649,4 L250.1649,60.7884 Q250.1649,64.7884 246.1649,64.7884 L4,64.7884 Q0,64.7884 0,60.7884 L0,4 Q0,0 4,0 " id="shape:Fg4fxWRIxgyovffXhHIzF" style="fill-opacity: 0; stroke-width: 2;"></path><foreignObject width="250.16487115239204" height="64.78836164651827"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph">Customer call</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1154.2427, 211.516)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L246.1649,0 Q250.1649,0 250.1649,4 L250.1649,60.7884 Q250.1649,64.7884 246.1649,64.7884 L4,64.7884 Q0,64.7884 0,60.7884 L0,4 Q0,0 4,0 " id="shape:VvbN_RGjDdrkdA1f5rsRd" style="fill-opacity: 0; stroke-width: 2;"></path><foreignObject width="250.16487115239204" height="64.78836164651827"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph">Vendor call</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 204.9781, 381.1219)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L247,0 Q251,0 251,4 L251,117.0625 Q251,121.0625 247,121.0625 L4,121.0625 Q0,121.0625 0,117.0625 L0,4 Q0,0 4,0 " id="shape:2vK8h6FMVleRUW2G9Od19" style="fill-opacity: 0; stroke-width: 2;"></path><foreignObject width="251" height="121.0625"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph">Setup a call with our food vendor at the office in SF</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 204.9781, 521.199)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L246.1649,0 Q250.1649,0 250.1649,4 L250.1649,60.7884 Q250.1649,64.7884 246.1649,64.7884 L4,64.7884 Q0,64.7884 0,60.7884 L0,4 Q0,0 4,0 " id="shape:9SYkhq44JuzFO637hB390" style="fill-opacity: 1; --shape-bg-color-override: #26A688; --shape-border-color-override: #3fbfa1ff; stroke-width: 0;"></path><foreignObject width="250.16487115239204" height="64.78836164651827" class="themed-heading-no-gradient" style="--body-color: #fff; --heading-color: #fff; --link-color: #fff; --link-color-inverted: #000; --link-color-hover: #e6e6e6ff;"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph"><span id="hamburger" native="\uD83C\uDF54" class="emoji">\uD83C\uDF54</span> Lunch</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 515.9399, 134.5658)" opacity="1"><g><foreignObject width="262.08443878034683" height="54"><div class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><h3 class="themed-heading" style="text-align: center">Tue</h3></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 199.5184, 134.5658)" opacity="1"><g><foreignObject width="262.08443878034683" height="54"><div class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><h3 class="themed-heading" style="text-align: center">Mon</h3></div></div></foreignObject></g></g></svg>'}},calendarMonths:{type:"diagram",attrs:{horizontalAlign:null,shapes:[{x:187.0625,y:119.1171875,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:hF6E8P7CiXiSsRo7LG0FF",type:"geo",props:{w:419.6875,h:677.9375,geo:"rectangle",color:"black",labelColor:"black",fill:"solid",dash:"solid",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph"></p>',shapeColor:null,strokeWidth:"none"},parentId:"page:page",index:"Zy",typeName:"shape"},{x:621.23828125,y:119.1171875,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:taayoSjVZnQxAEAkYzW8F",type:"geo",props:{w:419.6875,h:677.9375,geo:"rectangle",color:"black",labelColor:"black",fill:"solid",dash:"solid",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph"></p>',shapeColor:null,strokeWidth:"none"},parentId:"page:page",index:"Zz",typeName:"shape"},{x:1055.4140625,y:119.1171875,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:DogbW2-V83SiEhlezSTF1",type:"geo",props:{w:419.6875,h:677.9375,geo:"rectangle",color:"black",labelColor:"black",fill:"solid",dash:"solid",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph"></p>',shapeColor:null,strokeWidth:"none"},parentId:"page:page",index:"a0",typeName:"shape"},{x:1479.765625,y:227.52734375,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:n-HH4IouUsStSFr3VNbU-",type:"line",parentId:"page:page",index:"a2",props:{dash:"solid",size:"m",color:"black",spline:"line",points:{a1:{id:"a1",index:"a1",x:-4.6640625,y:22115642650533118e-29},a2:{id:"a2",index:"a2",x:-1292.703125,y:2220446049250313e-28}},shapeColor:null,strokeWidth:"none"},typeName:"shape"},{x:201.34708590770333,y:145.867869309553,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:BEBrp9VENbneWCEP9Z57D",type:"text",props:{color:"black",size:"m",w:389.55916409229667,text:"January",font:"draw",align:"middle",autoSize:!1,scale:1,h:20,growY:34,html:'<h3 class="themed-heading">January</h3>',shapeColor:null},parentId:"page:page",index:"a3",typeName:"shape"},{x:631.6081020625556,y:145.867869309553,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:-3Bu-xyyud5-NY1mEsn_r",type:"text",props:{color:"black",size:"m",w:399.24346043744436,text:"February",font:"draw",align:"middle",autoSize:!1,scale:1,h:20,growY:34,html:'<h3 class="themed-heading">February</h3>',shapeColor:null},parentId:"page:page",index:"a4",typeName:"shape"},{x:1064.4140625,y:145.867869309553,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:97V6hIrYPl_7kahzLVj4Y",type:"text",props:{color:"black",size:"m",w:397.96463853034425,text:"March",font:"draw",align:"middle",autoSize:!1,scale:1,h:20,growY:34,html:'<h3 class="themed-heading">March</h3>',shapeColor:null},parentId:"page:page",index:"a5",typeName:"shape"},{x:213.4453125,y:262.6015625,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:hqEIx0gJpckN8eL0a3_eG",type:"geo",props:{w:377.57421875,h:68.80859375,geo:"rectangle",color:"black",labelColor:"black",fill:"solid",dash:"solid",size:"m",font:"draw",text:"Campaign brief",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph">Campaign brief</p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"a6",typeName:"shape"},{x:424.8515625,y:350.465234375,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:L4SJqvXoG-EotQtRMTPY8",type:"geo",props:{w:242.98046875,h:68.80859375,geo:"rectangle",color:"black",labelColor:"black",fill:"solid",dash:"solid",size:"m",font:"draw",text:"Brainstorming idea",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph">Brainstorming idea</p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"a7",typeName:"shape"},{x:642.359375,y:438.32890625000005,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:5PsZHZLZu4_CVVyhnfMhV",type:"geo",props:{w:317.4921875,h:68.80859375,geo:"rectangle",color:"black",labelColor:"black",fill:"solid",dash:"solid",size:"m",font:"draw",text:"Pitching V1 draft",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph">Pitching V1 draft</p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"a8",typeName:"shape"},{x:801.10546875,y:526.192578125,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:gaTWbH01oHY5U8i7-0YWM",type:"geo",props:{w:216.140625,h:68.80859375,geo:"rectangle",color:"black",labelColor:"black",fill:"solid",dash:"solid",size:"m",font:"draw",text:"Team sync",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph">Team sync</p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"a9",typeName:"shape"},{x:1017.24609375,y:614.05625,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:LTp09wJ7CZ4hmqxK3TqOs",type:"geo",props:{w:216.140625,h:68.80859375,geo:"rectangle",color:"black",labelColor:"black",fill:"solid",dash:"solid",size:"m",font:"draw",text:"Product launch",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph">Product launch</p>',shapeColor:"#26A688",strokeWidth:"none"},parentId:"page:page",index:"aA",typeName:"shape"},{x:1224.703125,y:701.919921875,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:YRlBT-re2qFu7J2lowdkX",type:"geo",props:{w:216.140625,h:68.80859375,geo:"rectangle",color:"black",labelColor:"black",fill:"solid",dash:"solid",size:"m",font:"draw",text:"PR push",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph">PR push</p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"aB",typeName:"shape"}],assets:[],meta:{},width:null,svg:'<svg direction="ltr" width="1304.0390625" height="693.9375" viewBox="179.0625 111.1171875 1304.0390625 693.9375" stroke-linecap="round" stroke-linejoin="round" style="background-color: transparent;"><defs></defs><g transform="matrix(1, 0, 0, 1, 187.0625, 119.1172)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L415.6875,0 Q419.6875,0 419.6875,4 L419.6875,673.9375 Q419.6875,677.9375 415.6875,677.9375 L4,677.9375 Q0,677.9375 0,673.9375 L0,4 Q0,0 4,0 " id="shape:hF6E8P7CiXiSsRo7LG0FF" style="fill-opacity: 1; stroke-width: 0;"></path><foreignObject width="419.6875" height="677.9375"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph"></p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 621.2383, 119.1172)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L415.6875,0 Q419.6875,0 419.6875,4 L419.6875,673.9375 Q419.6875,677.9375 415.6875,677.9375 L4,677.9375 Q0,677.9375 0,673.9375 L0,4 Q0,0 4,0 " id="shape:taayoSjVZnQxAEAkYzW8F" style="fill-opacity: 1; stroke-width: 0;"></path><foreignObject width="419.6875" height="677.9375"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph"></p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1055.4141, 119.1172)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L415.6875,0 Q419.6875,0 419.6875,4 L419.6875,673.9375 Q419.6875,677.9375 415.6875,677.9375 L4,677.9375 Q0,677.9375 0,673.9375 L0,4 Q0,0 4,0 " id="shape:DogbW2-V83SiEhlezSTF1" style="fill-opacity: 1; stroke-width: 0;"></path><foreignObject width="419.6875" height="677.9375"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph"></p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1479.7656, 227.5273)" opacity="1"><g data-shape-type="line"><path stroke-width="3.5px" stroke="#1d1d1d" fill="none" d="M-4.66, 0L-1292.7, 0" style="--stroke-width: 2;"></path></g></g><g transform="matrix(1, 0, 0, 1, 201.3471, 145.8679)" opacity="1"><g><foreignObject width="390.55916409229667" height="54"><div class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><h3 class="themed-heading">January</h3></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 631.6081, 145.8679)" opacity="1"><g><foreignObject width="400.24346043744436" height="54"><div class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><h3 class="themed-heading">February</h3></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1064.4141, 145.8679)" opacity="1"><g><foreignObject width="399" height="54"><div class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><h3 class="themed-heading">March</h3></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 213.4453, 262.6016)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L373.5742,0 Q377.5742,0 377.5742,4 L377.5742,64.8086 Q377.5742,68.8086 373.5742,68.8086 L4,68.8086 Q0,68.8086 0,64.8086 L0,4 Q0,0 4,0 " id="shape:hqEIx0gJpckN8eL0a3_eG" style="fill-opacity: 1; stroke-width: 2;"></path><foreignObject width="377.57421875" height="68.80859375"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph">Campaign brief</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 424.8516, 350.4652)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L238.9805,0 Q242.9805,0 242.9805,4 L242.9805,64.8086 Q242.9805,68.8086 238.9805,68.8086 L4,68.8086 Q0,68.8086 0,64.8086 L0,4 Q0,0 4,0 " id="shape:L4SJqvXoG-EotQtRMTPY8" style="fill-opacity: 1; stroke-width: 2;"></path><foreignObject width="242.98046875" height="68.80859375"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph">Brainstorming idea</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 642.3594, 438.3289)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L313.4922,0 Q317.4922,0 317.4922,4 L317.4922,64.8086 Q317.4922,68.8086 313.4922,68.8086 L4,68.8086 Q0,68.8086 0,64.8086 L0,4 Q0,0 4,0 " id="shape:5PsZHZLZu4_CVVyhnfMhV" style="fill-opacity: 1; stroke-width: 2;"></path><foreignObject width="317.4921875" height="68.80859375"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph">Pitching V1 draft</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 801.1055, 526.1926)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L212.1406,0 Q216.1406,0 216.1406,4 L216.1406,64.8086 Q216.1406,68.8086 212.1406,68.8086 L4,68.8086 Q0,68.8086 0,64.8086 L0,4 Q0,0 4,0 " id="shape:gaTWbH01oHY5U8i7-0YWM" style="fill-opacity: 1; stroke-width: 2;"></path><foreignObject width="216.140625" height="68.80859375"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph">Team sync</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1017.2461, 614.0562)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L212.1406,0 Q216.1406,0 216.1406,4 L216.1406,64.8086 Q216.1406,68.8086 212.1406,68.8086 L4,68.8086 Q0,68.8086 0,64.8086 L0,4 Q0,0 4,0 " id="shape:LTp09wJ7CZ4hmqxK3TqOs" style="fill-opacity: 1; --shape-bg-color-override: #26A688; --shape-border-color-override: #3fbfa1ff; stroke-width: 0;"></path><foreignObject width="216.140625" height="68.80859375" class="themed-heading-no-gradient" style="--body-color: #fff; --heading-color: #fff; --link-color: #fff; --link-color-inverted: #000; --link-color-hover: #e6e6e6ff;"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph">Product launch</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1224.7031, 701.9199)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L212.1406,0 Q216.1406,0 216.1406,4 L216.1406,64.8086 Q216.1406,68.8086 212.1406,68.8086 L4,68.8086 Q0,68.8086 0,64.8086 L0,4 Q0,0 4,0 " id="shape:YRlBT-re2qFu7J2lowdkX" style="fill-opacity: 1; stroke-width: 2;"></path><foreignObject width="216.140625" height="68.80859375"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph">PR push</p></div></div></foreignObject></g></g></svg>'}},concentricCircles:{type:"diagram",attrs:{horizontalAlign:"center",shapes:[{x:565.8710406141417,y:267.2348052328804,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:TAw6_9rfNRYvwwWYH_HCE",type:"geo",props:{w:477.70836857906545,h:477.70836857906545,geo:"ellipse",color:"black",labelColor:"black",fill:"none",dash:"solid",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph"></p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"a1",typeName:"shape"},{x:616.0939715727751,y:367.685804457496,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:EgzihrX9ISnR1IDnH3Nb-",type:"geo",props:{w:377.2573693544499,h:377.2573693544499,geo:"ellipse",color:"black",labelColor:"black",fill:"none",dash:"solid",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph"></p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"a2",typeName:"shape"},{x:668.9469658115557,y:473.48237590821486,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:PjG3dFUaDsYRxpsyfV9pW",type:"geo",props:{w:271.5513808768887,h:271.5513808768887,geo:"ellipse",color:"black",labelColor:"black",fill:"none",dash:"solid",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph"></p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"a3",typeName:"shape"},{x:710.2141277616566,y:556.2474435629489,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:q-kyMkxhO2b6WeTH0ets_",type:"geo",props:{w:189.21399728645815,h:189.21399728645815,geo:"ellipse",color:"black",labelColor:"black",fill:"solid",dash:"solid",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph"></p>',shapeColor:"#26A688",strokeWidth:"sm"},parentId:"page:page",index:"a4",typeName:"shape"},{x:464.90514248458214,y:65.35157205630884,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:j5viwZdfHENtGXtzpl0By",type:"geo",props:{w:679.628218169672,h:679.628218169672,geo:"ellipse",color:"black",labelColor:"black",fill:"none",dash:"solid",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph"></p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"a0",typeName:"shape"},{x:510.91801733541865,y:157.35060141748204,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:ktAwuZYMrly1jH7bcYmPU",type:"geo",props:{w:587.634481733614,h:587.634481733614,geo:"ellipse",color:"black",labelColor:"black",fill:"none",dash:"solid",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph"></p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"a0V",typeName:"shape"},{x:725.4037617637376,y:93.6328125,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:arpSUqzdolhE3v92x2Hlg",type:"text",props:{color:"black",size:"m",w:159,text:"",font:"draw",align:"middle",autoSize:!1,scale:1,h:20,growY:28,html:'<p style="text-align: center" data-font-size="default" class="paragraph">Strangers</p>',shapeColor:null},parentId:"page:page",index:"a6",typeName:"shape"},{x:698.7226562500001,y:191.5703125,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:p4dDCuUjLEG9hLXieB7uX",type:"text",props:{color:"black",size:"m",w:211.83203125000003,text:"",font:"draw",align:"middle",autoSize:!1,scale:1,h:20,growY:28,html:'<p style="text-align: center" data-font-size="default" class="paragraph">Community</p>',shapeColor:null},parentId:"page:page",index:"a7",typeName:"shape"},{x:698.7226562500001,y:300.83203125,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:IQ2anr8KXqvDn1DTJJIM1",type:"text",props:{color:"black",size:"m",w:212,text:"",font:"draw",align:"middle",autoSize:!1,scale:1,h:20,growY:28,html:'<p style="text-align: center" data-font-size="default" class="paragraph">Acquaintances</p>',shapeColor:null},parentId:"page:page",index:"a8",typeName:"shape"},{x:698.7226562500001,y:410.09375,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:O77tcKAFokcE_JogX_h3n",type:"text",props:{color:"black",size:"m",w:212,text:"",font:"draw",align:"middle",autoSize:!1,scale:1,h:20,growY:28,html:'<p style="text-align: center" data-font-size="default" class="paragraph">Friends</p>',shapeColor:null},parentId:"page:page",index:"a9",typeName:"shape"},{x:698.7226562500001,y:497.0234375,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:Ku24cDrP5-0A12pFZdch1",type:"text",props:{color:"black",size:"m",w:212,text:"",font:"draw",align:"middle",autoSize:!1,scale:1,h:20,growY:28,html:'<p style="text-align: center" data-font-size="default" class="paragraph">Family</p>',shapeColor:null},parentId:"page:page",index:"aA",typeName:"shape"},{x:698.7226562500001,y:628.6171875,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:Bd8YnNb0vDeKdtlRMcNh_",type:"text",props:{color:"black",size:"m",w:212,text:"",font:"draw",align:"middle",autoSize:!1,scale:1,h:20,growY:27,html:'<h4 class="themed-heading" style="text-align: center">Me</h4>',shapeColor:"#FFFFFF"},parentId:"page:page",index:"aB",typeName:"shape"}],assets:[{meta:{},id:"asset:1250396056",type:"image",typeName:"asset",props:{name:"tldrawFile",src:"https://cdn-staging.gamma.app/QWjS6fBfpt/1503bafa04414cc2a7b9848c75a23885/original/tldrawFile.png",w:800,h:801,mimeType:"image/png",isAnimated:!1}}],meta:{},width:360,svg:'<svg direction="ltr" width="695.4817604046791" height="695.5549853416027" viewBox="457.05160024957496 57.38818847034315 695.4817604046791 695.5549853416027" stroke-linecap="round" stroke-linejoin="round" style="background-color: transparent;"><defs></defs><g transform="matrix(1, 0, 0, 1, 464.9051, 65.3516)" opacity="1"><g data-shape-type="geo"><path d="M0,339.814109084836a339.814109084836,339.814109084836,0,1,1,679.628218169672,0a339.814109084836,339.814109084836,0,1,1,-679.628218169672,0" width="679.628218169672" height="679.628218169672" id="shape:j5viwZdfHENtGXtzpl0By" style="fill-opacity: 0; stroke-width: 2;"></path><foreignObject width="679.4817604046791" height="679.5549853416026"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph"></p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 510.918, 157.3506)" opacity="1"><g data-shape-type="geo"><path d="M0,293.817240866807a293.817240866807,293.817240866807,0,1,1,587.634481733614,0a293.817240866807,293.817240866807,0,1,1,-587.634481733614,0" width="587.634481733614" height="587.634481733614" id="shape:ktAwuZYMrly1jH7bcYmPU" style="fill-opacity: 0; stroke-width: 2;"></path><foreignObject width="587.4668563326944" height="587.5506630553135"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph"></p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 565.871, 267.2348)" opacity="1"><g data-shape-type="geo"><path d="M0,238.85418428953272a238.85418428953272,238.85418428953272,0,1,1,477.70836857906545,0a238.85418428953272,238.85418428953272,0,1,1,-477.70836857906545,0" width="477.70836857906545" height="477.70836857906545" id="shape:TAw6_9rfNRYvwwWYH_HCE" style="fill-opacity: 0; stroke-width: 2;"></path><foreignObject width="477.7083685790655" height="477.70836857906556"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph"></p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 616.094, 367.6858)" opacity="1"><g data-shape-type="geo"><path d="M0,188.62868467722495a188.62868467722495,188.62868467722495,0,1,1,377.2573693544499,0a188.62868467722495,188.62868467722495,0,1,1,-377.2573693544499,0" width="377.2573693544499" height="377.2573693544499" id="shape:EgzihrX9ISnR1IDnH3Nb-" style="fill-opacity: 0; stroke-width: 2;"></path><foreignObject width="377.2573693544497" height="377.25736935444945"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph"></p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 668.947, 473.4824)" opacity="1"><g data-shape-type="geo"><path d="M0,135.77569043844434a135.77569043844434,135.77569043844434,0,1,1,271.5513808768887,0a135.77569043844434,135.77569043844434,0,1,1,-271.5513808768887,0" width="271.5513808768887" height="271.5513808768887" id="shape:PjG3dFUaDsYRxpsyfV9pW" style="fill-opacity: 0; stroke-width: 2;"></path><foreignObject width="271.1891698494137" height="271.3702149305733"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph"></p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 710.2141, 556.2474)" opacity="1"><g data-shape-type="geo"><path d="M0,94.60699864322908a94.60699864322908,94.60699864322908,0,1,1,189.21399728645815,0a94.60699864322908,94.60699864322908,0,1,1,-189.21399728645815,0" width="189.21399728645815" height="189.21399728645815" id="shape:q-kyMkxhO2b6WeTH0ets_" style="fill-opacity: 1; --shape-bg-color-override: #26A688; --shape-border-color-override: #3fbfa1ff; stroke-width: 2;"></path><foreignObject width="189.2139972864582" height="188.17746321153578" class="themed-heading-no-gradient" style="--body-color: #fff; --heading-color: #fff; --link-color: #fff; --link-color-inverted: #000; --link-color-hover: #e6e6e6ff;"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph"></p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 725.4038, 93.6328)" opacity="1"><g><foreignObject width="160" height="48"><div class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><p style="text-align: center" data-font-size="default" class="paragraph">Strangers</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 698.7227, 191.5703)" opacity="1"><g><foreignObject width="212.83203125000003" height="48"><div class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><p style="text-align: center" data-font-size="default" class="paragraph">Community</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 698.7227, 300.832)" opacity="1"><g><foreignObject width="213" height="48"><div class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><p style="text-align: center" data-font-size="default" class="paragraph">Acquaintances</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 698.7227, 410.0938)" opacity="1"><g><foreignObject width="213" height="48"><div class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><p style="text-align: center" data-font-size="default" class="paragraph">Friends</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 698.7227, 497.0234)" opacity="1"><g><foreignObject width="213" height="48"><div class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><p style="text-align: center" data-font-size="default" class="paragraph">Family</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 698.7227, 628.6172)" opacity="1"><g><foreignObject width="213" height="47" class="themed-heading-no-gradient" style="--body-color: #FFFFFF; --heading-color: #FFFFFF; --link-color: #FFFFFF; --link-color-inverted: #000; --link-color-hover: #e6e6e6ff;"><div class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><h4 class="themed-heading" style="text-align: center">Me</h4></div></div></foreignObject></g></g></svg>'}},targetCircles:{type:"diagram",attrs:{horizontalAlign:"center",shapes:[{x:929.6197161942252,y:155.0916582850458,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:Lyhoe8Jk5MAMoudOizb8X",type:"geo",props:{w:500.14804571219815,h:500.14804571219815,geo:"ellipse",color:"black",labelColor:"black",fill:"solid",dash:"solid",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph"></p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"a0G",typeName:"shape"},{x:967.92743672945,y:193.45976889185556,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:RYOvVH5HKvjk5GXZojXEJ",type:"geo",props:{w:423.4118244985782,h:423.4118244985782,geo:"ellipse",color:"black",labelColor:"black",fill:"solid",dash:"solid",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph"></p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"a0l",typeName:"shape"},{x:1007.5906901264586,y:233.06263221727892,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:guJhyRC2_2GgZ9f0HcNJR",type:"geo",props:{w:344.20609784773154,h:344.20609784773154,geo:"ellipse",color:"black",labelColor:"black",fill:"solid",dash:"solid",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph"></p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"a1V",typeName:"shape"},{x:1043.7799729004403,y:269.2519149912604,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:seEkM5XtC9yIw7hoXfdbS",type:"geo",props:{w:271.8275322997684,h:271.8275322997684,geo:"ellipse",color:"black",labelColor:"black",fill:"solid",dash:"solid",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph"></p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"a2V",typeName:"shape"},{x:1081.7319672065987,y:307.3344023477454,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:NS2ahjw0mGlpg-PMYOxM8",type:"geo",props:{w:195.6625575867985,h:195.6625575867985,geo:"ellipse",color:"black",labelColor:"black",fill:"solid",dash:"solid",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph"></p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"a3V",typeName:"shape"},{x:1115.50785950286,y:340.94563257104426,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:3f1yjdcch_VMlWXK600PT",type:"geo",props:{w:128.4400971402006,h:128.4400971402006,geo:"ellipse",color:"black",labelColor:"black",fill:"solid",dash:"solid",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph"></p>',shapeColor:"#26A688",strokeWidth:"sm"},parentId:"page:page",index:"a4V",typeName:"shape"},{x:1073.6937390503244,y:381.6656811411451,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:1FLv65NIvaurbbxTQrE18",type:"text",props:{color:"black",size:"m",w:212,text:"Me",font:"draw",align:"middle",autoSize:!1,scale:1,h:20,growY:27,html:'<h4 class="themed-heading" style="text-align: center">Me</h4>',shapeColor:"#FFFFFF"},parentId:"page:page",index:"aB",typeName:"shape"},{x:1381.0026472829704,y:173.17393949526377,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:Q6dHtLEQiLE4grg0RCM-A",type:"line",parentId:"page:page",index:"aC",props:{dash:"solid",size:"m",color:"black",spline:"line",points:{a1:{id:"a1",index:"a1",x:2.417216937863941,y:7.723304968297555},a2:{id:"a2",index:"a2",x:-52.226471674030236,y:48.30663418059406}},shapeColor:null,strokeWidth:"sm"},typeName:"shape"},{x:1396.40422015788,y:245.48057367585784,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:V6TsnoH4I7lC4eFh_jCVf",type:"line",parentId:"page:page",index:"aCV",props:{dash:"solid",size:"m",color:"black",spline:"line",points:{a1:{id:"a1",index:"a1",x:48.001155258881184,y:41.665293041944466},a2:{id:"a2",index:"a2",x:-47.682312332765534,y:66.29026038484135}},shapeColor:null,strokeWidth:"sm"},typeName:"shape"},{x:1418.8041070476638,y:554.4103614129623,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:Z7iFyapJSWnC-Nj48trDz",type:"line",parentId:"page:page",index:"aCd",props:{dash:"solid",size:"m",color:"black",spline:"line",points:{a1:{id:"a1",index:"a1",x:28.116150018295414,y:-27.85190422662322},a2:{id:"a2",index:"a2",x:-138.26659908197,y:-91.24836881350053}},shapeColor:null,strokeWidth:"sm"},typeName:"shape"},{x:1396.40422015788,y:405.1656811411451,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:UyPPQxh5Izzrta_PeC4Lv",type:"line",parentId:"page:page",index:"aCl",props:{dash:"solid",size:"m",color:"black",spline:"line",points:{a1:{id:"a1",index:"a1",x:94.52397902306642,y:3674838211509268e-29},a2:{id:"a2",index:"a2",x:-62.28449928723883,y:3674838211509268e-29}},shapeColor:null,strokeWidth:"sm"},typeName:"shape"},{x:1396.40422015788,y:680.9410126688012,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:YvmG2cbsMv-yBAjUCLAZV",type:"line",parentId:"page:page",index:"aD",props:{dash:"solid",size:"m",color:"black",spline:"line",points:{a1:{id:"a1",index:"a1",x:-30.33301659894073,y:-34.31453399190673},a2:{id:"a2",index:"a2",x:-187.1016230443878,y:-198.11935311752904}},shapeColor:null,strokeWidth:"sm"},typeName:"shape"},{x:1456.428646134135,y:520.7240691140834,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:EdTs6rzP02YRCn-NSSouG",type:"text",props:{color:"black",size:"m",w:190.61066381032765,text:"Friends",font:"draw",align:"start",autoSize:!1,scale:1,h:44,growY:0,html:'<p class="paragraph">Friends</p>',shapeColor:null},parentId:"page:page",index:"aE",typeName:"shape"},{x:1373.8179823238074,y:633.1902718076452,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:9DzQSxc3Xru2fKGSdFx16",type:"text",props:{color:"black",size:"m",w:191,text:"Family",font:"draw",align:"start",autoSize:!1,scale:1,h:44,growY:0,html:'<p class="paragraph">Family</p>',shapeColor:null},parentId:"page:page",index:"aF",typeName:"shape"},{x:1496.9281991809464,y:383.1656811411449,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:VKIjJjszvAlrkJQJfGUV1",type:"text",props:{color:"black",size:"m",w:204.36525326738322,text:"Acquaintances",font:"draw",align:"start",autoSize:!1,scale:1,h:44,growY:0,html:'<p class="paragraph">Acquaintances</p>',shapeColor:null},parentId:"page:page",index:"aG",typeName:"shape"},{x:1451.2460195004435,y:263.4599680925235,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:V6a9zGihrEPKbWp0WyYFu",type:"text",props:{color:"black",size:"m",w:204.36525326738322,text:"Community",font:"draw",align:"start",autoSize:!1,scale:1,h:44,growY:0,html:'<p class="paragraph">Community</p>',shapeColor:null},parentId:"page:page",index:"aH",typeName:"shape"},{x:1389.4198642208344,y:155.14109047464459,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:tneIatSl5yj2J6kQLD4Hy",type:"text",props:{color:"black",size:"m",w:204.36525326738322,text:"Strangers",font:"draw",align:"start",autoSize:!1,scale:1,h:44,growY:0,html:'<p class="paragraph">Strangers</p>',shapeColor:null},parentId:"page:page",index:"aI",typeName:"shape"}],assets:[{meta:{},id:"asset:1250396056",type:"image",typeName:"asset",props:{name:"tldrawFile",src:"https://cdn-staging.gamma.app/QWjS6fBfpt/1503bafa04414cc2a7b9848c75a23885/original/tldrawFile.png",w:800,h:801,mimeType:"image/png",isAnimated:!1}}],meta:{},width:534.2222222222222,svg:'<svg direction="ltr" width="788.1107737708712" height="538.0491813330007" viewBox="921.8174254100752 147.14109047464459 788.1107737708712 538.0491813330007" stroke-linecap="round" stroke-linejoin="round" style="background-color: transparent;"><defs></defs><g transform="matrix(1, 0, 0, 1, 929.6197, 155.0917)" opacity="1"><g data-shape-type="geo"><path d="M0,250.07402285609908a250.07402285609908,250.07402285609908,0,1,1,500.14804571219815,0a250.07402285609908,250.07402285609908,0,1,1,-500.14804571219815,0" width="500.14804571219815" height="500.14804571219815" id="shape:Lyhoe8Jk5MAMoudOizb8X" style="fill-opacity: 1; stroke-width: 2;"></path><foreignObject width="499.9503364963482" height="500.04918133300066"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph"></p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 967.9274, 193.4598)" opacity="1"><g data-shape-type="geo"><path d="M0,211.7059122492891a211.7059122492891,211.7059122492891,0,1,1,423.4118244985782,0a211.7059122492891,211.7059122492891,0,1,1,-423.4118244985782,0" width="423.4118244985782" height="423.4118244985782" id="shape:RYOvVH5HKvjk5GXZojXEJ" style="fill-opacity: 1; stroke-width: 2;"></path><foreignObject width="423.17913672789973" height="423.29546462452595"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph"></p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1007.5907, 233.0626)" opacity="1"><g data-shape-type="geo"><path d="M0,172.10304892386577a172.10304892386577,172.10304892386577,0,1,1,344.20609784773154,0a172.10304892386577,172.10304892386577,0,1,1,-344.20609784773154,0" width="344.20609784773154" height="344.20609784773154" id="shape:guJhyRC2_2GgZ9f0HcNJR" style="fill-opacity: 1; stroke-width: 2;"></path><foreignObject width="343.9254156609416" height="344.0657281324484"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph"></p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1043.78, 269.2519)" opacity="1"><g data-shape-type="geo"><path d="M0,135.9137661498842a135.9137661498842,135.9137661498842,0,1,1,271.8275322997684,0a135.9137661498842,135.9137661498842,0,1,1,-271.8275322997684,0" width="271.8275322997684" height="271.8275322997684" id="shape:seEkM5XtC9yIw7hoXfdbS" style="fill-opacity: 1; stroke-width: 2;"></path><foreignObject width="271.4649529254623" height="271.6461821185811"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph"></p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1081.732, 307.3344)" opacity="1"><g data-shape-type="geo"><path d="M0,97.83127879339925a97.83127879339925,97.83127879339925,0,1,1,195.6625575867985,0a97.83127879339925,97.83127879339925,0,1,1,-195.6625575867985,0" width="195.6625575867985" height="195.6625575867985" id="shape:NS2ahjw0mGlpg-PMYOxM8" style="fill-opacity: 1; stroke-width: 2;"></path><foreignObject width="195.1606169331522" height="195.41142609724233"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph"></p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1115.5079, 340.9456)" opacity="1"><g data-shape-type="geo"><path d="M0,64.2200485701003a64.2200485701003,64.2200485701003,0,1,1,128.4400971402006,0a64.2200485701003,64.2200485701003,0,1,1,-128.4400971402006,0" width="128.4400971402006" height="128.4400971402006" id="shape:3f1yjdcch_VMlWXK600PT" style="fill-opacity: 1; --shape-bg-color-override: #26A688; --shape-border-color-override: #3fbfa1ff; stroke-width: 2;"></path><foreignObject width="127.72281225789044" height="128.08095257852762" class="themed-heading-no-gradient" style="--body-color: #fff; --heading-color: #fff; --link-color: #fff; --link-color-inverted: #000; --link-color-hover: #e6e6e6ff;"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph"></p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1073.6937, 381.6657)" opacity="1"><g><foreignObject width="213" height="47" class="themed-heading-no-gradient" style="--body-color: #FFFFFF; --heading-color: #FFFFFF; --link-color: #FFFFFF; --link-color-inverted: #000; --link-color-hover: #e6e6e6ff;"><div class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><h4 class="themed-heading" style="text-align: center">Me</h4></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1381.0026, 173.1739)" opacity="1"><g data-shape-type="line"><path stroke-width="3.5px" stroke="#1d1d1d" fill="none" d="M2.42, 7.72L-52.23, 48.31" style="--stroke-width: 2;"></path></g></g><g transform="matrix(1, 0, 0, 1, 1396.4042, 245.4806)" opacity="1"><g data-shape-type="line"><path stroke-width="3.5px" stroke="#1d1d1d" fill="none" d="M48, 41.67L-47.68, 66.29" style="--stroke-width: 2;"></path></g></g><g transform="matrix(1, 0, 0, 1, 1418.8041, 554.4104)" opacity="1"><g data-shape-type="line"><path stroke-width="3.5px" stroke="#1d1d1d" fill="none" d="M28.12, -27.85L-138.27, -91.25" style="--stroke-width: 2;"></path></g></g><g transform="matrix(1, 0, 0, 1, 1396.4042, 405.1657)" opacity="1"><g data-shape-type="line"><path stroke-width="3.5px" stroke="#1d1d1d" fill="none" d="M94.52, 0L-62.28, 0" style="--stroke-width: 2;"></path></g></g><g transform="matrix(1, 0, 0, 1, 1396.4042, 680.941)" opacity="1"><g data-shape-type="line"><path stroke-width="3.5px" stroke="#1d1d1d" fill="none" d="M-30.33, -34.31L-187.1, -198.12" style="--stroke-width: 2;"></path></g></g><g transform="matrix(1, 0, 0, 1, 1456.4286, 520.7241)" opacity="1"><g><foreignObject width="191" height="44"><div class="textbox" style="--text-align: left; --horizontal-align: start;"><div class="text"><p class="paragraph">Friends</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1373.818, 633.1903)" opacity="1"><g><foreignObject width="192" height="44"><div class="textbox" style="--text-align: left; --horizontal-align: start;"><div class="text"><p class="paragraph">Family</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1496.9282, 383.1657)" opacity="1"><g><foreignObject width="206" height="44"><div class="textbox" style="--text-align: left; --horizontal-align: start;"><div class="text"><p class="paragraph">Acquaintances</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1451.246, 263.46)" opacity="1"><g><foreignObject width="205" height="44"><div class="textbox" style="--text-align: left; --horizontal-align: start;"><div class="text"><p class="paragraph">Community</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1389.4199, 155.1411)" opacity="1"><g><foreignObject width="205" height="44"><div class="textbox" style="--text-align: left; --horizontal-align: start;"><div class="text"><p class="paragraph">Strangers</p></div></div></foreignObject></g></g></svg>'}}},c={src:"/_next/static/media/Concentric.168bc5a1.svg",height:96,width:253,blurWidth:0,blurHeight:0},u={src:"/_next/static/media/Flywheel.f1a56a4c.svg",height:96,width:254,blurWidth:0,blurHeight:0},p={src:"/_next/static/media/Gantt.63fb5eea.svg",height:96,width:253,blurWidth:0,blurHeight:0},h={src:"/_next/static/media/Kanban.fa47adcf.svg",height:96,width:253,blurWidth:0,blurHeight:0},m={src:"/_next/static/media/Quadrants.7febd3e0.svg",height:96,width:254,blurWidth:0,blurHeight:0},g={src:"/_next/static/media/Target.372cac2f.svg",height:96,width:253,blurWidth:0,blurHeight:0},x={src:"/_next/static/media/Venn.ba1c64a6.svg",height:96,width:254,blurWidth:0,blurHeight:0},f=()=>[{key:"diagram",name:()=>a.Ru._({id:"G1q1hG"}),keywords:["sketch","drawing","shapes","diagram","canvas","freeform"],shortcut:"/diagram"},{key:"flywheel",name:()=>a.Ru._({id:"6BBMcV"}),keywords:["cycle","circle","diagram","flywheel"],previewImage:u,icon:i.yNr},{key:"quadrant",name:()=>a.Ru._({id:"tmk28W"}),keywords:["matrix","quadrant","diagram","2x2"],previewImage:m,icon:i.YOd},{key:"venn",name:()=>a.Ru._({id:"z5TX2d"}),previewImage:x,icon:i.cvw,keywords:["venn","diagram"]},{key:"targetCircles",name:()=>a.Ru._({id:"s07vVU"}),keywords:["target","circles","nested","concentric","diagram","bullseye"],icon:i.pvD,previewImage:g},{key:"concentricCircles",name:()=>a.Ru._({id:"SqseBa"}),keywords:["concentric","circles","diagram"],icon:i.ppD,previewImage:c},{key:"calendarWeek",name:()=>a.Ru._({id:"ToE1YL"}),keywords:["week","days","calendar","diagram","kanban","schedule","timeline"],icon:i.aXh,previewImage:h},{key:"calendarMonths",name:()=>a.Ru._({id:"jIipv0"}),keywords:["month","days","calendar","diagram","kanban","schedule","gantt chart","timeline"],icon:i.nKW,previewImage:p}].map(e=>{let t="diagram"===e.key?{type:"diagram",attrs:{}}:d[e.key];return{nodeName:"diagram",icon:i.qTS,...e,execute:e=>{let n=(0,s.rZ)(),i=o()(t);i.attrs.id=n,(0,s.CD)(n,!0),e.commands.insertContent(i)},dragStartFn:e=>{let n=(0,s.rZ)(),i=o()(t);i.attrs.id=n,(0,s.CD)(n,!0),(0,l.fS)(e,i)}}}).filter(e=>!!e)},20379:(e,t,n)=>{"use strict";n.d(t,{e:()=>a});let i={cardLayoutsEnabled:!1},a=e=>{if(!e)return{...i};let t=null;return("doc"===e.type.name?t=e.nodeAt(0):"document"===e.type.name&&(t=e),t)?{...i,...t.attrs.docFlags}:(console.debug("[getDocFlags] could not find document node, returning defaults"),{...i})}},22071:(e,t,n)=>{"use strict";n.d(t,{OA:()=>b,Tq:()=>k,cT:()=>f,e5:()=>x,qh:()=>v});var i=n(31085),a=n(25420),r=n(18651),o=n(43421),l=n(17228),s=n.n(l),d=n(64225),c=n(2696),u=n(22544),p=n(17539),h=n(5933),m=n(14e3),g=n(14968);let x=()=>{let e=(0,d.GV)(h.wC)===m.w.SLIDE_VIEW,{src:t,width:n,height:o,paddingY:l,paddingX:s}=k();if(!t)return null;let c=(0,p.Ub)(t,p.oc),u=e?{position:"absolute",right:"".concat(s,"px"),top:"".concat(l,"px"),justify:"end",align:"start",width:"".concat(n,"px"),height:"".concat(o,"px")}:{position:"sticky",left:"".concat(s,"px"),top:"calc(100% - ".concat(o,"px - ").concat(l,"px)"),justify:"start",width:"".concat(n,"px"),height:"".concat(o,"px")};return(0,i.jsx)(a.s,{...u,className:"logo",zIndex:g.$.customerLogo,borderRadius:"md",contentEditable:!1,userSelect:"none",children:(0,i.jsx)(r._,{src:c,maxH:"100%",maxW:"100%",transitionProperty:"width, height",transitionDuration:"normal",pointerEvents:"none","data-testid":"customer-logo","data-customer-logo-image":!0,objectFit:"contain",objectPosition:e?"top right":"bottom left"})})},f=()=>{let{src:e,width:t,height:n}=v((0,d.GV)(h.SJ),j);if(!e)return null;let o=(0,p.Ub)(e,p.oc);return(0,i.jsx)(a.s,{w:"100%",justify:"center",align:"center",mt:6,mb:8,"data-id":"customer-logo-wrapper",children:(0,i.jsx)(r._,{src:o,w:"".concat(t,"px"),zIndex:g.$.customerLogo,h:"".concat(n,"px"),transitionProperty:"width, height",transitionDuration:"normal",pointerEvents:"none",objectFit:"contain",objectPosition:"bottom"})})},v=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w,n=1,i=e.logoUrl,{logoImage:a}=e.config;if(a&&a.meta){var r;n=s()(a.meta.aspect_ratio||a.meta.width/a.meta.height,.5,3),i=null!==(r=a.src)&&void 0!==r?r:i}if(!i)return{width:0,height:0,paddingY:0,paddingX:0};let o=Math.sqrt(t/n),l=t>8e3?30:t>5e3?24:18;return{width:Math.round(o*n),height:Math.round(o),paddingY:l,paddingX:l,src:i}},b={base:900,lg:2500,xl:4900,"2xl":8100,"3xl":1e4},y={base:1600,md:2500,lg:4225,xl:7225,"2xl":9025,"4xl":12100},w=4900,j=5625,k=()=>{let e=(0,d.GV)(h.wC)===m.w.SLIDE_VIEW,t=(0,o.A)(e?y:b),n=u.rS?w:u.hQ?8100:t,i=(0,d.GV)(h.SJ),a=(0,c.FX)();return{...v(i,n),position:e?"top-right":a?"bottom":"bottom-left"}}},69771:(e,t,n)=>{"use strict";n.d(t,{T:()=>c,U:()=>d});var i=n(13236),a=n(81570),r=n(46343),o=n.n(r),l=n(5933);class s{compute(e){let t=e.firstChild;if(!t)return this;let n=t.attrs;return o()(n,this.value)||(this.hasChanges=!0),this.value=n,this}apply(e,t){return e.docChanged&&this.compute(e.doc),this}processChanges(e){this.hasChanges&&this.value&&e((0,l.H3)({docAttrs:this.value})),this.hasChanges=!1}constructor(){this.hasChanges=!1,this.value=null}}let d=new a.hs("documentAttrs"),c=i.YY.create({name:"documentAttrs",addProseMirrorPlugins:()=>[new a.k_({key:d,state:{init:()=>new s,apply:(e,t,n,i)=>t.apply(e,i)}})]})},87825:(e,t,n)=>{"use strict";n.d(t,{C9:()=>i,PX:()=>a,bc:()=>r});let i="10vh",a="20vh",r="80vh"},14968:(e,t,n)=>{"use strict";n.d(t,{$:()=>i});let i={presentBg:1,customerLogo:4,cardButtons:11,siteNav:21,filmstrip:21,toolbar:22,nestedCardBody:2,nestedCardBodyWithComment:3,cardDivider:1,resizeableWrapper:11,commentsStack:21,commentsStackOpen:1501,commentsPopup:1100,insertWidget:1100,panel:"calc(var(--chakra-zIndices-modal) + 1)",bottomRightControls:"calc(var(--chakra-zIndices-modal) + 2)",onboardingChecklist:"calc(var(--chakra-zIndices-modal) + 2)"}},91725:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var i=n(31085),a=n(14041),r=n(64130),o=n(64225),l=n(5933),s=n(18924),d=n(4468),c=n(87643),u=n(12408),p=n(35789),h=n(9104),m=n(86186);let g=e=>{let{icon:t="",isVisible:n,isSelected:a,label:r,onClick:o,onDragStart:l,...s}=e,{color:d,bg:c,hoverColor:u,hoverBg:g,borderColor:x}=(0,m.Nb)(a);return(0,i.jsx)(h.Tz,{placement:"top",label:a?void 0:r,children:(0,i.jsx)(p.o,{position:"absolute",width:"16px",height:"22px",fontWeight:"900",fontFamily:"body",background:c,backdropFilter:"blur(8px)",border:"1px solid",borderColor:x,color:d,borderRadius:"sm",boxShadow:"sm",fontSize:"16px",cursor:"pointer",opacity:a||n?1:0,_hover:{color:u,background:g,opacity:1},...s,className:"drag-handle",onClick:o,onDragStart:l,draggable:!0,contentEditable:!1,_after:{position:"absolute",content:'""',inset:-2},children:t})})},x=e=>({top:{top:"0",insetInlineStart:"50%",height:"16px",width:"26px",pt:"1px",icon:"",zIndex:"3",transform:"translateY(-50%) translateX(".concat(e?"50%":"-50%",")"),fontSize:"15px"},left:{top:"50%",insetInlineStart:"0",height:"26px",width:"16px",zIndex:"3",transform:"translateY(-50%) translateX(".concat(e?"50%":"-50%",")"),fontSize:"15px"},outside:{top:0,insetInlineStart:-6},inside:{top:2,insetInlineStart:3}}),f=e=>{let{handlePlacement:t="outside",editor:n,getPos:p,decorations:h,isVisible:m,onClick:f,node:v,selected:b,extension:y,updateAttributes:w,deleteNode:j,...k}=e,C=(0,o.GV)(l.nD),S=(0,r.fW)(),A=(0,a.useCallback)(e=>{n.commands.selectNodeAtPos(p()),e.stopPropagation()},[n,p]),z=(0,a.useCallback)(e=>{var t;let i=(null===(t=e.target.closest("[data-node-view-wrapper]"))||void 0===t?void 0:t.querySelector("[data-selection-ring]"))||void 0;(0,s.b)(n,e.nativeEvent,p(),i),e.stopPropagation()},[n,p]);if(!C)return null;let I=(0,d.JL)(h),R=(0,u.Ms)(h),E=(0,c.b0)(h);return null!=m||(m=I||R),(0,i.jsx)(g,{isSelected:E,isVisible:m,onClick:f||A,onDragStart:z,...x(S)[t],...k})}},86186:(e,t,n)=>{"use strict";n.d(t,{Nb:()=>d,Vx:()=>l,wP:()=>c});var i=n(14041),a=n(87747),r=n(24293);let o=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={borderColor:e?"var(--chakra-colors-whiteAlpha-300)":"var(--chakra-colors-blackAlpha-200)"};return t?{...n,bg:e?"var(--chakra-colors-trueblue-300)":"var(--chakra-colors-trueblue-50)",color:e?"var(--chakra-colors-trueblue-900)":"var(--chakra-colors-trueblue-300)",hoverBg:e?"var(--chakra-colors-trueblue-200)":"var(--chakra-colors-trueblue-100)",hoverColor:e?"var(--chakra-colors-trueblue-900)":"var(--chakra-colors-trueblue-600)"}:{...n,bg:e?"var(--chakra-colors-gradient-dark)":"var(--chakra-colors-whiteAlpha-900)",color:e?"var(--chakra-colors-gray-100)":"var(--chakra-colors-gray-500)",hoverBg:e?"var(--chakra-colors-gray-800)":"var(--chakra-colors-gray-100)",hoverColor:e?"var(--chakra-colors-trueblue-200)":"var(--chakra-colors-gray-800)"}},l=e=>{let t=o(e);return{"--global-drag-handle-background":t.bg,"--global-drag-handle-color":t.color,"--global-drag-handle-hover-background":t.hoverBg,"--global-drag-handle-hover-color":t.hoverColor,"--global-drag-handle-border":t.borderColor}},s=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?o(e,!0):{bg:"var(--global-drag-handle-background)",color:"var(--global-drag-handle-color)",hoverBg:"var(--global-drag-handle-hover-background)",hoverColor:"var(--global-drag-handle-hover-color)",borderColor:"var(--global-drag-handle-border)"}},d=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,a.rd)();return(0,i.useMemo)(()=>s(t,e),[t,e])},c=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=d(e);return{height:r.PN,borderRadius:"sm",fontSize:"xs",px:2,shadow:"sm",bg:t.bg,color:t.color,borderColor:t.borderColor,_active:{shadow:"var(--global-drag-handle-shadow-inner)"},_hover:{color:t.hoverColor,background:t.hoverBg}}}},57036:(e,t,n)=>{"use strict";n.d(t,{M:()=>c});var i=n(11329),a=n(95580),r=n(63915),o=n(42849),l=n(77646);let s=(e,t)=>!!d(e),d=e=>{if(!(e.parent&&(0,l.jg)(e.parent)))return!0;let t=(0,a.TK)(e,l.jg)[0];if(!t)return!0;let n=e.doc.resolve(t.pos);return 0===Object.keys((0,o.l0)(n)).length},c=(e,t,n)=>{var o;let l=e.posAtCoords({left:t.clientX,top:t.clientY});if(!l||l.inside<0||!e.state.doc.resolve(l.pos))return null;let d=l.pos,c=e.state.doc.resolve(l.inside),u=e.state.doc.nodeAt(l.inside),p=e.state.doc.nodeAt(l.pos);if((null==u?void 0:u.type.name)==="smartLayout"&&(null==p?void 0:p.type.name)==="smartLayoutCell")return null;let h=(0,a.IV)(c,r.q)[0];return h&&(d=l.inside,h.pos===d)||!d||n&&null==(d=(0,i.Um)(e.state.doc,d,n))||!s(e.state.doc.resolve(d),null===(o=e.dragging)||void 0===o?void 0:o.slice)?null:d}},7259:(e,t,n)=>{"use strict";n.d(t,{cC:()=>v,lA:()=>x,sn:()=>m,uf:()=>f});var i=n(13236),a=n(64130),r=n(19534),o=n(34821),l=n(69646),s=n(82354),d=n(17835),c=n(90406),u=n(63915),p=n(34095),h=n(46896);let m=24,g=(e,t,n,i)=>{if(i&&((0,p.ht)(i)||(0,u.q)(i)||(0,o.q)(i))||v(e)||(0,h.Rv)(e)||!(0,r.CD)(e))return!1;if((0,c.Bv)(e)){let e=n.state.doc.resolve(t);return!(0,d.qK)(e)}return!0},x=(e,t)=>{var n,r,o;let l;let s=(0,a.ix)()?-26:26,d=Math.max((null===(n=t.posAtCoords(e))||void 0===n?void 0:n.inside)||-1,(null===(r=t.posAtCoords({...e,left:e.left+s}))||void 0===r?void 0:r.inside)||-1,(null===(o=t.posAtCoords({...e,left:e.left+s+22}))||void 0===o?void 0:o.inside)||-1);if(-1==d)return;try{l=t.state.doc.resolve(d)}catch(e){return}let c=l.nodeAfter,u=c&&g(c,d,t,l.parent)?{pos:d,depth:l.depth,node:c}:(0,i.eL)(l,e=>g(e,d,t));if(!u)return;let{pos:p,depth:h,node:m}=u,x=t.nodeDOM(p);if(!(x instanceof HTMLElement))return;let f=x,v=x.querySelector("[data-content-reference]");if(v){let e=t.posAtDOM(v,0);(m.isAtom&&e===p||e===p+1)&&(f=v)}return{pos:p,depth:h,el:f,node:m}},f=(e,t)=>{let n={left:0,right:0,top:0};if(e.isTextblock){let e=t.querySelector("[data-node-view-content]")||t,i=parseInt(window.getComputedStyle(e).lineHeight);n.top=(i-22)/2}else if((0,r.jg)(e)){if((0,l.Wq)(e)){let e=t.clientWidth*(s.xS-1)/2;n.left=-e,n.right=e}else n.left=32,n.right=32,n.top=12}else(0,p.hj)(e)&&(n.left=-22,n.right=-22);return n},v=e=>e.type.spec.containerHandle},27664:(e,t,n)=>{"use strict";n.d(t,{CD:()=>d,IN:()=>l,Wp:()=>s,rZ:()=>c});var i=n(99742),a=n(64225),r=n(56632),o=n(5933);let l=(e,t,n)=>{e&&t&&e.replacePageContent(t.shapes,t.bindings,n)},s=(e,t)=>{e.setSetting("isSnapping",t),setTimeout(()=>{(0,r.lN)(e,t?128:10)})},d=(e,t)=>{(0,a.KA)().dispatch((0,o.v5)(t?{drawingId:e}:{drawingId:null}))},c=()=>(0,i.Ak)(5)},46291:(e,t,n)=>{"use strict";n.d(t,{Hf:()=>j,mk:()=>k});var i=n(31085),a=n(13236),r=n(81570),o=n(14041),l=n(52609),s=n(95580),d=n(43873),c=n(38234);let u=(e,t)=>(n,i)=>{let a={...n.getState(e.view.state)};a.active=!0,a.key=i,a.query="",t.setMeta(n,a)};var p=n(64225),h=n(5933),m=n(57882),g=n(59707);let x=e=>{let{ref:t,pickerInstance:n}=e;(0,o.useImperativeHandle)(t,()=>{let e=e=>{var t,i,a;let r=null===(a=n.component)||void 0===a?void 0:null===(i=a.refs)||void 0===i?void 0:null===(t=i.searchInput)||void 0===t?void 0:t.current;if(r){let{key:t,code:n}=e;r.dispatchEvent(new KeyboardEvent("keydown",{key:t,code:n}))}return e.stopPropagation(),e.preventDefault(),!0};return{onKeyDown:t=>{let{event:n}=t;return!!["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Enter"].includes(n.key)&&e(n)}}})},f=(0,o.forwardRef)((e,t)=>{let{query:n,onSelect:a}=e,r=(0,p.GV)(h.Jo),s=(0,m.Iy)("edit",r),[d,c]=(0,o.useState)(null),u=(0,o.useCallback)(e=>{if(c(e),e.shadowRoot){let t=document.createElement("style");t.innerHTML="nav + div.padding-lr { display: none }",e.shadowRoot.appendChild(t)}e.addEventListener("mousedown",g.Fw)},[]);x({ref:t,pickerInstance:d}),(0,o.useEffect)(()=>{var e,t,i;if(!d)return;let a=null===(i=d.component)||void 0===i?void 0:null===(t=i.refs)||void 0===t?void 0:null===(e=t.searchInput)||void 0===e?void 0:e.current;a&&(a.value=n,a.dispatchEvent(new Event("input",{bubbles:!0})))},[d,n]);let f=(0,o.useCallback)(e=>{let t=(0,l.F8)(e.id);t&&a(t)},[a]);return s?(0,i.jsx)(l.pP,{onCreate:u,perLine:9,searchPosition:"sticky",handlePick:f,shouldFocusSearch:!1,dataTargetName:"emoji-list"}):(0,i.jsx)(i.Fragment,{})});var v=n(63280);let b=/:([a-zA-Z0-9_+-]+):$/,y=new r.hs("EmojiMenu"),w=e=>{let t=(0,l.$n)(e);return{id:e.id,native:t}},j=a.bP.create({name:"emoji",group:"inline",inline:!0,selectable:!1,atom:!0,addAttributes:()=>({id:{},native:{}}),addStorage:()=>({hasMigrated:!1,isMigrationScheduled:!1}),parseHTML:()=>[{tag:"span.emoji:not([id])",skip:!0},{tag:"span[class=emoji]"}],addCommands(){return{openEmojiPicker:function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return t=>{let{commands:n,tr:i,editor:a}=t;return u(a,i)(y,":"),!e||n.insertContent(":")}},migrateNativeEmojis:()=>e=>{let{editor:t}=e;return!this.storage.hasMigrated&&!this.storage.isMigrationScheduled&&(this.storage.isMigrationScheduled=!0,l.eX.then(()=>{t.commands.command(e=>{let{tr:t,state:n}=e,{doc:i,schema:a}=n;return i.descendants((e,n,i)=>{C({node:e,pos:n,parent:i,tr:t,schema:a})}),this.storage.hasMigrated=!0,this.storage.isMigrationScheduled=!1,!0})}),!0)}}},addInputRules:()=>[new a.fV({find:b,handler:e=>{let{range:t,match:n,commands:i}=e,a=n[1],r=(0,l.F8)(a);if(!r)return;let o=w(r);i.insertContentAt(t,{type:"emoji",attrs:o})}})],renderHTML(e){let{HTMLAttributes:t,node:n}=e;return["span",(0,a.KV)(t,{class:"emoji"}),"".concat(n.attrs.native||"")]},renderHTMLforAI(e){let{node:t}=e;return t.attrs.native||""},renderText(e){let{node:t}=e;return"".concat(t.attrs.native||"")},addProseMirrorPlugins:()=>[new r.k_({key:new r.hs("emojiTransform"),appendTransaction:(e,t,n)=>(0,s.g4)(e,n,C)})]}),k=(0,c.e$)({name:"emojiShortcuts",char:":",pluginKey:y,MenuComponent:(0,o.forwardRef)((e,t)=>{let{query:n,editor:a}=e;return a.isEditable?(0,i.jsx)(f,{ref:t,query:n,onSelect:e=>{let{id:t}=e,i=(0,l.$n)(e),r=a.state.selection;a.chain().deleteRange({from:r.from-n.length-1,to:r.to}).insertContent({type:"emoji",attrs:{id:t,native:i}}).insertContent(" ").run()}}):null}),priority:d.y.EmojiShortcuts}),C=e=>{let{node:t,pos:n,tr:i,schema:a}=e;if(!(0,l.Gm)())return!1;if(!t.isText||!t.text)return!0;let r=t.marks.map(e=>e.toJSON()),{replaced:o,nodes:s}=(0,v.Z)(t.text,r);try{o&&i.replaceWith(i.mapping.map(n),i.mapping.map(n+t.nodeSize),s.map(e=>a.nodeFromJSON(e)))}catch(e){console.error("[migratePlugin] Error migrating emoji",{err:e,pos:n,text:t.text,node:t,nodes:s})}return!0}},74336:(e,t,n)=>{"use strict";n.d(t,{h:()=>s,v:()=>d});var i=n(13236),a=n(81570),r=n(73686),o=n(95580);let l=e=>e.isTextblock||["gallery","cardLayoutItem","buttonGroup","navbarLinks","navbarButtons","toggleSummary"].includes(e.type.name),s=i.YY.create({name:"emptyNodes",addOptions:()=>({emptyNodeClass:"is-empty",showOnlyWhenEditable:!0,showOnlyCurrent:!1}),addProseMirrorPlugins(){return[new a.k_({key:new a.hs("emptyNodes"),props:{decorations:e=>{let{doc:t,selection:n}=e,i=[],a=this.editor.isEditable||!this.options.showOnlyWhenEditable||this.editor.isThumbnail,{anchor:s}=n;if(a)return t.descendants((e,t)=>{if(!l(e))return;let n=s>=t&&s<=t+e.nodeSize,a=(0,o.mf)(e);(n||!this.options.showOnlyCurrent)&&a&&i.push(r.NZ.node(t,t+e.nodeSize,{class:this.options.emptyNodeClass},{isEmpty:!0}))}),r.zF.create(t,i)}}})]}}),d=e=>e.some(e=>e.spec.isEmpty)},51183:(e,t,n)=>{"use strict";n.d(t,{A3:()=>y,TX:()=>w,nf:()=>j,wg:()=>A});var i=n(81313),a=n(13236),r=n(81570),o=n(73686),l=n(64225),s=n(80352),d=n(10458),c=n(5933),u=n(14e3),p=n(95580),h=n(45864),m=n(69646),g=n(77646),x=n(86047),f=n(15944),v=n(46896);let b=new r.hs("expandableNodes"),y=e=>e.some(e=>e.spec.isExpandableNode),w=e=>e instanceof h.J&&0===e.side&&j(e.node),j=e=>!0===e.type.spec.expandable,k=(e,t)=>{if(!(null==t?void 0:t.from))return!1;let n=(0,p.jB)(e,t.from),i=(0,s.cH)(n);return(null==i?void 0:i.inView)===!0},C=(e,t,n)=>{let i=(0,g.Py)(e.view.nodeDOM(t)),a=(0,s.cH)(i);if(!a)return!1;let{bottomInView:r,topInView:o}=a;return"top"===n?o:r},S=function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e.state.selection,o=a instanceof h.J&&1===a.side?a.to:a.from;if(o<=t){if(C(e,t,"top"))return null}else if(o>=n){if(C(e,t,"bottom"))return null}else{if(k(e,a))return null;let t=e.state.doc.resolve(o);if(k(e,r.LN.findFrom(t,-1,!1))||k(e,r.LN.findFrom(t,1,!1)))return null}let l=(0,p.XL)({editor:e,side:i?"bottom":"top",margin:200});if(l.pos){let t=r.LN.findFrom(e.state.doc.resolve(l.pos),i?1:-1,!1);return(null==t?void 0:t.from)||null}return null},A=a.YY.create({name:"expandableNodes",extendNodeSchema(e){var t;return{expandable:null!==(t=(0,a.gk)((0,a.iI)(e,"expandable",e)))&&void 0!==t&&t}},addCommands:()=>({expandOrCollapseExpandableNode:e=>t=>{let{state:n,chain:i}=t,a=null!=e?e:n.selection.from,r=n.doc.nodeAt(a);if(!r||!j(r))return!1;let o=(0,l.KA)();switch(r.type.name){case"card":if(o.dispatch((0,c.mF)({attached:!1})),null===d.zS||void 0===d.zS||d.zS.track(d.VV.CARD_EXPANDED,{is_present_mode:!0,method:"enter_key"}),(0,m.Wq)(r.attrs.id))return i().descendIntoCurrentCard(a).reHighlightExpandableNode().run();return i().spotlightCollapseCard(a).reHighlightExpandableNode().run();case"toggle":{(0,v.bG)(r.attrs.id,!(0,v.vb)(r.attrs.id));let t=i();return e&&t.spotlightNextBlock(),t.reHighlightExpandableNode().run(),!0}case"image":case"video":case"embed":return o.dispatch((0,c.a)({nodeId:r.attrs.id})),!0;case"gallery":{let e=r.firstChild;if(e)return o.dispatch((0,c.a)({nodeId:e.attrs.id})),!0;return!1}default:return!1}},goToNextExpandableNode:e=>t=>{var n;let{editor:i,tr:a,state:r}=t,o=f.n.getState(i.state),l=(0,g.W0)(i,o.cardId);if(!l)return!1;let d=l.node.attrs.id,c=l.pos,u=l.pos+l.node.nodeSize,p=i.state.selection,m=w(p),v=p instanceof h.J,y=S(i,c,u,e),k=(null===(n=b.getState(r))||void 0===n?void 0:n.lastApplied)||+new Date;if(m&&!y&&+new Date-k>3e3)return i.commands.reHighlightExpandableNode();a.setMeta(b,{});let C=v&&(-1===p.side&&e||1===p.side&&!e)?-1:0,A=Math.min(Math.max(y||(m||!v?p.from:1===p.side?p.to+C:p.from+C),c),u-1),z=(0,x.vi)(i,d,A,j,e);if(console.debug("[ExpandableNodes] goToNextExpandableNode",{posToUse:A,overridePos:y},z),!z.pos||!z.domNode||z.cardId!==d)return a.setSelection(h.J.create(i.state.doc,c,e?-1:1)),!1;let I=(0,s.cH)(z.domNode,50);return(null==I?void 0:I.inView)?(a.setSelection(h.J.create(i.state.doc,z.pos)),(0,s.H1)("editor").scrollElementIntoView({element:z.domNode,attempts:0,offsetFromTop:null}),!0):(m&&a.setSelection(h.J.create(i.state.doc,p.from,e?-1:1)),!1)},reHighlightExpandableNode:()=>e=>{let{tr:t,editor:n}=e;return t.setMeta(b,{shouldAddResetClass:!0}),requestAnimationFrame(()=>{n.commands.command(e=>{let{tr:t}=e;return t.setMeta(b,{shouldAddResetClass:!1}),!0})}),!0}}),addProseMirrorPlugins:()=>[new r.k_({key:b,state:{init:()=>({lastApplied:0,shouldAddResetClass:!1}),apply(e,t){let n=e.getMeta(b);return n?{...t,lastApplied:+new Date,...n}:t}},props:{decorations(e){let t=f.n.getState(e);if(null==t?void 0:t.pos)return o.zF.empty;let n=b.getState(e);if((0,c.wC)((0,l.KA)().getState())!==u.w.SLIDE_VIEW)return o.zF.empty;let a=e.selection;if(!w(a)||!(a instanceof h.J))return o.zF.empty;let r=a.node;return o.zF.create(e.doc,[o.NZ.node(a.from,a.from+r.nodeSize,{class:(0,i.cx)("expandable-node-selected",(null==n?void 0:n.shouldAddResetClass)&&"expandable-node-reset")},{isExpandableNode:!0})])}}})]})},69180:(e,t,n)=>{"use strict";n.d(t,{N3:()=>c,Wj:()=>d,bk:()=>u,pN:()=>p,uI:()=>h});var i=n(12784),a=n.n(i),r=n(99742),o=n(81570),l=n(64225),s=n(5933);let d=(e,t)=>{let n=(0,l.KA)();n.dispatch((0,s.U)(t?{noteId:e}:{noteId:null}));let i=n.getState();!t&&(0,s.rp)(i)&&n.dispatch((0,s.Zf)({isEditingMedia:!1})),!t&&(0,s.dK)(i)&&n.dispatch((0,s.a)({nodeId:null}))},c=a()(d,30),u=()=>{let e=(0,l.KA)().getState();return(0,s.DH)(e)},p=()=>(0,r.Ak)(5),h=e=>e instanceof o.nh&&"footnote"===e.node.type.name},5628:(e,t,n)=>{"use strict";n.d(t,{R:()=>i,k:()=>a});let i="fromInnerEditor",a="fromOuterEditor"},49572:(e,t,n)=>{"use strict";n.d(t,{Q:()=>r,z:()=>o});var i=n(11329),a=n(5628);let r=e=>"footnote"==e.schema.topNodeType.name,o=function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"footnote";e.forEach(e=>{let t=e.steps.filter(e=>e instanceof i.XE||e instanceof i.Ys);0==t.length||e.getMeta(a.R)||e.getMeta("appendedTransaction")||t.forEach(e=>{let{from:t,to:a,mark:l}=e;n.doc.nodesBetween(t,a,(n,s)=>{n.type.name===o&&s<t&&(e instanceof i.XE?r.removeMark(t,a,l):e instanceof i.Ys&&r.addMark(t,a,l))})})})}},33487:(e,t,n)=>{"use strict";n.d(t,{B:()=>i});let i=n(60980).B.extend({addKeyboardShortcuts(){return{"Shift-Enter":()=>this.editor.commands.setHardBreak()}}})},34444:(e,t,n)=>{"use strict";n.d(t,{DZ:()=>f,Bq:()=>x});var i=n(87307),a=n(58599),r=n(98380),o=n(29362),l=n(31085),s=n(81313),d=n(12327),c=n(77654),u=n(5434),p=n(47687),h=n(95905);let m=e=>{let{node:t,decorations:n}=e,{level:i,horizontalAlign:r,placeholder:o}=t.attrs,m=(0,p.h)(n),g=o||(m?d.Ru._({id:"gLDJuJ"}):d.Ru._({id:"1nLERW",values:{level:i}}));return(0,l.jsx)(u.u,{...e,style:{display:"flex",flexDirection:"column",...(0,h.yp)(r)},children:(0,l.jsx)(a.$p,{dir:(0,h.fZ)(n),level:i,"data-placeholder":g,className:(0,s.cx)("heading",c.U6),style:{minWidth:"min(100%, 10em)",...(0,h.O8)(r)}})})},g=[1,2,3,4],x=Math.max(...g),f=i.D.extend({selectable:!1,group:"block cardNotesBlock",addAttributes:()=>({level:{default:1,rendered:!1}}),addNodeView:()=>(0,a.gu)(m,{update:o.z0}),addInputRules(){return this.options.levels.map(e=>(0,r.tC)({find:new RegExp("^(#{1,".concat(e,"})\\s$")),type:this.type,getAttributes:{level:e}},[this.editor.state.schema.nodes.bullet,this.editor.state.schema.nodes.numbered,this.editor.state.schema.nodes.todo]))}}).configure({levels:g})},95905:(e,t,n)=>{"use strict";n.d(t,{gj:()=>_,wq:()=>z,fZ:()=>R,O8:()=>A,yp:()=>j,AS:()=>S,F0:()=>b,CY:()=>y,Ro:()=>w,er:()=>E,lI:()=>k});var i=n(20501),a=n(12327),r=n(13236),o=n(81570),l=n(7908),s=n(64130),d=n(95580),c=n(43873),u=n(73686);let p=["paragraph","heading","title","drawing","diagram","image","contributors","mediaPlaceholder","buttonGroup","navbarLinks","gallery","chart","toggleSummary","smartDiagram"],h=["title","heading","paragraph","bullet","todo","numbered","image","contributors","diagram","mediaPlaceholder","buttonGroup","gallery","chart"],m=["toggle"],g=new o.hs("horizontalAlign");class x{isRelevantNode(e){return h.includes(e.type.name)}isRelevantParentNode(e){return m.includes(e.type.name)}apply(e){if(!e.docChanged&&this.hasInitialized)return this;this.hasInitialized=!0;let t=[],n=(0,s.C)();return e.doc.descendants((e,i)=>{if(this.isRelevantParentNode(e)){let n=(0,l.KQ)(e);t.push(u.NZ.node(i,i+e.nodeSize,{},{dir:n})),"toggle"===e.type.name&&e.forEach((e,a,r)=>{if("toggleSummary"===e.type.name){let r=i+1+a;t.push(u.NZ.node(r,r+e.nodeSize,{},{dir:n}))}})}if(this.isRelevantNode(e)){let a=(0,l.KQ)(e);a?n=a:t.push(u.NZ.node(i,i+e.nodeSize,{},{dir:n}))}return!0}),this.decorations=u.zF.create(e.doc,t),this}constructor(e=u.zF.empty){this.hasInitialized=!1,this.decorations=e}}let f=()=>new o.k_({key:g,state:{init:()=>new x,apply:(e,t)=>t.apply(e)},props:{decorations(e){let t=g.getState(e);return null==t?void 0:t.decorations}}}),v=["left","right","center"],b=e=>v.find(t=>e.isActive({horizontalAlign:t})),y=e=>{let t=e.state.selection.$head.node().textContent;return(0,l.R_)(t)||(0,s.C)()},w=e=>t=>{let{dir:n,ctx:i}=t||{};return"menu"===i?null:e&&"center"!==e&&"ltr"!==n?n?"left"===e?"right":"left":null:e},j=(e,t)=>{let n=k(e,t);return{textAlign:e||void 0,alignItems:n||"var(--flex-align)","--flex-align":n}},k=(e,t)=>{if(e)return C(e,t||(0,s.C)())},C=(e,t)=>e?"rtl"===t?({left:"flex-end",center:"center",right:"flex-start"})[e]:({left:"flex-start",center:"center",right:"flex-end"})[e]:void 0,S=(e,t)=>{let n={"--descendant-align-self-left":"rtl"===t?"flex-end":"flex-start","--descendant-align-self-center":"center","--descendant-align-self-right":"rtl"===t?"flex-start":"flex-end"};return e?{"--descendant-align-self":C(e,t),...n}:n},A=e=>e?{alignSelf:"var(".concat({left:"--descendant-align-self-left",center:"--descendant-align-self-center",right:"--descendant-align-self-right"}[e],", --descendant-align-self)")}:{alignSelf:"var(--descendant-align-self, self-start)"},z=r.YY.create({name:"horizontalAlign",priority:c.y.HorizontalAlign,addOptions:()=>({types:p,alignments:v,defaultAlignment:null}),addGlobalAttributes(){return[{types:this.options.types,attributes:{horizontalAlign:{default:this.options.defaultAlignment,keepOnSplit:!0,parseHTML:e=>e.style.textAlign||e.getAttribute("align")||this.options.defaultAlignment,renderHTML:e=>e.horizontalAlign?{style:"text-align: ".concat(e.horizontalAlign)}:{}}}}]},addCommands:()=>({toggleHorizontalAlign:e=>t=>{let{tr:n,dispatch:i,state:a,editor:r}=t;if(!i)return!0;let o=I(r,e)?null:e;return n.selection.ranges.forEach(e=>{let t=e.$from.pos,i=e.$to.pos;a.doc.nodesBetween(t,i,(e,t)=>{if("footnote"===e.type.name)return!1;p.includes(e.type.name)&&n.setNodeMarkup(t,void 0,{...e.attrs,horizontalAlign:o}).setMeta("annotationEvent",{type:"update-node-attrs",pos:t})})}),!0}}),addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.toggleHorizontalAlign("left"),"Mod-Shift-e":()=>this.editor.commands.toggleHorizontalAlign("center"),"Mod-Shift-r":()=>this.editor.commands.toggleHorizontalAlign("right"),Backspace:()=>{let{selection:e}=this.editor.state;if(!(e instanceof o.U3)||!e.empty)return!1;let t=e.$from.parent;return!!p.includes(t.type.name)&&!!t.isTextblock&&!(t.nodeSize>2)&&t.attrs.horizontalAlign!=this.options.defaultAlignment&&this.editor.commands.toggleHorizontalAlign(this.options.defaultAlignment)}}},addProseMirrorPlugins:()=>[f()]}),I=(e,t)=>{let n=v.filter(e=>e!==t);return e.isActive({horizontalAlign:t})&&!n.some(t=>e.isActive({horizontalAlign:t}))},R=(e,t)=>{var n;if(!t)return(null===(n=e.find(e=>e.spec.dir))||void 0===n?void 0:n.spec.dir)||"auto"},E=(e,t,n)=>{var i;let a=g.getState(e);if(!a)return null;let r=null===(i=a.decorations.find(t,n,e=>e.dir))||void 0===i?void 0:i[0];return r?r.spec.dir:null},L=e=>!(0,d.iA)(e,"horizontalAlign"),_=[{key:"alignLeft",name:()=>a.Ru._({id:"VjjKVj"}),icon:i.ecg,checkActive:e=>I(e,"left"),checkDisabled:L,apply:e=>e.chain().toggleHorizontalAlign("left").run(),shortcut:"Mod+Shift+L",enabledForTables:!0,alignment:"left"},{key:"alignCenter",name:()=>a.Ru._({id:"95ckMP"}),icon:i._ur,checkActive:e=>I(e,"center"),checkDisabled:L,apply:e=>e.chain().toggleHorizontalAlign("center").run(),shortcut:"Mod+Shift+E",enabledForTables:!0,alignment:"center"},{key:"alignRight",name:()=>a.Ru._({id:"vTKw81"}),icon:i.jbh,checkActive:e=>I(e,"right"),checkDisabled:L,apply:e=>e.chain().toggleHorizontalAlign("right").run(),shortcut:"Mod+Shift+R",enabledForTables:!0,alignment:"right"}]},94669:(e,t,n)=>{"use strict";n.d(t,{K:()=>a});var i=n(68566);let a=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=t.nodeAfter;if(!a)return!1;e.deleteRange(t.pos,t.pos+a.nodeSize);let r=e.doc.nodeAt(t.pos),o=t.pos,l=1;(!n&&t.nodeBefore||n&&!r&&t.nodeBefore)&&(o=t.pos-t.nodeBefore.nodeSize,l=-1);let s=e.doc.resolve(o+1),d=(0,i.n)(e.doc.resolve(l>0?s.pos:s.end()),l);return d&&e.setSelection(d),!0}},13934:(e,t,n)=>{"use strict";n.d(t,{BM:()=>r,ZS:()=>i,eK:()=>a});let i=4,a={type:"gridCell",content:[{type:"paragraph"}]},r="gridLayout"},89565:(e,t,n)=>{"use strict";n.d(t,{M5:()=>d,Vk:()=>o,rj:()=>l,wC:()=>s});var i=n(98371),a=n(474);let r=e=>{var t;let{view:n,event:i}=e,a=null===(t=n.posAtCoords({left:i.clientX,top:i.clientY}))||void 0===t?void 0:t.inside;if(!a||-1==a)return null;let{doc:r}=n.state,o=r.nodeAt(a);return{pos:a,node:o}},o=(e,t,n)=>{var o;if(n&&!(0,a.Ny)(n,e.state.schema)||!((null===(o=t.target)||void 0===o?void 0:o.hasAttribute("data-media-node-wrapper"))||(0,i.xX)(t.target,e.dom,e=>e.hasAttribute("data-media-node-wrapper"))))return null;let s=r({view:e,event:t});if(!s||n&&n.content.firstChild===s.node)return null;let d=l(t.target,e);return d&&s.node?{pos:s.pos,node:s.node,side:d}:null},l=(e,t)=>{let n=(0,i.GE)(e,t.dom,"data-media-add-side");return null==n?void 0:n.getAttribute("data-media-add-side")},s=e=>{let{side:t,pasteContent:n,node:i}=e;return{type:"gridLayout",content:[{type:"gridCell",content:"left"===t?n:[i.toJSON()]},{type:"gridCell",content:"left"===t?[i.toJSON()]:n}]}},d=e=>{let{side:t,node:n}=e;return"left"===t?2:n.nodeSize+4}},474:(e,t,n)=>{"use strict";n.d(t,{DF:()=>f,NJ:()=>d,Ny:()=>g,Ob:()=>v,X6:()=>s,ds:()=>c,nX:()=>y,rP:()=>j,xK:()=>w});var i=n(13236),a=n(95580),r=n(19534);let o=["card","document","gridLayout","gallery"],l=e=>e.isBlock&&!o.includes(e.type.name)&&!(e.isTextblock&&(0,a.Op)(e)),s=e=>"gridLayout"===e.type.name,d=e=>"gridCell"===e.type.name,c=(e,t,n)=>{let i=n&&u(e,n,t);if(i)return i;if(n&&!g(n,e.state.schema))return null;let a=p(e,t,"right")||p(e,t,"left");return!a||n&&n.content.firstChild===a.node?null:a},u=(e,t,n)=>{var r;if(!x(t,e.state.schema))return null;let o=null===(r=e.posAtCoords({left:n.clientX,top:n.clientY}))||void 0===r?void 0:r.inside;if(!o||-1==o)return null;let{doc:l}=e.state,s=l.resolve(o),c=l.nodeAt(o),u=c&&d(c)?{node:c,pos:o}:(0,i.eL)(s,d),p=(null==u?void 0:u.pos)&&(0,a.q0)(u.pos,e);if(!u||!p)return null;let h=n.clientX>p.left+p.width/2?"right":"left";return{pos:u.pos,node:u.node,rect:p,side:h}},p=(e,t,n)=>{var r;let o=null===(r=e.posAtCoords({left:t.clientX+("left"==n?30:-30),top:t.clientY}))||void 0===r?void 0:r.inside;if(!o||-1==o)return null;let{doc:s,schema:d}=e.state,c=s.resolve(o),u=s.nodeAt(o),p=u&&l(u)?{node:u,pos:o}:(0,i.eL)(c,l);if(!p)return null;let g=(0,a.q0)(o,e);if(!g)return null;let x="left"==n?t.clientX-g.left:g.right-t.clientX,f=x<0,v=(null==u?void 0:u.type.name)==="gridCell"?0:30;if(!(f&&x>-v||"right"==n&&x<(g.right-g.left)*.15))return null;let b=s.resolve(p.pos),y=(null==u?void 0:u.type.name)==="gridCell"&&h(b,d)||m(b,d);if(f||!y){let t=(0,i.eL)(c,e=>"gridCell"===e.type.name);if(t&&h(s.resolve(t.pos),d)){let i=(0,a.q0)(t.pos,e);return i?{pos:t.pos,node:t.node,side:n,rect:i}:null}}return y?{pos:p.pos,rect:g,node:p.node,side:n}:null},h=(e,t)=>e.parent.canReplaceWith(e.index(),e.index(),t.nodes.gridCell),m=(e,t)=>e.parent.canReplaceWith(e.index(),e.indexAfter(),t.nodes.gridLayout),g=(e,t)=>t.nodes.gridCell.validContent(e.content),x=(e,t)=>t.nodes.gridLayout.validContent(e.content),f=e=>b(e,"gridLayout"),v=e=>{let t=b(e,"gridLayout");if(!t||!t.nodeAfter)throw Error();let n=t.nodeAfter,i=[],a=t.start(t.depth+1);for(let e=0;e<n.childCount;e++){let t=n.child(e);a+=0===e?0:n.child(e-1).nodeSize,i.push({node:t,pos:a})}return i},b=(e,t)=>{var n;if((null===(n=e.nodeAfter)||void 0===n?void 0:n.type.name)===t)return e;let i=e.doc;for(let n=e.depth;n>0;n--)if(e.node(n).type.name===t)return i.resolve(e.before(n));return null},y=(e,t)=>{let n=v(e),i=n[-1===t?n.length-1:t];return i?e.doc.resolve(i.pos):null},w=e=>v(e).findIndex(t=>t.pos===e.pos),j=(e,t,n)=>{var a,o;let l=null===(a=(0,r.j5)(n,e).find(e=>e.spec.isLayoutCellDecoration))||void 0===a?void 0:a.spec.colIndex,d=null===(o=(0,r.j5)(n,t).find(e=>e.spec.isLayoutCellDecoration))||void 0===o?void 0:o.spec.colIndex,c=n.state.doc.resolve(e),u=(0,i.eL)(c,s);if(!u)return;let p=n.state.doc.resolve(t),h=(0,i.eL)(p,s);if(!h||h.pos!==u.pos)return;let m=[...u.node.attrs.colWidths],[g]=m.splice(l,1);return m.splice(d,0,g),{colWidths:m,parentPos:u.pos}}},37672:(e,t,n)=>{"use strict";n.d(t,{N:()=>B});var i=n(13236),a=n(35864),r=n(69e3),o=n(81570),l=n(64225),s=n(77256),d=n(438),c=n(5933),u=n(95580),p=n(27042),h=n(22544),m=n(25845),g=n(26884),x=n(43873),f=n(52417),v=n(90406),b=n(61128),y=n(50201);let w=e=>new o.k_({key:new o.hs("handleCmdClickLink"),props:{handleDOMEvents:{click:(t,n)=>{var i;let a=(0,l.KA)(),r=(0,c.nD)(a.getState()),o=null===(i=n.target)||void 0===i?void 0:i.closest("a"),s=null==o?void 0:o.href;if(!s||(null==o?void 0:o.closest("[data-comments-wrapper]")))return!1;n.preventDefault();let d=n.ctrlKey||n.metaKey,p=(0,u.Ww)(s),h=(0,c.bO)(a.getState()),m=(0,u.Cf)(s,h);if(r){if(!d)return!1;if(m)return(0,y.T)(e,n,p),!1}else if(!d&&m)return(0,y.T)(e,n,p),!1;return window.open(s,"_blank"),!1}}}});var j=n(31085),k=n(80532),C=n(61778),S=n(40173),A=n(92712),z=n(95640),I=n(60674),R=n(75669),E=n(14041),L=n(73893),_=n(4876),M=n(747),N=n(82257),T=n(58599),P=n(44507),O=n(92667),D=n(57750);let F=(0,I.P)(k.az),H=e=>{let{node:t,children:n}=e,{href:i,meta:a}=t.attrs,r=(0,N.oR)(),{linkUrl:o,handleClick:l}=(0,M.c)({url:i||""}),{interceptLinkClick:s,linkUrlSafe:d,isUntrusted:c,linkInterceptEnabled:u}=(0,_.i)(o),p=(0,E.useCallback)(e=>{if(null==l||l(e),u)return s(e)},[l,s,u]),{popperRef:h,referenceRef:m,isHovering:g,onMouseOver:x,onMouseOut:f,getPopperProps:v}=(0,O.bf)({disabled:(0,P.mG)()}),b=!r&&!L.$.GAMMA_CYPRESS_TEST&&(0,P.H8)();return(0,j.jsxs)(T.VR,{as:"span",children:[c?(0,j.jsx)(C.E,{as:"span",textDecoration:"underline",color:"gray.500",children:(0,j.jsx)(z.x6,{id:"b7jHrl"})}):(0,j.jsxs)(C.E,{as:"a",className:"link",rel:"noopener nofollow",href:u?d||"":o,onClick:p,onMouseOver:x,onMouseOut:f,ref:m,children:[b&&(0,j.jsx)("span",{contentEditable:!1,children:""}),r?n:(0,j.jsx)(T.$p,{as:"span"}),b&&(0,j.jsx)("span",{contentEditable:!1,children:""})]}),!1===r&&g&&o&&a?(0,j.jsx)(S.Z,{children:(0,j.jsx)(R.N,{children:(0,j.jsx)(F,{position:"relative",zIndex:"popover",ref:h,onMouseOver:x,onMouseOut:f,className:"link-preview-hover",...v(),...O._w,w:"min(500px, 80vw)",minW:"auto !important",children:(0,j.jsxs)(A.Q,{backgroundColor:"white",border:"1px solid",borderColor:"gray.200",shadow:"lg",borderRadius:"lg",_hover:{backgroundColor:"trueblue.50"},children:[(0,j.jsx)(D.Ch,{node:t}),(0,j.jsx)(A.r,{href:o,target:"_blank",rel:"noopener nofollow",onClick:p})]})})})}):null]})};var W=n(67408);let B=a.Ay.extend({priority:x.y.Link,inclusive:!1,excludes:"underline footnoteLabel link",addAttributes:()=>({href:{default:""},source:{},thumbnail:{...(0,u.tb)("thumbnail")},embed:{...(0,u.tb)("embed")},meta:{...(0,u.tb)("meta")}}),addStorage:g.xu,onCreate(){let e=(0,l.KA)().getState(),t=(0,c.nD)(e),n=(0,p.mB)(e);if(!(t&&n))return;let{view:i,state:a}=this.editor,{doc:r,schema:o,tr:s}=a;try{let e=!1;(0,d.Zo)(r,o.marks.link).forEach(t=>{let{node:n,pos:i}=t,a=n.marks.find(e=>"link"===e.type.name);a&&"string"!=typeof a.attrs.href&&(e=!0,s.removeMark(i,i+n.nodeSize,a).addMark(i,i+n.nodeSize,o.marks.link.create({...a.attrs,href:String(a.attrs.href)})))}),e&&i.dispatch(s)}catch(e){console.error("[Link.onCreate] error",e)}},renderHTML(e){var t;let{HTMLAttributes:n}=e;return"string"==typeof n.href&&(null===(t=n.href)||void 0===t?void 0:t.startsWith("javascript:"))?["a",(0,i.KV)(this.options.HTMLAttributes,{...n,href:""}),0]:n.href?["a",(0,i.KV)(this.options.HTMLAttributes,n),0]:["a",(0,i.KV)(this.options.HTMLAttributes,{...n,href:null}),0]},renderHTMLforAI(e){let{mark:t}=e,n=t.attrs.href;return["a",{bookmark:(0,g.vL)(this.storage,t),href:n},0]},parseHTML(){return[{tag:'a[href]:not([href *= "javascript:" i])'},{tag:"a[bookmark]",getAttrs:(0,g.Ll)(this.storage)}]},addCommands(){var e;return{...null===(e=this.parent)||void 0===e?void 0:e.call(this),convertLinkToMedia:e=>t=>{let{chain:n,editor:i}=t,{href:a,...r}=i.getAttributes("link");if(!a||(0,W.hc)(a))return!1;if(!r.source)return n().extendMarkRange("link").insertEmbedAndFetchMetadata(a,e,!1).run(),!0;let o=f.Fn[r.source],l=(null==o?void 0:o.nodeName)||"embed";return n().extendMarkRange("link").insertContent({type:l,attrs:{...r,sourceUrl:a,url:a,displayStyle:e}}).selectInsertedNode().run(),!0},convertMediaToLink:()=>e=>{let{state:t,chain:n}=e;if(!(t.selection instanceof o.nh))return!1;let{from:i,to:a,node:r}=t.selection;if(!(0,v._Y)(r))return!1;let{sourceUrl:l,meta:s}=r.attrs,d=(null==s?void 0:s.title)||l||"link",c={from:i+1,to:i+1+d.length};return n().insertContentAt({from:i,to:a},[{type:"paragraph",attrs:{},content:[{type:"text",text:d}]}],{updateSelection:!0}).setTextSelection(c).setMark(B.name,{...r.attrs,href:l}).run(),!0},convertLinkToButton:()=>e=>{let{editor:t,chain:n}=e,{href:i=""}=t.getAttributes("link");return n().extendMarkRange("link").deleteSelection().insertContentAndSelect((0,s.GO)().buttonGroup).updateAttributes("button",{href:i}).run(),!0},convertButtonToLink:()=>e=>{let{chain:t,state:n,editor:a}=e,{selection:o}=n,l=(0,i.KP)(e=>"button"===e.type.name)(o),s=(0,i.KP)(e=>"buttonGroup"===e.type.name)(o);if(!s||!l)return!1;let{node:d,pos:c}=l,{node:u,pos:p}=s;if(!d)return!1;let h={type:"paragraph",content:d.content.toJSON()},m=u.maybeChild(0)===d,g=m?p:c,x=g+(m?1:2),f=x+r.bP.fromJSON(a.schema,h).content.size,v=t();return 1===u.childCount?v.deleteNode("buttonGroup"):v.deleteNode("button"),v.insertContentAt(g,h,{updateSelection:!1}).setTextSelection({from:x,to:f}).setMark(B.name,{href:d.attrs.href}).focus().run(),!0},convertButtonToMedia:e=>t=>{let{chain:n,state:a}=t,{selection:r}=a,o=(0,i.KP)(e=>"button"===e.type.name)(r),l=(0,i.KP)(e=>"buttonGroup"===e.type.name)(r);if(!o||!l)return!1;let{node:s,pos:d}=o,{node:c,pos:u}=l;if(!s||!c)return!1;let{href:p}=s.attrs;if(!p||(0,W.hc)(p))return!1;if(c.maybeChild(0)===s){let t=[];c.forEach(e=>{"button"===e.type.name&&e!==s&&t.push(e.toJSON())});let i=n();i.setNodeSelection(u).deleteNode("buttonGroup").insertEmbedAndFetchMetadata(p,e,!1),1!==c.childCount&&t.length>0&&i.insertContentAt(u+1,{type:"buttonGroup",content:t},{updateSelection:!1}),i.focus().run()}else n().setNodeSelection(d).insertEmbedAndFetchMetadata(p,e,!1).selectInsertedNode().focus().run();return!0},convertMediaToButton:()=>e=>{let{chain:t,state:n}=e;if(!(n.selection instanceof o.nh))return!1;let{node:i}=n.selection;if(!(0,v._Y)(i))return!1;let{sourceUrl:a=""}=i.attrs;return t().deleteSelection().insertContentAt(n.selection.from,(0,s.GO)().buttonGroup).updateAttributes("button",{href:a}).focus().run(),!0},updateSurroundingLink:e=>t=>{let{state:n,chain:i,editor:a}=t,{from:r,to:o}=n.selection;return(0,W.uI)(e,a),i().extendMarkRange(B.name).unsetMark(B.name).setMark(B.name,{href:e}).setMeta("preventAutolink",!0).setTextSelection({from:r,to:o}),!0},removeSurroundingLink:()=>e=>{let{state:t,chain:n}=e,{from:i,to:a}=t.selection;return n().extendMarkRange("link").unsetMark("link").setMeta("preventAutolink",!0).setTextSelection({from:i,to:a}).focus(),!0}}},addKeyboardShortcuts(){return{"Mod-k":e=>{let{editor:t}=e,{selection:n}=t.state;return!n.empty&&t.commands.toggleMark(this.name)}}},addProseMirrorPlugins(){var e;let t=(null===(e=this.parent)||void 0===e?void 0:e.call(this))||[];return h.D1||t.push((0,m.f)(this,H)),t.push(w(this.editor)),t}}).configure({HTMLAttributes:{target:void 0,rel:"noopener noreferrer",class:"link"},validate:W.KB,protocols:b.r,linkOnPaste:!1})},61128:(e,t,n)=>{"use strict";n.d(t,{r:()=>i});let i=["tel","mailto"]},50201:(e,t,n)=>{"use strict";n.d(t,{T:()=>o});var i=n(83479),a=n(95580),r=n(38678);let o=(e,t,n)=>{if(!n)return;let o=(0,a.MY)(e,100);o&&(0,i.g5)({data:{fromPos:o.pos,fromPct:o.pct},emitChange:!1}),(0,r.o)({cardId:n,method:"push",data:{fromPos:null,fromPct:null}})}},67408:(e,t,n)=>{"use strict";n.d(t,{E0:()=>s,KB:()=>o,hc:()=>d,uI:()=>l});var i=n(66712),a=n(438),r=n(61128);let o=e=>!!e.includes("://"),l=(e,t)=>{d(e)||(0,i.Yq)(e,n=>{let{doc:i,schema:r,tr:o}=t.state;(0,a.Zo)(i,t.schema.marks.link).forEach(t=>{let{node:i,pos:a}=t,l=i.marks.find(t=>"link"===t.type.name&&t.attrs.href==e);l&&o.removeMark(a,a+i.nodeSize,l).addMark(a,a+i.nodeSize,r.marks.link.create({...l.attrs,...n}))}),t.view.dispatch(o)}).catch(e=>{console.error("[Link.fetchUrlThenUpdateMarks]",e)})},s=e=>e.attrs.source||e.attrs.meta||e.attrs.embed,d=e=>{if(!e)return!1;let t=e&&e.toLowerCase();for(let e of r.r)if(t.startsWith(e+":"))return!0;return!1}},90397:(e,t,n)=>{"use strict";n.d(t,{z:()=>h,J:()=>m});var i=n(13236);n(7496);var a=n(80096),r=n(81570),o=n(35002);let l=i.bP.create({name:"math_display",group:"block math",content:"text*",atom:!0,code:!0,renderHTML(e){let{HTMLAttributes:t}=e;return["math-display",(0,i.KV)(t,{class:"math-node"}),0]},parseHTML:()=>[{tag:"math-display"}]});var s=n(44916);let d=i.bP.create({name:"math_inline",group:"inline math",content:"text*",inline:!0,atom:!0,renderHTML(e){let{HTMLAttributes:t}=e;return["math-inline",(0,i.KV)(t,{class:"math-node"}),0]},parseHTML:()=>[{tag:"math-inline"}],addCommands(){return{insertMathInline:()=>e=>{let{state:t,dispatch:n,view:i}=e;return(0,s.CH)(this.type," ")(t,n,i)},convertToMathInline:()=>e=>{let{state:t,chain:n}=e,i=t.doc.textBetween(t.selection.from,t.selection.to);return n().insertContent({type:"math_inline",content:[{type:"text",text:i}]}).run(),!0}}}}),c=/\$([^ $]+)\$[ ]$/,u=/^\${2}\s+$/,p=/^\${2}(.+)\${2}$/,h=i.YY.create({name:"math",addExtensions:()=>[d,l],addProseMirrorPlugins(){let e=o.of.get("math")?[new r.k_({props:{clipboardTextSerializer:e=>s.ju.serializeSlice(e)}}),(0,a.sM)({rules:[(0,s.sV)(u,this.editor.schema.nodes.math_display),(0,s.sV)(p,this.editor.schema.nodes.math_display),(0,s.C1)(c,this.editor.schema.nodes.math_inline)]})]:[];return[(0,s.CO)({undo:()=>this.editor.commands.undo(),redo:()=>this.editor.commands.redo()})].concat(e)}}),m=e=>"math_display"===e.type.name||"math_inline"===e.type.name},44916:(e,t,n)=>{"use strict";let i;n.d(t,{CH:()=>S,sV:()=>j,C1:()=>w,o6:()=>v,CO:()=>h,ju:()=>z});var a=n(81570),r=n(73686),o=n(11329),l=n(84396),s=n(25715);function d(e,t,n){let i=!(arguments.length>3)||void 0===arguments[3]||arguments[3];return(r,o)=>{let l=e.state,{to:s,from:d}=l.selection,{to:c,from:u}=r.selection;if(i&&c!==u)return!1;let p=t>0?c:u;if(n){let e=r.doc.nodeSize-2;if(t>0&&p<e||t<0&&p>0)return!1}return o&&(e.dispatch(l.tr.setSelection(a.U3.create(l.doc,t>0?s:d))),e.focus()),!0}}class c{destroy(){this.closeEditor(!1),this._mathRenderElt&&(this._mathRenderElt.remove(),delete this._mathRenderElt),this._mathSrcElt&&(this._mathSrcElt.remove(),delete this._mathSrcElt),this.dom.remove()}ensureFocus(){this._innerView&&this._outerView.hasFocus()&&this._innerView.focus()}update(e,t){if(!e.sameMarkup(this._node))return!1;if(this._node=e,this._innerView){let t=this._innerView.state,n=e.content.findDiffStart(t.doc.content);if(null!=n){let i=e.content.findDiffEnd(t.doc.content);if(i){let{a:a,b:r}=i,o=n-Math.min(a,r);o>0&&(a+=o,r+=o),this._innerView.dispatch(t.tr.replace(n,r,e.slice(n,a)).setMeta("fromOutside",!0))}}}return this._isEditing||this.renderMath(),!0}updateCursorPos(e){let t=this._getPos(),n=this._node.nodeSize;e.selection.from<t+n&&t<e.selection.to||(this.cursorSide=t<e.selection.from?"end":"start")}selectNode(){this._outerView.editable&&(this.dom.classList.add("ProseMirror-selectednode"),this._isEditing||this.openEditor())}deselectNode(){this.dom.classList.remove("ProseMirror-selectednode"),this._isEditing&&this.closeEditor()}stopEvent(e){return void 0!==this._innerView&&void 0!==e.target&&this._innerView.dom.contains(e.target)}ignoreMutation(){return!0}renderMath(){if(!this._mathRenderElt)return;let e=this._node.content.content,t="";if(e.length>0&&null!==e[0].textContent&&(t=e[0].textContent.trim()),t.length<1){for(this.dom.classList.add("empty-math");this._mathRenderElt.firstChild;)this._mathRenderElt.firstChild.remove();return}if(this.dom.classList.remove("empty-math"),!i){this._mathRenderElt.textContent=t;return}try{i.render(t,this._mathRenderElt,this._katexOptions),this._mathRenderElt.classList.remove("parse-error"),this.dom.setAttribute("title","")}catch(e){if(e instanceof Error)console.error(e),this._mathRenderElt.classList.add("parse-error"),this.dom.setAttribute("title",e.toString());else throw e}}dispatchInner(e){if(!this._innerView)return;let{state:t,transactions:n}=this._innerView.state.applyTransaction(e);if(this._innerView.updateState(t),!e.getMeta("fromOutside")){let e=this._outerView.state.tr,t=o.Lm.offset(this._getPos()+1);for(let i=0;i<n.length;i++){let a=n[i].steps;for(let n=0;n<a.length;n++){let i=a[n].map(t);if(!i)throw Error("step discarded!");e.step(i)}}e.docChanged&&this._outerView.dispatch(e)}}openEditor(){var e;this._innerView&&this.closeEditor(!1),this._innerView=new r.Lz(this._mathSrcElt,{state:a.$t.create({doc:this._node,plugins:[(0,l.w)({Tab:(e,t)=>(t&&t(e.tr.insertText("	")),!0),Backspace:(0,s.st)(s.ic,(e,t,n)=>!!e.selection.empty&&!(this._node.textContent.length>0)&&(this._outerView.dispatch(this._outerView.state.tr.insertText("")),this._outerView.focus(),!0)),"Ctrl-Backspace":(e,t,n)=>(this._outerView.dispatch(this._outerView.state.tr.insertText("")),this._outerView.focus(),!0),Enter:(0,s.st)(s.pC,d(this._outerView,1,!1)),"Ctrl-Enter":d(this._outerView,1,!1),ArrowLeft:d(this._outerView,-1,!0),ArrowRight:d(this._outerView,1,!0),ArrowUp:d(this._outerView,-1,!0),ArrowDown:d(this._outerView,1,!0),"Mod-z":this._options.undo,"Shift-Mod-z":this._options.redo})]}),dispatchTransaction:this.dispatchInner.bind(this)});let t=this._innerView.state;this._innerView.focus();let n=null===(e=this._mathPluginKey.getState(this._outerView.state))||void 0===e?void 0:e.prevCursorPos;null==n&&console.error("[prosemirror-math] Error:  Unable to fetch math plugin state from key.");let i=(null!=n?n:0)<=this._getPos()?0:this._node.nodeSize-2;this._innerView.dispatch(t.tr.setSelection(a.U3.create(t.doc,i))),this._isEditing=!0}closeEditor(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];this._innerView&&(this._innerView.destroy(),this._innerView=void 0),e&&this.renderMath(),this._isEditing=!1}constructor(e,t,a,r={},o,l){n.e(4852).then(n.bind(n,9263)).then(e=>{i=e.default,this.renderMath()}),this._node=e,this._outerView=t,this._getPos=a,this._onDestroy=l&&l.bind(this),this._mathPluginKey=o,this.cursorSide="start",this._isEditing=!1,this._options=r,this._katexOptions=Object.assign({globalGroup:!0,throwOnError:!1},r.katexOptions),this._tagName=r.tagName||this._node.type.name.replace("_","-"),this.dom=document.createElement(this._tagName),this.dom.classList.add("math-node"),this._mathRenderElt=document.createElement("span"),this._mathRenderElt.textContent="",this._mathRenderElt.classList.add("math-render"),this.dom.appendChild(this._mathRenderElt),this._mathSrcElt=document.createElement("span"),this._mathSrcElt.classList.add("math-src"),this.dom.appendChild(this._mathSrcElt),this.dom.addEventListener("click",()=>this.ensureFocus()),this.renderMath()}}let u=new a.hs("prosemirror-math");function p(e,t){return(n,i,a)=>{let r=u.getState(i.state);if(!r)throw Error("no math plugin!");let o=r.activeNodeViews,l=new c(n,i,a,{katexOptions:{displayMode:e,macros:r.macros},...t},u,()=>{o.splice(o.indexOf(l))});return o.push(l),l}}let h=e=>new a.k_({key:u,state:{init:(e,t)=>({macros:{},activeNodeViews:[],prevCursorPos:0}),apply:(e,t,n,i)=>({activeNodeViews:t.activeNodeViews,macros:t.macros,prevCursorPos:n.selection.from})},props:{nodeViews:{math_inline:p(!1,e),math_display:p(!0,e)}}});var m=n(69e3);function g(e){var t;let n=e.querySelector("img.mwe-math-fallback-image-inline[alt]");return null!==(t=null==n?void 0:n.getAttribute("alt"))&&void 0!==t&&t}function x(e){var t;let n=e.querySelector("math[alttext]");return null!==(t=null==n?void 0:n.getAttribute("alttext"))&&void 0!==t&&t}function f(e){var t;let n=e.querySelector("math annotation[encoding='application/x-tex'");return null!==(t=null==n?void 0:n.textContent)&&void 0!==t&&t}let v=(()=>["p",0],(e,t)=>{let{$from:n}=e.selection,i=n.nodeBefore;if(!i)return!1;if("math_inline"==i.type.name){let i=n.index(n.depth),r=e.doc.resolve(n.posAtIndex(i-1));return t&&t(e.tr.setSelection(new a.nh(r))),!0}return i.type.name,!1});var b=n(80096);let y=/\$(.+)\$/;function w(e,t,n){return new b.fV(e,(e,i,a,r)=>{let o=e.doc.resolve(a),l=o.index(),s=e.doc.resolve(r),d=n instanceof Function?n(i):n;if(!o.parent.canReplaceWith(l,s.index(),t))return null;let c=[t.create(d,t.schema.text(i[1]))];return i[0].endsWith(" ")&&" "!==e.doc.textBetween(r,r+1)&&c.push(t.schema.text(" ")),e.tr.replaceWith(a,r,c)})}function j(e,t,n){return new b.fV(e,(e,i,r,o)=>{let l=e.doc.resolve(r),s=n instanceof Function?n(i):n;if(!l.node(-1).canReplaceWith(l.index(-1),l.indexAfter(-1),t))return null;let d=e.tr.delete(r,o).setBlockType(r,r,t,s);return i[1]&&d.insertText(i[1],r,r),d.setSelection(a.nh.create(d.doc,d.mapping.map(l.pos-1)))})}(()=>{try{return RegExp("(?<!\\\\)\\$(.+)(?<!\\\\)\\$")}catch(e){return y}})();let k=e=>{let{from:t,to:n}=e.selection,i=e.selection.content().content,a=[];return i.descendants((e,n,i)=>"text"!=e.type.name&&(!e.type.name.startsWith("math_")||(a.push({start:Math.max(t+n-1,0),end:t+n+e.nodeSize-1}),!1))),r.zF.create(e.doc,a.map(e=>{let{start:t,end:n}=e;return r.NZ.node(t,n,{class:"math-select"})}))},C=new a.k_({state:{init:(e,t)=>k(t),apply:(e,t)=>e.selection&&e.selectionSet?k(e):t},props:{decorations:e=>C.getState(e)}});function S(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(n,i){let{$from:r}=n.selection,o=r.index();if(!r.parent.canReplaceWith(o,o,e))return!1;if(i){let o=e.create({},t?n.schema.text(t):null),l=n.tr.replaceSelectionWith(o);i(l=l.setSelection(a.nh.create(l.doc,r.pos)))}return!0}}class A{serializeFragment(e){let t;let n="",i=!0,a=e.size;return e.nodesBetween(0,a,(e,r)=>{let o=this.serializeNode(e);if(null!==o)return n+=o,!1;if(e.isText){var l;n+=(null===(l=e.text)||void 0===l?void 0:l.slice(Math.max(0,r)-r,a-r))||"",i=!1}else e.isLeaf&&t?(n+=t,i=!1):!i&&e.isBlock&&(n+="\n\n",i=!0)},0),n}serializeSlice(e){return this.serializeFragment(e.content)}serializeNode(e){let t=this.nodes[e.type.name];return void 0!==t?t(e):null}constructor(e,t){this.nodes={...null==t?void 0:t.nodes,...e.nodes},this.marks={...null==t?void 0:t.marks,...e.marks}}}let z=new A({nodes:{math_inline:e=>"$".concat(e.textContent,"$"),math_display:e=>"\n\n$$\n".concat(e.textContent,"\n$$")}})},27838:(e,t,n)=>{"use strict";n.d(t,{BF:()=>H,lw:()=>er,M9:()=>es});var i=n(31085),a=n(61778),r=n(26848),o=n(20501),l=n(3040),s=n(9104),d=n(95640),c=n(13236),u=n(14041),p=n(22844),h=n(64225),m=n(82257),g=n(80532),x=n(24221);let f={card:o.vti,doc:o.vGi,user:o.Hzw},v=e=>{let{type:t}=e,n=f[t];return(0,i.jsx)(g.az,{as:"span",display:"inline-flex",className:"mention",minW:"5em",opacity:"0.6",borderRadius:"sm",color:"gray.800",children:(0,i.jsx)(g.az,{display:"inline-flex",py:"0.125em",children:(0,i.jsx)(x.g,{icon:n,style:{marginLeft:"0.5em",alignSelf:"center"}})})})};var b=n(50201),y=n(58599),w=n(5933),j=n(30503),k=n(92405),C=n(43873),S=n(71837),A=n(29362);let z=e=>{let{filterFn:t,getAttributesFn:n}=e;return e=>(function(e){let{type:t}=e;if(!t.isInline)throw Error("[nodePasteRule] This paste rule was only designed to consider inline nodes.");return new c._n({find:e.find,handler:t=>{let{state:n,range:i,match:a}=t,{tr:r}=n,o=i.from,l=i.to,s=(0,c.gk)(e.getAttributes,void 0,a)||{};r.replaceWith(o,l,e.type.create(s))}})})({find:e=>{let n=[...e.matchAll(k.D_)];return n?n.map(e=>{var t;return{index:null!==(t=e.index)&&void 0!==t?t:-1,text:e[0],match:e}}).filter(e=>{let n=(0,k.TY)(e.text),{cardId:i}=(0,k.$9)(e.text);return t(n,i,e)}):[]},type:e,getAttributes:e=>{let t=(0,k.TY)(e[0]),{cardId:i}=(0,k.$9)(e[0]);return n({match:e,docId:t,cardId:i})}})};var I=n(62313),R=n(3706),E=n(43342),L=n(34747),_=n.n(L),M=n(73893);let N={borderRadius:"md",padding:"0.05em 0.1em",display:"inline",color:"gray.800"},T=(0,u.forwardRef)((e,t)=>{let{mentionLabel:n,mentionIcon:r,mentionTargetUrl:o,onClick:l,hasError:s=!1,isSimpleLinkVersion:d=!1,...c}=e,u=d?_():"span";return(0,i.jsxs)(g.az,{ref:t,position:"relative","data-selection-ring":!0,className:"mention",onClick:l,...N,color:s?"gray.600":N.color,...c,as:u,href:d?o:void 0,cursor:(l||d)&&!s?"pointer":"default",children:[(0,i.jsxs)(I.z,{display:"inline-flex",spacing:0,children:[r&&(0,i.jsx)(g.az,{display:"inline-block",textAlign:"center",minWidth:4,children:(0,i.jsx)(x.g,{icon:r,fixedWidth:!0,size:"sm",style:{marginInlineStart:"0.1em",marginInlineEnd:"0.3em"}})}),(0,i.jsx)(a.E,{noOfLines:1,whiteSpace:"normal",wordBreak:"break-all",flex:1,lineHeight:"normal",children:n})]}),M.$.GAMMA_PUPPETEER_SERVICE&&o&&(0,i.jsx)(R.N,{href:o,h:"100%",w:"100%",position:"absolute",zIndex:"-10","data-pdf-link":!0,top:"0",left:"0"})]})});T.displayName="MentionTag";let P=()=>(0,i.jsx)(g.az,{as:"span",className:"mention",...N,children:(0,i.jsx)(E.y,{size:"xs",opacity:"0.8",margin:"0 0.1em"})}),O="Untitled",D=e=>{let{node:t,editor:n}=e,{id:c,docId:g}=t.attrs,x=(0,h.GV)((0,p.F1)(c)),f=(0,h.GV)(w.bO).includes(c),v=(0,h.GV)(w.nD);(0,u.useEffect)(()=>{n.storage[H.name][c]=x},[x,n.storage,c]);let C=(0,u.useCallback)(e=>{(0,b.T)(n,e,c)},[n,c]),S=(0,m.oR)(),A=(0,u.useMemo)(()=>{let e=(0,k.Io)({cardId:c,docId:g||n.gammaDocId});return S?(0,j.M7)({url:e}):e},[c,g,n,S]);return(0,i.jsx)(y.VR,{as:"span",children:f?(0,i.jsx)(T,{"data-testid":"card-mention",onClick:v?void 0:C,onDoubleClick:v?C:void 0,mentionLabel:x||O,mentionIcon:o.vti,mentionTargetUrl:A}):(0,i.jsx)(s.Tz,{label:(0,i.jsx)(a.E,{children:(0,i.jsx)(d.x6,{id:"HAIPtO",components:{0:(0,i.jsx)(r.u,{fontSize:"sm",color:"blackAlpha.800"})}})}),children:(0,i.jsx)(T,{"data-testid":"card-mention",hasError:!0,mentionLabel:"Cannot find referenced card",mentionIcon:l.AEl})})})},F=e=>(0,i.jsx)(y.VR,{as:"span",children:(0,i.jsx)(v,{type:"card"})}),H=c.bP.create({name:"cardMention",addStorage:()=>({}),addOptions:()=>({HTMLAttributes:{},suggestion:{char:S.A}}),priority:C.y.CardMention,group:"inline",inline:!0,selectable:!0,atom:!0,addAttributes:()=>({id:{default:null},docId:{default:null},mentionedById:{default:null}}),addPasteRules(){return[z({filterFn:(e,t)=>e===this.editor.gammaDocId&&!!t,getAttributesFn:e=>{let{docId:t,cardId:n}=e;return{id:n,docId:t}}})(this.type)]},addCommands(){return{addCardMention:(e,t)=>{let{id:n,docId:i,mentionedById:a}=e;return e=>{var r;let{state:o,chain:l}=e,s=o.selection.$to.nodeAfter;return(null==s?void 0:null===(r=s.text)||void 0===r?void 0:r.startsWith(" "))&&(t.to+=1),l().focus().insertContentAt(t,[{type:this.name,attrs:{id:n,docId:i,mentionedById:a}},{type:"text",text:" "}]).run(),!0}}}},parseHTML(){return[{tag:'a[data-type="'.concat(this.name,'"]'),priority:51}]},renderHTML(e){let{HTMLAttributes:t,node:n}=e,{id:i,docId:a}=n.attrs,r=this.storage[i]||O;return["a",(0,c.KV)({"data-type":this.name,href:(0,k.Io)({docId:a,cardId:i})},this.options.HTMLAttributes,t),r]},renderText(e){let{node:t}=e,{id:n,docId:i}=t.attrs,a=this.storage[n]||O,r=(0,k.Io)({docId:i,cardId:n});return"[".concat(a,"](").concat(r,")")},addNodeView(){return this.editor.isThumbnail?(0,y.gu)(F,{update:A.z0}):(0,y.gu)(D,{update:A.z0})}});var W=n(39286);let B="docMention";var V=n(40173),G=n(12327),U=n(60674),K=n(56480),q=n(46210),J=n(50877),$=n(35002),Y=n(14979),Q=n(747),X=n(57882),Z=n(92667);let ee=()=>G.Ru._({id:"NJnubC",values:{GAMMA_ARTIFACT_PROPER_NOUN:W.TP}}),et=(0,U.P)(g.az),en=e=>{var t,n;let{node:a,editor:r}=e,{id:l}=a.attrs,c=(0,$.u)("screenshotsEnabled"),p=(0,m.oR)(),{user:h}=(0,X.ur)(),[g]=(0,J.D7K)(),x=(0,Z.En)(),{data:f,error:v,loading:b,subscribeToMore:w}=(0,J.AZr)({variables:{id:l},skip:p||!l}),j=!!(!p&&h);(0,u.useEffect)(()=>{if(j)return w({document:J.Tyz,variables:{id:l},updateQuery:(e,t)=>{let{subscriptionData:n}=t;return n.data&&n.data.doc?{doc:{...e.doc,...n.data.doc,__typename:"Doc"}}:e}})},[l,v,w,j]);let{title:C,createdTime:S,createdBy:A,editedTime:z,editors:I,docUser:R}=(null==f?void 0:f.doc)||{},{linkUrl:E,handleClick:L}=(0,Q.c)({url:(0,k.LN)({docId:l,docTitle:C,absolute:!0}),nonPublishedUrl:(0,k.LN)({docId:l,docTitle:C})});(0,u.useEffect)(()=>{r.storage[B][l]=v?ee():C},[C,r.storage,l,v]);let _={src:c?null==f?void 0:null===(n=f.doc)||void 0===n?void 0:null===(t=n.titleCard)||void 0===t?void 0:t.previewUrl:q.A.src,fallbackSrc:q.A.src},M=e=>()=>{if(!h)return;let t={input:{docId:l,userId:h.id,favorited:e}};g({variables:t,update:(e,t)=>{let{data:n}=t;e.writeFragment({id:"Doc:".concat(l),fragment:J.pfv,data:{docUser:null==n?void 0:n.updateDocUser}})},optimisticResponse:{updateDocUser:{...R,favorited:t.input.favorited,__typename:"DocUser"}}})},{popperRef:N,referenceRef:O,isHovering:D,onMouseOver:F,onMouseOut:H,getPopperProps:G}=(0,Z.bf)();return(0,i.jsxs)(y.VR,{as:"span",children:[b?(0,i.jsx)(P,{}):v?(0,i.jsx)(s.Tz,{label:(0,i.jsx)(d.x6,{id:"MnhVwn",values:{GAMMA_ARTIFACT_PROPER_NOUN:W.TP}}),children:(0,i.jsx)(T,{hasError:!0,mentionLabel:ee(),mentionIcon:o.DW4})}):E?(0,i.jsx)(T,{onMouseOver:p?void 0:F,onMouseOut:p?void 0:H,onClick:L,ref:O,isSimpleLinkVersion:p,mentionLabel:C||"",mentionIcon:o.vGi,mentionTargetUrl:E}):null,(0,i.jsx)(V.Z,{children:!v&&D&&f&&f.doc&&!p&&(0,i.jsx)(et,{width:"320px","data-target-name":"doc-mention-popup",border:"1px solid",borderColor:"gray.200",borderRadius:"lg",overflow:"hidden",shadow:"lg",maxW:"80vw",zIndex:"tooltip",ref:N,onMouseOver:F,onMouseOut:H,...G(),...Z._w,children:(0,i.jsx)(K.Dg,{createdByYou:(null==A?void 0:A.id)===(null==h?void 0:h.id),title:C||"",timestampDescription:x?(0,i.jsx)(d.x6,{id:"yxz5Og",values:{0:(0,Y.Bo)(z)}}):"---",NextLink:null,href:E,onClick:L,id:l,createdByName:(null==A?void 0:A.displayName)||"",createdByEmail:(null==A?void 0:A.email)||"",createdByProfileImageUrl:(null==A?void 0:A.profileImageUrl)||"",createdTime:S,thumbnailImageUrl:_,editors:I,isFavorited:!!(null==R?void 0:R.favorited),onFavorite:M(new Date),onUnfavorite:M(null),menuEnabled:!1,openInNewWindow:!0})})})]})},ei=e=>(0,i.jsx)(y.VR,{as:"span",children:(0,i.jsx)(v,{type:"doc"})}),ea="Unknown ".concat(W.TP),er=c.bP.create({name:B,addStorage:()=>({}),addOptions:()=>({HTMLAttributes:{},suggestion:{char:S.A}}),priority:C.y.DocMention,group:"inline",inline:!0,selectable:!0,atom:!0,addAttributes:()=>({id:{default:null},mentionedById:{default:null}}),addPasteRules(){return[z({filterFn:(e,t)=>e!==this.editor.gammaDocId||!t,getAttributesFn:e=>{let{docId:t}=e;return{id:t}}})(this.type)]},addCommands(){return{addDocMention:(e,t)=>{let{id:n,mentionedById:i}=e;return e=>{var a;let{state:r,chain:o}=e,l=r.selection.$to.nodeAfter;return(null==l?void 0:null===(a=l.text)||void 0===a?void 0:a.startsWith(" "))&&(t.to+=1),o().focus().insertContentAt(t,[{type:this.name,attrs:{id:n,mentionedById:i}},{type:"text",text:" "}]).run(),!0}}}},parseHTML(){return[{tag:'a[data-type="'.concat(this.name,'"]'),priority:51}]},renderHTML(e){let{HTMLAttributes:t,node:n}=e,i=this.storage[n.attrs.id]||ea;return["a",(0,c.KV)({"data-type":this.name,href:(0,k.LN)({docId:n.attrs.id,absolute:!0})},this.options.HTMLAttributes,t),i]},renderText(e){let{node:t}=e,n=this.storage[t.attrs.id]||ea,i=(0,k.LN)({docId:t.attrs.id,absolute:!0});return"[".concat(n,"](").concat(i,")")},addNodeView(){return this.editor.isThumbnail?(0,y.gu)(ei,{update:A.z0}):(0,y.gu)(en,{update:A.z0})}}),eo=e=>{let{node:t}=e,{label:n}=t.attrs;return(0,i.jsx)(y.VR,{as:"span",children:(0,i.jsx)(T,{mentionLabel:"@".concat(n)})})},el=e=>(0,i.jsx)(y.VR,{as:"span",children:(0,i.jsx)(v,{type:"user"})}),es=c.bP.create({name:"mention",addOptions:()=>({HTMLAttributes:{},renderLabel(e){var t;let{options:n,node:i}=e;return"".concat(n.suggestion.char).concat(null!==(t=i.attrs.label)&&void 0!==t?t:i.attrs.id)},suggestion:{char:S.A}}),priority:C.y.UserMention,group:"inline",inline:!0,selectable:!0,atom:!0,addAttributes:()=>({id:{default:null,parseHTML:e=>e.getAttribute("data-id"),renderHTML:e=>e.id?{"data-id":e.id}:{}},label:{default:null,parseHTML:e=>e.getAttribute("data-label"),renderHTML:e=>e.label?{"data-label":e.label}:{}},profileImageUrl:{default:null,parseHTML:e=>e.getAttribute("data-profile-image-url"),renderHTML:e=>e.profileImageUrl?{"data-profile-image-url":e.profileImageUrl}:{}},mentionedById:{default:null,parseHTML:e=>e.getAttribute("data-mentioned-by-id"),renderHTML:e=>e.mentionedById?{"data-mentioned-by-id":e.mentionedById}:{}}}),addCommands(){return{addUserMention:(e,t)=>{let{id:n,label:i,profileImageUrl:a,mentionedById:r}=e;return e=>{var o;let{state:l,chain:s}=e,d=l.selection.$to.nodeAfter;return(null==d?void 0:null===(o=d.text)||void 0===o?void 0:o.startsWith(" "))&&(t.to+=1),s().focus().insertContentAt(t,[{type:this.name,attrs:{id:n,label:i,profileImageUrl:a,mentionedById:r}},{type:"text",text:" "}]).run(),!0}}}},parseHTML(){return[{tag:'span[data-type="'.concat(this.name,'"]')}]},renderHTML(e){let{node:t,HTMLAttributes:n}=e;return["span",(0,c.KV)({"data-type":this.name},this.options.HTMLAttributes,n),this.options.renderLabel({options:this.options,node:t})]},renderText(e){let{node:t}=e;return this.options.renderLabel({options:this.options,node:t})},addNodeView(){return this.editor.isThumbnail?(0,y.gu)(el,{update:A.z0}):(0,y.gu)(eo,{update:A.z0})}})},71837:(e,t,n)=>{"use strict";n.d(t,{A:()=>G,c:()=>U});var i=n(81570),a=n(31085),r=n(61778),o=n(62313),l=n(48574),s=n(25420),d=n(43342),c=n(20501),u=n(3040),p=n(24221),h=n(9104),m=n(95640),g=n(89897),x=n.n(g),f=n(56005),v=n.n(f),b=n(14041),y=n(50877),w=n(22844),j=n(39286),k=n(62911),C=n(64225),S=n(89059),A=n(38234),z=n(57882),I=n(59707),R=n(5933),E=n(91559);let L=(e,t,n)=>RegExp(t?e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"):e,n?"gu":"gui"),_=()=>(0,a.jsx)(m.x6,{id:"eZHH8X",values:{GAMMA_ARTIFACT_PROPER_NOUN:j.TP}}),M=e=>{let{html:t}=e;return(0,a.jsx)(r.E,{paddingInlineStart:"0.2rem",wordBreak:"break-word",noOfLines:1,maxW:300,lineHeight:"1.5",dangerouslySetInnerHTML:{__html:t?x().sanitize(t):""}})},N=e=>e.replace(/(<em>|<\/em>)/g,""),T=e=>{let{result:t}=e,{__typename:n}=t;return"User"===n?(0,a.jsxs)(o.z,{children:[(0,a.jsx)(l.e,{size:"2xs",minWidth:4,m:0,name:t.displayName&&N(t.displayName),src:t.profileImageUrl}),(0,a.jsx)(M,{html:t.displayName})]}):"Card"===n?(0,a.jsxs)(o.z,{children:[(0,a.jsx)(s.s,{color:"gray.600",minWidth:4,justifyContent:"flex-end",children:(0,a.jsx)(p.g,{icon:u.ZPt,transform:{size:6}})}),(0,a.jsx)(M,{html:t.title})]}):"DocResult"===n?(0,a.jsx)(S.xT,{result:t,context:"mentionsList"}):(console.warn("[MentionList] Invalid __typename for search result:",t.__typename),null)},P=(0,b.forwardRef)((e,t)=>{let{result:n,index:i,selectedIndex:r,selectItem:o,...l}=e;return(0,a.jsx)(h.nh,{ref:t,tabIndex:i===r?0:-1,onClick:()=>o(i),onMouseDown:I.Fw,...l,children:(0,a.jsx)(T,{result:n})},i)}),O=(0,a.jsx)(p.g,{icon:c.vti}),D=(0,a.jsx)(p.g,{icon:c.vGi}),F=(0,a.jsx)(p.g,{icon:c.hP6}),H={Card:{title:(0,a.jsx)(m.x6,{id:"gXnPmp",values:{GAMMA_ARTIFACT_PROPER_NOUN:j.TP}}),iconComponent:O},DocResult:{title:v()(j.Ix),iconComponent:D},User:{title:(0,a.jsx)(m.x6,{id:"1wdjme"}),iconComponent:F}},W=(0,b.forwardRef)((e,t)=>{var n,i,l;let{editor:c,query:u,command:p}=e,{isConnected:g}=(0,y.utY)(),x=(0,C.GV)(R.Jo),f=(0,b.useMemo)(()=>{let e=null==x?void 0:x.collaborators;return(null==e?void 0:e.map(e=>e.user))||[]},[x]),{user:v,currentWorkspace:j}=(0,z.ur)(),{data:S,previousData:I,loading:M}=function(e,t){let{isConnected:n}=(0,E.u)(),i=!e||!t||!n;return function(e){function t(e,t,n){n&&(e[t]||(e[t]={search:[]}),e[t].search=[...e[t].search,...n.search])}return e.reduce((e,n)=>{let{data:i,previousData:a,error:r,loading:o}=n;return!i&&o&&a&&(i=a),t(e,"data",i),t(e,"previousData",a),o&&(e.loading=!0),r&&(e.error=r),e},{})}([(0,y.SzF)({variables:{workspaceId:t,types:[y.nXf.User],query:e},skip:i}),(0,y.SzF)({variables:{workspaceId:t,types:[y.nXf.Doc],query:e},skip:i})])}(u,(null==v?void 0:null===(l=v.workspaceMemberships)||void 0===l?void 0:null===(i=l.find(e=>{var t;return(null===(t=e.workspace)||void 0===t?void 0:t.id)===c.gammaOrgId}))||void 0===i?void 0:null===(n=i.workspace)||void 0===n?void 0:n.id)||(null==j?void 0:j.id)),{searchDocs:T,searchUsers:O}=(0,b.useMemo)(()=>{let e=L(u,!0,!1),t=(S?S.search:I?I.search:[]).filter(e=>"User"===e.__typename),n=(S?S.search:I?I.search:[]).filter(e=>"DocResult"===e.__typename),i=f.filter(e=>!t.find(t=>t.id===e.id)).filter(e=>{var t,n;return(null===(t=e.email)||void 0===t?void 0:t.startsWith(u.toLowerCase()))||(null===(n=e.displayName)||void 0===n?void 0:n.toLowerCase().includes(u.toLowerCase()))}),a=[...t,...i].map(t=>{var n;return{...t,displayName:null===(n=t.displayName)||void 0===n?void 0:n.replace(e,"<em>$&</em>")}});return{searchDocs:u?[...n]:[],searchUsers:u?a:[]}},[S,I,u,f]),D=(0,C.GV)(w.rZ),F=[...O,...(0,b.useMemo)(()=>{let e=L(u,!0,!1);return u?D.map(t=>{let n=t.title||"";if(n.match(e)){let i=n.replace(e,"<em>$&</em>");return{...t,title:i,__typename:"Card"}}return null}).filter(Boolean):[]},[D,u]),...T],W=e=>{let t=F[e]?{...F[e]}:null;t&&("User"===t.__typename&&t.displayName&&(t.displayName=N(t.displayName)),"Card"===t.__typename&&(t.docId=c.gammaDocId),p({item:t,user:v}))},{selectedIndex:B,selectedItemEl:V}=(0,A.Rj)({ref:t,selectItem:W,options:F}),U=c.state.selection,K=!U.$anchor.parent.isLeaf&&U.$anchor.parent.textContent===G;return 0===u.length&&K?(0,a.jsx)(s.s,{w:"100%",p:1,align:"flex-start",justify:"flex-start",flex:"1",mt:-9,marginStart:3,"data-testid":"mention-list-empty",children:(0,a.jsx)(r.E,{fontSize:"md",color:"gray.400",children:(0,a.jsx)(_,{})})}):(0,a.jsx)(h.qF,{"data-testid":"mention-list",children:(0,a.jsxs)(h.QE,{"data-target-name":"mention-list",w:"540px",maxW:"90vw",overflowY:"auto",maxH:"65vh",sx:{em:{bg:"var(--chakra-colors-trueblue-100)",fontStyle:"normal",borderRadius:"base",display:"inline-block",padding:"0px 2px",margin:"0px -2px"}},children:[(0,a.jsx)(k.r,{isConnected:g,description:(0,a.jsx)(m.x6,{id:"KnLL/m"})}),0===u.length?(0,a.jsx)(s.s,{p:1,align:"center",justify:"center",flex:"1",minH:12,"data-testid":"mention-list-empty",children:(0,a.jsx)(r.E,{fontSize:"md",color:"gray.400",children:(0,a.jsx)(_,{})})}):!M&&u.length>1&&0===F.length?(0,a.jsx)(s.s,{p:1,align:"center",justify:"center",flex:"1",minH:12,children:(0,a.jsx)(r.E,{fontSize:"sm",color:"gray.500",children:(0,a.jsx)(m.x6,{id:"0+jt9a"})})}):null,F.map((e,t)=>{let n=F.findIndex(t=>t.__typename===e.__typename)===t&&e.__typename?H[e.__typename]:null;return(0,a.jsxs)(b.Fragment,{children:[n&&(0,a.jsxs)(o.z,{mt:4,mb:2,color:"gray.500",children:[n.iconComponent,(0,a.jsx)(h._x,{children:n.title})]}),(0,a.jsx)(P,{"data-testid":"mention-list-item-".concat(e.id),ref:t===B?V:null,result:e,index:t,selectedIndex:B,selectItem:W},t)]},e.id)}),M&&(0,a.jsx)(s.s,{p:1,align:"center",justify:"center",flex:"1",minH:12,children:(0,a.jsx)(d.y,{opacity:"0.8",size:"xs"})})]})})});var B=n(43873);let V=new i.hs("MentionGamma"),G="@",U=(0,A.e$)({name:"GammaMention",char:G,pluginKey:V,allowSpaces:!0,MenuComponent:W,priority:B.y.MentionSuggestionMenu,command:e=>{let{editor:t,range:n,props:i}=e,{item:a,user:r}=i;if("User"===a.__typename){let{id:e,displayName:i,profileImageUrl:o}=a,{id:l}=r;t.commands.addUserMention({id:e,label:i,profileImageUrl:o,mentionedById:l},n)}else if("Card"===a.__typename){let{id:e,docId:i}=a,{id:o}=r;t.commands.addCardMention({id:e,docId:i,mentionedById:o},n)}else if("DocResult"===a.__typename){let{id:e}=a,{id:i}=r;t.commands.addDocMention({id:e,mentionedById:i},n)}}})},50881:(e,t,n)=>{"use strict";n.d(t,{f:()=>x});var i=n(13236),a=n(67291),r=n(58599),o=n(30138),l=n(29362),s=n(31085),d=n(92448),c=n(5434),u=n(12554),p=n(74336),h=n(95905),m=n(12408);let g=e=>{let{node:t,decorations:n,editor:i}=e,a=(0,p.v)(n),o=(0,m.Ms)(n),l=(0,h.fZ)(n),{horizontalAlign:g,fontSize:x,placeholder:f}=t.attrs,v=(0,h.yp)(g),b="left"===g&&"ltr"===l||"right"===g&&"rtl"===l,y=o&&a&&(!g||b)&&!(0,u.NO)(i)&&!f;return(0,s.jsxs)(c.u,{...e,style:{position:"relative"},children:[(0,s.jsx)(r.$p,{dir:l,"data-font-size":x,"data-multiline-placeholder":f,style:{textAlign:v.textAlign}}),y&&(0,s.jsx)(d.B,{...e,dir:l})]})},x=a.A.extend({name:"paragraph",group:"block cardNotesBlock",selectable:!1,addNodeView:()=>(0,r.gu)(g,{update:l.z0}),allowFontSizes:"body",addAttributes:()=>({fontSize:o.mD}),parseHTML:()=>[{tag:"p"}],renderHTML(e){let{HTMLAttributes:t}=e;return["p",(0,i.KV)(t,{class:"paragraph"}),0]},renderHTMLforAI(e){let{HTMLAttributes:t}=e;return["p",t,0]}})},73350:(e,t,n)=>{"use strict";n.d(t,{V:()=>s});var i=n(81570),a=n(92448),r=n(43873),o=n(38234);let l=new i.hs("SlashMenu"),s=(0,o.e$)({name:"slashMenu",char:"/",pluginKey:l,MenuComponent:a.a,priority:r.y.SlashMenu})},97661:(e,t,n)=>{"use strict";n.d(t,{b:()=>o});var i=n(73734),a=n(77256);let r=.85*n(95994).St,o=()=>Object.entries(i.c).map(e=>{let[t,n]=e,{label:i,icon:o,defaultData:l}=n,s={type:"smartDiagram",attrs:{templateKey:t,data:l(),horizontalAlign:"center",width:r}};return{key:"smart-diagram-".concat(t),name:i,nodeName:"smartDiagram",icon:o,featureFlag:"smartDiagrams",execute:e=>{e.chain().focus().insertContentAndSelect(s).run()},dragStartFn:e=>(0,a.fS)(e,s)}})},92257:(e,t,n)=>{"use strict";n.d(t,{o:()=>B});var i=n(13236),a=n(81570),r=n(22574),o=n(58599),l=n(95580),s=n(43873),d=n(94669),c=n(29362),u=n(16397),p=n(63915),h=n(1279),m=n(20265),g=n(93090),x=n(40452),f=n(48365);class v{constructor(e=null){this.dragging=e}}let b=new a.hs("smartLayoutPlugin"),y=e=>new a.k_({key:b,state:{init:()=>new v,apply:(e,t)=>t},props:{decorations:e=>(0,x.r$)(e),handleDOMEvents:{drop(e){var t;let n=null===(t=e.dragging)||void 0===t?void 0:t.annotations,i=b.getState(e.state);if(!i)return!1;i.dragging=n}},handleDrop:(t,n,i)=>{let a=b.getState(t.state),r=null==a?void 0:a.dragging;return a&&(a.dragging=null),!!(j(e,t,n,i)||k(e,t,n,i,r)||w(e,t,n,i))},handlePaste:(t,n,i)=>{let{selection:r}=t.state;if(!(r instanceof a.nh&&(0,p.q)(r.node)))return!1;let o=(0,g.bC)(e,n,i),l=(0,h.H)(i);if(l&&"image"!==l.type.name&&!o)return!1;let s=o?o.attrs:null==l?void 0:l.attrs;return e.commands.updateNestedAttributesAtPos(r.from,{image:s}),o&&o.upload(),!0}}}),w=(e,t,n,i)=>{let a=(0,f.fc)(t,n,i);if(!a)return!1;let r=(0,f.oO)(n),o=null,l=a.image;r&&(l=(o=(0,m.YC)(r,e)).content.attrs);let s=t.state.tr;return s.setNodeAttribute(a.pos,"image",l),null==o||o.upload(),s.deleteSelection(),t.dispatch(s),!0},j=(e,t,n,i)=>{let a=(0,f.TS)(t,n,i);if(!a)return!1;let r=t.state.tr;return r.setNodeAttribute(a.pos,"variantKey",a.variantKey),t.dispatch(r),e.commands.selectNodeAtPos(a.pos),!0},k=(e,t,n,i,a)=>{let r=null;try{if(!(r=(0,f.eL)(t,n,i)))return!1}catch(e){return!1}try{let{selection:n}=t.state,o=!n.empty,{node:l,pos:s,side:d}=r;if(s>n.from&&s<n.to)return!0;let c=i.content.toJSON(),u="left"===d||"top"===d?s:s+l.nodeSize;e.chain().insertContentAt({from:u,to:u},c,{updateSelection:!1}).command(e=>{let{tr:t}=e;return o&&t.deleteSelection(),a&&t.setMeta("annotationEvent",{type:"drop",dragging:a,droppedBlockPos:u+1}),!0}).focusMapped(u,1).run()}catch(e){console.error("(caught) [SmartLayoutPlugin] handleDrop error:",e)}return!0};var C=n(31085),S=n(81313),A=n(12327),z=n(71096),I=n(64225),R=n(41938),E=n(5933),L=n(5434),_=n(91725);n(95905);var M=n(12917),N=n(20501),T=n(95640),P=n(14041),O=n(32899),D=n(16648),F=n(88693);let H=e=>{let{editor:t,node:n,getPos:i}=e,{options:a,variantKey:r}=n.attrs,o=(0,F.B)(r),l=(0,P.useCallback)(e=>{t.commands.updateNestedAttributesAtPos(i(),e)},[t,i]),s=(0,P.useCallback)(e=>{l({variantKey:e})},[l]),d=(0,P.useCallback)(()=>{t.chain().deleteSelectionAndSelectNear().run()},[t]),c=(0,P.useMemo)(()=>o.options.map(e=>{var r,o;if(e.checkEnabled&&!e.checkEnabled(n.attrs))return null;let s=null!==(o=a[e.key])&&void 0!==o?o:null===(r=e.defaultValue)||void 0===r?void 0:r.call(e,{ctx:"menu"});return e.ControlMenu?e.ControlMenu(s,(r,o)=>{l({options:{...a,[e.key]:r}}),o&&n.forEach((n,a)=>{t.commands.updateNestedAttributesAtPos(i()+a+1,{options:{...n.attrs.options,[e.key]:r}})})},e):null}).filter(e=>null!==e),[o.options,n,a,l,t.commands,i]),u=(0,D.d)({editor:t,getPos:i,node:n,includeCut:!1}),p=(0,P.useMemo)(()=>(0,F.a)().map(e=>{let{key:t,name:n,icon:i,disabled:a,featureFlag:o}=e;if(a||o&&!O.of.get(o))return null;let l=r===t;return{key:"".concat(t),label:n(),icon:l?N.e68:i,onClick:()=>s(t)}}).filter(e=>null!==e),[r,s]);return{contextMenuItems:[{key:"title",title:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(T.x6,{id:"kLxOTV"}),"\xa0",o.name()]})},{divider:!0},...u,{divider:!0},...c.length?[...c,{key:"divider",divider:!0}]:[],{key:"switch-layout",label:(0,C.jsx)(T.x6,{id:"FRoFGK"}),icon:M.swh,items:p},{divider:!0},{key:"delete",label:(0,C.jsx)(T.x6,{id:"cnGeoo"}),icon:N.yLS,onClick:d,color:"red.500"}]}},W=e=>{let{node:t,decorations:n,editor:i,getPos:a}=e,r=t.attrs,l=(0,F.B)(r.variantKey),{Wrapper:s}=l,d=(0,x.Rv)(n),c=(0,f.aG)(r,d.direction),u=(0,I.GV)(E.nD),p=(0,I.GV)(E.SJ),{onOpenContextMenu:h,onCloseContextMenu:m,menuProps:g}=(0,R.$)({editor:i,getPos:a}),{contextMenuItems:v}=H({editor:i,node:t,getPos:a});return(0,C.jsxs)(L.u,{...e,dir:d.direction,className:(0,S.cx)(u&&"is-editable"),style:{position:"relative",display:"grid",gridTemplateColumns:"100%"},children:[(0,C.jsx)(s,{...d,onContextMenu:h,options:c,theme:p,variant:l,node:t,children:(0,C.jsx)(o.$p,{"data-node-view-content-outer":"smartLayout"})}),(0,C.jsx)(_.A,{...e,label:A.Ru._({id:"Szg6OU"}),"data-testid":"smart-layout-drag-handle"}),(0,C.jsx)(z.t,{isOpen:g.isOpen,onClose:m,menuItems:v,position:g.position,size:"small"})]})},B=i.bP.create({name:"smartLayout",group:"cardBlock layoutBlock",content:"smartLayoutCell+",isolating:!0,containerHandle:!0,defining:!0,priority:s.y.SmartLayout,addAttributes:()=>({variantKey:{default:void 0},options:{default:{},...(0,l.tb)("options")},fullWidthBlock:{default:!1}}),parseHTML:()=>[{tag:"div[class=smart-layout]"},...Object.values((0,F.a)()).filter(e=>e.htmlTag).map(e=>({tag:e.htmlTag,getAttrs:t=>{let n={variantKey:e.key,options:{...e.defaultOptions}};return e.options.forEach(e=>{let i=t.getAttribute(e.key);if(i){try{n.options[e.key]=JSON.parse(i)}catch(t){n.options[e.key]=i}return}if(e.getDefaultOnParse&&!n.options[e.key]){n.options[e.key]=e.getDefaultOnParse(t);return}}),n}}))],renderHTMLforAI(e){let{node:t}=e,n=(0,F.B)(t.attrs.variantKey),i={};return n.options.forEach(e=>{var n,a;let r=null!==(a=t.attrs.options[e.key])&&void 0!==a?a:null===(n=e.defaultValue)||void 0===n?void 0:n.call(e);i[e.key]=null===r?void 0:"string"==typeof r?r:JSON.stringify(r)}),[n.htmlTag||n.key,i,0]},renderHTML(e){let{HTMLAttributes:t}=e;return["div",(0,i.KV)(t,{class:"smart-layout"}),0]},addNodeView:()=>(0,o.gu)(W,{update:c.z0,ignoreMutation:r.I}),addProseMirrorPlugins(){return[y(this.editor)]},addCommands:()=>({insertSmartLayoutCell:e=>t=>{var n,a;let{chain:r,state:o}=t,l=o.doc.resolve(e),s=(0,i.eL)(l,e=>"smartLayout"===e.type.name),d=null==s?void 0:s.node.lastChild;if(!s||!d)return!1;let c=d.attrs,p=(0,u.Hg)(null===(n=d.firstChild)||void 0===n?void 0:n.attrs.level);return r().insertContentAt(e,{type:"smartLayoutCell",content:p,attrs:{image:{source:null===(a=c.image)||void 0===a?void 0:a.source}}}).selectInsertedNode().run(),!0},handleSmartLayoutDelete:function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return n=>{let{dispatch:r,state:o,tr:l,chain:s}=n;if(!r)return!0;let{selection:c}=o,u=c instanceof a.nh&&(0,p.q)(c.node)?{node:c.node,pos:c.from}:(0,i.KP)(e=>"smartLayoutCell"===e.type.name)(o.selection);if(e&&u&&u.pos!==c.from)return!1;let h=(0,i.KP)(e=>"smartLayout"===e.type.name)(o.selection);if(!u||!h)return!1;if(1==h.node.childCount)s().selectNodeAtPos(h.pos).deleteSelectionAndSelectNear(t?1:-1).run();else{let e=l.doc.resolve(u.pos);(0,d.K)(l,e,t)}return!0}},handleEmphasizeCell:(e,t)=>n=>{let{chain:a,state:r}=n,o=r.doc.resolve(e),l=(0,i.eL)(o,e=>"smartLayout"===e.type.name),s=null==l?void 0:l.pos;return null==l||l.node.forEach((n,i)=>{if(!s)return!1;let r=n.attrs.options,o=s+1+i;return a().updateNestedAttributesAtPos(o,{options:{...r,isEmphasized:o===e&&t}}).run(),!0}),!0}})})},59277:(e,t,n)=>{"use strict";n.d(t,{P3:()=>T,WP:()=>N,Wg:()=>P});var i=n(73758),a=n.n(i),r=n(77256),o=n(16723),l=n(16397),s=n(12327);let d={src:"/_next/static/media/ArrowsHorizontal.ea930d45.svg",height:71,width:253,blurWidth:0,blurHeight:0},c={src:"/_next/static/media/ArrowsVertical.30b6d2dc.svg",height:97,width:253,blurWidth:0,blurHeight:0},u={src:"/_next/static/media/BarStats.845ae3ab.svg",height:76,width:253,blurWidth:0,blurHeight:0},p={src:"/_next/static/media/BigNumbers.519e80ad.svg",height:65,width:253,blurWidth:0,blurHeight:0},h={src:"/_next/static/media/BulletsLg.65fc1814.svg",height:97,width:253,blurWidth:0,blurHeight:0},m={src:"/_next/static/media/BulletsSm.8bb79324.svg",height:96,width:253,blurWidth:0,blurHeight:0},g={src:"/_next/static/media/CircleStats.a3467962.svg",height:83,width:253,blurWidth:0,blurHeight:0},x={src:"/_next/static/media/Funnel.849e6435.svg",height:94,width:253,blurWidth:0,blurHeight:0},f={src:"/_next/static/media/ImagesWithTextIcons.6812fb8b.svg",height:97,width:253,blurWidth:0,blurHeight:0},v={src:"/_next/static/media/ImagesWithTextPhotos.ae7c118b.svg",height:96,width:253,blurWidth:0,blurHeight:0},b={src:"/_next/static/media/ImagesWithTextTeam.9ba0d7de.svg",height:97,width:253,blurWidth:0,blurHeight:0},y={src:"/_next/static/media/Pyramid.88ebb729.svg",height:94,width:253,blurWidth:0,blurHeight:0},w={src:"/_next/static/media/Stairs.4339d0d7.svg",height:94,width:253,blurWidth:0,blurHeight:0},j={src:"/_next/static/media/SteppedPyramid.cf28d9e7.svg",height:94,width:253,blurWidth:0,blurHeight:0},k={src:"/_next/static/media/Steps.ed1f86ac.svg",height:96,width:253,blurWidth:0,blurHeight:0},C={src:"/_next/static/media/TextBoxes3.914e418d.svg",height:97,width:253,blurWidth:0,blurHeight:0},S={src:"/_next/static/media/TextBoxes4.37bf09f8.svg",height:110,width:253,blurWidth:0,blurHeight:0},A={src:"/_next/static/media/TimelineHorizontalNumbered.1a5bc829.svg",height:97,width:253,blurWidth:0,blurHeight:0},z={src:"/_next/static/media/TimelineHorizontalTwoSided.c6c91570.svg",height:97,width:253,blurWidth:0,blurHeight:0},I={src:"/_next/static/media/TimelineVerticalNumbered.237304f0.svg",height:111,width:253,blurWidth:0,blurHeight:0},R={src:"/_next/static/media/TimelineVerticalTwoSided.19e48547.svg",height:151,width:253,blurWidth:0,blurHeight:0},E=()=>[{name:()=>s.Ru._({id:"o6dKT5"}),key:"timelineVerticalTwoSided",keywords:["timeline","vertical","agenda"],previewImage:R,content:{type:"smartLayout",attrs:{variantKey:"timeline",options:{numbered:!1,twoSided:!0,hasLine:!0},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Vision"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Mission"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim "}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Goal"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Sed ut perspiciatis unde omnis iste natus error sit volupta tem accusa ntium eius modi tempora"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Strategy"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Foste natus error sit volupta tem accusa ntium eius modi tempora"}]}]}]}},{name:()=>s.Ru._({id:"o2PvSp"}),key:"timelineVerticalNumbered",keywords:["timeline","vertical","agenda"],previewImage:I,content:{type:"smartLayout",attrs:{variantKey:"timeline",options:{numbered:!0,hasLine:!1,twoSided:!1,orientation:"vertical"},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Vision"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Mission"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim "}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Goal"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Sed ut perspiciatis unde omnis iste natus error sit volupta tem accusa ntium eius modi tempora"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Strategy"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Foste natus error sit volupta tem accusa ntium eius modi tempora"}]}]}]}},{name:()=>s.Ru._({id:"EGQH/j"}),key:"timelineHorizontalTwoSided",keywords:["timeline","horizontal","agenda"],previewImage:z,content:{type:"smartLayout",attrs:{variantKey:"timeline",options:{numbered:!1,hasLine:!0,twoSided:!0,orientation:"horizontal"},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Vision"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur do"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Mission"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Excepteur sint occaecat cupidatat non proident"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Goal"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Sed ut perspiciatis unde omnis iste natus error sit "}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Strategy"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Foste natus error sit volupta tem accusa ntium "}]}]}]}},{name:()=>s.Ru._({id:"tmwL4E"}),key:"timelineHorizontalNumbered",keywords:["timeline","horizontal","agenda"],previewImage:A,content:{type:"smartLayout",attrs:{variantKey:"timeline",options:{numbered:!0,hasLine:!1,twoSided:!1,orientation:"horizontal"},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Vision"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Mission"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim "}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Goal"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Sed ut perspiciatis unde omnis iste natus error sit volupta tem accusa ntium eius modi tempora"}]}]}]}},{name:()=>s.Ru._({id:"OsVXoX"}),key:"bulletsLg",keywords:["agenda","bullets"],previewImage:h,content:{type:"smartLayout",attrs:{variantKey:"bullets",options:{cellSize:20},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Vision"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Mission"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim "}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Goal"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Sed ut perspiciatis unde omnis iste natus error sit volupta tem accusa ntium eius modi tempora"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Strategy"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Foste natus error sit volupta tem accusa ntium eius modi tempora"}]}]}]}},{name:()=>s.Ru._({id:"XY2IHD"}),key:"bulletsSm",previewImage:m,keywords:["agenda","bullets"],content:{type:"smartLayout",attrs:{variantKey:"bullets",options:{cellSize:10},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Vision"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Mission"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim "}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Goal"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Sed ut perspiciatis unde omnis iste natus error sit volupta tem accusa ntium eius modi tempora"}]}]}]}},{name:()=>s.Ru._({id:"7xlpDo"}),key:"textBoxes3",keywords:["squares"],previewImage:C,content:{type:"smartLayout",attrs:{variantKey:"textBoxes",options:{cellSize:10},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Item 1"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident."}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Item 2"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident."}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Item 3"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident."}]}]}]}},{name:()=>s.Ru._({id:"X4kXBV"}),key:"textBoxes4",previewImage:S,keywords:["squares","callouts","matrix","quadrant"],content:{type:"smartLayout",attrs:{variantKey:"textBoxes",options:{cellSize:20},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Vision"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Mission"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim "}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Goal"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Sed ut perspiciatis unde omnis iste natus error sit volupta tem accusa ntium eius modi tempora"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Strategy"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Foste natus error sit volupta tem accusa ntium eius modi tempora"}]}]}]}},{name:()=>s.Ru._({id:"+kQMBP"}),key:"imagesWithTextTeam",previewImage:b,keywords:["team","images","headshot","bio","roles"],content:{type:"smartLayout",attrs:{variantKey:"imagesText",options:{cellSize:10,imageSize:1,horizontalAlign:"center",imageShape:"circle"},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,image:{source:"image.custom",uploadStatus:0,showPlaceholder:!1,src:"https://cdn.gamma.app/zc87vhr30n8uf3n/c1414815be03462f8862cb80f89f720d/optimized/tesla.jpg",meta:{width:820,height:709,date_file_modified:"2023/02/07 22:20:08 GMT",aspect_ratio:1.157,has_clipping_path:!1,frame_count:1,colorspace:"sRGB",has_transparency:!1,average_color:"#828282",orientation:"Horizontal (normal)"},name:"tesla.jpg"},label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Nikola Tesla"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:"default"},content:[{type:"text",marks:[{type:"bold"}],text:"Inventor"},{type:"hardBreak"},{type:"text",text:"@ Tesla Inc. "}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:{source:"image.custom",uploadStatus:0,showPlaceholder:!1,src:"https://cdn.gamma.app/zc87vhr30n8uf3n/53ab692111294834a286002e3ecfdf2b/optimized/marie-curie.jpg",meta:{width:1200,height:1631,date_file_modified:"2023/02/07 22:20:11 GMT",aspect_ratio:.736,has_clipping_path:!1,frame_count:1,colorspace:"sRGB",has_transparency:!1,orientation:"Horizontal (normal)",average_color:"#3b3b3b"},name:"marie-curie.jpg"},label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Marie Curie"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:"default"},content:[{type:"text",marks:[{type:"bold"}],text:"Physicist and Chemist"},{type:"hardBreak"},{type:"text",text:"@ Radioactivity"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:{source:"image.custom",uploadStatus:0,showPlaceholder:!1,src:"https://cdn.gamma.app/zc87vhr30n8uf3n/e5d0250f2e054ee3a4c63a8e11f39c36/optimized/thomas-edison.webp",meta:{width:360,height:450,date_file_modified:"2023/02/07 22:20:22 GMT",aspect_ratio:.8,has_clipping_path:!1,frame_count:1,colorspace:"sRGB",has_transparency:!1,average_color:"#606060",orientation:"Horizontal (normal)"},name:"thomas edison.webp"},label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Thomas Edison"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:"default"},content:[{type:"text",marks:[{type:"bold"}],text:"Inventor "},{type:"hardBreak"},{type:"text",text:"@ Light bulb "}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:{source:"image.custom",uploadStatus:0,showPlaceholder:!1,src:"https://cdn.gamma.app/zc87vhr30n8uf3n/86aa2820df484599b26ab9bbb79737d3/optimized/einstein.jpg",meta:{width:500,height:500,date_file_modified:"2023/02/07 22:20:26 GMT",aspect_ratio:1,has_clipping_path:!1,frame_count:1,colorspace:"sRGB",has_transparency:!1,orientation:"Horizontal (normal)",average_color:"#575757"},name:"einstein.jpg"},label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Albert Einstein"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:"default"},content:[{type:"text",marks:[{type:"bold"}],text:"Theoretical Physicist"},{type:"hardBreak"},{type:"text",text:"@ EMC2 "}]}]}]}},{name:()=>s.Ru._({id:"kX68M5"}),key:"imagesWithTextIcons",previewImage:f,keywords:["icons"],content:{type:"smartLayout",attrs:{variantKey:"iconsText",options:{cellSize:10,shapeSize:"md",horizontalAlign:"center"},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,image:{source:"image.icon",src:"https://cdn.gamma.app/zc87vhr30n8uf3n/e169d76934d642e2999d195fb50cfd88/optimized/mountain.svg",tempUrl:"https://gamma.app/api/icons/mountain.svg?provider=fa&style=light",meta:{height:512,width:512,svgViewBoxWidth:512,svgViewBoxHeight:512,date_file_modified:"2023/02/07 21:46:24 GMT",aspect_ratio:1,has_clipping_path:!1,frame_count:1,average_color:"#cbcbcb"},query:"mountain",providerMeta:{name:"fa",id:"mountain"},uploadStatus:0,showPlaceholder:!1,name:"mountain.svg"},label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Vision"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:{source:"image.icon",src:"https://cdn.gamma.app/zc87vhr30n8uf3n/1f156e4486744695b40e109958afc3fb/optimized/user-astronaut.svg",tempUrl:"https://gamma.app/api/icons/user-astronaut.svg?provider=fa&style=light",meta:{height:512,width:448,svgViewBoxWidth:448,svgViewBoxHeight:512,date_file_modified:"2023/02/07 21:45:45 GMT",aspect_ratio:.875,has_clipping_path:!1,frame_count:1,average_color:"#9c9c9c"},query:"astronaut",providerMeta:{name:"fa",id:"user-astronaut"},uploadStatus:0,showPlaceholder:!1,name:"user-astronaut.svg"},label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Mission"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim "}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:{source:"image.icon",uploadStatus:0,showPlaceholder:!1,tempUrl:"https://gamma.app/api/icons/bullseye-arrow.svg?provider=fa&style=light",src:"https://cdn.gamma.app/zc87vhr30n8uf3n/69f7d571bf7d4af1b2aab06149d5ce4d/optimized/bullseye-arrow.svg",meta:{height:512,width:512,svgViewBoxWidth:512,svgViewBoxHeight:512,date_file_modified:"2023/02/07 21:47:16 GMT",aspect_ratio:1,has_clipping_path:!1,frame_count:1,average_color:"#acacac"},query:"goal",providerMeta:{name:"fa",id:"bullseye-arrow"},name:"bullseye-arrow.svg"},label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Goal"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Sed ut perspiciatis unde omnis iste natus error sit volupta tem accusa ntium eius modi tempora"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:{source:"image.icon",src:"https://cdn.gamma.app/zc87vhr30n8uf3n/ce830d7ed3c543d5b88ecdf6ec6c26ad/optimized/chess-king-piece.svg",tempUrl:"https://gamma.app/api/icons/chess-king-piece.svg?provider=fa&style=light",meta:{height:512,width:256,svgViewBoxWidth:256,svgViewBoxHeight:512,date_file_modified:"2023/02/07 22:21:25 GMT",aspect_ratio:.5,has_clipping_path:!1,frame_count:1,average_color:"#a1a1a1"},providerMeta:{name:"fa",id:"chess-king-piece"},query:"strategy",uploadStatus:0,showPlaceholder:!1,name:"chess-king-piece.svg"},label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Strategy"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Foste natus error sit volupta tem accusa ntium eius modi tempora"}]}]}]}},{name:()=>s.Ru._({id:"9j9/WR"}),key:"imagesWithTextIcons",previewImage:f,keywords:["icons"],content:{type:"smartLayout",attrs:{variantKey:"iconsText",options:{cellSize:25,shapeSize:"md",imagePosition:"left"},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,image:{source:"image.icon",src:"https://cdn.gamma.app/zc87vhr30n8uf3n/e169d76934d642e2999d195fb50cfd88/optimized/mountain.svg",tempUrl:"https://gamma.app/api/icons/mountain.svg?provider=fa&style=light",meta:{height:512,width:512,svgViewBoxWidth:512,svgViewBoxHeight:512,date_file_modified:"2023/02/07 21:46:24 GMT",aspect_ratio:1,has_clipping_path:!1,frame_count:1,average_color:"#cbcbcb"},query:"mountain",providerMeta:{name:"fa",id:"mountain"},uploadStatus:0,showPlaceholder:!1,name:"mountain.svg"},label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Vision"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:{source:"image.icon",src:"https://cdn.gamma.app/zc87vhr30n8uf3n/1f156e4486744695b40e109958afc3fb/optimized/user-astronaut.svg",tempUrl:"https://gamma.app/api/icons/user-astronaut.svg?provider=fa&style=light",meta:{height:512,width:448,svgViewBoxWidth:448,svgViewBoxHeight:512,date_file_modified:"2023/02/07 21:45:45 GMT",aspect_ratio:.875,has_clipping_path:!1,frame_count:1,average_color:"#9c9c9c"},query:"astronaut",providerMeta:{name:"fa",id:"user-astronaut"},uploadStatus:0,showPlaceholder:!1,name:"user-astronaut.svg"},label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Mission"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim "}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:{source:"image.icon",uploadStatus:0,showPlaceholder:!1,tempUrl:"https://gamma.app/api/icons/bullseye-arrow.svg?provider=fa&style=light",src:"https://cdn.gamma.app/zc87vhr30n8uf3n/69f7d571bf7d4af1b2aab06149d5ce4d/optimized/bullseye-arrow.svg",meta:{height:512,width:512,svgViewBoxWidth:512,svgViewBoxHeight:512,date_file_modified:"2023/02/07 21:47:16 GMT",aspect_ratio:1,has_clipping_path:!1,frame_count:1,average_color:"#acacac"},query:"goal",providerMeta:{name:"fa",id:"bullseye-arrow"},name:"bullseye-arrow.svg"},label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Goal"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Sed ut perspiciatis unde omnis iste natus error sit volupta tem accusa ntium eius modi tempora"}]}]}]}},{name:()=>s.Ru._({id:"tVJ1RK"}),key:"imagesWithTextPhotos",keywords:["photos","captions"],previewImage:v,content:{type:"smartLayout",attrs:{variantKey:"imagesText",options:{cellSize:15,horizontalAlign:"left"},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,image:{source:"image.unsplash",src:"https://images.unsplash.com/photo-1457459686225-c7db79d4e59f?ixid=MnwxOTgwNzN8MHwxfHNlYXJjaHwxOXx8bW91bnRhaW58ZW58MXx8fHwxNjc1ODA2MDQw&ixlib=rb-4.0.3&w=2592&q=25",tempUrl:"https://images.unsplash.com/photo-1457459686225-c7db79d4e59f?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwxOTgwNzN8MHwxfHNlYXJjaHwxOXx8bW91bnRhaW58ZW58MXx8fHwxNjc1ODA2MDQw&ixlib=rb-4.0.3&q=80&w=200",meta:{height:3872,width:2592},query:"mountain"},label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Vision"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:{source:"image.unsplash",src:"https://images.unsplash.com/photo-1536697246787-1f7ae568d89a?ixid=MnwxOTgwNzN8MHwxfHNlYXJjaHwyfHxhc3Ryb25hdXR8ZW58MXx8fHwxNjc1ODA1OTkz&ixlib=rb-4.0.3&w=2731&q=25",tempUrl:"https://images.unsplash.com/photo-1536697246787-1f7ae568d89a?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwxOTgwNzN8MHwxfHNlYXJjaHwyfHxhc3Ryb25hdXR8ZW58MXx8fHwxNjc1ODA1OTkz&ixlib=rb-4.0.3&q=80&w=200",meta:{height:4096,width:2731},query:"astronaut"},label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Mission"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:{source:"image.unsplash",src:"https://images.unsplash.com/photo-1598091874986-7da3b270fead?ixid=MnwxOTgwNzN8MHwxfHNlYXJjaHwyNHx8Z29hbHxlbnwxfHx8fDE2NzU4MDU4NjQ&ixlib=rb-4.0.3&w=2832&q=25",tempUrl:"https://images.unsplash.com/photo-1598091874986-7da3b270fead?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwxOTgwNzN8MHwxfHNlYXJjaHwyNHx8Z29hbHxlbnwxfHx8fDE2NzU4MDU4NjQ&ixlib=rb-4.0.3&q=80&w=200",meta:{height:2832,width:2832},query:"goal"},label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Goal"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Sed ut perspiciatis unde omnis iste natus error sit volupta tem accusa ntium eius modi tempora"}]}]}]}},{name:()=>s.Ru._({id:"B52ZvK"}),key:"pyramidOutside",previewImage:y,content:{type:"smartLayout",attrs:{variantKey:"pyramid",options:{numbered:!0,hasLine:!1,twoSided:!1,orientation:"horizontal",cellSize:10,outsideText:!0},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Vision"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do "}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Mission"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Excepteur sint occaecat cupidatat non proident, sunt in culpa "}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Goal"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Sed ut perspiciatis unde omnis iste natus error sit "}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Strategy"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Foste natus error sit volupta tem accusa ntium "}]}]}]}},{name:()=>s.Ru._({id:"WJphpV"}),key:"funnelOutside",previewImage:x,content:{type:"smartLayout",attrs:{variantKey:"funnel",options:{numbered:!0,hasLine:!1,twoSided:!1,orientation:"horizontal",cellSize:10,outsideText:!0},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Vision"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur "}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Mission"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Excepteur sint occaecat cupidatat non proident, sunt "}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Goal"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Sed ut perspiciatis unde omnis iste natus error sit volupta"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Strategy"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Foste natus error sit volupta tem accusa ntium eius modi tempora"}]}]}]}},{name:()=>s.Ru._({id:"crBPvK"}),key:"staircaseOutside",previewImage:w,content:{type:"smartLayout",attrs:{variantKey:"staircase",options:{numbered:!0,hasLine:!1,twoSided:!1,orientation:"horizontal",cellSize:10,outsideText:!0,horizontalAlign:"left"},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Vision"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Mission"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim "}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Goal"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Sed ut perspiciatis unde omnis iste natus error sit volupta tem accusa ntium eius modi tempora"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Strategy"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Foste natus error sit volupta tem accusa ntium eius modi tempora"}]}]}]}},{name:()=>s.Ru._({id:"OxTZir"}),key:"steppedPyramid",previewImage:j,content:{type:"smartLayout",attrs:{variantKey:"staircase",options:{numbered:!0,hasLine:!1,twoSided:!1,orientation:"horizontal",cellSize:10,outsideText:!0,horizontalAlign:"center"},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Vision"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Mission"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim "}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Goal"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Sed ut perspiciatis unde omnis iste natus error sit volupta tem accusa ntium eius modi tempora"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Strategy"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Foste natus error sit volupta tem accusa ntium eius modi tempora"}]}]}]}},{name:()=>s.Ru._({id:"zd+VK0"}),key:"horizontalArrows",previewImage:d,content:{type:"smartLayout",attrs:{variantKey:"arrows",options:{numbered:!0,hasLine:!1,twoSided:!1,orientation:"horizontal",cellSize:10},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Vision"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Mission"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim "}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Goal"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Sed ut perspiciatis unde omnis iste natus error sit volupta tem accusa ntium eius modi tempora"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Strategy"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Foste natus error sit volupta tem accusa ntium eius modi tempora"}]}]}]}},{name:()=>s.Ru._({id:"bkPcLj"}),key:"verticalArrows",previewImage:c,content:{type:"smartLayout",attrs:{variantKey:"arrows",options:{numbered:!0,hasLine:!1,twoSided:!1,orientation:"vertical",cellSize:10,horizontalAlign:"left"},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Vision"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Mission"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Goal"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Sed ut perspiciatis unde omnis iste natus error sit volupta tem accusa ntium"}]}]}]}},{name:()=>s.Ru._({id:"W78uBz"}),key:"stats3",previewImage:p,content:{type:"smartLayout",attrs:{variantKey:"stats",options:{cellSize:15,numberMax:100,shapeSize:"lg"},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:"25%"},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Vision"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:"3/4"},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Mission"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit "}]}]},{type:"smartLayoutCell",attrs:{options:{numberMax:100},width:null,image:null,label:50},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Goal"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Sed ut perspiciatis unde omnis iste natus error sit volupta tem accusa ntium eius modi tempora"}]}]}]}},{name:()=>s.Ru._({id:"PFo2A/"}),key:"circleStats3",previewImage:g,content:{type:"smartLayout",attrs:{variantKey:"circleStats",options:{cellSize:15,imageSize:.8,shapeSize:"lg"},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:"54%"},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Vision"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:75},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Mission"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit "}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:"1/3"},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Goal"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Sed ut perspiciatis unde omnis iste natus error sit volupta tem accusa ntium eius modi tempora"}]}]}]}},{name:()=>s.Ru._({id:"0LeG7j"}),key:"barStats3",previewImage:u,content:{type:"smartLayout",attrs:{variantKey:"barStats",options:{cellSize:10,numberMax:100},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:"25%"},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Vision"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:"3/4"},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Mission"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit "}]}]},{type:"smartLayoutCell",attrs:{options:{numberMax:100},width:null,image:null,label:50},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Goal"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Sed ut perspiciatis unde omnis iste natus error sit volupta tem accusa ntium eius modi tempora"}]}]}]}},{name:()=>s.Ru._({id:"A9onc2"}),key:"stepsWithText",keywords:["steps","sequence","ordered"],previewImage:k,content:{type:"smartLayout",attrs:{variantKey:"steps",options:{cellSize:10},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Step 1"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do "}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Step 2"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Excepteur sint occaecat cupidatat non proident, sunt in culpa "}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Step 3"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Sed ut perspiciatis unde omnis iste natus error sit "}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Step 4"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Foste natus error sit volupta tem accusa ntium "}]}]}]}}];var L=n(48365),_=n(88693);let M=()=>(0,_.a)().filter(e=>!e.disabled),N=()=>M().map(e=>{let{key:t,commandName:n,description:i,icon:o,keywords:s=[],defaultAttrs:d,defaultOptions:c,featureFlag:u}=e,p={type:"smartLayout",attrs:{variantKey:t,options:c},content:a()(3).map(()=>({type:"smartLayoutCell",content:(0,l.Hg)(),attrs:d}))};return{key:"smartLayout-".concat(t),name:n,keywords:[...s,"layout","smart"],description:i,nodeName:"smartLayout",icon:o,execute:e=>{e.chain().focus().insertContentAndSelect(p).run()},dragStartFn:e=>(0,r.fS)(e,p),dragEndFn:e=>{(0,L.tN)(e,e.state.selection.$from)},featureFlag:u}}),T=()=>M().map(e=>{let{key:t,name:n,description:i,icon:a,featureFlag:r}=e;return{key:"listToSmartLayout-".concat(t),name:n,icon:a,description:i,group:"list",apply:e=>e.commands.listToSmartLayout(t),checkDisabled:e=>!(0,o.Jx)(e),featureFlag:r}}),P=()=>E().map(e=>{let{name:t,key:n,keywords:i=[],content:a,previewImage:o}=e,l=(0,_.B)(a.attrs.variantKey);return{key:n,name:t,keywords:[...i,...l.keywords||[],"layout","smart"],nodeName:"smartLayout",icon:l.icon,previewImage:o,execute:e=>{e.chain().focus().insertContentAndSelect(a).run()},dragStartFn:e=>(0,r.fS)(e,a),dragEndFn:e=>{(0,L.tN)(e,e.state.selection.$from)},featureFlag:l.featureFlag}})},4296:(e,t,n)=>{"use strict";n.d(t,{y:()=>c});var i=n(31085),a=n(80853),r=n(20501),o=n(24221),l=n(9104),s=n(2057),d=n(59707);let c=e=>{var t;let{value:n,updateValue:c,choices:u,defaultIcon:p,option:h}=e;return(0,i.jsxs)(s.ms,{isLazy:!0,children:[(0,i.jsx)(l.Tz,{placement:"top",label:h.name(),shouldWrapChildren:!0,children:(0,i.jsx)(s.gf,{as:a.$,variant:"toolbar",onMouseDown:d.Fw,rightIcon:(0,i.jsx)(o.g,{icon:r.Jt$,transform:"shrink-6"}),children:(0,i.jsx)(o.g,{icon:(null===(t=u[n])||void 0===t?void 0:t.icon)||p})})}),(0,i.jsx)(s.Q5,{children:Object.entries(u).map(e=>{let[t,{icon:n,name:a,disabled:r}]=e;return r?null:(0,i.jsx)(s.tJ,{icon:(0,i.jsx)(o.g,{icon:n,fixedWidth:!0}),onClick:()=>c(t),children:a},t)})})]})}},39875:(e,t,n)=>{"use strict";n.d(t,{R:()=>k});var i=n(31085),a=n(35789),r=n(80532),o=n(81313),l=n(12917),s=n(24221),d=n(9104),c=n(12327),u=n(14041),p=n(74327),h=n(64225),m=n(83380),g=n(5933),x=n(25420),f=n(17539),v=n(38684),b=n(90406),y=n(81594);let w=e=>{let{image:t}=e;if(t.src&&(0,b.Xs)(t))return(0,i.jsx)(y.h,{image:t,src:t.src});let{tempUrl:n,meta:a,src:r}=t||{},o=r&&(0,f.Ub)(r,f.p7,a),l=(0,f.QV)(o,o?void 0:n),s=(0,v.w3)(t);return(0,i.jsx)(x.s,{sx:{backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundImage:l,backgroundPosition:s,width:"100%",aspectRatio:"1/1",objectFit:"contain",transitionProperty:"border-radius",transitionDuration:"normal",borderRadius:"calc(var(--box-border-radius) / 2)"}})};var j=n(21696);let k=e=>{let{image:t,iconSize:n,boxProps:u,number:p,selectCell:h,placeholderIfEmpty:m}=e,{hasIcon:g,handleChangeIcon:x,isEditable:f}=C({image:t,selectCell:h}),v=m&&!g;return(0,i.jsx)(d.Tz,{placement:"top",label:g?c.Ru._({id:"yBP2Ki"}):c.Ru._({id:"zFIUaq"}),isDisabled:!f,children:(0,i.jsxs)(a.o,{className:(0,o.cx)("image"),h:"calc(1em * var(--line-height-heading))",w:"1em",fontSize:"".concat(n,"em"),role:"group",pos:"relative","data-smart-layout-image-drop-target":"true",onClick:f?x:void 0,...u,children:[g?(0,i.jsx)(w,{image:t}):p?"".concat(p):null,(f||v)&&(0,i.jsx)(r.az,{bg:"var(--placeholder-button-bg-color)",color:"var(--placeholder-button-text-color)",opacity:v?1:0,_groupHover:{opacity:1},pos:"absolute",fontSize:"0.8em",p:"0.5em",borderRadius:"md",cursor:"pointer",children:(0,i.jsx)(s.g,{icon:l.cCs,fixedWidth:!0})})]})})},C=e=>{let{image:t,selectCell:n,disableEditing:i}=e,a=(0,h.GV)(g.nD)&&!i&&n,r=(null==t?void 0:t.src)||(null==t?void 0:t.tempUrl),{setMediaDrawerSourceKeyAction:o}=(0,j.B)();return{hasIcon:r,handleChangeIcon:(0,u.useCallback)(e=>{e.stopPropagation(),null==n||n(),o(p.Z_.key,!0),setTimeout(()=>{(0,m.G)(!1)},30)},[n,o]),isEditable:a}}},16397:(e,t,n)=>{"use strict";n.d(t,{Ab:()=>s,Hg:()=>o,xb:()=>l});var i=n(20501),a=n(12327),r=n(79194);let o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;return[r.w.heading(a.Ru._({id:"HX5SVx"}),{level:e}),r.w.paragraph(a.Ru._({id:"Nu4oKW"}))]},l="1em",s={arrows:{name:()=>a.Ru._({id:"YUGjgn"}),icon:i.dmS},stats:{name:()=>a.Ru._({id:"29Hx9U"}),icon:i.Bi7},bullets:{name:()=>a.Ru._({id:"RYtHky"}),icon:i.ITF},imagesText:{name:()=>a.Ru._({id:"iglXNu"}),icon:i.Cyq},pyramid:{name:()=>a.Ru._({id:"96Rp0u"}),icon:i.IJv},staircase:{name:()=>a.Ru._({id:"Hg0gxH"}),icon:i.UER},cycle:{name:()=>a.Ru._({id:"pWjHxR"}),icon:i.yNr},textBoxes:{name:()=>a.Ru._({id:"b7qbjN"}),icon:i.n2$},timeline:{name:()=>a.Ru._({id:"D1qS02"}),icon:i.v6v}}},40452:(e,t,n)=>{"use strict";n.d(t,{Rv:()=>f,fw:()=>v,r$:()=>x});var i=n(47217),a=n.n(i),r=n(81570),o=n(73686),l=n(7908),s=n(64130),d=n(95580),c=n(32570),u=n(63751),p=n(43125),h=n(95905),m=n(92257),g=n(1906);let x=e=>{let{doc:t}=e,n=[];return t.descendants((i,c)=>{let u;if(i.type.name!==m.o.name)return;let x=a()((0,d.F2)(i.content).map(e=>(0,g.x9)(e.attrs.label))),f=b(t.resolve(c)),v=(0,h.er)(e,c,c+i.nodeSize),y=(0,l.KQ)(i)||v||(0,s.C)(),w=e.selection instanceof r.nh&&e.selection.node===i||e.selection.from>c&&e.selection.to<c+i.nodeSize;i.forEach((e,t,n)=>{e.attrs.options.isEmphasized&&(u=n)});let j=(0,p.i4)(t,"scaleContentToFit"),k={isSmartLayoutDecoration:!0,direction:y,numCells:i.childCount,containerSize:f,scaleContentToFit:!!j};return n.push(o.NZ.node(c,c+i.nodeSize,{},k)),i.forEach((e,t,a)=>{let r=c+1+t,l={isSmartLayoutCellDecoration:!0,direction:y,index:a,numCells:i.childCount,maxLabelValue:x,smartLayoutAttrs:i.attrs,layoutContainerSize:f,isContentEmpty:(0,d.mf)(e),isLayoutFocused:w,emphasizedIndex:u,scaleContentToFit:!!j};n.push(o.NZ.node(r,r+e.nodeSize,{},l))}),!1}),o.zF.create(t,n)},f=e=>{let t=e.find(e=>e.spec.isSmartLayoutDecoration);return t?t.spec:(console.error("[SmartLayout] Decoration not found. This should never happen!",e),{isSmartLayoutDecoration:!0,direction:"ltr",numCells:0,containerSize:1})},v=e=>{let t=e.find(e=>e.spec.isSmartLayoutCellDecoration);return t?t.spec:(console.error("[SmartLayoutCell] Decoration not found. This should never happen!",e),{isSmartLayoutCellDecoration:!0,direction:"ltr",numCells:0,index:0,smartLayoutAttrs:{options:{},fullWidthBlock:!1},layoutContainerSize:1,isContentEmpty:!1,isLayoutFocused:!1})},b=e=>{let t=1;try{for(let i=e.depth;i>0;i--){let a=e.node(i),r=e.index(i-1);if("gridCell"===a.type.name){let n=e.node(i-1).attrs.colWidths;n&&n[r]&&(t*=parseInt(n[r])/100)}if("card"===a.type.name){var n;let{layout:i,layoutTemplateColumns:r,container:o}=a.attrs;if("left"===i){let e=r?parseInt(r.split(" ")[1])/100:c.Ib;t*=e}if("right"===i){let e=r?parseInt(r.split(" ")[0])/100:c.Ib;t*=e}let l=e.doc.firstChild.attrs,s=null!==(n=o.width)&&void 0!==n?n:l.settings.defaultContentWidth;"lg"===s?t*=u.br/u.Vy:"sm"===s&&(t*=u.lA/u.Vy);break}}}catch(e){console.error("[SmartLayout] Error getting container size decoration",e)}return t}},21172:(e,t,n)=>{"use strict";n.d(t,{i:()=>r});var i=n(2696),a=n(57983);let r=(e,t,n)=>{let r=(0,i.FX)(),{columns:o}=(0,a.Xs)({containerSize:n,numCells:t,options:e,forceBalance:!0});return"vertical"===e.orientation||r||t>1&&1===o?{columns:1,isHorizontal:!1}:{columns:o,isHorizontal:!0}}},63915:(e,t,n)=>{"use strict";n.d(t,{M:()=>a,q:()=>i});let i=e=>"smartLayoutCell"===e.type.name,a=e=>"smartLayout"===e.type.name},57983:(e,t,n)=>{"use strict";n.d(t,{BM:()=>k,BT:()=>w,Xs:()=>S,mc:()=>C,rO:()=>j});var i=n(31085),a=n(62313),r=n(2600),o=n(61778),l=n(1984),s=n(43421),d=n(80532),c=n(20501),u=n(24221),p=n(9104),h=n(12327),m=n(17228),g=n.n(m),x=n(64225),f=n(2696),v=n(5933),b=n(14e3),y=n(22544);let w=25,j=()=>({sm:{targetColumns:4,label:()=>h.Ru._({id:"4Revpc"}),width:10},md:{targetColumns:3,label:()=>h.Ru._({id:"agPptk"}),width:15},lg:{targetColumns:2,label:()=>h.Ru._({id:"k7rCa/"}),width:20},xl:{targetColumns:1,label:()=>h.Ru._({id:"vp6Yr4"}),width:w}}),k={key:"cellSize",defaultValue:()=>j().md.width,Control:e=>{let{value:t,updateValue:n,option:s}=e,d=Object.values(j()).find(e=>e.width===t);return(0,i.jsxs)(a.z,{spacing:2,me:2,children:[(0,i.jsx)(p.Tz,{placement:"top",label:(0,i.jsxs)(r.T,{spacing:0,children:[(0,i.jsx)(o.E,{color:"gray.400",children:s.name()}),(0,i.jsx)(o.E,{children:null==d?void 0:d.label()})]}),children:(0,i.jsx)(o.E,{fontSize:"sm",fontWeight:"600",children:(0,i.jsx)(u.g,{icon:c.oZz})})}),(0,i.jsxs)(l.Ap,{min:j().sm.width,max:j().xl.width,step:5,value:t,onChange:n,w:"60px",focusThumbOnChange:!1,colorScheme:"trueblue",size:"sm",children:[(0,i.jsx)(l.hB,{children:(0,i.jsx)(l.hJ,{})}),d?(0,i.jsx)(p.Tz,{placement:"top",label:(0,i.jsxs)(r.T,{spacing:0,children:[(0,i.jsx)(o.E,{color:"gray.400",children:s.name()}),(0,i.jsx)(o.E,{children:d.label()})]}),children:(0,i.jsx)(l.OQ,{background:"trueblue.500"})}):(0,i.jsx)(l.OQ,{background:"trueblue.500"})]})]})},ControlMenu:(e,t,n)=>({key:n.key,label:n.name(),icon:c.oZz,items:Object.entries(j()).map(n=>{let[i,a]=n;return{key:"cell-size-".concat(i),label:a.label(),icon:a.width===e?c.e68:void 0,onClick:()=>{t(a.width)}}})}),getDefaultOnParse:e=>e.childElementCount%2==0?j().lg.width:j().md.width,name:()=>h.Ru._({id:"LNoaEH"})},C=6,S=e=>{var t;let n,{containerSize:a,numCells:r,options:o,mobileMaxColumns:l=1,forceBalance:c=!1}=e,u=(null===(t=Object.values(j()).find(e=>e.width===o.cellSize))||void 0===t?void 0:t.targetColumns)||3,p=40/u,h=(0,f.FX)(),m=(0,x.GV)(v.wC)===b.w.SLIDE_VIEW,w=(0,x.GV)(v.yh),k=(0,s.A)({base:l,sm:2,md:3,xl:4},{fallback:h?"base":"xl"})||l,S=y.D1||m||w?4:h?l:k,A=g()(40*a,10,10*S),z=Math.max(1,Math.floor(A/p)),I=Math.min(z,r);if(c&&r>I&&r<=4)for(;I>=1&&r%I!=0;I--);let R=Math.ceil(r/I),E=r%I;if(E&&"center"===o.horizontalAlign){let e=(I-E)/2;n=(0,i.jsx)(d.az,{gridColumn:"span ".concat(e*C),gridRow:"".concat(R),className:"grid-offset"})}else if(E&&"right"===o.horizontalAlign){let e=I-E;n=(0,i.jsx)(d.az,{gridColumn:"span ".concat(e*C),gridRow:"".concat(R),className:"grid-offset"})}return{maxWidth:A,targetWidth:p,targetColumns:u,maxColumns:z,columns:I,lastRowAligner:n}}},54979:(e,t,n)=>{"use strict";n.d(t,{K:()=>d,z:()=>s});var i=n(31085),a=n(20501),r=n(12327),o=n(4296);let l=()=>({square:{name:r.Ru._({id:"1DA6ap"}),icon:a.Nfw},circle:{name:r.Ru._({id:"7xMmki"}),icon:a.GEE},landscape:{name:r.Ru._({id:"XxIeKn"}),icon:a.Cpz},portrait:{name:r.Ru._({id:"3bV9gD"}),icon:a.b0A}}),s={square:{aspectRatio:"1 / 1"},circle:{borderRadius:"full",aspectRatio:"1 / 1"},landscape:{aspectRatio:"1.618 / 1"},portrait:{aspectRatio:"4 / 5"}},d={key:"imageShape",defaultValue:()=>null,Control:e=>{let{value:t,updateValue:n,editor:r,option:s}=e;return(0,i.jsx)(o.y,{value:t,updateValue:n,editor:r,choices:l(),option:s,defaultIcon:a.Nfw})},ControlMenu:(e,t,n)=>({key:n.key,label:n.name(),icon:"square"===e?a.Nfw:"circle"===e?a.GEE:"landscape"===e?a.Cpz:a.b0A,items:Object.entries(l()).map(n=>{let[i,{name:r}]=n;return{key:r,label:r,icon:e===i?a.e68:void 0,onClick:()=>t(i)}})}),name:()=>r.Ru._({id:"JbOau/"})}},48365:(e,t,n)=>{"use strict";n.d(t,{$o:()=>h,TS:()=>v,aG:()=>p,eL:()=>f,fc:()=>x,oO:()=>g,tN:()=>b});var i=n(13236),a=n(81570),r=n(95580),o=n(98371),l=n(17539),s=n(1279),d=n(93090),c=n(63915),u=n(88693);let p=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ltr",n=(0,u.B)(e.variantKey),i={};return n.options.forEach(n=>{var a;let{key:r,defaultValue:o}=n;i[r]=null!==(a=e.options[r])&&void 0!==a?a:null==o?void 0:o({dir:t})}),i},h=e=>{var t;let n=(0,u.B)(e.variantKey),i=p(e);return(null===(t=n.addDirection)||void 0===t?void 0:t.call(n,i))||"right"},m=(e,t)=>t.nodes.smartLayout.validContent(e.content),g=e=>{let t=(0,d.p$)(e).filter(e=>(0,l.u3)(e.type));return 1===t.length&&t[0]},x=(e,t,n)=>{let i=e.posAtCoords({left:t.clientX,top:t.clientY});if(!i)return null;let a=e.state.doc.resolve(i.inside),l=(0,r.IV)(a,c.q)[0],d=(0,r.IV)(a,c.M)[0],u=n&&(0,s.H)(n),p=g(t);if(!l&&!d||u&&"image"!==u.type.name||!p)return null;let h=(0,o.xX)(t.target,e.dom,e=>e.hasAttribute("data-smart-layout-image-drop-target"));if(h){let e=h.getBoundingClientRect();return{pos:i.inside,node:u,rect:e,image:{src:null==u?void 0:u.attrs.src,source:null==u?void 0:u.attrs.source,query:null==u?void 0:u.attrs.query,name:null==u?void 0:u.attrs.name,uploadStatus:null==u?void 0:u.attrs.uploadStatus}}}return null},f=(e,t,n)=>{let a;if(!n||!m(n,e.state.schema))return null;let r=e.posAtCoords({left:t.clientX,top:t.clientY});if(!r||-1==r.inside)return null;let{doc:o}=e.state,l=o.nodeAt(r.pos),s=o.nodeAt(r.inside);if(s&&(0,c.q)(s))a={node:s,pos:r.inside};else if(l&&(0,c.q)(l))a={node:l,pos:r.pos};else{let e=o.resolve(r.inside);a=(0,i.eL)(e,c.q)}let d=a&&e.nodeDOM(a.pos),u=null==d?void 0:d.querySelector("[data-content-reference]"),p=null==u?void 0:u.getBoundingClientRect();if(!a||!p)return null;let g=o.resolve(a.pos).parent;if(!g||!(0,c.M)(g))return null;let x="right"===h(g.attrs)?t.clientX>p.left+p.width/2?"right":"left":t.clientY>p.top+p.height/2?"bottom":"top";return{pos:a.pos,node:a.node,rect:p,side:x}},v=(e,t,n)=>{var r;if(!n)return null;let o=n.content.toJSON(),l=null==o?void 0:o[0];if(e.state.selection instanceof a.nh&&"smartLayout"===e.state.selection.node.type.name||!l||(null==l?void 0:l.type)!=="smartLayout")return null;let s=null===(r=l.attrs)||void 0===r?void 0:r.variantKey,d=e.posAtCoords({left:t.clientX,top:t.clientY});if(!d||-1==d.inside)return null;let{doc:u}=e.state,p=u.resolve(d.inside),h=(0,i.eL)(p,c.M);if(!h)return null;let m=e.nodeDOM(h.pos),g=null==m?void 0:m.getBoundingClientRect();return g?{pos:h.pos,node:h.node,variantKey:s,rect:g}:null},b=(e,t)=>{let n=(0,i.eL)(t,c.M);n&&e.commands.selectNodeAtPos(n.pos)}},88693:(e,t,n)=>{"use strict";n.d(t,{B:()=>t4,a:()=>t1});var i=n(31085),a=n(15672),r=n(25420),o=n(80532),l=n(81313),s=n(20501),d=n(12327),c=n(14041),u=n(77654),p=n(63413),h=n(1935),m=n(95905),g=n(98029),x=n(85774),f=n(31291),v=n(64225),b=n(5933);let y=e=>{let{updateAttributes:t,value:n,placeholder:a,inputProps:r,...o}=e,l=(0,c.useCallback)(e=>{t&&t({label:""===e?null:e})},[t]),s=(0,v.GV)(b.Cl)&&t;return(0,i.jsxs)(g.F,{value:n||"",placeholder:a,onChange:l,isDisabled:!s,...o,children:[(0,i.jsx)(x.l,{width:"100%",h:"1em",py:0,noOfLines:1,userSelect:s?void 0:"none",lineHeight:1}),(0,i.jsx)(f.j,{width:"100%",my:-1,py:1,lineHeight:1,...r})]})};var w=n(39875),j=n(16397),k=n(21172),C=n(38256),S=n(67442),A=n(34252),z=n(1771);let I=function(e,t){var n;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3?arguments[3]:void 0,r=(0,v.GV)(b.SJ),o=null!==(n=null==t?void 0:t.color)&&void 0!==n?n:e.color,l=o,s=(0,A.M)(r),d=C.z0[s.shapeFill].opacity,p=(0,z.bh)(r);if(!l&&"custom"===s.shapeColorScheme&&p.length>0&&t){let e=(0,z.bh)(r).map(z.Ik);l=e[i%e.length]}let h=!0===a?0:!1===a?1:d,m=(0,c.useMemo)(()=>(0,S.q9)(l,h),[l,h]),g=o?(0,u.U2)(o):void 0;return{color:l,colorVars:m,headingColorCss:g,colorOverride:o}};var R=n(57983),E=n(49624),L=n(57860);let _=(e,t,n)=>(0,i.jsx)(E.b,{currentColor:e,setColor:e=>{t(e,!0),null==n||n()},unsetColor:()=>{t(null,!0),null==n||n()},source:"SmartLayout",showAddColorButton:!1}),M={key:"color",Control:e=>{let{value:t,updateValue:n,editor:a}=e;return(0,i.jsx)(L.a,{color:t,setColor:e=>n(e,!0),editor:a,analyticsSource:"SmartLayout"})},ControlMenu:(e,t,n)=>({key:n.key,label:n.name(),icon:s.fyG,items:[{key:"clear",element:n=>_(e,t,n)}]}),name:()=>"Color"};var N=n(3040),T=n(59392);let P={key:"isEmphasized",Control:e=>{let{value:t,editor:n,pos:a}=e;return(0,i.jsx)(T.I,{label:t?d.Ru._({id:"PDMbsX"}):d.Ru._({id:"m1crrt"}),icon:t?N.yy:s.yy,onClick:()=>{a&&n.chain().handleEmphasizeCell(a,!t).run()}})},ControlMenu:(e,t,n)=>({key:n.key,label:e?d.Ru._({id:"PDMbsX"}):d.Ru._({id:"m1crrt"}),icon:e?N.yy:s.yy,onClick:()=>{t(!e)}}),name:()=>"Emphasis"};var O=n(62313);let D={key:"horizontalAlign",defaultValue:()=>null,Control:e=>{let{value:t,updateValue:n}=e;return(0,i.jsx)(O.z,{spacing:0,dir:"ltr",children:m.gj.map(e=>{let{name:a,icon:r,alignment:o}=e;return(0,i.jsx)(T.I,{label:a(),icon:r,onClick:()=>{n(o===t?null:o)},isActive:t===o},a())})})},ControlMenu:(e,t,n)=>({key:n.key,label:n.name(),icon:s.ecg,items:m.gj.map(n=>{let{name:i,alignment:a}=n;return{key:i(),label:i(),icon:e===a?s.e68:void 0,onClick:()=>{t(a===e?null:a)}}})}),name:()=>d.Ru._({id:"0j+RGO"})},F={key:"numbered",defaultValue:()=>!0,Control:e=>{let{value:t,updateValue:n,option:a}=e;return(0,i.jsx)(T.I,{label:a.name(),onClick:()=>n(!t),isActive:t,icon:s.Tsj})},ControlMenu:(e,t,n)=>({key:n.key,label:e?d.Ru._({id:"qCzYrD"}):d.Ru._({id:"Ty8hAp"}),icon:s.Tsj,onClick:()=>t(!e)}),name:()=>d.Ru._({id:"mVQI+S"})},H={key:"orientation",defaultValue:()=>"vertical",Control:e=>{let{value:t,updateValue:n,option:a}=e;return(0,i.jsx)(T.I,{label:a.name(),onClick:()=>n("horizontal"===t?"vertical":"horizontal"),isActive:"horizontal"===t,icon:"horizontal"===t?s.dmS:s.B0C,testId:"smart-layout-orientation-option"})},ControlMenu:(e,t,n)=>({key:n.key,label:d.Ru._({id:"R56kJO"}),icon:"horizontal"===e?s.dmS:s.B0C,items:[{key:"horizontal",label:d.Ru._({id:"pzu7v4"}),icon:"horizontal"===e?s.e68:void 0,onClick:()=>t("horizontal")},{key:"vertical",label:d.Ru._({id:"mX/isJ"}),icon:"vertical"===e?s.e68:void 0,onClick:()=>t("vertical")}]}),name:()=>d.Ru._({id:"MRB7nI"})},W="1.5em",B=(0,c.memo)(e=>{let{children:t,options:n,numCells:r,containerSize:o,onContextMenu:l}=e,{isHorizontal:s,columns:d}=(0,k.i)(n,r,o),c=s?{columns:d,rowGap:W}:{columns:1};return(0,i.jsx)(a.r,{"data-selection-ring":!0,...c,pos:"relative",onContextMenu:l,children:t})});B.displayName="ArrowsWrapper";let V=(0,c.memo)(e=>{let{layoutOptions:t,children:n,numCells:a,layoutContainerSize:l,dragHandle:s,cellOptions:d,direction:c}=e,{isHorizontal:u}=(0,k.i)(t,a,l),h=t.horizontalAlign,g=(0,m.yp)(h),{colorVars:x}=I(t,d,e.index,!0),f=u?{minW:0,transformOrigin:"center top",p:j.xb,pt:0}:{transformOrigin:"left center",p:j.xb,px:0},v=u?"column":"rtl"===c&&"left"===h?"row-reverse":"ltr"===c&&"right"===h?"row-reverse":"row";return(0,i.jsxs)(r.s,{direction:v,"data-selection-ring":!0,"data-content-reference":!0,pos:"relative",gap:W,minH:u?void 0:"6em",children:[(0,i.jsx)(G,{...e}),(0,i.jsx)(o.az,{flex:"1",sx:{...f,...g,...x},className:p.VN,children:n}),s]})});V.displayName="ArrowsCell";let G=(0,c.memo)(e=>{let{layoutOptions:t,cellOptions:n,label:a,index:s,updateAttributes:d,numCells:c,layoutContainerSize:g,direction:x,image:f,selectCell:v}=e,{colorVars:b}=I(t,n,s),{isHorizontal:j}=(0,k.i)(t,c,g),{width:C,height:S,fontSize:A,ref:z}=(0,h.Lf)(),R=(j?4:5)*A,E=1*A,L=j?"rtl"===x?"\n    M ".concat(E," 0\n    L 0 ").concat(R/2,"\n    L ").concat(E," ").concat(R,"\n    L ").concat(C," ").concat(R,"\n    L ").concat(C-E," ").concat(R/2,"\n    L ").concat(C," 0 Z"):"\n    M ".concat(C-E," 0\n    L ").concat(C," ").concat(R/2,"\n    L ").concat(C-E," ").concat(R,"\n    L 0 ").concat(R,"\n    L ").concat(E," ").concat(R/2,"\n    L 0 0 Z"):"\n    M 0 ".concat(S-E,"\n    L ").concat(R/2," ").concat(S,"\n    L ").concat(R," ").concat(S-E,"\n    L ").concat(R," 0\n    L ").concat(R/2," ").concat(E,"\n    L 0 0 Z"),_={fontSize:"1.5em",pos:"absolute",my:"0.5em",alignItems:"center",justifyContent:"center"};return(0,i.jsxs)(r.s,{lineHeight:"1",contentEditable:!1,align:"center",justify:"center",position:"relative",sx:{...b,...(0,m.yp)("center")},...j?{width:"100%",height:"".concat(4,"em")}:{width:"".concat(5,"em"),height:"100%"},ref:z,"data-export-as-image":!0,className:p.lR,children:[(0,i.jsx)(o.az,{as:"svg",pos:"absolute",inset:"0",w:"100%",overflow:"visible","data-testid":"arrow-svg",children:(0,i.jsx)(o.az,{as:"path",d:L,className:p.D6})}),a&&j?(0,i.jsx)(y,{value:a||"",updateAttributes:d,placeholder:"".concat(s+1),className:(0,l.cx)(u.U6),sx:_,display:"flex",style:{width:"100%",userSelect:"none",pointerEvents:"none"}}):(0,i.jsx)(r.s,{sx:_,className:(0,l.cx)(u.U6),children:(0,i.jsx)(w.R,{image:f,number:t.numbered?s+1:void 0,iconSize:1,selectCell:v})})]})});G.displayName="ArrowsLabel";let U=()=>({key:"arrows",name:()=>d.Ru._({id:"YUGjgn"}),commandName:()=>d.Ru._({id:"IsJ7Ns"}),icon:s.vFJ,options:[{...H,defaultValue:()=>"horizontal"},M,F,{...D,defaultValue:(0,m.Ro)("left")},{...R.BM,checkEnabled:e=>"vertical"!==e.options.orientation}],presetConfigurations:[{name:()=>d.Ru._({id:"QI5FSO"}),options:{orientation:"horizontal"},hideIfVertical:!0,cellAttrs:{label:null}},{name:()=>d.Ru._({id:"KphBeD"}),options:{orientation:"vertical"},cellAttrs:{label:null}}],cellOptions:[M,P],Wrapper:B,Cell:V,addDirection:e=>"horizontal"===e.orientation?"right":"bottom",isFullWidth:e=>"horizontal"===e.orientation,htmlTag:"arrows",keywords:["sequence","ordered","arrows","chevrons","roadmap"],defaultOptions:{cellSize:(0,R.rO)().sm.width},imageSlot:"optional",imageType:"icon",family:"arrows"});var K=n(2696),q=n(35789),J=n(93765),$=n(44507),Y=n(45965),Q=n(18733),X=n(48365);let Z=e=>{var t;let{index:n,theme:a,layoutOptions:s,cellOptions:d,children:h,positionProps:m,markerProps:g,getPos:x,editor:f,markerFontSize:v="h3",selectCell:b}=e,y=(0,K.FX)(),j=null===(t=s.numbered)||void 0===t||t,k=ee(y,v),C=(0,c.useCallback)(()=>{if(!f.isEditable)return;let e=f.state.doc.resolve(x());(0,X.tN)(f,e)},[x,f]),S=(0,c.useMemo)(()=>(0,J.bh)(v,a),[v,a]),{colorVars:A}=I(s,d,n),z={...(0,$.nr)()?(0,u.U2)():void 0};return(0,i.jsxs)(r.s,{...m,contentEditable:!1,userSelect:"none",onMouseDown:C,cursor:"default",css:A,children:[(0,i.jsx)(q.o,{h:"".concat(k,"em"),w:"".concat(k,"em"),className:p.SA,sx:z,pos:"relative",...g,children:(0,i.jsx)(o.az,{sx:S,className:(0,l.cx)(u.U6),textAlign:"center",style:{lineHeight:1},pos:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",children:(0,i.jsx)(w.R,{image:e.image,number:j?n+1:void 0,iconSize:1,selectCell:b})})}),h]})},ee=(e,t)=>{var n;let i=(0,Y.ZD)()[t];return(e&&null!==(n=i.mobileSize)&&void 0!==n?n:i.size)+.75},et=(e,t,n,i)=>{var a,r,o;let l=(0,Q.o)(i),s="body"===l.type,d=t&&null!==(a=l.mobileSize)&&void 0!==a?a:l.size,c=ee(t,n),u=s||t?null!==(r=e.config.lineHeightBody)&&void 0!==r?r:J.Uw:null!==(o=e.config.lineHeightHeading)&&void 0!==o?o:J.eL;return"".concat((c-d*u)/2,"em")},en="1.25em",ei=(0,c.memo)(e=>{let{children:t,onContextMenu:n}=e;return(0,i.jsx)(r.s,{rowGap:"2em",columnGap:en,direction:"row",wrap:"wrap","data-selection-ring":"padded",pos:"relative",onContextMenu:n,children:t})});ei.displayName="BulletsWrapper";let ea=(0,c.memo)(e=>{let{children:t,...n}=e,{layoutOptions:a,cellOptions:l,numCells:s,layoutContainerSize:d,dragHandle:c,firstChildSize:u}=n,{columns:h}=(0,R.Xs)({options:a,numCells:s,containerSize:d}),m=(0,K.FX)(),{colorVars:g}=I(a,l,e.index,!0),x=et(e.theme,m,"h3",u);return(0,i.jsxs)(r.s,{direction:"row",align:"start",gap:j.xb,flex:"1 1 auto",w:"calc(".concat(100/h,"% - ").concat(en,")"),"data-selection-ring":"padded","data-content-reference":!0,pos:"relative",children:[(0,i.jsx)(Z,{...n,markerFontSize:"h3"}),(0,i.jsx)(o.az,{flex:"1",minW:"0",className:p.VN,css:g,mt:x,children:t}),c]})});ea.displayName="BulletsCell";let er=()=>({key:"bullets",commandName:()=>d.Ru._({id:"eKiifW"}),name:()=>d.Ru._({id:"RYtHky"}),icon:s.dpu,options:[R.BM,M,F],cellOptions:[M,P],presetConfigurations:[{name:()=>d.Ru._({id:"UIxZV9"}),options:{numbered:!0},zoomIn:!0},{name:()=>d.Ru._({id:"g9r4Oa"}),options:{numbered:!1},zoomIn:!0}],Wrapper:ei,Cell:ea,htmlTag:"bullets",keywords:["bullets","layout","list","bullet"],imageSlot:"optional",imageType:"icon",family:"bullets"});var eo=n(46882),el=n(25817),es=n(43421),ed=n(22544);let ec="1.5em",eu=e=>{let{containerSize:t,columnsNeeded:n}=e,i=(0,K.FX)(),a=(0,es.A)({base:1,sm:2,md:3,xl:4})||2;return(ed.D1?4:i?2:a)*t<n},ep=(0,c.memo)(e=>{let{children:t,layoutOptions:n,flexProps:a,...l}=e,{index:s,direction:d}=l,{colorVars:c}=I(n,e.cellOptions,s,!0),u=(0,m.AS)("rtl"===d?"right":"left",e.direction),h=(0,K.FX)(),g=et(e.theme,h,"h4",e.firstChildSize);return(0,i.jsxs)(r.s,{direction:"row",align:"flex-start",gap:j.xb,w:"100%","data-selection-ring":!0,"data-content-reference":!0,pos:"relative",...a,children:[(0,i.jsx)(Z,{...l,layoutOptions:n,markerFontSize:"h4"}),(0,i.jsx)(o.az,{flex:"1",minW:"0",className:p.VN,css:c,pt:g,sx:u,children:t})]})});ep.displayName="StackedSmartLayoutCell";let eh={ring:{thickness:.075,padAngle:0,roundness:0,iconSize:1,circleScale:.8,numberBackground:!0},flower:{thickness:.97,padAngle:3,roundness:.2,iconSize:1.25,circleScale:1},cycle:{thickness:.6,padAngle:2,roundness:0,pointiness:.33,iconSize:1.33,circleScale:1},circle:{thickness:.6,padAngle:3,iconSize:1.33,circleScale:1},semiCircle:{thickness:.5,padAngle:2,iconSize:1.5,circleScale:1}},em=(0,c.memo)((0,c.forwardRef)((e,t)=>{let{flexProps:n,coords:a,...s}=e,{image:d,selectCell:c,layoutOptions:h,cellOptions:m,index:g,numCells:x,variant:f}=s,v=h.numbered&&x>1,{iconSize:b,numberBackground:y}=eh[f.key],{colorVars:j}=I(h,m,g),{arcPath:k,circleWidth:C}=a;return(0,i.jsxs)(r.s,{pos:"relative",ref:t,aspectRatio:"1/1","data-smart-layout-emphasis":!0,css:{contain:"layout"},pointerEvents:"none",...n,children:[(0,i.jsx)(o.az,{as:"svg",pos:"absolute",inset:0,viewBox:"0 0 ".concat(C," ").concat(C),overflow:"visible",className:p.D6,css:j,children:(0,i.jsx)(o.az,{as:"path",d:k,transform:"translate(".concat(C/2,"px, ").concat(C/2,"px) scale(").concat(C,")"),style:{vectorEffect:"non-scaling-stroke"}})}),(0,i.jsx)(r.s,{className:y?p.SA:p.lR,top:"".concat(a.centroidTop,"px"),left:"".concat(a.centroidLeft,"px"),pos:"absolute",contentEditable:!1,transform:"translate(-50%, -50%)",borderRadius:"999px !important",aspectRatio:"1/1",h:"2.5em",align:"center",direction:"column",justify:"center",css:j,children:(0,i.jsx)(o.az,{className:(0,l.cx)(u.U6),pointerEvents:"auto",children:(0,i.jsx)(w.R,{image:d,number:v?g+1:void 0,iconSize:1.125*b,selectCell:c})})})]})}));em.displayName="CircleSegment";var eg=n(2940),ex=n.n(eg),ef=n(95197);let ev=ex()(ef.JL);function eb(e,t){return[e*Math.sin(t),-e*Math.cos(t)]}function ey(e,t,n,i){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=a>1e-9?Math.sin(a/2)*(t-e)*(2*i):0,[o,l]=eb((e+t)/2-r,n-a/2),s=(t-e)*i;return[o+s*Math.cos(n),l+s*Math.sin(n)]}let ew=ex()(function(e){let{innerRadius:t=0,outerRadius:n=0,startAngle:i=0,endAngle:a=2*Math.PI,pointStrength:r=.5,padAngle:o=0}=e,{innerStartAngle:l,innerEndAngle:s,outerStartAngle:d,outerEndAngle:c,innerArcSpan:u,outerArcSpan:p,isClockwise:h}=function(e,t,n,i,a){let r=i>n,o=Math.abs(i-n),l=n,s=i,d=n,c=i,u=o,p=o;if(a>1e-9){let o=a/2,h=Math.sqrt(e*e+t*t),m=0;e>1e-9&&(m=Math.asin(h/e*Math.sin(o)));let g=0;t>1e-9&&(g=Math.asin(h/t*Math.sin(o))),(u-=2*m)>1e-9?r?(l+=m,s-=m):(l-=m,s+=m):l=s=(n+i)/2,(p-=2*g)>1e-9?r?(d+=g,c-=g):(d-=g,c+=g):d=c=(n+i)/2}return{isClockwise:r,innerStartAngle:l,innerEndAngle:s,outerStartAngle:d,outerEndAngle:c,innerArcSpan:u,outerArcSpan:p}}(t,n,i,a,o),m=eb(n,d),g=eb(n,c),x=eb(t,l),f=eb(t,s),v=r*(h?1:-1),b=r>0,y=ey(t,n,d,v,h?0:o),w=ey(t,n,c,v,h?o:0),j=u>=Math.PI?1:0,k=p>=Math.PI?1:0;return{arcPath:["M ".concat(m[0]," ").concat(m[1]),b&&"L ".concat(y[0]," ").concat(y[1]),"L ".concat(x[0]," ").concat(x[1]),"A ".concat(t," ").concat(t," 0 ").concat(j," ").concat(h?1:0," ").concat(f[0]," ").concat(f[1]),b&&"L ".concat(w[0]," ").concat(w[1]),"L ".concat(g[0]," ").concat(g[1]),"A ".concat(n," ").concat(n," 0 ").concat(k," ").concat(h?0:1," ").concat(m[0]," ").concat(m[1]),"Z"].filter(Boolean).join(" "),centroid:eb((t+n)/2,((l+s)/2+(d+c)/2)/2+v*Math.PI/6)}}),ej={1:90,2:-180,3:-150,4:-90,5:-90,6:-60,7:-60,8:-45},ek=ex()(e=>{var t;let n,i,{index:a,numCells:r,variant:o,direction:l,semi:s,themeRoundness:d}=e,c=(s?-90:null!==(t=ej[r])&&void 0!==t?t:0)*("rtl"===l?-1:1),u=(s?180:360)/r*("rtl"===l?-1:1),p=a*u+c,h=p+u,m=(p+h)/2,g=Math.PI/180*((90-m)%360),{thickness:x,padAngle:f,roundness:v=d,pointiness:b}=eh[o],y=.5*(1-x);if(b){let e=ew({innerRadius:y,outerRadius:.5,startAngle:p*Math.PI/180,endAngle:h*Math.PI/180,padAngle:f*Math.PI/180,pointStrength:b});n=e.arcPath,i=e.centroid}else{let e=ev({innerRadius:y,outerRadius:.5,startAngle:p*Math.PI/180,endAngle:h*Math.PI/180,padAngle:f*Math.PI/180,cornerRadius:v});n=e()||"",i=e.centroid()}let w=i[0],j=i[1],k=(m+360)%360;return{outsideX:.5*Math.cos(g),outsideY:.5*Math.sin(g),centroidX:w,centroidY:j,arcPath:n,sideX:k>0&&k<=180?"right":"left",sideY:k>90&&k<=270?"bottom":"top",startAngle:p,midpointAngle:m,endAngle:h}}),eC=e=>{let{index:t,numCells:n,variant:i,direction:a,semi:r=!1,themeRoundness:o}=e,{width:l,height:s,ref:d}=(0,h.Lh)(),c=ek({index:t,numCells:n,variant:i,direction:a,semi:r,themeRoundness:o}),{outsideX:u,outsideY:p,centroidX:m,centroidY:g}=c,x=s*(.5-p)*(r?2:1),f=s*(.5+g)*(r?2:1),v=s*(.5+u)*(r?2:1),b=s*(.5+m)*(r?2:1);return{...c,outsideTop:x,outsideLeft:v,centroidTop:f,centroidLeft:b,circleRef:d,circleWidth:l,circleHeight:s}},eS=ex()(e=>{var t;let n=360/e,i=null!==(t=ej[e])&&void 0!==t?t:0,a=[],r=[],o=[];for(let t=0;t<e;t++){let e=(i+t*n)%360,l=e+n/2,s=l>0&&l<=180?"right":"left",d=(90-e)%360*Math.PI/180,c=Math.sin(d),u={index:t,angle:e,sideX:s,sideY:l>90&&l<=270?"bottom":"top",x:Math.cos(d),y:c,columnPosition:-1};"left"===s?a.push(u):r.push(u),o.push(u)}return a.sort((e,t)=>t.y-e.y),r.sort((e,t)=>t.y-e.y),a.forEach((e,t)=>{e.columnPosition=t}),r.forEach((e,t)=>{e.columnPosition=t}),{items:o,leftItems:a,rightItems:r}}),eA=(e,t)=>{let{items:n,rightItems:i,leftItems:a}=eS(t),{columnPosition:r,sideX:o}=n[e],l=function(e,t){return Math.abs(e*t)/function(e,t){for(;0!==t;){let n=t;t=e%t,e=n}return e}(e,t)}(i.length,a.length),s="right"===o?i.length:a.length,d=1===t?3:l/s;return{rowStart:r*d+1,rowSpan:d,numRows:l,verticalAlign:"center"}},ez=(0,c.memo)(e=>{let{children:t,containerSize:n,variant:a,onContextMenu:r}=e,o=eu({containerSize:n,columnsNeeded:3}),{circleScale:l}=eh[a.key];return(0,i.jsx)(eo.x,{pos:"relative","data-selection-ring":"padded",templateColumns:"1fr calc(".concat(100*(o?.8:.35*l),"% * var(--media-scale, 1)) 1fr"),autoRows:"auto",rowGap:o?ec:"1.5em",dir:"ltr",onContextMenu:r,children:t})});ez.displayName="CircleWrapper";let eI=(0,c.memo)(e=>eu({containerSize:e.layoutContainerSize,columnsNeeded:3})?(0,i.jsx)(eE,{...e}):(0,i.jsx)(eR,{...e}));eI.displayName="CircleCell";let eR=(0,c.memo)(e=>{let{children:t,index:n,numCells:a,dragHandle:l,variant:s,direction:d,theme:c}=e,{roundness:u}=(0,A.M)(c),{pathRounding:h}=C.T5[u],{circleRef:g,...x}=eC({index:n,numCells:a,variant:s.key,direction:d,themeRoundness:h}),f="right"===x.sideX,v=f?"left":"right",b=(0,m.yp)(v),y=(x.midpointAngle+360)%180==90,{rowStart:w,rowSpan:j,numRows:k,verticalAlign:S}=eA(n,a),z=y?"2em":"flower"===s.key?"0em":k%2==0?"1.5em":"1em";return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.s,{gridColumn:f?3:1,gridRow:"".concat(w," / span ").concat(j),zIndex:"1",sx:{...b,...(0,m.AS)(v,"ltr"),...f?{pl:z}:{pr:z}},direction:"column",justify:S,className:p.VN,minW:"0",children:(0,i.jsxs)(o.az,{"data-content-reference":!0,"data-smart-layout-emphasis":!0,"data-selection-ring":"padded",pos:"relative",w:"100%",children:[t,l]})}),(0,i.jsx)(em,{...e,flexProps:{gridColumn:2,gridRow:"1 / span ".concat(k),alignSelf:"center"},coords:x,ref:g})]})}),eE=(0,c.memo)(e=>{let{index:t,numCells:n,direction:a,variant:r,theme:o}=e,{roundness:l}=(0,A.M)(o),{pathRounding:s}=C.T5[l],{circleRef:d,...c}=eC({index:t,numCells:n,variant:r.key,direction:a,themeRoundness:s});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(em,{...e,flexProps:{gridRow:1,gridColumn:2},coords:c,ref:d}),(0,i.jsx)(ep,{flexProps:{gridColumn:"1 / span 3",gridRow:"auto",dir:a},...e})]})});eE.displayName="CircleCellStacked";let eL=()=>({key:"circle",name:()=>d.Ru._({id:"7xMmki"}),commandName:()=>d.Ru._({id:"WfQ7Cv"}),icon:s.O0T,keywords:["circle","ring","radial","donut","circular"],options:[M,F],cellOptions:[M,P],presetConfigurations:[{name:()=>d.Ru._({id:"7xMmki"}),options:{numbered:!0}}],Wrapper:ez,Cell:eI,addDirection:()=>"bottom",featureFlag:"circleSmartLayouts",defaultAttrs:{image:{source:el.Z.key}},htmlTag:"circle",imageSlot:"optional",imageType:"icon",family:"cycle"}),e_=()=>({...eL(),key:"cycle",name:()=>d.Ru._({id:"qicHbX"}),commandName:()=>d.Ru._({id:"7kXIPI"}),icon:s.yNr,htmlTag:"cycle",keywords:["cyclical","flywheel","circle","circular","recycle"],presetConfigurations:[{name:()=>d.Ru._({id:"qicHbX"}),options:{numbered:!0}}]}),eM=()=>({...eL(),key:"flower",name:()=>d.Ru._({id:"abEdHK"}),commandName:()=>d.Ru._({id:"A5sR7M"}),icon:s.xnU,keywords:["petals","clover","butterfly"],htmlTag:"flower",presetConfigurations:[{name:()=>d.Ru._({id:"abEdHK"}),options:{numbered:!0}}]}),eN=()=>({...eL(),key:"ring",name:()=>d.Ru._({id:"EKlSR5"}),commandName:()=>d.Ru._({id:"pEs88A"}),icon:s.GEE,keywords:["ring","circle","circular"],htmlTag:"ring",presetConfigurations:[{name:()=>d.Ru._({id:"EKlSR5"}),options:{numbered:!0}}]}),eT=(0,c.memo)(e=>{let{children:t,containerSize:n,onContextMenu:a}=e;return eu({containerSize:n,columnsNeeded:3})?(0,i.jsx)(eo.x,{pos:"relative","data-selection-ring":"padded",templateColumns:"1fr",templateRows:"auto auto",rowGap:ec,onContextMenu:a,dir:"ltr",children:t}):(0,i.jsx)(eo.x,{pos:"relative","data-selection-ring":"padded",onContextMenu:a,autoColumns:"1fr",autoRows:"auto",columnGap:"1.5em",rowGap:"2em",children:t})});eT.displayName="SemiCircleWrapper";let eP=(0,c.memo)(e=>eu({containerSize:e.layoutContainerSize,columnsNeeded:3})?(0,i.jsx)(eD,{...e}):(0,i.jsx)(eO,{...e}));eP.displayName="SemiCircleCell";let eO=(0,c.memo)(e=>{let{children:t,index:n,numCells:a,dragHandle:o,variant:l,direction:s,theme:d}=e,c=(0,m.yp)("center"),{roundness:u}=(0,A.M)(d),{pathRounding:p}=C.T5[u],{circleRef:h,...g}=eC({index:n,numCells:a,variant:l.key,direction:s,semi:!0,themeRoundness:p}),x=a>4?"70%":"60%";return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(r.s,{direction:"column",align:"center",justify:"flex-end",pos:"relative",zIndex:"1","data-content-reference":!0,"data-smart-layout-emphasis":!0,"data-selection-ring":"padded",sx:{...c,...(0,m.AS)("center","ltr")},mb:a>2?"-".concat(.6*g.outsideTop,"px"):void 0,children:[t,o]}),(0,i.jsx)(em,{...e,flexProps:{gridRow:2,gridColumn:"1 / span ".concat(a),alignSelf:"start",justifySelf:"center",aspectRatio:"2/1",width:"calc(".concat(x," * var(--media-scale, 1))")},coords:g,ref:h})]})});eO.displayName="SemiCircleCellTop";let eD=(0,c.memo)(e=>{let{index:t,numCells:n,direction:a,variant:r,theme:o}=e,{roundness:l}=(0,A.M)(o),{pathRounding:s}=C.T5[l],{circleRef:d,...c}=eC({index:t,numCells:n,variant:r.key,direction:a,semi:!0,themeRoundness:s});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(em,{...e,flexProps:{gridRow:1,gridColumn:1,alignSelf:"start",justifySelf:"center",aspectRatio:"2/1",width:"calc(100% * var(--media-scale, 1))"},coords:c,ref:d}),(0,i.jsx)(ep,{flexProps:{gridColumn:1,gridRow:"auto",dir:a},...e})]})});eD.displayName="SemiCircleCellStacked";let eF=()=>({...eL(),key:"semiCircle",name:()=>d.Ru._({id:"r9sPHK"}),commandName:()=>d.Ru._({id:"yLo45W"}),Wrapper:eT,Cell:eP,addDirection:()=>"right",htmlTag:"semicircle",keywords:["semicircle","arc","circle","radial"],icon:s.jiG,presetConfigurations:[{name:()=>d.Ru._({id:"r9sPHK"}),options:{numbered:!0}}]});var eH=n(93681),eW=n(83380),eB=n(54979),eV=n(81594),eG=n(90406),eU=n(4296);let eK={top:{name:"Top",icon:s.qXP},left:{name:"Left",icon:s.Usg}},eq={key:"imagePosition",defaultValue:()=>"top",Control:e=>{let{value:t,updateValue:n,editor:a,option:r}=e;return(0,i.jsx)(eU.y,{value:t,updateValue:n,defaultIcon:s.qXP,editor:a,choices:eK,option:r})},ControlMenu:(e,t,n)=>({key:n.key,label:n.name(),icon:"top"===e?s.qXP:s.Usg,items:Object.entries(eK).map(n=>{let[i,{name:a}]=n;return{key:i,label:a,icon:e===i?s.e68:void 0,onClick:()=>t(i)}})}),name:()=>d.Ru._({id:"p9OBc7"})};var eJ=n(2600),e$=n(61778),eY=n(1984),eQ=n(24221),eX=n(9104);let eZ=[{label:()=>d.Ru._({id:"yrC1Cd"}),key:"xs"},{label:()=>d.Ru._({id:"4Revpc"}),key:"sm"},{label:()=>d.Ru._({id:"agPptk"}),key:"md"},{label:()=>d.Ru._({id:"k7rCa/"}),key:"lg"},{label:()=>d.Ru._({id:"vp6Yr4"}),key:"xl"},{label:()=>d.Ru._({id:"CK1KXz"}),key:"full"}],e0={key:"shapeSize",defaultValue:()=>null,Control:e=>{let{value:t,updateValue:n,option:a}=e,r=eZ.findIndex(e=>e.key===t);-1===r&&(r=3);let{label:o}=eZ[r],l=(0,c.useCallback)(e=>{let{key:t}=eZ[e];n(t)},[n]);return(0,i.jsxs)(O.z,{spacing:2,me:2,children:[(0,i.jsx)(eX.Tz,{placement:"top",label:(0,i.jsxs)(eJ.T,{spacing:0,children:[(0,i.jsx)(e$.E,{color:"gray.400",children:a.name()}),(0,i.jsx)(e$.E,{children:o()})]}),children:(0,i.jsx)(e$.E,{fontSize:"sm",fontWeight:"600",children:(0,i.jsx)(eQ.g,{icon:a.icon,fixedWidth:!0})})}),(0,i.jsxs)(eY.Ap,{min:0,max:eZ.length-1,step:1,value:r,onChange:l,w:"60px",focusThumbOnChange:!1,colorScheme:"trueblue",size:"sm",children:[(0,i.jsx)(eY.hB,{children:(0,i.jsx)(eY.hJ,{})}),(0,i.jsx)(eX.Tz,{placement:"top",label:(0,i.jsxs)(eJ.T,{spacing:0,children:[(0,i.jsx)(e$.E,{color:"gray.400",children:a.name()}),(0,i.jsx)(e$.E,{children:o()})]}),children:(0,i.jsx)(eY.OQ,{background:"trueblue.500"})})]})]})},ControlMenu:(e,t,n)=>({key:n.key,label:n.name(),icon:s.j3q,items:eZ.map(n=>({key:n.key,label:n.label(),icon:n.key===e?s.e68:void 0,onClick:()=>t(n.key)}))}),name:()=>d.Ru._({id:"FeDgKA"}),icon:s.j3q},e1=(0,c.memo)(e=>{let{children:t,options:n,numCells:r,containerSize:o,onContextMenu:l}=e,{columns:s,lastRowAligner:d}=(0,R.Xs)({containerSize:o,options:n,numCells:r,forceBalance:!1});return(0,i.jsxs)(a.r,{columns:s*R.mc,rowGap:"2em",columnGap:"1.25em","data-selection-ring":"padded",pos:"relative",onContextMenu:l,children:[t,d]})});e1.displayName="ImagesWithTextWrapper";let e2={xs:.3,sm:.44,md:.58,lg:.72,xl:.86,full:1},e4={xs:.15,sm:.2,md:.25,lg:.3,xl:.35,full:.4},e5={xs:"lg",sm:"h3",md:"h2",lg:"h1",xl:"h1",full:"title"},e6=(0,c.memo)(e=>{var t,n,a;let{children:s,image:d,layoutOptions:u,cellOptions:h,numCells:g,layoutContainerSize:x,isContentEmpty:f,isLayoutFocused:v,variant:b,dragHandle:y,isFocused:j,direction:k,...C}=e,A="left"==u.imagePosition,z=null!==(n=u.imageShape)&&void 0!==n?n:"square",I=eB.z[z],E=b.key==e8().key,L=(null==d?void 0:d.source)==el.Z.key||E,_=u.shapeSize||!u.imageSize||L?L?e4[u.shapeSize||"md"]:e2[u.shapeSize||"full"]:u.imageSize,M=A&&!E?.5*_:_,N=null==d?void 0:null===(t=d.meta)||void 0===t?void 0:t.has_transparency,T=A?"rtl"===k?"right":"left":u.horizontalAlign,P={...(0,m.yp)(T),...(0,m.AS)(T,k)},O=null!==(a=null==h?void 0:h.color)&&void 0!==a?a:u.color,D=(0,c.useMemo)(()=>(0,S.q9)(O,0),[O]),{columns:F}=(0,R.Xs)({containerSize:x,options:u,numCells:g,forceBalance:!1}),H=1===F,W=_<=e2.xs;u.cellSize,(0,R.rO)().sm.width;let B=(0,c.useMemo)(()=>E?"min(100%, ".concat((0,R.rO)().sm.width*_,"em)"):H?"min(100%, ".concat((0,R.rO)().xl.width*_,"em)"):"100%",[_,E,H]),V=!!d&&(0,eG.Xs)(d),G=L?{aspectRatio:"1 / 1",...V&&{"svg.colorable-icon path":{fill:O||"url(#theme-accent-gradient-linear) var(--accent-color-readable)"}},...W&&A&&{mt:".175em"}}:N?{...I}:{...eH.z,...I},U=(0,K.FX)(),q=et(C.theme,U,e5[u.shapeSize||"md"],C.firstChildSize),J=(0,eW.f)(),{selectCell:$}=C,Y=(0,c.useCallback)(()=>{j?J({isOpen:!0}):null==$||$()},[$,J,j]),Q=(0,c.useCallback)(()=>{null==$||$(),J({isOpen:!0})},[$,J]);return(0,i.jsxs)(r.s,{gap:f&&!v?0:W?"1em":"1.25em",direction:A?"right"===T&&"rtl"!==k?"row-reverse":"row":"column",align:"center",justify:"center",sx:{...P,...A&&{alignItems:"flex-start"}},"data-selection-ring":"padded","data-content-reference":!0,pos:"relative",gridColumn:"span ".concat(R.mc),children:[(0,i.jsx)(o.az,{"data-smart-layout-image-drop-target":"true",className:(0,l.cx)("image"),w:"calc(".concat(100*M,"% * var(--media-scale))"),maxW:B,flexShrink:0,overflow:"hidden",sx:G,style:{...(0,m.O8)(T),...A?{"--descendant-align-self-left":"flex-start","--descendant-align-self-right":"flex-start","--descendant-align-self-center":"flex-start","--descendant-align-self":"flex-start"}:{}},children:E?(0,i.jsx)(w.R,{image:d,placeholderIfEmpty:!0,iconSize:5*_,boxProps:{w:"100%",h:"100%"},selectCell:$}):(0,i.jsx)(eV.Y,{image:d,imageShape:z,handleEditableClick:Y,handleEditableDoubleClick:Q,hasQuickActions:!0,...C})}),(0,i.jsx)(o.az,{minW:A?"6em":"100%",maxW:"100%",flex:"1",className:p.VN,"data-content-empty":f,css:D,pt:A&&E?q:0,children:s}),y]})});e6.displayName="ImageWithTextCell";let e3=()=>({key:"imagesText",name:()=>d.Ru._({id:"cDxTeG"}),commandName:()=>d.Ru._({id:"d+mR/1"}),keywords:["team","caption","images","text","layout"],icon:s.oMV,options:[eq,{...R.BM,getDefaultOnParse:()=>(0,R.rO)().sm.width},{...e0,icon:s.Cyq,name:()=>d.Ru._({id:"8J92vb"})},eB.K,{...D,defaultValue:(0,m.Ro)("left"),checkEnabled(e,t){let n=e.options.imagePosition;return(null==t?void 0:t.direction)==="rtl"?"right"!==n:"left"!==n}}],cellOptions:[P],presetConfigurations:[{name:()=>d.Ru._({id:"10G7S6"}),options:{imageShape:"square",shapeSize:"lg",horizontalAlign:"center"}},{name:()=>d.Ru._({id:"VVRqpK"}),options:{imageShape:"circle",shapeSize:"lg",horizontalAlign:"center"}}],Wrapper:e1,Cell:e6,addDirection:e=>"left"===e.imagePosition?"bottom":"right",htmlTag:"images",defaultOptions:{imageShape:"landscape"},imageSlot:"always",imageType:"image",family:"imagesText"}),e8=()=>({name:()=>d.Ru._({id:"joUkNe"}),commandName:()=>d.Ru._({id:"oEHjy6"}),key:"iconsText",icon:s.cCs,keywords:["icons","text","layout"],options:[eq,M,{...R.BM,getDefaultOnParse:()=>(0,R.rO)().sm.width},{...e0,icon:s.Cyq,name:()=>d.Ru._({id:"bwZEQG"}),defaultValue:()=>"md"},{...D,defaultValue:(0,m.Ro)("left"),checkEnabled(e,t){let n=e.options.imagePosition;return(null==t?void 0:t.direction)==="rtl"?"right"!==n:"left"!==n}}],cellOptions:[{...M,checkEnabled:e=>!e.image||(0,eG.Xs)(e.image)},P],presetConfigurations:[{name:()=>d.Ru._({id:"pG60n/"}),options:{imagePosition:"top",shapeSize:"lg"}},{name:()=>d.Ru._({id:"hscPGi"}),options:{imagePosition:"left",shapeSize:"lg"}}],Wrapper:e1,Cell:e6,addDirection:e=>"left"===e.imagePosition?"bottom":"right",defaultAttrs:{image:{source:el.Z.key}},htmlTag:"icons",imageSlot:"always",imageType:"icon",family:"imagesText"}),e7="40em",e9="0.25em",te={key:"outsideText",defaultValue:()=>!0,Control:e=>{let{value:t,updateValue:n,option:a}=e;return(0,i.jsx)(T.I,{label:a.name(),onClick:()=>n(!t),isActive:t,icon:s.LEB})},ControlMenu:(e,t,n)=>({key:n.key,label:e?d.Ru._({id:"W0lrhO"}):d.Ru._({id:"OtsbQu"}),icon:s.LEB,onClick:()=>t(!e)}),name:()=>d.Ru._({id:"OtsbQu"})};var tt=n(73758),tn=n.n(tt);let ti=(0,c.memo)(e=>{let{Step:t=td,node:n,...a}=e,{children:o,numCells:l,options:s,theme:d,direction:c}=a,u=s.horizontalAlign||"center",p=(0,m.yp)(u,c),h="funnel"===a.variant.key,g="staircase"===a.variant.key,x=tn()(l).map(e=>{let a=n.maybeChild(e);if(!a)return null;let r=a.attrs.options,o=a.attrs.image;return(0,i.jsx)(ta,{index:e,numCells:l,theme:d,isFunnel:h,alignment:u,direction:c,isStepped:g,cellOptions:r,layoutOptions:s,Step:t,image:o},e)});return(0,i.jsxs)(r.s,{direction:"column","data-selection-ring":!0,align:"stretch",gap:"1em",onContextMenu:a.onContextMenu,children:[(0,i.jsx)(r.s,{direction:"column",sx:p,contentEditable:!1,gap:e9,"data-alternate-colors":!0,children:x}),(0,i.jsx)(r.s,{gap:ec,direction:"column",children:o})]})});ti.displayName="StackedPyramidWrapper";let ta=e=>{let{index:t,numCells:n,cellOptions:a,layoutOptions:r,isFunnel:o,alignment:l,direction:s,isStepped:d,Step:c,image:u}=e,p=!d&&o&&t===n-1?{pos:"relative",bottom:"0.25em"}:d||o||0!==t?{}:{pos:"relative",top:"0.25em"},{colorVars:h}=I(r,a,t,!1);return(0,i.jsx)(c,{index:t,numCells:n,isOutside:!0,isNumbered:!0,isStacked:!0,isFunnel:o,alignment:l,direction:s,stepSx:h,image:u,children:(0,i.jsx)(ts,{index:t,image:u,...p})},t)},tr=(e,t)=>"right"===e?"right":"left"===e?"left":"ltr"===t?"left":"right",to=(0,c.memo)(e=>{let t=eu({containerSize:e.containerSize,columnsNeeded:e.options.outsideText&&!e.scaleContentToFit?3:2}),{colorVars:n}=I(e.options,void 0,void 0,!0);return t?(0,i.jsx)(ti,{...e}):(0,i.jsx)(a.r,{columns:1,autoRows:"1fr","data-selection-ring":!0,gap:e9,onContextMenu:e.onContextMenu,sx:e.options.outsideText?n:void 0,children:e.children})});to.displayName="PyramidWrapper";let tl=(0,c.memo)(e=>{let{Step:t=td,isFunnel:n=!1,isStepped:a=!1,alignment:l="center",...s}=e,{children:d,layoutOptions:c,index:u,numCells:h,dragHandle:g,direction:x}=s,f=c.outsideText,v=eu({containerSize:s.layoutContainerSize,columnsNeeded:f&&!s.scaleContentToFit?3:2}),{colorVars:b}=I(c,s.cellOptions,u),{colorVars:y}=I(c,s.cellOptions,u,!0);if(v)return(0,i.jsx)(ep,{...s});let w=c.numbered,k=tr(l,x),C={...(0,m.yp)(k,x),...(0,m.AS)(k,x)},S=a?{bottom:"-1px"}:n?{top:"calc(-1px - ".concat(e9," / 2 )")}:{bottom:"calc(-1px - ".concat(e9," / 2 )")},A=n?0===u:u===h-1,z=a?"0.5em":e9,R=w&&f&&!a,E=R&&n&&u===h-1?{pos:"relative",bottom:"15%"}:R&&!n&&0===u?{pos:"relative",top:"15%"}:{},L="rtl"===x&&"left"===l?"row-reverse":"ltr"===x&&"right"===l?"row-reverse":"row";return(0,i.jsxs)(r.s,{"data-selection-ring":!0,"data-content-reference":!0,pos:"relative",w:"100%",direction:L,justify:f||"center"!==l?void 0:"center",children:[(0,i.jsxs)(t,{numCells:h,index:u,isFunnel:n,isOutside:f,isNumbered:w,alignment:l,selectCell:s.selectCell,stepSx:b,direction:x,image:s.image,children:[f?(0,i.jsx)(ts,{index:u,image:s.image,selectCell:s.selectCell,...E}):d,g]}),f&&(0,i.jsxs)(r.s,{direction:"column",justify:"center",minW:0,flex:1,px:j.xb,py:j.xb,pos:"relative",sx:C,className:p.VN,css:y,children:[d,!A&&(0,i.jsx)(o.az,{contentEditable:!1,position:"absolute",...S,insetStart:z,insetEnd:z,h:"var(--line-thickness)",transform:"scaleY(0.5)",className:p.eI})]})]})});tl.displayName="PyramidCell";let ts=(0,c.memo)(e=>{let{index:t,image:n,selectCell:a,...r}=e;return(0,i.jsx)(e$.E,{className:(0,l.cx)(u.U6,p.lR),fontSize:"1.25em",display:"flex",sx:(0,m.yp)("center"),pos:"relative",contentEditable:!1,...r,children:(0,i.jsx)(w.R,{image:n,number:t+1,iconSize:1.125,selectCell:a})})});ts.displayName="PyramidLabel";let td=(0,c.memo)(e=>{let{numCells:t,index:n,isFunnel:a,isOutside:o,isStacked:l,children:s,alignment:d,selectCell:c,stepSx:u,direction:g}=e,x=a?t-n-1:n,{width:f,height:v,ref:b}=(0,h.Lh)(),y=o?0:45,w=o&&!l?50:100,k=tu(t,x,y),C=.99*tu(t,x+1,y),S=w/100*C,A=(0,m.yp)(d,g),z=(0,m.AS)(d,g),I=l?void 0:o?{ms:"center"===d?"".concat((w-S)/2,"%"):void 0}:{maxW:"calc(".concat(e7," * ").concat(S/100,")")};return(0,i.jsxs)(r.s,{direction:"column",ref:b,"data-testId":"pyramid-step",pos:"relative",w:"".concat(S,"%"),sx:{...A,...z,...u},onClick:o?c:void 0,contentEditable:!o&&void 0,...I,children:[(0,i.jsx)(tc,{width:f,height:v,alignment:d,topSize:a?1:k/C,bottomSize:a?k/C:1}),(0,i.jsx)(r.s,{direction:"column",justify:"center",h:"100%",p:o?"0.5em":j.xb,boxSizing:"border-box",sx:{...A,alignItems:o?A.alignItems:"stretch"},className:p.lR,w:"".concat((k+C)/2/C*100,"%"),minW:"3em",children:s})]})});td.displayName="PyramidStep";let tc=(0,c.memo)(e=>{let{width:t,height:n,topSize:a,bottomSize:r,alignment:l}=e,s=t*(1-a)/2,d=t*(1-r)/2,c="left"===l?"\n    M 0 0\n    L ".concat(t-2*s," 0\n    L ").concat(t-2*d," ").concat(n,"\n    L 0 ").concat(n,"\n    L 0 0 Z"):"right"===l?"\n    M ".concat(2*s," 0\n    L ").concat(t," 0\n    L ").concat(t," ").concat(n,"\n    L ").concat(2*d," ").concat(n,"\n    L ").concat(2*s," 0 Z"):"\n    M ".concat(s," 0\n    L ").concat(t-s," 0\n    L ").concat(t-d," ").concat(n,"\n    L ").concat(d," ").concat(n,"\n    L ").concat(s," 0 Z");return(0,i.jsx)(o.az,{as:"svg",pos:"absolute",inset:"0",overflow:"visible",contentEditable:!1,"data-testid":"trapezoid-svg",w:"".concat(t,"px"),h:"".concat(n,"px"),children:(0,i.jsx)(o.az,{as:"path",d:c,className:p.D6})})});tc.displayName="TrapezoidSVG";let tu=(e,t,n)=>n+t/e*(100-n),tp={...F,checkEnabled:e=>e.options.outsideText},th=()=>({key:"pyramid",name:()=>d.Ru._({id:"MYceoI"}),commandName:()=>d.Ru._({id:"CPkQNq"}),icon:s.IJv,options:[te,tp,M],cellOptions:[M,P],presetConfigurations:[{name:()=>d.Ru._({id:"Ud6L0K"}),options:{outsideText:!1}},{name:()=>d.Ru._({id:"q9tXj9"}),options:{numbered:!0,outsideText:!0}}],Wrapper:to,Cell:tl,addDirection:()=>"bottom",htmlTag:"pyramid",imageSlot:"optional",imageType:"icon",family:"pyramid"}),tm=(0,c.memo)(e=>(0,i.jsx)(tl,{...e,isFunnel:!0}));tm.displayName="FunnelCell";let tg=()=>({...th(),key:"funnel",name:()=>d.Ru._({id:"MWYJBI"}),commandName:()=>d.Ru._({id:"HTZVrr"}),icon:s.AKc,htmlTag:"funnel",Cell:tm,presetConfigurations:[{name:()=>d.Ru._({id:"rSrvFr"}),options:{outsideText:!1}},{name:()=>d.Ru._({id:"dXD9N4"}),options:{numbered:!0,outsideText:!0}}]}),tx=(0,c.memo)(e=>{let{children:t,options:n,containerSize:a,onContextMenu:o}=e,l=(0,m.yp)(n.horizontalAlign||"left"),{colorVars:s}=I(n);if(eu({containerSize:a,columnsNeeded:e.options.outsideText&&!e.scaleContentToFit?3:2}))return(0,i.jsx)(ti,{...e,Step:tf});let d={...l,...n.outsideText?s:{}};return(0,i.jsx)(r.s,{direction:"column","data-selection-ring":!0,gap:"0.5em",sx:d,onContextMenu:o,children:t})});tx.displayName="StaircaseWrapper";let tf=(0,c.memo)(e=>{let{numCells:t,index:n,isOutside:a,isStacked:o,children:l,alignment:s,direction:d,selectCell:c,stepSx:u}=e,h={...(0,m.yp)(s,d),alignItems:a?"center":"stretch",...u},g=a&&!o?50:100,x=g/100*tu(t,n+1,a?0:45),f=o?void 0:a?{ms:"center"===s?"".concat((g-x)/2,"%"):void 0}:{maxW:"calc(".concat(e7," * ").concat(x/100,")")};return(0,i.jsx)(r.s,{py:a?"0.5em":j.xb,px:j.xb,sx:h,className:p.SA,w:"".concat(x,"%"),boxSizing:"border-box",...f,direction:"column",justify:"center",contentEditable:!a&&void 0,onClick:a?c:void 0,pos:"relative",children:l})});tf.displayName="StaircaseStep";let tv=(0,c.memo)(e=>{let t=e.layoutOptions.horizontalAlign;return(0,i.jsx)(tl,{...e,Step:tf,isFunnel:!1,isStepped:!0,alignment:t})});tv.displayName="StaircaseCell";let tb=()=>({...th(),key:"staircase",name:()=>d.Ru._({id:"CFVHFO"}),commandName:()=>d.Ru._({id:"DuZtoX"}),options:[...th().options,{...D,defaultValue:(0,m.Ro)("left")}],presetConfigurations:[{name:()=>d.Ru._({id:"y9fkH/"}),options:{outsideText:!1}},{name:()=>d.Ru._({id:"nGMGDy"}),options:{numbered:!0,outsideText:!0}}],icon:s.UER,Wrapper:tx,Cell:tv,htmlTag:"staircase",imageSlot:"optional",imageType:"icon",family:"staircase"});var ty=n(1906);let tw=(0,c.memo)(e=>{let{children:t,options:n,containerSize:r,numCells:o,onContextMenu:l}=e,{columns:s,lastRowAligner:d}=(0,R.Xs)({containerSize:r,options:n,numCells:o,forceBalance:!1});return(0,i.jsxs)(a.r,{onContextMenu:l,columns:s*R.mc,rowGap:"3em",columnGap:"1.5em","data-selection-ring":"padded",pos:"relative",borderRadius:"var(--box-border-radius)",children:[t,d]})});tw.displayName="CircleStatsWrapper";let tj={xs:.35,sm:.48,md:.61,lg:.74,xl:.87,full:1},tk=(0,c.memo)(e=>{let{theme:t,children:n,layoutOptions:a,cellOptions:s,label:d,updateAttributes:c,isContentEmpty:h,isLayoutFocused:g,dragHandle:x,index:f,direction:v}=e,b=(0,A.M)(t),w="left"==a.imagePosition,j=w?"rtl"===v?"right":"left":a.horizontalAlign,k=(0,m.yp)(j),C=(0,ty.dD)(e),S=(0,ef.JL)({innerRadius:41,outerRadius:50}),z=S({startAngle:0,endAngle:2*C*Math.PI}),E=S({startAngle:0,endAngle:2*Math.PI}),L=tj[a.shapeSize]||1,_="min(100%, ".concat((0,R.rO)().md.width*L,"em)"),M=(0,K.FX)(),{colorOverride:N}=I(a,s,f,!0),{colorVars:T}=I(a,s,f),{colorVars:P}=I(a,s,f,!1),{useTransparentTrack:O,shouldRecolorTrack:D}=tS(b,N);return(0,i.jsxs)(r.s,{borderRadius:"var(--box-border-radius)",direction:w?"row":"column",align:"center",justify:"start","data-selection-ring":"padded","data-content-reference":!0,pos:"relative",gap:h&&!g?0:"1em",sx:k,className:p.VN,gridColumn:"span ".concat(R.mc),children:[(0,i.jsxs)(r.s,{direction:"column",align:"center",justify:"center",width:"".concat(100*L,"%"),maxW:_,pos:"relative",contentEditable:!1,py:"0.25em",children:[(0,i.jsx)(y,{value:d||"",updateAttributes:c,pos:"absolute",insetStart:"".concat(9,"%"),className:(0,l.cx)(u.U6),fontSize:M?"".concat(2*L,"em"):"".concat(2.5*L,"em"),lineHeight:1,display:"flex",alignItems:"center",sx:(0,m.yp)("center"),style:{width:"".concat(82,"%")}}),(0,i.jsxs)("svg",{width:"100%",viewBox:"".concat(-50," ").concat(-50," ").concat(100," ").concat(100),overflow:"visible",children:[(0,i.jsx)(o.az,{as:"path",d:E||void 0,className:p.D6,style:{fill:O?"var(--card-color)":void 0},"data-testid":"stats-track",css:D?T:void 0}),(0,i.jsx)(o.az,{as:"path",d:z||void 0,className:p._B,"data-testid":"stats-fill",css:P})]})]}),(0,i.jsx)(o.az,{w:"100%","data-content-empty":h,children:n}),x]})});tk.displayName="CircleStatsCell";let tC=()=>({key:"circleStats",name:()=>d.Ru._({id:"mvpFPS"}),commandName:()=>d.Ru._({id:"4Rg7EO"}),icon:s.ItB,options:[eq,R.BM,{...e0,name:()=>d.Ru._({id:"1C+7U1"}),icon:s.GEE},M,{...D,defaultValue:(0,m.Ro)("center"),checkEnabled(e,t){let n=e.options.imagePosition;return(null==t?void 0:t.direction)==="rtl"?"right"!==n:"left"!==n}}],presetConfigurations:[{name:()=>d.Ru._({id:"MpKR5P"}),options:{shapeSize:"lg"},cellAttrs:{label:"75"}}],cellOptions:[M,P],Wrapper:tw,Cell:tk,defaultAttrs:{label:"50%"},addDirection:()=>"right",keywords:["stats","circle"],htmlTag:"circleStats",family:"stats"}),tS=(e,t)=>{let n="default"!==e.shapeColorScheme;return{useTransparentTrack:"none"===e.shapeFill||"solid"===e.shapeFill&&"custom"===e.shapeColorScheme||t&&n,shouldRecolorTrack:n}},tA=(0,c.memo)(e=>{let{children:t,options:n,containerSize:r,numCells:o,onContextMenu:l}=e,{columns:s,lastRowAligner:d}=(0,R.Xs)({containerSize:r,options:n,numCells:o,forceBalance:!1});return(0,i.jsxs)(a.r,{onContextMenu:l,columns:s*R.mc,rowGap:"3em",columnGap:"1.5em","data-selection-ring":"padded",pos:"relative",borderRadius:"var(--box-border-radius)",children:[t,d]})});tA.displayName="BarStatsWrapper";let tz=(0,c.memo)(e=>{let{theme:t,children:n,layoutOptions:a,cellOptions:s,label:d,updateAttributes:c,isContentEmpty:h,isLayoutFocused:g,dragHandle:x,index:f}=e,v=(0,A.M)(t),b=a.horizontalAlign,w=(0,m.yp)(b),j=(0,ty.dD)(e),{colorOverride:k}=I(a,s,f,!0),{colorVars:C}=I(a,s,f),{colorVars:S}=I(a,s,f,!1),{useTransparentTrack:z,shouldRecolorTrack:E}=tS(v,k);return(0,i.jsxs)(r.s,{borderRadius:"var(--box-border-radius)",direction:"column",align:"center",justify:"start",sx:w,"data-selection-ring":"padded","data-content-reference":!0,pos:"relative",gap:h&&!g?0:"0.75em",gridColumn:"span ".concat(R.mc),className:p.VN,children:[(0,i.jsxs)(r.s,{direction:"row",align:"center",justify:"stretch",width:"100%",pos:"relative",contentEditable:!1,gap:"0.75em",children:[(0,i.jsxs)(o.az,{flex:"1",my:"0.5em",pos:"relative",borderRadius:"var(--box-border-radius)",children:[(0,i.jsx)(o.az,{pos:"absolute",inset:"0",className:p.SA,style:z?{background:"var(--card-color)"}:void 0,css:E?C:void 0}),(0,i.jsx)(o.az,{w:"".concat(100*j,"%"),h:"1.25em",pos:"relative",className:p.P7,borderRadius:"inherit",css:S})]}),(0,i.jsx)(y,{value:d||"",updateAttributes:c,className:(0,l.cx)(u.U6),lineHeight:1,display:"flex",alignItems:"center",sx:w,fontSize:"1.25em",inputProps:{textAlign:"right",width:"4em",py:0},minW:"1em"})]}),(0,i.jsx)(o.az,{w:"100%","data-content-empty":h,children:n}),x]})});tz.displayName="BarStatsCell";let tI=()=>({key:"barStats",name:()=>d.Ru._({id:"LYRXtx"}),commandName:()=>d.Ru._({id:"MSp/ys"}),icon:s.dYn,options:[R.BM,M,{...D,defaultValue:(0,m.Ro)("left")}],presetConfigurations:[{name:()=>d.Ru._({id:"oWD4zD"}),options:{horizontalAlign:"left"},cellAttrs:{label:"75"}},{name:()=>d.Ru._({id:"HEnTGz"}),options:{horizontalAlign:"right"},cellAttrs:{label:"75"}}],cellOptions:[M,P],Wrapper:tA,Cell:tz,defaultAttrs:{label:"50%"},addDirection:()=>"right",keywords:["stats","bar","progress","number","percentage"],htmlTag:"percentages",family:"stats"}),tR=(0,c.memo)(e=>{let{children:t,options:n,containerSize:r,numCells:o,onContextMenu:l}=e,{columns:s,lastRowAligner:d}=(0,R.Xs)({containerSize:r,options:n,numCells:o,mobileMaxColumns:1,forceBalance:!1});return(0,i.jsxs)(a.r,{onContextMenu:l,columns:s*R.mc,rowGap:"3em",columnGap:"1.5em","data-selection-ring":"padded",pos:"relative",borderRadius:"var(--box-border-radius)",children:[t,d]})});tR.displayName="PlainStatsWrapper";let tE={xs:2,sm:2.65,md:3.3,lg:3.95,xl:4.6,full:5.25},tL=(0,c.memo)(e=>{let{children:t,layoutOptions:n,cellOptions:a,label:s,isContentEmpty:d,isLayoutFocused:c,updateAttributes:h,index:g,dragHandle:x}=e,{headingColorCss:f,colorVars:v}=I(n,a,g,!0),b=n.horizontalAlign,w=(0,m.yp)(b),j=tE[n.shapeSize||"md"],k={...w,...v},C=(0,K.FX)();return(0,i.jsxs)(r.s,{borderRadius:"var(--box-border-radius)",direction:"column",align:"center",justify:"start","data-selection-ring":"padded","data-content-reference":!0,pos:"relative",gap:d&&!c?0:"0.75em",sx:k,className:p.VN,gridColumn:"span ".concat(R.mc),children:[(0,i.jsx)(r.s,{direction:"column",align:"center",justify:"center",width:"100%",pos:"relative",contentEditable:!1,py:"0.5em",css:f,fontSize:C?"0.75em":"1em",children:(0,i.jsx)(y,{value:s||"",updateAttributes:h,className:(0,l.cx)(u.U6),fontSize:"".concat(j,"em"),lineHeight:1,display:"flex",alignItems:"center",sx:(0,m.yp)(b||"center"),style:{width:"100%"},placeholder:""})}),(0,i.jsx)(o.az,{w:"100%","data-content-empty":d,children:t}),x]})});tL.displayName="PlainStatsCell";let t_=()=>({key:"stats",name:()=>d.Ru._({id:"29Hx9U"}),commandName:()=>d.Ru._({id:"v2fVzA"}),icon:s.Bi7,options:[R.BM,{...e0,name:()=>d.Ru._({id:"IfKwpr"}),icon:s.ACh},M,{...D,defaultValue:(0,m.Ro)("center")}],presetConfigurations:[{name:()=>d.Ru._({id:"cYvymx"}),options:{shapeSize:"lg"},cellAttrs:{label:"75"}}],cellOptions:[M,P],Wrapper:tR,Cell:tL,defaultAttrs:{label:"50%"},addDirection:()=>"right",keywords:["stats"],htmlTag:"numbers",family:"stats"}),tM="1.5em",tN=(e,t,n)=>{let i=(0,K.FX)(),{columns:a}=(0,R.Xs)({containerSize:n,numCells:t,options:e,forceBalance:!0});return"vertical"===e.orientation||i||t>1&&1===a?{columns:1,isHorizontal:!1}:{columns:a,isHorizontal:!0}},tT=(0,c.memo)(e=>{let{options:t,numCells:n,containerSize:r,children:o,onContextMenu:l}=e,{isHorizontal:s,columns:d}=tN(t,n,r),c=s?{columns:d,rowGap:tM,columnGap:tM}:{columns:1};return(0,i.jsx)(a.r,{"data-selection-ring":!0,...c,pos:"relative",onContextMenu:l,children:o})});tT.displayName="StepsWrapper";let tP=(0,c.memo)(e=>{let{layoutOptions:t,children:n,numCells:a,layoutContainerSize:l,dragHandle:s,cellOptions:d,index:c}=e,{columns:u,isHorizontal:h}=tN(t,a,l),g=t.horizontalAlign,x=(0,m.yp)(g||"left"),{colorVars:f}=I(t,d,e.index,!0),v=c%u+1,b=h?0:"".concat(function(e){let t=e%6;return t<=3?1.5*t:4.5-(t-3)*1.5}(c),"em");return(0,i.jsxs)(r.s,{direction:h?"column":"row","data-selection-ring":!0,"data-content-reference":!0,pos:"relative",gap:tM,pt:"".concat((u-v)*1.5,"em"),pb:h?0:j.xb,paddingInlineStart:b,children:[(0,i.jsx)(tO,{...e,isHorizontal:h}),(0,i.jsx)(o.az,{flex:"1",sx:{...x,...f},className:p.VN,children:n}),s]})});tP.displayName="StepsCell";let tO=(0,c.memo)(e=>{let{layoutOptions:t,cellOptions:n,index:a,isHorizontal:o}=e,{colorVars:l}=I(t,n,a);return(0,i.jsx)(r.s,{contentEditable:!1,align:"center",justify:"center",position:"relative",sx:{...l,...(0,m.yp)("center")},...o?{width:"100%",height:"".concat(1,"em")}:{minWidth:"".concat(.75,"em"),width:"".concat(.75,"em"),height:"100%"},className:p.SA})}),tD=()=>({key:"steps",name:()=>d.Ru._({id:"A9onc2"}),commandName:()=>d.Ru._({id:"uAtxjM"}),icon:s.o97,options:[{...H,defaultValue:()=>"horizontal"},M,{...D,defaultValue:(0,m.Ro)("left")},{...R.BM,checkEnabled:e=>"vertical"!==e.options.orientation}],presetConfigurations:[{name:()=>d.Ru._({id:"087akc"}),options:{orientation:"horizontal",horizontalAlign:"left"},hideIfVertical:!0},{name:()=>d.Ru._({id:"DCkonM"}),options:{orientation:"vertical",horizontalAlign:"left"}}],cellOptions:[M,P],Wrapper:tT,Cell:tP,addDirection:()=>"right",htmlTag:"steps",keywords:["steps","sequence","ordered"],defaultOptions:{cellSize:(0,R.rO)().sm.width},family:"staircase"}),tF=(0,c.memo)(e=>{let{children:t,onContextMenu:n}=e;return(0,i.jsx)(r.s,{gap:"1em",wrap:"wrap","data-selection-ring":!0,pos:"relative",onContextMenu:n,children:t})});tF.displayName="TextBoxesWrapper";let tH=(0,c.memo)(e=>{let{children:t,layoutOptions:n,cellOptions:a,numCells:r,layoutContainerSize:l,dragHandle:s,index:d}=e,{columns:c}=(0,R.Xs)({options:n,numCells:r,containerSize:l}),{colorVars:u}=I(n,a,d),h=n.horizontalAlign,g=(0,m.yp)(h),x={...u,...g};return(0,i.jsxs)(o.az,{flex:"1 1 auto",w:"calc(".concat(100/c,"% - ").concat("1em",")"),boxSizing:"border-box",p:j.xb,"data-content-reference":!0,"data-selection-ring":!0,pos:"relative",sx:x,className:p.SA,children:[t,s]})});tH.displayName="TextBoxCell";let tW=()=>({key:"textBoxes",name:()=>d.Ru._({id:"b7qbjN"}),commandName:()=>d.Ru._({id:"xAk5nC"}),icon:s.n2$,options:[R.BM,M,D],cellOptions:[M,P],presetConfigurations:[{name:()=>d.Ru._({id:"b7qbjN"}),options:{horizontalAlign:"center"}}],Wrapper:tF,Cell:tH,addDirection:()=>"right",htmlTag:"boxes",keywords:["textbox","layout"],family:"textBoxes"});var tB=n(7908),tV=n(78354),tG=n(95640);let tU={key:"hasLine",defaultValue:()=>!0,Control:e=>{let{value:t,updateValue:n,option:a}=e;return(0,i.jsx)(T.I,{label:a.name(),onClick:()=>n(!t),isActive:t,icon:s.CCK})},ControlMenu:(e,t,n)=>({key:n.key,label:e?(0,i.jsx)(tG.x6,{id:"IELtbA"}):(0,i.jsx)(tG.x6,{id:"81xMlD"}),icon:s.CCK,onClick:()=>t(!e)}),name:()=>d.Ru._({id:"aPb1AT"})},tK={key:"twoSided",defaultValue:()=>!0,Control:e=>{let{value:t,updateValue:n,option:a}=e;return(0,i.jsx)(T.I,{label:a.name(),onClick:()=>n(!t),isActive:t,icon:s.v6v,testId:"smart-layout-two-sided-option"})},ControlMenu:(e,t,n)=>({key:n.key,label:e?d.Ru._({id:"x+f1ZW"}):d.Ru._({id:"o18EC+"}),icon:s.v6v,onClick:()=>t(!e)}),name:()=>d.Ru._({id:"ovs7iP"})},tq={base:!1,md:!0},tJ={base:!1,md:!0},t$=e=>{let t=(0,tV.h5)(tq)||!1,n=(0,tV.h5)(tJ)||!1,i="horizontal"===e.orientation&&n,a=e.twoSided&&(i||t);return{isHorizontal:i,isTwoSided:a}},tY=(0,c.memo)(e=>{let{children:t,options:n,direction:a,onContextMenu:r}=e,{isHorizontal:l,isTwoSided:s}=t$(n),d=l?{templateRows:"auto 0px auto",autoColumns:"1fr",justifyContent:"center",columnGap:"1.25em"}:{templateColumns:s?"1fr 0px 1fr":"0px 0px 1fr",autoRows:"auto",justifyContent:"center",rowGap:"2em"},c=l?(0,i.jsx)(o.az,{gridRow:2,gridColumn:1,"data-spotlight-dim":!0,contentEditable:!1,children:(0,i.jsx)(o.az,{position:"absolute",height:"var(--line-thickness)",width:"100%",insetX:"0",insetBlockStart:s?void 0:"".concat(1.125,"em"),className:p.eI})}):(0,i.jsx)(q.o,{gridColumn:2,gridRow:1,"data-spotlight-dim":!0,contentEditable:!1,children:(0,i.jsx)(o.az,{position:"absolute",width:"var(--line-thickness)",insetY:"0",left:s||"rtl"===a?void 0:"0",right:s||"ltr"===a?void 0:"0",className:p.eI,ms:s?void 0:"".concat(1.125,"em")})});return(0,i.jsxs)(eo.x,{...d,"data-selection-ring":"padded",pos:"relative",onContextMenu:r,children:[c,t,s&&(0,i.jsx)(o.az,{...l?{gridColumn:"1 / span 1",gridRow:3,minW:"0.5fr"}:{gridColumn:3,gridRow:"1 / span 1",minH:"".concat(4,"em")},contentEditable:!1})]})});tY.displayName="TimelineWrapper";let tQ=(0,c.memo)(e=>{let{children:t,layoutOptions:n,index:a,dragHandle:l,cellOptions:s,direction:d}=e,c=a+1,{isHorizontal:u,isTwoSided:h}=t$(n),g=h&&c%2==1,x=n.hasLine?"inside":"none",{colorVars:f}=I(n,s,a,!0),v=(0,K.FX)(),b="".concat(("inside"===x?v?1.5:3:0)+("none"===x?1.125:0)+(u?1:2)+(h?0:1.125),"em"),y={right:"rtl"===d?"left":"right",left:"rtl"===d?"right":"left"},w=et(e.theme,v,"h3",e.firstChildSize),j=u?{minW:"min(100%, ".concat(8,"em)"),...(0,m.yp)("center"),...f}:{minH:h?"".concat(8,"em"):void 0,...(0,m.yp)(g?y.right:y.left),...(0,m.AS)(g?y.right:y.left,d),...f,mt:w};return(0,i.jsxs)(r.s,{minW:"0",position:"relative",transitionProperty:"border, padding, right, margin","data-selection-ring":"padded","data-content-reference":!0,...u?{gridColumn:"span 2",gridRow:g?1:3,align:g?"flex-end":"flex-start",justify:"center",transformOrigin:g?"center bottom":"center top",pt:g?void 0:b,pb:g?b:void 0,px:"".concat(1,"em")}:{gridRow:"span 2",gridColumn:g?1:3,align:"flex-start",transformOrigin:g?"right center":"left center",ps:g?void 0:b,pe:g?b:void 0},"data-test-timeline-item":a,children:[(0,i.jsx)(tX,{...e}),(0,i.jsxs)(o.az,{sx:j,className:p.VN,flex:"1",maxW:"100%",children:[t,l]})]})});tQ.displayName="TimelineCell";let tX=(0,c.memo)(e=>{let{direction:t,index:n,layoutOptions:a}=e,{isHorizontal:r,isTwoSided:l}=t$(a),s=1.125*(l?0:1),d=l&&n%2==0,c=a.hasLine?"inside":"none",[u,h]=(0,tB.yz)(t),m=r?d?{bottom:"".concat(s,"em"),transform:"translateY(50%)"}:{top:"".concat(s,"em"),transform:"translateY(-50%)"}:d?{[h]:"".concat(s,"em"),transform:"translateX(".concat("rtl"===t?"-50":"50","%)")}:{[u]:"".concat(s,"em"),transform:"translateX(".concat("rtl"===t?"50":"-50","%)")},g=(0,K.FX)(),x="none"===c?0:"inside"===c?"".concat(g?1.5:3,"em"):"100%",f=r?{height:x,width:"var(--line-thickness)",[u]:"50%",top:d?void 0:"50%",bottom:d?"50%":void 0,transform:"translateX(".concat("rtl"===t?"50":"-50","%)")}:{width:x,height:"var(--line-thickness)",top:"50%",transform:"translateY(-50%)",[u]:d?void 0:"calc(100% - var(--line-thickness))",[h]:d?"calc(100% - var(--line-thickness))":void 0};return(0,i.jsx)(Z,{...e,positionProps:{...m,position:"absolute"},markerFontSize:"h3",children:"none"!==c&&(0,i.jsx)(o.az,{position:"absolute",zIndex:"-1","data-testid":"timeline-line",...f,className:p.eI})})});tX.displayName="TimelineCellMarker";let tZ=()=>({key:"timeline",name:()=>d.Ru._({id:"cklVjM"}),commandName:()=>d.Ru._({id:"jJ1FpU"}),baseHorizontalAlign:(0,m.Ro)("center"),icon:s.o7M,options:[H,tK,F,tU,M],cellOptions:[M,P],presetConfigurations:[{name:()=>d.Ru._({id:"kJxpDz"}),options:{twoSided:!1,hasLine:!0,orientation:"horizontal"}},{name:()=>d.Ru._({id:"SZY+UQ"}),options:{twoSided:!0,hasLine:!0,orientation:"horizontal"}},{name:()=>d.Ru._({id:"eYIHBO"}),options:{twoSided:!1,hasLine:!0,orientation:"vertical"}},{name:()=>d.Ru._({id:"QlzWAt"}),options:{twoSided:!0,hasLine:!0,orientation:"vertical"}}],Wrapper:tY,Cell:tQ,addDirection:e=>"horizontal"===e.orientation?"right":"bottom",isFullWidth:e=>"horizontal"===e.orientation,htmlTag:"timeline",keywords:["timeline","layout","list","horizontal","vertical"],imageSlot:"optional",imageType:"icon",family:"timeline"}),t0=()=>er(),t1=()=>[er(),tW(),e3(),e8(),tZ(),U(),t_(),tC(),tI(),th(),tg(),tb(),tD(),e_(),eM(),eL(),eN(),eF()],t2=()=>t1().reduce((e,t)=>(e[t.key]=t,e),{}),t4=e=>e&&t2()[e]||t0()},1906:(e,t,n)=>{"use strict";n.d(t,{dD:()=>r,x9:()=>d});var i=n(17228),a=n.n(i);let r=e=>{let{label:t}=e,n=d(t);return n?a()(n/100,0,1):0},o=/[0-9,.]+/g,l=/[,.](?=\d{3})/g,s=/([0-9]+)\s?\/\s?([0-9]+)/g,d=e=>{if(e){if("number"==typeof e)return e;try{var t,n;let i=null===(t=e.match(s))||void 0===t?void 0:t[0];if(i){let[e,t]=i.split("/").map(e=>e.trim());return 100*parseFloat(e)/parseFloat(t)}let a=null===(n=e.match(o))||void 0===n?void 0:n[0],r=null==a?void 0:a.replaceAll(l,"");return r?parseFloat(r):void 0}catch(t){console.error("[SmartLayout] Failed to parse label number: ".concat(e),t);return}}}},85700:(e,t,n)=>{"use strict";n.d(t,{n:()=>i});let i=n(51151).Ay.extend({parseHTML:()=>[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration=line-through",consuming:!1},{style:"text-decoration-line=line-through",consuming:!1}],addKeyboardShortcuts(){return{"Mod-Shift-x":()=>this.editor.commands.toggleStrike()}}})},38234:(e,t,n)=>{"use strict";n.d(t,{e$:()=>g,Rj:()=>m});var i=n(81570),a=n(73686),r=n(13236);let o=new i.hs("suggestion"),l={from:0,to:0};var s=n(9104),d=n(17228),c=n.n(d),u=n(14041),p=n(29097),h=n(80915);let m=e=>{let{ref:t,selectItem:n,options:i}=e,[a,r]=(0,u.useState)(0),o=(0,u.useRef)(null),l=(0,u.useRef)({selectedIndex:a,options:i,selectItem:n});return l.current={selectedIndex:a,options:i,selectItem:n},(0,u.useImperativeHandle)(t,()=>{let e=e=>{let{key:t}=e,n=l.current;return"ArrowUp"===t?(e.preventDefault(),n.selectedIndex<=0?r(i.length-1):r(c()(n.selectedIndex-1,0,n.options.length-1))):"ArrowDown"===t?(e.preventDefault(),n.selectedIndex>=n.options.length-1?r(0):r(c()(n.selectedIndex+1,0,n.options.length-1))):("Enter"===t||"Tab"===t)&&(e.preventDefault(),n.options.length>0&&n.selectItem(a)),e.stopPropagation(),e.preventDefault(),!0};return{onKeyDown:t=>{let{event:n}=t;return!!["ArrowUp","ArrowDown","Enter","Tab"].includes(n.key)&&e(n)}}}),(0,u.useEffect)(()=>{if(o.current){var e;null==o||null===(e=o.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}},[a]),{selectedIndex:a,selectedItemEl:o}},g=e=>{let{char:t,MenuComponent:n,pluginKey:d,command:c,allowSpaces:u=!1,...m}=e;return r.YY.create({...m,addOptions:()=>({HTMLAttributes:{},suggestion:{char:t,pluginKey:d,allowSpaces:u,startOfLine:!1,command:c,render:()=>{let e=null,t=null;return{onStart:i=>{if(t&&e){e.updateProps(i),t.setProps({getReferenceClientRect:i.clientRect}),t.show();return}e=new h.N(n,{props:i,editor:i.editor});let a=i.editor.view.dom.parentElement;t=(0,p.Ay)(a,{getReferenceClientRect:i.clientRect,appendTo:()=>document.body,content:e.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"bottom-start",zIndex:s.t1.zIndices.dropdown,popperOptions:{modifiers:[{name:"preventOverflow",options:{padding:{bottom:8}}},{name:"flip",options:{fallbackPlacements:["auto-start"]}}]}})},onUpdate(n){null==e||e.updateProps(n),null==t||t.setProps({getReferenceClientRect:n.clientRect})},onKeyDown(n){var i;return"Escape"===n.event.key?(null==t||t.destroy(),null==e||e.destroy(),t=null,e=null,!0):null==e?void 0:null===(i=e.ref)||void 0===i?void 0:i.onKeyDown(n)},onExit(n){!0!==d.getState(n.editor.view.state).active&&(null==t||t.destroy(),null==e||e.destroy(),t=null,e=null)}}}}}),addProseMirrorPlugins(){return[function(e){let t,{pluginKey:n=o,editor:s,char:d="@",allowSpaces:c=!1,prefixSpace:u=!0,startOfLine:p=!1,decorationTag:h="span",decorationClass:m="suggestion",command:g=()=>null,items:x=()=>[],render:f=()=>({}),allow:v=()=>!0}=e,b=null==f?void 0:f(),y=e=>{e.dispatch(e.state.tr.setMeta(n,{active:!1,decorationId:"",key:null,range:l,query:null,text:null,composing:!1}))};return new i.k_({key:n,view(){return{update:async(e,n)=>{var i,a,r,o,l;let d=null===(i=this.key)||void 0===i?void 0:i.getState(n),c=null===(a=this.key)||void 0===a?void 0:a.getState(e.state),u=d.active&&c.active&&d.range.from!==c.range.from,p=!d.active&&c.active,h=d.active&&!c.active,m=!p&&!h&&d.query!==c.query,f=p||u,v=m&&!u,y=h||u;if(!f&&!v&&!y)return;let w=y&&!f?d:c,j=document.querySelector('[data-decoration-id="'.concat(w.decorationId,'"]'));t={editor:s,range:w.range,query:w.query,text:w.text,items:v||f?await x({editor:s,query:w.query}):[],command:e=>{g({editor:s,range:w.range,props:e})},decorationNode:j,clientRect:j?()=>{var e;let{decorationId:t}=null===(e=this.key)||void 0===e?void 0:e.getState(s.state);return document.querySelector('[data-decoration-id="'.concat(t,'"]')).getBoundingClientRect()}:null},y&&(null==b||null===(r=b.onExit)||void 0===r||r.call(b,t)),v&&(null==b||null===(o=b.onUpdate)||void 0===o||o.call(b,t)),f&&(null==b||null===(l=b.onStart)||void 0===l||l.call(b,t))},destroy:()=>{var e;t&&(null==b||null===(e=b.onExit)||void 0===e||e.call(b,t))}}},state:{init:()=>({active:!1,decorationId:"",range:l,key:null,query:null,text:null,composing:!1}),apply(e,t,i,a){let o;o=e.getMeta(n)?{...e.getMeta(n)}:{...t};let{isEditable:h}=s,{composing:m}=s.view,{selection:g}=e,{empty:x,from:f}=g;if(o.composing=m,!o.active&&o.key!==d)return o;if(o.active&&o.key===d)return o.key=null,o;if(h&&(x||s.view.composing)){t.range&&(f<t.range.from||f>t.range.to)&&!m&&!t.composing&&(o.active=!1);let e=function(e){var t;let{char:n,allowSpaces:i,prefixSpace:a,startOfLine:o,$position:l}=e,s=(0,r.GG)(n),d=new RegExp("\\s".concat(s,"$")),c=o?"^":"",u=i?RegExp("".concat(c).concat(s,".*?(?=\\s").concat(s,"|$)"),"gm"):RegExp("".concat(c,"(?:^)?").concat(s,"[^\\s").concat(s,"]*"),"gm"),p=null===(t=l.nodeBefore)||void 0===t?void 0:t.text;if(!p)return null;let h=l.pos-p.length,m=Array.from(p.matchAll(u)).pop();if(!m||void 0===m.input||void 0===m.index)return null;let g=m.input.slice(Math.max(0,m.index-1),m.index),x=/^[\s\0]?$/.test(g);if(a&&!x)return null;let f=h+m.index,v=f+m[0].length;return(i&&d.test(p.slice(v-1,v+1))&&(m[0]+=" ",v+=1),f<l.pos&&v>=l.pos)?{range:{from:f,to:v},query:m[0].slice(n.length),text:m[0]}:null}({char:d,allowSpaces:c,prefixSpace:u,startOfLine:p,$position:g.$from}),n="id_".concat(Math.floor(0xffffffff*Math.random()));e&&v({editor:s,state:a,range:e.range})?(o.active=!0,o.decorationId=t.decorationId?t.decorationId:n,o.range=e.range,o.query=e.query,o.text=e.text):o.active=!1}else o.active=!1;return o.active||(o.decorationId=null,o.range=l,o.query=null,o.text=null),o}},props:{handleKeyDown(e,t){var i;let a=e.state.tr,r=this.getState(e.state);if(!r)return!1;let{active:o,range:l}=r;if(!l)return!1;if(o||t.key!==d||t.metaKey){if(!o)return!1;"Escape"===t.key&&y(e)}else{let i={...r};i.active=!0,i.key=t.key,i.query="",e.dispatch(a.setMeta(n,i))}return(null==b?void 0:null===(i=b.onKeyDown)||void 0===i?void 0:i.call(b,{view:e,event:t,range:l}))||!1},decorations(e){let t=this.getState(e);if(!t)return null;let{active:n,range:i,decorationId:r}=t;return n&&i?a.zF.create(e.doc,[a.NZ.inline(i.from,i.to,{nodeName:h,class:m,"data-decoration-id":r||""})]):null}}})}({editor:this.editor,...this.options.suggestion})]}})}},32565:(e,t,n)=>{"use strict";n.d(t,{f:()=>s,r:()=>c});var i=n(18613),a=n(13236),r=n(63723),o=n(43873),l=n(75185);let s=i.Ay.extend({name:"highlight",priority:o.y.Highlight,excludes:"textColor highlight",addAttributes:()=>({variant:{},hex:{}}),addCommands(){var e;return{...null===(e=this.parent)||void 0===e?void 0:e.call(this),setHighlightColor:e=>t=>{let{commands:n}=t;return n.setMark(this.name,{hex:e,variant:null})},setHighlightVariant:e=>t=>{let{commands:n}=t;return n.setMark(this.name,{variant:e,hex:null})}}},parseHTML:()=>[{tag:"mark[class=highlight]"},{tag:"*[highlight]",getAttrs(e){let t=e.getAttribute("highlight");return!!t&&(l.M.includes(t)?{variant:t}:{hex:t})},consuming:!1,priority:60}],renderHTML(e){let{HTMLAttributes:t,mark:n}=e,i=n.attrs.hex&&(0,r.$p)(n.attrs.hex),o="var(".concat(i?"--highlight-color-dark":"--highlight-color-light",")"),l=["--highlight-color: ".concat(n.attrs.hex),"color: ".concat(o),"--link-color: ".concat(o),"--link-color-hover:".concat("var(".concat(i?"--highlight-link-color-hover-dark":"--highlight-link-color-hover-light",")"))].join("; ");return["mark",(0,a.KV)(this.options.HTMLAttributes,t,{class:"highlight",style:l})]},renderHTMLforAI(e){var t;let{mark:n}=e;return["span",{color:null!==(t=n.attrs.hex)&&void 0!==t?t:n.attrs.variant}]}}).configure({multicolor:!0});var d=n(88693);let c=a.CU.create({name:"textColor",excludes:"highlight textColor",priority:o.y.TextColor,addAttributes:()=>({variant:{},hex:{}}),addCommands(){return{setTextColorVariant:e=>t=>{let{commands:n}=t;return n.setMark(this.name,{hex:null,variant:e})},setTextColor:e=>t=>{let{commands:n}=t;return n.setMark(this.name,{hex:e,variant:null})}}},parseHTML:()=>[{tag:"span[class=textColor]"},{tag:"*[color]",getAttrs(e){if(["ASIDE","DIV",...Object.values((0,d.a)()).map(e=>{var t;return null===(t=e.htmlTag)||void 0===t?void 0:t.toUpperCase()}).filter(Boolean)].includes(e.tagName))return!1;let t=e.getAttribute("color");return!!t&&(l.M.includes(t)?{variant:t}:{hex:t})},consuming:!1,priority:60}],renderHTML(e){let{HTMLAttributes:t,mark:n}=e;return["span",(0,a.KV)(t,{class:"textColor",style:n.attrs.hex?"--text-color: ".concat(n.attrs.hex):void 0})]},renderHTMLforAI(e){var t;let{mark:n}=e;return["span",{color:null!==(t=n.attrs.hex)&&void 0!==t?t:n.attrs.variant}]}})},8558:(e,t,n)=>{"use strict";n.d(t,{h:()=>x,f:()=>g});var i=n(13236),a=n(45965),r=n(58599),o=n(98380),l=n(29362),s=n(31085),d=n(81313),c=n(12327),u=n(77654),p=n(5434),h=n(95905);let m=e=>{let{node:t,decorations:n}=e,{level:i,horizontalAlign:a,placeholder:o}=t.attrs,l=o||(i===g.DefaultTitle?c.Ru._({id:"wja8aL"}):c.Ru._({id:"MHrjPM"}));return(0,s.jsx)(p.u,{...e,style:{display:"flex",flexDirection:"column",...(0,h.yp)(a)},children:(0,s.jsx)(r.$p,{dir:(0,h.fZ)(n),level:i,className:(0,d.cx)("title",u.U6),"data-placeholder":l,style:{minWidth:"min(100%, 10em)",...(0,h.O8)(a)}})})};var g=function(e){return e[e.DefaultTitle=1]="DefaultTitle",e[e.LargeTitle=2]="LargeTitle",e[e.XLargeTitle=3]="XLargeTitle",e}({});let x=i.bP.create({name:"title",content:"inline*",group:"block cardNotesBlock",defining:!0,selectable:!1,addAttributes:()=>({level:{default:1}}),addNodeView:()=>(0,r.gu)(m,{update:l.z0}),parseHTML:()=>[{tag:"h1[class=title]"}],addInputRules(){return(0,a.Y5)().map(e=>{let[,t]=e,{inputRegex:n,level:i}=t;return n?(0,o.JJ)({find:n,type:this.type,getAttributes:{level:i}}):null}).filter(e=>!!e)},renderHTML(e){let{HTMLAttributes:t}=e;return["h1",(0,i.KV)(t,{class:"title"}),0]}})},44275:(e,t,n)=>{"use strict";n.d(t,{D:()=>s,n:()=>l});var i=n(99742),a=n(81570),r=n(387),o=n(1098);let l=()=>(0,i.Ak)(5),s=o.S.extend({name:"UniqueToggleId"}).configure({attributeName:"id",types:["toggle"],initialValue:l,filterTransaction:r.kz,pluginKey:new a.hs("UniqueToggleId")})},46896:(e,t,n)=>{"use strict";n.d(t,{Hy:()=>l,Rv:()=>d,bG:()=>o,p8:()=>s,vb:()=>r});var i=n(64225),a=n(5933);let r=e=>{let t=(0,i.KA)();return(0,a.q)(e)(t.getState())||!1},o=(e,t)=>{(0,i.KA)().dispatch((0,a.z1)({toggleIds:[e],isExpanded:t}))},l=(e,t)=>{let n=[],r=(0,i.KA)();e.state.doc.descendants(e=>{if(!s(e))return;let{id:t}=e.attrs;n.push(t)}),r.dispatch((0,a.z1)({toggleIds:n,isExpanded:t}))},s=e=>"toggle"===e.type.name,d=e=>"toggleSummary"===e.type.name},39002:(e,t,n)=>{"use strict";n.d(t,{n:()=>s});var i=n(13236),a=n(41263),r=n.n(a),o=n(48360),l=n.n(o);let s=i.YY.create({name:"updateAttributesAtPos",addCommands:()=>({updateAttributesAtPos:(e,t)=>n=>{let{tr:i}=n;return Object.entries(t).forEach(t=>{let[n,a]=t;i.setNodeAttribute(e,n,a)}),!0},updateNestedAttributesAtPos:(e,t)=>n=>{let{tr:i}=n,a=i.doc.nodeAt(e);return!!a&&(Object.entries(t).forEach(t=>{let[n,r]=t,o=l()(r)?{...a.attrs[n],...r}:r;i.setNodeAttribute(e,n,o)}),!0)},updateAttributeKeyPathAtPos:(e,t,n)=>i=>{var a;let{tr:o,state:l}=i,s=null===(a=l.doc.nodeAt(e))||void 0===a?void 0:a.attrs;if(!s)return!1;let d=JSON.parse(JSON.stringify(s));return Object.entries(r()(d,t,n)).forEach(t=>{let[n,i]=t;o.setNodeAttribute(e,n,i)}),!0}})})},4468:(e,t,n)=>{"use strict";n.d(t,{bA:()=>j,lF:()=>v,L3:()=>f,pl:()=>b,JL:()=>y});var i=n(13236),a=n(81570),r=n(73686),o=n(64130),l=n(95580),s=n(44507),d=n(17119),c=n(82354),u=n(77646),p=n(7259),h=n(77583),m=n(96712);let g=new a.hs("BlockHoverKey");class x{getHoverAbsPos(e){return this.hoverPos?(0,m.d_)(e,this.hoverPos):null}getAnnotableAbsPos(e){return this.annotatablePos?(0,m.d_)(e,this.annotatablePos):null}apply(e,t){let n=e.getMeta(g);return n&&"setHoverPos"in n&&this.handleSetPos(t,n),this}handleSetPos(e,t){return this.hoverPos=null===t.setHoverPos?null:(0,m.JO)(e,t.setHoverPos),this.annotatablePos=null===t.setAnnotatablePos?null:(0,m.JO)(e,t.setAnnotatablePos),this}constructor(){this.hoverPos=null,this.annotatablePos=null}}let f=e=>{var t;return(null===(t=e.find(e=>e.spec.isTableHover))||void 0===t?void 0:t.spec)||{}},v=e=>{var t;return(null===(t=e.find(e=>e.spec.isTableFocus))||void 0===t?void 0:t.spec)||{}},b=e=>e.some(e=>e.spec.isAnnotatableHover),y=e=>e.some(e=>e.spec.isBlockHover),w=(e,t)=>(0,d.Ti)(e,t)||(0,p.cC)(e);function j(e){return new a.k_({key:g,state:{init:()=>new x,apply:(e,t,n,i)=>t.apply(e,i)},props:{handleDOMEvents:{mousemove(e,t){if((0,s.Xb)()||!t.target.closest(".".concat(c.QJ)))return;let{clientX:n,clientY:i}=t,a=e.posAtCoords({left:n,top:i}),r=a&&e.state.doc.resolve(a.inside),l=null,d=null;if((null==r?void 0:r.nodeAfter)&&(l=r.pos,(0,u.jg)(r.nodeAfter)||(0,u.sw)(r.nodeAfter)||(d=r.pos)),!d){let t=(0,o.ix)()?100:-100,a=e.posAtCoords({left:n+t,top:i}),r=a&&e.state.doc.resolve(a.inside);(null==r?void 0:r.nodeAfter)&&!(0,u.jg)(r.nodeAfter)&&!(0,u.sw)(r.nodeAfter)&&(d=r.pos)}let p=g.getState(e.state);if(l!==p.getHoverAbsPos(e.state)||d!==p.getAnnotableAbsPos(e.state)){let t=e.state.tr;t.setMeta(g,{setHoverPos:l,setAnnotatablePos:d}),e.dispatch(t)}}},decorations(e){var t,n;let a;let o=g.getState(e),s=o.getHoverAbsPos(e);if(null===s)return r.zF.empty;try{a=e.doc.resolve(s)}catch(e){return r.zF.empty}let c=[];(0,l.IV)(a,w).forEach(e=>{let{pos:t,node:n}=e;c.push(r.NZ.node(t,t+n.nodeSize,{},{isBlockHover:!0}))});let u=(0,i.eL)(a,e=>"table"===e.type.name),p=(null===(t=a.nodeAfter)||void 0===t?void 0:t.type.name)==="tableCell"?{pos:a.pos,node:a.nodeAfter}:(0,i.eL)(a,e=>"tableCell"===e.type.name);if(u&&p){let{left:e,top:t}=h.J3.get(u.node).findCell(p.pos-(u.pos+1));c.push(r.NZ.node(u.pos,u.pos+u.node.nodeSize,{},{isTableHover:!0,rowHover:t,colHover:e}))}let m=e.selection.$from,x=(0,i.eL)(m,e=>"table"===e.type.name),f=(null===(n=m.nodeAfter)||void 0===n?void 0:n.type.name)==="tableCell"?{pos:m.pos,node:m.nodeAfter}:(0,i.eL)(m,e=>"tableCell"===e.type.name);if(x&&f){let{left:e}=h.J3.get(x.node).findCell(f.pos-(x.pos+1));c.push(r.NZ.node(x.pos,x.pos+x.node.nodeSize,{},{isTableFocus:!0,colFocus:e}))}let v=o.getAnnotableAbsPos(e);if(null!==v){let t;try{t=e.doc.resolve(v)}catch(e){return r.zF.empty}(0,l.IV)(t,d.Ti).forEach(e=>{let{pos:t,node:n}=e;c.push(r.NZ.node(t,t+n.nodeSize,{},{isAnnotatableHover:!0}))})}try{return r.zF.create(e.doc,c)}catch(e){return r.zF.empty}}}})}},25472:(e,t,n)=>{"use strict";n.d(t,{D:()=>i}),n(77646);let i=e=>{var t;return(null===(t=e.find(e=>e.spec.isBlockWidthDecoration))||void 0===t?void 0:t.spec)||{}}},75451:(e,t,n)=>{"use strict";n.d(t,{k:()=>m});var i=n(31085),a=n(25420),r=n(9021),o=n(20501),l=n(24221),s=n(9104),d=n(95640),c=n(12327),u=n(14041),p=n(64225),h=n(5933);let m=e=>{let{editor:t,getPos:n,node:m,direction:g,maxButtons:x,tooltip:f}=e,v=(0,p.GV)(h.Cl),b=!x||m.childCount<x,y=(0,u.useCallback)(()=>{t.commands.addButtonToGroup(n())},[t,n]);return b&&v?(0,i.jsx)(a.s,{position:"relative",align:"center",children:(0,i.jsx)(s.Tz,{label:f||(0,i.jsx)(d.x6,{id:"xe7fzh"}),placement:"top",children:(0,i.jsx)(r.K,{icon:(0,i.jsx)(l.g,{icon:o.QLR}),"aria-label":c.Ru._({id:"6oU9VZ"}),size:"xs",variant:"plain",isRound:!0,onClick:y,opacity:0,className:"add-button",transitionProperty:"opacity",transitionDuration:"normal",position:"absolute",left:"column"===g?"50%":0,top:"50%",transform:"column"===g?"translateX(-50%)":"translateY(-50%)",zIndex:"sticky"})})}):null}},20169:(e,t,n)=>{"use strict";n.d(t,{$:()=>z});var i=n(13236),a=n(68566),r=n(45709),o=n(58599),l=n(95580),s=n(29362),d=n(31085),c=n(80853),u=n(80532),p=n(3706),h=n(61778),m=n(81313),g=n(14041),x=n(4876),f=n(64225),v=n(747),b=n(77654),y=n(67442),w=n(5933),j=n(74336),k=n(12408),C=n(25893);let S=e=>{let{editor:t,node:n,decorations:i}=e,{href:a,variant:r,color:l}=n.attrs,s=(0,f.GV)(w.Cl),S=(0,k.Ms)(i),A=s&&S,z=(0,j.v)(i),{linkUrl:I,handleClick:R,isCurrentPage:E}=(0,v.c)({url:a}),{interceptLinkClick:L,linkUrlSafe:_,isUntrusted:M,linkInterceptEnabled:N}=(0,x.i)(I),T=N&&!0!==t.isSiteNavbarEditor,{textColor:P}=(0,y.S0)(l),O="solid"===r?{backgroundColor:l||"var(--button-color)",backgroundImage:l?void 0:"var(--button-gradient)",borderRadius:"var(--button-border-radius, var(--box-border-radius))",fontFamily:"var(--body-font)"}:"outline"===r?{border:"0px",boxShadow:"inset 0 0 0 max(1px, var(--shape-border-width)) ".concat(l||"var(--button-color)"),backgroundColor:"var(--shape-bg-color-override, var(--card-color))",borderRadius:"var(--button-border-radius, var(--box-border-radius))",fontFamily:"var(--body-font)"}:{borderRadius:"var(--button-border-radius, var(--box-border-radius))",fontFamily:"var(--body-font)"},D=(0,g.useMemo)(()=>({...(0,C.s)({variant:r})}),[r]);return(0,d.jsx)(o.VR,{children:(0,d.jsx)(c.$,{as:A?u.az:p.N,isDisabled:!!T&&M,cursor:s?"text":"pointer",userSelect:s?"auto":"none",href:T?_||void 0:I,onClick:T?L:R,...D,style:O,className:(0,m.cx)("button","solid"===r&&b.Dv),"data-export-as-image":!0,"data-export-link":a,sx:{"@media print":{width:"auto"},outline:S?"2px solid var(--chakra-ring-color) !important":void 0,lineHeight:"var(--line-height-body)"},"data-is-current-page":E,children:(0,d.jsxs)(h.E,{as:"div",noOfLines:A||z?void 0:1,wordBreak:"break-all",style:{color:"solid"===r?P||"var(--button-color-inverted)":"outline"===r?l||"var(--button-color)":void 0},textAlign:"center",children:[z&&(0,d.jsx)(h.E,{opacity:"0.3",pointerEvents:"none",contentEditable:!1,pos:"absolute",w:"100%",left:"0",textAlign:"center",children:""}),(0,d.jsx)(o.$p,{})]})})})};var A=n(23231);let z=i.bP.create({name:"button",content:"(text | emoji)*",marks:"",defining:!0,isolating:!0,selectable:!1,addNodeView:()=>(0,o.gu)(S,{update:s.z0}),addAttributes:()=>({href:{default:""},variant:{default:"solid"},color:{default:null}}),addCommands:()=>({addButtonToGroup:e=>t=>{let{state:n,chain:i}=t,a=n.doc.nodeAt(e);if(!a)return!1;let o=e+a.nodeSize-1;return i().insertContentAt(o,{...(0,r.G)().button,attrs:{variant:A.Dn[a.type.name].defaultVariant,href:""}}).selectInsertedNode().run(),!0},handleButtonDelete:e=>t=>{let{dispatch:n,state:r,chain:o}=t;if(!n)return!0;let s=(0,i.KP)(e=>"button"===e.type.name)(r.selection);if(!s||e&&!(0,l.Op)(s.node))return!1;let d=(0,i.KP)(e=>"buttonGroup"===e.type.name)(r.selection),c=(0,i.KP)(e=>"navbarButtons"===e.type.name)(r.selection),u=(0,i.KP)(e=>"navbarLinks"===e.type.name)(r.selection);return c||u||!d||1!==d.node.childCount?c&&1===c.node.childCount||u&&1===u.node.childCount?o().deleteNode("button").blur().run():o().deleteNode("button").command(e=>{let{tr:t}=e,n=(0,a.n)(t.doc.resolve(s.pos-1),-1);return n&&t.setSelection(n),!0}).focus().run():o().deleteNode("buttonGroup").command(e=>{let{tr:t}=e,n=(0,a.n)(t.doc.resolve(d.pos));return n&&t.setSelection(n),!0}).focus().run(),!0}}),parseHTML:()=>[{tag:"button"}],renderHTML(e){let{HTMLAttributes:t}=e;return["button",(0,i.KV)(t),0]}})},31060:(e,t,n)=>{"use strict";n.d(t,{J:()=>p,r:()=>u});var i=n(31085),a=n(25420),r=n(2696),o=n(58599),l=n(5434),s=n(95905),d=n(75451),c=n(23231);let u=e=>{let{decorations:t,node:n}=e,{horizontalAlign:u}=n.attrs,h=(0,r.FX)(),m=h?"column":"row";return(0,i.jsx)(l.u,{...e,children:(0,i.jsxs)(a.s,{dir:(0,s.fZ)(t,u),w:"100%","data-selection-ring":"padded",borderRadius:"var(--box-border-radius)",direction:m,justify:(0,s.lI)(u)||"var(--flex-align)",sx:p(h),gap:"0.5em",alignItems:"center",children:[(0,i.jsx)(o.$p,{}),(0,i.jsx)(d.k,{...e,direction:m,maxButtons:c.r4})]})})},p=e=>({"> [data-node-view-content]":{display:"contents","> [data-node-view-content-inner]":{display:"contents"}},"--button-width":e?"100%":"auto",".node-button":{width:"var(--button-width)",".button":{width:"100%"}},_hover:{".add-button":{opacity:1}}})},23231:(e,t,n)=>{"use strict";n.d(t,{Dn:()=>s,r4:()=>o,vf:()=>l});var i=n(20501),a=n(3040),r=n(12327);let o=3,l=()=>[{name:r.Ru._({id:"bjuYAW"}),key:"solid",icon:a.Cpz},{name:r.Ru._({id:"bCuf07"}),key:"outline",icon:i.Cpz},{name:r.Ru._({id:"1lWK8g"}),key:"link",icon:i.CQO}],s={buttonGroup:{alignEnabled:!0,colorEnabled:!0,linkDropdownEnabled:!0,variants:["solid","outline"],defaultVariant:"solid"},navbarButtons:{alignEnabled:!1,colorEnabled:!0,linkDropdownEnabled:!1,variants:["solid","outline"],defaultVariant:"solid"},navbarLinks:{alignEnabled:!0,colorEnabled:!1,linkDropdownEnabled:!1,variants:["link"],defaultVariant:"link"}}},25893:(e,t,n)=>{"use strict";n.d(t,{s:()=>i});let i=e=>{let{variant:t}=e;return{variant:"unstyled",display:"inline-flex",position:"relative",_hover:{textDecoration:"none"},minW:"min(100%, 12em)",maxW:"100%",fontSize:"1em",py:"0.5em",minH:"2.75em",w:"var(--button-width)",h:"auto",px:"link"===t?"0.5em":"1em",transitionProperty:"none","data-variant":t}}},44386:(e,t,n)=>{"use strict";n.d(t,{N:()=>d});var i=n(31085),a=n(9350),r=n(58599),o=n(5434),l=n(29362);let s=e=>(0,i.jsx)(o.u,{...e,children:(0,i.jsx)("pre",{children:(0,i.jsx)(r.$p,{as:"code"})})}),d=a.Ay.extend({selectable:!1,isolating:!0,addNodeView:()=>(0,r.gu)(s,{update:l.z0})})},43873:(e,t,n)=>{"use strict";n.d(t,{y:()=>i});let i={UniqueAttribute:1e4,CardMention:1001,DocMention:1001,UserMention:1001,UndoInputRuleKeymap:1001,HorizontalAlign:1001,Collaboration:1e3,Highlight:150,FootnoteLabel:150,TextColor:150,Code:150,Link:140,SlashMenu:104,EmojiShortcuts:104,MentionSuggestionMenu:104,List:103,CardAccentLayoutItem:103,Table:102,Image:102,Gallery:102,CardLayoutItem:101,MediaPlaceholder:101,Layout:101,Footnote:101,Card:101,Toggle:101,SmartLayout:101,KeyMapOverride:100,GlobalDragHandle:99,CardIds:1,KeyBoardCatchall:1,UndoHistory:-100}},92091:(e,t,n)=>{"use strict";n.d(t,{Q4:()=>x,A_:()=>h,EX:()=>m});var i=n(13236),a=n(14139),r=n(81570),o=n(68566);function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=t>0,{parent:i,doc:a}=e,r=e.start(),s=e.after();if(i.type.spec.isolating){let e=a.resolve(n?s-1:r),t=(0,o.n)(e,n?1:-1);if(n){let e=a.resolve(t.to).node();if(e&&e.isTextblock&&0===e.content.size)return t.to+1}return n?t.to:t.from}let d=e.start(e.depth-1);return l(e.doc.resolve(d),t)}n(19534);var s=n(82354),d=n(43873),c=n(44916);let u=e=>{let t=l(e,-1);return e.pos===t?s.$x:t},p=(e,t)=>{let n=l(t,1);return t.pos===n?e.state.doc.content.size-s.$x:n},h=i.YY.create({name:"KeyMapOverride",priority:d.y.KeyMapOverride,addOptions:()=>({addSelectionKeyMaps:!1}),addKeyboardShortcuts(){let e=()=>this.editor.commands.first(e=>{let{commands:t}=e;return[()=>t.handleCardAccentDelete(),()=>{var e;return null===(e=t.handleSmartLayoutDelete)||void 0===e?void 0:e.call(t,!0,!1)},()=>t.deleteSelectionAndSelectNear(-1),()=>t.deleteSelection(),e=>{let{view:t,state:n,dispatch:i}=e;return(0,c.o6)(n,i,t)},()=>t.unwrapQuoteOnDelete(),e=>{let{view:n,state:i,tr:a}=e,r=t.joinBackward();return r&&a.setMeta("annotationEvent",{type:"join-backward",joinPos:i.selection.from,atBeginning:n.endOfTextblock("backward")}),r},()=>t.selectNodeBackward(),()=>t.handleLayoutDelete(!1),()=>t.handleButtonDelete(!0),()=>t.deleteCardIfEmpty(!1)]}),t=()=>this.editor.commands.first(e=>{let{commands:t}=e;return[()=>t.handleCardAccentDelete(),()=>{var e;return null===(e=t.handleSmartLayoutDelete)||void 0===e?void 0:e.call(t,!0,!0)},()=>t.deleteSelectionAndSelectNear(),()=>t.deleteSelection(),e=>{let{view:n,state:i,tr:a}=e,r=t.joinForward();return r&&a.setMeta("annotationEvent",{type:"join-forward",joinPos:i.selection.from,atEnd:n.endOfTextblock("forward")}),r},()=>t.selectNodeForward(),()=>t.handleLayoutDelete(!0),()=>t.handleButtonDelete(!0),()=>t.deleteCardIfEmpty(!0)]}),n={};return this.options.addSelectionKeyMaps&&(n={"Mod-a":e=>{let{editor:t}=e,{selection:n}=t.state;if(n instanceof r.nh&&n.node.type.spec.isolating)return t.commands.selectAll();let i=l(t.state.selection.$from,-1),a=l(t.state.selection.$to,1);return n.from===i&&n.to===a?t.commands.selectAll():(t.commands.command(e=>{let{tr:t}=e;return t.setSelection(r.U3.create(t.doc,i,a)),!0}),!0)},"Mod-ArrowUp":e=>{let{editor:t}=e,n=u(t.state.selection.$from);if(!n)return!1;let i=t.state.doc.resolve(n);if(a.n.valid(i)){let e=new a.n(i);return t.view.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}return t.chain().setTextSelection(n).scrollIntoView().run()},"Mod-Shift-ArrowUp":e=>{let{editor:t}=e,n=u(t.state.selection.$from);return!!n&&t.chain().setTextSelection({from:n,to:t.state.selection.to}).scrollIntoView().run()},"Mod-ArrowDown":e=>{let{editor:t}=e,n=p(t,t.state.selection.$to),i=t.state.doc.resolve(n);if(a.n.valid(i)){let e=new a.n(i);return t.view.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}return t.chain().setTextSelection(n).scrollIntoView().run()},"Mod-Shift-ArrowDown":e=>{let{editor:t}=e,n=p(t,t.state.selection.$to);return t.chain().setTextSelection({from:t.state.selection.from,to:n}).scrollIntoView().run()},"Shift-Mod-a":e=>{let{editor:t}=e;return t.commands.selectAll()}}),{...n,Enter:()=>this.editor.commands.first(e=>{let{commands:t}=e;return[()=>t.newlineInCode(),()=>t.createParagraphNear(),()=>t.liftEmptyBlock(),e=>{let{view:n,state:i,tr:a}=e;return a.setMeta("annotationEvent",{type:"split-block",splitPos:i.selection.from,atBeginning:n.endOfTextblock("backward")}),t.splitBlock()}]}),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,Space:()=>this.editor.commands.first(e=>{let{commands:t}=e;return[()=>t.handleSpaceToZoom()]})}}}),m=i.YY.create({name:"UndoInputRuleKeymap",priority:d.y.UndoInputRuleKeymap,addKeyboardShortcuts:()=>({"Shift-Mod-a":e=>{let{editor:t}=e;return t.commands.selectAll()},"Mod-z":e=>{let{editor:t}=e;return t.commands.undoInputRule()},Backspace:e=>{let{editor:t}=e;return t.commands.undoInputRule()},"Mod-Backspace":e=>{let{editor:t}=e;return t.commands.undoInputRule()}})});var g=n(6657);let x=i.YY.create({name:"KeyBoardCatchall",priority:d.y.KeyBoardCatchall,addKeyboardShortcuts:()=>({Tab:e=>{let{editor:t}=e;return t.view.hasFocus()},"Shift-Tab":e=>{let{editor:t}=e;return t.view.hasFocus()}}),addProseMirrorPlugins:()=>[new r.k_({key:new r.hs("KeyBoardCatchall"),props:{handleKeyDown:(e,t)=>g.WC.handleKeydown(t)}})]})},99364:(e,t,n)=>{"use strict";n.d(t,{D:()=>m});var i=n(13236),a=n(58599),r=n(30138),o=n(29362),l=n(31085),s=n(5434),d=n(95905);let c=e=>{let{node:t,decorations:n}=e,{fontSize:i,placeholder:r}=t.attrs;return(0,l.jsx)(s.u,{dir:(0,d.fZ)(n),...e,children:(0,l.jsx)(a.$p,{as:"li","data-testid":"bullet-list-item","data-font-size":i,"data-placeholder":r})})};var u=n(33795),p=n(60443);let h=/^\s*([-*])\s$/,m=i.bP.create({name:p.e.Bullet,content:"inline*",defining:!0,group:"block cardNotesBlock",selectable:!1,allowFontSizes:"body",addNodeView:()=>(0,a.gu)(c,{as:"ul",update:o.z0,updateWrapperEl:(e,t)=>{e.setAttribute("indent",t.node.attrs.indent)}}),addOptions:()=>({HTMLAttributes:{}}),addAttributes:()=>({indent:{default:0},fontSize:r.mD}),addInputRules(){return[(0,u.aW)({find:h,type:this.type},this.editor.state.schema)]},addKeyboardShortcuts:()=>({"Mod-Shift-8":e=>{let{editor:t}=e;return t.commands.setListItems({variant:p.e.Bullet})},"Mod-.":e=>{let{editor:t}=e;return t.commands.setListItems({variant:p.e.Bullet})}}),parseHTML(){return[{tag:'li[variant="'.concat(this.name,'"]')}]},renderHTML(e){let{HTMLAttributes:t}=e;return["li",(0,i.KV)(this.options.HTMLAttributes,t,{variant:this.name}),0]}})},33795:(e,t,n)=>{"use strict";n.d(t,{B8:()=>v,uw:()=>f,Lf:()=>b,aW:()=>y});var i=n(13236),a=n(98380),r=n(77646),o=n(43873),l=n(73758),s=n.n(l),d=n(81570),c=n(73686),u=n(60443);let p=s()(10),h=["blockquote","card","sectionBreak","calloutBox"],m=(e,t)=>"numbered"===e.type.name||(0,u.x)(e)&&e.attrs.indent>t||e.isAtom||h.includes(e.type.name),g=e=>new d.k_({key:new d.hs("ListPlugin"),props:{decorations:e=>{let{doc:t}=e,n=[],i=new Map,a=(e,t)=>{var n;return(null===(n=i.get(e))||void 0===n?void 0:n[t])||1},r=(e,t,n)=>{let a=i.get(e);try{a[t]=n}catch(e){console.error("(caught) [ListPlugin] setCounter error",e)}},o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=i.get(e)||{};p.filter(e=>e>=t).forEach(e=>{n[e]=1}),i.set(e,n)},l=0;return t.descendants((e,t,s)=>{if((0,u.x)(e)&&e.firstChild){let i=e.firstChild.marks.find(e=>"textColor"===e.type.name);(null==i?void 0:i.attrs.variant)&&n.push(c.NZ.node(t,t+e.nodeSize,{"data-text-color":i.attrs.variant})),(null==i?void 0:i.attrs.hex)&&n.push(c.NZ.node(t,t+e.nodeSize,{style:"--list-marker-text-color: ".concat(i.attrs.hex)}))}if(!s||(m(e,l)||o(s),"numbered"!==e.type.name))return;i.get(s)||o(s);let d=e.attrs.indent;l=d;let p=a(s,d);r(s,d,p+1),o(s,d+1),n.push(c.NZ.node(t,t+e.nodeSize,{},{listNumber:p}))}),0==n.length?c.zF.empty:c.zF.create(t,n)}}});var x=n(16723);let f=8,v=i.YY.create({name:"list",priority:o.y.List,addProseMirrorPlugins(){return[g(this.editor)]},addCommands:()=>({listToCards:()=>e=>{let{chain:t,state:n}=e,{selection:a,doc:o}=n,{from:l,to:s}=a,d=(0,i.Nx)(o,{from:l,to:s},u.x),c=(0,i.KP)(r.jg)(a);if(!d.length||!c)return!1;let p=c.pos+c.node.nodeSize,h=(0,x.SQ)(d),m=(0,x.pT)(h);return t().insertContentAt(p,m).scrollIntoView().run(),!0},listToSmartLayout:e=>t=>{let{chain:n,state:a}=t,{selection:r,doc:o}=a,{from:l,to:s,$from:d,$to:c}=r,p=d.blockRange(c),h=(0,i.Nx)(o,{from:l,to:s},u.x);if(!h.length||!p)return!1;let m=(0,x.SQ)(h),g=(0,x.tb)(m,e);return n().insertContentAt({from:p.start,to:p.end},g).selectInsertedNode().scrollIntoView().run(),!0},indent:e=>t=>{let{tr:n,dispatch:i,state:a}=t;if(!i)return!0;let r=!1;return n.selection.ranges.forEach(t=>{var i;let o=t.$from.pos,l=t.$to.pos;(o!==l||(null===(i=t.$from.nodeBefore)||void 0===i?void 0:i.type.name)!=="text")&&a.doc.nodesBetween(o,l,(t,i)=>{let{indent:a}=t.attrs;Object.values(u.e).includes(t.type.name)&&a+e>=0&&a+e<=f&&(n.setNodeMarkup(i,void 0,{...t.attrs,indent:a+e}),r=!0)})}),r},setListItems:e=>{let{variant:t}=e;return e=>{let{tr:n,dispatch:i,state:a}=e;return!i||(n.selection.ranges.forEach(e=>{let i=e.$from.pos,r=e.$to.pos;a.doc.nodesBetween(i,r,(e,i)=>{Object.values(u.e).includes(e.type.name)?n.setNodeMarkup(i,a.schema.nodes[t],e.attrs):e.isTextblock&&n.setNodeMarkup(i,a.schema.nodes[t],{...e.attrs,indent:0})})}),!0)}},toggleListItems:e=>{let{variant:t}=e;return e=>{let{commands:n,editor:i}=e;return b(i,t)?n.setNode("paragraph"):n.setListItems({variant:t})}}}),addKeyboardShortcuts:()=>({Enter:e=>{let t,n,{editor:i}=e;for(let e of Object.values(u.e))if(i.isActive(e)){n=i.getAttributes(e),t=e;break}if(void 0===t)return!1;let{from:a,$from:r,empty:o}=i.state.selection;return!!o&&(0==r.parent.content.size?n.indent>0?i.commands.indent(-1):i.commands.setNode("paragraph",n):0===r.parentOffset?(n.checked&&(n.checked=!1),i.chain().insertContentAt(a-1,{type:t,attrs:n}).selectInsertedNode().run()):r.parentOffset===r.parent.content.size&&(n.checked&&(n.checked=!1),i.chain().insertContentAt(a+1,{type:t,attrs:n}).selectInsertedNode().run()))},Backspace:e=>{let t,n,{editor:i}=e;for(let e of Object.values(u.e))if(i.isActive(e)){n=i.getAttributes(e),t=e;break}if(void 0===t)return!1;let{$from:a,empty:r}=i.state.selection;return!!r&&0==a.parentOffset&&i.commands.setNode("paragraph",n)},Tab:e=>{let{editor:t}=e;return t.commands.indent(1)},"Shift-Tab":e=>{let{editor:t}=e;return t.commands.indent(-1)},"Mod-]":e=>{let{editor:t}=e;return t.commands.indent(1)},"Mod-[":e=>{let{editor:t}=e;return t.commands.indent(-1)}})}),b=(e,t)=>{let n=Object.values(u.e).filter(e=>e!==t);return e.isActive(t)&&!n.some(t=>e.isActive(t))},y=(e,t)=>(0,a.tC)(e,[t.nodes.heading,t.nodes.title])},72809:(e,t,n)=>{"use strict";n.d(t,{R:()=>g});var i=n(13236),a=n(58599),r=n(30138),o=n(29362),l=n(33795),s=n(60443),d=n(31085),c=n(5434),u=n(95905);let p=[e=>e.toString(),e=>String.fromCharCode(96+e),e=>(function(e){let t={M:1e3,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1},n="";for(let i of Object.keys(t)){let a=Math.floor(e/t[i]);e-=a*t[i],n+=i.repeat(a)}return n})(e).toLowerCase()],h=e=>{var t;let{decorations:n,node:i}=e,{indent:r,fontSize:o,placeholder:l}=i.attrs,s=null===(t=n.find(e=>e.spec.listNumber))||void 0===t?void 0:t.spec.listNumber,h=(p[r%p.length]||p[0])(s);return(0,d.jsx)(c.u,{dir:(0,u.fZ)(n),...e,children:(0,d.jsx)(a.$p,{as:"li","data-list-counter":h,"data-font-size":o,"data-placeholder":l})})},m=/^(\d+)\.\s$/,g=i.bP.create({name:s.e.Numbered,content:"inline*",defining:!0,group:"block cardNotesBlock",selectable:!1,allowFontSizes:"body",addOptions:()=>({HTMLAttributes:{}}),addNodeView:()=>(0,a.gu)(h,{as:"ol",update:o.z0,updateWrapperEl:(e,t)=>{e.setAttribute("indent",t.node.attrs.indent)}}),addAttributes:()=>({indent:{default:0},fontSize:r.mD}),addInputRules(){return[(0,l.aW)({find:m,type:this.type},this.editor.state.schema)]},addKeyboardShortcuts:()=>({"Mod-/":e=>{let{editor:t}=e;return t.commands.setListItems({variant:s.e.Numbered})},"Mod-Shift-7":e=>{let{editor:t}=e;return t.commands.setListItems({variant:s.e.Numbered})}}),parseHTML(){return[{tag:'li[variant="'.concat(this.name,'"]')}]},renderHTML(e){let{HTMLAttributes:t}=e;return["li",(0,i.KV)(this.options.HTMLAttributes,t,{variant:this.name}),0]}})},16723:(e,t,n)=>{"use strict";n.d(t,{Jx:()=>p,SQ:()=>s,pT:()=>c,tb:()=>u});var i=n(72846),a=n.n(i),r=n(60443),o=n(95580),l=n(34444);let s=e=>{let t=[];for(let n=0;n<e.length;n++){let i=e[n],a=i.node.attrs.indent,r=d(e,n,e=>e.node.attrs.indent>a),o=s(r);t.push({node:i.node,pos:i.pos,children:o}),n+=r.length}return t},d=(e,t,n)=>{let i=[];for(let a=t+1;a<e.length;a++){let t=e[a];if(n(t))i.push(t);else break}return i},c=e=>e.map(e=>{let t=c(e.children);return{type:"card",content:[{type:"heading",attrs:{level:Math.min(e.node.attrs.indent+1,l.Bq)},content:[{type:"text",text:e.node.textContent}]},...t]}}),u=(e,t)=>({type:"smartLayout",attrs:{variantKey:t},content:e.map(e=>{let t=[{type:"heading",attrs:{level:4},content:a()(e.node.content.toJSON())}];return t.push(...e.children.map(e=>{let t=a()(e.node.toJSON());return t.attrs.indent-=1,t})),{type:"smartLayoutCell",content:t}})}),p=e=>(0,o.Ng)(e,r.x)},12443:(e,t,n)=>{"use strict";n.d(t,{Cn:()=>p,I4:()=>d,Sm:()=>s,eq:()=>u});var i=n(46108),a=n.n(i),r=n(98371),o=n(79194),l=n(95905);let s=e=>{var t;let{horizontalAlign:n,eventTarget:i,node:r,newContent:l,editor:s}=e,d=i.closest("[data-media-node-wrapper]"),u=Math.round(((null==d?void 0:null===(t=d.querySelector("img"))||void 0===t?void 0:t.clientWidth)||100)/((null==d?void 0:d.clientWidth)||100)*100),p=[o.w.paragraph()],h=c(i,s.view),m=a()(r.toJSON());return m.attrs.resize={},{type:"gridLayout",attrs:{colWidths:(()=>{switch(n){case"center":return[(100-u)/2,u,(100-u)/2];case"right":return[100-u,u];default:return[u,100-u]}})()},content:(()=>{switch(n){case"center":return[{type:"gridCell",content:"left"===h&&l?l:p},{type:"gridCell",content:[m]},{type:"gridCell",content:"right"===h&&l?l:p}];case"right":return[{type:"gridCell",content:l||p},{type:"gridCell",content:[m]}];default:return[{type:"gridCell",content:[m]},{type:"gridCell",content:l||p}]}})()}},d=e=>{let{horizontalAlign:t,prevPos:n}=e;switch(t){case"center":case"right":return n+4;default:return n+2}},c=(e,t)=>{let n=(0,r.xX)(e,t.dom,e=>e.hasAttribute("data-media-add-side"));return null==n?void 0:n.getAttribute("data-media-add-side")},u=e=>{let{view:t,from:n,to:i,node:a}=e,r=(0,l.er)(t.state,n,i);return a.attrs.horizontalAlign||("rtl"===r?"right":"left")},p=e=>{let{eventTarget:t,horizontalAlign:n,nodeSize:i,editor:a}=e,r=c(t,a.view);switch(n){case"right":return 2;case"center":return"left"===r?2:i+7;default:return i+4}}},57750:(e,t,n)=>{"use strict";n.d(t,{Ch:()=>T,x6:()=>P,a6:()=>O});var i=n(31085),a=n(25420),r=n(3706),o=n(62313),l=n(61778),s=n(73893),d=n(22544),c=n(17539),u=n(77214),p=n(2600),h=n(9021),m=n(18651),g=n(20501),x=n(24221),f=n(9104),v=n(95640),b=n(12327),y=n(66792),w=n(70605),j=n(59707),k=n(90406),C=n(12116);let S=e=>{var t;let{node:n,disableOpenButton:a=!1}=e,{meta:r,source:s}=n.attrs,d=(0,k.lQ)(n.attrs),c=(0,C.B)(s),{handleOpenLinkWithInterstitial:m}=(0,y.E)(d),S="embed.custom"===s||"video.custom"===s,z=(null==r?void 0:r.icon)||(null===(t=c.image)||void 0===t?void 0:t.src),I=(null==r?void 0:r.site)||(S?(0,u.t$)(d):c.label());return(0,i.jsxs)(p.T,{spacing:"0.25em",align:"flex-start",color:"black",w:"100%",fontSize:"0.9em",children:[(0,i.jsxs)(o.z,{align:"center",spacing:"0.25em",w:"100%",color:"var(--body-color-muted)",children:[(0,i.jsx)(A,{icon:z}),(0,i.jsx)(l.E,{noOfLines:1,flex:1,"data-testid":"site-name",fontSize:"0.9em",children:I}),c.downloadable&&d&&(0,i.jsx)(f.Tz,{label:(0,i.jsx)(v.x6,{id:"mzI/c+"}),placement:"top",children:(0,i.jsx)(h.K,{"aria-label":b.Ru._({id:"mzI/c+"}),icon:(0,i.jsx)(x.g,{icon:g.cbP}),onClick:()=>{let e=document.createElement("a");e.href=d,e.target="_blank",e.download=(null==r?void 0:r.title)||"file.pdf",e.dispatchEvent(new MouseEvent("click"))},variant:"unstyled",sx:w.Up,fontSize:"0.7em",zIndex:2,onMouseDown:j.Fw})}),!a&&d&&(0,i.jsx)(f.Tz,{label:(0,i.jsx)(v.x6,{id:"Alx2/L"}),placement:"top",children:(0,i.jsx)(h.K,{"aria-label":b.Ru._({id:"Alx2/L"}),icon:(0,i.jsx)(x.g,{icon:g.vMs}),onClick:m,variant:"unstyled",zIndex:2,fontSize:"0.7em",onMouseDown:j.Fw,sx:w.Up})})]}),(0,i.jsx)(l.E,{fontWeight:"bold",noOfLines:1,maxW:"90%","data-testid":"title",color:"var(--body-color)",wordBreak:"break-all",children:null==r?void 0:r.title}),(null==r?void 0:r.description)&&(0,i.jsx)(l.E,{noOfLines:[2,3],whiteSpace:"normal",maxW:"100%",color:"var(--body-color-muted)",children:r.description})]})},A=e=>{let{icon:t,...n}=e;return t?(0,i.jsx)(m._,{src:t,h:"1.5em",borderRadius:"sm",...n}):(0,i.jsx)(l.E,{as:"span",...n,children:(0,i.jsx)(x.g,{icon:g.c9S})})};var z=n(80532),I=n(3040),R=n(99420),E=n.n(R),L=n(4977),_=n(94007);let M=e=>{let{node:t}=e,{thumbnail:n,meta:r,source:s}=t.attrs,d=(null==n?void 0:n.src)||(null==n?void 0:n.tempUrl);return(null==n?void 0:n.showPlaceholder)?(0,i.jsx)(_.Pf,{hasUploadError:n.uploadStatus===L.A.Error,isUploading:n.uploadStatus===L.A.Uploading,width:"100%",borderRadius:"none",icon:"embed.pdf"===s?g.O_q:g.c9S}):d?(0,i.jsxs)(a.s,{flex:1,color:"white",position:"relative",children:[(0,i.jsx)(z.az,{flex:1,overflow:"hidden",bgColor:"white",children:(0,i.jsx)(m._,{src:d,position:"absolute",objectFit:"cover",width:"100%",height:"100%"})}),(null==n?void 0:n.uploadStatus)===L.A.Uploading&&(0,i.jsx)(_.Td,{}),(null==r?void 0:r.duration)&&(0,i.jsxs)(o.z,{fontSize:"0.75em",backgroundColor:"blackAlpha.700",color:"white",position:"absolute",right:0,bottom:0,py:1,px:2,"data-thumbnail-hidden":!0,children:[(0,i.jsx)(x.g,{icon:I.ijD}),(0,i.jsx)(l.E,{children:function(e){let t=E().duration(e,"seconds"),n=t.hours().toString().padStart(2,"0"),i=t.minutes().toString().padStart(2,"0"),a=t.seconds().toString().padStart(2,"0");return t>=E().duration(1,"hour")?n+":"+i+":"+a:i+":"+a}(r.duration)})]})]}):null},N=e=>e&&(!e.height||e.height>=50)&&(!e.width||e.width>=50),T=e=>{let{node:t}=e,{thumbnail:n,sourceUrl:o}=t.attrs;return(0,i.jsxs)(a.s,{overflow:"hidden",direction:"row",align:"stretch",wrap:"wrap",contentEditable:!1,transitionProperty:"common",transitionDuration:"normal",position:"relative",borderRadius:"inherit","data-content-reference":!0,"data-selection-ring":"inside","data-selection-background":!0,fontFamily:"body","data-drag-handle":!0,h:"100%",maxW:"var(--media-maxW)",maxH:"var(--media-maxH)",children:[n&&N(n)&&(0,i.jsx)(a.s,{flex:1,minH:"10em",minW:"min(10em, 100%)",maxW:"100%",maxH:"var(--media-maxH)",children:(0,i.jsx)(M,{node:t})}),(0,i.jsx)(a.s,{flex:1.618,minW:"min(16em, 100%)",maxW:"100%",p:"1em",position:"relative",children:(0,i.jsx)(S,{node:t})}),d.D1&&o&&(0,i.jsx)(r.N,{href:o,h:"100%",w:"100%",position:"absolute",zIndex:"-10","data-pdf-link":!0})]})},P=e=>{var t;let{node:n}=e,{thumbnail:d,meta:c,sourceUrl:p,source:h}=n.attrs,m=(0,C.B)(h);return(0,i.jsxs)(a.s,{minW:"var(--media-maxH)",w:"100%",css:{aspectRatio:"16 / 9"},maxW:"100%",maxH:"var(--media-maxH)",h:"100%",align:"stretch",boxSizing:"content-box",overflow:"hidden","data-content-reference":!0,"data-selection-ring":"inside",position:"relative",bg:"gray.100",children:[d&&N(d)?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(M,{node:n}),(0,i.jsxs)(o.z,{backgroundColor:"whiteAlpha.700",backdropFilter:"blur(8px)",py:1,px:2,position:"absolute",bottom:"0",fontSize:"0.75em","data-thumbnail-hidden":!0,children:[(0,i.jsx)(A,{icon:(null==c?void 0:c.icon)||(null===(t=m.image)||void 0===t?void 0:t.src)}),p&&(0,i.jsx)(l.E,{color:"black",noOfLines:1,children:(null==c?void 0:c.title)||(null==c?void 0:c.site)||(0,u.t$)(p)})]})]}):(0,i.jsx)(a.s,{align:"flex-start",flex:"1",p:4,children:(0,i.jsx)(S,{node:n,disableOpenButton:!0})}),s.$.GAMMA_PUPPETEER_SERVICE&&p&&(0,i.jsx)(r.N,{href:p,h:"100%",w:"100%",position:"absolute",zIndex:"-10","data-pdf-link":!0})]})},O=e=>{var t;let{node:n}=e,{meta:r,source:o,thumbnail:l}=n.attrs,s=(0,C.B)(o),d=(null==l?void 0:l.src)||(null==l?void 0:l.tempUrl),u=d&&(0,c.Ub)(d,c.p7);return(0,i.jsx)(a.s,{minW:"var(--media-maxH)",w:"100%",css:{aspectRatio:"16 / 9"},bg:"var(--body-color-muted)",align:"center",justify:"center",bgImage:(0,c.QV)(u),backgroundSize:"cover",children:(0,i.jsx)(A,{icon:(null==r?void 0:r.icon)||(null===(t=s.image)||void 0===t?void 0:t.src),fontSize:"7.5em"})})}},12116:(e,t,n)=>{"use strict";n.d(t,{B:()=>r,l:()=>o});var i=n(73893),a=n(74327);let r=e=>e&&a.Dc[e]?a.Dc[e]:a.Jp,o=e=>"".concat(i.$.EMBED_PROXY_URL,"?alt_url=").concat(e)},69951:(e,t,n)=>{"use strict";n.d(t,{Aj:()=>a,BA:()=>c,I0:()=>i,Vj:()=>o,XJ:()=>r,ZX:()=>d,mj:()=>s,pg:()=>l});let i=.8,a=12,r=8,o=15,l=5,s=1,d=2,c=.1},17835:(e,t,n)=>{"use strict";n.d(t,{HI:()=>A,IG:()=>b,Im:()=>w,NZ:()=>f,Pb:()=>m,hk:()=>E,jG:()=>z,ni:()=>v,qK:()=>x,tz:()=>C,w5:()=>R,wG:()=>k,yL:()=>y,yg:()=>j});var i=n(13236),a=n(69e3);n(14041);var r=n(83380),o=n(9335),l=n(40201),s=n(95580),d=n(17119),c=n(77646),u=n(1712),p=n(93090),h=n(90406);let m=e=>"gallery"===e.type.name,g=e=>(0,i.eL)(e,m),x=e=>!!g(e),f=e=>{let{decorations:t}=e;return t.some(e=>e.spec.inGallery)},v=e=>{let{decorations:t}=e;return t.some(e=>"grid"===e.spec.layout)},b=e=>{var t;let{decorations:n}=e;return null===(t=n.find(e=>e.spec.thumbHeight))||void 0===t?void 0:t.spec.thumbHeight},y=e=>{var t;let{decorations:n}=e;return null===(t=n.find(e=>e.spec.thumbSpacing))||void 0===t?void 0:t.spec.thumbSpacing},w=e=>{let{decorations:t}=e;return t.some(e=>"logo"===e.spec.layout)},j=e=>{var t;let{decorations:n}=e,i=null===(t=n.find(e=>e.spec.children))||void 0===t?void 0:t.spec.children;return i?(0,s.F2)(i):[]},k=e=>{let t=(0,d.rV)(e.$from);t&&!(0,c.jg)(t.node)?o.LF.emit(o.DN.CREATE_COMMENT_FROM_SELECTION,{selectionPos:e.from,parentPos:t.pos,text:(0,l.Lo)(e.node)}):o.LF.emit(o.DN.CREATE_COMMENT_FROM_SELECTION,{selectionPos:e.from,parentPos:e.from,text:(0,l.Lo)(e.node)})},C=(e,t,n,i)=>{let a,r;if(n&&!S(n,e.state.schema))return null;let o=e.posAtCoords({left:t.clientX,top:t.clientY});if(!o)return null;let{doc:l}=e.state,{pos:d}=o,c=l.resolve(d),u=g(c);if(u&&u.node.childCount>0)d=o.pos,(a=(0,s.q0)(d,e))||d!=u.pos+u.node.nodeSize-1||(d-=1,a=(0,s.q0)(d,e)),r=u.node;else{d=o.inside;try{r=l.resolve(d).nodeAfter}catch(e){return null}if(!r||!(0,h.Bv)(r)||r==(null==n?void 0:n.content.firstChild)||i)return null;let t=c.parent;if(t&&!I(e.state.schema,t))return null;if("image"===r.type.name){var p;let t=e.nodeDOM(d);a=null==t?void 0:null===(p=t.querySelector("[data-node-image-testid]"))||void 0===p?void 0:p.getBoundingClientRect()}else a=(0,s.q0)(d,e)}if(!a)return null;let m=t.clientX-a.left,x=a.right-t.clientX,f=m>x?"right":"left";return("left"==f?m<0:x<0)&&!u?null:{pos:d,side:f,rect:a,node:r}},S=(e,t)=>e.content.size>0&&t.nodes.gallery.validContent(e.content),A=(e,t)=>{var n;let i=null===(n=e.dragging)||void 0===n?void 0:n.slice;if(!i){let e=[...t.dataTransfer.items];return e.length>0&&e.every(e=>e.type.startsWith("image/"))}return S(i,e.state.schema)},z=(e,t,n)=>{let i=(0,p.dM)(n,t);return(0,u.kf)(t)||S(t,e)||i&&i.length>0},I=(e,t)=>{let n=e.nodes[t.type.name];return!!n&&n.validContent(a.FK.fromJSON(e,[{type:"gallery",content:[]}]))},R=(e,t)=>"calc(".concat(.25*e,"em + ").concat(t,"em)"),E=(e,t)=>{try{var n;let i=e(),a=t.state.doc.nodeAt(i);if(!a)return;let o=null===(n=a.lastChild)||void 0===n?void 0:n.attrs.source,l=i+(null==a?void 0:a.nodeSize)-1;t.chain().insertContentAt(l,{type:"mediaPlaceholder",attrs:{source:o||"image.custom"}}).run(),setTimeout(()=>{t.commands.focus(),t.commands.setNodeSelection(l),(0,r.G)()})}catch(e){console.error("(caught) [GalleryView] addImage",e)}}},81594:(e,t,n)=>{"use strict";n.d(t,{Y:()=>k,h:()=>C});var i=n(31085),a=n(80532),r=n(25420),o=n(35789),l=n(12917),s=n(89897),d=n.n(s),c=n(71022),u=n(4977),p=n(64225),h=n(5933),m=n(17539),g=n(38684),x=n(4381),f=n(54979),v=n(52417),b=n(27930),y=n(94007),w=n(21696),j=n(90406);let k=e=>{var t,n,o;let{image:s,editor:d,getPos:c,imageShape:f,imageSx:j,node:k,decorations:S,handleEditableClick:A,handleEditableDoubleClick:z,hasQuickActions:I=!1,isInlineColorableSvg:R=!1,editWithoutSelection:E=!1}=e,L=(0,w.j)(d,c),_=d.state.selection.from===c(),M=(0,m.SV)((null==s?void 0:s.src)||(null==s?void 0:s.tempUrl)),N=(0,m.v7)(null==s?void 0:s.src),{isDark:T,bodyColor:P}=(0,x.a)(S),O=!s||s.showPlaceholder||!s.src&&!s.tempUrl,D=null!==(o=s&&(null===(t=s.loadImageParams)||void 0===t?void 0:t.provider))&&void 0!==o?o:void 0,F=s&&"queued"===s.loadImageStatus&&!d.isThumbnail,{tempUrl:H,uploadStatus:W,meta:B}=s||{},V=(null==s?void 0:s.src)?(0,m.pO)(s.src,P):void 0,G=(0,p.GV)(h.nD),U=k.attrs.source,K=V&&(0,m.Ub)(V,d.isThumbnail?m.p7:d.isSiteNavbarEditor?m.oc:{width:1e3,height:1e3},B),q=(0,m.QV)(K,K?void 0:H),J={backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundImage:R||O?void 0:q,backgroundPosition:(0,g.w3)(s),width:"100%",height:"100%",borderRadius:"circle"!==f||R?"var(--box-border-radius)":"full",transitionProperty:"border-radius",transitionDuration:"normal",...j};return(0,i.jsxs)(a.az,{position:"relative",cursor:_||E&&G?"pointer":"default",contentEditable:!1,h:"100%",onClick:G?A:void 0,onDoubleClick:G?z:void 0,transitionProperty:"filter background",transitionDuration:"normal",_hover:G&&_?{filter:T?"brightness(1.15)":"brightness(0.85)",bg:M?T?"whiteAlpha.100":"blackAlpha.100":void 0}:void 0,children:[O?(0,i.jsx)(y.Pf,{...J,isLoading:!!F,loadingProvider:D,icon:(null===(n=v.Fn["image.custom"])||void 0===n?void 0:n.icon)||l.Cyq,h:"100%",hasQuickActions:I,onSelectAndFocus:()=>{G&&L()},defaultSource:U,cursor:_||E?"pointer":"default"}):N?(0,i.jsx)(m.FD,{src:V||H||"",poster:null==B?void 0:B.poster,w:"100%",h:"100%",objectFit:"cover","data-content-reference":!0}):R?(0,i.jsx)(C,{image:s,src:V||H||"",imageShape:f,imageStyles:J}):(0,i.jsx)(r.s,{"data-content-reference":!0,"data-change-focus-point-el":!0,className:"card-layout-cell-bg",position:"relative",sx:J}),W==u.A.Uploading&&G&&(0,i.jsx)(b.Td,{}),W==u.A.Error&&(0,i.jsx)(b.Hy,{})]})},C=e=>{var t;let{image:n,src:a,imageShape:r,imageStyles:l}=e,s=null!==(t=f.z[r||"square"])&&void 0!==t?t:f.z.square,{meta:u}=n||{},p=(0,j.Kk)(a,"accessory-img-inline-svg");return(0,i.jsx)(o.o,{...l,objectFit:"contain",sx:{svg:{width:"100%",aspectRatio:null==s?void 0:s.aspectRatio}},children:(0,i.jsx)(c.A,{src:p,viewBox:(null==u?void 0:u.width)&&(null==u?void 0:u.height)?"0 0 ".concat(u.width," ").concat(u.height):void 0,className:"colorable-icon",preProcessor:e=>d().sanitize(e,{USE_PROFILES:{svg:!0,svgFilters:!0}})})})}},69069:(e,t,n)=>{"use strict";n.d(t,{BT:()=>C,CF:()=>j,Ft:()=>S});var i=n(31085),a=n(78141),r=n(12567),o=n(14041),l=n(89864),s=n(6657),d=n(64225),c=n(95994),u=n(8007),p=n(12253);let h=["0%","0%","0%","0%"],m="clippable-control-wrapper",g=(e,t,n)=>e/Math.sqrt((t*t+n*n)/2)*100,x=(e,t,n)=>e/100*Math.sqrt((t*t+n*n)/2),f=(e,t,n)=>{if("circle"===e){let e=Math.min(t,n)/2;return["".concat(g(e,t,n),"%"),"at","50%","50%"]}return h},v=(e,t,n)=>"circle"===e?1:"inset"===e?t/n:null,b=(e,t)=>{if("inset"===t){let[t,n]=e[0],[i,a]=e[4];return(i-t)/(a-n)}return 1},y=(e,t,n,i)=>{let[a,r,o,l]=e;if("inset"===t){let t=parseFloat(a),s=parseFloat(r),d=parseFloat(o),u=parseFloat(l),p=c.MK/n*100,h=c.MK/i*100;if(100-u-s<p){let t=100-u-p;t>=0?e[1]="".concat(t,"%"):(e[1]="0%",e[3]="".concat(100-p,"%"))}if(100-t-d<h){let n=100-t-h;n>=0?e[2]="".concat(n,"%"):(e[2]="0%",e[0]="".concat(100-h,"%"))}}else if("circle"===t){let t=Math.max(x(parseFloat(a),n,i),c.MK);e[0]="".concat(g(t,n,i),"%")}},w=e=>{let{clipType:t,clipStyles:n,w:i,h:a}=e,[r,o,l,s]=n;if("inset"===t){let e=parseFloat(r),t=parseFloat(o),n=parseFloat(l),i=parseFloat(s),a=i/(t+i)*100,d=e/(e+n)*100,c=isNaN(a)?50:a,u=isNaN(d)?50:d,p=100-i-t,h=100-e-n;return{mask:"\n        linear-gradient(#000 0 0) ".concat(c,"% ").concat(u,"% / ").concat(p,"% ").concat(h,"%,\n        linear-gradient(rgba(0,0,0,0.4) 0 0)"),width:p,height:h,top:e,right:t,bottom:n,left:i}}if("circle"===t){let e=parseFloat(r),t=parseFloat(l),n=parseFloat(s),o=x(e,i,a),d=n/100*a-o,c=t/100*i-o,u=2*o/i*100,p=2*o/a*100,h=d/a*100,m=c/i*100;return{mask:"radial-gradient(".concat(u,"% ").concat(p,"% at ").concat(t,"% ").concat(n,"%, black 50%, rgba(0, 0, 0, 0.4) 50%) no-repeat"),width:u,height:p,top:Math.max(h,0),left:Math.max(m,0),bottom:0,right:0}}return{mask:"",width:0,height:0,top:0,left:0,bottom:0,right:0}},j=(e,t,n,i)=>{if(!e||!e.clipType||!i)return{clipType:"inset",scaleCrop:1,scaleX:1,scaleY:1,aspectRatio:i||void 0,referenceXOffset:1,referenceYOffset:1,clipPathCSSString:"",translateX:0,translateY:0};let a=e.clipPath||f(e.clipType,t,n),{clipType:r}=e,{width:o,height:l,top:s,left:d,right:c,bottom:u}=w({w:t,h:n,clipType:r,clipStyles:a}),p=100/o,h=100/l,m=(null==e?void 0:e.clipAspectRatio)||1,g=(null==e?void 0:e.clipAspectRatio)||i;return{scaleCrop:i/m<1?Math.min(h,p):Math.max(h,p),aspectRatio:g,scaleX:p,scaleY:h,translateX:d,translateY:s,referenceXOffset:t*(100/(100-d+c)-1),referenceYOffset:n*(100/(100-s+u)-1),clipPathCSSString:"".concat(r,"(").concat(a.join(" "),")"),clipType:r}},k=(0,l.yX)([l.ZW]),C={[".".concat(m)]:{zIndex:2,".moveable-control":{zIndex:2,_hover:{opacity:1},transitionProperty:"opacity",transitionDuration:"normal"},"&.data-clip-type-inset":{".moveable-control":{zIndex:2,bg:"0 none !important",borderRadius:"0px",width:"".concat(16,"px"),height:"".concat(16,"px"),border:"6px solid var(--chakra-colors-trueblue-300)",'&[data-clip-index="0"]':{borderRight:"0",borderBottom:"0",marginTop:"-".concat(2,"px"),marginLeft:"-".concat(2,"px"),cursor:"nw-resize"},'&[data-clip-index="1"]':{borderRight:"0",borderBottom:"0",borderLeft:"0",marginTop:"-".concat(2,"px"),cursor:"n-resize"},'&[data-clip-index="2"]':{borderLeft:"0",borderBottom:"0",marginTop:"-".concat(2,"px"),marginLeft:"-".concat(14,"px"),cursor:"ne-resize"},'&[data-clip-index="3"]':{borderBottom:"0",borderTop:"0",borderLeft:"0",marginLeft:"-".concat(14,"px"),cursor:"e-resize"},'&[data-clip-index="4"]':{borderTop:"0",borderLeft:"0",marginLeft:"-".concat(14,"px"),marginTop:"-".concat(14,"px"),cursor:"se-resize"},'&[data-clip-index="5"]':{borderTop:"0",borderLeft:"0",borderRight:"0",marginTop:"-".concat(14,"px"),cursor:"s-resize"},'&[data-clip-index="6"]':{borderTop:"0",borderRight:"0",marginTop:"-".concat(14,"px"),marginLeft:"-".concat(2,"px"),cursor:"sw-resize"},'&[data-clip-index="7"]':{borderTop:"0",borderBottom:"0",borderRight:"0",marginLeft:"-".concat(2,"px"),cursor:"w-resize"}}},"&.data-clip-type-circle":{".moveable-control":{bg:"trueblue.300"}},".moveable-clip-ellipse":{borderWidth:"2px",borderColor:"var(--chakra-colors-trueblue-300) !important"},".moveable-line":{display:"none"}}},S=e=>{let{clipPath:t,clipAspectRatio:n,updateResizeAttrs:l,imageWrapperRef:c,refreshDeps:h,currentWidth:g,currentHeight:x,onFinishCrop:j}=e,C=(0,d.jL)(),S=(0,d.GV)(p.$k),A=(0,o.useRef)(null),[z,I]=(0,o.useState)({clipPath:t||f(S,g,x),clipAspectRatio:n||v(S,g,x)}),R=(0,o.useCallback)(e=>{if(!g||!x||!c.current)return;let{mask:t}=w({w:g,h:x,clipType:S,clipStyles:e});c.current.style["-webkit-mask"]=t,c.current.style["-webkit-mask-repeat"]="no-repeat"},[c,S,g,x]),E=JSON.stringify(z.clipPath);(0,o.useEffect)(()=>{R(z.clipPath)},[R,E,z.clipPath]),(0,a.w)(()=>{I(e=>({...e,clipPath:f(S,g,x),clipAspectRatio:v(S,g,x)}))},[S]),(0,o.useEffect)(()=>{var e;null===(e=A.current)||void 0===e||e.updateTarget()},[h]);let L=(0,o.useCallback)(()=>{let e={clipType:S,...z};e.clipAspectRatio&&e.clipPath&&l(e)},[l,z,S]),_=(0,o.useRef)({fn:L,confirmOnUnmount:!0});_.current.fn=L,(0,o.useEffect)(()=>u.R.on("endClip",e=>{let{confirm:t}=e;_.current.confirmOnUnmount=t,C((0,p.uy)()),j&&j()}),[C,j]),(0,o.useEffect)(()=>{let e=_.current;return()=>{e.confirmOnUnmount&&setTimeout(e.fn,0)}},[]),(0,o.useEffect)(()=>s.WC.on("keydown","CLIPPABLE",e=>!!(0,r.Ay)("mod+x")(e)&&(e.preventDefault(),!0)),[]);let M="".concat(S,"(").concat((z.clipPath||f(S,g,x)).join(" "),")");return(0,i.jsx)(k,{ref:e=>{A.current=e},className:"".concat(m," data-clip-type-").concat(S),target:c.current,renderDirections:["ne","nw","se","sw"],origin:!1,draggable:!1,clippable:!0,clipTargetBounds:!0,clipRelative:!0,clipArea:!0,defaultClipPath:S,customClipPath:M,dragWithClip:!0,keepRatio:!0,onClip:e=>{let{clipStyles:t,clipType:n}=e;y(t,n,g,x),R(t)},onClipEnd:e=>{let{lastEvent:t}=e;if(!(null==t?void 0:t.clipStyles))return;let{clipStyles:n,clipType:i}=t;y(n,i,g,x),I({clipPath:n,clipAspectRatio:b(t.poses,S)})}})}},56436:(e,t,n)=>{"use strict";n.d(t,{F:()=>y});var i=n(31085),a=n(80532),r=n(18651),o=n(14041),l=n(82257),s=n(17539),d=n(94007),c=n(3706),u=n(4876),p=n(64225),h=n(747),m=n(5933);let g=e=>{let{link:t,children:n,...a}=e,r=(0,p.GV)(m.nD),{linkUrl:l,handleClick:s}=(0,h.c)({url:t||""}),{interceptLinkClick:d,linkUrlSafe:g,isUntrusted:x,linkInterceptEnabled:f}=(0,u.i)(l),v=(0,o.useCallback)(e=>{if(null==s||s(e),!r)return f?d(e):void 0;e.preventDefault()},[r,s,d,f]);return t&&!x?(0,i.jsx)(c.N,{href:f?g||"":l,isExternal:!0,onClick:v,rel:"noopener nofollow",...a,children:n}):(0,i.jsx)(i.Fragment,{children:n})};var x=n(69069);let f=(e,t,n)=>e/100*(Math.sqrt(t*t+n*n)/Math.sqrt(2))*2,v=e=>{let t,n,i,a,r,{w:o,h:l,clipPath:d,clipType:c,src:u}=e;if(!d||!c||!u)return null;if("inset"===c){let e=.01*parseFloat(d[0]),r=.01*parseFloat(d[1]),o=.01*parseFloat(d[2]),l=.01*parseFloat(d[3]);t=l+r===0?0:1-(l+r),n=e+o===0?0:1-(e+o),i=l,a=e}else{n=t=f(parseFloat(d[0]),o,l);let e=t/2;i=(.01*parseFloat(d[2])-e/o)*o,a=(.01*parseFloat(d[3])-e/l)*l,r=!0}return{url:(0,s.bI)(u,b({crop:{cropWidth:t,cropHeight:n},gravity:{xOffset:i,yOffset:a}})),isCircle:r}},b=e=>{let{crop:{cropWidth:t,cropHeight:n},gravity:{xOffset:i,yOffset:a}}=e;return{crop:"".concat(t,":").concat(n,":nowe:").concat(i,":").concat(a),resizing_type:"auto"}},y=(0,o.forwardRef)((e,t)=>{let{imageAttrs:{src:n,tempUrl:o,resize:c,meta:u},isCroppingThisImage:p=!1,isZoomed:h=!1,objectFit:m="contain",containerWidth:f,intrinsicAspectRatio:b,isThumbnail:y,linkHref:w,containerProps:j,shouldUseImgProxyCrop:k,bodyColor:C,...S}=e;C&&n&&(n=(0,s.pO)(n,C));let A=(0,l.oR)(),z=(null==u?void 0:u.frame_count)&&u.frame_count>1,I=h||!n||z?n:(0,s.Ub)(n,y?{height:400}:{width:2e3},u),R=f||(null==u?void 0:u.width)||1,E=f&&b?f/b:(null==u?void 0:u.height)||1,{scaleCrop:L,scaleY:_,clipPathCSSString:M,translateX:N,translateY:T,aspectRatio:P,referenceXOffset:O,referenceYOffset:D}=(0,x.CF)(c,R,E,b||((null==u?void 0:u.width)&&(null==u?void 0:u.height)?u.width/u.height:1))||{},F=!p&&!!(null==c?void 0:c.clipPath),H=p?"":"scale(".concat(L,") translate(-").concat(N,"%, -").concat(T,"%)"),W=(0,s.SV)(n||o),B=(0,s.v7)(n||o),V=v({w:R,h:E,clipPath:null==c?void 0:c.clipPath,clipType:null==c?void 0:c.clipType,src:n});return(0,i.jsx)(g,{link:w,w:h?void 0:"100%",children:(0,i.jsx)(a.az,{css:{aspectRatio:"".concat(F?P:"")},className:"image","data-content-reference":"".concat(O,",").concat(D),"data-export-link":w,"data-drag-preview":!0,"data-scale-preview":!0,maxH:"var(--media-maxH)",maxW:"var(--media-maxW)",overflow:"hidden",w:h?void 0:"100%",h:"cover"==m?"100%":void 0,sx:{"@media print":{height:"unset"}},...j,children:B?(0,i.jsx)(s.FD,{src:n||o||"",poster:null==u?void 0:u.poster,objectFit:m,maxH:"calc(var(--media-maxH) * ".concat(_||1,")"),minH:"cover"==m?"calc(var(--media-maxH) / ".concat(L||1,")"):void 0,...S}):k&&(null==V?void 0:V.url)?(0,i.jsx)(r._,{alt:"",objectFit:m,maxH:"calc(var(--media-maxH) * ".concat(_||1,")"),minH:"cover"==m?"calc(var(--media-maxH) / ".concat(L||1,")"):void 0,ref:t,...n||o?{}:d.v9,src:(null==V?void 0:V.url)||I||o||"",...S}):(0,i.jsx)(r._,{alt:"",objectFit:m,maxH:"calc(var(--media-maxH) * ".concat(_||1,")"),minH:"cover"==m?"calc(var(--media-maxH) / ".concat(L||1,")"):void 0,transformOrigin:"left top",clipPath:p?"":M,ignoreFallback:h||A,transform:H,src:I||o||"",fallbackSrc:o||"",ref:t,w:W?"100%":void 0,...n||o?{}:d.v9,...S})})})});y.displayName="CroppedImage"},77854:(e,t,n)=>{"use strict";n.d(t,{c:()=>d});var i=n(13236),a=n(44498),r=n(58599),o=n(43873),l=n(29362),s=n(217);let d=a.Ay.extend({selectable:!0,draggable:!0,group:"block media",priority:o.y.Image,addOptions(){var e;return{...null===(e=this.parent)||void 0===e?void 0:e.call(this),placeholders:{}}},addNodeView:()=>(0,r.gu)(s.v,{update:l.z0}),parseHTML:()=>[{tag:"img[src], img[tempUrl]"}],renderHTML(e){let{HTMLAttributes:t}=e;return["img",(0,i.KV)(t,{class:"gamma-simple-image"})]},addAttributes:()=>({src:{},tempUrl:{},uploadStatus:{},source:{},showPlaceholder:{}})})},217:(e,t,n)=>{"use strict";n.d(t,{v:()=>c});var i=n(31085),a=n(80532),r=n(3706),o=n(18651),l=n(4977),s=n(58599),d=n(27930);let c=e=>{let{node:t}=e,{src:n,tempUrl:c,uploadStatus:u,showPlaceholder:p,id:h}=t.attrs;return(0,i.jsxs)(s.VR,{as:"div",children:[p&&(0,i.jsx)(d.VM,{...e}),!p&&(n||c)&&(0,i.jsxs)(a.az,{position:"relative",w:"100%",children:[(0,i.jsx)(r.N,{className:"image-link",href:n||c||"",target:"_blank",children:(0,i.jsx)(o._,{src:n||c||""})}),u==l.A.Uploading&&(0,i.jsx)(d.Td,{}),u==l.A.Error&&(0,i.jsx)(d.Hy,{})]})]})};c.displayName="simple-image-view"},47572:(e,t,n)=>{"use strict";n.d(t,{P:()=>a,T:()=>i});let i="non-clickable",a={clipType:null,clipPath:null,clipAspectRatio:null,width:null}},78807:(e,t,n)=>{"use strict";n.d(t,{E:()=>o});var i=n(14041),a=n(64225),r=n(14285);let o=e=>{let t=(0,a.jL)(),n=(0,i.useCallback)(e=>{let{clipType:n}=e;n&&t((0,r.F8)({clipType:n}))},[t]),o=(0,i.useCallback)(n=>{let{id:i}=n;r.RR.emit("endClip",{id:i,confirm:!1}),t((0,r.uy)()),e.commands.resetImageClip()},[t,e]),l=(0,i.useCallback)(e=>{let{id:n}=e;r.RR.emit("endClip",{id:n,confirm:!1}),t((0,r.uy)())},[t]),s=(0,i.useCallback)(e=>{let{id:n}=e;r.RR.emit("endClip",{id:n,confirm:!0}),t((0,r.uy)())},[t]);return{cancelCrop:l,startCrop:(0,i.useCallback)(e=>{let{id:n,clipType:i}=e;t((0,r.Zu)({id:n,clipType:i})),r.RR.emit("startCrop",{id:n})},[t]),confirmCrop:s,resetCrop:o,setCropClipType:n}}},8007:(e,t,n)=>{"use strict";n.d(t,{R:()=>i});let i=new(n(36832)).b},2861:(e,t,n)=>{"use strict";n.d(t,{M:()=>r,j:()=>a});var i=n(14041);let a=()=>{let e=(0,i.useRef)(null),t=(0,i.useRef)(null),[n,a]=(0,i.useState)(0),[r,o]=(0,i.useState)(0),[l,s]=(0,i.useState)(null);return{width:n,height:r,aspectRatio:l,setSize:(0,i.useCallback)(()=>{var n,i;let r=null===(n=e.current)||void 0===n?void 0:n.getBoundingClientRect(),l=null===(i=t.current)||void 0===i?void 0:i.getBoundingClientRect();if(r&&l){let e=l.width/l.height,t=r.width,n=r.width/e;if(0===t||isNaN(t)||0===n||isNaN(n))return;a(t),o(n),s(e)}},[]),containerWrapperRef:e,imageRef:t}},r=e=>(0,i.useCallback)(t=>{if(!e)return;let n=null==e?void 0:e.view.domAtPos(t);if(!n){console.warn("scrollOnImageLoad could not domAtPos",{pos:t});return}let i=n.node.childNodes[n.offset];if(!i||!i.querySelector){console.warn("scrollOnImageLoad could not find node",{parentNode:n.node,offset:n.offset});return}let a=i.querySelector("[data-image-node-element] img");if(!a){console.warn("scrollOnImageLoad could not find <img> element");return}let r=()=>{e.chain().selectNodeAtPos(t,!1).focus().scrollIntoView().run(),setTimeout(()=>{e.chain().selectNodeAtPos(t,!1).focus().scrollIntoView().run()},1e3),a.removeEventListener("load",r)};a.addEventListener("load",r)},[e])},14285:(e,t,n)=>{"use strict";n.d(t,{FQ:()=>$.F,_V:()=>eR,zs:()=>ed.zs,uy:()=>ed.uy,N2:()=>ed.N2,RR:()=>j.R,$k:()=>ed.$k,CU:()=>ed.CU,iZ:()=>ed.iZ,No:()=>ed.No,F8:()=>ed.F8,GP:()=>ed.GP,BS:()=>ed.BS,sI:()=>ed.sI,Zu:()=>ed.Zu,WE:()=>ed.WE});var i=n(13236),a=n(44498),r=n(81570),o=n(60953),l=n(33587),s=n(952),d=n(64225),c=n(39933),u=n(58599),p=n(95580),h=n(26884),m=n(43873),g=n(29362),x=n(73686);let f=new r.hs("convertToGridLayout"),v=()=>new r.k_({key:f,props:{decorations:e=>{let{doc:t}=e,n=[];return t.descendants((e,t,i)=>{"image"===e.type.name&&"cardLayoutItem"===i.type.name&&n.push(x.NZ.node(t,t+e.nodeSize,{},{isTopLevel:!0}))}),x.zF.create(t,n)}}});var b=n(12127),y=n(90406),w=n(47572),j=n(8007),k=n(31085),C=n(80532),S=n(27670),A=n(61778),z=n(82451),I=n.n(z),R=n(14041),E=n(35002),L=n(4977),_=n(93681),M=n(83380),N=n(5933),T=n(92667),P=n(17539),O=n(5434),D=n(25472),F=n(4381),H=n(49572),W=n(95905),B=n(87643),V=n(95994),G=n(17835),U=n(27930),K=n(57569),q=n(76304),J=n(69069),$=n(56436),Y=n(78807),Q=n(2861),X=n(63552),Z=n(25420),ee=n(95640),et=n(12327),en=n(71096),ei=n(64130),ea=n(41938),er=n(19534),eo=n(87071),el=n(89565),es=n(12443),ed=n(12253),ec=n(20501),eu=n(3040),ep=n(32900),eh=n(74240),em=n(14858),eg=n(15355),ex=n(16648),ef=n(802),ev=n(31948);let eb=e=>{let{editor:t,node:n,getPos:a}=e,r=(0,i.eL)(t.state.doc.resolve(a()),G.Pb),o=!!r,{resize:l,fullWidthBlock:s,id:d,clickBehavior:c}=n.attrs,{startRemoveBg:u,isRemovingBg:p}=(0,ef.D)({editor:t,id:d}),h=(0,y.gk)(c),{startCrop:m}=(0,Y.E)(t),g=(0,R.useCallback)(()=>{t.commands.selectNodeAtPos(a()),p&&j.R.emit("cancelRemoveBg",{id:d}),t.chain().deleteSelectionAndSelectNear().run()},[t,d,p,a]),x=(0,M.f)(),f=(0,R.useCallback)(e=>{t.commands.updateAttributes(eR.name,{clickBehavior:e})},[t]),v=(0,ex.d)({editor:t,node:n,getPos:a,imageSrc:n.attrs.src}),b=(0,E.u)("disableRemoveBackground"),w=(0,eh.l)(n.attrs),{toggleBuddyChatPanel:C,isBuddyChatPanelOpen:S}=(0,em.C)();return{contextMenuItems:[...v,{divider:!0},{key:"edit-image",label:(0,k.jsx)(ee.x6,{id:"9IrgTy"}),icon:ec.MT7,onClick:()=>{t.view.focus(),x({isOpen:!0})}},...w?[{key:"ask-ai",label:(0,k.jsx)(ee.x6,{id:"vKZEFh"}),icon:eu.p7g,onClick:()=>{S||C(),setTimeout(()=>{ep.j.emit("prefillMessage",{message:""})},200)}}]:[],...b?[]:[{key:"remove-background",label:p?(0,k.jsx)(ee.x6,{id:"RdqLb7"}):(0,k.jsx)(ee.x6,{id:"ylbfBl"}),icon:p?ec.z1G:ec.sAw,rightIcon:p?void 0:(0,k.jsx)(eg.G,{type:"removeBackground",ms:2,color:"gray.400"}),disabled:p,onClick:u}],...o?[]:[{key:"crop",label:(0,k.jsx)(ee.x6,{id:"qKx+US"}),icon:ec.K1P,onClick:()=>{t.commands.selectNodeAtPos(a()),m({id:d,clipType:null==l?void 0:l.clipType})}}],...(0,ev.bT)(n)?[{key:"reset-formatting",label:(0,k.jsx)(ee.x6,{id:"5eaf8Z"}),icon:ec.U23,onClick:()=>(0,ev.LQ)(t)}]:[],{divider:!0},{key:"add-comment",label:(0,k.jsx)(ee.x6,{id:"oFsfkI"}),icon:ec.DN2,onClick:()=>{t.commands.selectNodeAtPos(a()),(0,G.wG)(t.state.selection)}},{divider:!0},...o?[]:[{key:"align",label:(0,k.jsx)(ee.x6,{id:"9ms+e0"}),icon:ec.ecg,disabled:s,items:W.gj.map(e=>{let{name:n,key:i,icon:a,checkActive:r,apply:o}=e;return{key:i,icon:r&&r(t)?ec.e68:a,label:n(),onClick:()=>{o&&o(t),s&&t.commands.updateAttributes(eR.name,{fullWidthBlock:!1,resize:{...l,width:null}})}}})}],{key:"click-action",label:(0,k.jsx)(ee.x6,{id:"PWv7TI"}),icon:ec.ii0,items:[{key:"do-nothing",icon:"none"===h?ec.e68:void 0,label:(0,k.jsx)(ee.x6,{id:"gIjBW2"}),onClick:()=>f("none")},{key:"expand",icon:"expand"===h?ec.e68:void 0,label:(0,k.jsx)(ee.x6,{id:"1A3EXy"}),onClick:()=>f("expand")},{key:"new-tab",icon:"newTab"===h?ec.e68:void 0,label:(0,k.jsx)(ee.x6,{id:"Alx2/L"}),onClick:()=>{t.commands.selectNodeAtPos(a()),f("newTab")}}]},...o?[{divider:!0},{key:"edit-gallery",icon:ec.Qyz,label:(0,k.jsx)(ee.x6,{id:"uv9eFb"}),onClick:()=>{t.commands.selectNodeAtPos(r.pos)}}]:[],{divider:!0},{key:"delete",label:(0,k.jsx)(ee.x6,{id:"cnGeoo"}),icon:ec.yLS,onClick:g,color:"red.500"}]}},ey=e=>e.some(e=>e.spec.isTopLevel),ew=(e,t)=>ey((0,er.j5)(e,t)),ej=e=>{let{node:t}=e;return(0,i.BQ)(e)&&(null==t?void 0:t.type.name)==="image"},ek=e=>{let{editor:t,event:n,isCropping:i}=e,a=t.view,{selection:o}=a.state;if(!(o instanceof r.nh)||!t.isEditable)return!1;let{node:l}=o,s=o.from,d=o.to;if(!ej(o))return!1;let c=n.target,u=c.getAttribute("data-media-add-text"),p=ew(t,s);if(!u||!p||i)return!1;let h=(0,es.eq)({view:a,from:s,to:d,node:l}),m=(0,es.Sm)({horizontalAlign:h,eventTarget:c,node:l,editor:t}),g=(0,es.Cn)({eventTarget:c,horizontalAlign:h,nodeSize:l.nodeSize,editor:t}),x=(0,es.I4)({horizontalAlign:h,prevPos:s});return t.chain().insertContentAt({from:s,to:d},m,{updateSelection:!1}).setMeta("annotationEvent",{type:"move",insertPos:x,insertPosRaw:x,pos:s,end:d}).focusMapped(s,g).run(),!1},eC=(0,X.R)((e,t)=>{let{children:n,resizeableSx:i,alignStyles:a,horizontalAlign:r,decorations:o,editor:l,node:s,isDark:c,isResizing:u,getPos:p}=e,h=s.attrs.id,m=(0,d.GV)((0,ed.iZ)(h)),g=ey(o),x=(0,d.GV)(N.Cl),f=x&&g&&!m&&("right"===r||"center"===r),v=x&&g&&!m&&(!r||"left"===r||"center"===r),[b,y]=(0,R.useState)({side:null,id:null}),{onOpenContextMenu:w,onCloseContextMenu:j,menuProps:S}=(0,ea.$)({editor:l,getPos:p}),{contextMenuItems:A}=eb({editor:l,node:s,getPos:p});return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(Z.s,{dir:(0,W.fZ)(o,r),"data-media-node-wrapper":!0,"data-testid":"image-node-wrapper",onContextMenu:w,ref:t,h:"100%",w:"100%",direction:f||v?"row":"column",className:eo.S,sx:{...i},onClick:e=>{ek({editor:l,event:e,isCropping:m})},css:{...a,...f||v?{alignItems:"stretch"}:{}},onDragOver:e=>{if(e.preventDefault(),!b){var t;let n=(0,el.Vk)(l.view,e,null===(t=l.view.dragging)||void 0===t?void 0:t.slice),i=(0,el.rj)(e.target,l.view),a=null==n?void 0:n.node.attrs.id;n&&i&&a&&(y({side:i,id:a}),setTimeout(()=>{y(null)},5e3))}},onDragEnd:e=>{e.preventDefault(),b&&y(null)},onDragLeave:e=>{e.preventDefault(),y(null)},children:[f&&(0,k.jsx)(C.az,{"data-media-add-side":"left",flex:"1",pos:"relative",css:{containerType:"size"},children:(null==b?void 0:b.side)==="left"&&(null==b?void 0:b.id)===s.attrs.id?(0,k.jsx)(eA,{me:4}):(0,k.jsx)(eS,{side:"left",me:4,isDark:c,isResizing:u})}),n,v&&(0,k.jsx)(C.az,{"data-media-add-side":"right",flex:"1",pos:"relative",css:{containerType:"size"},children:(null==b?void 0:b.side)==="right"&&(null==b?void 0:b.id)===s.attrs.id?(0,k.jsx)(eA,{ms:4}):(0,k.jsx)(eS,{side:"right",ms:4,isDark:c,isResizing:u})})]}),(0,k.jsx)(en.t,{menuItems:A,isOpen:S.isOpen,position:S.position,onClose:j,size:"small"})]})}),eS=e=>{let{side:t,isDark:n,isResizing:i,...a}=e,r=(0,ei.fW)();return(0,k.jsx)(C.az,{p:2,flex:"1",borderRadius:"lg","data-media-add-text":!0,opacity:0,height:"100%",transitionProperty:"common",transitionDuration:"normal",...a,cursor:"text",css:{"@container (width < 150px)":{display:"none"},"&:after":{position:"absolute",top:0,..."left"===t?{right:"var(--chakra-space-4)"}:{left:"var(--chakra-space-4)"},backgroundColor:n?"rgba(255, 255, 255, 0.2)":"rgba(0, 0, 0, 0.1)",color:n?"var(--chakra-colors-whiteAlpha-700)":"var(--chakra-colors-gray-600)",zIndex:1,borderRadius:"var(--chakra-radii-lg)",content:'"'.concat(et.Ru._({id:"HpUrSQ"}),'"'),textAlign:r?"right":"left",fontSize:"var(--chakra-fontSizes-sm)",padding:"var(--chakra-space-2)",width:"calc(100% - var(--chakra-space-4) - var(--chakra-space-2) - var(--chakra-space-2))",height:"calc(100% - var(--chakra-space-2) - var(--chakra-space-2))"},"&:hover":{opacity:i?0:1}}})},eA=e=>(0,k.jsx)(C.az,{p:2,flex:"1",height:"100%",borderRadius:"lg",transitionProperty:"common",transitionDuration:"normal",background:"var(--chakra-ring-color)",color:"var(--chakra-colors-whiteAlpha-900)",display:"flex",alignItems:"center",justifyContent:"center",...e,children:(0,k.jsx)(A.E,{fontSize:"sm",fontWeight:"medium",children:(0,k.jsx)(ee.x6,{id:"Wv5uRs"})})}),ez=e=>{let{...t}=e,n=(0,d.jL)(),{node:i,editor:a,updateAttributes:r,selected:o,decorations:l,getPos:s}=t,{src:c,tempUrl:u,uploadStatus:p,meta:h,showPlaceholder:m,horizontalAlign:g,resize:x,id:f,href:v,clickBehavior:b,source:S}=i.attrs,A=(null==x?void 0:x.width)||(null==h?void 0:h.width),z=(0,P.SV)(c||u),X=(0,P.y9)(c||u)||(null==h?void 0:h.frame_count)&&h.frame_count>1,{isFullWidth:Z}=(0,D.D)(l),ee=(0,W.yp)(Z?"center":g),et=(0,G.NZ)(t),en=(0,G.ni)(t),ei=(0,G.Im)(t),ea=(0,B.DM)(l),er=(0,d.GV)(N.nD),eo=(0,H.Q)(a),{cardColor:el,bodyColor:es,isDark:ec}=(0,F.a)(t.decorations),eu=p===L.A.Uploading,ep=er?"expand":(0,y.gk)(b),eh="newTab"===ep&&!!v,em=(0,d.GV)(E.Gm),{isZoomed:eg,enterZoom:ex,exitZoom:ev}=(0,q.RL)(f),{width:eb,height:ey,aspectRatio:ew,containerWrapperRef:ej,imageRef:ek,setSize:eS}=(0,Q.j)();(0,R.useEffect)(()=>j.R.on("startCrop",e=>{let{id:t}=e;f===t&&(eS(),requestAnimationFrame(()=>{var e,t;null===(e=(t=a.commands).refreshBubbleMenu)||void 0===e||e.call(t)}))}),[f,eS,a]);let eA=(0,R.useCallback)(e=>{r(I()({},i.attrs,e,{meta:{has_transparency:!0}}))},[r,i.attrs]),{bgRemovalInProgress:ez,removeBgUrl:eR}=(0,ef._)({editor:a,id:i.attrs.id,src:i.attrs.src,updateAttributes:eA}),{ref:eE,isResizing:eL,setIsResizing:e_,resizeableSx:eM}=(0,K.Y3)(a),eN=eE.current&&ea&&!et&&!eo,eT=eE.current&&!et&&!eo,eP=(0,R.useCallback)((e,t)=>{r({...i.attrs,fullWidthBlock:void 0===t?i.attrs.fullWidthBlock:t,resize:{...i.attrs.resize,...e}})},[i.attrs,r]),eO=(0,T.jm)(),eD=(0,d.GV)((0,ed.iZ)(f)),{confirmCrop:eF}=(0,Y.E)(a);(0,T.Vg)(()=>{if(eD&&!o&&eF({id:f}),!o){var e,t;e_(!1),null===(e=(t=a.commands).forceHideBubbleMenu)||void 0===e||e.call(t,!1)}},[a,n,o,eD,f,eF,e_],[o]);let eH=!eD&&!eL&&!et&&!a.isThumbnail,eW=!a.isThumbnail&&"expand"===ep,eB=(0,R.useCallback)(()=>{eD||eL||ex()},[ex,eD,eL]),eV=(0,M.f)(),eG=(0,R.useMemo)(()=>{if(!et&&er)return()=>{eV({isOpen:!0})}},[et,er,eV]),eU=(0,R.useCallback)(()=>{if(o){var e,t;null===(e=(t=a.commands).refreshBubbleMenu)||void 0===e||e.call(t)}},[o,a]),eK=eR?{...i.attrs,src:eR,tempUrl:i.attrs.src}:i.attrs,eq=ei?{height:(0,G.w5)((0,G.IG)(t),(0,G.yL)(t)),padding:"".concat((0,G.yL)(t)/2,"em ").concat((0,G.yL)(t),"em")}:{};return(0,k.jsxs)(O.u,{...t,as:"div",className:er||"none"!==ep?void 0:w.T,style:{height:et?"100%":void 0},children:[(m||!c&&!u)&&(0,k.jsx)(U.VM,{...t}),!m&&(c||u)&&(0,k.jsxs)(eC,{ref:ej,resizeableSx:eM,alignStyles:ee,horizontalAlign:g,editor:a,decorations:l,node:i,isDark:ec,isResizing:eL,getPos:s,children:[eT&&eD&&(0,k.jsx)(J.Ft,{imageWrapperRef:eE,updateResizeAttrs:eP,refreshDeps:[eO],currentWidth:eb,currentHeight:ey,clipPath:null==x?void 0:x.clipPath,clipAspectRatio:null==x?void 0:x.clipAspectRatio,onFinishCrop:()=>{requestAnimationFrame(()=>{var e,t;null===(e=(t=a.commands).refreshBubbleMenu)||void 0===e||e.call(t)})}}),eN&&!eD&&o&&!Z&&(0,k.jsx)(K.u4,{imageWrapperRef:eE,setIsResizing:e_,updateResizeAttrs:eP,refreshDeps:[i.attrs,eO]}),(0,k.jsxs)(C.az,{ref:eE,css:{mask:eD?"":"none !important","--media-maxH":!eu||eL||(null==x?void 0:x.width)||et?void 0:"".concat(100*V.Mg,"vh")},sx:_.z,"data-drag-handle":!0,"data-image-node-element":!0,"data-selection-ring":"inside","data-selection-background":!0,"data-node-image-testid":f,w:et?"100%":A?"calc(".concat(A," * var(--font-size) / 16)"):"fit-content",maxW:"100%",position:"relative",overflow:"hidden",...et?{h:en?"100%":void 0,display:"flex",justifyContent:"center",alignContent:"center"}:{},children:[eW&&(0,k.jsx)(q.Kc,{enterZoom:eB,doubleClickNonZoomHandler:eG}),em&&(0,k.jsx)(eI,{imageAttrs:eK}),(0,k.jsx)($.F,{containerWidth:eb,intrinsicAspectRatio:ew||void 0,isCroppingThisImage:eD,imageAttrs:eK,onLoad:eU,linkHref:eh?v||"":void 0,filter:"image.icon"===S?"url(#theme-body-color-fill)":void 0,ref:ek,width:et?"auto":A||eL||Z||z?"100%":null==h?void 0:h.width,minW:et?"100%":void 0,objectFit:et?"cover":"contain",isThumbnail:et||a.isThumbnail,flex:en?1:void 0,containerProps:{display:en?"flex":"block"},shouldUseImgProxyCrop:en&&!X&&!z,bodyColor:es,...eq}),eH&&(0,k.jsx)(q.Gx,{isZoomed:eg,exitZoom:ev,editor:a,children:(0,k.jsx)($.F,{imageAttrs:i.attrs,backgroundColor:el,bodyColor:es,w:z?"80vw":void 0,isZoomed:!0})}),(eu||ez)&&er&&(0,k.jsx)(U.Td,{removeBackground:ez}),p==L.A.Error&&(0,k.jsx)(U.Hy,{})]})]})]})},eI=e=>{let{imageAttrs:t}=e;return(0,k.jsxs)(C.az,{position:"absolute",as:"span",maxW:"95%",zIndex:1,bottom:0,m:1,children:[(0,k.jsx)(S.E,{maxW:"100%",colorScheme:"green",m:0,children:(0,k.jsxs)(A.E,{isTruncated:!0,whiteSpace:"nowrap",textOverflow:"ellipsis",fontSize:"10px",maxW:"100%",children:["url: ",t.src]})}),(0,k.jsx)(S.E,{maxW:"100%",colorScheme:"yellow",children:(0,k.jsxs)(A.E,{isTruncated:!0,whiteSpace:"nowrap",textOverflow:"ellipsis",fontSize:"10px",maxW:"100%",children:["tempUrl: ",t.tempUrl]})})]})},eR=a.Ay.extend({selectable:!0,draggable:!0,group:"block media",priority:m.y.Image,expandable:!0,addOptions(){var e;return{...null===(e=this.parent)||void 0===e?void 0:e.call(this),placeholders:{}}},addStorage:h.xu,addNodeView:()=>(0,u.gu)(ez,{update:g.z0}),extendNodeSchema(e){var t;return{accessoryImageKey:(0,i.gk)((0,i.iI)(e,"accessoryImageKey",e)),imageKeyPath:null!==(t=(0,i.gk)((0,i.iI)(e,"imageKeyPath",e)))&&void 0!==t?t:""}},parseHTML(){return[{tag:"img[src], img[tempUrl]"},{tag:"img[bookmark]",getAttrs:(0,h.Ll)(this.storage)},{tag:"img[".concat(o.A,"]"),getAttrs:l.Dr},{tag:"div[class=card-accent-layout-item]",context:"cardLayoutItem//",getAttrs:e=>{try{let t=JSON.parse(e.getAttribute("data-background")||"{}");if("image"!==t.type||!t.image)return!1;let n={...t.image,source:t.source};return(0,y.Ez)(n)}catch(t){return console.error("[Image] Error parsing accent image background",e,t),!1}}}]},renderHTML(e){let{HTMLAttributes:t}=e;return["img",(0,i.KV)(this.options.HTMLAttributes,t,{loading:"lazy"})]},renderHTMLforAI(e){let{node:t}=e;return["img",{bookmark:(0,h.vL)(this.storage,t),alt:(0,s.ve)(t.attrs)}]},addAttributes:()=>({id:(0,c.e)(b.z),savedMediaId:{},src:{},tempUrl:{},uploadStatus:{},meta:{...(0,p.tb)("meta")},providerMeta:{...(0,p.tb)("providerMeta")},aiParams:{...(0,p.tb)("aiParams")},loadImageParams:{...(0,p.tb)("loadImageParams")},loadImageStatus:{},loadImageId:{},name:{},query:{},source:{},showPlaceholder:{},fullWidthBlock:{default:!1},resize:{...(0,p.tb)("resize"),default:w.P},clickBehavior:{default:null},href:{default:null}}),addKeyboardShortcuts:()=>({Enter:e=>{let{editor:t}=e,n=t.state.selection;if(n instanceof r.nh&&n.node.type.name===a.Ay.name){let e=(0,ed.Hu)((0,d.KA)().getState()),{id:t}=n.node.attrs;if(e)return j.R.emit("endClip",{id:t,confirm:!0}),!0}return!1}}),addProseMirrorPlugins:()=>[new r.k_({key:new r.hs("imageDrag"),props:{handleDOMEvents:{dragstart:(e,t)=>{var n;let{selection:a}=e.state,r=(0,i.BQ)(a)&&(null===(n=a.node)||void 0===n?void 0:n.type.name)==="image"?a.node.attrs.id:null;if(r){let e=(0,d.KA)().getState();if((0,ed.iZ)(r)(e))return t.preventDefault(),!0}return!1}}}}),v()],addCommands(){let e=this.name,t=t=>{let{selection:n}=t;return n instanceof r.nh&&n.node.type.name===e?n.node:void 0};return{resetImageClip:()=>n=>{let{chain:i,state:a}=n,r=t(a);if(!r)return console.warn("[resetImageClip] Selected node is not an image: ",a.selection),!0;let{clipPath:o,clipType:l,clipAspectRatio:s}=w.P;return i().updateAttributes(e,{resize:{...r.attrs.resize,clipPath:o,clipType:l,clipAspectRatio:s}}).run()},resetImageScale:()=>n=>{let{chain:i,state:a}=n,r=t(a);return r?i().updateAttributes(e,{resize:{...r.attrs.resize,width:null,isAuto:null}}).run():(console.warn("[resetImageClip] Selected node is not an image: ",a.selection),!0)}}}});n(77854),n(217)},802:(e,t,n)=>{"use strict";n.d(t,{D:()=>f,_:()=>v});var i=n(32202),a=n(12327),r=n(14041),o=n(71197),l=n(19717),s=n(19142),d=n(92053),c=n(64225),u=n(10458),p=n(14285),h=n(5933),m=n(57882),g=n(17539),x=n(12253);let f=e=>{let{editor:t,id:n}=e,i=(0,c.jL)(),a=(0,c.GV)((0,x.No)(n)),l=(0,c.GV)((0,x.AL)(n)),s=(0,r.useCallback)(()=>{i((0,p.WE)({id:n})),p.RR.emit("startRemoveBg",{id:n}),requestAnimationFrame(()=>{var e,n;null===(e=(n=t.commands).refreshBubbleMenu)||void 0===e||e.call(n)})},[i,t,n]);return{startRemoveBg:(0,o.tO)(s,"removeBackground",u.VV.GAMMA_PRO_UPSELL_REMOVE_BACKGROUND),isRemovingBg:a,isRemoveBgLoading:"loading"===l}},v=e=>{let{editor:t,id:n,src:o,updateAttributes:u}=e,f=(0,c.jL)(),v=(0,c.CU)(),b=(0,i.d)(),y=(0,c.GV)(h.sK),w=t.isEditable,j=(0,c.GV)((0,x.AL)(n)),k=(0,c.GV)((0,x.Vr)(n));return(0,r.useEffect)(()=>{if(!w||!o)return;let e=new AbortController,i=async i=>{var r,c,u;let h,{id:x}=i,v=null===(r=(0,m.bs)(null==y?void 0:y.id))||void 0===r?void 0:r.id;if(n!==x||!o||!v)return;t.state.doc.descendants((e,t)=>"image"!==e.type.name||e.attrs.id!==n||(h=e,!1));let w=null==h?void 0:null===(c=h.attrs.meta)||void 0===c?void 0:c.width,j=null==h?void 0:null===(u=h.attrs.meta)||void 0===u?void 0:u.height;try{f((0,p.GP)({id:n,status:"loading"}));let t=await (0,d.w)({imageUrl:o,workspaceId:v,abortController:e,width:w,height:j});f((0,p.BS)({id:n,url:t})),(0,l.R)("removeBackground",y),await (0,g.GV)(t),setTimeout(()=>{requestAnimationFrame(()=>{p.RR.emit("endRemoveBg",{id:n,url:t})})},500)}catch(i){if(i instanceof s.f&&"aborted"===i.type)return;let e=s.f.userFacingErrorDescription(i);b({title:a.Ru._({id:"xwVKp4"}),position:"top",description:e,status:"error",duration:5e3,isClosable:!0}),f((0,p.N2)({id:n})),requestAnimationFrame(()=>{var e,n;null===(e=(n=t.commands).refreshBubbleMenu)||void 0===e||e.call(n)})}},r=t=>{let{id:n}=t;f((0,p.N2)({id:n})),e.abort("User aborted")};return p.RR.on("startRemoveBg",i),p.RR.on("cancelRemoveBg",r),()=>{p.RR.off("startRemoveBg",i),p.RR.off("cancelRemoveBg",r)}},[n,t,o,u,f,v,w,y,b]),(0,r.useEffect)(()=>{if(w&&o)return p.RR.on("endRemoveBg",async e=>{let{id:i,url:a}=e;n===i&&(u({src:a||(0,x.Vr)(n)(v.getState()),source:"image.custom"}),requestAnimationFrame(()=>{f((0,p.N2)({id:n})),requestAnimationFrame(()=>{var e,n;null===(e=(n=t.commands).refreshBubbleMenu)||void 0===e||e.call(n)})}))})},[n,u,t,f,v,w,o]),{bgRemovalInProgress:"loading"===j,removeBgUrl:k}}},31948:(e,t,n)=>{"use strict";n.d(t,{Kr:()=>c,LQ:()=>s,bT:()=>l,lE:()=>d,qp:()=>u});var i=n(46343),a=n.n(i),r=n(73893),o=n(47572);let l=e=>{let{resize:t}=e.attrs,{height:n,width:i}=t;return!a()({resize:t},{resize:o.P})&&null!==n&&null!==i},s=e=>{e.chain().resetImageClip().resetImageScale().command(e=>{var t;let{commands:n}=e;return!!(null===(t=n.refreshBubbleMenu)||void 0===t?void 0:t.call(n))}).run()},d=async e=>{try{let t=e.split("/").pop();if(!t)throw Error("No filename found");let n=await fetch("".concat(r.$.API_HOST||"","/media/images/download"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","share-token":r.$.SHARE_TOKEN||""},body:JSON.stringify({url:e,filename:t})});if(!n.ok)throw Error("Download failed");let i=await n.blob(),a=window.URL.createObjectURL(i),o=document.createElement("a");o.href=a,o.download=t,document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(a)}catch(e){console.error("Error downloading image:",e)}},c=e=>{var t;let n=e.parent;if(!(null==n?void 0:n.attrs))return"square";if("smartLayoutCell"===e.type&&"imagesText"===n.attrs.variantKey)return"landscape";if("cardAccentLayoutItem"===e.type){let e=n.attrs.layout;if("left"===e||"right"===e)return"portrait";if("top"===e)return"landscape"}return"layoutCell"===n.type&&(null===(t=n.content)||void 0===t?void 0:t[0])===e?"portrait":"landscape"},u=async e=>{try{let t=await fetch("".concat(r.$.API_HOST||"","/media/images/download"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","share-token":r.$.SHARE_TOKEN||""},body:JSON.stringify({url:e,convertToPng:!0})});if(!t.ok)throw Error("Failed to fetch image for clipboard");let n=await t.blob();if(navigator.clipboard&&navigator.clipboard.write){let e=new ClipboardItem({[n.type]:n});await navigator.clipboard.write([e]),console.log("Image copied with Clipboard API successfully")}}catch(e){console.error("Error copying image to clipboard:",e)}}},97025:(e,t,n)=>{"use strict";n.d(t,{D:()=>o});var i=n(80917),a=n(83380),r=n(52417);let o=()=>Object.entries(r.Fn).filter(e=>{let[t,n]=e;return n.nodeName&&!n.disabled}).map(e=>{let[t,n]=e;return{key:t,name:n.label,nodeName:n.nodeName||"mediaPlaceholder",execute:e=>e.commands.insertMediaBlock(n.key),dragStartFn:e=>{(0,i.f)(e,{type:"mediaPlaceholder",attrs:{source:n.key}})},dragEndFn:()=>{(0,a.G)()},description:n.description,icon:n.icon,image:n.image,testId:n.key,keywords:n.keywords,featureFlag:n.featureFlag,priority:n.priority,categories:n.categories,checkDisabled:n.checkDisabled,badge:n.badge}})},52417:(e,t,n)=>{"use strict";n.d(t,{ez:()=>tp,jU:()=>tc,Fn:()=>tu,dO:()=>ts,K4:()=>th});var i=n(31085),a=n(12917),r=n(12327),o=n(74327),l=n(23427),s=n(95640),d=n(2600),c=n(90406),u=n(21098),p=n(66712);let h=e=>{let{editor:t,updateAttributes:n,currentAttributes:a,urlPlaceholder:r,embedTip:o}=e,l=(0,c.Zj)(a);return(0,i.jsxs)(d.T,{align:"flex-start",spacing:4,children:[(0,i.jsx)(p.VG,{currentUrl:l,updateAttributes:n,placeholder:r||"https://..."}),o,l&&(0,i.jsx)(u.p,{editor:t,updateAttributes:n,currentAttributes:a})]})};var m=n(69237),g=n(90290),x=n(69648),f=n(39761),v=n(3706);let b=e=>{let{guideLink:t,extraMessage:n,providerName:a}=e;return(0,i.jsxs)(g.F,{status:"info",children:[(0,i.jsx)(x._,{}),(0,i.jsx)(f.T,{children:(0,i.jsx)(s.x6,{id:"qBttXb",values:{providerName:a,extraMessage:n},components:{0:(0,i.jsx)(v.N,{href:t,textDecoration:"underline",isExternal:!0}),1:(0,i.jsx)(m.p,{mx:"2px"})}})})]})},y=e=>(0,i.jsx)(h,{...e,urlPlaceholder:"https://airtable.com/...",embedTip:(0,i.jsx)(b,{guideLink:"https://support.airtable.com/docs/embedding-airtable-views",providerName:"Airtable",extraMessage:(0,i.jsx)(s.x6,{id:"gsZDsS"})})});y.key="embed.airtable";let w=e=>{let{editor:t,updateAttributes:n,currentAttributes:a}=e,r=(0,c.Zj)(a);return(0,i.jsxs)(d.T,{align:"flex-start",spacing:4,children:[(0,i.jsx)(p.VG,{currentUrl:r,updateAttributes:n,placeholder:"<iframe..."}),(0,i.jsx)(b,{guideLink:"https://help.amplitude.com/hc/en-us/articles/235717108-Share-charts-dashboards-and-notebooks-with-stakeholders-outside-your-company#generate-embed-code-for-your-content",extraMessage:(0,i.jsx)(s.x6,{id:"NDM+Av"}),providerName:"Amplitude"}),r&&(0,i.jsx)(u.p,{editor:t,updateAttributes:n,currentAttributes:a})]})};w.key="embed.amplitude";var j=n(88303),k=n(56028);let C=e=>{let{updateAttributes:t,currentAttributes:n}=e;return(0,i.jsx)(k.O,{updateAttributes:t,currentImageUrl:n.src,defaultQuery:n.query||"",enableSearch:!0,enablePagination:!1,provider:"bing",resultsPerPage:j.s.count})};C.key="image.bing";let S=e=>(0,i.jsx)(h,{...e,urlPlaceholder:"https://calendly.com/..."});S.key="embed.calendly";var A=n(43342),z=n(31171),I=n(18651),R=n(61778),E=n(80853),L=n(2219),_=n(91559),M=n(64225),N=n(87747),T=n(94007),P=n(5933),O=n(57882),D=n(17539),F=n(16422),H=n(99742),W=n(14041),B=n(79893),V=n(5150),G=n(4977);let U=e=>{let{updateAttributes:t,editType:n,editor:i,source:a}=e,r=(0,M.GV)(P.aQ),{currentWorkspace:o}=(0,O.ur)(),{orgId:l,templateId:s}=(0,N.PJ)(r||(null==o?void 0:o.id),n),d=(0,W.useRef)(null),c=(0,W.useCallback)(e=>{let{tempUrl:n,attributes:i}=e;t({uploadStatus:G.A.Uploading,showPlaceholder:!1,tempUrl:n,src:null,...i}),d.current=n},[t]),u=(0,W.useCallback)((e,r)=>{let o=d.current||r;if(o){if("node"!==n||!i){t({...(0,B.yK)({result:e,isError:!1}),source:a});return}(0,B.Ki)(i,o,e),d.current=null}},[i,n,t,a]),p=(0,W.useCallback)(e=>{if(!d.current||!i){t((0,B.yK)({isError:!0}));return}(0,B.wt)(i,d.current,e)},[i,t]),h=(0,W.useCallback)(e=>{if(!l){console.error("[CustomImagePanel] saveImageFromDataURL - No orgId!");return}c({tempUrl:e});try{let t=(0,D.Xz)(e,"image");(0,V.QM)(t,l,{onUploadComplete:u,onOriginalFileUpload:u,onUploadFailed:p},n,void 0,s)}catch(e){p()}},[n,l,p,c,u,s]),m=(0,W.useCallback)(e=>{if(!l){console.error("[CustomImagePanel] saveImageFromUrl - No orgId!");return}c({tempUrl:e});try{(0,V.j_)(e,l,{onUploadComplete:u,onOriginalFileUpload:u,onUploadFailed:p},n,s)}catch(e){p()}},[n,l,p,c,u,s]),g=(0,W.useCallback)(async e=>{let{blob:t,attributes:i}=e;if(!l){console.error("[QRCodePanel] saveImageFromDataBlob - No orgId!");return}c({tempUrl:window.URL.createObjectURL(t),attributes:i});try{let e=(0,D.Xl)({blob:t,filename:"image",ext:"svg"});return await (0,V.QM)(e,l,{onUploadComplete:u,onOriginalFileUpload:u,onUploadFailed:p},n)}catch(e){p()}},[n,l,p,c,u]),x=(0,W.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t({uploadStatus:G.A.Uploading,showPlaceholder:!0,tempUrl:e,src:null})},[t]),f=(0,W.useCallback)(e=>{let{file:t,tempUrl:n}=e;if(t.type&&(0,D.aI)(t.type)){let e="HEIC_tempId_".concat((0,H.Ak)());x(e),c({tempUrl:e})}else c({tempUrl:n})},[x,c]);return{setTempUrl:c,setUploadedImage:u,saveImageFromDataURL:h,saveImageFromUrl:m,saveImageFromDataBlob:g,onUploadStart:f,setUploadFailed:(0,W.useCallback)(()=>{t((0,B.yK)({isError:!0}))},[t])}},K=e=>{let{editor:t,editType:n,updateAttributes:a,currentAttributes:o,resetToPlaceholder:l}=e,{onUploadStart:c,setUploadedImage:u,saveImageFromUrl:h,saveImageFromDataURL:m,setUploadFailed:v}=U({updateAttributes:a,editor:t,editType:n,source:"image.custom"}),b=(0,M.GV)(P.aQ),{currentWorkspace:y}=(0,O.ur)(),{isInOfflineMode:w}=(0,_.u)(),{orgId:j,templateId:k,useStandardThemeBucket:C}=(0,N.PJ)(b||(null==y?void 0:y.id),n),{src:S,tempUrl:H,meta:W,name:B,showPlaceholder:V,uploadStatus:K}=o,q=S?(0,D.bI)(S,{width:500}):void 0;return(S||H||V)&&((null==o?void 0:o.source)==="image.custom"||K===G.A.Uploading)?(0,i.jsxs)(d.T,{align:"flex-start",spacing:4,children:[K===G.A.Uploading&&(0,i.jsxs)(g.F,{status:"info",size:"sm",children:[(0,i.jsx)(x._,{as:A.y,w:5,h:5}),(0,i.jsx)(f.T,{children:(0,i.jsx)(s.x6,{id:"MEDU34"})})]}),V?(0,i.jsx)(T.Pf,{isUploading:K===G.A.Uploading,hasUploadError:K===G.A.Error,width:"100%",height:"200px",borderRadius:"md"}):(0,D.v7)(S)?(0,i.jsx)(z.B.video,{src:S,poster:null==W?void 0:W.poster,autoPlay:!0,muted:!0,loop:!0,width:"100%",height:"200px",borderRadius:"md"}):(0,i.jsx)(I._,{src:q||H,alt:"",ignoreFallback:!0,borderRadius:"md"}),W&&W.width&&W.height&&(0,i.jsxs)(R.E,{children:[W.width,"\xd7",W.height,"px"]}),B&&(0,i.jsx)(R.E,{children:B}),(0,i.jsx)(E.$,{onClick:l,mt:2,w:"100%",children:(0,i.jsx)(s.x6,{id:"HUPV+K"})})]}):(0,i.jsxs)(d.T,{align:"stretch",spacing:4,children:[C&&(0,i.jsxs)(g.F,{status:"warning",size:"sm",children:[(0,i.jsx)(x._,{}),(0,i.jsx)(f.T,{children:"[Admin] Theme images will be uploaded to production theme_images bucket"})]}),K===G.A.Error&&(0,i.jsxs)(g.F,{status:"error",size:"sm",children:[(0,i.jsx)(x._,{}),(0,i.jsx)(f.T,{children:(0,i.jsx)(s.x6,{id:"GymiXM"})})]}),(0,i.jsx)(L.D,{size:"md",children:(0,i.jsx)(s.x6,{id:"IagCbF"})}),(0,i.jsx)(p.VG,{currentUrl:"",placeholder:r.Ru._({id:"jurEzE"}),handleSubmit:h,handleDataSubmit:m,noHeader:!0}),!w&&(0,i.jsx)(L.D,{size:"md",children:(0,i.jsx)(s.x6,{id:"ONWvwQ"})}),j&&(0,i.jsx)(F.Z,{onUploadSuccess:u,onUploadStart:c,onUploadFailed:v,orgId:j,uploadType:"image",editType:n,templateId:k,tipText:r.Ru._({id:"x4Ts51"})})]})};K.key="image.custom";let q=e=>{let{editor:t,updateAttributes:n,currentAttributes:a}=e,r=(0,c.Zj)(a);return(0,i.jsxs)(d.T,{align:"flex-start",spacing:4,children:[(0,i.jsx)(p.VG,{currentUrl:r,updateAttributes:n,placeholder:"https://www.figma.com/file/..."}),(0,i.jsx)(b,{guideLink:"https://help.figma.com/hc/en-us/articles/360039827134-Embed-files-and-prototypes",providerName:"Figma/FigJam"}),r&&(0,i.jsx)(u.p,{editor:t,updateAttributes:n,currentAttributes:a})]})};q.key="embed.figma";let J=e=>{let{editor:t,updateAttributes:n,currentAttributes:a}=e,r=(0,c.Zj)(a);return(0,i.jsxs)(d.T,{align:"flex-start",spacing:4,children:[(0,i.jsx)(p.VG,{currentUrl:r,updateAttributes:n,placeholder:"https://gamma.app/docs/..."}),r&&(0,i.jsx)(u.p,{editor:t,updateAttributes:n,currentAttributes:a})]})};J.key="embed.gamma";var $=n(25420),Y=n(80532),Q=n(37786),X=n.n(Q);let Z=["funny","surprise","hooray","welcome","excited","nope","fail","sad","cry","angry","teamwork","cats","dogs","high five"],ee=e=>{let{updateAttributes:t,currentAttributes:n}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(k.O,{updateAttributes:t,currentImageUrl:n.src,defaultQuery:n.query,randomQueries:Z,provider:"giphy"}),(0,i.jsx)($.s,{width:"100%",justify:"center",padding:"10px",paddingTop:"30px",children:(0,i.jsx)(Y.az,{maxW:"150px",children:(0,i.jsx)(X(),{src:"/images/powered-by-giphy.png",width:"150",height:"17",alt:"Powered by GIPHY"})})})]})};ee.key="image.giphy";var et=n(39286);let en=e=>(0,i.jsx)(h,{...e,urlPlaceholder:"https://docs.google.com/...",embedTip:(0,i.jsx)(b,{guideLink:"https://support.google.com/docs/answer/183965?hl=en&co=GENIE.Platform%3DDesktop#zippy=%2Cedit-embedded-spreadsheets%2Cembed-a-document-spreadsheet-or-presentation",extraMessage:(0,i.jsx)(s.x6,{id:"G6PCHK",values:{GAMMA_ARTIFACT_PROPER_NOUN:et.TP}}),providerName:"Google Sheets, Docs, or Slides"})});en.key="embed.gdrive";let ei=e=>(0,i.jsx)(h,{...e,urlPlaceholder:"https://docs.google.com/forms/..."});ei.key="embed.google.form";let ea=e=>{let{updateAttributes:t,currentAttributes:n}=e;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(k.O,{updateAttributes:t,currentImageUrl:n.src,defaultQuery:n.query||"",provider:"google"})})};ea.key="image.google";var er=n(46301);let eo=e=>{let{updateAttributes:t,currentAttributes:n,isDark:a}=e;return(0,i.jsx)(er.j,{value:n,updateValue:t,isDark:a})};eo.key="color.gradient";var el=n(76003),es=n(15672),ed=n(25676),ec=n(62230),eu=n(9021),ep=n(76166),eh=n(35436),em=n(20671),eg=n(20501),ex=n(24221),ef=n(9104),ev=n(60674),eb=n(73758),ey=n.n(eb),ew=n(50933),ej=n.n(ew),ek=n(59707),eC=n(92667);let eS="60px",eA=(0,W.memo)(e=>{let{icon:t,isSelected:n,onIconClick:a}=e;return(0,i.jsx)(el.E,{height:eS,width:eS,children:(0,i.jsx)(E.$,{borderRadius:"base",bgColor:n?"trueblue.100":void 0,color:"gray.900",display:"block",width:"100%",height:"100%",maxH:"100%",pos:"relative",_hover:{bgColor:n?"trueblue.100":"trueblue.50"},_active:{bgColor:"trueblue.100"},transition:"box-shadow .2s ease",variant:"ghost",cursor:"pointer",onClick:()=>a(t),"data-testid":"icon-search-grid-item",children:(0,i.jsx)(Y.az,{height:"100%",maxH:"100%",sx:{svg:{width:"100%",height:"100%"}},dangerouslySetInnerHTML:{__html:t.html}})})},t.id)});eA.displayName="ImageSearchGridItem";let ez=e=>{let{searchQuery:t,currentAttributes:n,updateAttributes:a}=e,{isInOfflineMode:r}=(0,_.u)(),[o,l]=(0,W.useState)([]),[d,c]=(0,W.useState)(!0),[u,p]=(0,W.useState)(!1),[h,m]=(0,W.useState)(1),f=(0,W.useCallback)(async e=>{if(r)return;let n="/api/icons/search?count=".concat(100,"&query=").concat(t,"&page=").concat(e);c(!0),p(!1);try{var i;let e=await fetch(n,{credentials:"include"}),t=await e.json();if(c(!1),!((null==t?void 0:null===(i=t.data)||void 0===i?void 0:i.length)>=0))throw Error(t);l(t.data)}catch(e){p(!0),c(!1),console.error("(caught) [ImageSearchGrid] fetchResults:",e)}},[r,t]);(0,W.useEffect)(()=>{l([]),m(1),f(1)},[t,f]),(0,W.useCallback)(()=>{f(h+1),m(h+1)},[f,h]);let v=null==n?void 0:n.src,b=(0,W.useCallback)(async e=>{a({src:e.src,tempUrl:v,meta:{height:e.height,width:e.width},providerMeta:{name:e.provider,id:e.id},query:t})},[t,a,v]),y=o.map((e,t)=>{var a,r;let o=e.id===(null==n?void 0:null===(a=n.providerMeta)||void 0===a?void 0:a.id)&&e.provider===(null==n?void 0:null===(r=n.providerMeta)||void 0===r?void 0:r.name);return(0,i.jsx)(eA,{provider:e.provider,icon:e,isSelected:o,onIconClick:b},t)});return(0,i.jsxs)($.s,{direction:"column",align:"stretch",children:[(0,i.jsxs)(es.r,{gap:2,columns:{base:4,"2xl":6},children:[y,d&&!r&&(0,i.jsx)(eI,{})]}),!1,0===o.length&&!d&&(0,i.jsx)(Y.az,{width:"100%",textAlign:"center",padding:"10px",children:(0,i.jsx)(R.E,{style:{color:"gray"},children:(0,i.jsx)(s.x6,{id:"2AY48J",values:{searchQuery:t}})})}),u&&(0,i.jsxs)(g.F,{status:"error",children:[(0,i.jsx)(x._,{}),(0,i.jsx)(s.x6,{id:"5hlcZg"})]})]})},eI=()=>(0,i.jsx)(i.Fragment,{children:ey()(100).map((e,t)=>(0,i.jsx)(el.E,{height:eS,children:(0,i.jsx)(ed.g,{ratio:1,children:(0,i.jsx)(ec.E,{borderRadius:"base"})})},t))}),eR=(0,ev.P)(eu.K),eE=e=>{let{currentAttributes:t,updateAttributes:n,defaultQuery:a="",randomQueries:o}=e,[l,c]=(0,W.useState)(a),[u,p]=(0,W.useState)("");(0,W.useEffect)(()=>{p(a),c(a)},[a]);let h=(0,W.useCallback)(()=>{let e=ej()(o);for(;e===l;)e=ej()(o);e&&(c(e),p(""))},[o,l]),m=(0,eC.lW)(c,500);return(0,i.jsxs)(d.T,{spacing:4,align:"stretch",translate:"no",children:[(0,i.jsxs)(ep.M,{size:"md",children:[(0,i.jsx)(eh.W,{pointerEvents:"none",children:(0,i.jsx)(Y.az,{color:"gray.400",children:(0,i.jsx)(ex.g,{icon:eg.MjD})})}),(0,i.jsx)(em.p,{placeholder:l||r.Ru._({id:"oMAM3/"}),value:u,onChange:e=>{p(e.target.value),m(e.target.value)},"data-testid":"image-search-input"}),o&&(0,i.jsx)(eh.t,{children:(0,i.jsx)(ef.Tz,{placement:"top",label:(0,i.jsx)(s.x6,{id:"OVjfHO"}),children:(0,i.jsx)(eR,{icon:(0,i.jsx)(ex.g,{icon:eg.xNJ}),"aria-label":r.Ru._({id:"OVjfHO"}),variant:"ghost",onClick:h,size:"sm",whileTap:{y:"-5px"},onMouseDown:ek.Fw})})})]}),(0,i.jsx)(ez,{currentAttributes:t,updateAttributes:n,searchQuery:l||""})]})},eL=["animals","arrows","business","party","nature","food"],e_=e=>{let{updateAttributes:t,currentAttributes:n}=e;return(0,i.jsx)(eE,{updateAttributes:t,currentAttributes:n,currentIconUrl:n.src,defaultQuery:n.query||"",randomQueries:eL})};e_.key="image.icon";let eM=e=>{let{editor:t,updateAttributes:n,currentAttributes:a}=e,r=(0,c.Zj)(a);return(0,i.jsxs)(d.T,{align:"flex-start",spacing:4,children:[(0,i.jsx)(p.VG,{currentUrl:r,updateAttributes:n,placeholder:"https://www.instagram.com/..."}),r&&(0,i.jsx)(u.p,{editor:t,updateAttributes:n,currentAttributes:a})]})};eM.key="embed.instagram";let eN=e=>(0,i.jsx)(h,{...e,urlPlaceholder:"https://form.jotform.com/..."});eN.key="embed.jotform";let eT=["wallpaper","textures","background","nature","gradient","relax","sky","water","pattern","abstract"],eP=e=>{let{updateAttributes:t,currentAttributes:n}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(k.O,{updateAttributes:t,currentImageUrl:n.src,defaultQuery:n.query,randomQueries:eT,provider:"lexica",enablePagination:!1}),(0,i.jsx)(Y.az,{width:"100%",textAlign:"center",padding:"10px",paddingTop:"30px",children:(0,i.jsx)(R.E,{fontSize:"sm",color:"gray.500",children:(0,i.jsx)(s.x6,{id:"rbDrRg",components:{0:(0,i.jsx)(v.N,{href:"https://lexica.art",target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"underline"}})}})})})]})};eP.key="image.lexica";let eO=W.lazy(()=>Promise.all([n.e(4309),n.e(7113)]).then(n.bind(n,67113)).then(e=>({default:e.LoomPanel}))),eD=e=>(0,i.jsx)(W.Suspense,{fallback:(0,i.jsx)(A.y,{size:"md"}),children:(0,i.jsx)(eO,{...e})});eD.key="video.loom";let eF=e=>{let{editor:t,updateAttributes:n,currentAttributes:a}=e,o=(0,c.Zj)(a);return(0,i.jsxs)(d.T,{align:"flex-start",spacing:4,children:[(0,i.jsx)(p.VG,{currentUrl:o,updateAttributes:n,placeholder:r.Ru._({id:"ORLSr4"})}),(0,i.jsx)(b,{guideLink:"https://support.microsoft.com/en-us/office/embed-a-word-document-in-your-blog-0faa0253-2751-44bf-8486-ea7837fe7db1",extraMessage:(0,i.jsx)(s.x6,{id:"2csAkv"}),providerName:"Word, Excel, or PowerPoint"}),o&&(0,i.jsx)(u.p,{editor:t,updateAttributes:n,currentAttributes:a})]})};eF.key="embed.microsoft.office";let eH=e=>{let{editor:t,updateAttributes:n,currentAttributes:a}=e,r=(0,c.Zj)(a);return(0,i.jsxs)(d.T,{align:"flex-start",spacing:4,children:[(0,i.jsx)(p.VG,{currentUrl:r,updateAttributes:n,placeholder:"https://www.miro.com/..."}),(0,i.jsx)(b,{guideLink:"https://help.miro.com/hc/en-us/articles/360016335640-How-to-embed-editable-boards-into-websites",providerName:"Miro"}),r&&(0,i.jsx)(u.p,{editor:t,updateAttributes:n,currentAttributes:a})]})};eH.key="embed.miro";let eW=e=>{let{editor:t,updateAttributes:n,currentAttributes:a}=e,o=(0,M.GV)(P.aQ),l=(0,c.Zj)(a),{isInOfflineMode:h}=(0,_.u)(),m=(0,W.useRef)(null),g=(0,W.useCallback)(e=>{let{tempUrl:t,file:i}=e,a=(0,B.bY)(i);m.current=t,n({...a,url:t})},[n]),x=(0,W.useCallback)((e,n)=>{if(!t)return;let i=m.current;(0,B.XJ)(t,i||n,e),m.current=null},[t]);return(0,i.jsxs)(d.T,{align:"flex-start",spacing:4,children:[(0,i.jsx)(p.VG,{currentUrl:l,updateAttributes:n,placeholder:r.Ru._({id:"gzZk6e"})}),l&&(0,i.jsx)(u.p,{editor:t,updateAttributes:n,currentAttributes:a}),!h&&(0,i.jsx)(L.D,{size:"md",children:(0,i.jsx)(s.x6,{id:"ONWvwQ"})}),o&&(0,i.jsx)(F.Z,{onUploadSuccess:x,onUploadStart:g,orgId:o,uploadType:"doc",dropHereText:r.Ru._({id:"ByKyau",values:{0:"%{browse}"}}),editType:"node"})]})};eW.key="embed.pdf";let eB=["business","rocket","graphs","build","gradient","sky","water"],eV=e=>{let{updateAttributes:t,currentAttributes:n}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(k.O,{updateAttributes:t,currentImageUrl:n.src,defaultQuery:n.query,randomQueries:eB,provider:"pictographic",enablePagination:!0}),(0,i.jsx)(Y.az,{width:"100%",textAlign:"center",padding:"10px",paddingTop:"30px",children:(0,i.jsx)(R.E,{fontSize:"sm",color:"gray.500",children:(0,i.jsx)(s.x6,{id:"wOdKZR",components:{0:(0,i.jsx)(v.N,{href:"https://pictographic.io",target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"underline"}})}})})})]})};eV.key="image.pictographic";let eG=e=>{let{editor:t,updateAttributes:n,currentAttributes:a}=e,o=(0,c.Zj)(a);return(0,i.jsxs)(d.T,{align:"flex-start",spacing:4,children:[(0,i.jsx)(p.VG,{currentUrl:o,updateAttributes:n,placeholder:r.Ru._({id:"ORLSr4"})}),o&&(0,i.jsx)(u.p,{editor:t,updateAttributes:n,currentAttributes:a})]})};eG.key="embed.microsoft.powerbi";var eU=n(49547),eK=n(22218),eq=n(35687);let eJ=e=>e$(e),e$=async e=>{let t=(await n.e(4478).then(n.t.bind(n,94478,23))).default,{text:i,foregroundColor:a,backgroundColor:r,logoUrl:o,dotOption:l}=e;return new t({width:300,height:300,type:"svg",data:i,image:o,margin:10,dotsOptions:{color:a||"#000",type:l},backgroundOptions:{color:r||"#fff"},imageOptions:{crossOrigin:"anonymous",imageSize:.4,margin:0}}).getRawData("svg")},eY=e=>{var t;let{editor:n,editType:a,updateAttributes:o,currentAttributes:l}=e,{saveImageFromDataBlob:c}=U({updateAttributes:o,editor:n,editType:a,source:"image.qrCode"}),[u,p]=(0,W.useState)(!1),h="#000000",m="#FFFFFF",v="square",[b,y]=(0,W.useState)(null==l?void 0:null===(t=l.meta)||void 0===t?void 0:t.title),[w,j]=(0,W.useState)(null==l?void 0:l.src),k=(0,W.useRef)(),C=(0,W.useCallback)(()=>{p(!0)},[]),S=(0,W.useCallback)(async()=>{if(!b)return;let e=await eJ({text:b,foregroundColor:h,backgroundColor:m,dotOption:v});e&&(j(window.URL.createObjectURL(e)),k.current=e)},[b,h,m,v]);(0,W.useEffect)(()=>{S()},[v,m,h,b,b,S]);let{src:z,tempUrl:L,meta:_,showPlaceholder:M,uploadStatus:N}=l,P=z?(0,D.bI)(z,{width:500}):void 0,O=!u&&!!(z||L||M),F=(0,W.useCallback)(async()=>{k.current&&(p(!0),await c({blob:k.current,attributes:{meta:{title:b,foregroundColor:h,backgroundColor:m,dotOption:v}}}),p(!1))},[c,b,h,m,v]);return O?(0,i.jsxs)(d.T,{align:"center",spacing:4,children:[N===G.A.Uploading&&(0,i.jsxs)(g.F,{status:"info",size:"sm",children:[(0,i.jsx)(x._,{as:A.y,w:5,h:5}),(0,i.jsx)(f.T,{children:(0,i.jsx)(s.x6,{id:"MEDU34"})})]}),M?(0,i.jsx)(T.Pf,{isUploading:N===G.A.Uploading,hasUploadError:N===G.A.Error,width:"100%",height:"200px",borderRadius:"md"}):(0,i.jsx)(I._,{src:P||L,alt:"",ignoreFallback:!0,borderRadius:"md"}),(null==_?void 0:_.title)&&(0,i.jsx)(R.E,{textAlign:"left",w:"100%",children:_.title}),N!==G.A.Uploading&&(0,i.jsx)(E.$,{onClick:C,mt:2,w:"100%",children:(0,i.jsx)(s.x6,{id:"4uW88M"})})]}):(0,i.jsxs)(d.T,{align:"stretch",spacing:4,children:[N===G.A.Error&&(0,i.jsxs)(g.F,{status:"error",size:"sm",children:[(0,i.jsx)(x._,{}),(0,i.jsx)(f.T,{children:(0,i.jsx)(s.x6,{id:"GymiXM"})})]}),(0,i.jsxs)(eU.MJ,{id:"qr-url",children:[(0,i.jsx)(eK.l,{children:(0,i.jsx)(s.x6,{id:"IagCbF"})}),(0,i.jsx)(ep.M,{size:"lg",children:(0,i.jsx)(em.p,{id:"qr-url",value:b,placeholder:r.Ru._({id:"qf63PF"}),type:"url",onChange:e=>{y(e.target.value)}})})]}),n&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Y.az,{p:4,py:2,bg:"gray.100",borderRadius:"md",children:(0,i.jsxs)(eq.B,{spacing:2,children:[(0,i.jsx)(R.E,{children:(0,i.jsx)(s.x6,{id:"a37vfH"})}),(0,i.jsx)($.s,{align:"center",justify:"center",h:"200px",p:1,border:"1px solid",borderColor:"gray.200",borderRadius:"md",overflow:"hidden",bg:"white",children:w?(0,i.jsx)(eq.B,{h:"100%",children:(0,i.jsx)(I._,{src:w,maxH:"100%"})}):(0,i.jsx)(Y.az,{p:2,children:(0,i.jsx)(R.E,{size:"xs",color:"gray.500",textAlign:"center",children:(0,i.jsx)(s.x6,{id:"eu7KCb"})})})}),(0,i.jsx)(R.E,{fontSize:"sm",color:"gray.600",children:(0,i.jsx)(s.x6,{id:"wjRHQb"})})]})}),(0,i.jsx)(ef.Tz,{isDisabled:!!w,shouldWrapChildren:!0,label:(0,i.jsx)(s.x6,{id:"Y1WnIF"}),children:(0,i.jsx)(E.$,{onClick:F,w:"100%",variant:"solid",tabIndex:0,isDisabled:!w,children:(0,i.jsx)(s.x6,{id:"IChvxB"})})})]})]})};eY.key="image.qrCode";let eQ=e=>{let{editor:t,updateAttributes:n,currentAttributes:a}=e,r=(0,c.Zj)(a);return(0,i.jsxs)(d.T,{align:"flex-start",spacing:4,children:[(0,i.jsx)(p.VG,{currentUrl:r||"",updateAttributes:n,placeholder:"https://open.spotify.com/..."}),(0,i.jsx)(b,{guideLink:"https://artists.spotify.com/en/help/article/embedded-players-follow-buttons",providerName:"Spotify",extraMessage:(0,i.jsx)(s.x6,{id:"ItAUcI"})}),r&&(0,i.jsx)(u.p,{editor:t,updateAttributes:n,currentAttributes:a})]})};eQ.key="video.spotify";let eX=e=>(0,i.jsx)(h,{...e,urlPlaceholder:"https://tally.so/..."});eX.key="embed.tally";let eZ=e=>{let{editor:t,updateAttributes:n,currentAttributes:a}=e,r=(0,c.Zj)(a);return(0,i.jsxs)(d.T,{align:"flex-start",spacing:4,children:[(0,i.jsx)(p.VG,{currentUrl:r,updateAttributes:n,placeholder:"https://www.tiktok.com/..."}),(0,i.jsx)(b,{guideLink:"https://developers.tiktok.com/doc/embed-videos/",providerName:"TikTok"}),r&&(0,i.jsx)(u.p,{editor:t,updateAttributes:n,currentAttributes:a})]})};eZ.key="video.tiktok";let e0=e=>{let{editor:t,updateAttributes:n,currentAttributes:a}=e,r=(0,c.Zj)(a);return(0,i.jsxs)(d.T,{align:"flex-start",spacing:4,children:[(0,i.jsx)(p.VG,{currentUrl:r,updateAttributes:n,placeholder:"https://twitter.com/..."}),r&&(0,i.jsx)(u.p,{editor:t,updateAttributes:n,currentAttributes:a})]})};e0.key="embed.twitter";let e1=e=>(0,i.jsx)(h,{...e,urlPlaceholder:"https://typeform.com/..."});e1.key="embed.typeform";let e2=["wallpaper","textures","architecture","background","nature","gradient","experimental","animals","california","flowers","relax","sky","water","pattern","abstract"],e4=e=>{let{updateAttributes:t,currentAttributes:n}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(k.O,{updateAttributes:t,currentImageUrl:n.src,defaultQuery:n.query,randomQueries:e2,provider:"unsplash"}),(0,i.jsx)(Y.az,{width:"100%",textAlign:"center",padding:"10px",paddingTop:"30px",children:(0,i.jsx)(R.E,{fontSize:"sm",color:"gray.500",children:(0,i.jsx)(s.x6,{id:"k16iQH",values:{UNSPLASH_PROPER_NOUN:"Unsplash"},components:{0:(0,i.jsx)(v.N,{href:"https://unsplash.com",target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"underline"}})}})})})]})};e4.key="image.unsplash";let e5=e=>{let{editor:t,updateAttributes:n,currentAttributes:a}=e,o=(0,c.Zj)(a);return(0,i.jsxs)(d.T,{align:"flex-start",spacing:4,children:[(0,i.jsx)(p.VG,{currentUrl:o,updateAttributes:n,placeholder:r.Ru._({id:"gzZk6e"})}),o&&(0,i.jsx)(u.p,{editor:t,updateAttributes:n,currentAttributes:a})]})};e5.key="video.custom";let e6=e=>{let{editor:t,updateAttributes:n,currentAttributes:a}=e,r=(0,c.Zj)(a);return(0,i.jsxs)(d.T,{align:"flex-start",spacing:4,children:[(0,i.jsx)(p.VG,{currentUrl:r,updateAttributes:n,placeholder:"https://vimeo.com/..."}),r&&(0,i.jsx)(u.p,{editor:t,updateAttributes:n,currentAttributes:a})]})};e6.key="video.vimeo";let e3=["modern office workspace","sustainable energy landscape","vintage automobile collection","future technology concept","tropical beach paradise","urban street art","classical music instruments","mountain hiking adventure","wildlife safari","space exploration visuals","ancient ruins aerial view","deep sea marine life","high fashion runway event","robotics in manufacturing","gourmet food presentation","winter sports scene","abstract art paintings","traditional village festival","modern architecture landmarks","digital art fantasy worlds"],e8=e=>{let{updateAttributes:t,currentAttributes:n}=e;return(0,i.jsx)(k.O,{updateAttributes:t,currentImageUrl:n.src,defaultQuery:n.query||"",enablePagination:!0,enableLicenseFilter:!0,provider:"web",resultsPerPage:48,randomQueries:e3,resizeThumbnails:!0})};e8.key="image.web";var e7=n(88865);let e9=e=>{let{editor:t,updateAttributes:n,currentAttributes:a}=e,{proxy:o,displayStyle:l}=a,h=(0,c.Zj)(a);return(0,i.jsxs)(d.T,{align:"flex-start",spacing:4,children:[(0,i.jsx)(p.VG,{currentUrl:h||"",updateAttributes:n,placeholder:r.Ru._({id:"gzZk6e"})}),h&&l&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e7.S,{isChecked:o,onChange:e=>n({proxy:e.target.checked}),children:(0,i.jsx)(s.x6,{id:"Fl9cgp"})}),(0,i.jsx)(R.E,{fontSize:"sm",color:"gray.500",mt:-2,children:(0,i.jsx)(s.x6,{id:"J87/8N"})})]}),h&&(0,i.jsx)(u.p,{editor:t,updateAttributes:n,currentAttributes:a})]})};e9.key="embed.custom";let te=e=>{let{editor:t,updateAttributes:n,currentAttributes:a}=e,r=(0,c.Zj)(a);return(0,i.jsxs)(d.T,{align:"flex-start",spacing:4,children:[(0,i.jsx)(p.VG,{currentUrl:r,updateAttributes:n,placeholder:"<iframe..."}),(0,i.jsx)(b,{guideLink:"https://wistia.com/support/embed-and-share/media-on-your-website",providerName:"Wistia"}),r&&(0,i.jsx)(u.p,{editor:t,updateAttributes:n,currentAttributes:a})]})};te.key="video.wistia";let tt=e=>{let{editor:t,updateAttributes:n,currentAttributes:a}=e,r=(0,c.Zj)(a);return(0,i.jsxs)(d.T,{align:"flex-start",spacing:4,children:[(0,i.jsx)(p.VG,{currentUrl:r,updateAttributes:n,placeholder:"https://www.youtube.com/watch?v=..."}),r&&(0,i.jsx)(u.p,{editor:t,updateAttributes:n,currentAttributes:a})]})};tt.key="video.youtube";let tn=Object.fromEntries(Object.values([C,ee,ea,e8,eP,e4,tt,eD,q,ei,en,e9,K,eY,l.o,eF,eG,e0,e6,e5,eW,eH,y,w,te,eQ,eZ,eM,eo,e_,S,e1,eN,eX,J,eV]).flat().map(e=>[e.key,e]));var ti=n(48192),ta=n(14095),tr=n(1771),to=n(32043),tl=n(26813);let ts="default",td="color.solid",tc={Default:[{label:()=>r.Ru._({id:"EdQY6l"}),availableOffline:!0,key:ts,backgroundType:tl.h.NONE}],Image:[{...o.mx,nodeName:"image",backgroundType:tl.h.IMAGE,priority:10},{...o.OO,nodeName:"image",disabled:!0,backgroundType:tl.h.IMAGE},{...o.Rn,nodeName:"image",backgroundType:tl.h.IMAGE},{...o.TV,nodeName:"image",disabled:!0,backgroundType:tl.h.IMAGE},{...o.Up,nodeName:"image",backgroundType:tl.h.IMAGE},{...o.ae,nodeName:"image",backgroundType:tl.h.IMAGE},{...o.Pl,nodeName:"image",backgroundType:tl.h.IMAGE},{...o.xT,nodeName:"image",backgroundType:tl.h.IMAGE},{...o.Z_,nodeName:"image"},{...o.yj,nodeName:"image",disabled:!0,backgroundType:tl.h.IMAGE},{...o.fb,nodeName:"image"},{label:()=>r.Ru._({id:"COXEr5"}),key:ti.j,availableOffline:!0,icon:a.yvG,backgroundType:tl.h.IMAGE,nodeName:"image",keywords:["accent image"]}],Video:[{...o.GQ,nodeName:"video"},{...o.fX,nodeName:"video"},{...o.N$,nodeName:"video"},{...o.O5,nodeName:"video"},{...o.r9,nodeName:"video"},{...o.w,nodeName:"video"},{...o.st,nodeName:"video"}],Embed:[{...o.Jp,nodeName:"embed",priority:10},{...o.Zd,nodeName:"embed"},{...o.Il,nodeName:"embed"},{...o.fG,nodeName:"embed"},{...o.uF,nodeName:"embed"},{...o.Oz,nodeName:"embed"},{...o.V2,nodeName:"embed"},{...o.Dr,nodeName:"embed"},{...o.MN,nodeName:"embed"},{...o.qD,nodeName:"embed"},{...o.ap,nodeName:"embed"},{...o.Ve,nodeName:"embed"},{...o.RA,nodeName:"embed"},{...o.Ow,nodeName:"embed"},{...o.hb,nodeName:"embed"},{...o.sI,nodeName:"embed"},{...o.sS,nodeName:"embed"}],Color:[{label:()=>r.Ru._({id:"iFeLoB"}),key:td,availableOffline:!0,icon:a.fyG,backgroundType:tl.h.COLOR,keywords:["solid color"]},{...o.UX,availableOffline:!0,backgroundType:tl.h.GRADIENT}]},tu=Object.fromEntries(Object.values(tc).flat().map(e=>[e.key,e])),tp={...tn,[ts]:()=>(0,i.jsx)(i.Fragment,{}),[ti.j]:e=>{let{currentAttributes:t,updateAttributes:n,editType:a}=e,r=(0,M.GV)(P.SJ),{accentBackgrounds:o}=r.config;return(0,i.jsxs)(d.T,{align:"stretch",children:[o&&(0,i.jsx)(ta.A,{currentAttributes:t,accentImages:o,isDark:(0,tr.Mw)(r),handleItemClick:n,editType:a}),(0,i.jsxs)(g.F,{status:"info",children:[(0,i.jsx)(x._,{}),(0,i.jsx)(f.T,{children:(0,i.jsx)(s.x6,{id:"zOCB9A"})})]})]})},[td]:to.S},th={Default:()=>r.Ru._({id:"ovBPCi"}),Image:()=>r.Ru._({id:"hG89Ed"}),Video:()=>r.Ru._({id:"vSJd18"}),Embed:()=>r.Ru._({id:"KKBlUU"}),Color:()=>r.Ru._({id:"jZlrte"})}},94007:(e,t,n)=>{"use strict";n.d(t,{Hy:()=>I,Pf:()=>R,Td:()=>z,v9:()=>E});var i=n(31085),a=n(70403),r=n(43342),o=n(61778),l=n(25420),s=n(2600),d=n(80532),c=n(62313),u=n(12917),p=n(20501),h=n(24221),m=n(95640),g=n(14041),x=n(64225),f=n(87747),v=n(83292),b=n(15428),y=n(35789);function w(){let e=(0,v._)(["\n      from {transform: rotate(-5deg) scale(1)}\n        to {transform: rotate(5deg) scale(1.2)}\n  "]);return w=function(){return e},e}let j=e=>{let{provider:t,color:n="gray"}=e,a=(0,b.i7)(w()),l="aiGenerated"===t?p._$C:p.$UM;return(0,i.jsxs)(y.o,{className:"image-loading-spinner",children:[(0,i.jsx)(r.y,{color:"".concat(n,".300"),thickness:"3px",size:"xl",position:"absolute",speed:"0.7s",emptyColor:"transparent"}),(0,i.jsx)(o.E,{color:"".concat(n,".400"),position:"absolute",lineHeight:"2",fontSize:"lg",animation:"".concat(a," infinite alternate 700ms ease-out"),children:(0,i.jsx)(h.g,{icon:l,fixedWidth:!0})})]})};var k=n(5933),C=n(80916),S=n(73818),A=n(48416);let z=e=>{let{removeBackground:t=!1,scootRight:n=!1}=e;return(0,i.jsxs)(a.vw,{size:"sm",variant:"subtle",colorScheme:"gray",pos:"absolute",top:4,left:4,p:1,ml:n?28:0,children:[(0,i.jsx)(r.y,{color:"gray.600",size:"xs"}),t&&(0,i.jsx)(o.E,{as:"span",ml:1,fontFamily:"body",children:(0,i.jsx)(m.x6,{id:"gVcJ1/"})})]})},I=()=>(0,i.jsx)(a.vw,{size:"sm",variant:"subtle",colorScheme:"red",pos:"absolute",top:4,left:4,children:(0,i.jsxs)(a.d1,{children:[(0,i.jsx)(h.g,{icon:p.tUE})," ",(0,i.jsx)(m.x6,{id:"rmh/nq"})]})}),R=(0,g.memo)(e=>{let{children:t,icon:n=u.Cyq,isLoading:a=!1,isUploading:r=!1,hasUploadError:o=!1,isAccentImageDrawer:p=!1,loadingProvider:m,openEditBackgroundDrawer:v,onSelectAndFocus:b,defaultSource:y,hasQuickActions:w=!1,handleDoubleClick:R,...E}=e,[L,_]=(0,g.useState)(!1),M=(0,x.GV)(k.nD),N=(0,f.rd)();return(0,g.useEffect)(()=>{y&&!1===(0,S.Ub)(y)?_(!1):w&&M?_(!0):_(!1)},[y,w,M]),(0,i.jsxs)(l.s,{"data-testid":"media-placeholder","data-test-media-source":y,color:N?C.N.DARK_COLOR:C.N.LIGHT_COLOR,align:"center",justify:"center",p:3,bg:N?C.N.DARK_BG:C.N.LIGHT_BG,className:"placeholder","data-drag-handle":!0,"data-export-as-image":!0,position:"relative",cursor:"default",sx:{containerType:"size","@container (width < 150px) or (height < 140px)":{".quick-actions":{display:"none"},".ai-image-loading-spinner":{transform:"scale(0.5)"}}},onDoubleClick:R,transition:"background-color 0.2s",...E,children:[!a&&(0,i.jsxs)(s.T,{pointerEvents:"none",children:[(0,i.jsx)(d.az,{color:N?C.N.DARK_ICON_COLOR:C.N.LIGHT_ICON_COLOR,sx:{"@container (0px <= width <= 32px) or (height < 100px)":{fontSize:"sm"},"@container (32px < width <= 80px)":{fontSize:"2xl"},fontSize:"4xl"},children:(0,i.jsx)(h.g,{icon:n,fixedWidth:!0})}),L&&(0,i.jsx)(c.z,{pointerEvents:"auto",className:"quick-actions",children:(0,i.jsx)(A.Z,{onSelectImage:b,isAccentImageDrawer:p,openEditBackgroundDrawer:v})})]}),a&&(0,i.jsx)(j,{provider:m}),r&&(0,i.jsx)(z,{}),o&&(0,i.jsx)(I,{}),t]})});R.displayName="MediaPlaceholderImage";let E={minW:16,minH:16,bg:"gray.200"}},48416:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var i=n(31085),a=n(80532),r=n(25420),o=n(9021),l=n(3040),s=n(24221),d=n(9104),c=n(95640),u=n(12327),p=n(14041),h=n(74327),m=n(87747),g=n(83380),x=n(59707),f=n(80916),v=n(21696);let b=e=>{let{onSelectImage:t,isAccentImageDrawer:n=!1,openEditBackgroundDrawer:o,...s}=e,{setMediaDrawerSourceKeyAction:d,setBackgroundDrawerSourceKeyAction:p}=(0,v.B)(),m=[{id:"image.custom",label:(0,i.jsx)(c.x6,{id:"6MxxvO"}),ariaLabel:u.Ru._({id:"6MxxvO"}),icon:l.MNJ,onClick:()=>{null==t||t(),d(h.mx.key,!0),setTimeout(()=>(0,g.G)(!1),0)}},{id:"image.web",label:(0,i.jsx)(c.x6,{id:"Of4gkp"}),ariaLabel:u.Ru._({id:"Of4gkp"}),icon:l.$UM,onClick:()=>{null==t||t(),d(h.Rn.key,!0),setTimeout(()=>(0,g.G)(!1),0)}},{id:"image.ai-generated",label:(0,i.jsx)(c.x6,{id:"UQ4o1/"}),ariaLabel:u.Ru._({id:"UQ4o1/"}),icon:l._$C,onClick:()=>{null==t||t(),d(h.Up.key,!0),setTimeout(()=>(0,g.G)(!1),0)}}],f=[{id:"image.custom",label:(0,i.jsx)(c.x6,{id:"pDdFxL"}),ariaLabel:u.Ru._({id:"6MxxvO"}),icon:l.MNJ,onClick:()=>{null==t||t(),p(h.mx.key),setTimeout(()=>null==o?void 0:o(!1),0)}},{id:"image.web",label:(0,i.jsx)(c.x6,{id:"eFaih9"}),ariaLabel:u.Ru._({id:"Of4gkp"}),icon:l.$UM,onClick:()=>{null==t||t(),p(h.Rn.key),setTimeout(()=>null==o?void 0:o(!1),0)}},{id:"image.ai-generated",label:(0,i.jsx)(c.x6,{id:"UQ4o1/"}),ariaLabel:u.Ru._({id:"UQ4o1/"}),icon:l._$C,onClick:()=>{null==t||t(),p(h.Up.key),setTimeout(()=>null==o?void 0:o(!1),0)}}];return(0,i.jsx)(a.az,{pos:"relative",zIndex:100,...s,children:(0,i.jsx)(r.s,{marginBottom:"-8px",onClick:x.dG,children:(n?f:m).map((e,t)=>(0,i.jsx)(y,{...e},t))})})},y=(0,p.memo)(e=>{let{label:t,ariaLabel:n,icon:a,id:r,onClick:l}=e,c=(0,m.rd)();return(0,i.jsx)(d.Tz,{label:t,placement:"top",closeOnClick:!0,children:(0,i.jsx)(o.K,{icon:(0,i.jsx)(s.g,{icon:a,size:"1x"}),"aria-label":n,"data-testid":"quick-action","data-test-media-source":r,variant:"ghost",rounded:"md",onMouseDown:l,width:"32px",height:"32px",color:c?f.N.DARK_ICON_COLOR:f.N.LIGHT_ICON_COLOR,display:"flex",alignItems:"center",justifyContent:"center",p:1,cursor:"pointer",_hover:"image.ai-generated"===r?c?{color:f.N.DARK_AI_BTN_HOVER_COLOR,bg:f.N.DARK_AI_BTN_HOVER_BG}:{color:f.N.LIGHT_AI_BTN_HOVER_COLOR,bg:f.N.LIGHT_AI_BTN_HOVER_BG}:c?{color:f.N.DARK_BTN_HOVER_COLOR,bg:f.N.DARK_BTN_HOVER_BG}:{color:f.N.LIGHT_BTN_HOVER_COLOR,bg:f.N.LIGHT_BTN_HOVER_BG},animation:"fadeIn",transition:"color 0.2s, background-color 0.2s"})})});y.displayName="QuickActionButton"},21696:(e,t,n)=>{"use strict";n.d(t,{B:()=>s,j:()=>l});var i=n(14041),a=n(64225),r=n(95709),o=n(94984);let l=(e,t)=>(0,i.useCallback)(()=>{e.chain().focus().selectNodeAtPos(t(),!1).run(),setTimeout(()=>{e.view.focus()})},[e,t]),s=()=>{let e=(0,a.jL)(),t=(0,a.GV)(r.Pj),n=(0,a.GV)(r.kW),l=(0,a.GV)(o.HF);return{currentMediaDrawerSourceKey:t,isQuickAction:n,setMediaDrawerSourceKeyAction:(0,i.useCallback)(function(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e((0,r.st)({sourceKey:t,overrideDefault:n}))},[e]),currentEditBackgroundDrawerSourceKey:l,setBackgroundDrawerSourceKeyAction:(0,i.useCallback)(t=>{e((0,o.mR)({sourceKey:t}))},[e])}}},73818:(e,t,n)=>{"use strict";n.d(t,{Ub:()=>r,Bz:()=>i.B,j8:()=>i.j}),n(48416);var i=n(21696);let a=["image.custom","image.web","image.ai-generated","accent.theme"],r=e=>a.includes(e)},80916:(e,t,n)=>{"use strict";n.d(t,{N:()=>i});let i={LIGHT_BG:"gray.200",LIGHT_COLOR:"gray.300",LIGHT_ICON_COLOR:"gray.400",LIGHT_BTN_HOVER_BG:"gray.100",LIGHT_BTN_HOVER_COLOR:"gray.500",LIGHT_AI_BTN_HOVER_BG:"trueblue.100",LIGHT_AI_BTN_HOVER_COLOR:"trueblue.300",DARK_BG:"gray.800",DARK_COLOR:"gray.600",DARK_ICON_COLOR:"gray.600",DARK_BTN_HOVER_BG:"gray.700",DARK_BTN_HOVER_COLOR:"gray.400",DARK_AI_BTN_HOVER_BG:"trueblue.800",DARK_AI_BTN_HOVER_COLOR:"trueblue.300",LIGHT_GALLERY_BG:"gray.100",DARK_GALLERY_BG:"gray.900"}},27930:(e,t,n)=>{"use strict";n.d(t,{Ud:()=>z,VM:()=>A,Hy:()=>k.Hy,Pf:()=>k.Pf,Td:()=>k.Td});var i=n(13236),a=n(81570),r=n(83380),o=n(39933),l=n(58599),s=n(43873),d=n(12127),c=n(90406),u=n(31085),p=n(25420),h=n(12917),m=n(14041),g=n(4977),x=n(64225),f=n(5933),v=n(5434),b=n(25472),y=n(95905),w=n(17835),j=n(52417),k=n(94007),C=n(73818);let S=e=>(0,u.jsx)(v.u,{...e,as:"div",children:(0,u.jsx)(A,{...e})}),A=e=>{var t;let{node:n,decorations:i,editor:a}=e,{source:o,horizontalAlign:l,uploadStatus:s,loadImageParams:d,loadImageStatus:c}=n.attrs,{getPos:v}=e,{isFullWidth:S}=(0,b.D)(i),A=(null===(t=j.Fn[o])||void 0===t?void 0:t.icon)||h.Cyq,z=(0,w.NZ)(e),I=(0,C.j8)(a,v),R=(0,x.GV)(f.nD),E=(0,r.f)(),L=(0,m.useCallback)(()=>{E({isOpen:!0})},[E]);return(0,u.jsx)(p.s,{w:"100%",h:"100%",dir:(0,y.fZ)(i,l),direction:"column",sx:(0,y.yp)(l),children:(0,u.jsx)(k.Pf,{hasUploadError:s===g.A.Error&&!a.isThumbnail,isUploading:s===g.A.Uploading,isLoading:"queued"===c&&!a.isThumbnail,loadingProvider:null==d?void 0:d.provider,"data-content-reference":!0,icon:A,width:S||z?"100%":"18em",maxW:"100%",h:z?"100%":"10em",maxH:"100%",onSelectAndFocus:I,defaultSource:o,"data-drag-handle":!0,"data-selection-ring":!0,"data-selection-background":!0,borderRadius:"var(--box-border-radius)",hasQuickActions:!a.isThumbnail,handleDoubleClick:R?L:void 0})})},z=i.bP.create({name:"mediaPlaceholder",group:"block media",atom:!0,selectable:!0,draggable:!0,priority:s.y.MediaPlaceholder,addNodeView:()=>(0,l.gu)(S),addAttributes:()=>({id:(0,o.e)(d.z),source:{},fullWidthBlock:{default:!1}}),addKeyboardShortcuts:()=>({Enter:e=>{let{editor:t}=e,n=t.state.selection;return!!(n instanceof a.nh&&(0,c.Bv)(n.node))&&((0,r.G)(),!0)}}),addCommands:()=>({insertMediaBlock:e=>t=>{let{commands:n}=t;return n.insertContentAndSelect({type:"mediaPlaceholder",attrs:{source:e}}),requestAnimationFrame(()=>{(0,r.G)()}),!0}}),parseHTML:()=>[{tag:"img[placeholder=true]",priority:60}],renderHTML(e){let{HTMLAttributes:t}=e;return["img",(0,i.KV)(t,{placeholder:"true"})]}})},57569:(e,t,n)=>{"use strict";n.d(t,{X0:()=>f,Y3:()=>x,u4:()=>v});var i=n(31085),a=n(78141),r=n(97331),o=n.n(r),l=n(14041),s=n(89864),d=n(14968),c=n(95994),u=n(92667),p=n(26374);let h="resizeable-control-wrapper",m=(0,s.yX)([s.cM]),g=(e,t)=>Math.max(e,c.MK*Math.max(t.clientWidth/t.clientHeight,1));function x(e){let[t,n]=(0,l.useState)(!1),i=(0,u.jm)(),r=(0,l.useRef)(null),o=(0,p.KS)(r),[s,d]=(0,l.useState)(!1),c=(0,l.useCallback)(()=>{var t,i;null===(t=(i=e.commands).forceHideBubbleMenu)||void 0===t||t.call(i,!0),n(!0)},[e]),h=(0,l.useCallback)(()=>{var t,i;null===(t=(i=e.commands).forceHideBubbleMenu)||void 0===t||t.call(i,!1),n(!1)},[e]);return(0,a.w)(()=>{var t,n;null===(t=(n=e.commands).forceHideBubbleMenu)||void 0===t||t.call(n,s||o)},[e,s,o]),{ref:r,isResizing:s,setIsResizing:d,isAnimating:t,resizeableSx:{".moveable-control":{display:i||o||t?"none":""}},onLayoutAnimationStart:c,onLayoutAnimationComplete:h}}let f={[".".concat(h)]:{zIndex:"".concat(d.$.resizeableWrapper),".moveable-control":{bg:"white",border:"2px solid var(--chakra-colors-trueblue-300)",w:"".concat(8,"px"),h:"".concat(8,"px"),opacity:1,zIndex:10,borderRadius:0,_hover:{opacity:1},transitionProperty:"opacity",transitionDuration:"normal","&.moveable-ne, &.moveable-sw":{cursor:"nesw-resize"},"&.moveable-nw, &.moveable-se":{cursor:"nwse-resize"},"&.moveable-se, &.moveable-ne, &.moveable-e":{marginLeft:"-".concat(5,"px")},"&.moveable-sw, &.moveable-nw, &.moveable-w":{marginLeft:"-".concat(3,"px")},"&.moveable-ne, &.moveable-nw, &.moveable-n":{marginTop:"-".concat(3,"px")},"&.moveable-se, &.moveable-sw, &.moveable-s":{marginTop:"-".concat(5,"px")},"&.moveable-e, &.moveable-w":{cursor:"ew-resize",marginTop:"-".concat(4,"px")},"&.moveable-n, &.moveable-s":{cursor:"ns-resize",marginLeft:"-".concat(4,"px")}},".moveable-line":{display:"none"}}},v=e=>{let{imageWrapperRef:t,setIsResizing:n,updateResizeAttrs:a,refreshDeps:r,keepRatio:s=!0,onResizing:d}=e,u=(0,l.useRef)(null);return(0,l.useEffect)(()=>{setTimeout(()=>{requestAnimationFrame(()=>{var e,t;null===(e=u.current)||void 0===e||e.updateRect(),null===(t=u.current)||void 0===t||t.updateTarget()})},300)},[r]),(0,l.useEffect)(()=>{let e=()=>{var e;null===(e=u.current)||void 0===e||e.updateTarget()},t=o()(e,250);return document.addEventListener("drop",e),window.addEventListener("resize",t),()=>{document.removeEventListener("drop",e),window.removeEventListener("resize",t)}},[]),(0,i.jsx)(m,{ref:e=>{u.current=e},className:h,target:t.current,renderDirections:["se","nw","sw","ne","n","s","e","w"],keepRatio:s,draggable:!1,resizable:!0,origin:!1,onResizeStart:()=>{n(!0)},onResize:e=>{let{target:t,width:n,height:i}=e,a=g(n,t),r=s?i:g(i,t);t.style.width="".concat(a,"px"),s||(t.style.height="".concat(r,"px")),null==d||d({width:a,height:r})},onResizeEnd:e=>{let{target:t}=e,i=t.clientWidth,r=t.clientHeight,o=parseFloat(getComputedStyle(t).fontSize)/c.Ef;a({width:i/o,height:s?null:r/o,isAuto:!1}),n(!1),t.style.width="",t.style.height=""}})}},12127:(e,t,n)=>{"use strict";n.d(t,{p:()=>d,z:()=>s});var i=n(99742),a=n(81570),r=n(387),o=n(1098);let l=new a.hs("UniqueMediaId"),s=()=>(0,i.Ak)(5),d=o.S.extend({name:"UniqueMediaId"}).configure({attributeName:"id",types:["image","embed","video","smartLayoutCell","mediaPlaceholder"],initialValue:s,filterTransaction:r.kz,pluginKey:l})},70031:(e,t,n)=>{"use strict";n.d(t,{Q:()=>d});var i=n(13236),a=n(4977),r=n(17539),o=n(90406),l=n(93090),s=n(39452);let d=i.YY.create({name:"mediaUpload",addCommands(){return{cancelImageUploadsOnLoad:()=>e=>{let{tr:t,state:n}=e;return!!this.editor.isEditable&&((0,i.xe)(n.doc,e=>{let t=(0,s.um)(e);return!!(t&&t.uploadStatus===a.A.Uploading)}).forEach(e=>{let n=(0,s.um)(e.node),i=(0,s.wH)(e.node,(null==n?void 0:n.src)?{uploadStatus:a.A.Done}:{tempUrl:null,uploadStatus:a.A.Error});t.setNodeMarkup(e.pos,null,i).setMeta("addToHistory",!1).setMeta("imageUploadUpdateAttrs",!0)}),!0)},uploadBlobsOnLoad:()=>e=>{let{tr:t,state:n}=e;return!!this.storage.orgId&&!!this.editor.isEditable&&((0,i.xe)(n.doc,e=>{let t=(0,s.um)(e);return!!(null==t?void 0:t.src)&&t.src.startsWith("blob:")}).forEach(e=>{let n=(0,s.um)(e.node);if(!n)return;let i=n.src,a=(0,s.wH)(e.node,(0,s.F)(i));t.setNodeMarkup(e.pos,null,a).setMeta("addToHistory",!1).setMeta("imageUploadUpdateAttrs",!0),(0,l.xH)(this.editor,i)}),!0)},uploadRemoteUrlsOnLoad:()=>e=>{let{tr:t,state:n}=e;return!!this.storage.orgId&&!!this.editor.isEditable&&((0,i.xe)(n.doc,e=>{let t=(0,s.um)(e);return!!(null==t?void 0:t.src)&&t.src.startsWith("http")&&(0,r.cW)(t.src)&&t.uploadStatus!==a.A.Done}).forEach(e=>{var n;let i=(0,s.um)(e.node);if(!i)return;let r=i.src,o=(0,s.wH)(e.node,{uploadStatus:a.A.Uploading,source:null!==(n=i.source)&&void 0!==n?n:"image.custom",tempUrl:r});t.setNodeMarkup(e.pos,null,o).setMeta("addToHistory",!1).setMeta("imageUploadUpdateAttrs",!0),(0,l.XE)(this.editor,r,void 0,!0)}),!0)},uploadDataUrlsOnLoad:()=>e=>{let{tr:t,state:n}=e;return!!this.storage.orgId&&!!this.editor.isEditable&&((0,i.xe)(n.doc,e=>{let t=(0,s.um)(e);return!!(null==t?void 0:t.src)&&t.src.startsWith("data:")}).forEach(e=>{let n=(0,s.um)(e.node);if(!n)return;let i=(0,r.Xz)(n.src),a=URL.createObjectURL(i),o=(0,s.wH)(e.node,(0,s.F)(a));t.setNodeMarkup(e.pos,null,o).setMeta("addToHistory",!1).setMeta("imageUploadUpdateAttrs",!0),(0,l.XE)(this.editor,a,i)}),!0)},initializeUploadExtension:e=>t=>{let{chain:n}=t;return this.storage.orgId=e,n().cancelImageUploadsOnLoad().uploadBlobsOnLoad().uploadDataUrlsOnLoad().uploadRemoteUrlsOnLoad().revokeAllImageTempURLs().run(),!0},revokeAllImageTempURLs:()=>e=>{let{tr:t,state:n}=e;return(0,i.xe)(n.doc,e=>{let t=(0,s.um)(e);return!!(t&&t.tempUrl&&t.src&&t.uploadStatus===a.A.Done)}).forEach(e=>{let n=(0,s.wH)(e.node,{tempUrl:null});t.setNodeMarkup(e.pos,null,n).setMeta("addToHistory",!1).setMeta("imageUploadUpdateAttrs",!0)}),!0},revokeImageTempURLs:e=>t=>{let{tr:n,state:a}=t;return(0,i.xe)(a.doc,t=>{let n=(0,s.um)(t);return!!n&&n.tempUrl===e}).forEach(e=>{let t=(0,s.wH)(e.node,{tempUrl:null});n.setNodeMarkup(e.pos,null,t).setMeta("addToHistory",!1).setMeta("imageUploadUpdateAttrs",!0)}),URL.revokeObjectURL(e),!0},updateImageOnUploadFailure:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return n=>{let{tr:i,state:r}=n,o=r.doc.nodeAt(e);if(!o||!o.attrs)return!1;let l=(0,s.um)(o),d=t?{...l,uploadStatus:a.A.Done}:(0,s.yK)({isError:!0}),c=(0,s.wH)(o,d);return i.setNodeMarkup(e,void 0,c).setMeta("imageUploadUpdateAttrs",!0).setMeta("addToHistory",!1).setMeta("annotationEvent",{type:"update-node-attrs",pos:e}),!0}},updateImageOnUploadSuccess:(e,t)=>n=>{let{tr:i,state:a}=n,r=a.doc.nodeAt(e);if(!r||!r.attrs)return!1;let l=(0,s.yK)({isError:!1,result:t,attrs:r.attrs}),d=(0,o.Ez)(l),c=(0,s.wH)(r,d);return i.setNodeMarkup(e,void 0,c).setMeta("imageUploadUpdateAttrs",!0).setMeta("addToHistory",!1).setMeta("annotationEvent",{type:"update-node-attrs",pos:e}),!0}}},addStorage:()=>({orgId:void 0,completedUploads:{}}),addProseMirrorPlugins(){return[(0,l.Qx)(this.editor)]}})},79893:(e,t,n)=>{"use strict";n.d(t,{Df:()=>a.Df,Ki:()=>a.Ki,Q8:()=>i.Q,XJ:()=>a.XJ,bY:()=>a.bY,um:()=>a.um,wH:()=>a.wH,wt:()=>a.wt,yK:()=>a.yK});var i=n(70031),a=n(39452)},20265:(e,t,n)=>{"use strict";n.d(t,{TH:()=>u,YC:()=>m,kT:()=>p,nK:()=>h});var i=n(99742),a=n(74327),r=n(4977),o=n(26813),l=n(20277),s=n(16676),d=n(17539),c=n(39452);let u=(e,t,n,l)=>{var s;let u;let p={type:o.h.IMAGE,source:a.mx.key,image:{uploadStatus:r.A.Uploading,source:a.mx.key}};(0,d.aI)(n.type)?(p.image.showPlaceholder=!0,u="HEIC_tempId_".concat((0,i.Ak)())):u=URL.createObjectURL(n),p.image.tempUrl=u;let h=(t,n)=>{if(!u&&!n)return;let i=u||n;(0,c.Ki)(e,i,t)};t.setNodeAttribute(l,"background",p).setMeta("imageUploadUpdateAttrs",!0),(0,a.QM)(n,null===(s=e.storage.mediaUpload)||void 0===s?void 0:s.orgId,{onOriginalFileUpload:h,onUploadComplete:h,onUploadFailed:t=>{(0,c.wt)(e,u,t),URL.revokeObjectURL(u)}})},p=(e,t)=>t.map(t=>(0,d.u3)(t.type)?m(t,e):(0,s.cZ)(t.type,(0,s.QC)(t))?g(t,e):null).filter(e=>null!==e),h=function(e,t,n){let i=p(e,t);if(0==i.length)return;let a=i.map(e=>e.content),r=e.state.doc.resolve(n),o=r.parent.inlineContent,s=n;o&&0===r.parentOffset?s=n-1:o&&null===r.nodeAfter&&(s=n+1),e.chain().insertContentAt(s,a,{updateSelection:!1}).command(e=>{var t;let{tr:n}=e,i=n.doc.resolve(n.mapping.map(s)),a=(0,l.s)(n.doc.resolve(i.pos-((null===(t=i.nodeBefore)||void 0===t?void 0:t.nodeSize)||1)));return a&&n.setSelection(a),!0}).run(),i.forEach(e=>{e.upload()}),setTimeout(()=>{e.commands.scrollIntoView()},200)},m=(e,t)=>{let n={uploadStatus:r.A.Uploading,source:a.mx.key};(0,d.aI)(e.type)?(n.showPlaceholder=!0,n.tempUrl="HEIC_tempId_".concat((0,i.Ak)())):n.tempUrl=URL.createObjectURL(e);let o=(e,i)=>{let a=n.tempUrl;(a||i)&&(0,c.Ki)(t,a||i,e)},l={onOriginalFileUpload:o,onUploadComplete:o,onUploadFailed:e=>{n.tempUrl&&((0,c.wt)(t,n.tempUrl,e),URL.revokeObjectURL(n.tempUrl))}};return{name:e.name,content:{type:"image",attrs:n},upload:()=>{var n;return(0,a.QM)(e,null===(n=t.storage.mediaUpload)||void 0===n?void 0:n.orgId,l)}}},g=(e,t)=>{let n=URL.createObjectURL(e),i={...(0,c.bY)(e),url:n},r=(e,i)=>{(n||i)&&(0,c.XJ)(t,n||i,e)},o={onOriginalFileUpload:r,onUploadComplete:r};return{name:e.name,content:{type:"embed",attrs:i},upload:()=>{var n;return(0,a.QM)(e,null===(n=t.storage.mediaUpload)||void 0===n?void 0:n.orgId,o,"node","doc")}}}},93090:(e,t,n)=>{"use strict";n.d(t,{Qx:()=>m,p$:()=>v,dM:()=>g,bC:()=>b,KS:()=>h,xH:()=>p,XE:()=>u});var i=n(81570),a=n(74327),r=n(16676),o=n(17539),l=n(57036),s=n(20265);let d=e=>RegExp("^\\s*<svg.*<\\/svg>\\s*$","s").test(e);var c=n(39452);let u=(e,t,n,i)=>{let r=(n,i)=>{(0,c.Ki)(e,i||t,n)},o={onOriginalFileUpload:r,onUploadComplete:r,onUploadFailed:n=>{(0,c.wt)(e,t,n,i)}};n?(0,a.QM)(n,e.storage.mediaUpload.orgId,o):(0,a.j_)(t,e.storage.mediaUpload.orgId,o)},p=async(e,t)=>{try{let n=await fetch(t),i=await n.blob(),a=new File([i],"blob.png",{type:i.type});u(e,t,a)}catch(n){(0,c.wt)(e,t,n)}},h=e=>(0,o.u3)(e.type)||(0,r.cZ)(e.type,(0,r.QC)(e)),m=e=>new i.k_({props:{transformPasted:t=>(t.content.descendants(t=>{if("image"===t.type.name&&t.attrs.tempUrl){let n=e.storage.mediaUpload.completedUploads[t.attrs.tempUrl];n&&Object.assign(t.attrs,(0,c.wH)(t,(0,c.yK)({isError:!1,result:n})))}else if("image"===t.type.name&&t.attrs.src&&!(0,o.md)(t.attrs.src)){let n,i=t.attrs.src;if(i.startsWith("blob:")){Object.assign(t.attrs,(0,c.F)(i)),p(e,i);return}i.startsWith("data:")&&(n=(0,o.Xz)(t.attrs.src),i=URL.createObjectURL(n)),Object.assign(t.attrs,(0,c.F)(i)),u(e,i,n)}}),t),handlePaste:(t,n,i)=>f(e,t,n,i),handleDOMEvents:{drop:(t,n)=>x(e,t,n)}}}),g=(e,t)=>{var n;if(!e.clipboardData)return null;let i=e.clipboardData.getData("text/html"),a=e.clipboardData.getData("text/plain");if(a&&!i&&d(a))return[(0,o.Qm)(a)];let r=Array.prototype.slice.call(e.clipboardData.items);return r.some(e=>"text/html"===e.type)&&(t.content.childCount>1||(null===(n=t.content.firstChild)||void 0===n?void 0:n.type.name)!=="image")?null:r.map(e=>e.getAsFile()).filter(e=>!!e).filter(h)},x=(e,t,n)=>{if(t.props.editable&&!t.props.editable(t.state))return!1;let i=v(n).filter(h);if(0===i.length)return!1;let a=(0,l.M)(t,n);return!!a&&(n.preventDefault(),(0,s.nK)(e,i,a),!0)},f=(e,t,n,i)=>{if(t.props.editable&&!t.props.editable(t.state))return!1;let a=g(n,i);if(!a||0===a.length)return!1;let{selection:r}=t.state,o=r.from;return r.empty||e.commands.deleteSelection(),(0,s.nK)(e,a,o),!0};function v(e){let t=[],n=e.target;if(e.dataTransfer){let n=e.dataTransfer;n.files&&n.files.length?t=n.files:n.items&&n.items.length&&(t=n.items)}else n&&n.files&&(t=n.files);return Array.prototype.slice.call(t)}let b=(e,t,n)=>{let i=g(t,n);if(!i||1!==i.length)return!1;let a=i[0],r=(0,s.YC)(a,e);return{attrs:r.content.attrs,upload:r.upload}}},39452:(e,t,n)=>{"use strict";n.d(t,{Df:()=>x,F:()=>h,Ki:()=>b,XJ:()=>j,bY:()=>k,um:()=>g,wH:()=>m,wt:()=>y,yK:()=>p});var i=n(13236),a=n(46123),r=n.n(a),o=n(82451),l=n.n(o),s=n(41263),d=n.n(s),c=n(4977),u=n(16676);let p=e=>{let{result:t,isError:n,attrs:i}=e;if(n)return{uploadStatus:c.A.Error,showPlaceholder:!0,tempUrl:null,src:null};let{fullResults:a,...r}=t;return{uploadStatus:c.A.Done,showPlaceholder:!1,source:(null==i?void 0:i.source)||"image.custom",...r}},h=e=>({tempUrl:e,uploadStatus:c.A.Uploading,src:null,source:"image.custom"}),m=(e,t)=>{let n=e.type.spec.imageKeyPath,i=n?d()({},n,t):t;return l()({},e.attrs,i)},g=e=>{let t=e.type.spec.imageKeyPath;return t||"image"===e.type.name?t?r()(e.attrs,t,e.attrs):e.attrs:null},x=(e,t,n,a)=>{if(null==a?void 0:a.id)return a.id;if("cardAccentLayoutItem"===t.type.name){let t=(0,i.eL)(e.state.doc.resolve(n),e=>"card"===e.type.name);return t?t.node.attrs.id:null}},f=(e,t)=>(0,i.xe)(e.state.doc,e=>{let n=g(e);return[null==n?void 0:n.tempUrl,null==n?void 0:n.src].includes(t)}),v=(e,t)=>(0,i.xe)(e.state.doc,e=>"embed"===e.type.name&&e.attrs.url===t),b=(e,t,n)=>{e.parentEditor&&(e=e.parentEditor),t&&w(e,n,t);let i=f(e,t);if(0==i.length){console.warn("[MediaUpload] Couldn't find placeholder node");return}i.forEach(t=>{let{pos:i}=t;e.commands.updateImageOnUploadSuccess(i,n)}),setTimeout(()=>{e.commands.revokeImageTempURLs(t)},3e4)},y=function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e.parentEditor&&(e=e.parentEditor);let a=f(e,t);if(0==a.length){console.warn("[MediaUpload] Couldn't find placeholder node");return}a.forEach(t=>e.commands.updateImageOnUploadFailure(t.pos,i)),console.error(n)},w=(e,t,n)=>{e.storage.mediaUpload.completedUploads[n]=t},j=(e,t,n)=>{let i=v(e,t);if(0==i.length){console.warn("[MediaUpload] Couldn't find placeholder node");return}i.forEach(t=>{e.commands.updateAttributesAtPos(t.pos,{url:n.src,sourceUrl:n.src,embed:{url:n.src},thumbnail:{src:n.thumbnail,uploadStatus:c.A.Done,showPlaceholder:!1}})})},k=e=>({meta:{title:e.name,description:(0,u.z3)(e.size,1)},thumbnail:{uploadStatus:c.A.Uploading,showPlaceholder:!0},source:"embed.pdf"})},90286:(e,t,n)=>{"use strict";n.d(t,{K:()=>c,z:()=>u});var i=n(31085),a=n(80532);n(14041);var r=n(73893),o=n(64225),l=n(95580),s=n(5933),d=n(87643);let c=e=>{let{enterZoom:t,doubleClickNonZoomHandler:n,...l}=e,d=(0,o.GV)(s.nD),c=!d,u=d&&!n;return r.$.GAMMA_PUPPETEER_SERVICE?null:(0,i.jsx)(a.az,{inset:0,w:"100%",h:"100%",position:"absolute",zIndex:1,cursor:c?"zoom-in":"default",onDoubleClick:u?t:n,onClick:c?t:void 0,"data-testid":"zoom-click-capture","data-zoom-click-capture":!0,opacity:0,...l})},u=e=>{let{decorations:t,node:n,editor:r}=e,c=(0,d.DM)(t)||!(0,l.We)(r),u=(0,o.GV)(s.nD),{displayStyle:p}=n.attrs;return(0,i.jsx)(a.az,{position:"absolute",inset:0,zIndex:1,pointerEvents:u&&!c&&"inline"===p?"auto":"none",cursor:"default"})}},76304:(e,t,n)=>{"use strict";n.d(t,{zA:()=>F.z,Kc:()=>F.K,_M:()=>D,Gx:()=>T,$B:()=>G,RL:()=>V});var i=n(31085),a=n(65352),r=n(3091),o=n(25420),l=n(62313),s=n(9021),d=n(80532),c=n(12327),u=n(60674),p=n(75669),h=n(92154),m=n.n(h),g=n(98087),x=n.n(g),f=n(14041),v=n(6657),b=n(22544),y=n(59707),w=n(44507);let j={type:"spring",duration:.5,bounce:0},k=(0,w.Xb)()?"0.75rem":"2.5rem";var C=n(23970),S=n(40173),A=n(12567),z=n(32133),I=n(73524),R=n(64225),E=n(29719),L=n(17303);let _=()=>{let e=(0,R.GV)(L.C),{inPreviewContext:t}=(0,E.$E)();return e&&!t};var M=n(92667);let N=(0,u.P)(d.az),T=e=>{let{children:t,isZoomed:n,exitZoom:a,editor:r}=e,l=(0,z.wA)(),u=_();(0,f.useEffect)(()=>{if(!u)return v.WC.on("keydown","ZOOMABLE_OVERLAY",e=>n&&["ArrowDown","ArrowUp"].includes(e.key)?(e.preventDefault(),!0):!!((0,A.v_)("Esc")(e)||(0,A.v_)("Enter")(e))&&!!n&&(a(),e.preventDefault(),!0))},[a,n,u]),(0,f.useEffect)(()=>{u||l((0,I.WI)({id:"zoomableOverlay",isOpen:n}))},[l,n,u]);let p=(0,f.useRef)(null);return((0,M.Vg)(()=>{if(r.isEditable){if(n){var e;null===(e=p.current)||void 0===e||e.focus()}else r.commands.focus()}},[r,n],[n],!1),u)?null:(0,i.jsx)(S.Z,{children:n&&(0,i.jsxs)(d.az,{position:"fixed",inset:0,padding:k,zIndex:"modal",userSelect:"none",onClick:e=>{!(0,w.mG)()&&(e.target.closest(".image")||e.target.closest("[data-carousel-filmstrip]")||a())},onMouseDown:y.Fw,"data-in-editor-focus":!0,"data-testid":"zoomable-overlay",children:[(0,i.jsx)(N,{position:"absolute",inset:0,initial:{opacity:0},animate:{opacity:(0,w.Xb)()?.9:.86},transition:j,backgroundColor:"black"},"shade"),(0,i.jsx)(d.az,{position:"absolute",right:2,top:2,zIndex:"docked",contentEditable:!1,suppressContentEditableWarning:!0,children:(0,i.jsx)(s.K,{"aria-label":c.Ru._({id:"8qZ5De"}),colorScheme:"whiteAlpha",color:"whiteAlpha.800",size:"md",onClick:a,onMouseDown:y.Fw,icon:(0,i.jsx)(C.U,{}),variant:"ghost",className:"exit-button",ref:p})}),(0,i.jsx)(o.s,{position:"relative",zIndex:"1",h:"100%",w:"100%",pt:"2.8rem",align:"center",justify:"center",direction:"column",css:{"--overlay-maxH":"calc(100vh - 2 * ".concat(k,")"),"--overlay-maxW":"calc(100vw - 2 * ".concat(k,")"),"--media-maxH":"var(--overlay-maxH)","--media-maxW":"var(--overlay-maxW)"},children:t})]})})},P=(0,u.P)(o.s),O="80px",D=e=>{let{children:t,zoomedId:n,isZoomComplete:u,setZoomedId:h,isZoomed:g,exitZoom:w,editor:C}=e,S=m()(t,e=>e.id===n),A=t[S],z=(0,f.useRef)(null),I=(0,f.useCallback)(()=>{h((t[S+1]||t[0]).id)},[S,t,h]),R=(0,f.useCallback)(()=>{h((t[S-1]||x()(t)).id)},[S,t,h]);return((0,f.useEffect)(()=>{if(g&&!(t.length<2))return v.WC.on("keydown","ZOOMABLE_OVERLAY",e=>{switch(e.key){case"ArrowLeft":return R(),!0;case"ArrowRight":return I(),!0;default:return!1}})},[w,g,h,t,S,I,R]),(0,f.useEffect)(()=>{if(z.current&&u){let e=z.current.querySelector('[data-thumb-id="'.concat(n,'"]'));null==e||e.scrollIntoView({inline:"center",behavior:"smooth"})}},[n,u]),b.D1)?null:(0,i.jsxs)(T,{isZoomed:g,exitZoom:w,editor:C,children:[(0,i.jsx)(o.s,{flex:1,w:"100%",justify:"center",align:"center","data-testid":"zoomable-carousel-expanded",pos:"relative",children:(0,i.jsx)(p.N,{children:A&&(0,i.jsx)(P,{css:{"--media-maxH":"calc(var(--overlay-maxH) - ".concat(O," - ").concat(k,")")},initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},position:"absolute",transition:j,w:"100%",h:"100%",children:A.full},A.id)})}),t.length>1&&(0,i.jsx)(l.z,{w:"100vw",mt:k,px:k,gap:0,"data-carousel-filmstrip":!0,children:(0,i.jsxs)(o.s,{overflowX:"auto",width:"100%",justify:"center",align:"stretch",overflow:"hidden",children:[(0,i.jsx)(s.K,{icon:(0,i.jsx)(a.Y,{boxSize:"24px"}),"aria-label":c.Ru._({id:"MHk+7g"}),colorScheme:"whiteAlpha",variant:"ghost",size:"md",color:"whiteAlpha.900",borderColor:"whiteAlpha.200",borderWidth:"2px",borderStyle:"solid",onClick:R,_hover:{bg:"whiteAlpha.200",borderColor:"whiteAlpha.400"},h:"auto",mr:2}),(0,i.jsx)(l.z,{spacing:1,onClick:y.dG,"data-testid":"zoomable-carousel-thumbnails",ref:z,overflow:"scroll",sx:{"::-webkit-scrollbar":{display:"none"}},children:t.map(e=>{let t=e.id===n;return(0,i.jsx)(d.az,{border:t?"2px solid white":"2px solid transparent",boxSizing:"content-box",borderRadius:"md",overflow:"hidden",onClick:()=>h(e.id),transitionProperty:"border",transitionDuration:"normal",h:O,css:{"--media-maxH":O,"--media-maxW":"200px",flexShrink:0},"data-thumb-id":e.id,cursor:"pointer",padding:"2px",_hover:{borderColor:!t&&"whiteAlpha.500"},children:(0,i.jsx)(d.az,{w:"100%",h:"100%",borderRadius:"sm",overflow:"hidden",children:e.thumbnail})},e.id)})}),(0,i.jsx)(s.K,{icon:(0,i.jsx)(r.v,{boxSize:"24px"}),"aria-label":c.Ru._({id:"EatZYJ"}),colorScheme:"whiteAlpha",variant:"ghost",size:"md",color:"whiteAlpha.900",borderColor:"whiteAlpha.200",borderWidth:"2px",borderStyle:"solid",onClick:I,_hover:{bg:"whiteAlpha.200",borderColor:"whiteAlpha.400"},h:"auto",ml:2})]})})]})};var F=n(90286),H=n(5933);let W=e=>t=>(0,H.dK)(t)===e,B=e=>t=>{let n=(0,H.dK)(t);return n&&e.includes(n)?n:null},V=e=>{let t=(0,z.wA)(),n=(0,R.GV)(W(e)),i=(0,f.useCallback)(n=>{t((0,H.a)({nodeId:n?e:null}))},[t,e]),a=(0,f.useCallback)(()=>i(!0),[i]),r=(0,f.useCallback)(()=>i(!1),[i]);return{isZoomed:n,setIsZoomed:i,enterZoom:a,exitZoom:r}},G=e=>{let t=(0,z.wA)(),n=(0,R.GV)(B(e)),i=!!n,a=(0,f.useCallback)(e=>{t((0,H.a)({nodeId:e}))},[t]),r=(0,f.useCallback)(()=>a(null),[a]),[o,l]=(0,f.useState)(i);return(0,f.useEffect)(()=>{let e;return i?e=window.setTimeout(()=>{l(!0)},1e3*j.duration):l(!1),()=>clearTimeout(e)},[i]),{isZoomed:i,isZoomComplete:o,zoomedId:n,setZoomedId:a,exitZoom:r}}},95994:(e,t,n)=>{"use strict";n.d(t,{Ef:()=>r,MK:()=>a,Mg:()=>l,St:()=>o});var i=n(63751);let a=30,r=16,o=i.s5*r,l=.6},87071:(e,t,n)=>{"use strict";n.d(t,{E:()=>o,S:()=>r});var i=n(69069),a=n(57569);let r="gamma-moveable-wrapper",o={...i.BT,...a.X0}},90406:(e,t,n)=>{"use strict";n.d(t,{Bv:()=>l,Ez:()=>f,JY:()=>p,Kk:()=>x,Xs:()=>g,Zj:()=>u,_Y:()=>d,bi:()=>s,eb:()=>h,gk:()=>m,lQ:()=>c});var i=n(25817),a=n(95994),r=n(17539);let o=["image","video","embed","mediaPlaceholder"],l=e=>s(e.type),s=e=>o.includes(e.name),d=e=>"video"===e.type.name||"embed"===e.type.name,c=e=>e.href||e.url||e.sourceUrl||e.embedUrl||void 0,u=e=>{var t;return(null===(t=e.embed)||void 0===t?void 0:t.url)?e.embed.url:"embedUrl"in e&&e.embedUrl?e.embedUrl:c(e)},p=e=>{var t,n;let i=e.attrs;return[null===(t=i.meta)||void 0===t?void 0:t.title,null===(n=i.meta)||void 0===n?void 0:n.site].filter(Boolean).join(" - ")},h=(e,t)=>{var n;return null!==(n=e.clickBehavior)&&void 0!==n?n:t?"newTab":"expand"},m=e=>null!=e?e:"expand",g=e=>(0,r.SV)((null==e?void 0:e.src)||(null==e?void 0:e.tempUrl))&&e.source===i.Z.key,x=(e,t)=>{if(!e)return e;try{let n=new URL(e);return n.searchParams.set("ctx",t||"inline-svg"),n.toString()}catch(t){return console.error("[getSrcUrlForInlineSvg] Error with src url for inline SVG",t),e}},f=e=>{let{width:t,height:n,resize:i}=e.meta||{};if(!t||!n||(null==i?void 0:i.isAuto)===!1)return e;let r=a.St,o=window.innerHeight*a.Mg;return n/t*r>o?{...e,resize:{width:Math.min(r,t/n*o),clipType:null,clipPath:null,clipAspectRatio:null,isAuto:!0}}:e}},59534:(e,t,n)=>{"use strict";n.d(t,{A:()=>p,v:()=>h});var i=n(13236),a=n(81570),r=n(25317),o=n(63915),l=n(88693),s=n(26813),d=n(95580),c=n(77646),u=n(90406);let p=e=>{var t,n;let{editor:p,selection:h,freshNode:g}=e;if(!h||!(h instanceof a.nh))return null;let x=null!=g?g:h.node,f=h.$from;if((0,u.bi)(x.type))return{mediaType:m(x.attrs.source),area:"node",attrs:x.attrs,node:x,id:x.attrs.id};if("cardAccentLayoutItem"===x.type.name){let e=x.attrs;return(null===(t=e.background)||void 0===t?void 0:t.type)===s.h.IMAGE&&e.background.image?{mediaType:"image",area:"background",attrs:e.background.image,node:x,id:(0,i.eL)(f,c.jg).node.attrs.id,imgKeyPath:"background.image"}:null}let v=(0,d.vC)(p,x.type);if(v&&v.config.accessoryImageKey){let e=v.config.accessoryImageKey,t={...x.attrs[e]},n="image";return(0,o.M)(h.$from.parent)&&"icon"===(0,l.B)(h.$from.parent.attrs.variantKey).imageType&&(n="icon"),{attrs:t,node:x,mediaType:n,id:x.attrs.id,area:"accessory",imgKeyPath:e}}return h instanceof r.n?{attrs:null!==(n=h.getItemData())&&void 0!==n?n:{},node:x,mediaType:"icon",id:x.attrs.id,area:"accessory",imgKeyPath:h.keyPath}:null},h=e=>{let{editor:t,pos:n,attrs:i}=e;if(!t)return;let a=t.state.doc.nodeAt(n);if(!a)return;let r=a.type.spec.imageKeyPath;if(!["image","mediaPlaceholder"].includes(a.type.name)&&!r){console.warn("[updateSelectedMedia] Node ".concat(a.type.name," is not compatible with updateSelectedMedia"));return}let o=t.chain();r?(o.updateAttributeKeyPathAtPos(n,r,i),r.startsWith("background.")&&o.updateAttributeKeyPathAtPos(n,"background.source",i.source)):"mediaPlaceholder"===a.type.name?o.insertContentAt({from:n,to:n+a.nodeSize},{type:"image",attrs:i},{updateSelection:!0}):o.updateAttributesAtPos(n,i),o.focus().scrollIntoView().run()},m=e=>e?"image.icon"===e?"icon":e.startsWith("image.")?"image":e.startsWith("video.")||e.startsWith("embed.")?"embed":"image":"image"},56922:(e,t,n)=>{"use strict";n.d(t,{D0:()=>a,Hj:()=>o,aG:()=>d,cw:()=>r,hu:()=>s,kb:()=>i,md:()=>l});let i=75,a="".concat(i,"px"),r=10,o="navbar-view-backdrop",l="navbar-view-content",s="data-navbar-closed-toggle",d=()=>({type:"doc",content:[{type:"navbar",attrs:{image:{source:"image.custom"}},content:[{type:"navbarLinks",attrs:{horizontalAlign:"center"}},{type:"navbarButtons"}]}]})},97404:(e,t,n)=>{"use strict";n.d(t,{a:()=>l});var i=n(13236),a=n(81570),r=n(20277),o=n(68566);let l=i.YY.create({name:"focusHelpers",addCommands:()=>({focusDelayed:()=>e=>{let{editor:t}=e;return requestAnimationFrame(()=>t.commands.focus()),!0},insertContentAndSelect:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return n=>{let{chain:i,state:a}=n,{from:r,$from:o}=a.selection;return 0===o.parentOffset?i().insertContentAt({from:r-1,to:r},e,{updateSelection:!1}).selectInsertedNode(t).run():i().insertContent(e,{updateSelection:!1}).selectInsertedNode(t).run()}},focusMapped:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;return i=>{let{tr:a,view:o}=i,l=a.mapping.map(e,n)+t;try{let e=(0,r.s)(a.doc.resolve(l));e&&a.setSelection(e),o.focus()}catch(e){console.error("[focusMapped] error selecting pos",l,e)}return!0}},selectInsertedNode:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return t=>{let{tr:n,view:i}=t,a=(0,r.t)(n);if(!a)return!1;let o=(0,r.s)(a,e);return!!o&&(n.setSelection(o),i.focus(),!0)}},selectNodeAtPos:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return n=>{let{state:i,tr:r,view:o}=n;try{r.setSelection(a.nh.create(i.doc,e)),t&&r.scrollIntoView(),o.focus()}catch(t){console.warn("[selectNodeAtPos] Error selecting node",e,t)}return!0}},selectInsideNodeAtPos:(e,t)=>n=>{let{tr:i,state:a}=n,o=a.doc.resolve(e),l=(0,r.s)(o,t);return!!l&&(i.setSelection(l),!0)},deleteSelectionAndSelectNear:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return t=>{let{tr:n,state:i}=t,{selection:a}=i;if(a.empty)return!1;n.deleteSelection().scrollIntoView();let r=(0,o.n)(n.doc.resolve(a.from),e);return r&&n.setSelection(r),!0}}})})},87643:(e,t,n)=>{"use strict";n.d(t,{DM:()=>h,b0:()=>m,bU:()=>g});var i=n(13236),a=n(81570),r=n(73686),o=n(95580),l=n(17835),s=n(77583),d=n(68043),c=n(34095);let u=e=>e.isLeaf||["paragraph","table","tableRow","tableCell","gridLayout","gridCell","heading","title","card","cardLayoutItem","cardAccentLayoutItem","button","buttonGroup","gallery","blockquote","calloutBox","smartLayout","smartLayoutCell","toggle","navbar","navbarLinks"].includes(e.type.name),p=e=>e.isAtom||["gallery","card"].includes(e.type.name),h=e=>e.some(e=>e.spec.focusedNode),m=e=>e.some(e=>e.spec.isSelectingNode),g=i.YY.create({name:"focusedNodes",addProseMirrorPlugins(){let e=this.editor;return[new a.k_({props:{decorations(t){var n;if(!e.isEditable||!(0,o.We)(e)||(null===(n=document.activeElement)||void 0===n?void 0:n.tagName)==="IFRAME")return;let i=t.selection,h=[];return t.doc.nodesBetween(i.from,i.to,(e,t,n)=>{if(u(e)){let o=i instanceof d.HT&&"tableRow"===e.type.name&&i.getTableNode()===n&&i.isRowSelection()&&!i.isColSelection(),l=i instanceof d.HT&&(0,c.hj)(e)&&i.getTableNode()===e&&i.isSelectingAllCells(),s={focusedNode:!0,isSelected:i.from<=t,isFocusedInside:i.from>t||i.to<t+e.nodeSize,isSelectingNode:i instanceof a.nh&&i.node===e||o||l,isSelectingAround:p(e)&&i.from<=t&&i.to>=t+e.nodeSize&&!(i instanceof a.nh)},u=[s.focusedNode?"is-focused":"",s.isSelected?"is-selected":"",s.isFocusedInside?"is-focused-inside":"",s.isSelectingNode?"is-selecting-node":"",s.isSelectingAround?"is-selecting-around":""].join(" ");h.push(r.NZ.node(t,t+e.nodeSize,{class:u},s))}if((0,l.Pb)(e)&&i.from<=t&&i.from<=t)return!1;if("table"===e.type.name&&i instanceof d.HT&&i.isColSelection()&&!i.isSelectingAllCells()){let n=i.$anchorCell.pos,{left:a}=s.J3.get(e).findCell(n-(t+1));h.push(r.NZ.node(t,t+e.nodeSize,{},{isColumnSelected:!0,colNumber:a}))}}),r.zF.create(t.doc,h)}}})]}})},12408:(e,t,n)=>{"use strict";n.d(t,{Ms:()=>r,Qj:()=>a});var i=n(81570);let a=e=>{let t=e.state.selection;return t instanceof i.U3&&!t.empty},r=e=>e.some(e=>e.spec.isFocusedInside)},86047:(e,t,n)=>{"use strict";n.d(t,{I2:()=>I,Li:()=>R,Rj:()=>z,UE:()=>w,vi:()=>_});var i=n(13236),a=n(35002),r=n(5159),o=n(64225),l=n(80352),s=n(5933),d=n(19534),c=n(45864),u=n(38678),p=n(98371),h=n(95580),m=n(69646),g=n(32262),x=n(82354),f=n(77646),v=n(46896),b=n(15944);let y=()=>a.of.get("presentModeFlat"),w=(e,t)=>{let n=t.pos?e.state.doc.nodeAt(t.pos):null;return n&&z(n,t.cardId)},j=e=>{let{tr:t,editor:n,spotlight:i,bias:a=0,method:r="replace"}=e;t.setMeta(b.n,i);let o=b.n.getState(n.state);if(i.cardId||(0,u.o)({cardId:null,method:r,emitChange:!1}),o.cardId!==i.cardId&&i.cardId){(0,u.o)({cardId:i.cardId,method:r,emitChange:!1});let e=(0,f.W0)(n,i.cardId);e&&t.setSelection(c.J.create(t.doc,e.pos,a))}n.commands.user({spotlight:i})},k=(e,t)=>{if(!t)return;let n=document.querySelector("".concat(e," ").concat((0,x.OB)(t)));n&&(null==n||n.classList.add("cardWiggle"),setTimeout(()=>{null==n||n.classList.remove("cardWiggle")},750))},C=(e,t)=>{let n=w(e,t),i=n&&t.cardId&&t.pos&&_(e,t.cardId,t.pos,e=>z(e,t.cardId),!0).cardId!==t.cardId;return{isSpotlightingBlock:n,isSpotlightingFirstBlock:i}},S=e=>{switch(e.type.name){case"card":return!(0,m.Wq)(e);case"toggle":return(0,v.vb)(e.attrs.id);default:return!1}},A=e=>{switch(e.type.name){case"card":return(0,m.wE)(e.attrs.id,!0),!0;case"toggle":return(0,v.bG)(e.attrs.id,!1),!0;default:return!1}},z=(e,t)=>{switch(e.type.name){case"paragraph":case"heading":case"title":case"math_display":case"codeBlock":return e.textContent.trim().length>0||e.content.content.some(e=>"text"!==e.type.name);case"calloutBox":case"blockquote":case"bullet":case"numbered":case"todo":case"embed":case"video":case"image":case"mediaPlaceholder":case"gallery":case"drawing":case"diagram":case"chart":case"contributors":case"tableOfContents":case"toggleSummary":case"table":case"buttonGroup":case"gridCell":case"smartLayoutCell":return!0;case"toggle":return!(0,v.vb)(e.attrs.id);case"card":{let n=(0,s.Ev)((0,o.KA)().getState()).parents[e.attrs.id].slice(-1)[0];if(y())return!0===(0,m.Wq)(e)&&!1===(0,m.Wq)(n);return n===t}default:return!1}},I=e=>{switch(e.type.name){case"toggle":return(0,v.vb)(e.attrs.id);case"card":return!(0,m.Wq)(e);case"footnote":case"gallery":case"gridCell":case"smartLayoutCell":case"table":case"cardNotes":case"blockquote":case"calloutBox":return!1;default:return!0}},R=i.YY.create({name:"spotlight",addOptions:()=>({scrollerSelector:"body"}),addCommands(){var e=this;return{syncSpotlightAndScroll:e=>{let{spotlight:t,scroll:n,scrollOffset:i,isFollowing:a=!1}=e;return e=>{let{editor:o,view:l,tr:s}=e,{pos:c,cardId:u}=t,p=b.n.getState(o.state).cardId!==u;if(c){let e=l.state.doc.nodeAt(c),t=l.nodeDOM(c);if(e&&t instanceof HTMLElement){console.debug("[Spotlight.syncSpotlight] Scrolling to specific card at pos: ".concat(c),t);let n=(0,d.jg)(e)&&e.attrs.id===u;setTimeout(()=>requestAnimationFrame(()=>{n?T({}):N({element:t})}),p?x.y0:0)}}else if(null==n?void 0:n.pos){let{pos:e,pct:t}=n;setTimeout(()=>requestAnimationFrame(()=>{o.commands.scrollToPositionInCard(e,t||void 0,i)}),p?x.y0:0)}return(0,r.up)({following:a}),(0,r.ki)({cardId:u}),j({editor:o,tr:s,spotlight:{pos:c,cardId:u}}),!0}},spotlightCardById:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return n=>{let{editor:i,view:a}=n,r=b.n.getState(i.state),o=(0,f.W0)(i,e);if(!o)return!0;let l=i.state.doc.resolve(o.pos),s=l.depth>1&&y(),d=s?(0,g.hT)(i.state.doc,o.pos):o;if(d){let n=r.cardId!==e;if(s){(0,m.wE)(e,!1),(0,g.Ib)({pos:l.pos,editor:i});let t=a.nodeDOM(o.pos);t instanceof HTMLElement&&setTimeout(()=>requestAnimationFrame(()=>{N({element:t,behavior:"smooth"})}),n?x.y0:0)}return t&&y()?i.commands.spotlightNextBlock(!1,{pos:o.pos,cardId:e}):i.commands.syncSpotlightAndScroll({spotlight:{pos:null,cardId:d.node.attrs.id}})}return!0}},spotlightCurrentCard:()=>e=>{var t,n,i,a,r,o;let l,{editor:s,tr:c}=e,u=()=>{console.warn("[Spotlight.spotlightCurrentCard] Couldnt find a card to spotlight, so using first card.");let e=s.view.state.doc.nodeAt(1);return e&&(0,d.jg)(e)?j({editor:s,tr:c,spotlight:{pos:null,cardId:e.attrs.id}}):console.error("[Spotlight.spotlightCurrentCard] nodeAt(1) is unexpectedly not a card. Cannot spotlight"),!0};if(!document.querySelector(this.options.scrollerSelector))return u();let p=s.state.selection.from,m=p&&s.view.coordsAtPos(p);if(m&&m.top<window.innerHeight&&m.bottom>0)console.debug("%c [Spotlight.spotlightCurrentCard] Using cursor pos","background-color: deeppink",{posToUse:l=p});else{let e=(0,h.ls)(s,this.options.scrollerSelector,135).pos;console.debug("%c [Spotlight.spotlightCurrentCard] Using top center pos","background-color: deeppink",{posToUse:l=null==e?void 0:e.pos})}(!l||l<2)&&console.warn("%c [Spotlight.spotlightCurrentCard] Using fallback pos","background-color: deeppink",{posToUse:l=2});let x=y()?(0,g.hT)(s.state.doc,l):(0,g.Tv)(s,l,!1);if(null==x?void 0:null===(n=x.node)||void 0===n?void 0:null===(t=n.attrs)||void 0===t?void 0:t.hidden){let e=x;for(;x&&(null==x?void 0:null===(a=x.node)||void 0===a?void 0:null===(i=a.attrs)||void 0===i?void 0:i.hidden);)x=E(s,x.pos);if(!x)for(x=e;x&&(null==x?void 0:null===(o=x.node)||void 0===o?void 0:null===(r=o.attrs)||void 0===r?void 0:r.hidden);)x=E(s,x.pos,!0)}return x&&x.pos?(y()&&(0,g.Ib)({editor:s,pos:l}),j({editor:s,tr:c,spotlight:{pos:null,cardId:x.node.attrs.id}}),!0):u()},ascendUpToParentCard:function(){let t=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return n=>{let{editor:a,view:o,tr:l}=n,s=b.n.getState(a.state),c=s.pos;if(!c){let t=(0,h.ls)(a,e.options.scrollerSelector,window.innerHeight/2).pos;c=null==t?void 0:t.pos}if(!c)return!1;let u=a.view.state.doc.nodeAt(c),p=(0,g.Tv)(a,c,!1);if(y())return!!p&&!!t&&(k(e.options.scrollerSelector,s.cardId),!0);if(!p)return!1;let m=(0,i.eL)(a.state.doc.resolve(p.pos),d.jg);if(!m)return p&&t&&k(e.options.scrollerSelector,p.node.attrs.id),!1;{let e=o.nodeDOM(p.pos);if(!e)return console.warn("[Spotlight.ascendUpToParentCard] Cant find dom node",{domNode:e,presentingCard:p,parentOfPresentingCard:m,node:u,lastSpotlight:s}),!1;let t=m.node.attrs.id,{isSpotlightingBlock:n}=C(a,s);if(n)return a.commands.spotlightNextBlock(!1,{pos:m.pos,cardId:t});(0,r.ki)({cardId:t}),j({editor:a,tr:l,spotlight:{pos:null,cardId:t}}),M(N,x.M2)({element:e})}return!0}},descendIntoCurrentCard:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"replace";return n=>{let{editor:i,tr:a}=n,r=b.n.getState(i.state),o=e||r.pos;if(y())return i.commands.spotlightExpandCard(o);if(!o)return!0;let l=i.view.state.doc.nodeAt(o);if(!(l&&(0,d.jg)(l)&&l.attrs.id!==r.cardId))return!0;let s=l.attrs.id,{isSpotlightingBlock:c}=C(i,r);return(console.debug("[Spotlight.descendIntoCurrentCard]",{node:l,isSpotlightingBlock:c}),c)?i.commands.spotlightNextBlock(!1,{pos:o,cardId:s}):(j({editor:i,tr:a,spotlight:{pos:null,cardId:s},method:t}),setTimeout(()=>{requestAnimationFrame(()=>{T({})})},x.y0),!0)}},spotlightCollapseCard:e=>t=>{let{editor:n,tr:i}=t;if(!y())return n.commands.ascendUpToParentCard();let a=n.view.state.doc.nodeAt(e);if(!a||!(0,d.jg)(a))return console.warn("[Spotlight.spotlightCollapseCard] pos does not resolve to a card node. This is a noop",e),!0;let r=b.n.getState(n.state),o=a.attrs.id;return(0,m.wE)(o,!0),j({editor:n,tr:i,spotlight:r}),(0,l.H1)("editor").scrollElementIntoView({element:n.view.nodeDOM(e),attempts:0,offsetFromTop:null}),!0},spotlightCollapseNearestExpandableNode:e=>t=>{let{editor:n,tr:a}=t,r=b.n.getState(n.state),o=e||n.state.selection.from,s={pos:o,node:n.view.state.doc.nodeAt(o)};if(!s.node||!S(s.node)){let e=(0,i.eL)(n.state.doc.resolve(o),S);s.node=(null==e?void 0:e.node)||null,s.pos=(null==e?void 0:e.pos)||0}let d=s.pos&&(0,g.hT)(n.state.doc,s.pos);if(!s.node||!s.pos||!d||d.node.attrs.id===s.node.attrs.id)return console.warn("[Spotlight.spotlightCollapseNearestExpandableNode] pos does not resolve to a valid collapsible node. This is a noop",s.pos),!1;if(!(d.pos<=s.pos&&d.pos+d.node.nodeSize>=s.pos))return console.warn("[Spotlight.spotlightCollapseNearestExpandableNode] posToUse is outside of the presenting card. This is a noop",s.pos),!1;console.debug("[Spotlight.spotlightCollapseNearestExpandableNode]",{result:s});let u=A(s.node);return u&&((0,l.H1)("editor").scrollElementIntoView({element:n.view.nodeDOM(s.pos),attempts:0,offsetFromTop:null}),s.pos===n.state.selection.from?n.commands.reHighlightExpandableNode():a.setSelection(c.J.create(n.state.doc,s.pos)),w(n,r)&&j({editor:n,tr:a,spotlight:{pos:s.pos,cardId:d.node.attrs.id}})),u},spotlightExpandCard:e=>t=>{let{editor:n}=t,i=b.n.getState(n.state),a=e&&n.view.state.doc.nodeAt(e);if(!a||!(0,d.jg)(a))return console.warn("[Spotlight.spotlightExpandCard] pos does not resolve to a card node. This is a noop",e),!0;let r=a.attrs.id,{isSpotlightingBlock:o}=C(n,i);return(0,m.wE)(r,!1),console.debug("[Spotlight.spotlightExpandCard]",{node:a,isSpotlightingBlock:o}),setTimeout(()=>{o?n.commands.spotlightNextBlock(!1,{pos:e,cardId:r},"smooth"):n.commands.scrollToPositionInCard(e,0,50)},x.M2),!0},spotlightNextExpandedCard:e=>t=>{let{editor:n,commands:i}=t,a=b.n.getState(n.state);if(!a.pos||!a.cardId)return!0;let r=(0,g.hT)(n.state.doc,a.pos),o=(0,f.Oq)(n,a.pos);if(!r||!o)return!0;let l={node:null,pos:null,cardId:null},s=a.pos;return(n.state.doc.descendants((t,i,a)=>{if(!e&&l.pos)return!1;let r=!(0,m.Wq)(t);if(!((0,d.jg)(t)&&r&&(e?i<s:i>s)))return r;let c=t!==o.node||!e;if(!c){let{isSpotlightingFirstBlock:e}=C(n,{pos:s,cardId:t.attrs.id});c=!e}return c&&(l.node=t,l.pos=i,l.cardId=t.attrs.id),r}),l.pos&&l.cardId)?i.spotlightNextBlock(!1,{pos:l.pos,cardId:l.cardId}):(k(this.options.scrollerSelector,r.node.attrs.id),!0)},spotlightNextCard:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top";return n=>{let{editor:a,commands:o,tr:l}=n,s=b.n.getState(a.state),c=s.pos,{isSpotlightingBlock:u,isSpotlightingFirstBlock:p}=C(a,s);if(u&&y())return o.spotlightNextExpandedCard(e);if(!c){let e=(0,f.W0)(a,s.cardId);c=null==e?void 0:e.pos}if(!c)return console.warn("[Spotlight.spotlightNextCard] Could not find posToUse",{lastSpotlight:s}),!1;let h=a.view.state.doc.nodeAt(c),m=!!(h&&e&&u&&!p&&h.attrs.id!==s.cardId),g=h&&s.cardId&&h.attrs.id===s.cardId?{node:h,pos:c}:(0,i.eL)(a.state.doc.resolve(c),d.jg),v=m?g:(null==g?void 0:g.pos)?E(a,g.pos,e):null;if(v&&null!==v.pos){console.debug("[Spotlight.spotlightNextCard] Found next card:",{next:v,posToUse:c,isSpotlightingBlock:u});let n=v.node.attrs.id,i=v.pos;if(u)return a.commands.spotlightNextBlock(!1,{pos:i,cardId:n});(0,r.ki)({cardId:n}),j({editor:a,tr:l,bias:e?1:-1,spotlight:{pos:null,cardId:n}});let o=s.cardId!==n,d="top"==t?T:P;null!==t&&setTimeout(()=>{d({sync:!0,behavior:"auto"})},o?x.y0:0)}else console.debug("[Spotlight.spotlightNextCard] No next node. Will attempt to ascendUp",{lastSpotlight:s,posToUse:c,node:h}),a.commands.ascendUpToParentCard();return!0}},spotlightNextBlock:(e,t,n)=>i=>{let{editor:a,tr:o}=i,l=b.n.getState(a.state);if(!l.cardId)return!0;let s=a.state.selection,u=s instanceof c.J,p=u&&(-1===s.side&&e||1===s.side&&!e)?-1:0,h=u?e?s.to+p:s.from+p:void 0,m=(null==t?void 0:t.cardId)||l.cardId,f=(null==t?void 0:t.pos)||l.pos||h,v=u&&null===l.pos&&(0,d.jg)(s.node)&&1===s.$from.depth,{pos:w,cardId:k,domNode:C}=f&&!v?_(a,m,f,z,e):L(a,l.cardId,this.options.scrollerSelector,e);if(null!==w&&C instanceof HTMLElement){var S;let t=y()?null===(S=(0,g.hT)(a.state.doc,w))||void 0===S?void 0:S.node.attrs.id:k;if(!t)return!0;(0,r.ki)({cardId:t}),console.debug("%c [Spotlight.spotlightNextBlock]","background-color: deeppink",{prevCardId:l.cardId,cardId:t,pos:w}),setTimeout(()=>{N({element:C,behavior:n})},l.cardId===t?0:x.y0),j({editor:a,tr:o,bias:e?1:-1,spotlight:{pos:w,cardId:t}})}else a.commands.ascendUpToParentCard();return!0},spotlightNodeAtPos:e=>t=>{let{editor:n,tr:i}=t,a=b.n.getState(n.state);if(!a.cardId)return!1;let r=a.cardId,o=(0,h.TK)(n.state.doc.resolve(e),e=>z(e)),l=o.reverse().find((e,t)=>!(t!==o.length-1&&I(e.node)));return!!l&&(l.pos!==a.pos?(j({editor:n,tr:i,spotlight:{pos:l.pos,cardId:r}}),!0):n.commands.turnOffSpotlight())},turnOffSpotlight:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t=>{let{editor:n,tr:i}=t,a=b.n.getState(n.state);return j({editor:n,tr:i,spotlight:{pos:null,cardId:e?null:a.cardId}}),!0}},scrollToPositionInCard:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return i=>{let{editor:a}=i,r=(0,p.Oc)((0,h.NR)(a,e)),o=null==r?void 0:r.getBoundingClientRect();if(!r||!o)return!0;let l=(t||0)*o.height;return console.debug("%c [Spotlight.scrollToPositionInCard]","background-color: deeppink",JSON.stringify({pos:e,offset:n-l}),r),(0,p.BX)({element:r,color:"deeppink",requiredCookie:"spotlightScrollDebug=true"}),N({element:r,offset:n-l}),!0}},scrollToNodeWithPin:(e,t)=>()=>(console.debug("%c [Spotlight.scrollToNodeWithPin] WITH NODE","background-color: deeppink",{scrollToNode:e}),M(N,x.M2,0)({element:e,offset:t}),!0)}},addProseMirrorPlugins(){return[(0,b._)((e,t)=>z(e,t),this.editor)]}}),E=function(e,t){var n;let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.view.state.doc.nodeAt(t),o=r&&(0,d.jg)(r)?{node:r,pos:t}:(0,i.eL)(e.state.doc.resolve(t),d.jg);if(!o)return;let l=e.state.doc.resolve(a?o.pos:o.pos+(null===(n=o.node)||void 0===n?void 0:n.nodeSize)),s=a?l.nodeBefore:l.nodeAfter;if(!s)return;let c=a?l.pos-s.nodeSize:l.pos;if((0,d.jg)(s))return(console.debug("[Spotlight.findNextDirectSiblingCard]",{nextNode:s,nextPos:c}),s.attrs.hidden)?E(e,c,a):{node:s,pos:c}},L=function(e,t,n){var i;let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r={node:null,pos:null,cardId:null,domNode:null},o=(null===(i=(0,h.ls)(e,n,135).pos)||void 0===i?void 0:i.inside)||null,l=o?e.state.doc.nodeAt(o):null;if(!o||!l)return r;if(l.attrs.id===t)return _(e,t,o,e=>z(e,t),a);let s=e.state.doc.resolve(o),d=(0,f.Oq)(e,s.before());if(!d)return r;let c=s.before(d.depth+2),u=e.state.doc.nodeAt(c);if(u&&z(u,t)){let t=e.state.doc.resolve(c);return r.pos=t.pos,r.node=u,r.cardId=null==d?void 0:d.node.attrs.id,r.domNode=e.view.nodeDOM(r.pos),r}return _(e,t,c,e=>z(e,t),a)},_=function(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o={node:null,pos:null,cardId:null,domNode:null},l=e.state.doc.resolve(n),s=e.view.state.doc.nodeAt(n),c=(0,i.eL)(l,e=>(0,d.jg)(e)&&e.attrs.id===t),u=s&&(0,d.jg)(s)&&(null==s?void 0:s.attrs.id)===t?{node:s,pos:n}:c;if(!u)return console.debug("[Spotlight.findNextNode] - No card found:",{cardId:t,from:n,node:s}),o;let p=(e,t)=>{let i=e.attrs.id;e.descendants((l,s)=>{let d=t+s+1,c=a(l,i)&&(r?d<n:d>n);return(!!r||!o.node)&&(c&&(o.node=l,o.pos=d,o.cardId=e.attrs.id),I(l))})};p(u.node,u.pos);let h=u.pos;for(;null===o.pos;){let t=E(e,h,r);if(t)p(t.node,t.pos),h=t.pos;else break}return null!==o.pos&&(o.domNode=e.view.nodeDOM(o.pos)),console.debug("[Spotlight.findNextNode]",{result:o}),o},M=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return i=>{let a;let r={...i,sync:!0,behavior:"auto"};e(r);let o=!1;Promise.race([new Promise(e=>setTimeout(()=>e(!1),n+t+300)),new Promise(e=>{a=()=>e(!0),i.element.addEventListener("transitionend",a)})]).then(e=>{console.debug("[scrollTo withDurationPin] transitionend race result",e),o=!0}).finally(()=>{i.element.removeEventListener("transitionend",a)});let l=+new Date,s=()=>requestAnimationFrame(()=>{e(r),(+new Date-l<t+n||!o)&&s()});setTimeout(s,n)}},N=e=>{var t;let{element:n,sync:i=!1,behavior:a="smooth",offset:r}=e;if(!(0,p.IK)(n)){let e=n.querySelector("[data-content-reference]");if(!e||!(0,p.IK)(e))return;n=e}let o=(0,l.H1)("editor");if(!(null===(t=o.scroller)||void 0===t?void 0:t.clientHeight))return;let s=(0,p.sR)(n,o.scrollSelector),d=n.clientHeight/2,c=.45*o.scroller.clientHeight-d,u=s-Math.max(void 0!==r?r:c,125);o.scrollTo({top:u,sync:i,behavior:a})},T=e=>{let{sync:t=!1,behavior:n="smooth"}=e;(0,l.H1)("editor").scrollTo({top:0,behavior:n,sync:t})},P=e=>{let{sync:t=!1,behavior:n="smooth"}=e,i=(0,l.H1)("editor"),a=i.scroller;a&&i.scrollTo({top:a.scrollHeight,behavior:n,sync:t})}},15944:(e,t,n)=>{"use strict";n.d(t,{_:()=>x,n:()=>m});var i=n(81313),a=n(81570),r=n(73686),o=n(64225),l=n(9335),s=n(5933),d=n(19534),c=n(387),u=n(95580),p=n(12408),h=n(86047);let m=new a.hs("spotlight"),g=(e,t,n)=>{if(null===t.pos)return r.zF.create(e.doc,[]);let a=[],o=e.doc.nodeAt(t.pos);o&&(0,d.jg)(o)&&!n(o,t.cardId)?a.push(r.NZ.node(t.pos,t.pos+o.nodeSize,{class:"presenting-card"})):o&&n(o,t.cardId)&&a.push(r.NZ.node(t.pos,t.pos+o.nodeSize,{class:"spotlight-block"}));let l=t.pos;return e.doc.descendants((e,o)=>(n(e,t.cardId)&&a.push(r.NZ.node(o,o+e.nodeSize,{class:(0,i.cx)("spotlightable",o>l&&"after-spotlight")})),(0,h.I2)(e)||(0,d.jg)(e))),r.zF.create(e.doc,a)},x=(e,t)=>new a.k_({key:m,state:{init:(t,n)=>{let i={pos:null,cardId:""};return{...i,decorations:g(n,i,e)}},apply(t,n,i,a){let r=t.getMeta(m),o=(0,c.he)(t);if(r||o){let t=r||n;return{...t,decorations:g(a,t,e)}}let l=n.decorations.map(t.mapping,t.doc);return{...n,decorations:l}}},props:{attributes:t=>{let n=m.getState(t);if(!n||null===n.pos)return{class:""};let i=t.doc.nodeAt(n.pos);return i&&e(i,n.cardId)?{class:"spotlight-active"}:{class:""}},decorations:e=>{let t=m.getState(e);return t?t.decorations:null},handleDOMEvents:{click(e,n){if(n.detail>1||(0,p.Qj)(e))return;let i=(0,o.KA)(),a=i.getState(),r=(0,s.FI)(a);if(!(r&&(0,h.UE)(t,r))||(0,s.QF)(a))return;if((0,s.YL)(a)){i.dispatch((0,s.tB)());return}let l=m.getState(e.state);if(!(null==l?void 0:l.cardId))return;let d=e.posAtDOM(n.target,0);if(null===d||d<1)return;if(!e.state.doc.nodeAt(d)){t.commands.turnOffSpotlight();return}let[c]=(0,u.TK)(e.state.doc.resolve(d),e=>(0,h.Rj)(e));c?t.commands.spotlightNodeAtPos(d):t.commands.turnOffSpotlight()},contextmenu(e,n){let i=m.getState(e.state);if(!(null==i?void 0:i.cardId))return;let a=(0,o.KA)().getState();if((0,s.QF)(a))return;let r=e.posAtDOM(n.target,0),d=t.state.doc.resolve(r),c=e.state.doc.nodeAt(r),[p]=c&&(0,h.Rj)(c)?[{pos:r,start:d.start(d.depth+1)}]:(0,u.TK)(t.state.doc.resolve(r),e=>(0,h.Rj)(e));l.LF.emit(l.DN.OPEN_PRESENT_MODE_CONTEXT_MENU,{e:n,cardId:i.cardId,pos:p?p.start:null})}}}})},65641:(e,t,n)=>{"use strict";n.d(t,{X:()=>M});var i=n(13236),a=n(58599),r=n(43873),o=n(29362),l=n(77583),s=n(75621),d=n(31085),c=n(80532),u=n(80853),p=n(81313),h=n(20501),m=n(24221),g=n(9104),x=n(12327),f=n(119),v=n.n(f),b=n(14041),y=n(70605),w=n(71220),j=n(2696),k=n(20277),C=n(59707),S=n(92667),A=n(5434),z=n(4468),I=n(91725);let R=e=>{let{colWidths:t}=e;return(0,d.jsxs)("colgroup",{children:[(0,d.jsx)("col",{style:{width:"0%"}}),t.map((e,t)=>(0,d.jsx)("col",{className:"col-width-control",style:{width:"".concat(e,"%")}},t))]})};R.displayName="ColGroup";let E=e=>{var t;let n=(0,j.FX)(),{node:i,editor:r,getPos:o,decorations:f,updateAttributes:z}=e,{colMinPercent:E,newColSize:_}=r.schema.nodes.table.spec,M=(0,s.cG)(i.attrs.colWidths,_,E),N=l.J3.get(i),T=f.some(e=>e.spec.isFocusedInside),P=null===(t=f.find(e=>e.spec.isColumnSelected))||void 0===t?void 0:t.spec.colNumber,{colWidths:O}=i.attrs,D=(0,S.En)();(0,b.useEffect)(()=>{N.width!==O.length&&setTimeout(()=>{z({colWidths:(0,s.I)(N.width)})},0)},[N.width,O,z]);let F=(0,b.useCallback)(e=>o()+1+N.positionAt(0,e,i),[o,i,N]),H=(0,b.useCallback)(e=>{let t=F(e+1)+1;r.chain().addColumnAfter(e).command(e=>{let{tr:n}=e,i=(0,k.s)(n.doc.resolve(t));return i&&n.setSelection(i),!0}).run()},[r,F]),W=(0,b.useCallback)(()=>{H(N.width-1)},[H,N.width]),B=v()(i.attrs.colWidths.reduce((e,t)=>e+t,0),20);return D?(0,d.jsx)(A.u,{as:"div",...e,...i.attrs,children:(0,d.jsxs)(c.az,{w:"fit-content",overflowX:n?"auto":void 0,position:"relative",width:"100%",className:(0,p.cx)("table-wrapper",w.a0),"data-selection-ring":!0,children:[(0,d.jsxs)("table",{style:{width:n?"max-content":"".concat(B,"%"),minWidth:n?"100%":void 0,maxWidth:n?"200vw":void 0,tableLayout:n?"auto":"fixed",position:"relative"},children:[(0,d.jsx)(R,{cols:N.width,colWidths:O}),(0,d.jsx)("thead",{children:(0,d.jsx)(L,{numColumns:N.width,selectedColumn:P,getColumnPosition:F,...e})}),(0,d.jsx)(a.$p,{as:"tbody",className:"table-content"})]}),(0,d.jsx)(I.A,{...e,"data-testid":"select-table-button",onClick:()=>{let e=F(0);r.chain().focus().selectTable(e).run()},label:x.Ru._({id:"3xRGMR"})}),T&&(0,d.jsxs)(c.az,{contentEditable:!1,suppressContentEditableWarning:!0,children:[(0,d.jsx)(g.Tz,{placement:"right",label:x.Ru._({id:"AgvHni"}),children:(0,d.jsx)(u.$,{position:"absolute",insetInlineStart:"100%",top:"0",height:"100%",onClick:W,onMouseDown:C.Fw,minWidth:"0",width:"auto",isDisabled:!M,zIndex:1,"data-testid":"add-col-end-button",size:"xs",shadow:"sm",variant:"unstyled",color:"var(--body-color)",className:y.Gx,backgroundColor:"var(--clickable-background-color)",marginInlineStart:1,w:5,children:(0,d.jsx)(m.g,{icon:h.QLR})})}),(0,d.jsx)(g.Tz,{placement:"bottom",label:x.Ru._({id:"qZd/ph"}),children:(0,d.jsx)(u.$,{position:"absolute",insetInlineStart:"0",top:"100%",width:"100%",onClick:()=>{let e=o()+1,t=N.height-1,n=N.width-1,a=e+N.positionAt(t,n,i);r.chain().focus(a).addRowAfter().run(),requestAnimationFrame(()=>r.chain().focus(a).goToNextCell().run())},onMouseDown:C.Fw,minHeight:"0",height:6,zIndex:4,"data-testid":"add-row-end-button",size:"xs",shadow:"sm",variant:"unstyled",color:"var(--body-color)",className:y.Gx,mt:1,children:(0,d.jsx)(m.g,{icon:h.QLR})})})]})]})}):null},L=e=>{let{numColumns:t,selectedColumn:n,getColumnPosition:i,...a}=e,{editor:r}=a,o=(0,b.useCallback)(e=>{let t=i(e);r.chain().focus().selectColumn(t).run()},[r,i]);if(!t)return null;let l=Array.from(Array(t).keys());return(0,d.jsxs)("tr",{contentEditable:!1,suppressContentEditableWarning:!0,children:[(0,d.jsx)("th",{style:{padding:0}}),l.map(e=>(0,d.jsx)(_,{colNumber:e,selectColumn:o,isSelected:e===n,...a},e))]})},_=(0,b.memo)(e=>{let{colNumber:t,selectColumn:n,...i}=e,{decorations:a}=i,{colHover:r}=(0,z.L3)(a),{colFocus:o}=(0,z.lF)(a),l=(0,b.useCallback)(()=>n(t),[t,n]);return(0,d.jsx)("th",{style:{position:"relative",padding:0,border:0},className:"table-col-control",children:(0,d.jsx)(I.A,{...i,handlePlacement:"top",label:x.Ru._({id:"K3GOZ1"}),zIndex:"3",isVisible:r===t||o===t,onClick:l,"data-test-column-control":t})},t)});_.displayName="SelectColumnHeader";let M=i.bP.create({name:"table",priority:r.y.Table,containerHandle:!0,addNodeView:()=>(0,a.gu)(E,{update:o.z0}),addOptions:()=>({resizable:!0,handleWidth:10,colMinPercent:10,newColSize:20,lastColumnResizable:!1,allowTableNodeSelection:!0}),content:"tableRow+",tableRole:"table",isolating:!0,allowGapCursor:!1,group:"cardBlock layoutBlock footnoteBlock calloutBlock",parseHTML:()=>[{tag:"table"}],renderHTML(e){let{HTMLAttributes:t}=e;return["table",(0,i.KV)(this.options.HTMLAttributes,t),["tbody",0]]},addAttributes(){let e="colWidths";return{colWidths:{default:[],renderHTML:t=>{let{colWidths:n}=t;return n&&n.length?{[e]:JSON.stringify(n)}:{}},parseHTML:t=>{let n=t.getAttribute(e);if(n)try{let e=JSON.parse(n);if(Array.isArray(e))return(0,s.fF)(e),e}catch(e){}let i=t.querySelector("tr");if(!i)return[];let a=0;return i.childNodes.forEach(e=>{"TD"===e.nodeName&&a++}),(0,s.I)(a)}},fullWidthBlock:{default:!1}}},addCommands(){return{insertTable:function(){let{rows:e=3,cols:t=3,withHeaderRow:n=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i=>{let{dispatch:a,editor:r,commands:o}=i;if(!a)return!1;let l=function(e,t,n,i,a){let r=function(e){if(e.cached.tableNodeTypes)return e.cached.tableNodeTypes;let t={};return Object.keys(e.nodes).forEach(n=>{let i=e.nodes[n];i.spec.tableRole&&(t[i.spec.tableRole]=i)}),e.cached.tableNodeTypes=t,t}(e),o=[],l=[];for(let e=0;e<n;e+=1){let e=r.cell.createAndFill();e&&l.push(e)}let d=[];for(let e=0;e<t;e+=1)d.push(r.row.createChecked(null,i&&0===e?o:l));return r.table.createChecked({colWidths:(0,s.I)(n)},d)}(r.schema,e,t,n);return o.insertContentAndSelect(l.toJSON())}},addColumnBefore:e=>t=>{let{state:n,dispatch:i,tr:a}=t;if(!(0,l.aH)(n.selection)||!i)return!1;let{table:r,tableStart:o}=(0,l._t)(n.selection);return(0,l.cq)(a,{table:r,col:e,tableStart:o,newColSize:this.options.newColSize,colMinPercent:this.options.colMinPercent})},addColumnAfter:e=>t=>{let{state:n,dispatch:i,tr:a}=t;if(!(0,l.aH)(n.selection)||!i)return!1;let{table:r,tableStart:o}=(0,l._t)(n.selection);return(0,l.cq)(a,{table:r,col:e+1,tableStart:o,newColSize:this.options.newColSize,colMinPercent:this.options.colMinPercent})},equalizeColumns:()=>e=>{let{state:t,dispatch:n,tr:i}=e;if(!(0,l.aH)(t.selection)||!n)return!1;let{map:a,tableStart:r}=(0,l._t)(t.selection);return i.setNodeMarkup(r-1,void 0,{colWidths:(0,s.I)(a.width)}),!0},visualizeTable:()=>e=>{let{state:t,dispatch:n,tr:i}=e;if(!(0,l.aH)(t.selection)||!n)return!1;let{map:a,tableStart:r}=(0,l._t)(t.selection);return i.setNodeMarkup(r-1,void 0,{colWidths:(0,s.I)(a.width)}),!0},deleteColumn:()=>e=>{let{state:t,dispatch:n,tr:i}=e;return!!n&&(0,l.Kl)(t.selection,i,n)},addRowBefore:()=>e=>{let{state:t,dispatch:n}=e;return(0,l.JD)(t,n)},addRowAfter:()=>e=>{let{state:t,dispatch:n}=e;return(0,l.gC)(t,n)},deleteRow:()=>e=>{let{state:t,dispatch:n,tr:i}=e;return(0,l.QN)(t.selection,i,n)},deleteTable:()=>e=>{let{state:t,tr:n,dispatch:i}=e;return!!i&&(0,l.CG)(t.selection,n,i)},deleteTableWhenEmpty:()=>e=>{let{state:t,tr:n,dispatch:i}=e;return!!i&&(0,l.lD)(t.selection,n,i)},deleteColWhenEmpty:()=>e=>{let{state:t,tr:n,dispatch:i}=e;return!!i&&(0,l.Tn)(t.selection,n,i)},deleteRowWhenEmpty:()=>e=>{let{state:t,tr:n,dispatch:i}=e;return!!i&&(0,l.rO)(t.selection,n,i)},mergeCells:()=>e=>{let{state:t,dispatch:n}=e;return(0,l.w7)(t,n)},splitCell:()=>e=>{let{state:t,dispatch:n}=e;return(0,l.L0)(t,n)},toggleHeaderColumn:()=>e=>{let{state:t,dispatch:n}=e;return(0,l.Qg)(t,n)},toggleHeaderRow:()=>e=>{let{state:t,dispatch:n}=e;return(0,l.uC)(t,n)},toggleHeaderCell:()=>e=>{let{state:t,dispatch:n}=e;return(0,l._G)(t,n)},mergeOrSplit:()=>e=>{let{state:t,dispatch:n}=e;return!!(0,l.w7)(t,n)||(0,l.L0)(t,n)},setCellAttribute:(e,t)=>n=>{let{state:i,dispatch:a}=n;return(0,l.i4)(e,t)(i,a)},goToNextCell:()=>e=>{let{state:t,dispatch:n}=e;return(0,l.D8)(1)(t,n)},goToPreviousCell:()=>e=>{let{state:t,dispatch:n}=e;return(0,l.D8)(-1)(t,n)},fixTables:()=>e=>{let{state:t,dispatch:n}=e;return n&&(0,l.rP)(t),!0},setCellSelection:e=>t=>{let{tr:n,dispatch:i}=t;if(i){let t=l.rn.create(n.doc,e.anchorCell,e.headCell);n.setSelection(t)}return!0}}},addKeyboardShortcuts(){let e=()=>this.editor.commands.first(e=>{let{commands:t}=e;return[()=>t.deleteTableWhenEmpty(),()=>t.deleteRowWhenEmpty(),()=>t.deleteColWhenEmpty()]});return{Tab:()=>!!this.editor.commands.goToNextCell()||!!this.editor.can().addRowAfter()&&this.editor.chain().addRowAfter().goToNextCell().run(),"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:e,"Mod-Backspace":e,Delete:e,"Mod-Delete":e}},addProseMirrorPlugins(){return this.options.resizable,[(0,l.AL)({handleWidth:this.options.handleWidth,colMinPercent:this.options.colMinPercent,lastColumnResizable:this.options.lastColumnResizable}),(0,l.LF)({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema(e){var t,n;let a={name:e.name,options:e.options,storage:e.storage};return{colMinPercent:null===(t=e.options)||void 0===t?void 0:t.colMinPercent,newColSize:null===(n=e.options)||void 0===n?void 0:n.newColSize,tableRole:(0,i.gk)((0,i.iI)(e,"tableRole",a))}}})},68043:(e,t,n)=>{"use strict";n.d(t,{HT:()=>d,Wz:()=>p,lz:()=>u});var i=n(69e3),a=n(81570),r=n(73686),o=n(37838),l=n(27474),s=n(23988);class d extends a.LN{map(e,t){let n=e.resolve(t.map(this.$anchorCell.pos)),i=e.resolve(t.map(this.$headCell.pos));if((0,s.NH)(n)&&(0,s.NH)(i)&&(0,s.kV)(n,i)){let e=this.$anchorCell.node(-1)!=n.node(-1);return e&&this.isRowSelection()?d.rowSelection(n,i):e&&this.isColSelection()?d.colSelection(n,i):new d(n,i)}return a.U3.between(n,i)}content(){let e=this.$anchorCell.node(-1),t=l.J.get(e),n=this.$anchorCell.start(-1),a=t.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n),r={},o=[];for(let n=a.top;n<a.bottom;n++){let l=[];for(let i=n*t.width+a.left,o=a.left;o<a.right;o++,i++){let n=t.map[i];if(!r[n]){r[n]=!0;let i=t.findCell(n),o=e.nodeAt(n),d=a.left-i.left,c=i.right-a.right;if(d>0||c>0){let e=o.attrs;d>0&&(e=(0,s.Pn)(e,0,d)),c>0&&(e=(0,s.Pn)(e,e.colspan-c,c)),o=i.left<a.left?o.type.createAndFill(e):o.type.create(e,o.content)}if(i.top<a.top||i.bottom>a.bottom){let e=(0,s.ob)(o.attrs,"rowspan",Math.min(i.bottom,a.bottom)-Math.max(i.top,a.top));o=i.top<a.top?o.type.createAndFill(e):o.type.create(e,o.content)}l.push(o)}}o.push(e.child(n).copy(i.FK.from(l)))}let d=this.isColSelection()&&this.isRowSelection()?e:o;return new i.Ji(i.FK.from(d),1,1)}replace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.Ji.empty,n=e.steps.length,r=this.ranges;if(0===t.size){if(this.isSelectingAllCells()){(0,o.CG)(this,e);return}if(this.isRowSelection()){(0,o.QN)(this,e);return}if(this.isColSelection()){(0,o.Kl)(this,e);return}}for(let a=0;a<r.length;a++){let{$from:o,$to:l}=r[a],s=e.mapping.slice(n);e.replace(s.map(o.pos),s.map(l.pos),a?i.Ji.empty:t)}let l=a.LN.findFrom(e.doc.resolve(e.mapping.slice(n).map(this.to)),-1);l&&e.setSelection(l)}replaceWith(e,t){this.replace(e,new i.Ji(i.FK.from(t),0,0))}getTableNode(){return this.$anchorCell.node(-1)}isSelectingAllCells(){return l.J.get(this.$anchorCell.node(-1)).map.length===this.ranges.length}everyCell(e){let t=!0;return this.forEachCell((n,i)=>{e(n,i)||(t=!1)}),t}forEachCell(e){let t=this.$anchorCell.node(-1),n=l.J.get(t),i=this.$anchorCell.start(-1),a=n.cellsInRect(n.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i));for(let n=0;n<a.length;n++)e(t.nodeAt(a[n]),i+a[n])}isColSelection(){let e=this.$anchorCell.index(-1),t=this.$headCell.index(-1);return!(Math.min(e,t)>0)&&Math.max(e+this.$anchorCell.nodeAfter.attrs.rowspan,t+this.$headCell.nodeAfter.attrs.rowspan)==this.$headCell.node(-1).childCount}static colSelection(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=l.J.get(e.node(-1)),i=e.start(-1),a=n.findCell(e.pos-i),r=n.findCell(t.pos-i),o=e.node(0);return a.top<=r.top?(a.top>0&&(e=o.resolve(i+n.map[a.left])),r.bottom<n.height&&(t=o.resolve(i+n.map[n.width*(n.height-1)+r.right-1]))):(r.top>0&&(t=o.resolve(i+n.map[r.left])),a.bottom<n.height&&(e=o.resolve(i+n.map[n.width*(n.height-1)+a.right-1]))),new d(e,t)}isRowSelection(){let e=l.J.get(this.$anchorCell.node(-1)),t=this.$anchorCell.start(-1),n=e.colCount(this.$anchorCell.pos-t),i=e.colCount(this.$headCell.pos-t);return!(Math.min(n,i)>0)&&Math.max(n+this.$anchorCell.nodeAfter.attrs.colspan,i+this.$headCell.nodeAfter.attrs.colspan)==e.width}eq(e){return e instanceof d&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=l.J.get(e.node(-1)),i=e.start(-1),a=n.findCell(e.pos-i),r=n.findCell(t.pos-i),o=e.node(0);return a.left<=r.left?(a.left>0&&(e=o.resolve(i+n.map[a.top*n.width])),r.right<n.width&&(t=o.resolve(i+n.map[n.width*(r.top+1)-1]))):(r.left>0&&(t=o.resolve(i+n.map[r.top*n.width])),a.right<n.width&&(e=o.resolve(i+n.map[n.width*(a.top+1)-1]))),new d(e,t)}toJSON(){return{type:"CellSelection2",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,t){return new d(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;return new d(e.resolve(t),e.resolve(n))}getBookmark(){return new c(this.$anchorCell.pos,this.$headCell.pos)}constructor(e,t=e){let n=e.node(-1),i=l.J.get(n),r=e.start(-1),o=i.rectBetween(e.pos-r,t.pos-r),s=e.node(0),d=i.cellsInRect(o).filter(e=>e!=t.pos-r);d.unshift(t.pos-r);let c=d.map(e=>{let t=n.nodeAt(e),i=e+r+1;return new a.yn(s.resolve(i),s.resolve(i+t.content.size))});super(c[0].$from,c[0].$to,c),this.$anchorCell=e,this.$headCell=t,this.$anchorCell=e,this.$headCell=t}}if(!d.prototype.jsonID)try{a.LN.jsonID("CellSelection2",d)}catch(e){}class c{map(e){return new c(e.map(this.anchor),e.map(this.head))}resolve(e){let t=e.resolve(this.anchor),n=e.resolve(this.head);return"row"==t.parent.type.spec.tableRole&&"row"==n.parent.type.spec.tableRole&&t.index()<t.parent.childCount&&n.index()<n.parent.childCount&&(0,s.kV)(t,n)?new d(t,n):a.LN.near(n,1)}constructor(e,t){this.anchor=e,this.head=t,this.anchor=e,this.head=t}}function u(e){if(!(e.selection instanceof d))return null;let t=[];return e.selection.forEachCell((e,n)=>{t.push(r.NZ.node(n,n+e.nodeSize,{class:"selectedCell"}))}),r.zF.create(e.doc,t)}function p(e,t,n){let i,r;let o=(t||e).selection,s=(t||e).doc;if(o instanceof a.nh&&(r=o.node.type.spec.tableRole)){if("cell"==r||"header_cell"==r)i=d.create(s,o.from);else if("row"==r){let e=s.resolve(o.from+1);i=d.rowSelection(e,e)}else if(!n){let e=l.J.get(o.node),t=o.from+1,n=t+e.map[e.width*e.height-1];i=d.create(s,t+1,n)}}else o instanceof a.U3&&function(e){let{$from:t,$to:n}=e;if(t.pos==n.pos||t.pos<t.pos-6)return!1;let i=t.pos,a=n.pos,r=t.depth;for(;r>=0&&!(t.after(r+1)<t.end(r));r--,i++);for(let e=n.depth;e>=0&&!(n.before(e+1)>n.start(e));e--,a--);return i==a&&/row|table/.test(t.node(r).type.spec.tableRole)}(o)?i=a.U3.create(s,o.from):o instanceof a.U3&&function(e){let t,n,{$from:i,$to:a}=e;for(let e=i.depth;e>0;e--){let n=i.node(e);if("cell"===n.type.spec.tableRole||"header_cell"===n.type.spec.tableRole){t=n;break}}for(let e=a.depth;e>0;e--){let t=a.node(e);if("cell"===t.type.spec.tableRole||"header_cell"===t.type.spec.tableRole){n=t;break}}return t!==n&&0===a.parentOffset}(o)&&(i=a.U3.create(s,o.$from.start(),o.$from.end()));return i&&(t||(t=e.tr)).setSelection(i),t}},37838:(e,t,n)=>{"use strict";n.d(t,{CG:()=>I,D8:()=>z,JD:()=>g,Kl:()=>h,L0:()=>y,QN:()=>f,Qg:()=>S,Tn:()=>L,_G:()=>A,_t:()=>u,cq:()=>p,gC:()=>x,i4:()=>w,lD:()=>R,rO:()=>E,uC:()=>C,w7:()=>b});var i=n(69e3),a=n(81570),r=n(68566),o=n(68043),l=n(75621),s=n(31099),d=n(27474),c=n(23988);function u(e){let t=(0,c.t6)(e),n=t.node(-1),i=t.start(-1),a=d.J.get(n);return{...e instanceof o.HT?a.rectBetween(e.$anchorCell.pos-i,e.$headCell.pos-i):a.findCell(t.pos-i),map:a,table:n,tableStart:i}}function p(e,t){let{tableStart:n,col:i,table:a,colMinPercent:r,newColSize:o=20}=t,u=d.J.get(a),p=i>0?-1:0;(0,c.Ui)(u,a,i+p)&&(p=0==i||i==u.width?null:0);for(let t=0;t<u.height;t++){let r=t*u.width+i;if(i>0&&i<u.width&&u.map[r-1]==u.map[r]){let o=u.map[r],l=a.nodeAt(o);e.setNodeMarkup(e.mapping.map(n+o),void 0,(0,c.uH)(l.attrs,i-u.colCount(o))),t+=l.attrs.rowspan-1}else{let o=null==p?(0,s.e)(a.type.schema).cell:a.nodeAt(u.map[r+p]).type,l=u.positionAt(t,i,a);e.insert(e.mapping.map(n+l),o.createAndFill())}}let{colWidths:h}=a.attrs,m=(0,l.KJ)(h,i,o,r);return h.length===m.length?(e.setMeta("preventDispatch",!0),!1):(e.setNodeMarkup(n-1,void 0,{colWidths:[...m]}),!0)}function h(e,t,n){if(!(0,c.aH)(e))return!1;let i=u(e);if(0==i.left&&i.right==i.map.width)return!1;let r=[];for(let e=i.right-1;!function(e,t,n){let{map:i,tableStart:a,table:r}=t,o=e.mapping.maps.length;for(let t=0;t<i.height;){let l=t*i.width+n,s=i.map[l],d=r.nodeAt(s);if(n>0&&i.map[l-1]==s||n<i.width-1&&i.map[l+1]==s)e.setNodeMarkup(e.mapping.slice(o).map(a+s),void 0,(0,c.Pn)(d.attrs,n-i.colCount(s)));else{let t=e.mapping.slice(o).map(a+s);e.delete(t,t+d.nodeSize)}t+=d.attrs.rowspan}}(t,i,e),r.push(e),e!=i.left;e--)i.table=i.tableStart?t.doc.nodeAt(i.tableStart-1):t.doc,i.map=d.J.get(i.table);let o=(0,l.XC)(i.table.attrs.colWidths,r);if(t.setNodeMarkup(i.tableStart-1,void 0,{colWidths:o}),i.right===i.map.width){let e=i.tableStart+i.map.positionAt(0,i.left-1,i.table),n=t.doc.resolve(e),r=a.LN.near(n);t.setSelection(r)}return n&&n(t),!0}function m(e,t,n){let{map:i,tableStart:a,table:r}=t,o=a;for(let e=0;e<n;e++)o+=r.child(e).nodeSize;let l=[],d=n>0?-1:0;(function(e,t,n){let i=(0,s.e)(t.type.schema).header_cell;for(let a=0;a<e.width;a++)if(t.nodeAt(e.map[a+n*e.width]).type!=i)return!1;return!0})(i,r,n+d)&&(d=0==n||n==i.height?null:0);for(let t=0,o=i.width*n;t<i.width;t++,o++)if(n>0&&n<i.height&&i.map[o]==i.map[o-i.width]){let n=i.map[o],l=r.nodeAt(n).attrs;e.setNodeMarkup(a+n,void 0,(0,c.ob)(l,"rowspan",l.rowspan+1)),t+=l.colspan-1}else{let e=null==d?(0,s.e)(r.type.schema).cell:r.nodeAt(i.map[o+d*i.width]).type;l.push(e.createAndFill())}return e.insert(o,(0,s.e)(r.type.schema).row.create(null,l)),e}function g(e,t){if(!(0,c.aH)(e.selection))return!1;if(t){let n=u(e.selection);t(m(e.tr,n,n.top))}return!0}function x(e,t){if(!(0,c.aH)(e.selection))return!1;if(t){let n=u(e.selection);t(m(e.tr,n,n.bottom))}return!0}function f(e,t,n){if(!(0,c.aH)(e))return!1;let i=u(e);if(0==i.top&&i.bottom==i.map.height)return!1;for(let e=i.bottom-1;!function(e,t,n){let{map:i,table:a,tableStart:r}=t,o=0;for(let e=0;e<n;e++)o+=a.child(e).nodeSize;let l=o+a.child(n).nodeSize,s=e.mapping.maps.length;e.delete(o+r,l+r);for(let t=0,o=n*i.width;t<i.width;t++,o++){let l=i.map[o];if(n>0&&l==i.map[o-i.width]){let n=a.nodeAt(l).attrs;e.setNodeMarkup(e.mapping.slice(s).map(l+r),void 0,(0,c.ob)(n,"rowspan",n.rowspan-1)),t+=n.colspan-1}else if(n<i.width&&l==i.map[o+i.width]){let o=a.nodeAt(l),d=o.type.create((0,c.ob)(o.attrs,"rowspan",o.attrs.rowspan-1),o.content),u=i.positionAt(n+1,t,a);e.insert(e.mapping.slice(s).map(r+u),d),t+=o.attrs.colspan-1}}}(t,i,e),e!=i.top;e--)i.table=i.tableStart?t.doc.nodeAt(i.tableStart-1):t.doc,i.map=d.J.get(i.table);if(i.bottom===i.map.height){let e=i.tableStart+i.map.positionAt(i.top-1,0,i.table),n=t.doc.resolve(e),r=a.LN.near(n);t.setSelection(r)}return n&&n(t),!0}function v(e){let t=e.content;return 1==t.childCount&&t.firstChild.isTextblock&&0==t.firstChild.childCount}function b(e,t){let n=e.selection;if(!(n instanceof o.HT)||n.$anchorCell.pos==n.$headCell.pos)return!1;let a=u(e.selection),{map:r}=a;if(function(e,t){let{width:n,height:i,map:a}=e,r=t.top*n+t.left,o=r,l=(t.bottom-1)*n+t.left,s=r+(t.right-t.left-1);for(let e=t.top;e<t.bottom;e++){if(t.left>0&&a[o]==a[o-1]||t.right<n&&a[s]==a[s+1])return!0;o+=n,s+=n}for(let e=t.left;e<t.right;e++){if(t.top>0&&a[r]==a[r-n]||t.bottom<i&&a[l]==a[l+n])return!0;r++,l++}return!1}(r,a))return!1;if(t){let n=e.tr,l={},s=i.FK.empty,d,u;for(let e=a.top;e<a.bottom;e++)for(let t=a.left;t<a.right;t++){let i=r.map[e*r.width+t],o=a.table.nodeAt(i);if(!l[i]){if(l[i]=!0,null==d)d=i,u=o;else{v(o)||(s=s.append(o.content));let e=n.mapping.map(i+a.tableStart);n.delete(e,e+o.nodeSize)}}}if(n.setNodeMarkup(d+a.tableStart,void 0,(0,c.ob)((0,c.uH)(u.attrs,u.attrs.colspan,a.right-a.left-u.attrs.colspan),"rowspan",a.bottom-a.top)),s.size){let e=d+1+u.content.size,t=v(u)?d+1:e;n.replaceWith(t+a.tableStart,e+a.tableStart,s)}n.setSelection(new o.HT(n.doc.resolve(d+a.tableStart))),t(n)}return!0}function y(e,t){var n;let i=(0,s.e)(e.schema);return(n=e=>{let{node:t}=e;return i[t.type.spec.tableRole]},(e,t)=>{let i,a;let r=e.selection;if(r instanceof o.HT){if(r.$anchorCell.pos!=r.$headCell.pos)return!1;i=r.$anchorCell.nodeAfter,a=r.$anchorCell.pos}else{if(!(i=(0,c.HF)(r.$from)))return!1;a=(0,c.KW)(r.$from).pos}if(1==i.attrs.colspan&&1==i.attrs.rowspan)return!1;if(t){let l,s=i.attrs,d=[],p=s.colwidth;s.rowspan>1&&(s=(0,c.ob)(s,"rowspan",1)),s.colspan>1&&(s=(0,c.ob)(s,"colspan",1));let h=u(e.selection),m=e.tr;for(let e=0;e<h.right-h.left;e++)d.push(p?(0,c.ob)(s,"colwidth",p&&p[e]?[p[e]]:null):s);for(let e=h.top;e<h.bottom;e++){let t=h.map.positionAt(e,h.left,h.table);e==h.top&&(t+=i.nodeSize);for(let a=h.left,r=0;a<h.right;a++,r++)(a!=h.left||e!=h.top)&&m.insert(l=m.mapping.map(t+h.tableStart,1),n({node:i,row:e,col:a}).createAndFill(d[r]))}m.setNodeMarkup(a,n({node:i,row:h.top,col:h.left}),d[0]),r instanceof o.HT&&m.setSelection(new o.HT(m.doc.resolve(r.$anchorCell.pos),l&&m.doc.resolve(l))),t(m)}return!0})(e,t)}function w(e,t){return function(n,i){var a;if(!(0,c.aH)(n.selection))return!1;let r=(0,c.t6)(n.selection);if((null===(a=r.nodeAfter)||void 0===a?void 0:a.attrs[e])===t)return!1;if(i){let a=n.tr;n.selection instanceof o.HT?n.selection.forEachCell((n,i)=>{n.attrs[e]!==t&&a.setNodeMarkup(i,void 0,(0,c.ob)(n.attrs,e,t))}):a.setNodeMarkup(r.pos,void 0,(0,c.ob)(r.nodeAfter.attrs,e,t)),i(a)}return!0}}function j(e,t,n){let i=t.map.cellsInRect({left:0,top:0,right:"row"==e?t.map.width:1,bottom:"column"==e?t.map.height:1});for(let e=0;e<i.length;e++){let a=t.table.nodeAt(i[e]);if(a&&a.type!==n.header_cell)return!1}return!0}function k(e,t){return(t=t||{useDeprecatedLogic:!1}).useDeprecatedLogic?function(t,n){if(!(0,c.aH)(t.selection))return!1;if(n){let i=(0,s.e)(t.schema),a=u(t.selection),r=t.tr,o=a.map.cellsInRect("column"==e?new d.r(a.left,0,a.right,a.map.height):"row"==e?new d.r(0,a.top,a.map.width,a.bottom):a),l=o.map(e=>a.table.nodeAt(e));for(let e=0;e<o.length;e++)l[e].type==i.header_cell&&r.setNodeMarkup(a.tableStart+o[e],i.cell,l[e].attrs);if(0==r.steps.length)for(let e=0;e<o.length;e++)r.setNodeMarkup(a.tableStart+o[e],i.header_cell,l[e].attrs);n(r)}return!0}:function(t,n){if(!(0,c.aH)(t.selection))return!1;if(n){let i=(0,s.e)(t.schema),a=u(t.selection),r=t.tr,o=j("row",a,i),l=j("column",a,i),c=("column"===e?o:"row"===e&&l)?1:0,p="column"==e?new d.r(0,c,1,a.map.height):"row"==e?new d.r(c,0,a.map.width,1):a,h="column"==e?l?i.cell:i.header_cell:"row"==e?o?i.cell:i.header_cell:i.cell;a.map.cellsInRect(p).forEach(e=>{let t=e+a.tableStart,n=r.doc.nodeAt(t);n&&r.setNodeMarkup(t,h,n.attrs)}),n(r)}return!0}}let C=k("row",{useDeprecatedLogic:!0}),S=k("column",{useDeprecatedLogic:!0}),A=k("cell",{useDeprecatedLogic:!0});function z(e){return function(t,n){if(!(0,c.aH)(t.selection))return!1;let i=function(e,t){if(t<0){let t=e.nodeBefore;if(t)return e.pos-t.nodeSize;for(let t=e.index(-1)-1,n=e.before();t>=0;t--){let i=e.node(-1).child(t);if(i.childCount)return n-1-i.lastChild.nodeSize;n-=i.nodeSize}}else{if(e.index()<e.parent.childCount-1)return e.pos+e.nodeAfter.nodeSize;let t=e.node(-1);for(let n=e.indexAfter(-1),i=e.after();n<t.childCount;n++){let e=t.child(n);if(e.childCount)return i+1;i+=e.nodeSize}}}((0,c.t6)(t.selection),e);if(null==i)return!1;if(n){let e=t.doc.resolve(i);n(t.tr.setSelection(a.U3.between(e,(0,c.fx)(e))).scrollIntoView())}return!0}}function I(e,t,n){let i=e.$anchor;for(let e=i.depth;e>0;e--)if("table"==i.node(e).type.spec.tableRole){t.delete(i.before(e),i.after(e)).scrollIntoView();let a=(0,r.i)(t);return a&&t.setSelection(a),n&&n(t),!0}return!1}let R=(e,t,n)=>e instanceof o.HT&&!!(e.isSelectingAllCells()&&e.everyCell(v))&&I(e,t,n),E=(e,t,n)=>!!(e instanceof o.HT&&e.isRowSelection())&&!!e.everyCell(v)&&f(e,t,n),L=(e,t,n)=>!!(e instanceof o.HT&&e.isColSelection())&&!!e.everyCell(v)&&h(e,t,n)},77583:(e,t,n)=>{"use strict";n.d(t,{rn:()=>a.HT,J3:()=>o.J,cq:()=>U.cq,gC:()=>U.gC,JD:()=>U.JD,AL:()=>D,Tn:()=>U.Tn,Kl:()=>U.Kl,QN:()=>U.QN,rO:()=>U.rO,CG:()=>U.CG,lD:()=>U.lD,rP:()=>d,D8:()=>U.D8,aH:()=>l.aH,w7:()=>U.w7,_t:()=>U._t,i4:()=>U.i4,L0:()=>U.L0,LF:()=>K,_G:()=>U._G,Qg:()=>U.Qg,uC:()=>U.uC});var i=n(81570),a=n(68043),r=n(31099),o=n(27474),l=n(23988);let s=new i.hs("fix-tables");function d(e,t){let n,i=(t,i)=>{"table"==t.type.spec.tableRole&&(n=function(e,t,n,i){let a,d;let c=o.J.get(t);if(!c.problems)return i;i||(i=e.tr);let u=[];for(let e=0;e<c.height;e++)u.push(0);for(let e=0;e<c.problems.length;e++){let a=c.problems[e];if("collision"==a.type){let e=t.nodeAt(a.pos);for(let t=0;t<e.attrs.rowspan;t++)u[a.row+t]+=a.n;i.setNodeMarkup(i.mapping.map(n+1+a.pos),void 0,(0,l.Pn)(e.attrs,e.attrs.colspan-a.n,a.n))}else if("missing"==a.type)u[a.row]+=a.n;else if("overlong_rowspan"==a.type){let e=t.nodeAt(a.pos);i.setNodeMarkup(i.mapping.map(n+1+a.pos),void 0,(0,l.ob)(e.attrs,"rowspan",e.attrs.rowspan-a.n))}else if("colwidth mismatch"==a.type){let e=t.nodeAt(a.pos);i.setNodeMarkup(i.mapping.map(n+1+a.pos),void 0,(0,l.ob)(e.attrs,"colwidth",a.colwidth))}}for(let e=0;e<u.length;e++)u[e]&&(null==a&&(a=e),d=e);for(let o=0,l=n+1;o<c.height;o++){let n=t.child(o),s=l+n.nodeSize,c=u[o];if(c>0){let t="cell";n.firstChild&&(t=n.firstChild.type.spec.tableRole);let u=[];for(let n=0;n<c;n++)u.push((0,r.e)(e.schema)[t].createAndFill());let p=(0==o||a==o-1)&&d==o?l+1:s-1;i.insert(i.mapping.map(p),u)}l=s}return i.setMeta(s,{fixTables:!0})}(e,t,i,n))};return t?t.doc!=e.doc&&function e(t,n,i,a){let r=t.childCount,o=n.childCount;e:for(let l=0,s=0;l<o;l++){let o=n.child(l);for(let e=s,n=Math.min(r,l+3);e<n;e++)if(t.child(e)==o){s=e+1,i+=o.nodeSize;continue e}a(o,i),s<r&&t.child(s).sameMarkup(o)?e(t.child(s),o,i+1,a):o.nodesBetween(0,o.content.size,a,i+1),i+=o.nodeSize}}(t.doc,e.doc,0,i):e.doc.descendants(i),n}var c=n(84396),u=n(69e3),p=n(11329);function h(e,t){let n=e.createAndFill();return new p.dL(n).replace(0,n.content.size,t).doc}function m(e,t,n,i,a,r,o,s){if(0==o||o==t.height)return!1;let d=!1;for(let c=a;c<r;c++){let a=o*t.width+c,r=t.map[a];if(t.map[a-t.width]==r){d=!0;let a=n.nodeAt(r),{top:u,left:p}=t.findCell(r);e.setNodeMarkup(e.mapping.slice(s).map(r+i),void 0,(0,l.ob)(a.attrs,"rowspan",o-u)),e.insert(e.mapping.slice(s).map(t.positionAt(o,p,n)),a.type.createAndFill((0,l.ob)(a.attrs,"rowspan",u+a.attrs.rowspan-o))),c+=a.attrs.colspan-1}}return d}function g(e,t,n,i,a,r,o,s){if(0==o||o==t.width)return!1;let d=!1;for(let c=a;c<r;c++){let a=c*t.width+o,r=t.map[a];if(t.map[a-1]==r){d=!0;let a=n.nodeAt(r),u=t.colCount(r),p=e.mapping.slice(s).map(r+i);e.setNodeMarkup(p,void 0,(0,l.Pn)(a.attrs,o-u,a.attrs.colspan-(o-u))),e.insert(p+a.nodeSize,a.type.createAndFill((0,l.Pn)(a.attrs,0,o-u))),c+=a.attrs.rowspan-1}}return d}function x(e,t,n,i,l){let s=n?e.doc.nodeAt(n-1):e.doc,d=o.J.get(s),{top:c,left:p}=i,h=p+l.width,x=c+l.height,f=e.tr,v=0;function b(){s=n?f.doc.nodeAt(n-1):f.doc,d=o.J.get(s),v=f.mapping.maps.length}(function(e,t,n,i,a,o,l){let s,d;let c=e.doc.type.schema,p=(0,r.e)(c);if(a>t.width)for(let r=0,o=0;r<t.height;r++){let l=n.child(r);o+=l.nodeSize;let c=[],u=null==l.lastChild||l.lastChild.type==p.cell?s||(s=p.cell.createAndFill()):d||(d=p.header_cell.createAndFill());for(let e=t.width;e<a;e++)c.push(u);e.insert(e.mapping.slice(0).map(o-1+i),c)}if(o>t.height){let r=[];for(let e=0,i=(t.height-1)*t.width;e<Math.max(t.width,a);e++){let a=!(e>=t.width)&&n.nodeAt(t.map[i+e]).type==p.header_cell;r.push(a?d||(d=p.header_cell.createAndFill()):s||(s=p.cell.createAndFill()))}let l=p.row.create(null,u.FK.from(r)),c=[];for(let e=t.height;e<o;e++)c.push(l);e.insert(e.mapping.slice(0).map(i+n.nodeSize-2),c)}return!!(s||d)})(f,d,s,n,h,x,0)&&b(),m(f,d,s,n,p,h,c,v)&&b(),m(f,d,s,n,p,h,x,v)&&b(),g(f,d,s,n,c,x,p,v)&&b(),g(f,d,s,n,c,x,h,v)&&b();for(let e=c;e<x;e++){let t=d.positionAt(e,p,s),i=d.positionAt(e,h,s);f.replace(f.mapping.slice(v).map(t+n),f.mapping.slice(v).map(i+n),new u.Ji(l.rows[e-c],0,0))}b(),f.setSelection(new a.HT(f.doc.resolve(n+d.positionAt(c,p,s)),f.doc.resolve(n+d.positionAt(x-1,h-1,s)))),t(f)}let f=(0,c.K)({ArrowLeft:b("horiz",-1),ArrowRight:b("horiz",1),ArrowUp:b("vert",-1),ArrowDown:b("vert",1),"Shift-ArrowLeft":y("horiz",-1),"Shift-ArrowRight":y("horiz",1),"Shift-ArrowUp":y("vert",-1),"Shift-ArrowDown":y("vert",1),Backspace:w,"Mod-Backspace":w,Delete:w,"Mod-Delete":w});function v(e,t,n){return!n.eq(e.selection)&&(t&&t(e.tr.setSelection(n).scrollIntoView()),!0)}function b(e,t){return(n,r,o)=>{let s=n.selection;if(s instanceof a.HT)return v(n,r,i.LN.near(s.$headCell,t));if("horiz"!=e&&!s.empty)return!1;let d=C(o,e,t);if(null==d)return!1;if("horiz"==e)return v(n,r,i.LN.near(n.doc.resolve(s.head+t),t));{let a=n.doc.resolve(d),o=(0,l.oD)(a,e,t),s;return s=o?i.LN.near(o,1):t<0?i.LN.near(n.doc.resolve(a.before(-1)),-1):i.LN.near(n.doc.resolve(a.after(-1)),1),v(n,r,s)}}}function y(e,t){return(n,i,r)=>{let o=n.selection;if(!(o instanceof a.HT)){let i=C(r,e,t);if(null==i)return!1;o=new a.HT(n.doc.resolve(i))}let s=(0,l.oD)(o.$headCell,e,t);return!!s&&v(n,i,new a.HT(o.$anchorCell,s))}}function w(e,t){let n=e.selection;if(!(n instanceof a.HT))return!1;if(t){let i=e.tr,a=(0,r.e)(e.schema).cell.createAndFill().content;n.forEachCell((e,t)=>{e.content.eq(a)||i.replace(i.mapping.map(t+1),i.mapping.map(t+e.nodeSize-1),new u.Ji(a,0,0))}),i.docChanged&&t(i)}return!0}function j(e,t,n){if(!(0,l.aH)(e.state.selection))return!1;let i=function(e){if(!e.size)return null;let{content:t,openStart:n,openEnd:i}=e;for(;1==t.childCount&&(n>0&&i>0||"table"==t.firstChild.type.spec.tableRole);)n--,i--,t=t.firstChild.content;let a=t.firstChild,o=a.type.spec.tableRole,l=a.type.schema,s=[];if("row"==o)for(let e=0;e<t.childCount;e++){let a=t.child(e).content,o=e?0:Math.max(0,n-1),d=e<t.childCount-1?0:Math.max(0,i-1);(o||d)&&(a=h((0,r.e)(l).row,new u.Ji(a,o,d)).content),s.push(a)}else{if("cell"!=o&&"header_cell"!=o)return null;s.push(n||i?h((0,r.e)(l).row,new u.Ji(t,n,i)).content:t)}return function(e,t){let n=[];for(let e=0;e<t.length;e++){let i=t[e];for(let t=i.childCount-1;t>=0;t--){let{rowspan:a,colspan:r}=i.child(t).attrs;for(let t=e;t<e+a;t++)n[t]=(n[t]||0)+r}}let i=0;for(let e=0;e<n.length;e++)i=Math.max(i,n[e]);for(let a=0;a<n.length;a++)if(a>=t.length&&t.push(u.FK.empty),n[a]<i){let o=(0,r.e)(e).cell.createAndFill(),l=[];for(let e=n[a];e<i;e++)l.push(o);t[a]=t[a].append(u.FK.from(l))}return{height:t.length,width:i,rows:t}}(l,s)}(n),s=e.state.selection;if(s instanceof a.HT){i||(i={width:1,height:1,rows:[u.FK.from(h((0,r.e)(e.state.schema).cell,n))]});let t=s.$anchorCell.node(-1),a=s.$anchorCell.start(-1),d=o.J.get(t).rectBetween(s.$anchorCell.pos-a,s.$headCell.pos-a);return i=function(e,t,n){let{width:i,height:a,rows:r}=e;if(i!=t){let e=[],n=[];for(let i=0;i<r.length;i++){let a=r[i],o=[];for(let n=e[i]||0,r=0;n<t;r++){let s=a.child(r%a.childCount);n+s.attrs.colspan>t&&(s=s.type.create((0,l.Pn)(s.attrs,s.attrs.colspan,n+s.attrs.colspan-t),s.content)),o.push(s),n+=s.attrs.colspan;for(let t=1;t<s.attrs.rowspan;t++)e[i+t]=(e[i+t]||0)+s.attrs.colspan}n.push(u.FK.from(o))}r=n,i=t}if(a!=n){let e=[];for(let t=0,i=0;t<n;t++,i++){let o=[],s=r[i%a];for(let e=0;e<s.childCount;e++){let i=s.child(e);t+i.attrs.rowspan>n&&(i=i.type.create((0,l.ob)(i.attrs,"rowspan",Math.max(1,n-i.attrs.rowspan)),i.content)),o.push(i)}e.push(u.FK.from(o))}r=e,a=n}return{width:i,height:a,rows:r}}(i,d.right-d.left,d.bottom-d.top),x(e.state,e.dispatch,a,d,i),!0}if(!i)return!1;{let t=(0,l.t6)(e.state.selection),n=t.start(-1);return x(e.state,e.dispatch,n,o.J.get(t.node(-1)).findCell(t.pos-n),i),!0}}function k(e,t){var n;let i;if(t.ctrlKey||t.metaKey)return!1;let r=S(e,t.target);if(t.shiftKey&&e.state.selection instanceof a.HT)o(e.state.selection.$anchorCell,t),t.preventDefault();else if(t.shiftKey&&r&&null!=(i=(0,l.KW)(e.state.selection.$anchor))&&(null===(n=A(e,t))||void 0===n?void 0:n.pos)!=i.pos)o(i,t),t.preventDefault();else if(!r)return!1;function o(t,n){let i=A(e,n),r=null==l.dX.getState(e.state);if(!i||!(0,l.kV)(t,i)){if(!r)return!1;i=t}let o=new a.HT(t,i);if(r||!e.state.selection.eq(o)){let n=e.state.tr.setSelection(o);r&&n.setMeta(l.dX,t.pos),e.dispatch(n)}}function s(){e.root.removeEventListener("mouseup",s),e.root.removeEventListener("dragstart",s),e.root.removeEventListener("mousemove",d),null!=l.dX.getState(e.state)&&e.dispatch(e.state.tr.setMeta(l.dX,-1))}function d(n){let i=l.dX.getState(e.state),a;if(null!=i)a=e.state.doc.resolve(i);else if(S(e,n.target)!=r&&!(a=A(e,t)))return s();a&&o(a,n)}return e.root.addEventListener("mouseup",s),e.root.addEventListener("dragstart",s),e.root.addEventListener("mousemove",d),!1}function C(e,t,n){if(!(e.state.selection instanceof i.U3))return null;let{$head:a}=e.state.selection;for(let i=a.depth-1;i>=0;i--){let r=a.node(i);if((n<0?a.index(i):a.indexAfter(i))!=(n<0?0:r.childCount))break;if("cell"==r.type.spec.tableRole||"header_cell"==r.type.spec.tableRole){let r=a.before(i),o="vert"==t?n>0?"down":"up":n>0?"right":"left";return e.endOfTextblock(o)?r:null}}return null}function S(e,t){for(;t&&t!=e.dom;t=t.parentNode)if("TD"==t.nodeName||"TH"==t.nodeName)return t}function A(e,t){let n=e.posAtCoords({left:t.clientX,top:t.clientY});return n&&n?(0,l.KW)(e.state.doc.resolve(n.pos)):null}var z=n(119),I=n.n(z),R=n(73686),E=n(64130),L=n(26374),_=n(3583),M=n(54107),N=n(96712);let T=new i.hs("tableColumnResizing");class P{getActiveHandleAbs(e){return null===this.activeHandle?null:(0,N.d_)(e,this.activeHandle)}reset(){return this.activeHandle=null,this.dragging=null,this}setHandle(e,t){if(null===t.setHandle)return this.activeHandle=null,this;let n=_.pJ.getState(e);if(!n)return this;let{type:i,binding:a}=n;return this.activeHandle=(0,M.Bw)(t.setHandle,i,a.mapping),this}setDragging(e){return this.dragging=e.setDragging,this}apply(e,t){let n=e.getMeta(T);return n&&"setHandle"in n?this.setHandle(t,n):n&&"setDragging"in n?this.setDragging(n):n&&"reset"in n?this.reset():this}constructor(e=null,t=null){this.activeHandle=e,this.dragging=t}}var O=n(75621);function D(){let{handleWidth:e=5,colMinPercent:t=10,lastColumnResizable:n=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new i.k_({key:T,state:{init:()=>new P,apply:(e,t,n,i)=>t.apply(e,i)},props:{attributes:e=>null!==T.getState(e).getActiveHandleAbs(e)?{class:"resize-cursor"}:{class:""},handleDOMEvents:{mousemove:(t,i)=>((function(e,t,n,i){if(!e.editable)return;let a=T.getState(e.state);if(a.dragging)return;let r=function(e){for(;e&&"TD"!=e.nodeName&&"TH"!=e.nodeName;)e=e.classList.contains("ProseMirror")?null:e.parentNode;return e}(t.target),o=null;if(r){let i=(0,E.ix)(),{left:a,right:l}=r.getBoundingClientRect();i?l-t.clientX<=n?o=F(e,t,"left"):t.clientX-a<=n&&(o=F(e,t,"right")):t.clientX-a<=n?o=F(e,t,"left"):l-t.clientX<=n&&(o=F(e,t,"right"))}o===a.getActiveHandleAbs(e.state)||!i&&null!==o&&B(e.state.doc.resolve(o))||H(e,o)})(t,i,e,n),!1),mouseleave:e=>((function(e){let t=T.getState(e.state);null===t.getActiveHandleAbs(e.state)||t.dragging||H(e,null)})(e),!1),mousedown:(e,n)=>((function(e,t,n){if(!e.editable)return;let a=T.getState(e.state),r=a.getActiveHandleAbs(e.state);if(null===r||a.dragging)return 0;let o=e.state.doc.resolve(r),l=o.node(-1),s=o.start(-1),d=[...l.attrs.colWidths],c=W(o),u=function(e,t){let n=e.domAtPos(t),i=e.domAtPos(t).node;for(;"TABLE"!=i.nodeName;)i=i.parentNode;return n.node.childNodes[n.offset].scrollWidth}(e,r),p=V(e,o),h=G(e,o),m=e.state.doc.resolve(r+2);e.state.selection.from>s&&e.state.selection.from<s+l.nodeSize||e.dispatch(e.state.tr.setSelection(i.LN.findFrom(m,1)));let g={setDragging:{startX:t.clientX,startWidth:u,colWidths:d,tableWidth:h,colIndex:c}};e.dispatch(e.state.tr.setMeta(T,g));let x=null;function f(t){window.removeEventListener("mouseup",f),window.removeEventListener("mousemove",v);let n=T.getState(e.state);if(n.dragging){if(null===x){e.dispatch(e.state.tr.setMeta(T,{setDragging:null}));return}if(n.dragging)try{let t=n.getActiveHandleAbs(e.state);(function(e,t,n){let i=e.state.doc.resolve(t).before(-1),a=e.state.tr;e.dispatch(a.setNodeMarkup(i,void 0,{colWidths:[...n]}).setMeta("annotationEvent",{type:"update-node-attrs",pos:i}))})(e,t,x),e.dispatch(e.state.tr.setMeta(T,{setDragging:null}))}catch(t){e.dispatch(e.state.tr.setMeta(T,{reset:!0}))}x=null}}function v(t){if(!t.which)return f(t);let i=T.getState(e.state),a=i.getActiveHandleAbs(e.state);if(!i.dragging||null===a)return;let{colIndex:r,colWidths:o}=i.dragging,l=function(e,t){let{tableWidth:n}=e,i=t.clientX-e.startX,a=(0,E.ix)()?-i:i;return I()(100*a/n,2)}(i.dragging,t);(function(e,t,n){let i=e.state.doc.resolve(t),a=V(e,i).querySelectorAll("colgroup > col.col-width-control");n.forEach((e,t)=>{a.item(t).style.width="".concat(e,"%")})})(e,a,x=(0,O.H0)(o,r,l,n)),(0,L.i$)(p)}window.addEventListener("mouseup",f),window.addEventListener("mousemove",v),t.preventDefault()})(e,n,t),!1)},decorations(e){let t=T.getState(e).getActiveHandleAbs(e);if(null!==t)return function(e,t){let n=[];try{let i=e.doc.resolve(t),a=i.node(-1),r=o.J.get(a),l=i.start(-1),s=r.colCount(i.pos-l)+i.nodeAfter.attrs.colspan;for(let e=0;e<r.height;e++){let t=s+e*r.width-1;if((s==r.width||r.map[t]!=r.map[t+1])&&(0==e||r.map[t-1]!=r.map[t-1-r.width])){let e=r.map[t],i=l+e+a.nodeAt(e).nodeSize-1,o=document.createElement("div");o.className="column-resize-handle",n.push(R.NZ.widget(i,o))}}return R.zF.create(e.doc,n)}catch(e){return console.error("(caught) columnResizing error: ".concat(e.message)),R.zF.empty}}(e,t)},nodeViews:{}}})}function F(e,t,n){let i=e.posAtCoords({left:t.clientX,top:t.clientY});if(!i)return null;let{inside:a}=i,r=(0,l.KW)(e.state.doc.resolve(a+1));if(!r)return null;if("right"===n)return r.pos;let s=o.J.get(r.node(-1)),d=r.start(-1),c=s.map.indexOf(r.pos-d);return c%s.width==0?null:d+s.map[c-1]}function H(e,t){e.dispatch(e.state.tr.setMeta(T,{setHandle:t}))}let W=e=>{let t=e.node(-1),n=o.J.get(t),i=e.start(-1);return n.colCount(e.pos-i)},B=e=>{let t=e.node(-1),n=o.J.get(t);return W(e)===n.width-1},V=(e,t)=>{let n=e.domAtPos(t.start(-1)).node;for(;"TABLE"!=n.nodeName;)n=n.parentNode;return n},G=(e,t)=>V(e,t).scrollWidth;var U=n(37838);function K(){let{allowTableNodeSelection:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new i.k_({key:l.dX,state:{init:()=>null,apply(e,t){let n=e.getMeta(l.dX);if(null!=n)return -1==n?null:n;if(null==t||!e.docChanged)return t;let{deleted:i,pos:a}=e.mapping.mapResult(t);return i?null:a}},props:{decorations:a.lz,handleDOMEvents:{mousedown:k},createSelectionBetween:e=>null!=l.dX.getState(e.state)?e.state.selection:null,handleKeyDown:f,handlePaste:j},appendTransaction:(t,n,i)=>(0,a.Wz)(i,d(i,n),e)})}},31099:(e,t,n)=>{"use strict";function i(e){let t=e.cached.tableNodeTypes;if(!t)for(let n in t=e.cached.tableNodeTypes={},e.nodes){let i=e.nodes[n],a=i.spec.tableRole;a&&(t[a]=i)}return t}n.d(t,{e:()=>i})},27474:(e,t,n)=>{"use strict";let i,a;if(n.d(t,{J:()=>o,r:()=>r}),"undefined"!=typeof WeakMap){let e=new WeakMap;i=t=>e.get(t),a=(t,n)=>(e.set(t,n),n)}else{let e=[],t=0;i=t=>{for(let n=0;n<e.length;n+=2)if(e[n]==t)return e[n+1]},a=(n,i)=>(10==t&&(t=0),e[t++]=n,e[t++]=i)}class r{constructor(e,t,n,i){this.left=e,this.top=t,this.right=n,this.bottom=i}}class o{findCell(e){for(let t=0;t<this.map.length;t++){let n=this.map[t];if(n!=e)continue;let i=t%this.width,a=t/this.width|0,o=i+1,l=a+1;for(let e=1;o<this.width&&this.map[t+e]==n;e++)o++;for(let e=1;l<this.height&&this.map[t+this.width*e]==n;e++)l++;return new r(i,a,o,l)}throw RangeError("No cell with offset "+e+" found")}firstRowCells(){return this.map.slice(0,this.width)}firstColCells(){return this.map.filter((e,t)=>t%this.width==0)}colCount(e){for(let t=0;t<this.map.length;t++)if(this.map[t]==e)return t%this.width;throw RangeError("No cell with offset "+e+" found")}nextCell(e,t,n){let{left:i,right:a,top:r,bottom:o}=this.findCell(e);return"horiz"==t?(n<0?0==i:a==this.width)?null:this.map[r*this.width+(n<0?i-1:a)]:(n<0?0==r:o==this.height)?null:this.map[i+this.width*(n<0?r-1:o)]}rectBetween(e,t){let{left:n,right:i,top:a,bottom:o}=this.findCell(e),{left:l,right:s,top:d,bottom:c}=this.findCell(t);return new r(Math.min(n,l),Math.min(a,d),Math.max(i,s),Math.max(o,c))}cellsInRect(e){let t=[],n={};for(let i=e.top;i<e.bottom;i++)for(let a=e.left;a<e.right;a++){let r=i*this.width+a,o=this.map[r];n[o]||(n[o]=!0,a==e.left&&a&&this.map[r-1]==o||i==e.top&&i&&this.map[r-this.width]==o||t.push(o))}return t}positionAt(e,t,n){for(let i=0,a=0;;i++){let r=a+n.child(i).nodeSize;if(i==e){let n=t+e*this.width,i=(e+1)*this.width;for(;n<i&&this.map[n]<a;)n++;return n==i?r-1:this.map[n]}a=r}}static get(e){return i(e)||a(e,function(e){if("table"!=e.type.spec.tableRole)throw RangeError("Not a table node: "+e.type.name);let t=function(e){let t=-1,n=!1;for(let i=0;i<e.childCount;i++){let a=e.child(i),r=0;if(n)for(let t=0;t<i;t++){let n=e.child(t);for(let e=0;e<n.childCount;e++){let a=n.child(e);t+a.attrs.rowspan>i&&(r+=a.attrs.colspan)}}for(let e=0;e<a.childCount;e++){let t=a.child(e);r+=t.attrs.colspan,t.attrs.rowspan>1&&(n=!0)}-1==t?t=r:t!=r&&(t=Math.max(t,r))}return t}(e),n=e.childCount,i=[],a=0,r=null,l=[];for(let e=0,a=t*n;e<a;e++)i[e]=0;for(let o=0,s=0;o<n;o++){let d=e.child(o);s++;for(let e=0;;e++){for(;a<i.length&&0!=i[a];)a++;if(e==d.childCount)break;let c=d.child(e),{colspan:u,rowspan:p,colwidth:h}=c.attrs;for(let e=0;e<p;e++){if(e+o>=n){(r||(r=[])).push({type:"overlong_rowspan",pos:s,n:p-e});break}let d=a+e*t;for(let e=0;e<u;e++){0==i[d+e]?i[d+e]=s:(r||(r=[])).push({type:"collision",row:o,pos:s,n:u-e});let n=h&&h[e];if(n){let i=(d+e)%t*2,a=l[i];null==a||a!=n&&1==l[i+1]?(l[i]=n,l[i+1]=1):a==n&&l[i+1]++}}}a+=u,s+=c.nodeSize}let c=(o+1)*t,u=0;for(;a<c;)0==i[a++]&&u++;u&&(r||(r=[])).push({type:"missing",row:o,n:u}),s++}let s=new o(t,n,i,r),d=!1;for(let e=0;!d&&e<l.length;e+=2)null!=l[e]&&l[e+1]<n&&(d=!0);return d&&function(e,t,n){e.problems||(e.problems=[]);for(let i=0,a={};i<e.map.length;i++){let r=e.map[i];if(a[r])continue;a[r]=!0;let o=n.nodeAt(r),l=null;for(let n=0;n<o.attrs.colspan;n++){let a=t[2*((i+n)%e.width)];null==a||o.attrs.colwidth&&o.attrs.colwidth[n]==a||((l||(l=function(e){if(e.colwidth)return e.colwidth.slice();let t=[];for(let n=0;n<e.colspan;n++)t.push(0);return t}(o.attrs)))[n]=a)}l&&e.problems.unshift({type:"colwidth mismatch",pos:r,colwidth:l})}}(s,l,e),s}(e))}constructor(e,t,n,i){this.width=e,this.height=t,this.map=n,this.problems=i}}},23988:(e,t,n)=>{"use strict";n.d(t,{HF:()=>d,KW:()=>s,NH:()=>p,Pn:()=>f,Ui:()=>b,aH:()=>c,dX:()=>l,fx:()=>h,kV:()=>m,oD:()=>g,ob:()=>x,t6:()=>u,uH:()=>v});var i=n(81570),a=n(68043),r=n(31099),o=n(27474);let l=new i.hs("selectingCells");function s(e){for(let t=e.depth-1;t>0;t--)if("row"==e.node(t).type.spec.tableRole)return e.node(0).resolve(e.before(t+1));return null}function d(e){for(let t=e.depth;t>0;t--){let n=e.node(t).type.spec.tableRole;if("cell"===n||"header_cell"===n)return e.node(t)}return null}function c(e){let t=e.$head;for(let e=t.depth;e>0;e--)if("row"==t.node(e).type.spec.tableRole)return!0;return!1}function u(e){return e instanceof a.HT?e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell:e instanceof i.nh&&"cell"==e.node.type.spec.tableRole?e.$anchor:s(e.$head)||function(e){for(let t=e.nodeAfter,n=e.pos;t;t=t.firstChild,n++){let i=t.type.spec.tableRole;if("cell"==i||"header_cell"==i)return e.doc.resolve(n)}for(let t=e.nodeBefore,n=e.pos;t;t=t.lastChild,n--){let i=t.type.spec.tableRole;if("cell"==i||"header_cell"==i)return e.doc.resolve(n-t.nodeSize)}}(e.$head)}function p(e){return"row"==e.parent.type.spec.tableRole&&e.nodeAfter}function h(e){return e.node(0).resolve(e.pos+e.nodeAfter.nodeSize)}function m(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function g(e,t,n){let i=e.start(-1),a=o.J.get(e.node(-1)).nextCell(e.pos-i,t,n);return null==a?null:e.node(0).resolve(i+a)}function x(e,t,n){let i={};for(let t in e)i[t]=e[t];return i[t]=n,i}function f(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=x(e,"colspan",e.colspan-n);return i.colwidth&&(i.colwidth=i.colwidth.slice(),i.colwidth.splice(t,n),i.colwidth.some(e=>e>0)||(i.colwidth=null)),i}function v(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=x(e,"colspan",e.colspan+n);if(i.colwidth){i.colwidth=i.colwidth.slice();for(let e=0;e<n;e++)i.colwidth.splice(t,0,0)}return i}function b(e,t,n){let i=(0,r.e)(t.type.schema).header_cell;for(let a=0;a<e.height;a++)if(t.nodeAt(e.map[n+a*e.width]).type!=i)return!1;return!0}},34095:(e,t,n)=>{"use strict";n.d(t,{hj:()=>i,ht:()=>a});let i=e=>"table"===e.type.name,a=e=>"tableCell"===e.type.name},29362:(e,t,n)=>{"use strict";n.d(t,{R$:()=>l,w_:()=>r,z0:()=>o});var i=n(35002);n(69646);let a=(e,t)=>{let n=e.filter(e=>Object.keys(e.spec).length>0),i=t.filter(e=>Object.keys(e.spec).length>0),a=n.map(e=>JSON.stringify(e.spec)),r=i.map(e=>JSON.stringify(e.spec));return{removed:a.filter(e=>!r.includes(e)),added:r.filter(e=>!a.includes(e))}},r=(e,t)=>{let n=e.filter(e=>Object.keys(e.spec).length>0),i=t.filter(e=>Object.keys(e.spec).length>0);return n.length!==i.length||JSON.stringify(n.map(e=>e.spec))!==JSON.stringify(i.map(e=>e.spec))},o=e=>{let{newNode:t,oldNode:n,updateProps:o,oldDecorations:l,newDecorations:s}=e;if(JSON.stringify(t.attrs)!==JSON.stringify(n.attrs))return o(),!0;if(r(l,s)){if(i.of.get("debugLogging")){let e=a(l,s);console.debug("============== decos ================"),console.debug("decos changed",t.type.name),e.removed.length>0&&console.debug("%c  decos removed: ".concat(e.removed.join(" ")," "),"color: red"),e.added.length>0&&console.debug("%c  decos added:   ".concat(e.added.join(" ")," "),"color: green")}o()}return!0},l=e=>{let{newNode:t,oldNode:n,updateProps:i}=e;return t.content.childCount!==n.content.childCount?(i(),!0):o(e)}},28895:(e,t,n)=>{"use strict";n.d(t,{A:()=>o}),n(14041);var i=n(15576),a=n(71997),r=n(16372);let o=e=>{let{editorId:t,children:n}=e,o=(0,i.l)(),l=(0,a.A)();return(0,r.b)(t||l)&&o?n:null}},41938:(e,t,n)=>{"use strict";n.d(t,{$:()=>s});var i=n(81570),a=n(14041),r=n(71096),o=n(64225),l=n(5933);let s=e=>{let{editor:t,getPos:n}=e,s=(0,o.GV)(l.nD),d=(0,o.GV)(l.Du),c=(0,o.jL)(),{onContextMenu:u,menuProps:p}=(0,r.E)(),{onClose:h,...m}=p;return{onCloseContextMenu:()=>{c((0,l.$n)({open:!1})),h()},onOpenContextMenu:(0,a.useCallback)(e=>{if(s){if(d){e.preventDefault();return}t.view.dispatch(t.view.state.tr.setSelection(i.nh.create(t.view.state.doc,n()))),u(e),c((0,l.$n)({open:!0}))}},[s,d,t.view,n,u,c]),menuProps:m}}},16648:(e,t,n)=>{"use strict";n.d(t,{d:()=>l});var i=n(31085),a=n(20501),r=n(95640),o=n(31948);let l=e=>{let{editor:t,node:n,getPos:l,includeCut:s=!0,imageSrc:d}=e;return[...s?[{key:"cut",label:(0,i.jsx)(r.x6,{id:"cCd8Bs"}),icon:a.XGd,onClick:()=>{let e=l();t.commands.basicCut({from:e,to:e+n.nodeSize})}}]:[],{key:"copy",label:(0,i.jsx)(r.x6,{id:"he3ygx"}),icon:a.jPR,onClick:()=>{let e=l();t.commands.copy({from:e,to:e+n.nodeSize})}},...d?[{key:"copy-image-address",label:(0,i.jsx)(r.x6,{id:"XfEsUn"}),icon:a.CQO,onClick:()=>{navigator.clipboard.writeText(d)}},{key:"open-image-in-new-tab",label:(0,i.jsx)(r.x6,{id:"cOAVCo"}),icon:a.vMs,onClick:()=>{window.open(d,"_blank")}},{key:"download-image",label:(0,i.jsx)(r.x6,{id:"dhu12h"}),icon:a.cbP,onClick:()=>{(0,o.lE)(d)}}]:[]]}},71997:(e,t,n)=>{"use strict";n.d(t,{A:()=>o,Q:()=>r});var i=n(14041);let a=(0,i.createContext)(void 0),r=a.Provider,o=()=>(0,i.useContext)(a)},16372:(e,t,n)=>{"use strict";n.d(t,{b:()=>d,f:()=>s});var i=n(69011),a=n.n(i),r=n(14041);class o{subscribe(e,t){return this.listeners[e]=this.listeners[e]||[],this.listeners[e].push(t),()=>{try{if(!this.listeners[e])return;let n=this.listeners[e].indexOf(t);n>-1&&this.listeners[e].splice(n,1)}catch(e){}}}isRendered(e){return this.renderedMap[e]}onRendered(e){var t;this.renderedMap[e]=!0,null===(t=this.listeners[e])||void 0===t||t.forEach(e=>e())}onEditorUnload(e){this.renderedMap[e]=!1,this.listeners[e]=[]}constructor(){this.renderedMap={main:!1},this.listeners={}}}let l=a()(()=>new o),s=e=>({setEditorRendered:(0,r.useCallback)(()=>{e&&l().onRendered(e)},[e]),onEditorUnload:(0,r.useCallback)(()=>{e&&l().onEditorUnload(e)},[e])}),d=e=>{var t;let[n,i]=(0,r.useState)(void 0===e||null===(t=l().isRendered(e))||void 0===t||t);return(0,r.useEffect)(()=>{if(e)return l().subscribe(e,()=>{i(!0)})},[e]),n}},64162:(e,t,n)=>{"use strict";n.d(t,{t:()=>a});var i=n(2696);let a=()=>(0,i.FX)()?1:1.125},1098:(e,t,n)=>{"use strict";n.d(t,{S:()=>i.S,_:()=>i._});var i=n(16928)},39933:(e,t,n)=>{"use strict";n.d(t,{e:()=>i});let i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id";return{default:null,parseHTML:n=>{let i=n.getAttribute("data-".concat(t));if(i)return i;let a=e();return console.debug("[configureIdAttribute] generating id in parseHTML",a),a}}}},16928:(e,t,n)=>{"use strict";n.d(t,{S:()=>m,_:()=>u});var i=n(56154),a=n(13236),r=n(69e3),o=n(81570),l=n(43873),s=n(11329),d=n(48470),c=n(80245);let u=new o.hs("UniqueAttribute"),p=new Map,h=e=>{let{editor:t,tr:n,node:a,initialValue:r,pos:o,attributeName:l,syncWithFilmstrip:s,pluginKey:d}=e;(s="function"==typeof s?s():!!s)&&!d&&console.error("Cannot sync with filmstrip without plugin key");let c=(()=>{if(t.isThumbnail&&s&&d){var e,n;let t=null===(e=p.get(d))||void 0===e?void 0:e.shift();if(t&&(null===(n=t.type)||void 0===n?void 0:n.name)===a.type.name&&t.pos===o)return console.debug("%c [UniqueAttribute] Reused ".concat(l,' "').concat(t.val,'" for ').concat(a.type.name),"background-color: deeppink",{pos:o}),t.val;i.Cp({message:"Mismatch trying to reuse attribute",attributeName:l,nodeType:a.type,pos:o,existing:t})}return r()})();return!t.isThumbnail&&s&&d&&(p.has(d)||p.set(d,[]),p.get(d).push({type:a.type,val:c,pos:o}),console.debug("%c [UniqueAttribute] Should reuse ".concat(l,' "').concat(c,'" for ').concat(a.type.name),"background-color: deeppink",{pos:o})),n.setNodeMarkup(o,void 0,{...a.attrs,[l]:c}),{node:a,val:c,pos:o}},m=a.YY.create({name:"UniqueAttribute",priority:l.y.UniqueAttribute,addOptions(){return{attributeName:"",pluginKey:new o.hs(this.name),types:[],initialValue:()=>void 0,filterTransaction:null,syncWithFilmstrip:!1}},addGlobalAttributes(){return[{types:this.options.types,attributes:{[this.options.attributeName]:{default:null,parseHTML:e=>this.options.parseHTML?this.options.parseHTML(e):e.getAttribute("data-".concat(this.options.attributeName)),renderHTML:e=>this.options.renderHTML?this.options.renderHTML(e):e[this.options.attributeName]?{["data-".concat(this.options.attributeName)]:e[this.options.attributeName]}:{}}}}]},onCreate(){let{view:e,state:t}=this.editor,{tr:n,doc:i}=t,{types:r,attributeName:o,pluginKey:l,initialValue:s,callback:d}=this.options,c=(0,a.xe)(i,e=>r.includes(e.type.name)&&null===e.attrs[o]).map(e=>{let{node:t,pos:i}=e;return h({editor:this.editor,pos:i,node:t,tr:n,syncWithFilmstrip:!1,initialValue:s,attributeName:o,pluginKey:l})});0!==c.length&&(e.dispatch(n),d&&d(this.editor,c,n.doc))},addProseMirrorPlugins(){let e=!1;return[new o.k_({key:this.options.pluginKey,appendTransaction:(e,t,n)=>{let i=e.some(e=>e.docChanged)&&!t.doc.eq(n.doc),r=this.options.filterTransaction&&e.some(e=>{var t,n;return!(null===(t=(n=this.options).filterTransaction)||void 0===t?void 0:t.call(n,e))});if(!i||r)return;let{tr:o}=n,{types:l,attributeName:p,syncWithFilmstrip:m,initialValue:g,callback:x,pluginKey:f}=this.options,v=function(e,t){let n=new s.dL(e);return t.forEach(e=>{e.steps.forEach(e=>{n.step(e)})}),n}(t.doc,e),{mapping:b}=v,y=(0,c.A)(v),w=[],j=e.some(e=>!0===e.getMeta(u));if(y.forEach(e=>{let t={from:e.newStart,to:e.newEnd},i=(0,a.Nx)(n.doc,t,e=>l.includes(e.type.name)),r=function(e){let t=e.filter((t,n)=>e.indexOf(t)!==n);return(0,d.A)(t)}(i.map(e=>{let{node:t}=e;return t.attrs[p]}).filter(e=>null!==e));i.forEach(e=>{var t;let{node:n,pos:i}=e,a=null===(t=o.doc.nodeAt(i))||void 0===t?void 0:t.attrs[p];if(!a){w.push(h({editor:this.editor,pos:i,node:n,tr:o,syncWithFilmstrip:m,initialValue:g,attributeName:p,pluginKey:f}));return}let{deleted:l}=b.invert().mapResult(i),s=l&&r.includes(a),d=l&&j;if(s||d){let e=h({editor:this.editor,pos:i,node:n,tr:o,syncWithFilmstrip:m,initialValue:g,attributeName:p,pluginKey:f});w.push(e),console.debug("%c [UniqueAttribute][".concat(this.options.types,"] Replaced ").concat(n.attrs[p]," with new val: ").concat(e.val),"background-color: deeppink",{override:d,newNode:s})}})}),x&&x(this.editor,w,o.doc),o.steps.length)return o},props:{handleDOMEvents:{drop:(t,n)=>{var i,a;return((null===(i=t.dragging)||void 0===i?void 0:i.move)!==!0||(null===(a=n.dataTransfer)||void 0===a?void 0:a.effectAllowed)==="copy")&&(e=!0),!1},paste:()=>(e=!0,!1)},transformPasted:t=>{var n;if(!e)return t;let{types:i,attributeName:a}=this.options,o=e=>{let t=[];return e.forEach(e=>{if(e.isText){t.push(e);return}if(!i.includes(e.type.name)){t.push(e.copy(o(e.content)));return}let n=e.type.create({...e.attrs,[a]:null},o(e.content),e.marks);t.push(n)}),r.FK.from(t)},l=this.options.transformPasted?this.options.transformPasted(t,this.options,null===this||void 0===this?void 0:null===(n=this.editor)||void 0===n?void 0:n.gammaDocId):new r.Ji(o(t.content),t.openStart,t.openEnd);return e=!1,l}}})]}})},20392:(e,t,n)=>{"use strict";n.d(t,{K:()=>a});var i=n(13236);n(14041);class a extends i.KE{constructor(...e){super(...e),this.contentComponent=null}}},5893:(e,t,n)=>{"use strict";n.d(t,{$:()=>s});var i=n(31085),a=n(14041),r=n(43144);let o=e=>{let{renderers:t}=e;return(0,i.jsx)(i.Fragment,{children:Object.entries(t).map(e=>{let[t,n]=e;return r.createPortal(n.reactElement,n.element,t)})})};class l extends a.Component{componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){let{editor:e}=this.props;if(e&&e.options.element){if(e.contentComponent)return;let t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=this,e.createNodeViews(),this.initialized=!0}}maybeFlushSync(e){this.initialized?(0,r.flushSync)(e):e()}setRenderer(e,t){this.maybeFlushSync(()=>{this.setState(n=>{let{renderers:i}=n;return{renderers:{...i,[e]:t}}})})}removeRenderer(e){this.maybeFlushSync(()=>{this.setState(t=>{let{renderers:n}=t,i={...n};return delete i[e],{renderers:i}})})}componentWillUnmount(){let{editor:e}=this.props;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),e.contentComponent=null,!e.options.element.firstChild))return;let t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){let{editor:e,portalComponent:t,...n}=this.props;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{ref:this.editorContentRef,...n}),(0,i.jsx)(this.portalComponent,{renderers:this.state.renderers})]})}constructor(e){super(e),this.editorContentRef=a.createRef(),this.initialized=!1,this.portalComponent=e.portalComponent||o,this.state={renderers:{}}}}let s=a.memo(l)},87487:(e,t,n)=>{"use strict";n.d(t,{V:()=>o});var i=n(31085),a=n(14041),r=n(95186);let o=a.forwardRef((e,t)=>{let{onDragStart:n}=(0,r.c)(),a=e.as||"div";return(0,i.jsx)(a,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...e.style}})})},90768:(e,t,n)=>{"use strict";n.d(t,{L:()=>c,g:()=>u});var i=n(31085),a=n(13236),r=n(69e3);n(14041);var o=n(44507),l=n(18924),s=n(80915),d=n(95186);class c extends a.Yv{stopEvent(e){return"contextmenu"!==e.type&&a.Yv.prototype.stopEvent.call(this,e)}updateAttributes(e){this.editor.commands.command(t=>{let{tr:n}=t,i=this.getPos();if(void 0===i)return;let a={type:"move",insertPos:i,insertPosRaw:i,pos:i,end:i+this.node.content.size+1};try{n.setNodeMarkup(i,void 0,{...this.node.attrs,...e}).setMeta("annotationEvent",a)}catch(e){console.error("(caught) [ReactNodeView updateAttributes]: setNodeMarkup",e)}return!0})}mount(){var e=this;let t={editor:this.editor,node:this.node,decorations:this.decorations,selected:!1,extension:this.extension,getPos:()=>this.getPos(),updateAttributes:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.updateAttributes(t)},deleteNode:()=>this.deleteNode()};if(!this.component.displayName){let e;this.component.displayName=(e=this.extension.name).charAt(0).toUpperCase()+e.substring(1)}let n=e=>{let t=this.component,n=this.onDragStart.bind(this);return(0,i.jsx)(d.e.Provider,{value:{onDragStart:n,nodeViewContentRef:e=>{e&&this.contentDOMElement&&e.firstChild!==this.contentDOMElement&&e.appendChild(this.contentDOMElement)},node:this.node,editor:this.editor,getPos:this.getPos},children:(0,i.jsx)(t,{...e})})};n.displayName="ReactNodeView",this.contentDOMElement=this.node.isLeaf?null:document.createElement(this.node.isInline||this.node instanceof r.CU?"span":"div"),this.contentDOMElement&&(this.contentDOMElement.style.whiteSpace="inherit",this.contentDOMElement.setAttribute("data-node-view-content-inner",this.node.type.name));let a=this.node.isInline?"span":"div";this.options.as&&(a=this.options.as);let{className:o=""}=this.options;this.renderer=new s.N(n,{editor:this.editor,props:t,as:a,className:"node-".concat(this.node.type.name," ").concat(o).trim(),updateWrapperEl:this.options.updateWrapperEl})}get dom(){var e;if(this.renderer.element.firstElementChild&&!(null===(e=this.renderer.element.firstElementChild)||void 0===e?void 0:e.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.contentDOMElement}update(e,t){let n=e=>{this.renderer.updateProps(e)};if(e.type!==this.node.type)return!1;if("function"==typeof this.options.update){let i=this.node,a=this.decorations;return this.node=e,this.decorations=t,this.options.update({oldNode:i,oldDecorations:a,newNode:e,newDecorations:t,updateProps:()=>n({node:e,decorations:t})})}return e===this.node&&this.decorations===t||(this.node=e,this.decorations=t,n({node:e,decorations:t}),!0)}selectNode(){this.renderer.updateProps({selected:!0})}deselectNode(){this.renderer.updateProps({selected:!1})}destroy(){this.renderer.destroy(),this.contentDOMElement=null}ignoreMutation(e){return!this.dom||!this.contentDOM||"function"==typeof this.options.ignoreMutation&&this.options.ignoreMutation({mutation:e})||this.defaultIgnoreMutation(e)}defaultIgnoreMutation(e){return!!(this.node.isLeaf||this.node.isAtom||"selection"===e.type&&e.target.closest("[data-comments-wrapper]"))||!("selection"===e.type||this.dom.contains(e.target)&&"childList"===e.type&&(0,o.OF)()&&this.editor.isFocused&&[...Array.from(e.addedNodes),...Array.from(e.removedNodes)].every(e=>e.isContentEditable))&&(this.contentDOM===e.target&&"attributes"===e.type||!this.contentDOM.contains(e.target))}onDragStart(e){let t=e.target,n=t.querySelector("[data-drag-handle]");if(n||(n=t.closest("[data-drag-handle]")),!this.dom||!n)return e.preventDefault(),!1;try{let t=this.editor.view.posAtDOM(n,0);if(!t||-1==t||!this.editor.state.doc.nodeAt(t))return;(0,l.b)(this.editor,e,t,n)}catch(e){console.warn("(caught) [ReactNodeViewRenderer] onDragStart error moving annotations",e)}}}function u(e,t){return n=>n.editor.contentComponent?new c(e,n,t):{}}},80915:(e,t,n)=>{"use strict";n.d(t,{N:()=>a});var i=n(31085);n(14041);class a{render(){var e,t,n;let a=this.component,r=this.props;("function"==typeof a&&a.prototype&&a.prototype.isReactComponent||"object"==typeof a&&(null===(n=a.$$typeof)||void 0===n?void 0:n.toString())==="Symbol(react.forward_ref)")&&(r.ref=e=>{this.ref=e}),this.reactElement=(0,i.jsx)(a,{...r}),this.updateWrapperEl&&this.updateWrapperEl(this.element,r),null===(t=this.editor)||void 0===t||null===(e=t.contentComponent)||void 0===e||e.setRenderer(this.id,this)}updateProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.props={...this.props,...e},this.render()}destroy(){var e,t;null===(t=this.editor)||void 0===t||null===(e=t.contentComponent)||void 0===e||e.removeRenderer(this.id)}constructor(e,{editor:t,props:n={},as:i="div",className:a="",updateWrapperEl:r}){this.ref=null,this.id=Math.floor(0xffffffff*Math.random()).toString(),this.component=e,this.editor=t,this.props=n,this.updateWrapperEl=r,this.element=document.createElement(i),this.element.classList.add("react-renderer"),a&&this.element.classList.add(...a.split(" ")),this.render()}}},25845:(e,t,n)=>{"use strict";n.d(t,{f:()=>r});var i=n(81570),a=n(90768);let r=(e,t)=>new i.k_({key:new i.hs("".concat(e.name,"_markview")),props:{nodeViews:{[e.name]:(n,i,r,o)=>(0,a.g)(t,{as:"span"})({editor:e.editor,node:n,getPos:r,decorations:o,extension:{name:e.name,type:e.type.name,options:e.options,storage:e.storage},HTMLAttributes:{}})}}})},58599:(e,t,n)=>{"use strict";n.d(t,{$Z:()=>i.$,$p:()=>d,VR:()=>u.V,Lz:()=>a.L,gu:()=>a.g,hG:()=>p.h}),n(20392);var i=n(5893),a=n(90768),r=n(31085);n(14041);var o=n(82257),l=n(74346),s=n(95186);let d=e=>(0,o.oR)()?(0,r.jsx)(l.$,{...e}):(0,r.jsx)(c,{...e}),c=e=>{let t=e.as||"div",{nodeViewContentRef:n}=(0,s.c)();return(0,r.jsx)(t,{...e,ref:n,"data-node-view-content":"",style:{whiteSpace:"pre-wrap",...e.style}})};c.displayName="NodeViewContentCore";var u=n(87487),p=n(24935)},24935:(e,t,n)=>{"use strict";n.d(t,{h:()=>o});var i=n(14041),a=n(20392);let r=()=>{},o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.useMemo)(()=>(r(),new a.K(e)),[]),n=function(){let[,e]=(0,i.useState)(0);return()=>e(e=>e+1)}();return(0,i.useEffect)(()=>{let e=!0;return t.on("transaction",()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{e&&n()})})}),()=>{t.destroy(),e=!1}},[t]),t}},95186:(e,t,n)=>{"use strict";n.d(t,{c:()=>r,e:()=>a});var i=n(14041);let a=(0,i.createContext)({onDragStart:void 0}),r=()=>(0,i.useContext)(a)},68062:(e,t,n)=>{"use strict";n.d(t,{F:()=>i});let i={'&[contenteditable="true"]':{"&:focus-within":{".ProseMirror-gapcursor":{display:"block",height:"1.5em",position:"relative","&:after":{width:"0px",height:"100%",borderTop:"0px",borderLeft:"1px solid black"}},".grid-cell":{".ProseMirror-gapcursor:first-child":{marginTop:"1em"},".ProseMirror-gapcursor:last-child":{marginBottom:"1em"}},".block-table td":{".ProseMirror-gapcursor:first-child":{marginTop:".75em"},".ProseMirror-gapcursor:last-child":{marginBottom:".75em"}},".is-dark":{".ProseMirror-gapcursor:after":{borderLeftColor:"white"}}}},".collaboration-cursor__caret":{position:"relative",marginLeft:"-1px",marginRight:"-1px",borderLeft:"1px solid #0d0d0d",borderRight:"1px solid #0d0d0d",wordBreak:"normal",pointerEvents:"none",textIndent:0},".collaboration-cursor__label":{position:"absolute",top:"-1.4em",left:"-1px",fontSize:"12px",fontStyle:"normal",fontFamily:"'Inter', sans-serif",fontWeight:"600",lineHeight:"normal",letterSpacing:"normal",textTransform:"none",userSelect:"none",color:"#0d0d0d",padding:"0.1rem 0.3rem",borderRadius:"3px 3px 3px 0",whiteSpace:"nowrap",zIndex:1,pointerEvents:"auto",spellCheck:"false",_hover:{opacity:.1}},'&[contenteditable="false"]':{".ProseMirror-gapcursor":{display:"none"},".collaboration-cursor__caret:not(.streaming-cursor)":{display:"none"}}}},65053:(e,t,n)=>{"use strict";n.d(t,{q:()=>C});var i=n(15428),a=n(28302);let r="transparent",o=(0,i.i7)({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),l=(0,i.i7)({"0%":{opacity:.5,color:"var(--chakra-colors-trueblue-500)"},"100%":{opacity:1,color:"inherit"}}),s={".autocomplete-loading":{display:"inline-block",borderColor:"currentColor",borderStyle:"solid",borderRadius:"99999px",borderWidth:"2px",borderBottomColor:r,borderLeftColor:r,animation:"".concat(o," ").concat("0.45s"," linear infinite"),width:"var(--spinner-size)",height:"var(--spinner-size)","--spinner-size":"1em",marginLeft:"0.25em",color:"var(--chakra-colors-trueblue-500)"},".autocomplete-inserted":{animation:"".concat(l," ").concat(a.B,"ms ease-out")}};var d=n(44507),c=n(63955);let u="%23553bff",p={backgroundRepeat:"no-repeat",backgroundSize:"11px",backgroundPosition:"8px center",fontSize:"13px",fontWeight:"bold",color:"var(--chakra-colors-trueblue-400)",position:"absolute",zIndex:1,top:"0px",left:"0px",backgroundColor:"var(--chakra-colors-trueblue-100)",padding:"4px 12px",paddingLeft:"24px",borderRadius:"0 0 4px 4px",pointerEvents:"none"},h={".block-card":{transitionProperty:"opacity",transitionDuration:"normal"},".ai-generate-streaming-card":{"&.node-card":{pointerEvents:(0,d.Xb)()?void 0:"none !important"},"&.node-card > [data-node-view-wrapper] > .card-wrapper > .card-body":{_before:{content:"''",position:"absolute",inset:"0px",zIndex:1,boxShadow:"0px 0px 0px 5px var(--chakra-colors-trueblue-100)",borderRadius:"inherit",pointerEvents:"none"}},".streaming-cursor__label":{_after:{...p,backgroundImage:'/**/url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512" fill="'.concat(u,'">\x3c!--! Font Awesome Pro 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --\x3e<path d="M245.8 45.9C241.9 37.4 233.4 32 224 32s-17.9 5.4-21.8 13.9L142.7 174.7 13.9 234.2C5.4 238.1 0 246.6 0 256s5.4 17.9 13.9 21.8l128.8 59.5 59.5 128.8c3.9 8.5 12.4 13.9 21.8 13.9s17.9-5.4 21.8-13.9l59.5-128.8 128.8-59.5c8.5-3.9 13.9-12.4 13.9-21.8s-5.4-17.9-13.9-21.8L305.3 174.7 245.8 45.9z"/></svg>\')'),content:"var(--ai-generating-label)"}}},"&.sal-active":{".block-card:not(.sal-active-card, .sal-active-card-parent, .buddy-edit-deck)":{opacity:.5},".sal-active-card > [data-node-view-wrapper] > .card-wrapper > .card-body":{_before:{content:"''",position:"absolute",inset:"0px",zIndex:1,boxShadow:"0px 0px 0px 5px var(--chakra-colors-trueblue-100)",borderRadius:"inherit",pointerEvents:"none"},_after:{...p,backgroundImage:'/**/url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 512 512" fill="'.concat(u,'">\x3c!--! Font Awesome Pro 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --\x3e<path d="M327.5 85.2c-4.5 1.7-7.5 6-7.5 10.8s3 9.1 7.5 10.8L384 128l21.2 56.5c1.7 4.5 6 7.5 10.8 7.5s9.1-3 10.8-7.5L448 128l56.5-21.2c4.5-1.7 7.5-6 7.5-10.8s-3-9.1-7.5-10.8L448 64 426.8 7.5C425.1 3 420.8 0 416 0s-9.1 3-10.8 7.5L384 64 327.5 85.2zM205.1 73.3c-2.6-5.7-8.3-9.3-14.5-9.3s-11.9 3.6-14.5 9.3L123.3 187.3 9.3 240C3.6 242.6 0 248.3 0 254.6s3.6 11.9 9.3 14.5l114.1 52.7L176 435.8c2.6 5.7 8.3 9.3 14.5 9.3s11.9-3.6 14.5-9.3l52.7-114.1 114.1-52.7c5.7-2.6 9.3-8.3 9.3-14.5s-3.6-11.9-9.3-14.5L257.8 187.4 205.1 73.3zM384 384l-56.5 21.2c-4.5 1.7-7.5 6-7.5 10.8s3 9.1 7.5 10.8L384 448l21.2 56.5c1.7 4.5 6 7.5 10.8 7.5s9.1-3 10.8-7.5L448 448l56.5-21.2c4.5-1.7 7.5-6 7.5-10.8s-3-9.1-7.5-10.8L448 384l-21.2-56.5c-1.7-4.5-6-7.5-10.8-7.5s-9.1 3-10.8 7.5L384 384z"/></svg>\')'),content:"var(--ai-editing-label)",left:"50%",transform:"translate(-50%,0px)"}},".sal-active-card-parent":{".block:not(.sal-active-card)":{opacity:.5},".sal-active-card":{".block":{opacity:1}}},".sal-selection-text":{backgroundColor:"rgba(100, 100, 100, 0.25)",...c.wd}}};var m=n(68062),g=n(81700);let x=".125em",f="scale(1.05)",v={transitionDuration:"slow",transitionTimingFunction:"ease-out"},b=".comments-wrapper, .block-comments-circle",y="> :is(".concat(b,")"),w="> :not(".concat(b,"), [data-spotlight-parent] > *"),j=e=>{let t=e?.2:.65;return{"&.react-renderer > [data-node-view-wrapper]":{[w]:{transitionProperty:"filter, transform",...v,filter:"opacity(".concat(t,") blur(").concat(e?x:"0",")")},[y]:{transitionProperty:"opacity",...v,filter:"opacity(".concat(t,")  blur(").concat(e?x:"0",")"),"&[data-is-popup-open=true]":{filter:"none"},_hover:{filter:"none"}}},"&:not(.react-renderer)":{transitionProperty:"filter, transform",...v,filter:"opacity(".concat(t,")  blur(").concat(e?x:"0",")")}}},k={"[data-spotlight-dim]":{opacity:.2},".spotlightable":{...j(!1),transitionProperty:"filter, transform",...v,cursor:"pointer"},".spotlightable:hover":{transform:f},".spotlightable.after-spotlight":j(!0),".spotlightable.spotlight-block, .spotlight-block .spotlightable":{"&.react-renderer > [data-node-view-wrapper]":{[w]:{opacity:"1",filter:"none",transform:"".concat(f," !important")},[y]:{filter:"none"}},"&:not(.react-renderer)":{filter:"none",transform:"".concat(f," !important")}}},C={...s,".ProseMirror":{"&.spotlight-active":k,...h,".block-card":{transitionProperty:"opacity",transitionDuration:"normal"},"&.card-notes-active":{".block-card:not(.card-notes-active-parent-card)":{opacity:.5},".card-notes-active-parent-card .block-card":{opacity:"revert"},".card-notes-active-parent-card > [data-node-view-wrapper] > .card-wrapper > .card-body":{_before:{content:"''",position:"absolute",inset:"0px",zIndex:1,boxShadow:"0px 0px 0px 5px var(--chakra-colors-trueblue-100)",borderRadius:"inherit",pointerEvents:"none"}}},...m.F,...g.p,".card-present-mode":{"&--doc":{transform:"translateY(0)",position:"relative",zIndex:1},"&--presentCollapsed":{transform:"translateY(0)",position:"relative",zIndex:1},"&--presentPrev":{transform:"translateY(-100%)",position:"fixed",zIndex:2},"&--presentCurrent":{transform:"translateY(0)","@media print":{transform:"none"},position:"fixed",zIndex:3},"&--presentNext":{transform:"translateY(100%)",position:"fixed",zIndex:2},"&--presentParent":{transform:"translateY(0)",position:"fixed",zIndex:2}},".document-content.is-doc-mode":{".card-wrapper":{"&:hover":{".card-divider":{opacity:1},".manage-card-controls":{opacity:1}}}},".document-content":{".card-wrapper":{"&:hover":{".card-footer-reactions":{opacity:1},".card-collapsed":{".card-footer-reactions":{display:"none"}}}}}},".ProseMirror-dropcursor":{transitionProperty:"inset",transitionDuration:"fast",borderRadius:"md",position:"relative",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:"white",outline:"1px solid",outlineColor:"whiteAlpha.800",pointerEvents:"none",backdropFilter:"blur(4px)","&::after":{backgroundColor:"gray.700",color:"whiteAlpha.900",px:"8px",py:"2px",borderRadius:"sm",fontWeight:"medium",shadow:"md",fontSize:"sm",w:"max-content",pointerEvents:"none",display:"none"},'&[data-type="column"]::after':{content:'"Drop to add column"',position:"absolute",top:"-2em",display:"block"}}}},38888:(e,t,n)=>{"use strict";n.d(t,{WI:()=>s,X0:()=>d});var i=n(33795),a=n(11081);let r=[...Array(i.uw+1).keys()],o="1.6em",l=["disc","circle","square"],s=e=>({listStyle:l[e%l.length],paddingStart:"0.4em",_after:{ps:"0.4em"},marginStart:"calc(".concat(e+1," * ").concat(o," - 0.4em)")}),d={[a.UX]:{margin:"0",marginBottom:a.X8,textAlign:"start","&.first-block":{marginTop:a.X8}},"ol.block-numbered":{listStyle:"none"},".block-todo":{listStyle:"none","label.chakra-checkbox":{pointerEvents:"none",".chakra-checkbox__control":{pointerEvents:"auto",width:"1em",height:"1em",top:"0.3em",position:"relative",borderRadius:"var(--box-border-radius)",borderColor:"var(--link-color)",borderWidth:"0.125em","&[data-checked]":{backgroundColor:"var(--link-color)",color:"var(--body-color-inverted)"},svg:{fontSize:"0.5em"}}}},".block-bullet, .block-todo":{li:{position:"relative"}}};r.forEach(e=>{d['ol.block-numbered[indent="'.concat(e,'"]')]={"li[data-node-view-content]":{ms:"calc(".concat(e+1," * ").concat(o,")"),position:"relative",_before:{position:"absolute","inset-inline-start":"-".concat(o),content:'attr(data-list-counter) "."'}}}}),r.forEach(e=>{d['ul.block-bullet[indent="'.concat(e,'"]')]={"li[data-node-view-content]":s(e)},d['ul.block-todo[indent="'.concat(e,'"]')]={"li.todo":{ms:"calc(".concat(e+1," * ").concat(o,")"),listStyle:"none"},".chakra-checkbox__control":{"inset-inline-start":"-".concat(o)}}})},81700:(e,t,n)=>{"use strict";n.d(t,{p:()=>i});let i={".is-selecting-node, .sal-selection-node, .sal-selection-card":{"[data-selection-ring]":{_before:{content:'""',position:"absolute",inset:0,borderRadius:"inherit",outline:"2px solid",outlineColor:"trueblue.300",pointerEvents:"none",zIndex:1}},'[data-selection-ring="inside"]':{_before:{zIndex:10,outlineOffset:"-2px"}},'[data-selection-ring="padded"]':{_before:{outlineOffset:"0.25em"}},".react-renderer [data-selection-ring]":{_before:{content:"none"}}},".is-selecting-around":{"[data-selection-background]":{_after:{content:'""',position:"absolute",inset:0,backgroundColor:"var(--chakra-ring-color)",borderRadius:"inherit",opacity:.75}},".react-renderer:not(.is-selecting-around) [data-selection-ring]":{_after:{content:"none"}}}}},40201:(e,t,n)=>{"use strict";n.d(t,{Lo:()=>o,V6:()=>l});var i=n(13236),a=n(57267);let r=new Set(["bullet","numbered","todo","title","heading","paragraph","image","blockquote","embed","video"]),o=(e,t)=>{if(r.has(e.type.name)){let n={type:"card",content:[e.toJSON()]},r=(0,a.C)().map(e=>(null==t?void 0:t.includes(e.name))?e instanceof i.CU?e.extend({renderHTML:()=>["span",0]}):e.extend({renderHTML:()=>""}):e);return(0,i.Zx)(n||{},r)}return""},l=(e,t)=>{if(r.has(e.type.name)){let n={type:"card",content:[e.toJSON()]},r=(0,a.C)().map(e=>(null==t?void 0:t.includes(e.name))?(i.CU,e.extend({renderText:()=>""})):e);return(0,i.Df)(n||{},r)}return""}},18924:(e,t,n)=>{"use strict";n.d(t,{b:()=>l});var i=n(81570),a=n(64130),r=n(44507),o=n(17119);let l=(e,t,n,r)=>{let{view:l,state:d}=e;if(!t.dataTransfer||!r&&!(r=e.view.domAtPos(n).node))return;let{previewElement:c,xOffset:u,yOffset:p}=s(r,n,e);t.dataTransfer.clearData(),t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text/html",r.innerHTML),t.dataTransfer.setData("text/plain",r.textContent||"");let{width:h}=c.getBoundingClientRect(),m=(0,a.ix)()?h-u:u;t.dataTransfer.setDragImage(c,m,p);let g=i.nh.create(d.doc,n),x=g.content();l.dispatch(l.state.tr.setSelection(g)),l.dragging={slice:x,move:!0};let f=(0,o.Vo)({pos:n,editor:e,from:g.from,to:g.to});f&&requestAnimationFrame(()=>{var e;null!==(e=l.dragging)&&void 0!==e&&e.annotations||null===l.dragging||"object"!=typeof l.dragging||(l.dragging.annotations=f)})},s=(e,t,n)=>{let i=(()=>{let i=e.querySelector("[data-drag-preview]");return i&&n.view.posAtDOM(i,0)===t?i:e})(),{contentReference:a,scalePreview:o}=i.dataset,l=0,s=0;if((0,r.H8)()&&a){let[e,t]=a.split(",").map(parseFloat);isNaN(e)||isNaN(t)||(l=e,s=t)}if(d(),o){var c;let e=null!==(c=i.parentElement)&&void 0!==c?c:document.body;(i=i.cloneNode(!0)).dataset.isPreviewElement="1",i.style.position="absolute",i.style.bottom="-100vh",i.style.left="-100vw",e.appendChild(i);let{width:t,height:n}=i.getBoundingClientRect();(t>n?t:n)>250&&(i.style.maxWidth="".concat(250,"px"),i.style.maxHeight="".concat(250,"px"),i.style.aspectRatio="".concat(t,"/").concat(n)),document.addEventListener("drop",d,{once:!0}),document.addEventListener("dragend",d,{once:!0}),document.addEventListener("mouseup",d,{once:!0})}return{previewElement:i,xOffset:l,yOffset:s}},d=()=>{for(let t of document.querySelectorAll("[data-is-preview-element]")){var e;null===(e=t.parentNode)||void 0===e||e.removeChild(t)}}},22574:(e,t,n)=>{"use strict";n.d(t,{I:()=>i});let i=e=>{var t;let{mutation:n}=e;return!!("attributes"===n.type&&(null===(t=n.attributeName)||void 0===t?void 0:t.startsWith("data-")))}},96712:(e,t,n)=>{"use strict";n.d(t,{GB:()=>s,JO:()=>r,d_:()=>o,w8:()=>l});var i=n(3583),a=n(54107);let r=(e,t)=>{let n=i.pJ.getState(e);if(!n)return null;let{type:r,binding:o}=n;return n.binding?(0,a.Bw)(t,r,o.mapping):null},o=(e,t)=>{let n=i.pJ.getState(e);if(!n)return null;let{doc:r,type:o,binding:l}=n;return n.binding?(0,a.bL)(r,o,t,l.mapping):null},l=(e,t)=>({from:r(e,t.from),to:r(e,t.to)}),s=(e,t)=>{if(!t.from||!t.to)return null;let n=o(e,t.from),i=o(e,t.to);return null==n||null==i?null:{from:n,to:i}}},45864:(e,t,n)=>{"use strict";n.d(t,{J:()=>l});var i=n(69e3),a=n(81570),r=n(20277),o=n(68566);class l extends a.LN{map(e,t){let{deleted:n,pos:i}=t.mapResult(this.anchor),r=e.resolve(i);return n?(0,o.n)(r)||a.LN.near(r):new l(r,this.side)}content(){return new i.Ji(i.FK.from(this.node),0,0)}eq(e){return e instanceof l&&e.anchor===this.anchor&&e.side===this.side}toJSON(){return{type:"presentation",anchor:this.anchor,side:this.side}}createSelectionNear(){let e=this.side<1?1:-1;return(0,r.s)(this.$from,e)||a.LN.near(this.$from)}static fromJSON(e,t){if("number"!=typeof t.anchor)throw RangeError("Invalid input for PresentationSelection.fromJSON");return new l(e.resolve(t.anchor))}static create(e,t,n){return new l(e.resolve(t),n)}static isSelectable(e){return!e.isText&&!1!==e.type.spec.selectable}constructor(e,t=0){let n=e.nodeAfter;super(e,e.node(0).resolve(e.pos+n.nodeSize)),this.node=n,this.side=t}}if(l.prototype.visible=!1,!l.prototype.jsonID)try{a.LN.jsonID("presentation",l)}catch(e){}},20277:(e,t,n)=>{"use strict";n.d(t,{s:()=>function e(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{doc:o}=t,l=n<0;if(!t.nodeAfter)return null;if(t.nodeAfter.inlineContent)return a.LN.near(o.resolve(t.pos+(l?t.nodeAfter.content.size+1:0)),n);let s=(0,i.xe)(t.nodeAfter,e=>e.inlineContent||!r&&a.nh.isSelectable(e));if(!s||0===s.length)return a.nh.create(o,t.pos);let d=t.start(t.depth+1)+(l?s[s.length-1].pos:s[0].pos);return e(o.resolve(d),n)},t:()=>o});var i=n(13236),a=n(81570),r=n(11329);let o=(e,t)=>{var n;let i;let a=e.doc,o=e.steps.length-1,l=e.steps[o];if(!l||!(l instanceof r.Ln||l instanceof r.Wg)||0===l.slice.content.size)return null;let s=t||(null===(n=l.slice.content.child(l.slice.openStart))||void 0===n?void 0:n.type.name);if(e.mapping.maps[o].forEach((e,t,n)=>{null==i&&(i=n)}),null==i)return null;let d=a.nodeAt(i);if(d&&d.type.name===s)return a.resolve(i);if(!s)return console.warn("[getInsertedNodePos] Error selecting node, type not found in slice.lastChild",i),null;for(let t=l.from;t<e.mapping.map(l.to);t++){let n=e.doc.nodeAt(t);if(n&&n.type.name===s)return a.resolve(t)}return null}},68566:(e,t,n)=>{"use strict";n.d(t,{i:()=>u,n:()=>c});var i=n(14139),a=n(81570),r=n(11329);let o=(e,t,n)=>t&&a.nh.isSelectable(t)?a.nh.create(e,n):null,l=(e,t,n)=>t&&t.inlineContent?a.U3.create(e,n):null;function s(e,t,n){return e&&n?n:e&&t?t:!e&&t?t:!e&&n?n:null}function d(e,t){let{doc:n,pos:r,parent:d,nodeAfter:c,nodeBefore:u}=e;if(d.inlineContent)return a.U3.create(n,r);let p=t>0,h=s(p,l(n,u,r-1),l(n,c,r+1));if(h)return h;if(i.n.valid(e))return new i.n(e);if(d.type.spec.isolating){let t=s(p,o(n,u,r-((null==u?void 0:u.nodeSize)||0)),o(n,c,r));if(t)return t;if(0===d.childCount&&a.nh.isSelectable(d))return a.nh.create(n,e.before())}return null}function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=d(e,t);if(n)return n;for(let n=e.depth-1;n>=0&&!e.node(n+1).type.spec.isolating;n--){let i=t<0?e.before(n+1):e.after(n+1),a=d(e.doc.resolve(i),t);if(a)return a}return null}let u=(e,t)=>{let n;let i=e.steps.length-1,a=e.steps[i];return a instanceof r.Ln||a instanceof r.Wg?(e.mapping.maps[i].forEach((e,t,i,a)=>{null==n&&(n=a)}),null==n)?null:c(e.doc.resolve(n),t):null}},387:(e,t,n)=>{"use strict";n.d(t,{LP:()=>a,Xq:()=>l,he:()=>r,kz:()=>o});var i=n(3583);let a=e=>{let t=e.getMeta(i.pJ);return(null==t?void 0:t.isChangeOrigin)===!0},r=e=>a(e)&&!l(e),o=e=>!r(e),l=e=>{var t;return null===(t=e.getMeta(i.pJ))||void 0===t?void 0:t.isUndoRedoOperation}},13487:(e,t,n)=>{"use strict";n.d(t,{RE:()=>h,p0:()=>m,wX:()=>x});var i=n(54107),a=n(13236),r=n(93584),o=n(70734),l=n.n(o),s=n(3668),d=n.n(s),c=n(76285);n(56848);var u=n(57267);let p=e=>{"card"===e.type&&e.attrs&&delete e.attrs.id},h=e=>{let t=e=>{var n;return null===(n=e.content)||void 0===n?void 0:n.map(e=>{if(!e.content)return e;let n={...e,attrs:{...e.attrs}};return p(n),n.content=t(n),n})};return p(e),Object.assign({},e,{content:t(e)})},m=e=>{let t=(0,u.C)(),n=(0,a._w)(t),o=(0,i.Tg)(n,e,"default"),l=(0,c.PR)(o);return(0,r.SM)(l)},g=(e,t)=>!!(d()(e)&&d()(t))||void 0,x=(e,t)=>{let n=(0,i.Tg)(e.schema,e.getJSON(),"default"),a=(0,i.vK)(n,"default"),r=(0,i.Tg)(e.schema,t,"default"),o=(0,i.vK)(r,"default");return l()(a,o,g)}},56632:(e,t,n)=>{"use strict";n.d(t,{UG:()=>ep,lN:()=>ex});var i=n(45363),a=n(31085),r=n(25420),o=n(7499),l=n(15428),s=n(14041),d=n(57882),c=n(62313),u=n(19098),p=n(64444),h=n(93185),m=n(74727),g=n(12917),x=n(12327);let f=s.createContext({});function v(){return s.useContext(f)}var b=n(80532),y=n(9021),w=n(2600),j=n(22218),k=n(15672),C=n(80853),S=n(95640);let A={src:"/_next/static/media/transparent-background.ccc186e7.png"},z={[i.JM.White]:"#f0f1f3",[i.JM.Gray]:"#788492",[i.JM.Green]:"#36b24d",[i.JM.Blue]:"#1c7ed6",[i.JM.Violet]:"#7746f1",[i.JM.Red]:"#ff2133",[i.JM.Orange]:"#ff9433",[i.JM.Yellow]:"#ffc936"},I=e=>e.appState.currentStyle,R=e=>e.document.pageStates[e.appState.currentPageId].selectedIds,E=e=>e.settings.isDarkMode?"dark":"light",L=e=>{let{style:t,colorMode:n}=e;return(0,a.jsx)(b.az,{backgroundColor:t.isFilled?i.gA.fills[n][t.color]:void 0,backgroundImage:t.isFilled?void 0:A.src,backgroundSize:"4em",borderColor:i.gA.strokes[n][t.color],borderWidth:"2px",h:"1em",w:"1em",borderRadius:"md"})},_=Object.keys(i.gA.defaultTextStyle),M=(e,t)=>{let{page:n}=e,i={};if(t.length<=0)return{};{let e=new Set([]);t.map(e=>n.shapes[e]).forEach(t=>{_.forEach(n=>{if(!e.has(n)){if(void 0===i[n])i[n]=t.style[n];else{if(i[n]===t.style[n])return;e.add(n)}}})}),e.forEach(e=>{delete i[e]})}return i},N=()=>{let e=v(),t=e.useStore(E),n=e.useStore(I),r=e.useStore(R),o=M(e,r),l={...n,...o};return(0,a.jsxs)(u.A,{trigger:"hover",children:[(0,a.jsx)(p.W,{children:(0,a.jsx)(y.K,{icon:(0,a.jsx)(L,{style:l,colorMode:t}),variant:"ghost",size:"sm","aria-label":""})}),(0,a.jsx)(h.h,{w:"fit-content",bg:"#F9FAFBFA",p:4,children:(0,a.jsxs)(w.T,{spacing:2,align:"flex-start",children:[(0,a.jsx)(j.l,{children:(0,a.jsx)(S.x6,{id:"TuM2Yu"})}),(0,a.jsx)(k.r,{columns:2,spacing:2,children:[!0,!1].map(n=>(0,a.jsx)(C.$,{leftIcon:(0,a.jsx)(L,{style:{...l,isFilled:n},colorMode:t}),variant:"ghost",size:"sm",isActive:l.isFilled===n,onClick:()=>e.style({isFilled:n}),children:n?(0,a.jsx)(S.x6,{id:"5bi1la"}):(0,a.jsx)(S.x6,{id:"dD7NPy"})},n?"fill":"outline"))}),(0,a.jsx)(j.l,{children:(0,a.jsx)(S.x6,{id:"1HfW/F"})}),(0,a.jsx)(k.r,{columns:4,spacing:2,w:"100%",children:Object.entries(i.JM).map(n=>{let[i,r]=n;return z[r]?(0,a.jsx)(y.K,{icon:(0,a.jsx)(L,{style:{...l,color:r},colorMode:t}),variant:"ghost",size:"md","aria-label":i,isActive:l.color===r,onClick:()=>e.style({color:r})},r):null})})]})})]})};var T=n(63552),P=n(24221),O=n(9104);let D=(0,T.R)((e,t)=>{let{label:n,icon:i,tooltipPlacement:r="top",...o}=e;return(0,a.jsx)(O.Tz,{placement:r,label:n,isDisabled:!n,children:(0,a.jsx)(y.K,{"aria-label":n||"",ref:t,size:"sm",variant:"",icon:(0,a.jsx)(P.g,{icon:i}),color:"trueblue.600",textShadow:"0px 1px 0px rgba(0,0,0,0)",fontWeight:"500",borderRadius:"md",borderWidth:"1px",backdropFilter:"blur(20px)",borderColor:"transparent",_hover:{bg:"gray.100",borderColor:"gray.200"},_focus:{bg:"gray.100",borderColor:"gray.200"},_active:{bg:"trueblue.100",borderColor:"trueblue.200"},...o})})}),F=e=>{let{children:t,...n}=e;return(0,a.jsx)(r.s,{bg:"#F9FAFBDD",p:1,borderWidth:"1px",borderColor:"whiteAlpha.600",borderRadius:"xl",shadow:"xl",...n,children:t})},H={[i.Hu.Start]:g.ecg,[i.Hu.Middle]:g._ur,[i.Hu.End]:g.jbh},W=()=>{let e=v(),t=e.useStore(I),n=e.useStore(R),r=M(e,n),o={...t,...r};return(0,a.jsxs)(u.A,{trigger:"hover",children:[(0,a.jsx)(p.W,{children:(0,a.jsx)(D,{icon:H[o.textAlign||i.Hu.Start]})}),(0,a.jsx)(h.h,{background:"none",shadow:"none",w:"fit-content",children:(0,a.jsx)(F,{direction:"column",children:(0,a.jsxs)(m.e,{children:[(0,a.jsx)(D,{icon:g.ecg,label:x.Ru._({id:"IR6Txi"}),onClick:()=>e.style({textAlign:i.Hu.Start}),isActive:o.textAlign===i.Hu.Start},"align-left"),(0,a.jsx)(D,{icon:g._ur,label:x.Ru._({id:"8nOdkO"}),onClick:()=>e.style({textAlign:i.Hu.Middle}),isActive:o.textAlign===i.Hu.Middle},"align-center"),(0,a.jsx)(D,{icon:g.jbh,label:x.Ru._({id:"pd0UH2"}),onClick:()=>e.style({textAlign:i.Hu.End}),isActive:o.textAlign===i.Hu.End},"align-right"),(0,a.jsx)(D,{icon:g.Tip,label:x.Ru._({id:"18P2qJ"}),onClick:()=>e.style({textAlign:i.Hu.Justify}),isActive:o.textAlign===i.Hu.Justify},"justify")]})})})]})},B=e=>e.document.pageStates[e.appState.currentPageId].selectedIds.some(t=>void 0!==e.document.pages[e.appState.currentPageId].shapes[t].children),V=e=>"idle"===e.appState.status&&e.document.pageStates[e.appState.currentPageId].selectedIds.length>0,G=e=>e.document.pageStates[e.appState.currentPageId].selectedIds.length,U=e=>{let t=e.appState.currentPageId,n=e.document.pages[t];for(let i of e.document.pageStates[t].selectedIds)if("text"in n.shapes[i])return!0;return!1},K=s.memo(function(){let e=v(),{isGammaOrgUser:t}=(0,d.ur)(),n=e.useStore(V),o=e.useStore(B),l=e.useStore(G),s=e.useStore(U);return(0,a.jsx)(r.s,{w:"100%",direction:"row",position:"absolute",bottom:2,align:"flex-end",justify:"center",zIndex:1,children:(0,a.jsx)(F,{children:(0,a.jsxs)(c.z,{spacing:2,children:[t&&(0,a.jsx)(D,{icon:g.XYS,label:x.Ru._({id:"SpTWH3"}),onClick:()=>e.exportImage(i.Xi.SVG,{scale:1,quality:1})},"download"),n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(D,{icon:g.yLS,label:x.Ru._({id:"/Wgayn"}),onClick:()=>e.delete(),"data-testid":"drawing-edit-toolbar-delete"},"delete"),(0,a.jsx)(q,{}),l>=2&&(0,a.jsx)(J,{}),l>=2||o?(0,a.jsx)(D,{icon:g.cWs,label:o?"Ungroup selection":"Group selection",onClick:()=>o?e.ungroup():e.group(),isActive:o},"group"):null]}),(0,a.jsx)(N,{}),s&&(0,a.jsx)(W,{})]})})})}),q=()=>{let e=v();return(0,a.jsxs)(u.A,{trigger:"hover",children:[(0,a.jsx)(p.W,{children:(0,a.jsx)(D,{icon:g.B4x})}),(0,a.jsx)(h.h,{background:"none",shadow:"none",w:"fit-content",children:(0,a.jsxs)(F,{direction:"row",children:[(0,a.jsx)(D,{icon:g.bKR,label:x.Ru._({id:"J6qWQV"}),onClick:()=>e.moveToFront()},"front"),(0,a.jsx)(D,{icon:g.B4x,label:x.Ru._({id:"9xFjqz"}),onClick:()=>e.moveForward()},"forward"),(0,a.jsx)(D,{icon:g.PW6,label:x.Ru._({id:"OfSb1W"}),onClick:()=>e.moveBackward()},"backward"),(0,a.jsx)(D,{icon:g.jb9,label:x.Ru._({id:"/zBSYY"}),onClick:()=>e.moveToBack()},"back")]})})]})},J=()=>{let e=v();return(0,a.jsxs)(u.A,{trigger:"hover",children:[(0,a.jsx)(p.W,{children:(0,a.jsx)(D,{icon:g.gD3})}),(0,a.jsx)(h.h,{background:"none",shadow:"none",w:"fit-content",children:(0,a.jsxs)(F,{direction:"column",children:[(0,a.jsxs)(m.e,{children:[(0,a.jsx)(D,{icon:g.gD3,label:x.Ru._({id:"IR6Txi"}),onClick:()=>e.align(i.qx.Left)},"align-left"),(0,a.jsx)(D,{icon:g.im,label:x.Ru._({id:"8nOdkO"}),onClick:()=>e.align(i.qx.CenterHorizontal)},"align-center"),(0,a.jsx)(D,{icon:g.j7A,label:x.Ru._({id:"pd0UH2"}),onClick:()=>e.align(i.qx.Right)},"align-right"),(0,a.jsx)(D,{icon:g.yC$,label:x.Ru._({id:"8lqfXb"}),onClick:()=>e.distribute(i.Od.Horizontal)},"distribute-h")]}),(0,a.jsxs)(m.e,{children:[(0,a.jsx)(D,{icon:g.MVg,label:x.Ru._({id:"/Q0jUh"}),onClick:()=>e.align(i.qx.Top)},"align-top"),(0,a.jsx)(D,{icon:g.cse,label:x.Ru._({id:"QhuQN2"}),onClick:()=>e.align(i.qx.CenterVertical)},"align-middle"),(0,a.jsx)(D,{icon:g.QaE,label:x.Ru._({id:"EPnxoe"}),onClick:()=>e.align(i.qx.Bottom)},"align-bottom"),(0,a.jsx)(D,{icon:g.iHb,label:x.Ru._({id:"a1NrWf"}),onClick:()=>e.distribute(i.Od.Vertical)},"distribute-v")]})]})})]})};var $=n(70323),Y=n(3040);let Q=()=>[{icon:Y.eX_,label:x.Ru._({id:"rG3WVm"}),tool:"select"},{icon:g.IP$,label:x.Ru._({id:"Ajc4TJ"}),tool:"erase"},{icon:Y.adM,label:x.Ru._({id:"rjuFFw"}),tool:i.gs.Line},{icon:Y.U6Q,label:x.Ru._({id:"zFkhx3"}),tool:i.gs.Arrow},{icon:Y.vti,label:x.Ru._({id:"30KLDI"}),tool:i.gs.Rectangle},{icon:Y.GEE,label:x.Ru._({id:"7xMmki"}),tool:i.gs.Ellipse},{icon:Y.CKr,label:x.Ru._({id:"ucHvJP"}),tool:i.gs.Triangle},{icon:Y.jwR,label:x.Ru._({id:"xeiujy"}),tool:i.gs.Text}],X=e=>e.appState.activeTool,Z=s.memo(function(){let e=v(),t=e.useStore(X);return(0,a.jsx)(r.s,{h:"100%",direction:"column",position:"absolute",right:2,align:"flex-end",justify:"center",zIndex:1,children:(0,a.jsx)(F,{children:(0,a.jsx)(w.T,{spacing:2,children:Q().map(n=>{let{label:i,icon:r,tool:o}=n;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(D,{icon:r,label:i,onClick:()=>e.selectTool(o),isActive:t===o,tooltipPlacement:"left","data-testid":"drawing-insert-toolbar-".concat(o)},i),"select"==o&&(0,a.jsx)($.c,{},"selectDivider")]})})})})})});var ee=n(63341),et=n(18528),en=n(72821),ei=n(33683);let ea=e=>e.document.pageStates[e.appState.currentPageId].camera.zoom,er=e=>e.settings.showGrid,eo=s.memo(function(){let e=v(),t=e.useStore(er);return(0,a.jsx)(r.s,{position:"absolute",top:2,left:2,zIndex:1,children:(0,a.jsx)(F,{children:(0,a.jsxs)(c.z,{spacing:2,children:[(0,a.jsx)(el,{}),(0,a.jsx)(D,{icon:Y.XgR,label:t?x.Ru._({id:"IsBZFj"}):x.Ru._({id:"mWgfWA"}),isActive:t,onClick:()=>e.setSetting("showGrid",!t)},"grid")]})})})}),el=s.memo(function(){let e=v(),t=e.useStore(ea);return(0,a.jsxs)(ee.W,{children:[(0,a.jsxs)(et.I,{as:C.$,"data-test-id":"zoom-menu-button",size:"sm",colorScheme:"trueblue",variant:"ghost",leftIcon:(0,a.jsx)(P.g,{icon:g.$UM}),children:[Math.round(100*t),"%"]}),(0,a.jsxs)(en.c,{children:[(0,a.jsx)(ei.D,{command:"#+",onClick:e.zoomIn,children:(0,a.jsx)(S.x6,{id:"AWOSPo"})}),(0,a.jsx)(ei.D,{command:"#-",onClick:e.zoomOut,children:(0,a.jsx)(S.x6,{id:"FjkaiT"})}),(0,a.jsx)(ei.D,{command:"0",onClick:e.resetZoom,children:(0,a.jsx)(S.x6,{id:"41NrIs"})}),(0,a.jsx)(ei.D,{command:"1",onClick:e.zoomToFit,"data-test-id":"zoom-to-fit-button",children:(0,a.jsx)(S.x6,{id:"pLI1Is"})})]})]})});var es=n(74327);let ed=e=>({onAssetCreate:(0,s.useCallback)(async(t,n,a)=>{if(!e)return console.warn("[useAssetUpload] OrgId is required to upload assets"),!1;let r=URL.createObjectURL(n);console.debug("[useAssetUpload] Handling upload for file",{file:n,id:a,tempUrl:r});let o=e=>{let n=t.assets.find(e=>e.id===a);if(n){console.debug("[useAssetUpload] Upload complete. Replacing temp asset",{id:a,src:e.src});let i={document:{assets:{[a]:{...n,src:e.src}}}};t.patchState(i,"upload"),t.persist(i,"upload")}};return(0,es.QM)(n,e,{onOriginalFileUpload:o,onUploadComplete:o}),t.patchState({document:{assets:{[a]:{id:a,type:i.zO.Image,fileName:n.name,src:r}}}}),r},[e]),onAssetDelete:(0,s.useCallback)(async(e,t)=>!0,[])});var ec=n(45905);let eu={dash:i.c.Solid,isFilled:!0,color:i.JM.White},ep=e=>{let{isDark:t,font:n,...c}=e,{currentWorkspace:u}=(0,d.ur)(),[p,h]=(0,s.useState)(),[m,g]=(0,s.useState)(!1),x=(0,s.useCallback)(e=>{h(e),e.style(eu,[]),g(!0)},[]),{onAssetCreate:v,onAssetDelete:b}=ed(null==u?void 0:u.id);(0,s.useEffect)(()=>{p&&void 0!==t&&p.setSetting("isDarkMode",t)},[p,t]);let y=(0,s.useMemo)(()=>(0,ec.k)(t),[t]),w=(0,s.useMemo)(()=>(0,ec.I)(n),[n]);return(0,a.jsxs)(r.s,{sx:{".tl-canvas":{"div, text, textarea":{...w},...y,'g[cursor="grab"][aria-label="link handle"]':{display:"none"}}},onDrop:()=>{},onPaste:()=>{},position:"relative",h:"100%",w:"100%",className:"highlight-mask",children:[(0,a.jsx)(l.mL,{styles:{"#__textLabelMeasure, #__textMeasure":{...w}}}),(0,a.jsxs)(f.Provider,{value:p||{},children:[(0,a.jsx)(i.Z1,{onAssetCreate:v,onAssetDelete:b,...c,onMount:(0,o.Hj)(c.onMount,x)}),m&&!c.readOnly&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(K,{}),(0,a.jsx)(Z,{})]}),m&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(eo,{})})]})]})};var eh=n(9370),em=n(99474);let eg=e=>eh.Aq.getCommonBounds(e.map(i.ju.getRotatedBounds)),ex=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:128,{shapes:n,pageState:{camera:a},rendererBounds:r}=e;if(0===n.length)return;let o=eg(n);if(!o)return;let l=i.ju.getCameraZoom(Math.min((r.width-t)/o.width,(r.height-t)/o.height)),s=(r.width-o.width*l)/2/l,d=(r.height-o.height*l)/2/l;e.setCamera(em.l.toFixed(em.l.sub([s,d],[o.minX,o.minY])),l,"zoomed_to_fit")}},45905:(e,t,n)=>{"use strict";n.d(t,{I:()=>r,k:()=>o});var i=n(45363);let a=e=>"".concat(e," !important"),r=e=>({fontFamily:a(e)}),o=e=>{let t={"[data-shape=image]":{".tl-inner-div":{}},img:{'&[src^="blob:"]':{animation:"loading-pulse-animation 1.5s infinite"}}},n=Object.values(i.JM),r=e?"dark":"light";return n.forEach(e=>{t['[data-color="'.concat(e,'"]')]={color:a(i.gA.strokes[r][e]),":not(mask) > [fill], &[fill]":{"&:not([fill=none])":{fill:a(i.gA.fills[r][e]),"text, tspan":{fill:a(i.gA.strokes[r][e])}}},"[stroke]":{"&:not([stroke=none])":{stroke:a(i.gA.strokes[r][e])}}}}),t}},37116:(e,t,n)=>{"use strict";n.d(t,{C:()=>I,D:()=>z});var i=n(31085),a=n(80532),r=n(43504),o=n(55642),l=n(1366),s=n(1144),d=n(98213),c=n(28396),u=n(15657),p=n(14041),h=n(77654),m=n(54363),g=n(47687),x=n(65056),f=n(46291),v=n(30138),b=n(33487),y=n(34444),w=n(95905),j=n(37672),k=n(50881),C=n(85700),S=n(32565),A=n(58599);let z=()=>[l.y.extend({content:"block+"}),s.B,g.a,k.f,c.E,f.Hf,y.DZ.configure({HTMLAttributes:{class:h.U6}}),b.B,v.Z4,r.yN,u.z,d.J2,S.r,S.f,w.wq,C.n,j.N.extend({excludes:"underline link",renderHTML(e){let{HTMLAttributes:t}=e,{href:n}=t;return["a",{...this.options.HTMLAttributes,href:n,class:"link"},0]}}).configure({openOnClick:!1}),o.Cy,x.mM,f.mk],I=e=>{let{isEditing:t,disableGradients:n,...r}=e,o=(0,p.useMemo)(()=>z(),[]),l=(0,A.hG)({extensions:o,parseOptions:{preserveWhitespace:"full"},...r,editable:!0});return(0,p.useEffect)(()=>{t?(null==l||l.commands.focus(),l.setEditable(!0)):(null==l||l.commands.blur(),l.setEditable(!1))},[t,l]),l.isThumbnail=!0,l.shouldUseLiteMenus=!0,(0,i.jsxs)(a.az,{sx:{width:"100%"},className:n?h.Dv:void 0,children:[(0,i.jsx)(A.$Z,{style:{width:"100%"},className:"text",editor:l}),(0,i.jsx)(m.Ht,{editor:l,appendToSelector:"[data-tldraw-menu-root]"})]})}},1935:(e,t,n)=>{"use strict";n.d(t,{Lf:()=>c,Lh:()=>d});var i=n(69011),a=n.n(i),r=n(14041);class o{observe(e,t){this.observer?(this.observer.observe(e),this.observedElements.set(e,t)):t(s)}unobserve(e){this.observer&&(this.observer.unobserve(e),this.observedElements.delete(e),this.nextTickCallbacks.delete(e))}handleResize(e){let t=!1;for(let n of e){let e=this.observedElements.get(n.target);e&&(t=!0,this.nextTickCallbacks.set(n.target,()=>{e(n.contentRect)}))}t&&this.queueProcess()}queueProcess(){this.frameId&&(cancelAnimationFrame(this.frameId),this.frameId=null),this.frameId=requestAnimationFrame(()=>{for(let e of this.nextTickCallbacks.values())e();this.frameId=null})}constructor(){this.observedElements=new Map,this.nextTickCallbacks=new Map,this.frameId=null,this.observer=null,"undefined"!=typeof ResizeObserver&&(this.observer=new ResizeObserver(e=>this.handleResize(e)))}}let l=a()(()=>new o),s={width:1,height:1,top:0,left:0,fontSize:0};function d(e){let t=(0,r.useRef)(null),[{height:n,width:i},a]=(0,r.useState)(s);return(0,r.useEffect)(()=>{let e=t.current;return e&&l().observe(e,a),()=>{e&&l().unobserve(e)}},[e]),{ref:t,width:i,height:n}}function c(e){let t=(0,r.useRef)(null),[{height:n,width:i,top:a,left:o,fontSize:d},c]=(0,r.useState)(s);return(0,r.useEffect)(()=>{let e=t.current;return e&&l().observe(e,t=>{var n;c({width:t.width,height:t.height,top:e.offsetTop,left:e.offsetLeft,fontSize:null!==(n=parseFloat(window.getComputedStyle(e).fontSize))&&void 0!==n?n:16})}),()=>{e&&l().unobserve(e)}},[e]),{ref:t,width:i,height:n,top:a,left:o,fontSize:d}}},2156:(e,t,n)=>{"use strict";n.d(t,{D:()=>i});let i={generate:(0,n(99742).d_)("0123456789abcdefghijklmnopqrstuvwxyz",15)}},13166:(e,t,n)=>{"use strict";n.d(t,{OG:()=>p,VJ:()=>g,WP:()=>f,wS:()=>m});var i=n(77563),a=n(42984),r=n(87200),o=n(19141),l=n(58732),s=n(66820),d=n(71271),c=n(16719),u=n(14979);let p=e=>{try{let t=(0,u.R6)(),n=(0,i.A)(e),d=(0,a.A)(n,0);if((0,r.A)(n)||(0,o.A)(n))return(0,l.A)(d,new Date,{locale:t});return"".concat((0,s.A)(n,"PPp",{locale:t}))}catch(e){return console.error("[normalizeDate] Error normalizing date:",e),"date unknown"}},h=e=>null==e?void 0:e.reduce((e,t)=>!e||t.updatedTime>(null==e?void 0:e.updatedTime)?t:e,null),m=e=>{let t=h(e.replies);return t?e.updatedTime>(null==t?void 0:t.updatedTime)?e.updatedTime:t.updatedTime:e.updatedTime},g=(e,t)=>{let n=h(e.replies),i=h(t.replies),a=n?n.updatedTime:e.updatedTime,r=i?i.updatedTime:t.updatedTime;return a>r?-1:r>a?1:0},x="createdTime",f=e=>{let{items:t,sortBy:n=x,latestTimeGetterFn:a}=e;return t.slice().sort((e,t)=>"function"==typeof n?n(e,t):(0,d.A)((0,i.A)(e[n]),(0,i.A)(t[n]))).reduce((e,t)=>{let n=a?(0,i.A)(a(t)):(0,i.A)(t[x]),o=new Date;return(0,r.A)(n)?e.today=e.today.concat(t):1>(0,c.A)(o,n)?e.thisWeek=e.thisWeek.concat(t):e.earlier=e.earlier.concat(t),e},{today:[],thisWeek:[],earlier:[]})}},81112:(e,t,n)=>{"use strict";n.d(t,{e7:()=>i,gj:()=>a}),n(87835),n(14041);let i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;return e.length?1===e.length?e[0]:2===e.length?e.join(" and "):e.length<=t?"".concat([e.slice(0,e.length-1).join(", "),e[e.length-1]].join(", and ")):"".concat([e.slice(0,t).join(", "),"".concat(e.length-t," ").concat(e.length-t>1?"others":"other")].join(", and ")):null},a=e=>{let{users:t,selfUserId:n}=e;return i(t?[...t].sort(e=>(null==e?void 0:e.id)===n?-1:1).map(e=>(null==e?void 0:e.id)===n?"You":(null==e?void 0:e.displayName)||""):[])}},26374:(e,t,n)=>{"use strict";n.d(t,{KS:()=>u,i$:()=>p});var i=n(69011),a=n.n(i),r=n(12784),o=n.n(r),l=n(14041),s=n(36832);class d extends s.b{cleanup(){document.removeEventListener("containerResize",this.emitResize)}constructor(){super(),this.emitResize=e=>{this.emit("resize",e)},document.addEventListener("containerResize",this.emitResize)}}let c=a()(()=>new d),u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,[n,i]=(0,l.useState)(!1),a=(0,l.useMemo)(c,[]);return(0,l.useEffect)(()=>{let n;let r=o()(a=>{let{target:r}=a;r&&e.current&&h(e.current,r)&&(clearTimeout(n),i(!0),n=setTimeout(()=>{i(!1)},t+100))},t,{leading:!0,trailing:!1,maxWait:t});return a.on("resize",r)},[a,t,e]),n},p=e=>{e.dispatchEvent(new Event("containerResize",{bubbles:!0}))},h=(e,t)=>{let n=e;do{if(n!==t)continue;return!0}while(n=n.parentElement);return!1}},74801:(e,t,n)=>{"use strict";n.d(t,{u:()=>r,z:()=>o});var i=n(14041),a=n(59707);let r="is-dragging-over",o=(e,t)=>{let n=(0,i.useCallback)(n=>{var i;(!t||t(n))&&(null===(i=e.current)||void 0===i||i.classList.add(r))},[e]),o=(0,i.useCallback)(()=>{var t;return null===(t=e.current)||void 0===t?void 0:t.classList.remove(r)},[e]);return{onDragOver:a.JO,onDragEnter:n,onDragLeave:o,onDrop:o}}},52207:(e,t,n)=>{"use strict";n.d(t,{L:()=>i});let i=(e,t)=>r(new a(e,null),t);class a{get type(){return this.jsonNode.type}get text(){return this.jsonNode.text}get content(){return this.jsonNode.content?this.jsonNode.content.map(e=>new a(e,this)):this.jsonNode.content}get attrs(){return this.jsonNode.attrs}set attrs(e){this.jsonNode.attrs=e}constructor(e,t){this.jsonNode=e,this.parent=t,this.__type="JSONContentNode"}}let r=(e,t)=>{if(t(e),e.content)for(let n of e.content)r(n,t)}},20284:(e,t,n)=>{"use strict";n.d(t,{b:()=>l});var i=n(2940),a=n.n(i),r=n(99742);class o{_flush(){this._handle=0;let e=this._queue;this._queue=[],e.forEach(e=>{let{fn:t}=e;t()})}push(e,t){if(t){let n=this._queue.findIndex(e=>e.id===t);n>-1?this._queue.splice(n,1,{fn:e,id:t}):this._queue.push({fn:e,id:t})}else this._queue.push({fn:e,id:(0,r.Ak)(5)});this._handle||(this._handle=requestAnimationFrame(this._flush.bind(this)))}constructor(){this._queue=[],this._handle=0,this._handle=requestAnimationFrame(this._flush.bind(this))}}let l=a()(()=>new o)},75961:(e,t,n)=>{"use strict";n.d(t,{B:()=>r});var i=n(12327),a=n(39286);let r=e=>e&&e.length?e:i.Ru._({id:"7ZviFu",values:{GAMMA_ARTIFACT_PROPER_NOUN:a.TP}})},61077:(e,t,n)=>{"use strict";let i;n.d(t,{W:()=>r});var a=n(71651);let r=n.n(a)()(i)},74505:(e,t,n)=>{"use strict";n.d(t,{W:()=>a,x:()=>i});let i=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t)throw Error("unexpected value ".concat(e))},a=e=>Object.entries(e)},53766:(e,t,n)=>{"use strict";n.d(t,{v:()=>d});var i=n(14041),a=n(73893),r=n(35002),o=n(98371);class l{static observeElement(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return"function"!=typeof IntersectionObserver?()=>{}:l.instance.doObserveElement(...t)}static get instance(){return l._instance||(l._instance=new l),l._instance}doObserveElement(e,t,n){let{rootMargin:i="0px 0px 0px 0px",root:a=null}=n,r=this.getObserverForRoot(a,i);return this.callbacksMap.has(r)||this.callbacksMap.set(r,new Map),this.callbacksMap.get(r).set(e,t),r.observe(e),()=>{this.disconnect(e,i,a)}}disconnect(e,t,n){var i,a;let r=this.getObserverForRoot(n,t,!0);if(!r)return;r.unobserve(e);let o=this.callbacksMap.get(r);o&&o.delete(e),(null==o||!o.size)&&(r.disconnect(),this.callbacksMap.delete(r),null===(i=this.intersectionObserversMap.get(n))||void 0===i||i.delete(t),(null===(a=this.intersectionObserversMap.get(n))||void 0===a?void 0:a.size)||this.intersectionObserversMap.delete(n))}getObserverForRoot(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this.intersectionObserversMap.has(e)){if(n)return;this.intersectionObserversMap.set(e,new Map)}let i=this.intersectionObserversMap.get(e);if(!i.has(t)){if(n)return;i.set(t,new IntersectionObserver(this.intersectionCallback.bind(this),{root:e,rootMargin:t}))}return i.get(t)}intersectionCallback(e,t){let n=new Map,i=this.callbacksMap.get(t);i&&(e.forEach(e=>{n.has(e.target)||n.set(e.target,[]),n.get(e.target).push(e)}),n.forEach((e,t)=>{try{var n;null===(n=i.get(t))||void 0===n||n(e)}catch(e){console.error(e)}}))}constructor(){this.intersectionObserversMap=new Map,this.callbacksMap=new Map}}l._instance=null;class s{get stats(){let e={};return this.entries.forEach(t=>{var n;let{status:i}=t;e[i]=(null!==(n=e[i])&&void 0!==n?n:0)+1}),e}static get instance(){return s._instance||(s._instance=new s),s._instance}constructor(){this.entries=new Map,a.$.DEBUG_ENABLED&&"object"==typeof globalThis&&(globalThis.gammaInViewportStats=this)}}s._instance=void 0;let d=function(){var e,t,n;let{intersectionMargin:a="100% 0px 100% 0px",memoGroup:d,...c}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=(0,r.u)("enableVirtualization"),p=(0,i.useId)(),h=(0,i.useRef)(),m=(0,i.useRef)(),g=u?c.dimensions?"HIDDEN":"PENDING":"VISIBLE",[x,f]=(0,i.useState)(g),v=(0,i.useRef)(x),[b,y]=(0,i.useState)(null!==(n=c.dimensions)&&void 0!==n?n:void 0),w=(0,i.useMemo)(()=>{let e=()=>{if("HIDDEN"===v.current&&h.current){let e=h.current.getBoundingClientRect();y({width:e.width,height:e.height})}f(v.current)},t=null;return function(n){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;v.current=n,t&&(clearTimeout(t),t=null),t=setTimeout(()=>{t=null,e()},i)}},[]),j=null==c?void 0:c.loading,k=(e,t)=>{var n,i;if(!u){w("VISIBLE"),null===(n=m.current)||void 0===n||n.call(m);return}if(!e||j){null===(i=m.current)||void 0===i||i.call(m);return}let r=(0,o.Hc)(e,t);m.current=l.observeElement(e,e=>{var t;let n=null!==(t=v.current)&&void 0!==t?t:"PENDING",i=e.find(e=>e.isIntersecting);if("VISIBLE"!==n&&i){w("VISIBLE");return}"HIDDEN"===n||i||w("HIDDEN",1500)},{root:r,rootMargin:a})},C=(0,i.useCallback)(()=>{if(!h.current){var e;null===(e=m.current)||void 0===e||e.call(m);return}if(!c.loading){if(k(h.current,d),!c.dimensions&&!b){let e=h.current.getBoundingClientRect();y({width:e.width,height:e.height})}"PENDING"===v.current&&w("HIDDEN")}},[w,c.loading,null===(e=c.dimensions)||void 0===e?void 0:e.width,null===(t=c.dimensions)||void 0===t?void 0:t.height,null==b?void 0:b.width,null==b?void 0:b.height,d]),S=(0,i.useCallback)(e=>{h.current!==e&&(h.current=e,C())},[C]);return(0,i.useEffect)(()=>{var e;return s.instance.entries.set(p,{status:x,el:null!==(e=h.current)&&void 0!==e?e:null}),()=>{s.instance.entries.delete(p)}},[x,p]),{inViewport:"PENDING"===x?void 0:"VISIBLE"===x,ref:S,dimensions:b}}},63422:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KNOWN_BAD_HOSTNAMES=t.KNOWN_GOOD_HOSTNAMES=t.KNOWN_GOOD_TLDS=t.TRUSTED_WORKSPACE_IDS=t.GAMMA_WORKSPACE_ID_PRODUCTION=t.GAMMA_WORKSPACE_ID_STAGING=t.isTrustedTLD=t.removeWWWPrefix=void 0,t.removeWWWPrefix=e=>e.replace(/^www\./,""),t.isTrustedTLD=e=>t.KNOWN_GOOD_TLDS.some(t=>e===t||e.endsWith(".".concat(t))),t.GAMMA_WORKSPACE_ID_STAGING="QWjS6fBfpt",t.GAMMA_WORKSPACE_ID_PRODUCTION="zc87vhr30n8uf3n",t.TRUSTED_WORKSPACE_IDS=["acme",t.GAMMA_WORKSPACE_ID_STAGING,t.GAMMA_WORKSPACE_ID_PRODUCTION],t.KNOWN_GOOD_TLDS=["gamma.app","gamma.site","gammastaging.site","wikipedia.org"],t.KNOWN_GOOD_HOSTNAMES=["gamma.app","gamma.site","cdn.gamma.app","staging.gamma.app","cdn-staging.gamma.app","careers.gamma.app","design.gamma.site","orzo.gamma.site","www.markdownguide.org","www.youtube.com","www.linkedin.com","www.instagram.com","twitter.com","x.com","www.tiktok.com","help.gamma.app","gamma.new","join.slack.com","www.google.com","www.facebook.com","groups.google.com","en.wikipedia.org","replit.com","www.bea.gov","doi.org","es.wikipedia.org","app.stotles.com","docs.google.com","www.figma.com","www.ncbi.nlm.nih.gov","github.com","youtu.be","tr.wikipedia.org","uk.wikipedia.org","ru.wikipedia.org","ro.wikipedia.org","pt.wikipedia.org","example.com","zh.wikipedia.org","www.sciencedirect.com","fr.wikipedia.org","colab.research.google.com","player.fm","m.facebook.com","www.britannica.com","www.amazon.com","www.podcasts.com","ko.wikipedia.org","www.example.com","vi.wikipedia.org","www.notion.so","chat.openai.com","calendly.com","www.bing.com","pubmed.ncbi.nlm.nih.gov","open.spotify.com","de.wikipedia.org","id.wikipedia.org","www.researchgate.net","techcrunch.com","www.cnn.com","pl.wikipedia.org","api.whatsapp.com","youtube.com","hbr.org","podcasters.spotify.com","ar.wikipedia.org","th.wikipedia.org","dictionary.cambridge.org","www.kaggle.com","es.surveymonkey.com","www.canva.com","www.forbes.com","lookerstudio.google.com","unsplash.com","www.cdc.gov","az.wikipedia.org","it.wikipedia.org","www.investopedia.com","www.pinterest.com","music.amazon.com","kk.wikipedia.org","scholar.google.com","www.nature.com","www.producthunt.com","creativecommons.org","www.masterclass.com","fa.wikipedia.org","www.bbc.com","www.nytimes.com","en.m.wikipedia.org","sr.wikipedia.org","uz.wikipedia.org","ieeexplore.ieee.org","play.google.com","es.m.wikipedia.org","cloud.google.com","www.imdb.com","www.mckinsey.com","aws.amazon.com","www.microsoft.com","chrome.google.com","www.businessinsider.com","bing.com","www.porsche.com","www.apple.com"].map(t.removeWWWPrefix),t.KNOWN_BAD_HOSTNAMES=["trixmovie.com","luna-3d.com","luna-3d.com:443","kiladkoerm.com","movie.geoflix.me","wtach.club","movstream.fun","novelastv.me","xzc.one","srv1.iyxwfree.my.id","followme.tribe.so","xzc.icu","marcolinks.click","multilibb.cc","exl-trk.com","uk.ebookarea.xyz","wemovietv.com","123moviesdb.com","www.realpdfdumps.com","pede.4tv.live","voxmovie.com","stream.evmovies.com","dmovie.fun","pdfhost.io","megavids.online","www.pdfdumpspro.com","gomovie.stream","dmovie.fun:443","go123.stream","ca.ebookarea.xyz","movie4you.online","www.123movieslink.com","moviedaily.site","maxstream.site","ftmovies.xyz","moviescreen.biz","moviesfox.site","morthenfile.web.app"].map(t.removeWWWPrefix)},67963:(e,t,n)=>{"use strict";var i=Object.create?function(e,t,n,i){void 0===i&&(i=n);var a=Object.getOwnPropertyDescriptor(t,n);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,a)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]};Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)}(n(63422),t)},27713:()=>{}}]);
//# sourceMappingURL=8786-669480392e6ff79d.js.map